{"pageProps":{"posts":[{"content":"\n## **Reference**\n\n![default](/images/default.jpg)\n\nDavid A. Patterson, John L. Hennessy,Â Computer Organization and Design\n\në³¸ Postingì€ ë‹¤ìŒ êµì œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì±•í„° ë³„ë¡œ ì •ë¦¬ í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì•„ë˜ë¶€í„°ëŠ” í¸ì˜ë¥¼ ìœ„í•´ \"-ë‹¤\"ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n\n---\n\nì»´í“¨í„°ë¥¼ ì‚¬ìš©í•  ë•Œ, ìš°ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Memoryê°€ ë¬´í•œí•œ í¬ê¸°ë¥¼ ê°€ì§€ê³  ìˆê¸°ë¥¼ ë°”ë€ë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë¹„ìš©ì ìœ¼ë¡œë„, ê¸°ìˆ ì ìœ¼ë¡œë„ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë§ˆì¹˜ ì¡´ì¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ ëŠë¼ë„ë¡ í•˜ëŠ” ê¸°ìˆ ì„ ì‚¬ìš©í•œë‹¤.\n\nì´ë¥¼ ìœ„í•œ í•µì‹¬ì€ `Locality`ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. ë™ì‘ì—ëŠ” ì¸ê³¼ê°€ ì¡´ì¬í•˜ê³ , ê·¸ë ‡ê¸°ì— ì§ì „ì— ìì‹ ì´ í–ˆë˜ í–‰ë™ ê·¸ë¦¬ê³  ê·¼ì²˜ì˜ ëŒ€ìƒë“¤ì´ í–ˆë˜ í–‰ë™ì´ ì§€ê¸ˆì˜ ìì‹ ì´ í•  í–‰ë™ì— ì˜í–¥ì„ ì£¼ëŠ” ê²ƒì€ ì–´ì°Œë³´ë©´ ë‹¹ì—°í•œ ì‚¬ì‹¤ì´ë‹¤. ì´ëŸ¬í•œ íŠ¹ì§•ì´ `Locality`ì´ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ ìš°ë¦¬ëŠ” Memoryë¥¼ ë§ˆì¹˜ ë¬´í•œì¸ ê²ƒì²˜ëŸ¼ ëŠë‚„ ìˆ˜ ìˆê²Œ í•  ìˆ˜ ìˆë‹¤.\n\n1. **Temporal Locality**\n   í•˜ë‚˜ì˜ Instruction ë˜ëŠ” dataê°€ ì‚¬ìš©ë˜ì—ˆë‹¤ë©´, í•´ë‹¹ ë‚´ìš©ì€ ê³§ ë‹¤ì‹œ ì‚¬ìš©ë  í™•ë¥ ì´ ë§¤ìš° ë†’ë‹¤.(ë°˜ë³µë¬¸ì¼ ê²½ìš°ì—ëŠ” ê·¹ëª…í•˜ê²Œ ë“œëŸ¬ë‚  ê²ƒì´ë‹¤.)\n2. **Spatial Locality**\n   í•˜ë‚˜ì˜ Instruction ë˜ëŠ” dataê°€ ì‚¬ìš©ë˜ì—ˆë‹¤ë©´, í›„ì— ì´ ê·¼ì²˜ì— ìˆëŠ” ë‚´ìš©ì„ ì‚¬ìš©í•  í™•ë¥ ì´ ë§¤ìš° ë†’ë‹¤. (ì¼ë°˜ì ìœ¼ë¡œ ì—°ì†ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²½ìš°ê°€ ë§ê¸° ë•Œë¬¸ì— ê·¼ì²˜ì˜ ëª…ë ¹ì–´ë“¤ì„ ê°™ì´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ë©´, ê°€ì ¸ì˜¤ëŠ” ê²ƒì€ í•©ë¦¬ì ì´ë‹¤.)\n\nì´ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ì„œ, ìš°ë¦¬ëŠ” **Memory Hierarcy**ë¼ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤. ì¦‰, ë©”ëª¨ë¦¬ë¥¼ ê³„ì¸µí™”í•˜ëŠ” ê²ƒì´ë‹¤. ëª¨ë“  ì¥ì¹˜ë¥¼ ë¹ ë¥´ê³ , í¬ê³ , ì‹¸ê²Œ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ë¶ˆê°€ëŠ¥í•˜ê¸°ì— ë¹ ë¥´ê³ , ì‘ì€ ì¥ì¹˜ë¥¼ processorì— ê°€ê¹Œì´ì— ë‘ê³ , ê·¸ ë³´ë‹¤ëŠ” ëœ ë¹ ë¥´ê³ , í° ì¥ì¹˜ë¥¼ ì¢€ ë” ê±°ë¦¬ë¥¼ ë‘ê³  ìœ„ì¹˜ì‹œí‚¤ëŠ” ë°©ì‹ì´ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì´ìš©ìì—ê²Œ ì‹¸ë©´ì„œ, ë¹ ë¥¸ ì‹œìŠ¤í…œì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.\n\nì´ë¥¼ ìœ„í•´ì„œ, ìš°ë¦¬ëŠ” ë” ë©€ë¦¬ ìˆëŠ” Memoryì—ì„œ ì •ë³´ë¥¼ ë³µì‚¬í•´ì„œ ë” ìƒìœ„ì˜ Memoryì— ë¶™ì—¬ë„£ê¸°í•˜ëŠ” ê²ƒì´ë‹¤. ê³„ì¸µ êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— í•œ ë²ˆì— ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ë‹¨ê³„ê°€ ìˆë‹¤ë©´, ì°¨ê·¼ì°¨ê·¼ ìˆœì„œì— ë§ì¶°ì„œ ìˆ˜í–‰ëœë‹¤. ì¦‰, ë‹¨ê³„ë¥¼ skipí•˜ì—¬ ì´ë™í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n\në§Œì•½, ìƒìœ„ Memory ì¥ì¹˜ì—ì„œ ì›í•˜ëŠ” ì •ë³´(Block, Line)ë¥¼ ì°¾ì•˜ë‹¤ë©´ ì´ë¥¼ `hit`ë¼ê³  í•˜ê³ , ì°¾ì§€ ëª»í–ˆë‹¤ë©´ ì´ë¥¼ `miss`ë¼ê³  í•œë‹¤. ë˜í•œ, `hit time`ì€ ìƒìœ„ Memoryê°€ í•´ë‹¹ Blockì— ì ‘ê·¼í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤. ë°˜ëŒ€ë¡œ `miss penalty`ëŠ” ìƒìœ„ Memoryë¡œ í•´ë‹¹ Blockì„ ìœ„ì¹˜ì‹œí‚¤ëŠ” ì‹œê°„ê³¼ Blockì„ processorì— ì „ë‹¬í•˜ëŠ” ì‹œê°„ê¹Œì§€ë¥¼ í¬í•¨í•œë‹¤.\n\n---\n\nì‹œì‘í•˜ê¸°ì— ì• ì„œ, ì»´í“¨í„° ê³µí•™ì„ ê³µë¶€í•˜ëŠ” ëˆ„êµ¬ë‚˜ ê²ªëŠ” í˜„ìƒì´ë¼ê³  ìƒê°í•˜ëŠ”ë° ë°”ë¡œ Memory íŒŒíŠ¸ëŠ” ì–¸ì–´ê°€ ë§¤ìš° ìê¸° ë©‹ëŒ€ë¡œ ë‚˜ì˜¤ëŠ” ê²½í–¥ì´ ìˆë‹¤. ì¦‰, ê¹”ë”í•œ ì •ë¦¬ê°€ ë˜ì§€ëŠ” ì•Šì•˜ë‹¤. Memoryê°€ ì–´ë–¨ ë•ŒëŠ” Main Memoryë¥¼ ì˜ë¯¸í•˜ë‹¤ê°€ ì „ì²´ ëª¨ë“  ì €ì¥ ì¥ì¹˜ë¥¼ ì˜ë¯¸í•˜ê¸°ë„ í•œë‹¤. ë”°ë¼ì„œ, ì´ ì•„ë˜ë¶€í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì—„ê²©í•˜ê²Œ ë¶„ë¦¬í•˜ì—¬ ì„¤ëª…í•œë‹¤.\n\n1. Memory : ëª¨ë“  ì €ì¥ ì¥ì¹˜ë“¤ì„ ì˜ë¯¸í•œë‹¤. ì¦‰, cache, secondary storage, main memory ë“±ì„ ëª¨ë‘ í¬í•¨í•œ ê°œë…ì´ë‹¤.\n2. Cache : Processorì— ë¶™ì–´ì„œ ë°”ë¡œ ë™ì‘í•˜ëŠ” Memory ì¥ì¹˜\n3. Main Memory : ìš°ë¦¬ê°€ ì£¼ë¡œ RAMì´ë¼ê³  ë¶€ë¥´ëŠ” ì¥ì¹˜\n4. Secondary Storage : ì£¼ë¡œ HDD, SSDë¡œ ì´ë£¨ì–´ì§€ëŠ” ë³´ì¡° ê¸°ì–µ ì¥ì¹˜\n\n## Memory Components\n\nì‹œì‘í•˜ê¸°ì— ì•ì„œ ì‹¤ì œë¡œ ë©”ëª¨ë¦¬ë¥¼ ì´ë£¨ëŠ” êµ¬ì„±ìš”ì†Œë“¤ì„ ë¨¼ì € ì‚´í´ë³´ê³  ê°„ë‹¤.\n\n1. **DRAM**(**Dynamic Random Access Memory**)\n   Main Memoryì— ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¥ì¹˜ë¡œ SRAMë³´ë‹¤ëŠ” ëŠë¦¬ì§€ë§Œ, í™•ì‹¤íˆ ë§ì€ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤. í•˜ë‚˜ì˜ bitë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ 1ê°œì˜ transistorë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ì´ transistorì—ì„œ ì „ë ¥ì´ ìƒˆì–´ ë‚˜ê°€ê¸° ë•Œë¬¸ì— ì •ë³´ë¥¼ ìƒëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œ ì£¼ê¸°ì ìœ¼ë¡œ refreshë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.\n   Random Accessë¼ëŠ” ì˜ë¯¸ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì•ì—ì„œë¶€í„° íƒìƒ‰í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹ˆê³ , ì°¾ê³ ìí•˜ëŠ” ë°ì´í„°ë¥¼ ë°”ë¡œ ì°¾ì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ë”°ë¼ì„œ, ì•ì—ì„œë¶€í„° ì°¾ëŠ” ë°©ì‹ë³´ë‹¤ ë” ë¹ ë¥¼ ìˆ˜ ë°–ì— ì—†ë‹¤.\n   íœ˜ë°œì„± ì €ì¥ ì¥ì¹˜ì´ê¸° ë•Œë¬¸ì— ì „ë ¥ì´ ê³µê¸‰ë˜ì§€ ì•Šìœ¼ë©´ ì •ë³´ë¥¼ ëª¨ë‘ ìƒëŠ”ë‹¤.\n2. **SRAM**(**Static Random Access Memory**)\n   Cacheì— ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¥ì¹˜ë¡œ ë§¤ìš° ë¹ ë¥¸ ì—°ì‚°ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, í¬ê¸°ë¥¼ í¬ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë¹„ìš©ì´ ë„ˆë¬´ ë¹„ì‹¸ì§„ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. í•˜ë‚˜ì˜ bitë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ 6ê°œì˜ transistorë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ë•ë¶„ì— ì „ë ¥ì„ ë‹¤ì‹œ ê³µê¸‰í•´ì£¼ëŠ” refresh ê³¼ì •ì´ í•„ìš”ì—†ë‹¤.\n   ê³¼ê±°ì—ëŠ” processor ë°–ì—ì„œ chip í˜•íƒœë¡œ ì¡´ì¬í•˜ì˜€ì§€ë§Œ, ì ì  íšŒë¡œê°€ ì§‘ì ì´ ë˜ë©°, processorì— í†µí•©ë˜ì—ˆë‹¤.\n   íœ˜ë°œì„± ì €ì¥ ì¥ì¹˜ì´ê¸° ë•Œë¬¸ì— ì „ë ¥ì´ ê³µê¸‰ë˜ì§€ ì•Šìœ¼ë©´ ì •ë³´ë¥¼ ëª¨ë‘ ìƒëŠ”ë‹¤.\n3. **Flash Memory**\n   Electrically Erasable Programmable Read-Only Memory(EEPROM)ì˜ í•œ ì¢…ë¥˜ì´ë‹¤. ë‹¤ë¥¸ ì¥ì¹˜ë“¤ê³¼ëŠ” ë‹¬ë¦¬ writeê°€ flash memoryë¥¼ ë‹³ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ëŒ€ë¶€ë¶„ì˜ flash memoryëŠ” í•œ bitë¥¼ ì“°ê¸°ê°€ ì§‘ì¤‘ë˜ëŠ” í˜„ìƒì„ ë§‰ê¸° ìœ„í•´ì„œ, ì´ë¥¼ ë¶„ì‚°ì‹œí‚¤ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. (wear leveling, ì“°ê¸° íšŸìˆ˜ì— ì œí•œì´ ì¡´ì¬í•œë‹¤.) ì´ëŠ” ëŒ€ê²Œ ëª¨ë°”ì¼ ì¥ì¹˜ë“¤ì˜ ì €ì¥ ì¥ì¹˜ë¡œ ë§ì´ ì‚¬ìš©ë˜ë©°, PCì—ì„œ ì‚¬ìš©í•˜ëŠ” SSDì™€ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤.\n4. **Magnetic Disk**\n   ì¼ëª… ìê¸° í…Œì´í”„ ë°©ì‹ìœ¼ë¡œ, ë‹¤ë¥¸ ì¥ì¹˜ë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ ìê¸°ë ¥ì„ ì´ìš©í•˜ì—¬ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì‹¤ì œë¡œ ë¬¼ë¦¬ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” Diskë¡œ í•˜ì—¬ Hard Diskë¼ê³ ë„ ë¶€ë¥¸ë‹¤.ì´ë¥¼ ì½ê³  ì“°ê¸° ìœ„í•´ì„œëŠ” arm(íŒ”)ì´ë¼ëŠ” ê°œì²´ê°€ diskì˜ ì •ë³´ê°€ ìŠ¤ì—¬ì§„ ìœ„ì¹˜ë¡œ ì´ë™í•´ì•¼ ì½ì„ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ê²ƒì´ ë¬¼ë¦¬ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ì‹œê°„ì´ ì†Œìš”ë˜ê¸° ë•Œë¬¸ì— ì—¬íƒ€ Random Access ì¥ë¹„ë³´ë‹¤ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ í†µí•´ì„œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì •ë³´ì˜ ì–‘ì€ ë§¤ìš° ë§ë‹¤.\n\n## Cache\n\nMain Memoryì™€ Processor ì‚¬ì´ì—ì„œ memory hierarchyë¥¼ ìˆ˜í–‰í•˜ëŠ” ì¥ì¹˜ë¼ê³  í•œë‹¤. í•˜ì§€ë§Œ, í˜„ëŒ€ì—ëŠ” ì´ëŸ¬í•œ êµ¬ì¡°ì— ì˜ê°ì„ ë°›ì•„ì„œ cacheë¥¼ ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ë§ì€ ë¶„ì•¼ì—ì„œ ì´ë¥¼ **localityì˜ ì¥ì ì„ í™œìš©í•˜ê¸° ìœ„í•œ ì¼ì¢…ì˜ ì €ì¥ì†Œ**ë¼ëŠ” ì˜ë¯¸ë¡œ ë§ì´ ì‚¬ìš©í•œë‹¤.\n\n### Cacheì˜ ì—­í• \n\nCacheê°€ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì€ ì €ì¥ ì¥ì¹˜ì´ê¸° ë•Œë¬¸ì— ì½ê¸°ì™€ ì“°ê¸°ê°€ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.\n\n> **Read**\n\nì½ê¸°ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ Cacheì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\n\n1. **Main Memoryì˜ ë°ì´í„°ë¥¼ ì¼ë¶€ ì €ì¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**\n   CacheëŠ” Main Memoryë³´ë‹¤ í¬ê¸°ê°€ ì‘ê¸° ë•Œë¬¸ì— Main Memoryì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì €ì¥í•˜ì§€ ëª»í•œë‹¤. ë”°ë¼ì„œ, ì¼ë¶€ë¶„ì„ ì €ì¥í•˜ëŠ”ë° ì´ë¥¼ ì €ì¥í•  ë•Œ, ê¸°ì¡´ì˜ Main Memoryì—ì„œì˜ ë°ì´í„°ì˜ addressë¥¼ cacheì˜ í¬ê¸°ë§Œí¼ ë‚˜ëˆ„ì–´ cacheì˜ ë²”ìœ„ì— ë“¤ì–´ì˜¤ë„ë¡ í•˜ëŠ” ê²ƒì´ Directed Mappingì´ë‹¤. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì€ ì‹ì´ ì„±ë¦½í•œë‹¤.(ì—¬ê¸°ì„œì˜ Blockì´ë€ í•œ ë²ˆì— cacheë¡œ ê°€ì ¸ì˜¬ ë°ì´í„°ì˜ ë‹¨ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤.)\n   $\\text{Cacheì—ì„œ Blockì˜ ì£¼ì†Œ} =$ $\\text{(Main Memoryì—ì„œ Blockì˜ ì£¼ì†Œ)} \\%$ $\\text{(Cacheì˜ ìš©ëŸ‰)}$\n2. **íŠ¹ì • wordê°€ cacheì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**\n   ì´ë¥¼ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” tagë¥¼ ì´ìš©í•œë‹¤. cache ê³µê°„ìœ¼ë¡œ addressê°€ ë³€í™˜ë˜ì–´ì„œ ìƒëµëœ addressë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤. ì¦‰, cacheì˜ indexë¡œ ì“°ì´ì§€ ì•Šì€ Main Memory Addressì˜ ìƒìœ„ê°’ì„ ê°€ì§€ê³  ìˆë‹¤. ì‰½ê²Œ ìƒê°í•´ì„œ ìœ„ì—ì„œ ë§Œë“¤ì–´ì§„ Cacheì˜ Block ì£¼ì†Œê°€ ë‚˜ë¨¸ì§€ë¼ë©´, tagëŠ” ëª«ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, tagëŠ” ë‹´ê¸°ëŠ” ë°ì´í„°ì— ë”°ë¼ì„œ, ê³„ì†í•´ì„œ ë³€í•˜ì—¬ ì €ì¥ë˜ëŠ” ê°’ì´ë‹¤.\n3. **í•´ë‹¹ ë°ì´í„°ê°€ íƒ€ë‹¹í•œì§€ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**\n   ë§Œì•½, systemì„ ë§‰ bootingì‹œì¼°ë‹¤ë©´, cacheì—ëŠ” ëª¨ë‘ ì´ìƒí•œ ê°’ì´ ë“¤ì–´ê°ˆ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ì˜ëª»ëœ ê°’ì„ ì°¸ì¡°í•  ìˆ˜ë„ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” **valid bit**(1 bit)ë¥¼ ì´ìš©í•˜ì—¬, í•´ë‹¹ ê°’ì´ ì ì ˆí•˜ê²Œ í• ë‹¹í•œ ê°’ì¸ì§€ë¥¼ í‘œê¸°í•œë‹¤.\n4. **ë®ì–´ ì”Œìš°ê¸°ê°€ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.**\n   ì´ ê²½ìš°ëŠ” ê°„ë‹¨íˆ ë®ì–´ ì”Œì–´ë²„ë¦°ë‹¤. ì´ëŠ” ì• ì„œ ì„¤ëª…í•œ **temporal locality**ì™€ ì¼ë§¥ìƒí†µí•œë‹¤. ìµœê·¼ì— ì“´ ë°ì´í„°ê°€ ë‹¤ì‹œ í˜¸ì¶œí•  í™•ë¥ ì´ ë†’ê¸° ë•Œë¬¸ì´ë‹¤.\n\n> **Example**\n\nì™¼ìª½ì´ Cacheê³ , ì˜¤ë¥¸ìª½ì´ Main Memoryì´ë‹¤.\n\n1. ì´ˆê¸° ìƒíƒœ  \n  ![directed-mapping-1](/images/directed-mapping-1.png)\n2. 001011 ìš”ì²­  \n  ![directed-mapping-2](/images/directed-mapping-2.png)\n3. 001011 ì¬ìš”ì²­  \n  ![directed-mapping-3](/images/directed-mapping-3.png)\n4. 110011 ìš”ì²­  \n  ![directed-mapping-4](/images/directed-mapping-4.png)\n\nBlock ë‹¨ìœ„ë¥¼ 4Bytesë¡œ í–ˆë‹¤ë©´, í•˜ë‚˜ì˜ word ë‹¨ìœ„ê°€ Blockì˜ ë‹¨ìœ„ê°€ ë  ê²ƒì´ë‹¤. ê·¸ë ‡ì§€ ì•Šê³  ë” í° ë‹¨ìœ„ë¡œ Blockì„ ì €ì¥í•  ìˆ˜ë„ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” ì´ Blockì˜ ë‹¨ìœ„ë¥¼ ëŠ˜ë¦¬ë©´ miss rateë¥¼ ë‚®ì¶œ ìˆ˜ ìˆë‹¤. ê·¼ì²˜ì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì—¬ëŸ¬ ê°œ ê°€ì§€ë¯€ë¡œ, **spatial locality**ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ê³¼ë„í•˜ê²Œ ëŠ˜ë¦¬ê²Œ ë˜ë©´, ì˜¤íˆë ¤ ì´ë¡œ ì¸í•´ì„œ indexê°€ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ê°€ ì ì  ì‘ì•„ì§„ë‹¤. (í•œ ë§ˆë””ë¡œ cacheì˜ ì „ì²´ í¬ê¸°(ìš©ëŸ‰)ì€ ê³ ì •ì´ê¸° ë•Œë¬¸ì—, ê°€ë¡œë¥¼ ì˜ë¯¸í•˜ëŠ” blockì˜ ì‚¬ì´ì¦ˆê°€ ëŠ˜ì–´ë‚˜ë©´, ì„¸ë¡œë¥¼ ì˜ë¯¸í•˜ëŠ” indexì˜ ë²”ìœ„ê°€ ì¤„ì–´ë“¤ ìˆ˜ ë°–ì— ì—†ë‹¤.) ì´ë¡œ ì¸í•´ì„œ block sizeë¥¼ ë„ˆë¬´ í¬ê²Œ ëŠ˜ë¦¬ê²Œ ë˜ì–´ë„, miss rateëŠ” ì¦ê°€í•˜ê²Œ ëœë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ miss penaltyë„ í¬ê²Œ ì¦ê°€í•œë‹¤. í•´ë‹¹ ë°ì´í„°ë¥¼ cacheì— ëŒì–´ì˜¤ëŠ” ë™ì•ˆì˜ ì‹œê°„ì´ ì¦ê°€í•  ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì ë‹¹í•œ í¬ê¸°ì˜ block ì‚¬ì´ì¦ˆë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, Cacheë¥¼ ì½ê¸°ë¥¼ ìš”ì²­í•˜ì˜€ì§€ë§Œ í•´ë‹¹ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° ì´ë¥¼ `Miss`ë¼ê³  í•˜ëŠ”ë°, `Miss`ê°€ ë°œìƒí•˜ë©´ ì´ ë°ì´í„°ë¥¼ Main Memoryì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ì„œ ì–´ì©” ìˆ˜ ì—†ì´ ìš°ë¦¬ëŠ” stallì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. ì´ëŸ¬í•œ `Miss`ëŠ” êµ‰ì¥í•œ ë¹„ìš©ì„ ë°œìƒì‹œí‚¤ê¸° ë•Œë¬¸ì— ëŒ€ê²Œ ì„¸ê°€ì§€ ë°©ì‹ì— ì˜í•´ì„œ ì´ë¥¼ í•´ê²°í•œë‹¤.\n\n1. Multiprocess or Multithread í™˜ê²½ì—ì„œëŠ” ë‹¤ë¥¸ processë¥¼ í•´ë‹¹ stall ë™ì•ˆ ì‹¤í–‰ì‹œì¼œì„œ ì´ë¥¼ í•´ê²°í•œë‹¤.\n2. OoO(Out of Order) Executionì„ ì§€ì›í•˜ëŠ” ì¥ë¹„ì—ì„œëŠ” ì´ë¥¼ í†µí•´ì„œ stallì„ ë°©ì§€í•œë‹¤.\n3. Softwareë¥¼ ê°œë°œí•  ë‹¹ì‹œì— í•´ë‹¹ ì‚¬í•­ì„ ì¸ì§€í•˜ê³  ìµœì í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. cacheì˜ hit ì •ë„ë¥¼ ì•„ë˜ ê·¸ë¦¼ì—ì„œ ì˜¤ë¥¸ìª½ê³¼ ê°™ì´ ì„¤ì •í•˜ê²Œ ë˜ë©´, ê²°ë¡ ì ìœ¼ë¡œ hit í™•ë¥ ì´ ê¸‰ê²©í•˜ê²Œ ì¦ê°€í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ëŸ°ì‹ìœ¼ë¡œ Cache í¬ê¸°ì— ìœ ì˜í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ í•´ë‹¹ ì¥ì¹˜ì— ìµœì í™”í•˜ëŠ” ë°©ì‹ë„ ì¡´ì¬í•œë‹¤.\n\n![software-optimize](/images/software-optimize.png)\n\n> **Write**\n\në°ì´í„°ë¥¼ Main Memoryë¡œ writeí•˜ëŠ” ìƒí™©ì„ ìƒê°í•´ë³´ì. cacheì—ì„œ ì‘ì—…ì„ ì§„í–‰í•˜ì—¬ í•´ë‹¹ ìœ„ì¹˜ì—ë§Œ ë°ì´í„°ë¥¼ ìµœì‹ í™”í•˜ê²Œ ë˜ë©´, í•„ì—°ì ìœ¼ë¡œ cacheì™€ Main Memory ì‚¬ì´ì—ì„œ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ ì„¸ ê°€ì§€ê°€ ìˆë‹¤.\n\n1. **Write Through**\n   ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œ, writeê°€ ë°œìƒí•˜ë©´, ëª¨ë“  ì €ì¥ ì¥ì¹˜ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ëª¨ë‘ update í•´ì£¼ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜, ì´ writeì˜ ë¹„ìš©ì´ ì—„ì²­ë‚˜ê²Œ í¬ë‹¤ëŠ” ê²ƒì„ ì•Œê¸° ë•Œë¬¸ì— ì´ë¥¼ ìµœëŒ€í•œ ì ê²Œ í•˜ëŠ” ê²ƒì´ ì‚¬ì‹¤ìƒ performance í–¥ìƒì— í•µì‹¬ì´ë¼ê³  ìƒê°í•˜ë©´, ì´ëŠ” ì‹¤ì œë¡œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë¬´ë¦¬ê°€ ìˆë‹¤.\n2. **Write Buffer**\n   Main Memoryì— ì“°ì´ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” bufferë¥¼ ë§Œë“¤ì–´ ë†“ê³ , í•´ë‹¹ ì¥ì¹˜ì—ì„œ writeë¥¼ ì¼ì„í•˜ì—¬ ë†“ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´, Writeì˜ ì™„ë£Œë¥¼ cacheì—ì„œ ë” ì´ìƒ ê¸°ë‹¬ë¦´ í•„ìš”ê°€ ì—†ë‹¤. í•˜ì§€ë§Œ, Write ëª…ë ¹ì–´ë¥¼ processorê°€ ì²˜ë¼í•˜ëŠ” ì†ë„ê°€ bufferê°€ Main Memoryì— ì“°ëŠ” ì†ë„ë³´ë‹¤ í›¨ì”¬ ë¹ ë¥´ê¸° ë•Œë¬¸ì— ë‹¹ì—°í•˜ê²Œ bufferê°€ ê½‰ì°° ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´, ë°˜ë“œì‹œ ê³µê°„ì´ ë‚  ë•Œê¹Œì§€ stallì„ í•´ì•¼ë§Œ í•œë‹¤.\n3. **Write Back**\n   ì´ ë°©ì‹ì€ ì¼ê´€ì„±ì„ í¬ê¸°í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¦‰, ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆë‹¤ê°€ ì‹¤ì œë¡œ ì´ ê°’ì´ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë³€ê²½ë  ë•Œ, cacheì˜ íŠ¹ì • indexì— ìˆëŠ” ê°’ì´ ë‹¤ë¥¸ tagì˜ ê°’ìœ¼ë¡œ ë³€ê²½ë  ë•Œì—ë§Œ ë°ì´í„°ë¥¼ ì“°ëŠ” ë°©ì‹ì´ë‹¤. ë˜ëŠ” ê°•ì œì ìœ¼ë¡œ í•˜ìœ„ memoryë¡œì˜ ì €ì¥ì„ ìš”êµ¬í•  ê²½ìš°ì—ë§Œ ì“°ë„ë¡ í•œë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´, ì„±ëŠ¥ì€ í™•ì—°íˆ ì˜¬ë¼ê°€ì§€ë§Œ, ë¶ˆì¼ì¹˜ì„±ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë” ë³µì¡í•œ ìš”êµ¬ì‚¬í•­ì´ ë°œìƒí•œë‹¤. (ì¼ë‹¨ cacheì˜ tableì— ê° rowì— í•´ë‹¹ ê°’ì´ í•˜ìœ„ Memoryì—ì„œ copyëœ ì´í›„ë¡œ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë¥¼ í‘œì‹œí•˜ëŠ” dirty bitê°€ í•„ìš”í•˜ë©°, multi processor í™˜ê²½ì—ì„œëŠ” ë” í° ë¬¸ì œë¥¼ ì•¼ê¸°í•œë‹¤.)\n\n### ë” ë‚˜ì€ Cache ì €ì¥ë²•\n\n`Directed Mapping`ì„ í†µí•´ì„œ Cacheì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê²Œ ë˜ë©´, íŠ¹ì • Blockì´ ìœ„ì¹˜í•  ìˆ˜ ìˆëŠ” ì¥ì†Œê°€ ê³ ì •ë˜ì–´ ë²„ë¦°ë‹¤. ë§Œì•½, indexê°€ ê²¹ì¹˜ëŠ” ê°’ì´ ë™ì‹œì— ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©ëœë‹¤ë©´, miss rateê°€ í¬ê²Œ ì¦ê°€í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ì—¬ê¸°ì„œ, cacheì˜ ìœ„ì¹˜ë¥¼ ê³ ì •í•˜ì§€ ì•Šê³ , ììœ ë¡­ê²Œ í•˜ì—¬ ì´ëŸ¬í•œ ë¬¸ì œëŠ” í¬ê²Œ ì¤„ì¼ë ¤ê³  í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.\n\ntagì— ëª¨ë“  address ê°’ì„ ì €ì¥í•˜ê³ , indexë¥¼ addressì˜ ê°’ìœ¼ë¡œ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì‹ì´ ìˆë‹¤. ì´ê²ƒì„ `full-associative cache`ë¼ê³  í•œë‹¤. ì´ ê²½ìš°ì—ëŠ” í•´ë‹¹í•˜ëŠ” index ë²”ìœ„ì—ì„œ tagê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ì¶”ê°€ì ì¸ ì—°ì‚°ì´ í•„ìš”í•˜ì§€ë§Œ, hardware ì¥ì¹˜ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ë°°ì¹˜í•˜ì—¬ ì´ë¥¼ ë™ì‹œì— ì‹¤í–‰ì‹œì¼œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë°©ì‹ì„ íƒí•œë‹¤. ì´ ë°©ì‹ì€ ê²°ë¡ ì ìœ¼ë¡œ ë§ì€ hardware ì¥ë¹„ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ìš”êµ¬í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ë¹„ì‹¸ì§„ë‹¤. ë”°ë¼ì„œ, ì ë‹¹í•œ í•©ì˜ì ì„ ì°¾ëŠ” ê²ƒì´ `set-associative cache`ì´ë‹¤. ì´ëŠ” index ê°’ì„ ì¼ë¶€ë§Œ ì´ìš©í•˜ëŠ” ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì¦‰, 3bitsë¥¼ indexë¡œ ì‚¬ìš©í•˜ëŠ” cacheì—ì„œ ìƒìœ„ nê°œì˜ bitë§Œ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ì—¬ í‘œí˜„í•˜ëŠ” ê²ƒì´ë‹¤. ë™ì¼í•œ indexë¥¼ ê°€ì§„ blockì€ $2^{ì „ì²´ bit ìˆ˜ - n}$ ì¡´ì¬í•˜ê²Œ ëœë‹¤. ì—¬ê¸°ì„œ, ì´ì œë¶€í„° tagë¥¼ í†µí•´ì„œ ì‚¬ìš©í•´ì„œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ë§Œì•½ nì´ ì „ì²´ bit ìˆ˜ì™€ ê°™ì•„ ì§„ë‹¤ë©´, ì´ê²ƒì´ `full-associative cache`ê°€ ë˜ëŠ” ê²ƒì´ê³ , n = 0ì´ë¼ë©´, ì¼ë°˜ì ì¸ `Directed Mapping`ì´ ë˜ëŠ” ê²ƒì´ë‹¤.\n\n![set-associative](/images/set-associative.png)\n\nê·¸ë ‡ë‹¤ë©´, ì´ë ‡ê²Œ ì—¬ëŸ¬ ê°œì˜ indexê°€ dataë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” ê·¸ë¦‡ì´ ë  ë•Œ, ì–´ëŠ ìœ„ì¹˜ì— ê°’ì„ ë®ì–´ ì”Œìš°ëŠ” ê²ƒì´ í˜„ëª…í•  ê²ƒì¸ê°€ëŠ” **temporal locality**ì— ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ê°€ì¥ ì“°ì¸ì§€ ì˜¤ë˜ëœ indexì— ê°’ì„ ë®ì–´ì”Œìš´ë‹¤. ì´ê²ƒì´ LRU(Least Recently Used) ë°©ì‹ì´ë‹¤. ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” cacheì— ì¶”ê°€ì ì¸ reference bitë¼ëŠ” ê²ƒì„ ìœ„ì¹˜ì‹œí‚¨ë‹¤.\n\n### MultiLevel Cache\n\nì´ì œ cacheë¥¼ ì—¬ëŸ¬ ê°œ ì¸µ(multilevel cache)ì„ ì´ë£¨ì–´ ì‚¬ìš©í•œë‹¤ê³  í•´ë³´ì. processì— ê°€ê¹Œìš´ ìª½ì„ primary cacheë¼ê³  í•˜ê³ , ê·¸ ë‹¤ìŒì„ secondary cacheë¼ê³  í•˜ì. ë§Œì•½, primary cacheì—ì„œ missê°€ ë°œìƒí–ˆì„ ëŒ€, secondary cacheì— ìˆìœ¼ë©´, miss penaltyë¥¼ ì¤„ì¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, secondary cacheë„ missê°€ ë‚˜ë©´, miss penaltyìì²´ê°€ ì¦ê°€í•œë‹¤. ì™œëƒí•˜ë©´, secondary ë¡œ ë¶ˆëŸ¬ì˜¤ê³ , ë‹¤ì‹œ primaryë¡œ ì˜®ê²¨ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë ‡ê¸°ì— ë¬´ì¡°ê±´ cacheë¥¼ ë§ì´ ë‘”ë‹¤ê³  ì¢‹ì€ ê²ƒì€ ì•„ë‹ˆë‹¤. ì ì ˆí•œ cahceë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ê³ , ëŒ€ê²Œ ì´ëŠ” 3ê°œ ì •ë„ë¡œ í•œë‹¤.\n\nê·¸ë¦¬ê³  ì§ê´€ì ìœ¼ë¡œ ê° cacheë¥¼ ë³´ë©´, primary cacheëŠ” hit timeì„ ì¤„ì´ëŠ” ê²ƒì´ ëª©í‘œì´ê³ , secondary cacheëŠ” miss rateë¥¼ ì¤„ì—¬ì•¼ í•œë‹¤. ê·¸ë˜ì„œ, primary cacheì—ì„œëŠ” block sizeë¥¼ ì¤„ì´ê³ , associativeì˜ í¬ê¸°ë¥¼ ì¤„ì´ì§€ë§Œ, secondary cacheì—ì„œëŠ” block sizeë¥¼ í‚¤ìš¸ ë¿ë§Œ ì•„ë‹ˆë¼ associativeì˜ í¬ê¸° ì—­ì‹œ í‚¤ìš°ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n## Virtual Memory\n\nMain Memoryë¥¼ ì•ˆì •ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ, Virtual Memoryë¼ëŠ” ê°œë…ì„ ë„ì…í•œë‹¤. ì´ëŠ” ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” Main Memoryì™€ Secondary Storageì˜ ì£¼ì†Œ(**Physical Address**)ë¥¼ ê°€ìƒì˜ ì£¼ì†Œ(**Virtual Address**)ë¡œ ë°”ê¾¸ê³ , í•„ìš”ì— ë”°ë¼ ì´ë¥¼ ë²ˆì—­í•˜ì—¬ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, í•˜ë‚˜ì˜ processê°€ ë§ˆì¹˜ Main Memory í•˜ë‚˜ë¥¼ ì¥ì•…í•˜ê³  ìˆëŠ” ê±° ê°™ì€ ëŠë‚Œì„ ëŠë¼ë„ë¡ í•  ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´, ë‹¹ì¥ì— ì“°ì§€ ì•ŠëŠ” processì˜ dataëŠ” Secondary Storageë¡œ ë¹¼ë†“ê³ , Virtual Addressë¡œ ë²ˆì—­ ì‹œì—ëŠ” í•´ë‹¹ ìœ„ì¹˜ë¥¼ ê°€ë¥´í‚¤ë„ë¡ í•˜ë©´ ëœë‹¤. ê·¸ëŸ¬ë©´, ë§ˆì¹˜ ê° processëŠ” Main Memory ì´ìƒì˜ dataë¥¼ ê°–ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤ê³  ëŠë‚„ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ Virtual Memoryë¥¼ ì´ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ì‰½ê²Œí•  ìˆ˜ ìˆë‹¤.\n\n1. **ë™ì¼í•œ ì¥ì¹˜ì—ì„œ program ê°„ì˜ Memory ì˜ì—­ì„ êµ¬ë¶„í•  ë•Œ**, ì¼ë°˜ì ìœ¼ë¡œ Main Memoryì— ìˆëŠ” ë°ì´í„° ì—­ì‹œ **locality**ì— ë”°ë¼ ê³„ì†í•´ì„œ ë°”ë€Œê²Œ ë˜ëŠ”ë°, íŠ¹ì • process ì „ì²´ í¬ê¸°ë¥¼ ì‹¤í–‰ ì¤‘ì¼ ë™ì•ˆ ê³„ì†í•´ì„œ ì œê³µí•œë‹¤ë©´, ìœ ì—°í•œ ë™ì‘ì´ ì–´ë µë‹¤. ë”°ë¼ì„œ, Virtual MemoryëŠ” ì´ë¥¼ ë” ì‰½ê²Œ í•˜ë„ë¡ ë•ëŠ”ë‹¤.\n2. **ë™ì¼í•œ ì¥ì¹˜ ë‚´ì—ì„œ ëŒì•„ê°€ëŠ” Virtual Machineê°„ì˜ Main Memory ì˜ì—­ì„ êµ¬ë¶„í•  ë•Œ**, ê° Virtual MemoryëŠ” Physical Memoryë¡œ ë²ˆì—­ë˜ì—ˆì„ ë•Œ, ì„œë¡œ ì¶©ëŒí•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³´ì¥í•˜ê¸° ë•Œë¬¸ì— ì„œë¡œ ë‹¤ë¥¸ processê°„ì— ê°„ì„­ì´ ì—†ìŒì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.\n3. **Main Memory ë³´ë‹¤ í° í¬ê¸°ì˜ Programì„ ëŒë¦¬ê³ ì í•  ë•Œ**, Main Memory ì´ìƒì˜ processë¥¼ ëŒë¦¬ê¸° ìœ„í•´ì„œëŠ” Secondary Storageì— ì§ì ‘ì ì¸ ì ‘ê·¼ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ë°, ì´ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•Šê³ , ì‹¤ì œë¡œ í˜„ì¬ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Memory ê³µê°„ì˜ ë°ì´í„°ëŠ” Secondary Storageë¡œ ì˜®ê¸°ê³  ì´ë¥¼ ê°€ë¥´í‚¤ëŠ” Virtual Addressë§Œ ë°”ê¾¸ì–´ì£¼ë©´ ë˜ê¸° ë•Œë¬¸ì—, ì‰½ê²Œ Main Memory ë³´ë‹¤ í° í¬ê¸°ì˜ Programì„ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n\nVirtual Memory ë°©ì‹ì€ ê° program, Virtual Machineë§ˆë‹¤ ê³ ìœ í•œ address spaceë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— ê°ì ë…ë¦½ë˜ì—ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸°ì— ê°ìê°€ ì„œë¡œì˜ ë™ì‘ìœ¼ë¡œ ì¸í•œ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ë‹¤ë¥¸ processì—ì„œ ì‚¬ìš© ì¤‘ì¸ Memoryì— ì ‘ê·¼í•  ìˆ˜ ì—†ì„ ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë“¤ì— ì˜í•´ì„œ ë°œìƒí•˜ëŠ” Memoryì˜ ë³€í™”ê°€ ìì‹ ì´ ì§„í–‰ ì¤‘ì¸ processì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, protectionë¥¼ ì œê³µí•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.\n\në˜í•œ, programì„ ìƒí˜¸ê°„ì˜ ì˜í–¥ì´ ì—†ëŠ” ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆˆ Overlay ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ì´ˆê³¼ë˜ëŠ” ìš©ëŸ‰ì€ Secondary Storageì— ìƒì£¼ì‹œí‚¤ê³ , í•„ìš”ì— ë”°ë¼ Main Memoryë¡œ ì˜¬ë ¤ì„œ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìš©ëŸ‰ì´ ë¶€ì¡±í•œ Main Memoryì—ì„œë„ ì´ë³´ë‹¤ í° í¬ê¸°ì˜ Programì„ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\n\nCacheì˜ ë°©ì‹ê³¼ ë§¤ìš° ìœ ì‚¬í•˜ì§€ë§Œ, ì–¸ì–´ì˜ ê¸°ì›ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œëŠ” Blockì„ **Page**ë¼ê³  ë¶€ë¥¸ë‹¤. ê·¸ë¦¬ê³ , ì´ Pageì˜ í¬ê¸°ëŠ” Page Offsetì´ë¼ê³  í‘œê¸°í•œë‹¤. ë”°ë¼ì„œ, **Virtual Address**ëŠ” ì‚¬ì‹¤ìƒ ë‘ ê°œì˜ Partë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. ì²« ë²ˆì§¸ëŠ” **Virtual Page Number**ì´ê³ , í•˜ë‚˜ì˜ **Page offset**ì´ë‹¤. ë˜í•œ, MissëŠ” **Page Fault**ë¼ëŠ” ë§ë¡œ ë°”ë€Œì–´ì§„ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, Virtual Addressì— Mapping ë˜ëŠ” Physical Addressë¥¼ Physical Page Numberì™€ Page offsetìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.\n\nìœ„ì—ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ Virtual Addressë¥¼ Physical Addressë¡œ ë°”ê¾¸ëŠ” ê³¼ì •ì„ **Address Translation**ì´ë¼ê³  í•œë‹¤.\n\n### Page ê´€ë¦¬\n\n> **Virtual Page Numberë¥¼ í†µí•´ì„œ ì‹¤ì œ Physical Page Numberë¡œ ë³€í™˜í•˜ê¸°**\n\nê¸°ì¡´ì˜ Cacheì—ì„œë„ Missë¡œ ì¸í•œ ë¹„ìš©ë„ ì»¸ì§€ë§Œ, **Page Fault**ì˜ ë¹„ìš©ì€ ì´ë³´ë‹¤ë„ í›¨ì”¬ í¬ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ, Cacheì—ì„œëŠ” Full Associativeí•œ êµ¬ì¡°ë¥¼ ê°€ì ¸ê°”ì§€ë§Œ, Main MemoryëŠ” Cacheë³´ë‹¤ í›¨ì”¬ í¬ê¸° ë•Œë¬¸ì— ì´ë¥¼ ìœ„í•œ ì¶”ê°€ì ì¸ Hardwareë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ê²½ì œì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, Main Memoryì— ì¡´ì¬í•˜ëŠ” Pageì˜ Addressë¥¼ Mappingí•˜ê¸° ìœ„í•´ì„œ tableì„ ì´ìš©í•œë‹¤. ì´ë¥¼ **Page Table**ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ì´ëŠ” Main Memoryì— ìƒì¤‘í•˜ê³  ìˆë‹¤. ê° ê°ì˜ programì€ ê³ ìœ ì˜ Page Tableì„ í•˜ë‚˜ì”© ê°€ì§€ê²Œ ë˜ë©°, Page Table ìì²´ì˜ ì²˜ìŒê³¼ ëì„ ê°€ë¥´í‚¤ëŠ” registerë¥¼ ê°€ì§€ê³  ìˆë‹¤(**Page Table Register**). ê·¸ë¦¬ê³  Page Tableì—ëŠ” Virtual Pageê°€ ì§€ê¸ˆ ì–´ëŠ Physical Addressì— ì¡´ì¬í•˜ëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ì™€ ì´ê²ƒì´ Main Memoryì— ìˆëŠ”ì§€ë¥¼ í‘œê¸°í•˜ëŠ” Valid Bitê°€ ì¡´ì¬í•œë‹¤. ë§Œì•½, Valid Bitê°€ 0ì´ë¼ë©´, ì´ëŠ” í•´ë‹¹ Pageê°€ ì§€ê¸ˆ Main Memoryê°€ ì•„ë‹Œ Secondary Storageì— ì¡´ì¬í•œë‹¤ëŠ” ëœ»ì´ë‹¤.\n\në”°ë¼ì„œ, Pageë¥¼ ì°¾ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. Page Table Registerë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ Main Memoryì—ì„œ **Page Tableì„ ì°¾ëŠ”ë‹¤**.\n2. Virtual Addressì˜ Virtual Page Numberë¥¼ ì´ìš©í•´ì„œ Page Tableì—ì„œ Pageë¥¼ ì¡°íšŒí•œë‹¤.\n3. Valid Bitë¥¼ í™•ì¸í•˜ì—¬ í•´ë‹¹ Pageê°€ í˜„ì¬ Main Memoryì— ì¡´ì¬í•˜ëŠ”ì§€ ì•„ë‹ˆë©´ Secondary Storageì— ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.\n4. ì´ì œ ì‹¤ì œ Physical Page Numberë¥¼ ì–»ì–´ì™€ì„œ, ê¸°ì¡´ì˜ Page Offsetì„ í•©ì¹˜ë©´, ì´ê²ƒì´ Physical Addressê°€ ëœë‹¤.\n\n```plaintext\n  \n  ğŸ¤” Page Tableì˜ í¬ê¸°ê°€ ë„ˆë¬´ í¬ë©´ ì–´ë–»ê²Œ ë ê¹Œ?\n\n  Pageê°€ ë„ˆë¬´ ë§ì•„ì§€ë©´, Page Tableì˜ í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤.\n  ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ì •ë¦¬í•œë‹¤. \n  ì¦‰, Page Tableì˜ Tableì´ ìƒê¸°ëŠ” í˜•íƒœë¼ê³  ë³´ë©´ ë˜ê² ë‹¤.\n\n```\n\n> **Page Fault**\n\nìœ„ì—ì„œ ë§í•œëŒ€ë¡œ Page Faultê°€ ë°œìƒí•œë‹¤ë©´, ì¦‰ Valid Bitê°€ 0ì¸ ê²½ìš°, í•´ë‹¹ Pageë¥¼ Secondary Storageì—ì„œ ì°¾ê³ , ì´ë¥¼ Main Memoryì˜ ì–´ëŠ ìœ„ì¹˜ì— ë†“ì„ì§€ë¥¼ ê²°ì •í•´ì•¼ í•œë‹¤.\n\nìš°ë¦¬ê°€ ë²ˆì—­í•œ Physical AddressëŠ” Secondary Storageì˜ ì§ì ‘ì ì¸ ì£¼ì†Œë¥¼ ì˜ë¯¸í•˜ê¸°ë„ í•˜ì§€ë§Œ ëŒ€ê²ŒëŠ” ì´ë¥¼ ì´ìš©í•´ì„œ ì‹¤ì œ Secondary Storageì˜ ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìë£Œêµ¬ì¡°ë¥¼ ê°€ë¥´í‚¤ë„ë¡ ë˜ì–´ìˆë‹¤. ê·¸ë˜ì„œ, ìš°ë¦¬ì˜ Operating Systemì€ Processê°€ ìƒì„±ë  ë•Œ, Processì˜ ëª¨ë“  Pageë¥¼ Secondary Storageì— ì €ì¥í•  ê³µê°„ì„ ìƒì„±í•œë‹¤. ì´ë¥¼ `Swap Space`ë¼ê³  ë¶€ë¥´ë©°, í•´ë‹¹ Virtual Pageê°€ ì‹¤ì œ diskì˜ ì–´ë””ì— ì €ì¥ë ì§€ë¥¼ ê¸°ë¡í•œ ìë£Œêµ¬ì¡°ì´ë‹¤.\n\në§Œì•½, ì´ì œ ëª¨ë“  Main Memoryê°€ Pageë¡œ ê°€ë“ ì°¨ ìˆë‹¤ë©´, OSëŠ” ì–´ë–¤ Pageë¥¼ ëŒ€ì²´í•  ê²ƒì¸ì§€ë¥¼ ì„ íƒí•œë‹¤. ì´ë•ŒëŠ” LRU(Least Recently Used) Algorithmì„ ì‚¬ìš©í•œë‹¤. ì§€ê¸ˆê¹Œì§€ ê°€ì¥ ì‚¬ìš©í•˜ì§€ ì•Šì€ Pageë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ êµ¬í˜„í•  ë•ŒëŠ” Reference bitë¥¼ ì„¤ì •í•˜ê³ , ì£¼ê¸°ì ìœ¼ë¡œ 0ìœ¼ë¡œ ë³€ê²½í•˜ê¸°ë¥¼ ë°˜ë³µí•˜ë©´ì„œ, í•´ë‹¹ Pageë¥¼ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ 1ë¡œ ë³€ê²½ì£¼ëŠ” ê²ƒì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë¦¬ê³ , Page Faultê°€ ë°œìƒí•  ì‹œì— Reference Bitê°€ 0ì¸ ëŒ€ìƒì´ ìˆë‹¤ë©´, ì´ë¥¼ ìš°ì„ ìœ¼ë¡œ ì œê±°í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n> **Write**\n\nWriteí•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ë§ì€ ì‹œê°„ì„ ì†Œìš”í•œë‹¤. ë”°ë¼ì„œ, Virtual Memory Systemì—ì„œëŠ” ì´ë¥¼ ìµœì†Œí™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ê¸° ë•Œë¬¸ì— ì´ì „ì— ì†Œê°œí•œ Write Backì´ defaultì´ë‹¤.\n\n> **TLBë¥¼ ì´ìš©í•œ ë³€í™˜ì‘ì—… ì†ë„ í–¥ìƒ**\n\nPage Tableì´ ì‹¤ì œë¡œ Main Memoryì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” Pageë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œ ê²°êµ­ ë¬´ì¡°ê±´ Main Memoryì— í•œ ë²ˆ ì ‘ê·¼í•´ì•¼ í•œë‹¤. ì´ëŠ” ë§ì€ ì‹œê°„ì„ ì†Œìš”í•˜ëŠ” ë™ì‘ì´ê¸°ì— ì´ë¥¼ ìµœì†Œí™”í•  ë°©ë²•ì´ í•„ìš”í–ˆë‹¤. ë˜í•œ, Temporarl / Spatial Localityì— ë”°ë¼ ì‚¬ìš©í•œ PageëŠ” ë‹¤ì‹œ ì‚¬ìš©í•  í™•ë£°ì´ ë§ë‹¤. ë”°ë¼ì„œ, ëŒ€ê²Œì˜ processorì—ì„œëŠ” ì´ë¥¼ ìœ„í•œ íŠ¹ë³„í•œ cacheë¥¼ ì¶”ê°€ë¡œ ê°€ì§€ê³  ìˆë‹¤. ì´ê²ƒì´ TLB(Translate Lookaside Buffer)ì´ë‹¤. (ì•„ë§ˆ Translation cacheë¼ê³  ë¶€ë¥´ëŠ” ê²ƒì´ ë” ìì—°ìŠ¤ëŸ½ê¸´ í•  ê²ƒì´ë‹¤.) ë”°ë¼ì„œ, TLBëŠ” Virtual Page Numberì™€ Dirty Bit, ê·¸ë¦¬ê³  Reference Bitë¥¼ ê°€ì§„ë‹¤. TLBë¥¼ ì„¤ê³„í•  ë•Œì—ëŠ” fully associativeí•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ ê¸°ë³¸ì´ë‹¤. ì™œëƒí•˜ë©´, TLB ìì²´ê°€ ë§¤ìš° ì‘ê³ , hit rateê°€ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ê¸° ë•Œë¬¸ì´ë‹¤. ì´ë ‡ê²Œ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ì„±ëŠ¥ì— í° ë„ì›€ì´ ëœë‹¤. ë˜í•œ, replacingì„ í•  ë•Œì—ë„ LRUë¥¼ êµ¬í˜„í•  ìˆ˜ë„ ìˆì§€ë§Œ ëŒ€ê²Œ ì´ë¥¼ êµ¬í˜„í•˜ê¸°ê°€ ë„ˆë¬´ ê²½ì œì ìœ¼ë¡œ ì–´ë µê¸° ë•Œë¬¸ì—, ëŒ€ë¶€ë¶„ì˜ systemì€ ëœë¤í•˜ê²Œ ê³ ë¥´ëŠ” ê²ƒì„ ì„ íƒí•œë‹¤ê³  í•œë‹¤.\n\në”°ë¼ì„œ, Pageë¥¼ ì–»ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤ê³  ë‹¤ì‹œ ìš”ì•½í•  ìˆ˜ ìˆë‹¤.\n\n1. Page Table Registerë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ TLBì—ì„œ **Page Tableì„ ì°¾ëŠ”ë‹¤**. ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, Main Memoryì—ì„œ ì¡°íšŒí•´ì•¼ í•œë‹¤.(TLB miss)\n2. Virtual Addressì˜ Virtual Page Numberë¥¼ ì´ìš©í•´ì„œ Page Tableì—ì„œ Pageë¥¼ ì¡°íšŒí•œë‹¤.\n3. Valid Bitë¥¼ í™•ì¸í•˜ì—¬ í•´ë‹¹ Pageê°€ í˜„ì¬ Main Memoryì— ì¡´ì¬í•˜ëŠ”ì§€ ì•„ë‹ˆë©´ Secondary Storageì— ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.\n4. ì´ì œ ì‹¤ì œ Physical Page Numberë¥¼ ì–»ì–´ì™€ì„œ, ê¸°ì¡´ì˜ Page Offsetì„ í•©ì¹˜ë©´, ì´ê²ƒì´ Physical Addressê°€ ëœë‹¤.\n5. ì´ë¥¼ í†µí•´ì„œ, ì¡°íšŒë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ë§Œì•½, Secondary Storageì— ìˆì—ˆë‹¤ë©´, LRUë¥¼ ì´ìš©í•´ì„œ Page Swapì„ ìˆ˜í–‰í•˜ì—¬ Pageë¥¼ Main Memoryë¡œ ì˜¬ë¦°ë‹¤.\n6. ë§Œì•½, TLB missê°€ ë°œìƒí–ˆì—ˆë‹¤ë©´, í•´ë‹¹ Page ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.\n\nìì£¼ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ” TLB missê°€ Page Faultê°€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ê¼­ ëª…ì‹¬í•˜ì.\n\n![Virtual Memory](/images/virtual-memory.png)\n","slug":"architecture-memory","date":"2022-04-29 19:25","title":"5. Memory Hierarchy","category":"Computer Architecture","tags":["Computer Organization And Design","Memory","Memory Hierarchy","Cache","Directed Mapping","Virtual Memory","Page"],"thumbnailSrc":"https://euidong.github.io/images/default.jpg"}],"params":{"subject":"Page"}},"__N_SSG":true}