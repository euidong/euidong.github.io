{"pageProps":{"posts":[{"content":"\n## Reference\n\n- Thumbnail : Photo by [Alina Grubnyak](https://unsplash.com/@alinnnaaaa?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/virtual-network?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\nSDNì„ ì‹¤ì œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ì–´ë ¤ìš´ ì¼ì´ë‹¤. ë”°ë¼ì„œ, Mininetì„ í™œìš©í•˜ì—¬ ê°€ìƒì˜ Topologyë¥¼ í†µí•´ì„œ ë¨¼ì € í…ŒìŠ¤íŒ…ì„ í•œ í›„ì— ì‹¤ì œë¡œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ, í•´ë‹¹ Postingì—ì„œëŠ” `Mininet`, `OpenFlow`, `Open VSwitch`, `ONOS`ë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ Tutorialì„ ìˆ˜í–‰í•´ë³¼ ê²ƒì´ë‹¤. ì´ Postingì„ í†µí•´ì„œ ë‚¨ê¸°ê³ ì í•˜ëŠ” ê²ƒì€ SDNì„ í…ŒìŠ¤íŒ…í•˜ëŠ” ì ˆì°¨ë¥¼ ìµíˆëŠ” ê²ƒì´ë‹¤.\n\n## 0. Tools\n\në¨¼ì € ì‘ì„±ìì˜ ì‹¤í–‰í™˜ê²½ì€ MAC OS Xë¡œ ëŒ€ë¶€ë¶„ì˜ ì„¤ì •ì€ ëª¨ë‘ ë™ì¼í•˜ì§€ë§Œ `XTerminal`ì€ Window/MACì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— Window ì „ìš©ì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.\n\n- Host Machine\n  - Virtual Box : [ğŸ”— Download](https://www.virtualbox.org/wiki/Downloads) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.virtualbox.org/)\n    - VMì„ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•œ ë„êµ¬, OpenSourceì´ë©° ë¬´ë£Œì´ê¸° ë•Œë¬¸ì— ë§ì´ ì‚¬ìš©ëœë‹¤.(v6.1)\n  - Vagrant : [ğŸ”— Download](https://www.vagrantup.com/downloads) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.vagrantup.com/)\n    - Virtual Environment êµ¬ì¶•ì„ ìë™í™”í•˜ëŠ” ë„êµ¬(v2.2.19)\n  - XQuartz : [ğŸ”— Download](https://www.xquartz.org/releases/index.html) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.xquartz.org/)\n    - XTerminal ì‹œìŠ¤í…œìœ¼ë¡œ ì›ê²©ìœ¼ë¡œ Graphic ì‹œìŠ¤í…œì„ í˜¸ìŠ¤íŒ…í•˜ëŠ” ë„êµ¬ì´ë‹¤. ì¦‰, `ssh`ë¡œ ì ‘ì†í•œ ì‹œìŠ¤í…œì—ì„œ ì¶”ê°€ì ìœ¼ë¡œ terminalì„ ìƒì„±í•˜ê±°ë‚˜ GUIë¥¼ ìš”êµ¬í•˜ëŠ” applicationì„ ì‹¤í–‰ì‹œí‚¬ ë•Œ ì´ë¥¼ host machineì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.(v2.8.1)\n- Virtual Machine\n  - Mininet : [ğŸ”— Download](http://mininet.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](http://mininet.org/)\n    - Network Topologyë¥¼ ê°€ìƒìœ¼ë¡œ êµ¬ì„±í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì¶”ê°€ì ì¸ configuration / testingì´ ê°€ëŠ¥í•œ Virtual Environment Emulator(v2.3.0)\n  - OpenVSwitch : [ğŸ”— Download](https://www.openvswitch.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.openvswitch.org/)\n    - Virtual Switchë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” toolì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Virtual Machine ë‚´ë¶€ì—ì„œ Virtual Switchë¥¼ ê°€ë™ì‹œí‚¬ ìˆ˜ ìˆë‹¤.OpenFlow Protocolì— ê¸°ë°˜í•œ ë‹¤ì–‘í•œ APIë¥¼ ë‚´ì¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í†µí•´ì„œ Virtual Switchì˜ Configuration ë“±ê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.(v2.9.8)\n  - ONOS : [ğŸ”— Download](https://wiki.onosproject.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://wiki.onosproject.org/)\n    - Open Network Operation Systemìœ¼ë¡œ SDNì˜ Controller ì—­í• ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ WEB Interfaceë„ ì œê³µí•˜ë©°, ë‹¤ì–‘í•œ APIë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ìœ ìš©í•˜ë‹¤.(v2.5.7)\n\n## 1. Setup\n\nìœ„ì— ì œì‹œí•œ Toolì„ ëª¨ë‘ `Virtual Machine` ë‚´ë¶€ì— ì„¤ì¹˜í•´ì•¼í•˜ì§€ë§Œ, ìë™ìœ¼ë¡œ í•´ë‹¹ toolì„ ì„¤ì¹˜í•˜ëŠ” `Vagrantfile`ì„ ë§Œë“¤ì–´ë†“ì•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•´ë„ ì¢‹ì„ ê²ƒì´ë‹¤. í•´ë‹¹ VagrantFileë¡œ buildí•˜ë©´ ì‹œê°„ì´ êµ‰ì¥íˆ ì†Œìš”ë  ìˆ˜ ìˆë‹¤. (ì¸í„°ë„· ìƒíƒœì— ë”°ë¼ ì²œì°¨ë§Œë³„ì´ì§€ë§Œ, ëŒ€ëµ 20ë¶„?)\n\n```bash\n$ git clone https://github.com/euidong/virtual-sdn-boilerplate\n$ cd virtual-sdn-boilerplate\n$ vagrant up\n# ì ‘ì†\n$ vagrant ssh\n```\n\n> **Run ONOS**\n\n```bash\n# In Virtual Machine\n$ cd $ONOS_ROOT\n$ bazel run onos-local\n```\n\n## 2. Scenarioë¥¼ ì‘ì„±\n\nìš°ì„  ì–´ë–¤ ìƒí™©ì„ **emulation**í•  ê²ƒì¸ì§€ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ê³„íšì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë¨¼ì € êµ¬ìƒí•´ë³´ì. ì•„ë˜ ì˜ˆì‹œëŠ” ë‹¨ìˆœíˆ ë‚´ê°€ ìƒê°í•œ ì˜ˆì‹œì´ë¯€ë¡œ ì •í™•ì„±ì´ëŸ° ê²ƒì€ ìƒê°í•˜ê¸° ë³´ë‹¤ëŠ” íë¦„ë§Œì„ ìµí˜€ë³´ì.\n\n```plaintext\nğŸ’¡ Base Scenario\n\n1. í›„ì§€ì‚° ì¸ê·¼ì—ì„œ ê³„ì†í•´ì„œ í™”ì‚°í™œë™ì´ ê°ì§€ë˜ê³  ìˆë‹¤. ë˜í•œ, í›„ì§€ì‚°ì€ 100ë…„ ë‹¨ìœ„ë¡œ í­ë°œì„ í•´ì™”ëŠ”ë° ìµœê·¼ 170ì—¬ ë…„ ë™ì•ˆ í­ë°œì´ ì¡´ì¬í•˜ì§€ ì•Šê³  ìˆë‹¤. ì´ë¡œ ë¯¸ë£¨ì–´ë³´ì•˜ì„ ë•Œ í›„ì§€ì‚°ì˜ í™”ì‚°í­ë°œì€ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ì„ ê²ƒì´ë¼ê³  ì¶”ì¸¡í•  ìˆ˜ ìˆë‹¤.\n2. í›„ì§€ì‚°ì—ì„œ í­ë°œì´ ë°œìƒí•˜ëŠ”ì§€ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œ ê³³ê³³ì— ê´€ì¸¡ê¸°ê°€ í•„ìš”í•˜ë©°, ì´ë¥¼ ë¶„ì„í•  ì„¼í„°ê°€ ì•ˆì „ì„ ìœ„í•´ í›„ì§€ì‚° ì•„ë˜ì— ì¡´ì¬í•˜ë©° ë°±ì—… ì„œë²„ë¥¼ ë³„ë„ë¡œ ë‹¤ë¥¸ ê³µê°„ì— ë‘ê³  ìˆë‹¤.\n3. ê° ê´€ì¸¡ì†Œì—ì„œ ì„œë¡œ ê°„ ë°ì´í„° ê³µìœ ë„ ê³„ì†í•´ì„œ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí•˜ë‹¤. => Horizontal trafficì´ ë§ë‹¤ -> datacenterì™€ ìœ ì‚¬í•œ í˜•íƒœì˜ Network -> Spine-Leaf êµ¬ì¡°ê°€ ì ì ˆ.\n```\n\n## 3. Topology êµ¬ì„± with Mininet\n\në¨¼ì €, topologyë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œ `Mininet`ì„ í™œìš©í•œë‹¤. ì´ì— ëŒ€í•œ ê°œë… ì •ë¦¬ëŠ” [ğŸ”— Mininet](/posts/mininet)ì•  í•´ë‘ì—ˆë‹¤. Base Scenarioì˜ 3ë²ˆ ì‚¬í•­ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ìš°ë¦¬ì˜ TopologyëŠ” Spine-Leaf êµ¬ì¡°ë¥¼ ê°–ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë¨¼ì € í‘œí˜„í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n> **Source Code**\n\n- `/vagrant/example/mt-fuji/topo.py`\n\n```python\nfrom mininet.topo import Topo\n\nclass SpineLeaf(Topo):\n  def build(self):\n    s_num = 2\n    l_num = 5\n    h_num = 2\n    spines = []\n    leaves = []\n    hosts = []\n\n    for i in range(s_num):\n      spines.append(self.addSwitch('s%s%s' % (1, i+1)))\n    for i in range(l_num):\n      leaves.append(self.addSwitch('l%s%s' % (2, i+1)))\n      for j in range(s_num):\n        self.addLink(spines[j], leaves[i])\n      for j in range(h_num):\n        hosts.append(self.addHost('h%s%s' % (i+1, j+1)))\n        self.addLink(leaves[i], hosts[i * h_num + j])\n\ntopos = { 'spineleaf': (lambda: SpineLeaf()) }\n```\n\n- ì‹¤í–‰\n\n```bash\n$ sudo mn --mac --controller remote --switch ovs --custom /vagrant/example/mt-fuji/topo.py --topo=spineleaf\n```\n\n- ì‹¤í–‰ ê²°ê³¼\n  - ë¹¨ê°„ìƒ‰ : `Spine Switch`\n  - ì²­ë¡ìƒ‰ : `Leaf Switch`\n\n![Spine-Leaf Topology](/images/spine-leaf-topo.png)\n\n## 4. Test í™˜ê²½êµ¬ì¶•\n\nì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” Test í™˜ê²½ìš© ë„êµ¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. `ping` : íŠ¹ì • machine ê°„ì˜ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ë§ì´ ì‚¬ìš©ë˜ì–´ì§„ë‹¤.\n2. `trace` : `ping`ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ ì§€ë‚˜ì³ê°„ `hop`ì„ ëª¨ë‘ ì¡°íšŒ ê°€ëŠ¥í•˜ì—¬ ì¢€ ë” ì„¸ë¶€ì ì¸ ê²½ë¡œë¥¼ í™•ì¸í•  ë•Œ ìœ ìš©í•˜ë‹¤.\n3. `iperf` : clientì™€ server êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì§€ë©°, `tcp`, `udp` packetì„ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. íŠ¹ì • machineì—ì„œëŠ” `server`ë¡œ ì‹¤í–‰ì‹œí‚¤ê³ , ë‹¤ë¥¸ machineì—ì„œ í•´ë‹¹ `server`ë¡œ dataë¥¼ ë³´ë‚´ë„ë¡ í•  ìˆ˜ ìˆë‹¤. `ping`ë³´ë‹¤ ì£¼ê¸°ì ìœ¼ë¡œ, ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ê´€ì¸¡í•  ìˆ˜ ìˆë‹¤.\n4. `wireshark` : ì‹¤ì ¤ trafficì˜ ì´ë™ì„ GUIë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ë„êµ¬ì´ë‹¤.\n5. `ONOS WEB GUI` : ONOSì—ì„œëŠ” Webì„ í†µí•´ì„œ Network ìƒíƒœì™€ Trafficì„ ê´€ì¸¡í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\nì—¬ê¸°ì„œëŠ” `iperf`ë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³ , `ONOS WEB GUI`ë¥¼ í†µí•´ì„œ trafficì„ ê´€ì¸¡í•  ê²ƒì´ë‹¤.\n\nì•„ë˜ commandë¥¼ í†µí•´ì„œ `h51`ê°€ ìœ„ì—ì„œ ì–¸ê¸‰í•œ í›„ì§€ì‚° ì•„ë˜ì˜ ì„œë²„ê°€ ë˜ê³ , `h52`ê°€ ë°±ì—… ì„œë²„ê°€ ë˜ëŠ” ìƒí™©ì„ ê°€ì •í•˜ê¸° ìœ„í•´ì„œ í•´ë‹¹ ë‘ ìœ„ì¹˜ë¥¼ `iperf server`ë¡œ ì§€ì •í•œë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  ê´€ì¸¡ì†Œ(`h11`, `h12`, ..., `h41`, `h42`)ì—ì„œ `iperf client`ê°€ ë˜ì–´ trafficì„ ì£¼ê¸°ì ìœ¼ë¡œ ë³´ë‚´ë„ë¡ ì„¤ì •í•œë‹¤.\n\n```bash\nmininet> h51 iperf -s -u &\nmininet> h52 iperf -s -u &\n\n# xterm ëª…ë ¹ì–´ëŠ” hostì— ìœ„ì—ì„œ ì„¤ëª…í•œ XQuartzê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆì–´ì•¼ ì‘ë™í•œë‹¤.\nmininet> xterm h11 h12 h21 h22 h31 h32 h41 h42\n\n# ê° clientì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ìš”ì²­ì„ ì „ì†¡í•œë‹¤.\n$ iperf -u -c 10.0.0.9 -i1 -t100000000000\n```\n\n![ONOSì—ì„œ í™•ì¸í•œ ëª¨ìŠµ](/images/sdn-tuto-example-1.png)\n\n## 5. Flow Control\n\nê¸°ë³¸ì ìœ¼ë¡œ Flowë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì€ í•´ë‹¹ Settingì„ ìˆ˜í–‰í•¼ ë•Œ, 3ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.\n\n1. Open vSwitch CLI : OpenFlow Protocolì— ê¸°ë°˜í•œ ì—¬ëŸ¬ CLI ëª…ë ¹ì–´ë¥¼ ì§€ì›í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ, Flow Tableì„ ì§ì ‘ ì‘ì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n2. ONOS REST API : ONOS REST APIë¥¼ í†µí•´ì„œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤. ì´ë•Œì—ëŠ” ONOSê°€ high levelë¡œ ì¶”ìƒí™”í•œ flow control ë°©ì‹ì„ í™œìš©í•´ì•¼ í•œë‹¤.(ex. intent) ì´ëŠ” ONOSë¥¼ ì‹¤í–‰í•˜ê³  ìˆë‹¤ë©´, ë‹¤ìŒ urlì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. [http://localhost:8181/onos/v1/docs/](http://localhost:8181/onos/v1/docs/)\n3. ONOS CLI : ONOS CLI ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\nì´ì œë¶€í„° í•´ë‹¹ ì„¸ê°€ì§€ ë°©ì‹ì„ ì ì ˆíˆ í™œìš©í•˜ì—¬ ì„¤ì •í•˜ì—¬ ê° Simulation ë³„ë¡œ ìˆ˜í–‰ì„ í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n### Scenario 1\n\n> **ì¤‘ê°„ì— linkê°€ ëŠì–´ì§„ ê²½ìš° with ONOS CLI**\n\n![sdn-tuto-scenario-1](/images/sdn-tuto-scenario-1.png)\n\në¨¼ì € ëª¨ë“  hostì—ì„œ serverë¡œ trafficì„ ì¤‘ê³„í•´ì¤„ ìˆ˜ ìˆë„ë¡ ë‹¤ìŒê³¼ ê°™ì´ intentë¥¼ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤. íŠ¹ì • hostê°„ì˜ intentë¥¼ ì„¤ì •í•˜ë©´ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ ì°¾ì•„ì„œ routingì„ ìˆ˜í–‰í•´ì¤€ë‹¤. ë˜í•œ, íŠ¹ì • ì—°ê²°ì´ ì¤‘ê°„ì— ì‚¬ë¼ì ¸ë„ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ ì¬ì„¤ì •í•œë‹¤.\n\n```bash\nonos> add-host-intent 00:00:00:00:00:01/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:02/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:03/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:04/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:05/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:06/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:07/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:08/None 00:00:00:00:00:09/None\n```\n\nì´ í›„ì— mininetì—ì„œ íŠ¹ì • linkë¥¼ ë¹„í™œì„±í™”ì‹œí‚¨ë‹¤.\n\n```bash\nmininet> link s11 l25 down\n```\n\n![sdn-tuto-scenario-1-result](/images/sdn-tuto-scenario-1-result.png)\n\n### Scenario 2\n\n> **Load Balancingì„ í†µí•´ì„œ ì¸¡ì • ë°ì´í„° ê³ ë¥´ê²Œ ë¶„ë°° with Open Vswitch CLI**\n\n![sdn-tuto-scenario-2](/images/sdn-tuto-scenario-2.png)\n\nì´ì „ Scenarioì˜ intentë¥¼ ìœ ì§€í•œ ìƒíƒœì—ì„œ OpenFlowì˜ Group Tableì˜ `select` typeì„ í™œìš©í•˜ë©´, Load Balancingì´ ê°€ëŠ¥í•˜ë‹¤. ë¨¼ì €, ONOS CLIì—ì„œ ì™¸ë¶€ flowRuleë„ ë°›ì•„ë“¤ì´ë„ë¡ ì„¤ì •í•œ í›„\n\n```bash\n$ onos localhost\nonos> cfg set org.onosproject.net.flow.impl.FlowRuleManager allowExtraneousRules True\n```\n\në‹¤ìŒê³¼ ê°™ì´ group entry ìƒì„± ë° flowì¶”ê°€ë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ sudo ovs-ofctl add-group l21 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l21 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l21 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l22 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l22 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l22 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l23 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l23 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l23 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l24 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l24 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l24 in_port=4,actions=group:1 -O OpenFlow11\n```\n\n![sdn-tuto-scenario-2-result](/images/sdn-tuto-scenario-2-result.png)\n\n### Scenario 3\n\n> **h51ì´ downë˜ì–´ h52ë¡œ traffic redirection with Open Vswitch CLI**\n\n![sdn-tuto-scenario-3](/images/sdn-tuto-scenario-3.png)\n\nserverë¡œ ê°€ëŠ” Leaf Switchì—ì„œ packetì˜ IP, MAC ì£¼ì†Œë¥¼ ë³€ê²½í•˜ì—¬ Redirectionì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ sudo ovs-ofctl add-flow l25 \\\n  \"in_port=1, dl_dst=00:00:00:00:00:09,\n   actions=mod_dl_dst:00:00:00:00:00:10,mod_nw_dst:10.0.0.10,output:4\"\n$ sudo ovs-ofctl ad-flow l25 \\\n  \"in_port=4, dl_src=00:00:00:00:00:10,\n   actions=mod_dl_src:00:00:00:00:00:09,mod_nw_dst:10.0.0.9,output:1\"\n```\n\n![sdn-tuto-scenario-3-result](/images/sdn-tuto-scenario-3-result.png)\n\n### Scenario 4\n\n> **Meterë¥¼ ì´ìš©í•´ì„œ ê´€ì¸¡ì†Œë¡œ ê°€ëŠ” ê³¼ë„í•œ traffic ì°¨ë‹¨ with ONOS REST API**\n\n![sdn-tuto-scenario-4](/images/sdn-tuto-scenario-4.png)\n\níŠ¹ì • Switchì—ì„œ íŠ¹ì • portë¡œ ë‚˜ê°€ëŠ” trafficì˜ ìµœëŒ€ê°’ì„ `500KB/s`ë¡œ ì œí•œí•˜ëŠ” ì˜ˆì‹œì´ë‹¤.\n\n- Meterë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ REST API  \n  **`/meters/of:000000000000000c`ë¡œ POST ìš”ì²­**\n\n```json\n{\n  \"deviceId\": \"of:000000000000000c\",\n  \"unit\": \"KB_PER_SEC\",\n  \"burst\": true,\n  \"bands\": [\n    {\n      \"type\": \"DROP\",\n      \"rate\": 500,\n      \"burstSize\": 0,\n      \"prec\": 0\n    }\n  ]\n}\n```\n\n- Meterë¥¼ íŠ¹ì • Switchì— ì ìš©í•˜ê¸° ìœ„í•œ REST API  \n  **`/flows/of:000000000000000c?appId=meter`ë¡œ POST ìš”ì²­**\n\n```json\n{\n  \"priority\": 40000,\n  \"isPermanent\": true,\n  \"deviceId\": \"of:000000000000000c\",\n  \"treatment\": {\n    \"instructions\": [\n      {\n        \"type\": \"METER\",\n        \"meterId\": \"1\"\n      },\n      {\n        \"type\": \"OUTPUT\",\n        \"port\": \"2\"\n      }\n    ]\n  },\n  \"selector\": {\n    \"criteria\": [\n      {\n        \"type\": \"ETH_TYPE\",\n        \"ethType\": \"0x0800\"\n      }\n    ]\n  }\n}\n```\n\n![sdn-tuto-scenario-4-result](/images/sdn-tuto-scenario-4-result.png)\n","slug":"sdn-tutorial","date":"2022-06-03 19:54","title":"SDN Tutorial","category":"Network","tags":["SDN","Mininet","OpenFlow","ONOS","OpenVSwitch"],"thumbnailSrc":"https://euidong.github.io/images/sdn-tuto-hero.jpg"}],"params":{"subject":"Mininet"}},"__N_SSG":true}