{"pageProps":{"posts":[{"content":"\n## ì¶œì²˜\n\n- [ğŸ”— just-containers/s6-overlay](https://github.com/just-containers/s6-overlay)\n\n## Intro\n\ndockerì— ê¸°ë³¸ ì´ë…ì€ í•˜ë‚˜ì˜ containerì—ëŠ” í•˜ë‚˜ì˜ processë§Œ ë‘ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì´ì— ëŒ€í•´ì„œ ë°˜ëŒ€ë¥¼ í•˜ê³ , í•˜ë‚˜ì˜ containerì— ì—¬ëŸ¬ ê°œì˜ processë¥¼ ì‹¬ê³  ì´ë¥¼ ì´ìš©í•˜ê² ë‹¤ëŠ” ìƒê°ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ open sourceì´ë‹¤. ì‚¬ìš© ì˜ˆì‹œëŠ” main process ë‚´ë¶€ì— cronjobì„ ë¼ì›Œë„£ëŠ” ê²ƒê³¼ ê°™ì€ ê²½ìš°ê°€ ìˆì„ ê²ƒì´ë‹¤.\n\nì´ëŠ” ê²°ë¡ ì ìœ¼ë¡œ Dockerfileì˜ í™•ì¥ ë²„ì „ì´ë¼ê³  ë³¼ ìˆ˜ë„ ìˆì„ ê±° ê°™ë‹¤. ì¢€ ë” ë³µì¡í•œ ì‘ì—…ì„ ë” ì²´ê³„ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” í‹€ì„ ì œê³µí•œë‹¤. ì•„ì´ë””ì–´ ìì²´ëŠ” ì°¸ì‹ í•˜ë‚˜ ë‚¨ë°œí•˜ê²Œ ë˜ë©´, statelessí•˜ë˜ containerê°€ ì ì  statefulí•˜ê²Œ ë˜ë©´ì„œ ì‹œìŠ¤í…œì´ ì˜¤ì—¼ë  ìˆ˜ë„ ìˆìŒì„ ìœ ì˜í•˜ì.\n\nì•„ë˜ ë‚´ìš©ì€ í•´ë‹¹ opensourceì˜ READMEë¥¼ ì§ì ‘ ë²ˆì—­í•œ ë‚´ìš©ì´ë‹ˆ ì˜ì—­ë„ ë§ì´ í¬í•¨ëœë‹¤. ì£¼ì˜í•´ì„œ ì½ë„ë¡ í•˜ì. ë˜í•œ, ëª¨ë¥´ëŠ” ìš©ì–´ëŠ” ì•„ë˜ Terminologyë¥¼ í™•ì¸í•´ë³´ë„ë¡ í•˜ì.\n\n## Goals\n\n- ì´ë¯¸ì§€ ì œì‘ìê°€ ì‰½ê²Œ s6(s6ëŠ” processë¥¼ ê°ë…, ê´€ë¦¬, logging, ì´ˆê¸°í™”í•˜ëŠ” ê¸°ëŠ¥ë“¤ì˜ ì§‘í•©)ë¥¼ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›\n- ë‹¤ë¥¸ docker imageë“¤ì²˜ëŸ¼ ë™ì¼í•˜ê²Œ ì‘ë™\n\n## Features\n\n- cont-init.d â†’ì´ˆê¸°í™” ì‘ì—…ê³¼ ê°™ì€ end-user ì‹¤í–‰ ì‘ì—…ì„ í—ˆìš©í•˜ëŠ” ê°„ë‹¨í•œ ì´ˆê¸° ì‘ì—…\n- cont-finish.d â†’ ë§ˆë¬´ë¦¬ ì‘ì—…\n- fix-attrs.d â†’ ownership ê¶Œí•œì„ ìˆ˜ì •\n- s6-overlayëŠ” ì ë‹¹í•œ PID 1 ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.\n  - containerì— ê±¸ë¦¬ëŠ” zombie processë¥¼ ê°€ì§€ì§€ ì•Šê³ , ì ë‹¹í•œ ì ˆì°¨ì— ë”°ë¼ ì œê±°ë  ê²ƒì´ë‹¤.\n- **ì—¬ëŸ¬ ê°œì˜ processë¥¼ í•˜ë‚˜ì˜ containerì—ì„œ ì‘ë™ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.**\n- **\"The Docker Way\"(ì•„ë˜ì—ì„œ ì„¤ëª…)ì— ë”°ë¼ ì‘ë™ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.**\n- ëª¨ë“  ê¸°ë°˜ ì´ë¯¸ì§€(Ubuntu, CentOS, Fedora, ì‹¬ì§€ì–´ëŠ” Busybox)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n- ì´ë¯¸ì§€ì˜ layerì˜ ìˆ˜ë¥¼ ì‘ê²Œ ìœ ì§€í•˜ê¸° ìœ„í•˜ì—¬ í•˜ë‚˜ì˜ tar, gz íŒŒì¼ë¡œ ë°°í¬í•œë‹¤.\n- s6Â ì™€Â s6-portable-utils ëŠ” ì†ì‰½ê³  ì‘ì„±ì´ ì‰¬ìš´ ìœ í‹¸ë¦¬í‹° ì „ì²´ë¥¼ í¬í•¨í•œë‹¤.\n- ë¹„ë°€ë¦¬ì— s6-log ë¥¼ ì‚¬ìš©í•˜ëŠ” logutil-serviceëŠ” ì˜¤ë˜ëœ ë¡œê·¸ì˜ ìˆœí™˜ì„ ìˆ˜í–‰í•œë‹¤.\n- íŠ¹ì • ìœ ì €ë¡œ ì „ì²´ process treeë¥¼ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•˜ì—¬, Dockerì˜ USER ì§€ì¹¨ì— ëŒ€í•˜ì—¬ ì§€ì›í•œë‹¤. ëª¨ë“  featureì— ëŒ€í•˜ì—¬ ì§€ì›í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤. ìì„¸í•œ ì‚¬í•­ì€ ì—¬ê¸°ì„œ í™•ì¸ê°€ëŠ¥í•˜ë‹¤.([ğŸ”— notes](https://github.com/just-containers/s6-overlay#notes))\n\n## The Docker Way\n\nìì£¼ ê°•ì¡°ë˜ì–´ì§€ëŠ” Dockerì˜ ì‹ ë…ì€ \"í•˜ë‚˜ì˜ containerì— í•˜ë‚˜ì˜ processë§Œ ë‘ì–´ì•¼ í•œë‹¤.\"ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜, S6 overlay íŒ€ì€ ì´ì— ëŒ€í•˜ì—¬ ë™ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ë‚˜ì˜ containerì— ì—¬ëŸ¬ processë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì— ëŒ€í•œ ë³¸ì§ˆì  ë¬¸ì œëŠ” ì—†ë‹¤. ë” ì¶”ìƒì ìœ¼ë¡œ \"í•˜ë‚˜ì˜ containerì— í•˜ë‚˜ì˜ thingë§Œ ë‘ì–´ì•¼ í•œë‹¤.\"ëŠ” ê²ƒì´ í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ëª©ì ì´ë‹¤. â†’ í•˜ë‚˜ì˜ containerëŠ” í•˜ë‚˜ì˜ ê²ƒë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¡œì¨, chatting service ë˜ëŠ” gitlabì˜ ë™ì‘ì„ ë“¤ ìˆ˜ ìˆë‹¤. ì´ê²ƒë“¤ì€ ì—¬ëŸ¬ ê°œì˜ processë¥¼ í¬í•¨í•˜ì§€ë§Œ, í•˜ë‚˜ì˜ thingì´ë‹¤. ë”°ë¼ì„œ, ì˜¬ë°”ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nì´ë¯¸ì§€ ì œì‘ìê°€ process supervisorë¥¼ í”¼í•˜ëŠ” ì´ìœ ëŠ” í•˜ë‚˜ì˜ process supervisorê°€ ì‹¤íŒ¨í•œ ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•œë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ì„œ ê²°êµ­ Docker containerëŠ” ì ˆëŒ€ ì£½ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì´ëŸ¬í•œ containerê°€ ì£½ì§€ ì•ŠëŠ” í˜„ìƒì€ docker ìƒíƒœê³„ë¥¼ íŒŒê´´í•  ê²ƒì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ì´ë¯¸ì§€ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ, ì¤‘ë‹¨ì„ ìš”ì²­í•˜ëŠ” í•˜ë‚˜ì˜ processë¥¼ ë™ì‘ì‹œí‚¨ë‹¤. ì—ëŸ¬ì— ëŒ€í•´ì„œ ì¢…ë£Œë¥¼ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨, ì‹œìŠ¤í…œ ê´€ë¦¬ìëŠ” ì‹¤íŒ¨ë¥¼ ì›í•˜ëŠ”ëŒ€ë¡œ ë‹¤ë£¨ëŠ” ê²ƒì„ í—ˆë½ë°›ëŠ”ë‹¤. ë§Œì•½ ì´ë¯¸ì§€ë¥¼ ì ˆëŒ€ ì¢…ë£Œì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤ë©´, ì—ëŸ¬ íšŒë³µê³¼ ì‹¤íŒ¨ ì•Œë¦¼ì— ëŒ€í•œ ëŒ€ì•ˆì±…ì´ í•„ìš”í•˜ë‹¤. ì¦‰, containerë¥¼ ì‹¤íŒ¨ì—ë„, ì¢…ë£Œí•˜ì§€ ì•ŠëŠ” ê²ƒì€ ë§¤ìš° ìœ„í—˜í•˜ë‹¤.\n\nS6 overlay íŒ€ì˜ ì •ì±…ì€ ë§Œì•½ thingì´ ì‹¤íŒ¨í•œë‹¤ë©´, ê·¸ë•Œ containerê°€ ë°˜ë“œì‹œ ì‹¤íŒ¨í–ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ì–´ë–¤ processë“¤ì„ ë‹¤ì‹œ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆì„ì§€ì™€ ì–´ë–¤ containerë¥¼ ëŒì–´ë‚´ë¦´ì§€ë¥¼ ê²°ì •í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, cron ì´ë‚˜ syslogì—ì„œ ì‹¤íŒ¨ê°€ ë°œìƒí–ˆì„ ë•Œ, containerëŠ” ë¶€ì •ì  ì˜í–¥ ì—†ì´ ì´ê²ƒì„ ì¬ì‹œì‘í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ ë§Œì•½, ejabberd ê°€ ì‹¤íŒ¨í–ˆì„ ê²½ìš°ì—ëŠ” containerëŠ” ì¢…ë£Œë  ê²ƒì´ê³ , ì´ë¥¼ í†µí•´ì„œ ì‹œìŠ¤í…œ ê´€ë¦¬ìëŠ” ì´ì— ëŒ€í•œ ëŒ€ì±…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\në”°ë¼ì„œ, S6 teamì—ì„œ ìƒê°í•˜ëŠ” \"The Docker Way\"ë€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- ContainerëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ thingë§Œ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.\n- ContainerëŠ” thingì´ ë©ˆì¶˜ë‹¤ë©´, ë°˜ë“œì‹œ ë©ˆì¶°ì•¼ í•œë‹¤.\n\nê·¸ë¦¬ê³ , ìš°ë¦¬ì˜ ì´ˆê¸° ì‹œìŠ¤í…œì€ ì´ë¥¼ ìœ„í•´ì„œ ì„¤ê³„ë˜ì—ˆë‹¤. ì´ë¯¸ì§€ëŠ” ì—¬ì „íˆ ë‹¤ë¥¸ Docker ì´ë¯¸ì§€ì²˜ëŸ¼ ë™ì‘í•  ê²ƒì´ê³ , ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¯¸ì§€ë“¤ì˜ ìƒíƒœê³„ì™€ í•¨ê»˜ ì–´ìš°ëŸ¬ì§ˆ ê²ƒì´ë‹¤.\n\n---\n\n## Init stages\n\nS6 overlay initì€ containerí™”ëœ í™˜ê²½ì— ì ë‹¹í•˜ê²Œ ë™ì‘í•˜ê¸° ìœ„í•´ ì ë‹¹í•˜ê²Œ ë§ì¶¤í™”í•œ í”„ë¡œê·¸ë¨ì´ë‹¤. í•´ë‹¹ sectionì—ì„œëŠ” ì–´ë–»ê²Œ stageë“¤ì´ ë™ì‘í•˜ëŠ”ì§€ ê°„ë‹¨íˆ ì„¤ëª…í•œë‹¤. ë§Œì•½ ë” ìì„¸í•œ ì‚¬í•­ì´ ê¶ê¸ˆí•˜ë‹¤ë©´, ë‹¤ìŒ articleì„ ì½ê¸°ë¥¼ ì¶”ì²œí•œë‹¤. ([How to run s6-svscan as process 1](http://skarnet.org/software/s6/s6-svscan-1.html))\n\n- **stage 1 :** í•´ë‹¹ ë‹¨ê³„ì˜ ëª©ì ì€ ë‘ ë²ˆì§¸ ë‹¨ê³„ì— ì§„ì…í•˜ê¸° ìœ„í•´ì„œ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ë¥¸ ê²ƒë“¤ ì‚¬ì´ì—ì„œ, ì´ê²ƒì€ container í™˜ê²½ë³€ìˆ˜ë“¤ì„ ì¤€ë¹„í•˜ëŠ” ê²ƒê³¼ s6 ê°€ íš¨ê³¼ì ìœ¼ë¡œ ì‹œì‘ë  ë•Œê¹Œì§€ ë‘ ë²ˆì§¸ stageì˜ ì‹œì‘ì„ ë§‰ëŠ” ê²ƒì— ëŒ€í•œ ì±…ì„ì´ ìˆë‹¤.\n- **stage 2 :** end-userê°€ ì œê³µí•œ ëŒ€ë¶€ë¶„ì˜ íŒŒì¼ë“¤ì´ ìˆ˜í–‰ë˜ì–´ì§€ëŠ” ë‹¨ê³„ì´ë‹¤.\n  1. /etc/fix-attrs.dë¥¼ ì‚¬ìš©í•˜ì—¬, ì†Œìœ ê¶Œê³¼ ê¶Œí•œì„ ê³ ì •í•œë‹¤.\n  2. /etc/cont-init.dì— ê¸°ìˆ ëœ ì´ˆê¸°í™” scriptë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n  3. /etc/services.dì— ì íŒ user serviceë“¤ì„ s6ê°€ supervisionì„ ë™ì‘ ì¤‘ì¸ í´ë”ì— ë³µì‚¬í•˜ê³ , signalì„ ë³´ëƒ„ìœ¼ë¡œì¨ ì ì ˆí•˜ê²Œ supervisingì„ ì‹œì‘í•  ìˆ˜ ìˆë‹¤.\n- **stage 3 :** í•´ë‹¹ ë‹¨ê³„ëŠ” ì¢…ë£Œ ë‹¨ê³„ì´ë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.\n  1. TERM signalì„ ëª¨ë“  ê´€ë¦¬ ì¤‘ì¸ serviceì—ê²Œ ì „ì†¡í•œë‹¤.\n  2. /etc/cont-init.dì— í¬í•¨ëœ ì¢…ë£Œ scriptsë¥¼ ìˆ˜í–‰í•œë‹¤. ì´ëŠ” ì„œë¹„ìŠ¤ê°€ ì—¬ì „íˆ ì¢…ë£Œë˜ì–´ì§€ëŠ” ì¤‘ì—ë„ ì¢…ë£Œë˜ì–´ì§ˆ ìˆ˜ ìˆë‹¤.\n  3. ëª¨ë“  serviceê°€ ì¢…ë£Œë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤.(S6\\_SERVICES\\_GRACETIME millisecondsë¥¼ ë„˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ - default 3000)\n  4. ëª¨ë“  processì—ê²Œ TERM signalì„ ë³´ë‚¸ë‹¤.\n  5. S6\\_KILL\\_GRACETIME milliseconds(default 3000)ë§Œí¼ sleepì„ ìˆ˜í–‰í•œë‹¤.\n  6. ëª¨ë“  processì—ê²Œ KILL signalì„ ì „ì†¡í•œë‹¤.\n\n## Usage\n\ní•´ë‹¹ projectëŠ” í‘œì¤€ tar, gzìœ¼ë¡œ ë°°í¬ë˜ì–´ì¡Œë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” imageì˜ rootì— ì´ë¥¼ ì¶”ì¶œí•˜ê³ , ENTRYPOINTì— /init ì„ ê¸°ì…í•´ì£¼ë©´ ëœë‹¤. (ë§Œì•½, ê¸°ì¡´ ENTRYPOINTê°€ ìˆë‹¤ë©´, ì´ë¥¼ cont-initìœ¼ë¡œ ì˜®ê²¨ì£¼ì–´ì•¼ í•  ê²ƒì´ë‹¤. ë˜ëŠ” S6\\_CMD\\_ARG0ë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤.)\n\nì—¬ê¸°ì„œ, í•´ë‹¹ projectëŠ” wget ë˜ëŠ” curlì„ ìˆ˜í–‰í•  ë•Œ, Dockerì˜ RUNë³´ë‹¤ ADD ì§€ì‹œì–´ë¥¼ ì‚¬ìš©í•  ê²ƒì„ ì¶”ì²œí•œë‹¤. (ì™œëƒí•˜ë©´, ì´ë¥¼ ì´ìš©í•˜ë©´, Dockerê°€ https URLì„ ë‹¤ë£° ìˆ˜ ìˆë‹¤.)\n\nì—¬ê¸°ì„œë¶€í„°, ì„œë¹„ìŠ¤ë¥¼ ì‘ì„±í•  ë•Œì—ëŠ” ë‘ ìŒì˜ ì„ íƒì§€ë¥¼ ê°–ê²Œ ëœë‹¤.\n\n> **1. imageì˜ CMD ë¥¼ ì´ìš©í•˜ì—¬ service/programì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.**\n\n```Dockerfile\nFROM busybox\nADD https://github.com/just-containers/s6-overlay/releases/download/v1.21.8.0/s6-overlay-amd64.tar.gz /tmp/\nRUN gunzip -c /tmp/s6-overlay-amd64.tar.gz | tar -xf - -C /\nENTRYPOINT [\"/init\"]\n```\n\n```bash\n# run\ndocker-host $ docker build -t s6demo .\ndocker-host $ docker run -ti s6demo /bin/sh\n[fix-attrs.d] applying owners & permissions fixes...\n[fix-attrs.d] 00-runscripts: applying... \n[fix-attrs.d] 00-runscripts: exited 0.\n[fix-attrs.d] done.\n[cont-init.d] executing container initialization scripts...\n[cont-init.d] done.\n[services.d] starting services\n[services.d] done.\n\n# ps\ndocker-host $ docker ps\nPID   USER     COMMAND\n    1 root     s6-svscan -t0 /var/run/s6/services\n    21 root     foreground  if   /etc/s6/init/init-stage2-redirfd   foreground    if     s6-echo     [fix-attrs.d] applying owners & permissions fixes.\n    22 root     s6-supervise s6-fdholderd\n    23 root     s6-supervise s6-svscan-log\n    24 nobody   s6-log -bp -- t /var/log/s6-uncaught-logs\n    28 root     foreground  s6-setsid  -gq  --  with-contenv  /bin/sh  import -u ? if  s6-echo  --  /bin/sh exited ${?}  foreground  s6-svscanctl  -t\n    73 root     /bin/sh\n    76 root     ps\n\n# exit\n/bin/sh exited 0\ndocker-host $\n```\n\n> **2. s6-overlayë¥¼ í™œìš©í•˜ëŠ” ì‰¬ìš´ ë°©ë²•ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.**\n\nDockerfileì´ buildí•  ë•Œ, ì‘ì„±í•˜ê±°ë‚˜ runtimeì— command lineìœ¼ë¡œ ì…ë ¥ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ê²ƒì€ s6 supervisorì— ì˜í•´ì„œ ì‹¤í–‰ë˜ì–´ì§ˆ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì‹¤íŒ¨ë‚˜ ì¢…ë£Œ ì‹œì— í•´ë‹¹ containerëŠ” ì¢…ë£Œë˜ì–´ì§ˆ ê²ƒì´ë‹¤. interactive programë„ s6 supervisor í•˜ìœ„ì—ì„œë„ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆë‹¤. service scriptë¥¼ ì‘ì„±í•˜ì—¬ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n\n`/etc/services.d/myapp/run`\n\n```shell\n  !/usr/bin/execlineb -P\n  nginx -g \"daemon off;\"\n```\n\nê´€ë¦¬ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œì‘í•˜ëŠ” ê²ƒì€ ë‹¨ì§€ /etc/services.dì— service directoryë¥¼ ë§Œë“¤ê³ , ì¥ê¸°ê°„ ì¡´ì¬í•  process ì‹¤í–‰ì— ëŒ€í•œ ë‚´ìš©ì„ ì ì€ run íŒŒì¼ì„ ì´ ì•ˆì— ë§Œë“œëŠ” ê²ƒë³´ë‹¤ ë” ì‰¬ì›Œì§ˆ ìˆ˜ ì—†ë‹¤. ì´ê±°ë©´ ë‹¤ë‹¤. ë§Œì•½ s6 supervisionì— ëŒ€í•œ ë” ë§ì€ ë‚´ìš©ì„ ì•Œê¸°ë¥¼ ì›í•œë‹¤ë©´ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì‚´í´ë³´ì•„ë¼. (\\[servicedir\\](<[http://skarnet.org/software/s6/servicedir.html](http://skarnet.org/software/s6/servicedir.html)\\>))\n\n## ì†Œìœ ê¶Œ ë° ê¶Œí•œ ê³ ì •\n\në•Œë•Œë¡œ, ì§„í–‰ ì „ì— ì†Œìœ ê¶Œê³¼ ê¶Œí•œì„ ê³ ì •í•˜ëŠ” ê²ƒì´ í•„ìš”í•  ë•Œê°€ ìˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ container ë‚´ë¶€ì— host folderì™€ mountëœ folderê°€ ìˆì„ ë•Œì´ë‹¤. overlayëŠ” /etc/fix-attrs.dì˜ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ í—¤ì³ë‚˜ê°ˆ ë°©ë²•ì„ ì œê³µí•œë‹¤.\n\n- Format\n  - path : File ë˜ëŠ” Directoryì˜ ê²½ë¡œ\n  - recurse : folderê°€ ë°œê²¬ë˜ì—ˆë‹¤ë©´, í•´ë‹¹ folder ë‚´ë¶€ì˜ ë‚´ìš©ë„ í¬í•¨í• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. (true or false)\n  - account : targetì˜ accountì´ë‹¤. accountë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ê²½ìš° defaultë¡œ ì˜ˆë¹„ uid:gid(user id, group id)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ì–´, nobody, 32768:32768 ì´ë¼ê³  ì…ë ¥í•  ê²½ìš°, nobody accountë¥¼ ì²«ë²ˆì§¸ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì‹œë„ë¥¼ í•˜ê³ , ì˜ˆë¹„ë¡œ uidê°€ 32768ì¸ ëŒ€ìƒì„ ì˜ˆë¹„ë¡œ ì°¾ëŠ”ë‹¤. ì˜ˆë¥¼ë“¤ì–´, daemon ì˜ ê³„ì •ì´ UID=2ì´ê³ , GID=2ì¸ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ account ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n    - daemon: UID=2 GID=2\n    - daemon,3:4: UID=2 GID=2\n    - 2:2,3:4: UID=2 GID=2\n    - daemon:11111,3:4: UID=2 GID=11111\n    - 11111:daemon,3:4: UID=11111 GID=2\n    - daemon:daemon,3:4: UID=2 GID=2\n    - daemon:unexisting,3:4: UID=2 GID=4\n    - unexisting:daemon,3:4: UID=3 GID=2\n    - 11111:11111,3:4: UID=11111 GID=11111\n  - fmode : target fileì˜ mode â†’ example 0644\n  - dmode : target directoryì˜ mode â†’ example 0755\n- path recurse account fmode dmode\n\n> **Example**\n\n`/etc/fix-attrs.d/01-mysql-data-dir`\n\n```shell\n/var/lib/mysql true mysql 0600 0700\n```\n\n`/etc/fix-attrs.d/02-mysql-log-dirs`\n\n```shell\n/var/log/mysql-error-logs true nobody,32768:32768 0644 2700\n/var/log/mysql-general-logs true nobody,32768:32768 0644 2700\n/var/log/mysql-slow-query-logs true nobody,32768:32768 0644 2700\n```\n\n## ì´ˆê¸°í™” ì‘ì—… ì‹¤í–‰í•˜ê¸°\n\n`/etc/fix-attrs.d`ì— ë”°ë¼ ì†ì„±ì„ ê³ ì •í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•œ í›„, `/etc/services.d`ì— ì íŒ userì—ê²Œ ì œê³µë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ê¸° ì „ì—, overlayëŠ” /etc/cont-init.d ì—ì„œ ë°œê²¬ëœ ëª¨ë“  scriptë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n\n`/etc/cont-init.d/02-confd-onetime`\n\n```shell\n#!/usr/bin/execlineb -P\n\nwith-contenv\ns6-envuidgid nginx\nmultisubstitute\n{\n  import -u -D0 UID\n  import -u -D0 GID\n  import -u CONFD_PREFIX\n  define CONFD_CHECK_CMD \"/usr/sbin/nginx -t -c {{ .src }}\"\n}\nconfd --onetime --prefix=\"${CONFD_PREFIX}\" --tmpl-uid=\"${UID}\" --tmpl-gid=\"${GID}\" --tmpl-src=\"/etc/nginx/nginx.conf.tmpl\" --tmpl-dest=\"/etc/nginx/nginx.conf\" --tmpl-check-cmd=\"${CONFD_CHECK_CMD}\" etcd\n```\n\n## ë¶€ê°€ì ì¸ ì¢…ë£Œ ì‘ì—… ì‘ì„±í•˜ê¸°\n\nê¸°ë³¸ì ìœ¼ë¡œ, /etc/services.d ì— ì˜í•´ ìƒì„±ëœ ì„œë¹„ìŠ¤ëŠ” ìë™ì ìœ¼ë¡œ ì¬ì‹œì‘ëœë‹¤. ë§Œì•½, ì„œë¹„ìŠ¤ê°€ containerë¥¼ down ì‹œì¼œì•¼í•œë‹¤ë©´, finish scriptë¥¼ í†µí•´ì„œ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n`/etc/services.d/myapp/finish`\n\n```shell\n#!/usr/bin/execlineb -S0\n\ns6-svscanctl -t /var/run/s6/services\n```\n\në” ë°œì „ëœ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.\n\n`/etc/services.d/myapp/finish`\n\n```shell\n#!/usr/bin/execlineb -S1\nif { s6-test ${1} -ne 0 }\nif { s6-test ${1} -ne 256 }\n\ns6-svscanctl -t /var/run/s6/services\n```\n\n## Logging\n\nS6 overlayëŠ” ì¦‰ì‹œ \\[s6-log\\](<[http://skarnet.org/software/s6/s6-log.html](http://skarnet.org/software/s6/s6-log.html)\\>)ë¥¼ í†µí•œ logging mechnismìœ¼ë¡œ ì‰½ê²Œ loggingì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.\n\në˜í•œ, loggingì„ í•˜ë‚˜ì˜ ë°”ì´ë„ˆë¦¬ í˜¸ì¶œë¡œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ logutil-serviceë¼ëŠ” ë„ì›€ ì¥ì¹˜ë¥¼ ì œê³µí•œë‹¤.\n\nì´ëŠ” ë‹¤ìŒ ìˆœì„œì— ë”°ë¼ ì§„í–‰ëœë‹¤.\n\n- s6-logê°€ ì–´ë–»ê²Œ S6\\_LOGGING\\_SCRIPTì— ì íŒ logging scriptë¥¼ ì½ì„ì§€ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.\n- nobody userì˜ root ê¶Œí•œì„ ì‚­ì œí•œë‹¤.(ë§Œì•½, ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ 32768:32768 ì—ê²Œ ë„˜ê²¨ì§‘ë‹ˆë‹¤.)\n- ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì›ë‹ˆë‹¤.\n- s6-logë¥¼ ì‹¤í–‰í•¨ìœ¼ë¡œì¨ loggingì„ ì‹œì‘í•©ë‹ˆë‹¤.\n\n> **ì£¼ì˜ì‚¬í•­**\n\n- ê¶Œí•œì´ ìë™ì ìœ¼ë¡œ ì‚­ì œëœ ì´í›„ë¡œ, s6-setuidgidë¡œ userë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤.\n- ë‘˜ ì¤‘ í•˜ë‚˜ì˜ ë‚´ìš©ì„ log folderì—ì„œ ë³´ì¥í•´ì•¼ í•œë‹¤.\n  1. ì¡´ì¬í•œë‹¤ë©´, nobody userì— ì˜í•´ ì‘ì„±ì´ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.\n  2. ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ìƒìœ„ í´ë”ê°€ nobody userì— ì˜í•´ ì‘ì„±ì´ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.\n\nlog foderëŠ” cont-init.d scriptì—ì„œ ë˜ëŠ” run script ì•ˆì—ì„œ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Example\n\n> **1. cont-inid.dë¥¼ í™œìš©í•œ ë°©ë²•**\n\n`/etc/cont-init.d/myapp-logfolder`\n\n```shell\n#!/bin/sh\nmkdir -p /var/log/myapp\nchown nobody:nogroup /var/log/myapp\n```\n\n> **2.  run scriptë¥¼ í™œìš©í•œ ë°©ë²•**\n\n`/etc/services.d/myapp/log/run`\n\n```shell\n#!/bin/sh\n# input stdinì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” logging\nexec logutil-service /var/log/myapp\n\n#!/bin/sh\n# fifoì— ë”°ë¥¸ logë¥¼ ìŒ“ê¸°ë¥¼ ì›í•œë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜í–‰í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\nexec logutil-service -f /var/run/myfifo /var/log/myapp\n```\n\n## ê¶Œí•œ ì‚­ì œ\n\nì„œë¹„ìŠ¤ ì‹¤í–‰ì´ ë‹¤ê°€ì˜¤ë©´, ì‹¤í–‰ ì „ì— ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê²ƒì€ ì„œë¹„ìŠ¤ì´ê±´ logging ì„œë¹„ìŠ¤ì´ê±´ ë§¤ìš° ì¤‘ìš”í•œ ì‘ì—…ì´ë‹¤. s6ëŠ” ì´ë¯¸ ì´ëŸ¬í•œ ì‘ì—…ì„ ìœ„í•œ ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆë‹¤.\n\n> **InÂ execline**\n\n```shell\n#!/usr/bin/execlineb -P\ns6-setuidgid daemon\nmyservice\n```\n\n> **InÂ sh**\n\n```shell\n#!/bin/sh\nexec s6-setuidgid daemon myservice\n```\n\në§Œì•½ ì´ëŸ¬í•œ ê¸°ëŠ¥ì— ëŒ€í•˜ì—¬ ë” ì•Œê³  ì‹¶ë‹¤ë©´, ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ì‚´í´ ë³´ì•„ë¼. [s6-setuidgid](http://skarnet.org/software/s6/s6-setuidgid.html),Â  [s6-envuidgid](http://skarnet.org/software/s6/s6-envuidgid.html), [s6-applyuidgid](http://skarnet.org/software/s6/s6-applyuidgid.html)\n\n## Container í™˜ê²½\n\në§Œì•½ container í™˜ê²½ì„ ì œê³µí•˜ê¸° ìœ„í•´ì„œ ì§ì ‘ ë§Œë“  scriptë¥¼ ì›í•œë‹¤ë©´, with-contenvë¥¼ í†µí•´ì„œ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> **/etc/cont-init.d/01-contenv-example**\n\n```shell\n#!/usr/bin/with-contenv sh\necho $MYENV\n```\n\n## Read-Only Root íŒŒì¼ ì‹œìŠ¤í…œ\n\nìµœê·¼ dokcerì˜ ë²„ì „ì—ì„œ read-only íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ containerë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì„ í—ˆìš©í•˜ì˜€ë‹¤. 2ë‹¨ê³„ ê³¼ì •ì—ì„œ, overlayëŠ” ì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” cont-init.d ì˜ ê¶Œí•œì„ ë³€ê²½í•˜ëŠ” ë¶€ê°€ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. ë§Œì•½, root íŒŒì¼ ì‹œìŠ¤í…œì´ read-onlyë¼ë©´, S6\\_READ\\_ONLY\\_ROOT=1 ë¼ëŠ” ì„¤ì •ì„ í•´ì£¼ì–´ stage 2ì—ì„œ ì´ë¥¼ ì•Œ ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ permissionì„ ë³€ê²½í•˜ê¸° ì´ì „ì—, /var/run/s6 ì— ì‚¬ìš©ìì˜ íŒŒì¼ì„ ë³µì‚¬í•˜ê²Œ ëœë‹¤.\n\nì´ëŠ” /var ê°€ ìˆ˜ì •ì´ ê°€ëŠ¥í•œ ê¶Œí•œì„ ê°–ê²Œëœë‹¤ëŠ” ê²ƒì´ê³ , ì´ëŠ” tmpfs ë¼ëŠ” íŒŒì¼ì‹œìŠ¤í…œì— ì˜í•´ì„œ ê°€ëŠ¥í•˜ë‹¤.\n\nâ†’ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ë©´, ìˆ˜í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ docker run -e S6_READ_ONLY_ROOT=1 --read-only --tmpfs /var:rw,exec [image name]\n```\n\n> **ì£¼ì˜ì‚¬í•­**\n\në§Œì•½ S6\\_READ\\_ONLY\\_ROOT=1 ë¥¼ ì‚¬ìš©í•  ë•Œ, fix-attrs.d,Â cont-init.d,Â cont-finish.d, services.dì˜ symbol linkë¥¼ ìœ ì˜í•´ì•¼ í•œë‹¤. s6ì˜ ì œí•œì‚¬í•­ ë•Œë¬¸ì—, ì• ì„  ë””ë ‰í† ë¦¬ê°€ /var/run/s6ì— ë³µì‚¬ë˜ë©° symbol linkê°€ ì‹¤í–‰ë˜ì–´ ì˜ˆê¸°ì¹˜ ì•Šì€ ì¤‘ë³µì´ ë°œìƒí•œë‹¤.\n\n### **s6 ë™ì‘ ì‚¬ìš©ìí™”**\n\ns6ì˜ ë™ì‘ì„ ì´ë¯¸ ì •ì˜ëœ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•¨ìœ¼ë¡œì¨ ì‹¤í–‰ë‹¨ê³„ì—ì„œ ì¡°ì •í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n- S6\\_KEEP\\_ENVÂ (default = 0): ë§Œì•½ ì„¤ì •ì´ ë˜ë©´, í™˜ê²½ê³¼ ì „ì²´ ê´€ë¦¬ ê³¼ì •ì´ ë°”ë¼ë³´ëŠ” ì›ë³¸ í™˜ê²½ë³€ìˆ˜ëŠ” resetë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” with-contenvë¥¼ ë¬´ì˜ë¯¸í•˜ê²Œ ë°”ê¿”ë²„ë¦°ë‹¤.\n- S6\\_LOGGINGÂ (default = 0):\n  - **0**: ëª¨ë“  Outputì´ stdout/stderrë¡œ ì „ë‹¬ëœë‹¤.\n  - **1**: ë‚´ë¶€ì˜ catch-all loggerë¥¼ ì‚¬ìš©í•˜ì—¬, ì§€ì†ì ìœ¼ë¡œ ì´ê²ƒì— ì „ì†¡í•œë‹¤. ì´ëŠ” /var/log/s6-uncaught-logsì— ìœ„ì¹˜í•œë‹¤. ê·¸ë˜ë„ CMDì—ì„œëŠ” stdout/stderrë¥¼ í†µí•´ ì „ë‹¬í•œë‹¤.\n  - **2**: ë‚´ë¶€ì˜ catch-all loggerë¥¼ ì‚¬ìš©í•˜ì—¬, ì§€ì†ì ìœ¼ë¡œ ì´ê²ƒì— ì „ì†¡í•œë‹¤. ì´ ê³¼ì •ì— CMDë„ í¬í•¨ëœë‹¤. ë”°ë¼ì„œ, stdout/stderrë¡œ ì“°ì—¬ì§€ëŠ” ê²ƒì€ ì•„ë¬´ê²ƒë„ ì—†ë‹¤.\n- S6\\_BEHAVIOUR\\_IF\\_STAGE2\\_FAILSÂ (default = 0):\n  - **0**: script(fix-attrsÂ orÂ cont-init)ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë”ë¼ë„ ì¡°ìš©í•˜ê²Œ ì§€ì†í•œë‹¤.\n  - **1**: ì—ëŸ¬ ë©”ì„¸ì§€ì— ëŒ€í•œ ê²½ê³ ë¥¼ ì œê³µí•œ í›„ì— ì§€ì†í•œë‹¤.\n  - **2**: ê´€ë¦¬ ì‹œìŠ¤í…œì— ì¢…ë£Œ signalì„ ì „ì†¡í•˜ë©´ì„œ ì¢…ë£Œí•œë‹¤.\n- S6\\_KILL\\_FINISH\\_MAXTIMEÂ (default = 5000): /etc/cont-finish.d ì˜ scriptê°€ ì¢…ë£Œ signalì„ ë°›ì„ ë•Œê¹Œì§€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤. ê° scriptê°€ ìˆ˜í–‰ë  ë•Œë§ˆë‹¤ ìˆ˜í–‰ëœë‹¤.\n- S6\\_SERVICES\\_GRACETIMEÂ (default = 3000): ì–¼ë§ˆë‚˜ s6 ê°€ ì„œë¹„ìŠ¤ê°€ TERM signalì„ ë³´ë‚¼ ë•Œê¹Œì§€ ê¸°ë‹¬ë¦´ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\n- S6\\_KILL\\_GRACETIMEÂ (default = 3000): ì–¼ë§ˆë‚˜ s6 ê°€ zombieë¥¼ ê±°ë‘ëŠ”ë° ê¸°ë‹¤ë¦´ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì‹œê°„ì´ ì§€ë‚˜ë©´ KILL signalì„ ì „ì†¡í•©ë‹ˆë‹¤.\n- S6\\_LOGGING\\_SCRIPTÂ (default = \"n20 s1000000 T\"): í•´ë‹¹ ë³€ìˆ˜ëŠ” ì–´ë–»ê²Œ ë¬´ì—‡ì„ loggingí• ì§€ë¥¼ ê²°ì •í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ISO8601ë¥¼ ëª¨ë“  lineì— ë§ë¶™ì´ê³ , 1mbì— ë„ë‹¬í•˜ê±°ë‚˜ 20ê°œ ì´ìƒì˜ íŒŒì¼ì´ ìƒì„±ë˜ë©´ rotationì„ ìˆ˜í–‰í•œë‹¤.\n- S6\\_CMD\\_ARG0Â (default = not set): í•´ë‹¹ í™˜ê²½ ë³€ìˆ˜ì˜ ê°’ì€ dockerì— ì˜í•´ ì „ë‹¬ëœ CMD ì¸ìì— ë§ë¶™ì—¬ì§„ë‹¤. ì¡´ì¬í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ s6-overlayë¡œ ë³€ê²½í•  ë•Œ, ì´ì „ì— ì‚¬ìš©í–ˆë˜ ENTRYPOINTì˜ ê°’ì„ ì´ê³³ì— ì „ë‹¬í•¨ìœ¼ë¡œì¨ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n- S6\\_FIX\\_ATTRS\\_HIDDENÂ (default = 0): ì–´ë–»ê²Œ fix-attrs.d scriptê°€ íŒŒì¼ê³¼ directoryë¥¼ ì²˜ë¦¬í• ì§€ë¥¼ ì œì–´í•œë‹¤.\n  - **0**: ìˆ¨ê²¨ì§„ íŒŒì¼ê³¼ directoryë¥¼ ì œì™¸í•œë‹¤.\n  - **1**: ëª¨ë“  íŒŒì¼ê³¼ directoryë¥¼ í¬í•¨í•œë‹¤.\n- S6\\_CMD\\_WAIT\\_FOR\\_SERVICES\\_MAXTIMEÂ (default = 5000): CMD ì‹¤í–‰ì„ ì§€ì†í•˜ê¸° ì „ì— ê¸°ë‹¤ë¦¬ëŠ” ìµœëŒ€ ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤.\n- S6\\_READ\\_ONLY\\_ROOTÂ (default = 0): read-only íŒŒì¼ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ëŠ” container ë‚´ë¶€ì—ì„œ ë™ì‘í•  ë•Œ, 1ë¡œ ì„¤ì •í•˜ì—¬ ì´ˆê¸°í™” scriptsë¥¼ ê¶Œí•œ ì„¤ì •ì´ì „ì— /etcì—ì„œ /var/run/s6/etc ë¡œ ë³µì‚¬í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìì„¸í•œ ì‚¬í•­ì€ ë‹¤ìŒì„ ì°¸ì¡°([Read-Only Root Filesystem](https://github.com/just-containers/s6-overlay#read-only-root-filesystem))\n- S6\\_SYNC\\_DISKSÂ (default = 0): 1ë¡œ ì„¤ì •í•˜ì—¬ stage 3ì—ì„œ container ì¢…ë£Œ ì´ì „ì— file ì‹œìŠ¤í…œì˜ syncë¥¼ ë§ì¶”ì–´ì•¼ í•¨ì„ ì•Œë¦°ë‹¤.\n\n### **Terminology**\n\n- PID 1 : linux kernelì—ì„œ ì²«ë²ˆì§¸ë¡œ ì‹œì‘ë˜ì–´ì§„ processì—ê²Œ PID 1ì´ ë¶€ì—¬ëœë‹¤. PID 1ì€ ë‹¤ë¥¸ processë“¤ê³¼ëŠ” ë‹¬ë¦¬ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì¼ ê°–ëŠ”ë‹¤.\n  - PID 1 processê°€ ì¢…ë£Œëœë‹¤ë©´, ëª¨ë“  ë‹¤ë¥¸ processëŠ” KILL signalë¡œ ì¢…ë£Œëœë‹¤.\n  - ìì‹ processë¥¼ ê°€ì§„ ì–´ë–¤ processë¼ë„ ë¬´ìŠ¨ ì´ìœ ì—ì„œê±´ ì£½ëŠ”ë‹¤ë©´, ìì‹ë“¤ì€ PID 1 processì˜ ìì‹ìœ¼ë¡œ ë‹¤ì‹œ íƒœì–´ë‚œë‹¤.\n- Zombie process : ì‹¤í–‰ì´ ì¢…ë£Œë˜ì—ˆì§€ë§Œ, ì•„ì§ ì‚­ì œë˜ì§€ ì•Šì€ processë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ë¥¼ ì‹¤ì œë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ë°, ê·¸ ì´ìœ ëŠ” ë¶€ëª¨ processê°€ ìì‹ processì˜ ì¢…ë£Œ ìƒíƒœë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. ì´ëŸ¬í•œ ë°ì´í„°ëŠ” ì‹¤í–‰í•œ ëª…ë ¹ì˜ ê²°ê³¼ì— ë”°ë¼ì„œ ë¶„ê¸°ë¥¼ í•˜ê³  ì‹¶ì„ ë•Œ, ì¢…ë£Œ ê°’ì€ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ëœë‹¤. ì´ë ‡ê²Œ zombie ìƒíƒœë¡œ ì§„ì…í•œ processëŠ” ë¶€ëª¨ processê°€ ì¢…ë£Œë˜ê±°ë‚˜ wait() ê³„ì—´ì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ processê°€ ì •ë¦¬ë  ëŒ€ê¹Œì§€ ë‚¨ì•„ìˆê²Œ ëœë‹¤. ë§Œì•½, ì´ëŸ¬í•œ zombie processê°€ ë‹¤ìˆ˜ ë‚¨ì•„ ìˆê²Œ ëœë‹¤ë©´ ì‹œìŠ¤í…œì—ë„ ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.\n- process supervisor : ì—¬ëŸ¬ processë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì œì–´í•˜ëŠ” programì„ ì˜ë¯¸í•œë‹¤.\n- ejabberd : Robust, Scalable and Extensible Realtime PlatformXMPP Server + MQTT Broker + SIP Service\n- symbol link : soft linkë¼ê³  ë¶ˆë¦¬ê¸°ë„ í•˜ë©°, ë‹¤ë¥¸ íŒŒì¼ì„ ê°€ë¥´í‚¤ëŠ” íŠ¹ë³„í•œ íŒŒì¼ë¡œ ì—¬ê¸¸ ìˆ˜ ìˆë‹¤. target íŒŒì¼ì˜ ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ë‹¨ìˆœíˆ íŒŒì¼ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ íŒŒì¼ì„ ê°€ë¥´í‚¤ê³ , ì´ë¥¼ í†µí•´ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•œ ë°©ë²•ì´ë‹¤.\n- nobody user: ëŒ€ë‹¤ìˆ˜ì˜ Unix ì‹œìŠ¤í…œì—ì„œ, \"nobody\"ëŠ” ì „í†µì ìœ¼ë¡œ íŒŒì¼ì„ ê°€ì§€ì§€ ì•Šê³ , ì–´ëŠ ê¶Œí•œ ê·¸ë£¹ì—ë„ ì†í•˜ì§€ ì•Šìœ¼ë©°, ë‹¤ë¥¸ ëª¨ë“  ìœ ì €ë“¤ì´ ê°€ì§€ëŠ” ê¸°ëŠ¥ì„ ì œì™¸í•˜ë©´ ê¸°ëŠ¥ì´ ì—†ëŠ” ìœ ì €ë¥¼ ì˜ë¯¸í•œë‹¤.\n","slug":"s6-overlay","date":"2021-07-11 12:13","title":"S6 Overlay","category":"Tech","tags":["Docker"],"thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— ê°€ìƒí™” ê° ê°ì„ ë¹„êµ](https://tech.cloud.nongshim.co.kr/2018/09/18/%EA%B0%80%EC%83%81%ED%99%94%EC%9D%98-%EC%A2%85%EB%A5%983%EA%B0%80%EC%A7%80/)\n- Thumbnail: Photo by [william william](https://unsplash.com/@william07?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/cargo-ship?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Virtualì˜ ì—­ì‚¬\n\nVirtual Machineê³¼ Containerì˜ ì°¨ì´ì ì„ ì´í•´í•˜ê¸° ë³´ë‹¤ëŠ” ì„œì‚¬ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ í¸í•  ê²ƒì´ë‹¤.\n\nì‹œì‘ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\në‹¹ì‹ ì€ í˜„ì¬ ë‹¤ì–‘í•œ serviceë¥¼ ìš´ì˜í•˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³ , ì´ë¥¼ ìš´ì˜í•˜ëŠ” ê³¼ì •ì—ì„œ ê°€ì¥ í° ë¬¸ì œë¥¼ ê²ªê²Œ ëœë‹¤.\n\nì—¬ëŸ¬ serviceëŠ” ë§¤ ë²ˆ ë‹¤ì–‘í•œ ìš”êµ¬ì— ì˜í•´ì„œ ìƒí™©ì´ ë°”ë€ë‹¤. ì–´ëŠ ë‚ ì€ ì£¼ë¬¸ì´ í­ì£¼í•´ì„œ ì„œë²„ë¥¼ ì¦ì„¤í•´ì•¼í•˜ê³ , ì–´ëŠ ìˆœê°„ì—ëŠ” ìœ ì§€ ë¹„ìš©ì´ ì•„ê¹Œì›Œì„œ ì„œë²„ë¥¼ ë‹¤ì‹œ ì¶•ì†Œì‹œí‚¨ë‹¤.\n\në˜í•œ, Hardwareê°€ ì„±ëŠ¥ì˜ ë…¸í›„ì™€ ìƒˆë¡œìš´ ê¸°ê¸° ë° ì‹œìŠ¤í…œì„ ë„ì…í•˜ê³ ì í•˜ëŠ” ìš•êµ¬ë„ ë”°ë¥¸ë‹¤.\n\n> **Service 1, Service 3ì˜ ë¹„ìš©ì´ ì¦ê°€í•˜ë©´ Service 3ì´ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.**\n\n![vm-container-1](/images/vm-container-1.jpeg)\n\nì´ ê³¼ì •ì—ì„œ ìš°ë¦¬ëŠ” ê²°êµ­ í•˜ë‚˜ì˜ machineì— í•˜ë‚˜ì˜ service ë§Œì„ ë°°í¬í•˜ê²Œ ëœë‹¤. ë‹¤ë¥¸ serviceê°€ ê³¼ë¶€í™”ê°€ ê±¸ë ¤ì„œ ë‹¤ë¥¸ serviceë„ ê°™ì´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´, ì–¼ë§ˆë‚˜ ë¨¸ë¦¬ê°€ ì•„í”„ê² ëŠ”ê°€? ê·¸ëŸ°ë°, ì—¬ê¸°ì„œ ê³µí•™ìë“¤ì´ ì°¸ì„ ìˆ˜ ì—†ëŠ” ì¼ì´ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.\n\n> **\"ë¹„íš¨ìœ¨ì \" ìì› ì‚¬ìš©**\n\nê·¸ë˜ì„œ ì‚¬ëŒë“¤ì€ ì„ íƒì— ê¸°ë¡œì— ë¹ ì§„ë‹¤. ë¨¸ë¦¬ê°€ ì•„í”Œì •ë„ë¡œ ê³ ë¯¼í•´ì„œ, ìµœì ì˜ ìƒí™©ì„ ë§Œë“¤ì–´ì„œ ìš°ë¦¬ì˜ serverë¥¼ ì˜ˆì˜ê²Œ ë§Œë“¤ê³ , ìƒˆë¡œìš´ serviceê°€ ë‚˜ì˜¤ê³  ê¸°ê¸°ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ì´ ê³ ë¯¼ì„ ë°˜ë³µí•˜ëŠ”ê°€ ì•„ë‹ˆë©´ ê·¸ëƒ¥ í•˜ë‚˜ì˜ machineì—ëŠ” í•˜ë‚˜ì˜ serviceë§Œ ë„£ëŠ”ê°€?\n\nì´ë•Œ, ì‚¬ëŒë“¤ì€ í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  ê¸°ê¸°ë¥¼ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ê¸°ê¸°ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì— ëˆˆì„ ëŒë¦¬ê²Œ ëœë‹¤.\n\nê·¸ë•Œ, ë– ì˜¤ë¥¸ ë°œìƒì´ Virtual Machineì´ë‹¤. ë¬¼ë¦¬ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” Machineì„ ì´ìš©í•´ì„œ ê°€ìƒì˜ Machineì„ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ì¦‰, í•˜ë‚˜ì˜ Machineì´ ì´ì œ ì—¬ëŸ¬ ê°œì˜ Virtual Machineì´ ë  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\nì´ ë°œê²¬ì„ í†µí•´ì„œ ì‚¬ëŒë“¤ì€ í•˜ë‚˜ì˜ serverë¥¼ ì—¬ëŸ¬ ê°œì˜ virtual Machineìœ¼ë¡œ ë‚˜ëˆ„ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì— ìµìˆ™í•´ì§€ë©°, Virtual Machineì„ ì£¼ë¥˜ë¡œ í•˜ëŠ” VMwareì™€ ê°™ì€ ì—…ì²´ê°€ í° ì„±ì¥ì„ ì´ë£¨ê²Œ ëœë‹¤.\n\nê·¸ëŸ¬ë‚˜, ì—¬ê¸°ì„œ Virtual Machineì˜ ì‚¬ìš©ìë“¤ì€ í° ê³ ë¯¼ì„ ê°–ê²Œ ëœë‹¤. ë°”ë¡œ ì„±ëŠ¥ì ì¸ Issueì´ë‹¤.\n\nê¸°ì¡´ì—ëŠ” Virtual Machineì„ ì™„ë²½í•˜ê²Œ ë™ì‘í•˜ëŠ” OS ìœ„ì—ì„œ ë™ì‘í•˜ë„ë¡ í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ì‹œê°„ì´ ê°ˆ ìˆ˜ë¡ ì´ëŸ¬í•œ êµ¬ì¡°ëŠ” ì˜¤íˆë ¤ í° ë¹„ìš©ì„ ìœ ë°œí–ˆë‹¤.\n\nì´ì— ë”°ë¼ì„œ ë‹¤ì–‘í•œ ê°€ìƒí™” ë°©ë²•ë“¤ì´ ì—°êµ¬ë˜ê²Œ ëœë‹¤. ê·¸ë ‡ê²Œ ë‚˜ì˜¨ ê²ƒì´ ì§€ê¸ˆê¹Œì§€ëŠ” 3ê°€ì§€ì˜ í° íë¦„ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.\n\n![vm-container-2](/images/vm-container-2.jpeg)\n\n> **1. Host ê¸°ë°˜ì˜ ê°€ìƒí™”**\n\nìš°ë¦¬ê°€ ì•ì„œ ë´¤ë˜ ì‚¬ë¡€ë“¤ê³¼ ê°™ì´ ê¸°ì¡´ì— Hostê°€ ì¡´ì¬í•˜ê³ , ê±°ê¸°ì—ì„œ Virutalize SWë¥¼ ì´ìš©í•˜ì—¬, ê°€ìƒí™”ëœ ì¥ì¹˜ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n> **2. Hypervisor ê¸°ë°˜ì˜ ê°€ìƒí™”**\n\nHost Machineì„ ë°°ì œí•˜ê³ , Hostì˜ OSë¥¼ ì—†ì• ê³ , Hypervisorë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ OSë¥¼ ëŠ¥ë™ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ êµ¬ì„±í•œ ê²ƒì´ë‹¤.\n\n- ì¢…ë¥˜\n  - ì „ê°€ìƒí™” : ì „ê°€ìƒí™”ë€ ì „ì²´ Hardwareë¥¼ ëª¨ë‘ ê°€ìƒí™”í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ Hypervisorê°€ ê° OSë¡œ ë¶€í„° ì˜¤ëŠ” ìš”ì²­ì„ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” Hardwareì— ë§ê²Œ ë²ˆì—­í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.\n  - ë°˜ê°€ìƒí™” : OSì—ì„œ ìì‹ ì˜ ëª…ë ¹ì–´ë¥¼ í‘œì¤€í™”ëœ í˜•íƒœë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ì´ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë˜ë©´, Hypervisorì—ì„œ ìˆ˜í–‰í•˜ëŠ” ë™ì‘ì˜ ë¹„ìš©ì„ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ê²½ìš°ì—ëŠ” OS ìì²´ë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— í° ë¹„ìš©ì´ ë°œìƒí•©ë‹ˆë‹¤.\n\n> **3. Container ê¸°ë°˜ì˜ ê°€ìƒí™”**\n\nContainer ëŠ” guest OSë¥¼ êµ¬í˜„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê° Containerì—ì„œ ë°œìƒí•˜ëŠ” OS ìš”ì²­ì„ Host OSë¥¼ ê³µìœ í•¨ìœ¼ë¡œì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì€ Container ë‚´ë¶€ë¡œ ìœ„ì„í•˜ì—¬ í›¨ì”¬ ë” ê°€ë³ê³  ì´ì‹ì„±ì´ ì¢‹ì€ í˜•íƒœì˜ ê°€ìƒí™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n## Simulator vs Emulator\n\nì—¬ëŸ¬ê°€ì§€ ì´ì•¼ê¸°ê°€ simulatorì™€ emulator ì‚¬ì´ì—ì„œ ì¡´ì¬í•œë‹¤. ì˜ˆë¥¼ë“¤ì–´, high levelë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ simulatorê³  low levelë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ emulatorë¼ëŠ” ì´ëŸ° ë§ì´ë‹¤. í•˜ì§€ë§Œ, ì´ëŠ” ê° ê²½ìš°ë¥¼ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” íŠ¹ì§•ì´ì§€ ì •ì˜ê°€ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n\nSimulatorëŠ” íŠ¹ì • ëª©ì ì— ë”°ë¼ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì„ì˜ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¦‰, ì™„ë²½í•˜ê²Œ ë™ì¼í•  í•„ìš”ëŠ” ì—†ì´ ì›í•˜ëŠ” íŠ¹ì§•ì„ ë½‘ì•„ë‚´ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ê²ƒì´ë‹¤. ë°˜ë©´ì—, EmulatorëŠ” ì™„ì „ ë™ì¼í•œ ê¸°ê¸°ë¥¼ softwareë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ê·¸ ê³¼ì •ì—ì„œ EmulatorëŠ” Smulatorë³´ë‹¤ ë¬´ê±°ì›Œì§ˆ ìˆ˜ ë°–ì— ì—†ê³ , ê·¸ë ‡ê¸°ì— low level languageì— ì†ì´ ê°€ê²Œ ë˜ê³ , ëŠë ¤ì§€ê²Œ ëœë‹¤.\n\nì´í•´ê°€ ì–´ë µë‹¤ë©´, ì˜¤ë½ì‹¤ ê²Œì„ì„ PCì—ì„œ í•˜ê³ , ë™ë¬¼ì˜ ìˆ² ë‹Œí…ë„ ê²Œì„ì„ í•¸ë“œí°ìœ¼ë¡œ í•˜ëŠ” ë¶ˆë²•ì ì¸ ì¼ë„ í•´ë³¸ ì ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ëŠ” ê°€ìƒìœ¼ë¡œ í•´ë‹¹ ê¸°ê¸°ë¥¼ êµ¬í˜„í•˜ê³ , ì´ë¥¼ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ êµ¬ë™í•˜ëŠ” ê²ƒì˜ ì˜ˆì´ë‹¤.\n","slug":"vm-container","date":"2021-05-23 14:31","title":"VM & Container","category":"Tech","tags":["VirtualMachine","Container"],"thumbnailSrc":"https://euidong.github.io/images/cargo-ship.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Why Vagrant?, Vagrant ê³µì‹ ì‚¬ì´íŠ¸](https://www.vagrantup.com/intro)\n- [ğŸ”— Getting Started, Vagrant ê³µì‹ ì‚¬ì´íŠ¸](https://learn.hashicorp.com/collections/vagrant/getting-started)\n\n**Vagrant**(ë² ì´ê·¸ëŸ°íŠ¸)ëŠ” Virtual Machineì˜ ì‹¤í–‰í™˜ê²½ì„ í•˜ë‚˜ì˜ workflow ë‚´ì— êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë„êµ¬ì´ë‹¤. ì‰¬ìš´ workflow ì‚¬ìš©ë²•ê³¼ ìë™í™”ì— ì´ˆì ì„ ë§ì¶”ì–´ **Vagrant**ëŠ” setup timeì´ êµ‰ì¥íˆ ì§§ë‹¤. ë˜í•œ, productionê³¼ì •ê³¼ì˜ ë™ë“±í•¨ì„ ì œê³µí•˜ê³ , ê³¼ê±°ì˜ ì‹œìŠ¤í…œì„ \"ë‚˜ì˜ machine ë‚´ë¶€ì—ì„œ\" ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n## Why Vagrant?\n\n**Vagrant**ëŠ” `configuration`ì´ ì‰½ê³ , ë™ì¼í•œ ì¡°ê±´ìœ¼ë¡œ ì¬ì‹¤í–‰ì„ ë³´ì¥(reproducible)í•˜ë©°, ì–´ëŠ ì¥ë¹„ì—ì„œë“ ì§€ ë™ì‘ê°€ëŠ¥(í˜¸í™˜ì„±ì´ ë†’ì€, portable)í•œ ì‘ì—… í™˜ê²½ì„ ì œê³µí•œë‹¤. ì´ëŸ¬í•œ ì‘ì—… í™˜ê²½ì€ ì‚°ì—… í‘œì¤€ ê¸°ìˆ ì— ê¸°ë°˜í•˜ë©°, í•˜ë‚˜ì˜ ì¼ê´€ì„±ìˆëŠ” workflowì— ì˜í•´ì„œ ì œì–´ë˜ì–´ ìƒì‚°ì„±ê³¼ ìœ ì—°ì„±ì„ ìµœëŒ€í™”í•œë‹¤.\n\nì´ëŸ¬í•œ ë§ˆë²•ê°™ì€ ì¼ì„ ì„±ì·¨í•˜ê¸° ìœ„í•´ì„œ, **Vagrant**ëŠ” `VirtualBox`, `VMware`, `AWS`, ë˜ëŠ” ë‹¤ë¥¸ `Virtual Machine` ì œê³µìì— ê¸°ë°˜ ìœ„ì—ì„œ ë™ì‘í•˜ë©°, ì´ë“¤ì„ í™œìš©í•˜ì—¬ ê°€ìƒ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.\n\n### For Developers\n\në§Œì•½ ë‹¹ì‹ ì´ ê°œë°œìë¼ë©´, **Vagrant**ëŠ” ì˜ì¡´ì„±ê³¼ ê·¸ë“¤ì˜ ì„¤ì •ì„ ê²©ë¦¬ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ë•Œì— ì¼íšŒìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ë“ , ì§€ì†ì ì¸ í™˜ê²½ìœ¼ë¡œ ì‚¬ìš©í•˜ë“  ìƒê´€ì—†ì´ ê·¸ ì–´ë–¤ toolë“¤(browser, editor, debugger ë“±)ë„ ë¹ ì§ì—†ì´ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì¼ë‹¨ í•˜ë‚˜ì˜ `Vagrantfile`ì„ ìƒì„±í•˜ë©´, ë‹¨ì§€ `vagrant up`ë§Œ ì‹¤í–‰ì‹œì¼œì£¼ë©´ ëª¨ë“  ê²ƒì´ ì„¤ì¹˜ë˜ê³  ì„¤ì •ë  ê²ƒì´ë‹¤. ì´ëŠ” ê°œë°œíŒ€ì˜ ëˆ„êµ¬ì—ê²Œë“ ì§€ ê³µìœ ë  ìˆ˜ ìˆê³ , ì–´ëŠ í™˜ê²½(Linux, MAC OS X, Window)ì— ìˆë“  ëª¨ë“  íŒ€ êµ¬ì„±ì›ì€ ë™ì¼í•œ í™˜ê²½(ë™ì¼í•œ ì˜ì¡´ì„±, ë™ì¼í•œ ì„¤ì •)ì—ì„œ codeë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ `ë‚´ ë¨¸ì‹ ì—ì„œëŠ” ì˜ ë™ì‘í•˜ëŠ”ë°...`ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n\n### For Operators\n\në§Œì•½ ë‹¹ì‹ ì´ System operation/DevOps engineerë¼ë©´, **Vagrant**ëŠ” ê°œë°œ ë˜ëŠ” í…ŒìŠ¤íŒ…ì„ ìœ„í•œ infrastructure(ê¸°ë°˜ í™˜ê²½)ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì¼íšŒìš© ë˜ëŠ” ì¼ê´€ì ì¸ workflowë¥¼ ì œê³µí•œë‹¤. ì´ë•Œì—ëŠ” `sh`, `Chef`, `Puppet` ê³¼ ê°™ì€ ë°©ë²•ì„ í†µí•´ ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, ì‹¤í–‰ í™˜ê²½ì€ `VirtualBox`, `VMware`, `AWS` ë“± ë‹¤ì–‘í•œ í™˜ê²½ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤. ì—¬ëŸ¬ machineì„ `ssh`ë¥¼ í†µí•´ì„œ ì ‘ì†í•˜ì§€ ì•Šê³ , **Vagrant**ë¥¼ í†µí•´ì„œ ëª¨ë“  ê²ƒì„ ì‰½ê²Œ ì œì–´í•  ìˆ˜ ìˆë‹¤.\n\n### For Designers\n\në§Œì•½ ë””ìì´ë„ˆ ì§êµ°ì´ë¼ë©´, **Vagrant**ëŠ” ìë™ì ìœ¼ë¡œ web appì„ êµ¬ë™ì‹œí‚¬ ìˆ˜ ìˆëŠ” ëª¨ë“  í™˜ê²½ì„ ìë™ì ìœ¼ë¡œ ì œê³µí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, design ì‘ì—… ì™¸ì—ëŠ” ë” ì•Œì•„ì•¼ í•  ê²ƒì´ ì—†ë‹¤. ì¼ë‹¨ ê°œë°œìê°€ **Vagrant**ë¥¼ ì„¤ì •í•˜ê³  ë‚˜ë©´, ë‹¹ì‹ ì€ ì´ë¥¼ ë‹¤ì‹œ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ê³ ë¯¼í•  í•„ìš”ê°€ ì—†ë‹¤. ë” ì´ìƒ ê°œë°œìë“¤ì„ ê´´ë¡­íˆì§€ ì•Šê³ ë„ ë‹¹ì‹ ì˜ í™˜ê²½ì„ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë©°, version controlë§Œ ì‰½ê²Œí•  ìˆ˜ ìˆë‹¤ë©´, ë‹¨ìˆœíˆ `vagrant up`ìœ¼ë¡œ ì‰½ê²Œ ì ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n## What is Vagrant?\n\ní•´ë‹¹ tutorialì—ì„œëŠ” **Vagrant**ë¥¼ í†µí•´ ë„ˆì˜ ì²«ë²ˆì§¸ ê°œë°œ í™˜ê²½ì„ ìƒì„±í•  ê²ƒì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, **Vagrant**ì˜ ê°„ëµí•œ ì†Œê°œì™€ ì‚¬ì „ ì¤€ë¹„ì‚¬í•­ê³¼ ê°€ì¥ ê¸°ë³¸ì ì´ê³  ì¤‘ìš”í•œ **Vagrant** í™œìš©ì„ ë°°ìš¸ ê²ƒì´ë‹¤.\n\ní•´ë‹¹ tutorialì—ì„œëŠ” `VirtualBox`ë¥¼ í™œìš©í•˜ì—¬ **Vagrant**í™˜ê²½ì„ êµ¬ì„±í•´ë³¼ ê²ƒì´ë‹¤. ì™œëƒí•˜ë©´ ì´ê²ƒì´ ì—¬ëŸ¬ platformì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¬´ë£Œ softwareì´ê¸° ë•Œë¬¸ì´ë‹¤.\n\n### ì‚¬ì „ ì¤€ë¹„ì‚¬í•­\n\n1. **Vagrant** ì„¤ì¹˜  \n  [ğŸ”— link](https://www.vagrantup.com/docs/installation)\n2. `VirtualBox` ì„¤ì¹˜  \n  [ğŸ”— link](https://www.virtualbox.org/wiki/Downloads)\n\në‹¨ ë‘ ê°œì˜ ëª…ë ¹ì–´ë¡œ ì›í•˜ëŠ” í™˜ê²½ì˜ VM(Virtual Machine)ì„ ìƒì„±í•  ìˆ˜ ìˆê³ , í•˜ë‚˜ì˜ ëª…ë ¹ì–´ë¡œ ì‚­ì œê°€ ê°€ëŠ¥í•˜ë‹¤. ì—¬ê¸°ì„œëŠ” Ubuntu 18.04 ì´ë¯¸ì§€ë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤.\n\n### ì‹¤í–‰ í…ŒìŠ¤íŠ¸\n\n> **1. Vagrant ì´ˆê¸°í™”**\n\n```bash\n$ vagrant init hashicorp/bionic64\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n```\n\nì´ë¥¼ í†µí•´ì„œ, í˜„ì¬ directoryì— `Vagrantfile`ì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> **2. (Optional) Box ì„¤ì •**\n\nVirtual Machineì„ êµ¬ì„±í•  ë•Œ, scratch(ë°‘ë°”íƒ•, ëŒ€ê²Œ OSë§Œ í¬í•¨í•œ ìƒíƒœ)ì—ì„œ ì‹œì‘í•˜ëŠ” ê²ƒì€ ë§¤ìš° ëŠë¦¬ë‹¤. ë”°ë¼ì„œ, **Vagrant**ì—ì„œëŠ” setup timeì„ ìµœì í™”í•˜ê¸° ìœ„í•´ì„œ, `box`ë¼ëŠ” ê²ƒì„ ì´ìš©í•œë‹¤. ì´ëŠ” ê¸°ì¡´ì˜ VM êµ¬ì„± ì‹œì— ì‚¬ìš©í•˜ëŠ” imageì™€ ë¹„ìŠ·í•œ ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤. ë”°ë¼ì„œ, `Vagrantfile`ì„ ìƒì„±í•œ í›„ì— í•´ì•¼í•  ê°€ì¥ ì²«ë²ˆì§¸ë¡œ ìˆ˜í–‰í•  ê²ƒì´ í•´ë‹¹ `box`ë¥¼ êµ¬ì²´í™”í•˜ê³  ê¸°ìˆ í•˜ëŠ” ê²ƒì´ë‹¤.\n\n`box`ëŠ” [Vagarnt Cloud](https://app.vagrantup.com/boxes/search)ì™€ ê°™ì€ registryì— uploadê°€ ê°€ëŠ¥í•˜ë‹¤. ë˜ëŠ” local filesystemì—ì„œë„ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\nìš°ë¦¬ê°€ ì´ì „ì— í–ˆë˜ ê²ƒì²˜ëŸ¼ `vagrant init`ì„ ìˆ˜í–‰í•  ë•Œ, `box` ëª…ì„ ì¨ì£¼ë©´, `Vagrantfile`ì„ ë§Œë“¤ ë•Œ í˜„ì¬ ë‚˜ì˜ machineì— í•´ë‹¹ `box`ê°€ ì¡´ì¬í•œë‹¤ë©´ ë¶ˆëŸ¬ì˜¤ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ downloadí•œë‹¤. ê·¸ë ‡ì§€ ì•Šê³  downloadë§Œ í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.\n\n```bash\n$ vagrant box add hashicorp/bionic64\n==> box: Loading metadata for box 'hashicorp/bionic64'\n...\n```\n\nì´ë¥¼ ìˆ˜í–‰í•œ í›„ì— `Vagrantfile` ë‚´ë¶€ì—ì„œ VMì˜ boxë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.\n\n```Vagrantfile\n# \"2\"ëŠ” Vagrant versionì„ ì˜ë¯¸\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\nend\n```\n\nì´ë ‡ê²Œ ì„¤ì •í•˜ê²Œ ë˜ë©´, í•´ë‹¹ `box`ì˜ latest ë²„ì „ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°, íŠ¹ì • ë²„ì „ì„ ì›í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ë„ ìˆë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\n  config.vm.box_version = \"1.0.282\"\nend\n```\n\ní˜„ì¬ ë‚´ machineì—ì„œ `box`ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì‚­ì œí•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n```bash\n$ vagrant box list\nhashicorp/bionic64 (virtualbox, 1.0.282)\n\n$ vagrant box remove hashicorp/bionic64\nRemoving box 'hashicorp/bionict64' (v1.0.282) with provider 'virtualbox' ...\n```\n\n> **3. VM ì‹¤í–‰**\n\nê¸°ë³¸ì ìœ¼ë¡œ í˜„ì¬ directoryì—ì„œ `Vagrantfile`ì„ ì°¾ì•„ì„œ Virtual Environmentë¥¼ êµ¬ì„±í•œë‹¤.\n\n```bash\n$ vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n...\n```\n\nì‹¤í–‰ì´ ì™„ë£Œë˜ë©´, ë‹¤ìŒê³¼ ê°™ì´ ssh ì ‘ê·¼ ë° ì¢…ë£Œê°€ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ vagrant ssh\nWelcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-58-generic x86_64)\n\nvagrant@vagrant:~$ logout\nConnection to 127.0.0.1 closed.\n```\n\n> **4. VM ì‚­ì œ**\n\n```bash\n$ vagrant destroy\n    default: Are you sure you want to destroy the 'default' VM? [y/N] y\n==> default: Forcing shutdown of VM...\n==> default: Destroying VM and associated drives...\n```\n\n### ë°˜ë“œì‹œ ì•Œì•„ì•¼í•  ì‚¬í•­\n\n> **1. Synchronize Local and Guest Files**\n\nVMì„ ì´ìš©í•˜ì—¬ ê°œë°œí•˜ëŠ” ê²ƒì€ í¸ë¦¬í•˜ì§€ë§Œ, ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ sshë¥¼ ì´ìš©í•´ì„œ í•´ë‹¹ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ì—¬ ì‘ì„±í•˜ëŠ” ê²ƒì€ ë¶ˆí¸í•˜ë‹¤ê³  ëŠë‚„ ê²ƒì´ë‹¤. í”„ë¡œì íŠ¸ê°€ ë‘ ê°œë§Œ ë˜ì–´ë„ ìƒë‹¹íˆ ê·€ì°®ì€ ì‘ì—…ì´ë‹¤. ë”°ë¼ì„œ, **Vagrant**ëŠ” ìë™ìœ¼ë¡œ VMê³¼ í˜„ì¬ ë‚˜ì˜ machine(host)ì˜ fileì„ ìë™ìœ¼ë¡œ syncí•œë‹¤.(ë™ì¼í•œ fileì´ ë˜ë„ë¡ í•œë‹¤.) ì¦‰, ë‚´ê°€ hostì—ì„œ fileì„ ì‘ì„±í•¨ìœ¼ë¡œì¨ VMì— ì´ë¥¼ ì ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ **Vagrant**ëŠ” VMì— Vagrantfileì„ í¬í•¨í•œ project directoryë¥¼ `/vagrant` directoryì™€ ë™ê¸°í™”í•œë‹¤.\n\n> **2. VMìœ¼ë¡œ project ë°°í¬**\n\nì•„ì£¼ ê°„ë‹¨í•œ ì˜ˆì œë¡œ apcacheë¥¼ ì´ìš©í•˜ì—¬ project ë°°í¬ë¥¼ ìˆ˜í–‰í•´ë³´ì.\n\në¨¼ì €, `Vagrantfile`ì´ ì¡´ì¬í•˜ëŠ” directoryì— `html`ì´ë¼ëŠ” í´ë”ë¥¼ ë§Œë“ ë‹¤.\n\n```bash\n$ mkdir html\n...\n```\n\nì•„ì£¼ ê¸°ë³¸ì ì¸ HTMLì„ ì‘ì„±í•˜ì.(index.html)\n\n```html\n<!DOCTYPE html>\n<html>\n  <body>\n    <h1>Hello, My First Vagrant Deploy!</h1>\n  </body>\n</html>\n```\n\nì´ì œ ì‹¤ì œë¡œ apacheë¥¼ ì„¤ì¹˜í•˜ê³ , ì§€ê¸ˆ ë§Œë“  íŒŒì¼ì„ apache processê°€ ë°”ë¼ë³´ëŠ” folderë¡œ ì „ë‹¬í•´ì£¼ëŠ” shell scriptë¥¼ ì‘ì„±í•˜ì.(`bootstrap.sh`ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ project directoryì— ì‘ì„±)\n\n```shell\n#!/usr/bin/env bash\n\napt-get update\napt-get install -y apache2\n\nif ! [ -L /var/www ]; then\n  rm -rf /var/www\n  ln -fs /vagrant /var/www\nfi\n```\n\nì´ì œ ì´ë¥¼ **Vagrant**ì—ì„œ ì‹¤í–‰ ì‹œì— ì‹œì‘í•˜ë„ë¡ ì„¤ì •ë§Œí•´ì£¼ë©´ ëì´ë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\n  config.vm.provision :shell, path: \"bootstrap.sh\"\nend\n```\n\nì´ì œ ë‹¤ìŒì„ í†µí•´ì„œ ì‹¤ì œë¡œ htmlì´ ë°°í¬ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n```bash\n$ vagrant up\n\n$ vagrant ssh\n\nvagrant@vagrant:~$ wget -qO- 127.0.0.1\n<!DOCTYPE html>\n<html>\n  <body>\n    <h1>Hello, My First Vagrant Deploy!</h1>\n  </body>\n</html>\n\nvagrant@vagrant:~$ logout\nConnection to 127.0.0.1 closed.\n```\n\n> **3. Port Forwarding**\n\nê°€ì¥ ê¸°ë³¸ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” Network ê¸°ìˆ ë¡œ VMì˜ portë¥¼ hostì˜ portì™€ mappingí•˜ì—¬ hostì˜ portë¥¼ í†µí•´ VMì˜ portì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.\n\n2ë²ˆì—ì„œ ì‘ì„±í–ˆë˜ `Vagrantfile`ì„ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•´ì£¼ë©´ ëœë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\n  config.vm.provision :shell, path: \"bootstrap.sh\"\n  config.vm.network :forwarded_port, guest: 80, host: 4567\nend\n```\n\nì´ë¥¼ ì ìš©í•˜ì—¬ **Vagrant**ë¥¼ ì¬ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì„ ì‹¤í–‰í•´ì£¼ë©´ ëœë‹¤.\n\n```bash\n$ vagrant reload\n==> default: Attempting graceful shutdown of VM...\n...\n```\n\nbrowserë¥¼ í†µí•´ í™•ì¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n![vagrant-forwarding-test](/images/vagrant-forwarding-test.png)\n\n> **4. WebApp ê³µìœ **\n\n`ngrok`ë¥¼ ì´ìš©í•´ì„œ WebAppì„ ê³µìœ í•˜ëŠ” ê¸°ëŠ¥ì„ **Vagrant**ê°€ í¬í•¨í•˜ê³  ìˆë‹¤. ì´ë¥¼ `vagrant share`ë¼ê³  ë¶€ë¥¸ë‹¤. ì‹¤í–‰ì„ ì›í•œë‹¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ `ngrok`ì„ [ğŸ”— ì„¤ì¹˜](https://ngrok.com/download)í•œ í›„ì— ë‹¤ìŒ commandë“¤ì„ ì‹¤í–‰ì‹œí‚¤ë©´ webpageë¥¼ ë‚¨ë“¤ì—ê²Œ shareí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n# vagrant shareë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ plugì¸ì„ ì„¤ì¹˜í•œë‹¤.\n$ vagrant plugin install vagrant-share\n\n# (MAC OS) development toolsê°€ ì—†ë‹¤ëŠ” ì—ëŸ¬ ë°œìƒì‹œ ì•„ë˜ ëª…ë ¹ì–´ ì‹¤í–‰\n# xcode-select --install\n\n$ vagrant share\n...\n==> default: Creating Vagrant Share session...\n==> default: HTTP URL: http://b1fb1f3f.ngrok.io\n...\n```\n\n`ngrok`ì€ ë¬´ë£Œë¡œ server domainì„ ìƒì„±í•˜ê³ , web serviceë¥¼ hosting í•´ì£¼ëŠ” toolì´ë‹¤. ì‚¬ìš©ë²•ë„ êµ‰ì¥íˆ ê°„ë‹¨í•´ì„œ ì•Œì•„ë‘ë©´ ì¢‹ë‹¤.\n\n> **5. ì—¬ëŸ¬ Machine ë°°í¬**\n\në‹¤ìŒê³¼ ê°™ì´ `vm.define`ì„ í†µí•´ì„œ ì—¬ëŸ¬ ê°œì˜ machineì„ í•œ ë²ˆì— ì •ì˜í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, **Vagrant**ê°€ VMì„ configurationí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Virtual Environmentë¥¼ configurationí•˜ëŠ” ê²ƒì´ë¼ê³  ë¶€ë¥´ëŠ” ê²ƒì´ë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.provision \"shell\", inline: \"echo A\"\n\n  config.vm.define \"web\" do |web|\n    test.vm.provision :shell, inline: \"echo B\"\n    web.vm.box = \"apache\"\n  end\n\n  config.vm.define \"db\" do |db|\n  config.vm.provision :shell, inline: \"echo C\"\n    db.vm.box = \"mysql\"\n  end\nend\n```\n","slug":"vagrant","date":"2022-06-01 12:39","title":"Vagrant","category":"Tech","tags":["Vagrant","VirtualEnvironment\"","VirtualBox"],"thumbnailSrc":"https://euidong.github.io/images/vagrant.png"},{"content":"\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Intro\n\nBlockchainì„ ê³µë¶€í•˜ê²Œ ë˜ì—ˆëŠ”ë°, ì´ë²ˆ ê¸°íšŒì— ì œëŒ€ë¡œ í•˜ìëŠ” ìƒê°ì—ì„œ Bitcoin êµ¬í˜„ì„ ì§ì ‘ ìˆ˜í–‰í•´ë³¼ ìƒê°ì…ë‹ˆë‹¤. í•™ìŠµì— ì‚¬ìš©í•œ ì±…ì€ ìœ„ì— ë‚˜ì™€ìˆëŠ” ì±…ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.** ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” ë°ì´í„°ì˜ ì¸ì¦ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ì„¸ë¶€ì ì¸ ë‚´ìš©ì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.**\n\n> **(+) ë“¤ì–´ê°€ê¸°ì— ì• ì„œ...**\n\nBitcoinì—ì„œëŠ” ê²°ì œê°€ ë°œìƒí•  ë•Œ, ì´ì „ ê±°ë˜ì—ì„œ ì–»ì€ Bitcoinì„ í†µí•´ì„œë§Œ ê²°ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ê±°ë˜ë¥¼ í†µí•´ Bitcoinì„ ë°›ì€ ì ì´ ì—†ë‹¤ë©´, Bitcoinì´ ì—†ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.)\n\në˜í•œ, ìš°ë¦¬ëŠ” ì´ ê±°ë˜ ë‚´ì—­ì„ ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆë„ë¡ ê³µê°œí•©ë‹ˆë‹¤. ì´ ìƒí™©ì—ì„œ ìš°ë¦¬ê°€ íŠ¹ì • ê±°ë˜ ë‚´ì—­ì—ì„œ ëˆì„ ë°›ì€ ì‚¬ëŒì´ ìì‹ ì´ê³ , ê·¸ ê±°ë˜ì—ì„œ ì–»ì€ Bitcoinì„ í˜„ì¬ ê±°ë˜ì— ì‚¬ìš©í•  ê²ƒì„ì„ ì¦ëª…í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?\n\n---\n\nì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ì´ë¼ëŠ” ê²ƒì€ ëˆ„êµ°ê°€ê°€ íŠ¹ì • ì‚¬ì‹¤ì„ ì¦ëª…í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ”, ë°ì´í„°ì˜ ì‘ì„±ìê°€ ì§„ì§œ ì‘ì„±ìê°€ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê²Œ ë¯¿ì„ ë§Œí•œ ì œ3 ìì—ê²Œ ë§¡ê¸°ê±°ë‚˜ ì§ì ‘ ëˆˆìœ¼ë¡œ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ë§¤ë²ˆ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ì–´ë µê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” ì›ë³¸ ë°ì´í„°ì— ì„œëª…ì„ í•˜ëŠ” ê²ƒì„ íƒí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ìì‹ ì´ í•´ë‹¹ ë°ì´í„°ì˜ ì‘ì„±ìì„ì„ ë¶„ëª…í•˜ê²Œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë°, ì´ê²ƒì„ programming ì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì‰¬ìš´ ì¼ì´ ì•„ë‹™ë‹ˆë‹¤.\n\nëŒ€ê²Œ ì´ë¥¼ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ê³µê°œí‚¤ ë°©ì‹ì´ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê³µê°œí‚¤ ë°©ì‹ì´ë€, ì•”í˜¸í™”í•˜ëŠ” ë„êµ¬ì™€ í•´ë…í•˜ëŠ” ë„êµ¬ê°€ ì„œë¡œ ë‹¤ë¥¸ ê²½ìš°ë¥¼ ë§í•©ë‹ˆë‹¤.\n\nì¦‰, í•´ë…í•˜ëŠ” ë„êµ¬ëŠ” ëˆ„êµ¬ë‚˜ì—ê²Œë‚˜ ì œê³µì„ í•˜ê³ , ì•”í˜¸í™”í•˜ëŠ” ë„êµ¬ëŠ” ìì‹ ë§Œì´ ê°€ì§€ê³  ìˆë„ë¡ í•˜ì—¬, ì›ë³¸ ë°ì´í„°ì™€ ì›ë³¸ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•œ ë°ì´í„°ë¥¼ ê°™ì´ ë³´ë‚´ë©´, ì´ë¥¼ ë°›ì€ ì‚¬ìš©ìë“¤ì´ í•´ë…í•˜ëŠ” ë„êµ¬ë¥¼ í†µí•´ ì•”í˜¸í™”í•œ ë°ì´í„°ë¥¼ ë³µêµ¬í•˜ê³ , ì›ë³¸ë°ì´í„°ì™€ ëŒ€ì¡°í•´ë³´ë©´, ì›ë³¸ë°ì´í„°ì˜ ì‘ì„±ìê°€ ì „ì†¡ìì„ì„ ëª…í™•í•˜ê²Œ í™•ì‹ í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ì¦‰, ì›ë³¸ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•œ ë°ì´í„°ê°€ ë°”ë¡œ í•˜ë‚˜ì˜ ì„œëª…ì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì´ë¥¼ ì•”í˜¸í™”í•˜ëŠ” í‚¤ëŠ” ì „ì†¡í•œ ì‚¬ëŒë§Œ ê°–ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\n**programmingì ìœ¼ë¡œ ì´ëŸ¬í•œ ê³µê°œí‚¤ ë°©ì‹ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ one way function (í•œ ë°©í–¥ í•¨ìˆ˜, ì•”í˜¸í™”ëŠ” ì‰½ì§€ë§Œ inversionì´ ì–´ë ¤ìš´ í•¨ìˆ˜, ì•”í˜¸í™” ë„êµ¬)ì´ë©´ì„œ, trap door(ì†ì„ìˆ˜, í•´ë…í•˜ëŠ” ë„êµ¬)ë¥¼ ê°€ì§€ëŠ” algorithmì„ ì°¾ì•„ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤.** ì¦‰, keyë¥¼ ê°–ê³  ìˆìœ¼ë©´ ì‰½ê²Œ ì•”í˜¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆì§€ë§Œ, keyê°€ ì—†ë‹¤ë©´, ì´ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ RSAë¼ëŠ” ì†Œì¸ìˆ˜ ë¶„í•´ì˜ ë‚œí•´í•¨ì„ ì´ìš©í•˜ëŠ” algorithmì´ ìˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, Bitcoinì—ì„œëŠ” ì„œëª…ì„ í•˜ê¸° ìœ„í•´ì„œ, ECDSA(Elliptic Curve Digital Signature Algorithm)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì—¬ê¸°ì„œëŠ” ì´ ê¸°ìˆ ì— ëŒ€í•´ì„œ ìì„¸íˆ ì•Œì•„ë³¼ ê²ƒì…ë‹ˆë‹¤.\n\nì¼ë‹¨ ì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ì´ë¥¼ ì´ë£¨ëŠ” ê¸°ë°˜ ìˆ˜í•™ì  ìš©ì–´ë¥¼ ë¨¼ì € ë°°ì›Œì•¼ í•©ë‹ˆë‹¤.\n\n1. ìœ í•œ ê³µê°„ Finite Field\n2. íƒ€ì› ê³¡ì„  Elliptic Curve\n\në”°ë¼ì„œ, ì´ì— ëŒ€í•œ ë‚´ìš©ì„ ì´ì œë¶€í„° í•˜ë‚˜í•˜ë‚˜ì”© ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n## 1. ìœ í•œ ê³µê°„ Finite Field\n\në“¤ì–´ê°€ê¸°ì— ì• ì„œ ë‘ ê°€ì§€ ê°œë…ì„ ì •ë¦¬í•˜ê³  ê°€ì•¼ í•©ë‹ˆë‹¤.\n\në¨¼ì €, ì†Œìˆ˜ì…ë‹ˆë‹¤. **ì†Œìˆ˜**(**Prime Number**)ëŠ” 1ê³¼ ìì‹  ì´ì™¸ì˜ ìì—°ìˆ˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ëŠ”, 1ë³´ë‹¤ í° ìì—°ìˆ˜ì…ë‹ˆë‹¤. ë˜í•œ, í•´ë‹¹ ìˆ«ìë“¤ì€ ê·œì¹™ì„±ì„ ê°–ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì—, í•˜ë‚˜ì˜ ì†Œìˆ˜ê°€ ì£¼ì–´ì§„ ë’¤ì— ì´ë³´ë‹¤ í° ë°”ë¡œ ë‹¤ìŒ ì†Œìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì€ ì§ì ‘ í•´ë³´ì§€ ì•Šìœ¼ë©´ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\në‹¤ìŒì€ **modulo(ë‚˜ë¨¸ì§€ ì—°ì‚°ì, %)ì…ë‹ˆë‹¤.** íŠ¹ì • ê°’ì„ ë‚˜ëˆ„ê³ , ë‚¨ì€ ë‚˜ë¨¸ì§€ë¥¼ ë°˜í™˜í•˜ëŠ” ì—°ì‚°ìë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n$$10 \\% 3 = 1, 10 \\% 2 = 0$$\n\ní•´ë‹¹ ì—°ì‚°ì€ ì¼ë°˜ì ì¸ ëŒ€ìˆ˜í•™ì˜ ì—°ì‚°ê³¼ëŠ” ë‹¤ë¥´ê²Œ ë™ì‘í•˜ê²Œ í•˜ê¸° ë•Œë¬¸ì—, ì´ì— ëŒ€í•˜ì—¬, ì•ìœ¼ë¡œ ì‚¬ìš©í•  íŠ¹ì§• ëª‡ ê°€ì§€ë¥¼ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n1. $ a \\% b \\lt b $\n2. $ (a \\times b) \\% c = \\{(a \\% c) \\times (b \\% c)\\} \\% c $\n3. $ a^{b} \\% (b-1) = 1 $\n\nìœ„ì˜ 3ê°€ì§€ íŠ¹ì§•ì— ëŒ€í•œ ìì„¸í•œ ì¦ëª…ì€ ì—¬ê¸°ì„œ ë‹¤ë£¨ê¸°ë³´ë‹¤, ê¶ê¸ˆí•˜ì‹œë‹¤ë©´, ì§ì ‘ ì°¾ì•„ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.\n\nì´ë¥¼ í†µí•´ì„œ Finite Fieldì—ì„œì˜ ì—°ì‚°ì„ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì´ë¥¼ ê¸°ì–µí•´ë‘¡ì‹œë‹¤.\n\n**Finite Field**ë€ íŠ¹ì • ì†Œìˆ˜ë³´ë‹¤ ì‘ì€, 0ì„ í¬í•¨í•œ ìì—°ìˆ˜ ì§‘í•©ìœ¼ë¡œ, ì´ë£¨ì–´ì§€ê³ ,\n\n$$ F\\_3 = \\{ 0, 1, 2 \\} $$\n\n$$ F\\_{11} = \\{ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 \\} $$\n\në‹¤ìŒ 6ê°€ì§€ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì§‘í•©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\n- Additive closed, ë§ì…ˆì— ëŒ€í•˜ì—¬ ë‹«í˜€ìˆë‹¤.\n- Multiplicative closed, ê³±ì…ˆì— ëŒ€í•˜ì—¬ ë‹«í˜€ìˆë‹¤.\n- Additive identity, ë§ì…ˆì— ëŒ€í•œ í•­ë“±ì›($0$) ì„ ê°–ëŠ”ë‹¤.\n- Multicative identity, ê³±ì…ˆì— ëŒ€í•œ í•­ë“±ì›($1$) ì„ ê°–ëŠ”ë‹¤.\n- Additive inverse, ë§ì…ˆì— ëŒ€í•œ ì—­ì›($-a$)ì„ ê°–ëŠ”ë‹¤.\n- Multicative inverse, ê³±ì…ˆì— ëŒ€í•œ ì—­ì›($a^{-1}$)ì„ ê°–ëŠ”ë‹¤.\n\nê° ì¡°ê±´ì„ ì‚´í´ë³´ê¸°ì— ì•ì„œì„œ Finite Fieldë¥¼ ì •ì˜í•˜ëŠ” ì†Œìˆ˜ë³´ë‹¤ í° ê°’ì€ í•´ë‹¹ ì†Œìˆ˜ë¥¼ í†µí•´ì„œ modulo ì—°ì‚°ë˜ì–´, Finite Fieldì— ì†í•˜ê²Œ ë©ë‹ˆë‹¤. (ì´ëŠ” modulo ì—°ì‚°ì˜ ì²« ë²ˆì§¸ íŠ¹ì§•($a \\% b \\lt b $)ì„ í†µí•´ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.) ë§ˆì¹˜ ì‹œê³„ì™€ ê°™ì´ ìˆœí™˜í•˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ë¥¼ í†µí•´ì„œ, Finite Fieldì˜ ì²« ë²ˆì§¸ì™€ ë‘ ë²ˆì§¸ ì¡°ê±´ì€ ë§Œì¡±í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ë§ì…ˆê³¼ ê³±ì…ˆìœ¼ë¡œ ìƒì„±ëœ ê²°ê´ê°’ì€ ë°˜ë“œì‹œ ë‹¤ì‹œ Finite Fieldì— ì†í•˜ê²Œ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\nì„¸ ë²ˆì§¸, ë„¤ ë²ˆì§¸ ì¡°ê±´ì€ ì†Œìˆ˜ëŠ” í•­ìƒ 2ë³´ë‹¤ í¬ê¸° ë•Œë¬¸ì—, 0ê³¼ 1ì„ í¬í•¨í•  ìˆ˜ë°–ì— ì—†ìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, Finite FieldëŠ” ë§ì…ˆê³¼ ê³±ì…ˆì— ëŒ€í•œ í•­ë“±ì›ì„ ê°€ì§„ë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në‹¤ì„¯ ë²ˆì§¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n$F\\_{p} = \\{0,1,2,3,..., p - 2, p - 1\\}$ì´ê³ , $ a \\in F\\_{p} $ì¸ ê²½ìš°\n\n$$ -a = p - a $$\n\në¼ê³  ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì—¬ì„¯ ë²ˆì§¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n$F\\_{p} = \\{0,1,2,3,..., p - 2, p - 1\\}$ ì´ê³ , $ a \\in F\\_{p} $ì¸ ê²½ìš°\n\n$$ a^{-1} = a^{-1} \\times 1 = a^{-1} \\times a^{p-1} $$\n\n$$ a^{-1} = a^{p - 2} $$\n\nmoduloì˜ ì„¸ ë²ˆì§¸ íŠ¹ì§•ì„ í™œìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ëŸ¬í•œ modulo ì—°ì‚°ì„ í™œìš©í•˜ëŠ” Finite Fieldì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\nìœ„ì—ì„œ ë³´ì•˜ë“¯ì´ ë§ì…ˆê³¼ ê³±ì…ˆ ì—°ì‚°ì€ ì—­ì›ì´ ì¡´ì¬í•˜ì—¬, ê²°ê´ê°’ì„ ê°–ê³  ì—­ìœ¼ë¡œ ì›ë˜ ê°’ì„ ì°¾ì•„ë‚´ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ê³µê°„ì— ì—­ì´ ì—†ëŠ” ì—°ì‚°ìë¥¼ ì¶”ê°€í•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ì´ë¥¼ ê¸°ì–µí•˜ê³  ë„˜ì–´ê°‘ì‹œë‹¤.\n\n## 2. íƒ€ì› ê³¡ì„  Elliptic Curve\n\në‹¤ìŒ ì‹ì„ ë§Œì¡±í•˜ëŠ” ì ë“¤ì´ ê·¸ë¦¬ëŠ” ê³¡ì„ ì„ ìš°ë¦¬ëŠ” íƒ€ì› ê³¡ì„ ì´ë¼ê³  í•©ë‹ˆë‹¤.\n\n$$ y^2 = x^3 + ax + b$$\n\n![elliptic-curve](/images/elliptic-curve.jpeg)\n\níƒ€ì› ê³¡ì„  ìƒì—ì„œ ìš°ë¦¬ëŠ” ë§ì…ˆ ì—°ì‚°ê³¼ êµ‰ì¥íˆ ìœ ì‚¬í•œ ì—°ì‚°ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ë™ì‘ì€ ì¼ë°˜ì ì¸ ìˆ˜í•™ì—ì„œì˜ ë§ì…ˆì€ ì•„ë‹ˆì§€ë§Œ, ë§ì…ˆì˜ íŠ¹ì§•ì„ ê°–ê¸° ë•Œë¬¸ì— $+$ ê¸°í˜¸ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n\në°”ë¡œ, ê° íƒ€ì› ê³¡ì„ ê³¼ 3ê°œì˜ ì ì„ ê°€ì§€ëŠ” ì„ ì„ ê·¸ì—ˆì„ ë•Œ, í•­ìƒ ë‹¤ìŒ ì‹ì„ ë§Œì¡±í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. (Rì€ íƒ€ì›ê³¡ì„ ê³¼ ë§Œë‚˜ëŠ” ì„¸ ë²ˆì§¸ ì ì„ Xì¶• ëŒ€ì¹­ì´ë™í•œ ì ì„ ë§í•©ë‹ˆë‹¤.)\n\n$$ P + Q = R $$\n\n![elliptic-curve-addition-1](/images/elliptic-curve-addition-1.jpeg)\n\n$P(x\\_1, x\\_2)$, $Q(x\\_2, y\\_2)$ê°€ íƒ€ì› ê³¡ì„  $y^2=x^3 + ax + b$ ìœ„ì˜ ì ì´ë¼ê³  í•  ë•Œ, $R(x\\_3, y\\_3)$ì˜ ì¢Œí‘œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n- $ s = {dx \\over dy} = { 3x^2 \\overÂ  2y } = { {y\\_2 - y\\_1} \\overÂ  {x\\_2 - x\\_1}} $\n- $ x\\_3 = s^2 - x\\_1 -x\\_2 $\n- $ y\\_3 = s(x\\_1 - x\\_3) - y\\_1 $\n\nì´ ì—°ì‚° ì—­ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚µë‹ˆë‹¤.\n\n- Identity, í•­ë“±ì›ì´ ì¡´ì¬í•œë‹¤. => $ A + I = A $\n- Invertibility, ì—­ì›ì´ ì¡´ì¬í•œë‹¤. => $ A = (a\\_1, a\\_2)ì´ë©´, -A= (a\\_1, -a\\_2) $\n- Commutativity, êµí™˜ ë²•ì¹™ => $ A + B = B + A $\n- Associativity, ê²°í•© ë²•ì¹™ => $ A + (B + C) = (A + B) + C $\n\nì—¬ê¸°ì„œì˜ ì—­ì›ì€ xì¶• ëŒ€ì¹­ ì´ë™ì„ í†µí•´ ì–»ì€ ê°’ì´ë¼ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, êµì ì´ ì„¸ ê°œì¸ ì‹œì ì—ì„œ ì§ì„ ì˜ ê¸°ìš¸ê¸°ë¥¼ ë¬´í•œëŒ€ë¡œ ê³„ì† ì˜¬ë¦¬ë‹¤ ë³´ë©´ ê²°êµ­ì€ yì¶•ì— ëŒ€ì¹­ì¸ í˜•íƒœë¡œ ì§ì„ ì´ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì•„ë˜ ê·¸ë¦¼ì—ì„œ ë‘ ë²ˆì§¸) ì´ ê²½ìš°ì— ìš°ë¦¬ëŠ” ì‹¤ì œë¡œëŠ” êµì ì´ ë‘ ê°œì§€ë§Œ, ë¬´í•œëŒ€ ì§€ì ì—ì„œ êµì ì´ í•˜ë‚˜ ë” ìˆë‹¤ê³  ë§í•˜ê³  ì´ë¥¼ I(Infinity)ë¼ê³  ì •ì˜í•©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´, í•­ë“±ì›ì´ ë°”ë¡œ Iê°€ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë‘ ë²ˆì§¸ ê·¸ë¦¼ì—ì„œ $P + I = P$ê°€ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.) ì´ë¥¼ í†µí•´ì„œ ë‘ ë²ˆì§¸ì— ì¡´ì¬í•˜ëŠ” ì—­ì›ê¹Œì§€ë„ ì¦ëª…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.($P + (-P) = I$)\n\n![elliptic-curve-addtion-2](/images/elliptic-curve-addition-2.png)\n\n![elliptic-curve-addition-3](/images/elliptic-curve-addition-3.jpeg)\n\nì„¸ ë²ˆì§¸ëŠ” ë„ˆë¬´ë‚˜ ìëª…í•˜ê¸° ë•Œë¬¸ì— ë„˜ì–´ê°€ê³ , ë„¤ ë²ˆì§¸ëŠ” ì•„ë˜ ê·¸ë¦¼ì„ í†µí•´ì„œ ì„¤ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì£¼í™©ìƒ‰ : $ (P + Q) + S = R\\_1 + S = T $\n\nì´ˆë¡ìƒ‰ : $ (P + S) + Q = R\\_2 + Q = T $\n\n![elliptic-curve-addition-4](/images/elliptic-curve-addition-4.jpeg)\n\nì¶”ê°€ì ìœ¼ë¡œ ì‚´í´ë³¼ ìˆ˜ ìˆëŠ” í•˜ë‚˜ì˜ ì—°ì‚°ì„ í•˜ë‚˜ ë” ì•Œì•„ë³´ê³  ê°‘ì‹œë‹¤.\n\në°”ë¡œ ì ‘ì„ ì—ì„œ ì—°ì‚°ì…ë‹ˆë‹¤. ì´ ê²½ìš°ëŠ” Pì™€ Qê°€ ê°™ë‹¤ê³  ì—¬ê¹ë‹ˆë‹¤. ì¦‰, ìê¸° ìì‹ ì„ ë‘ ë²ˆ ë” í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ë¥¼ $ P + P = R = 2P $ë¼ê³  í‘œí˜„í•©ë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ë°˜ë³µí•˜ë©´ì„œ, ê²°ê³¼ ê°’ì„ ë„ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ë„ ì‘ì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì´ë¥¼ ìš°ë¦¬ëŠ” Elliptic Curveì—ì„œì˜Â **Scalar Multiplication**ì´ë¼ê³  í•©ë‹ˆë‹¤.)\n\n$$ kP = R $$\n\nì´ë¥¼ ê³„ì‚°í•˜ê¸° ìœ„í•´ì„œëŠ”, ì¼ë°˜ì ìœ¼ë¡œ k ë²ˆì˜ Elliptic Curve Additionì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ë” ê°„ëµí™”í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\n\n$$ R = 63P = (1 + 2 + 4 + 8 + 16 + 32) P = (1 + (1+1) + (2+2) + (4+4) + (8+8) + (16+16)) P $$\n\nì¦‰, ì´ì „ ê³„ì‚°ì˜ ê²°ê³¼ë¥¼ í˜„ì¬ ê³„ì‚°ì— í™œìš©í•˜ì—¬ ê³„ì‚°ì„ ë” ë¹ ë¥´ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ì˜ˆì‹œì—ì„œëŠ” 62(63 - 1) ë²ˆì˜ ë”í•˜ê¸° ì—°ì‚°ì„ 10ë²ˆìœ¼ë¡œ ì¤„ì¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë¬¼ë¡  ì´ì™¸ì—ë„ ë§ì€ ë°©ì‹ìœ¼ë¡œ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆì§€ë§Œ, ì´ ì •ë„ë©´ ëŒ€ê²Œ ì¶©ë¶„í•©ë‹ˆë‹¤.)\n\n![elliptic-curve-addition-5](/images/elliptic-curve-addition-5.jpeg)\n\nì—¬ê¸°ì„œ ì£¼ëª©í•  í¬ì¸íŠ¸ë¥¼ í•˜ë‚˜ ì§šì–´ë³´ê³  ê°€ì•¼í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ $R$ê³¼, $P$ë¥¼ ì•Œê³  ìˆì„ ë•Œ, $k$ êµ¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í• ê¹Œìš”?\n\nì´ëŠ” ì‰½ì§€ ì•Šì€ ë¬¸ì œê°€ ë©ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì´ëŸ¬í•œ scalar multiplcationë¬¸ì œì—ì„œëŠ” ì—­ì›ì´ ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, kì— ê°’ì„ 1ë¶€í„° ëŒ€ì…í•´ë³´ë©´ì„œ í™•ì¸í•´ ë³¼ ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\n---\n\nì´ì œ ê¸°ë³¸ì´ ë˜ëŠ” ë‘ ì´ë¡ ì„ ì„¸íŒ…í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nì¼ë‹¨ì€ ìœ ì˜í•´ì•¼ í•  ì ì€ ë°”ë¡œ Finite Fieldë¡œ Elliptic Curveë¥¼ ê°€ì ¸ì˜¤ê²Œ ë˜ë©´, ì´ëŠ” discrete(ë¶ˆì—°ì†) í•´ì§„ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë˜í•œ, Scalar Multiplicationì—ë„ ë³€í™”ê°€ ë°œìƒí•©ë‹ˆë‹¤. **ë°”ë¡œ ìˆœí™˜ì´ë¼ëŠ” ê²ƒì´ ìƒê¸´ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.** $nP = R = 0$ ì´ ë˜ëŠ” $n$ê°’ì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜í•œ, ì—­ì›ì´ ì—†ëŠ” ì„±ì§ˆ ë˜í•œ ìœ ì§€ë˜ê¸° ë•Œë¬¸ì—, $kP$ë¥¼ í†µí•´ì„œ ìƒì„±ëœ ê°’($R$)ê³¼ Pë¥¼ ëª¨ë‘ ê³µê°œí•˜ë”ë¼ë„, $k$ê°€ ë°í˜€ì§ˆ ê°€ëŠ¥ì„±ì€ $n$ê°’ì´ ì»¤ì§ˆìˆ˜ë¡ ë¶ˆê°€ëŠ¥ì— ê°€ê¹ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì‹¤ì œë¡œ Bitcoinì—ì„œëŠ” ì´ Nì„ ë§¤ìš° í¬ê²Œ ì„¤ì •í•˜ì˜€ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì—†ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ë²ˆ Bitcoinì—ì„œ, Finite Field ìƒì˜ Elliptic Curveì˜ ëª¨ë“  ë³€ìˆ˜ë¥¼ ì •ë¦¬í•´ë´…ì‹œë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ, í•´ë‹¹ ì•”í˜¸í™”ì— ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ê°’ì˜ ë‹¨ìœ„ëŠ” 256 bits ì¦‰, 32 bytesë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n1. Elliptic Curveì˜ í˜•íƒœ : $a=0$, $b=7$ì„ ì‚¬ìš©í•˜ëŠ” secp256k 1ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ í˜•íƒœëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $$y^2 = x^3 + 7$$\n2. Finite Fieldì˜ ì†Œìˆ˜ : ìœ„ì—ì„œ ë§í•œ ëŒ€ë¡œ $n$ì˜ ê°’ì„ í¬ê²Œ í•˜ê¸° ìœ„í•´ì„œ finite field ìì²´ì˜ í¬ê¸°ë„ ë§¤ìš° ì»¤ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì—, $p$ ì—­ì‹œ ë§¤ìš° í½ë‹ˆë‹¤. $$p = 2^{256} - 2^{32} - 977 $$\n3. Scalar Multiplicationì— ì‚¬ìš©ë˜ëŠ” Elliptic Curve ìœ„ì˜ í•œ ì ($G$) : ì´ ë˜í•œ ë§¤ìš° í¬ê¸° ë•Œë¬¸ì— ê° ì¢Œí‘œë³„ë¡œ ë”°ë¡œ ì ê² ìŠµë‹ˆë‹¤. $G\\_x = $ 0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798  \n    $G\\_y = $ 0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8\n4. Scalar Mutiplicationì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” $k$ì˜ ë²”ìœ„ ($n$)Â : ìœ„ì—ì„œë„ ë³´ì•˜ê² ì§€ë§Œ, 0xëŠ” 16ì§„ìˆ˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.  \n    $n = $ 0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141  \n\nìœ„ì˜ ë°ì´í„°ë¥¼ ë³´ë‹¤ì‹œí”¼ ë§¤ìš° í° ë²”ìœ„ì˜ ê°’ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ í•œ ë²ˆ ìš°ë¦¬ê°€ ì•”í˜¸í™” í‚¤ì™€ í•´ë… í‚¤(ê³µê°œí‚¤)ë¥¼ ê° ê° ë§Œë“¤ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\në¨¼ì €, ì•”í˜¸í™” í‚¤($e$)ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ë§¤ìš° ì‰½ìŠµë‹ˆë‹¤.\n\në°”ë¡œ $n$ë³´ë‹¤ ì‘ì€ ì„ì˜ì˜ ìˆ˜ë¥¼ ê³ ë¥´ë©´ ë©ë‹ˆë‹¤.\n\nê·¸ë¦¬ê³ , ì´ë¥¼ ì´ìš©í•´ì„œ, ìš°ë¦¬ëŠ” ë°”ë¡œ í•´ë… í‚¤ì¸ ê³µê°œí‚¤ë¥¼($P$) ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n$$ P = eG $$\n\nì´ë ‡ê²Œ í•˜ë©´ ëì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” $e$ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì—, $P$ì™€ $G$ê°€ ëª¨ë‘ê°€ ì•„ëŠ” ê°’ì´ë¼ê³  í• ì§€ë¼ë„ $e$ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\nê·¸ë ‡ê¸°ì— ìš°ë¦¬ëŠ” ì•ˆì‹¬í•˜ê³ , Pë¥¼ ê³µê°œí•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ì œ ìš°ë¦¬ëŠ” ì´ê²ƒì„ ì´ìš©í•´ì„œ í•œ ë²ˆ ì„œëª…ì„ í†µí•œ ì¸ì¦ì„ ìˆ˜í–‰í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\në¨¼ì €, ìš°ë¦¬ê°€ ë³´ë‚´ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ $m$ì´ë¼ê³  í•˜ê² ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ë°”ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ë³´ë‚´ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ í¬ê¸°ê°€ 32 bytesë¥¼ í•­ìƒ ë§Œì¡±í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ë¥¼ 32 bytesë¡œ ë³€í™˜í•´ì¤„ ë°©ë²•ì´ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ, ìš°ë¦¬ëŠ” hashingì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë˜í•œ, ì›ë³¸ë°ì´í„° ìì²´ë¥¼ ì•Œì•„ë³¼ ìˆ˜ ì—†ê²Œ ë°”ê¿”ë²„ë¦¬ëŠ” ì—­í• ë„ í•´ì„œ ì•”í˜¸í™”ì˜ ì—­í• ë„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§„ ë°ì´í„°ë¥¼ ìš°ë¦¬ëŠ” $z$ë¼ê³  í•˜ê² ìŠµë‹ˆë‹¤.\n\nì´ì œ ì—¬ê¸°ì„œ, ìš°ë¦¬ëŠ” ë¹„ë°€í‚¤ê°€ ì•„ë‹Œ ë˜ í•˜ë‚˜ì˜ ê°’ì„ í•˜ë‚˜ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë°”ë¡œ $k$ì…ë‹ˆë‹¤. ì´ëŠ” ë¹„ë°€í‚¤ì™€ ë§ˆì°¬ê°€ì§€ë¡œ $n$ë³´ë‹¤ ì‘ì€ 32bytesë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\n$$ kG = R $$\n\nì„ ì „ì†¡ì ì¸¡ì—ì„œ ê³„ì‚°ì„ í•˜ê³ , $R$ì˜ $x$ ì¢Œí‘œë¥¼ $r$ì´ë¼ê³  ì •ì˜í•˜ë©´ ê±°ì˜ ëª¨ë“  ì„¤ì •ì€ ëë‚¬ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ì œ ì§„ì§œë¡œ ì„œëª…ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në°”ë¡œ $ uG + vP = kP = R $ë¼ê³  í•  ë•Œ,\n\n$$ u + ve = k $$\n\n$$ u = z / s $$\n\n$$ v = r / s $$\n\nê°€ ë˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ë ‡ê²Œ ë˜ë©´, $u$ë¼ëŠ” ê°’ì€ $z$ë¥¼ ê°€ì§€ë¯€ë¡œ, ì›ë³¸ ë°ì´í„°ë¥¼ í¬í•¨í•œë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, $v$ëŠ” $r$ì„ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ ê°’ ìì²´ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ëŠ” í•´ë‹¹ ë°©ì •ì‹ì„ í’€ì–´ì„œ ë³´ë©´, $$ s = ( z + re ) / k $$ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ $e$ì™€ $k$ë¼ëŠ” ê°ì¶°ì ¸ì•¼ë§Œ í•˜ëŠ” ê°’ì´ ë‘ ê°œ í¬í•¨ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ë°©ì •ì‹ì€ ì•ˆì „í•˜ê²Œë„ $e$, $k$ê°€ ëª¨ë‘ ë³€ìˆ˜ë¡œ ë‚¨ê¸° ë•Œë¬¸ì— $s$, $z$, $r$ì„ ì•ˆë‹¤ê³  í•´ë„ $e$ì™€ $k$ë¥¼ êµ¬í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, $s$ì™€ $r$ì„ í•˜ë‚˜ë¡œ í•©ì³ì„œ í•˜ë‚˜ì˜ ì„œëª…(Signature)ì„ ì´ë£¨ê²Œ ë©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ì „ì†¡ìëŠ” $z$(ë³´ë‚¼ ë°ì´í„°)ì™€ $r$, $s$(ì„œëª…)ë¥¼ ì „ì†¡í•¨ìœ¼ë¡œì¨, ë°ì´í„°ì˜ ìˆ˜ì‹ ìê°€ ì§ì ‘ ì„œëª…ì˜ ì ì ˆí•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nìˆ˜ì‹ ìëŠ” ì´ì œ ë°›ì€ ë°ì´í„°ë¥¼ í†µí•´ì„œ ë‹¤ìŒ ê³¼ì •ì„ ì§„í–‰í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n1. $u$ì™€ $v$ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ($u = z / s $, $v = r / s$)\n2. $uG + vP$ì˜ ì—°ì‚°ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n3. ìœ„ì˜ ê²°ê´ê°’ì„ í†µí•´ì„œ ì–»ì€ ì¢Œí‘œê°’ì˜ x ì¢Œí‘œì™€ r ê°’ì„ ë¹„êµí•˜ì—¬ ë™ì¼í•œì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.  \n    $$ uG + vP = R $$\n4. ì´ê²ƒì´ ë™ì¼í•˜ë‹¤ë©´, í•´ë‹¹ ë°ì´í„°ëŠ” ì¸ì¦ëœ ë°ì´í„°ì…ë‹ˆë‹¤.\n\nì´ê²ƒì´ BitCoinì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„œëª… ë°©ì‹ì¸ ECDSAì…ë‹ˆë‹¤. ì´ì— ëŒ€í•œ êµ¬í˜„ì€ githubì— ì˜¬ë ¤ ë‘ì—ˆìœ¼ë‹ˆ, í™•ì¸ì„ ì›í•˜ì‹œë©´ ì²´í¬í•´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n","slug":"bitcoin-1","date":"2022-03-16 18:15","title":"[Bitcoin] 1. ECDSAë¥¼ ì´ìš©í•œ ì„œëª…","category":"Tech","tags":["BlockChain","Bitcoin"],"thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Intro\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.**Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” Bitcoinì—ì„œ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ Serialization í•˜ê³ , Parsing í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤.**\n\n---\n\në¨¼ì €, Serializationì´ ë¬´ì—‡ì¸ì§€ë¶€í„° ì•Œì•„ë³´ì•„ì•¼ í•©ë‹ˆë‹¤. Serializationì´ë€ í˜„ì¬ programmerê°€ ë§Œë“¤ì–´ë†“ì€ data(Class Instance, ë“±)ë¥¼ networkë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ computerë¡œ ì˜®ê¸°ê±°ë‚˜, ì €ì¥ ì¥ì¹˜ file ë“±ìœ¼ë¡œ ì˜®ê²¨ ë‹´ì„ ë•Œ, **ì—°ì†ì ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” í˜•íƒœ**ë¡œ êµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•ì„ ë§í•©ë‹ˆë‹¤. ëŒ€ê²Œ, ì´ëŸ¬í•œ ì²˜ë¦¬ëŠ” ì›ë³¸ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì›ë˜ dataë¡œ ë³€í™˜í•˜ëŠ” Parsingê³¼ ì§ì„ ì´ë£¹ë‹ˆë‹¤.\n\në°ì´í„°ë§ˆë‹¤, ê·¸ë¦¬ê³  ì‚¬ëŒë§ˆë‹¤ ë” ì¢‹ë‹¤ê³  ìƒê°í•˜ëŠ” serialization ë°©ì‹ì€ ë§¤ìš° ë§ìŠµë‹ˆë‹¤.\n\nëŒ€ê²Œ ê³ ë ¤í•˜ê²Œ ë˜ëŠ” ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n1. **íš¨ìœ¨ì„±** : ë³€í™˜í•˜ëŠ” ë°ì´í„°ê°€ ì§§ê²Œ í‘œí˜„ë  ìˆ˜ë¡ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì „ë‹¬ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì€ ìëª…í•˜ê¸°ì— ì´ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.\n2. **ë³´ì•ˆì„±** : networkë¡œ ì „ë‹¬ì´ ë  ê°€ëŠ¥ì„±ì´ ë†’ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì „ë‹¬ë°›ì€ ëˆ„êµ¬ë‚˜ ì´ë¥¼ ë³€í™˜í•  ìˆ˜ ìˆë‹¤ë©´, ìœ„í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë³´ì•ˆì„±ì„ ìœ„í•´ì„œ, ì•”í˜¸í™” ë˜ëŠ” hashingì„ ìˆ˜í–‰í•˜ê¸°ë„ í•©ë‹ˆë‹¤.\n3. **ì•ˆì •ì„±** : ëŒ€ê²Œ ë³´ì•ˆì„±ê³¼ ë¬¶ì–´ì„œ ì„¤ëª…í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. ì¦‰, ë°ì´í„°ê°€ ì¤‘ê°„ì— ì†ì‹¤ë˜ì§€ ì•Šê³ , ì•ˆì •ì ìœ¼ë¡œ ì œëŒ€ë¡œ ë„ì°©í–ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤.\n4. **í‘œì¤€** : ê²°êµ­ Serializationì„ í•˜ë”ë¼ë„, ì´ë¥¼ ìˆ˜ì‹ ë°›ì€ ì…ì¥ì—ì„œëŠ” ì´ë¥¼ ë²ˆì—­í•œ ë‚´ìš©ì— ê´€ì‹¬ì´ ìˆê¸°ì—, ì´ë¥¼ ë²ˆì—­í•  ë°©ë²•ì´ ì„œë¡œ ê³µìœ ê°€ ë˜ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ë§ì€ ê²½ìš°ì—, Serializationì„ í‘œì¤€ìœ¼ë¡œ ì •í•´ì§„ ë°©ì‹ì„ í†µí•´ì„œ ìˆ˜í–‰ë©ë‹ˆë‹¤. ë˜ëŠ”, ìƒˆë¡œìš´ í‘œì¤€ì„ ë§Œë“¤ì–´ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n5. **ê°€ë…ì„±** : ëŒ€ê²Œ, serializationëœ ë°ì´í„° ìì²´ë¥¼ ì‚¬ëŒ ê°„ì— êµ¬ë‘ë¡œ ì „ë‹¬í•´ì•¼ í•  ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œ, ì¸ê°„ ì¹œí™”ì ì¸ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ë³€ì¡°í•˜ëŠ” ê²½ìš°ë„ ë§ìŠµë‹ˆë‹¤.\n\n---\n\në¨¼ì €, Bitcoinì—ì„œ êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ì‹ìœ¼ë¡œ Serializationì„ ì‚´í´ë³´ê¸° ì „ì— ê¸°ë°˜ ê¸°ìˆ ì„ ì•Œì•„ë³¼ ê²ƒì…ë‹ˆë‹¤. ê° ê¸°ìˆ ì— ëŒ€í•´ì„œ ì´ë¯¸ ì•Œê³  ìˆë‹¤ë©´, ë°”ë¡œ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ë„ ì¢‹ìŠµë‹ˆë‹¤.\n\n### 1. Byteí™”\n\nì¼ë°˜ì ìœ¼ë¡œ, Serializationì„ ìˆ˜í–‰í•œ ê²°ê³¼ë¬¼ì€ bytes(8bit) í˜•íƒœë¡œ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ë‹¹ì—°íˆ ì¼ë°˜ì ì¸ programmingì—ì„œ ì‚¬ìš©ë˜ëŠ” integer(4 bytes) í˜•íƒœë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë˜í•œ, ì»´í“¨í„° ìì²´ê°€ byte ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì•Œì•„ë¨¹ê¸° ë•Œë¬¸ì—, ì»´í“¨í„° ì¹œí™”ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³€í™˜í•œë‹¤ê³  ìƒê°í•˜ë©´ ë  ê±° ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë°ì´í„°ë¥¼ ë³€í™˜í•˜ì—¬ ê²°ê³¼ë¬¼ì´ byte ë‹¨ìœ„ë¡œ ë¬¶ì´ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. (+ ë‹¨ìˆœíˆ ì¢€ ë” íš¨ìœ¨ì ì¸ í˜•íƒœë¡œ ë³€í™˜í–ˆë‹¤ê³  ìƒê°í•´ë„ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ, ì‚¬ëŒì´ í•´ë‹¹ ë¬¸ìë¥¼ ë³´ê³ , í•œ ë²ˆì— ë¬´ìŠ¨ ìˆ«ìì¸ì§€ ì°¾ì•„ë‚´ê¸°ëŠ” ì¢€ í˜ë“¤ì–´ì§‘ë‹ˆë‹¤.)\n\n```c++\n// c++ì„ ì•ˆë‹¤ë©´ ë„ì›€ì´ ë˜ê² ì§€ë§Œ, cë¥¼ ì˜ ëª¨ë¥´ì‹ ë‹¤ë©´, ì´í•´í• ë ¤ê³  í•˜ì§€ë§ê³  ë„˜ì–´ê°€ì…”ë„ ë©ë‹ˆë‹¤.\nint a = 255 // 4 bytes\nchar a = 255 // 1 byte\n```\n\nì—¬ê¸°ì„œ, byte typeì„ ë‹¤ë£° ë•Œ, í•­ìƒ ë°œìƒí•˜ëŠ” ë¬¸ì œì¸ **í˜¸í™˜ì„±**ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì‚¬ëŒì€ ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜ë¥¼ ì“¸ ë•Œ, ì™¼ìª½ì—ì„œë¶€í„° í°ìˆ˜ê°€ ë‚˜ì˜¤ë©°, ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì“°ëŠ” ê²ƒì´ í‘œì¤€ì²˜ëŸ¼ ì •í•´ì ¸ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, computer ì„¸ê³„ì—ì„œëŠ” ê·¸ë ‡ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì™¼ìª½ì´ í° ìˆ˜ ì¸ì§€, ì˜¤ë¥¸ìª½ì´ í° ìˆ˜ ì¸ì§€ë¥¼ ì •í•´ì¤„ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í‘œì¤€ìœ¼ë¡œ ì •í•´ì„œ ì–´ë–¤ ë°ì´í„°ë¥¼ serialization í•  ë•Œ ì™¼ìª½ì´ í° ìˆ˜ê°€ ë˜ëŠ” (Big endian)ì„ ì‚¬ìš©í• ì§€, ì˜¤ë¥¸ìª½ì´ í° ìˆ˜ê°€ ë˜ëŠ” (Little endian)ì„ ì‚¬ìš©í• ì§€ë¥¼ ë°˜ë“œì‹œ ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\n### 2. Base58\n\nì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” Base64ë¥¼ ë¨¼ì € ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ëŠ” íŠ¹ì • ë°ì´í„°ë¥¼ ì´ 64ê°œì˜ ë¬¸ì (10(ìˆ«ì) + 26(ì•ŒíŒŒë²³ ì†Œë¬¸ì) + 26(ì•ŒíŒŒë²³ ëŒ€ë¬¸ì) + 2(ê¸°í˜¸ +, /))ë¡œ ì´ë£¨ì–´ì§„ ë¬¸ì ì²´ê³„ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ í•˜ë‚˜ì˜ byte(8 bits)ë¡œ 256ê°œì˜ ë°ì´í„°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì´ Base64ë¡œ ë³€í™˜í•˜ê²Œ ë˜ë©´ 6bitì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ì ìœ¼ë¡œ ë°ì´í„°ì˜ í¬ê¸°ê°€ ì»¤ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.(ê²°êµ­ì—ëŠ” byteë‹¨ìœ„ë¡œ ì „ì†¡í•˜ëŠ”ë°, ê·¸ì¤‘ì— 6bitë§Œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.) ê·¸ëŸ¼ì—ë„ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” **í˜¸í™˜ì„±**ì„ ë†’ì´ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. êµ­ì œì ì¸ í‘œì¤€ì´ê¸° ë•Œë¬¸ì—, Base64ë¥¼ ì´ìš©í•œë‹¤ë©´, ì–´ë–¤ ì‹œìŠ¤í…œì—ì„œë„ ì´ë¥¼ í•´ì„í•˜ëŠ” ë°ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ í˜•íƒœë¡œì˜ ë³€í™˜ì€ êµ‰ì¥íˆ ë¹ˆë²ˆíˆ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, Base58ì€ ë¬´ì—‡ì¸ê°€ì— ëŒ€í•´ì„œ ê³ ë¯¼ì„ í•´ë³´ì•„ì•¼ í•©ë‹ˆë‹¤. Base58ì´ë€, Base64ì— **ê°€ë…ì„±**ì„ ë†’ì´ê¸° ìœ„í•œ versionì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ì‚¬ëŒì´ ì½ì—ˆì„ ë•Œ, í—·ê°ˆë¦´ ìˆ˜ ìˆê² ë‹¤ê³  íŒë‹¨ë˜ëŠ” ë°ì´í„°ë¥¼ ê³¼ê°í•˜ê²Œ ì œê±°í•´ë²„ë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ê¸°ì¡´ì˜ Base64ì—ì„œ 0(ìˆ«ì 0), O(ëŒ€ë¬¸ì o), l(ì†Œë¬¸ì L), I(ëŒ€ë¬¸ì i), +, /ë¥¼ ì œê±°í•˜ì—¬ í‘œí˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ê²°ë¡ ìƒ 58ê°œì˜ ë¬¸ì (9(ìˆ«ì) + 25(ì†Œë¬¸ì) + 24(ëŒ€ë¬¸ì))ë¡œ í‘œí˜„í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë˜í•œ, ë¶€ê°€ì ìœ¼ë¡œ **ì•ˆì •ì„±**ì„ ë†’ì´ê¸° ìœ„í•´ì„œ, base58ì—ì„œëŠ” hash256ì„ ì´ìš©í•´ì„œ ë§Œë“¤ì–´ì§„ ë°ì´í„°ë¥¼ ì¶”ê°€ë¡œ ì „ì†¡í•˜ì—¬, checksumìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” êµ¬í˜„ë„ ì¡´ì¬í•©ë‹ˆë‹¤. (checksumì´ë€, ìˆ˜ì‹ ì„ ë°›ì€ ì¸¡ì—ì„œ ë°ì´í„°ì˜ ì†ì‹¤ ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œ, ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ë§í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ìì„¸íˆ ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤.)\n\n### 3. DER(Distinguished Encoding Rule)\n\nserialization ê¸°ë²• ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ë¦„ì—ì„œë¶€í„° ëŠê»´ì§€ë‹¤ì‹œí”¼ serializationì„ ìˆ˜í–‰í•  ë•Œ, ì •í™•í•œ êµ¬ë¶„ìì™€ ê¸¸ì´ë¥¼ data ì•ì— ë°°ì¹˜ì‹œì¼œì„œ ë³€í™˜ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•œ ë°©ë²• ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ”, Bitcoinì—ì„œ ì‚¬ìš©í•˜ëŠ” DER ë°©ì‹ë§Œ ë‹¤ë£¨ê¸°ì— í•´ë‹¹ ë°©ì‹ì´ ì–´ë–»ê²Œ ëŒì•„ê°€ëŠ”ì§€ë§Œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\nBitCoinì—ì„œëŠ” Signature(ì„œëª…)ì„ ì „ë‹¬í•  ë•Œ, í•´ë‹¹ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ”ë°, ì´ëŠ” ì´ ì „ chapterì—ì„œ ì‚´í´ë´¤ë“¯ì´ ë‘ê°œì˜ integerë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì—¬ëŸ¬ ê°œë¥¼ ë³´ë‚¼ ë•Œ, ì´ë¥¼ ê°ì‹¸ ì¤„ ìˆ˜ ìˆëŠ” Sequenceì™€ Integer í˜•ì„ ë³´ë‚¼ ë•Œ, ì‚¬ìš©í•˜ëŠ” êµ¬ë¶„ìë¥¼ data ì•ì— ë„£ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. (Sequence = 0x30, Integer = 0x02) ë˜í•œ, dataì˜ ì‚¬ì´ì¦ˆ ì—­ì‹œ ê°™ì´ ë¶™ì—¬ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. (ë‹¨ìœ„ê°€ byteë¼ëŠ” ê²ƒì„ ìœ ì˜í•©ì‹œë‹¤.)\n\në”°ë¼ì„œ, í˜•íƒœê°€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n0x30 + {ì „ì²´ ì „ì†¡ dataì˜ ì‚¬ì´ì¦ˆ} + 0x02 + {ë³´ë‚¼ integer dataì˜ ì‚¬ì´ì¦ˆ} + {ì „ì†¡í•  data(bytes)} + 0x02 + {ë³´ë‚¼ integer dataì˜ ì‚¬ì´ì¦ˆ} + {ì „ì†¡í•  data(bytes)}\n\nì˜ˆì‹œë¡œ ë‹¤ìŒì„ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ì— 1ê³¼ 2ë¼ëŠ” ìˆ˜ë¥¼ ë™ì‹œì— ë³´ë‚´ê³  ì‹¶ì„ ë•Œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì „ë‹¬ëœë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n0x30\\0x06\\0x02\\0x01\\0x01\\0x02\\0x01\\0x02\n\nì•„ë˜ ë§í¬ë¥¼ í™•ì¸í•˜ë©´ ë” ìì„¸í•œ ë°©ì‹ë“¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— ASN í˜•ì‹ì˜ DER ì¸ì½”ë”©](https://docs.microsoft.com/ko-kr/windows/win32/seccertenroll/about-der-encoding-of-asn-1-types)\n\n### 4. SEC(Standards for Efficient Cryptography)\n\nserialization ê¸°ë²• ì¤‘ì— í•˜ë‚˜ì´ë©°, íŠ¹íˆ ì•”í˜¸í™” ê³¼ì •ì—ì„œ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ ì •ë„ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ê²Œ ECC(Elliptic Curve Cryptography)ì˜ ì•”í˜¸í™” ì‹œì— ìƒì„±ëœ public key ë“±ì— ëŒ€í•œ í‘œì¤€í™” ë‚´ìš©ì„ í¬í•¨í•©ë‹ˆë‹¤. Bitcoinì—ì„œëŠ” Public key ì „ì†¡ ì‹œì— SECë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œ ì´ì— ëŒ€í•œ ë‚´ìš©ë§Œì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\në¨¼ì €, ì—¬ê¸°ì„œëŠ” Public keyë¥¼ ë‘ ê°€ì§€ modeë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n\nì²« ë²ˆì§¸ë¡œ, ì••ì¶•(compression)ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ í‘œí˜„ë²•ìœ¼ë¡œ ì´ëŠ” ë§¤ìš° ë‹¨ìˆœí•©ë‹ˆë‹¤.\n\nìš°ì„ ì€, 0x04ë¥¼ ë°ì´í„° ë§¨ ì•ì— ë¶™ì´ê³ , ìˆœì„œëŒ€ë¡œ Public keyì˜ Xì¢Œí‘œ, Yì¢Œí‘œë¥¼ ë¶™ì—¬ì£¼ë©´ ë©ë‹ˆë‹¤.\n\n0x04 + {public key's x (bytes)} + {public key's y (bytes)}\n\nì´ëŠ” í•­ìƒ ì‚¬ì´ì¦ˆê°€ 65(1 + 32 + 32)bytesë¡œ ê³ ì •ëœë‹¤ëŠ” ì ì„ ì•Œ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. (ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ìœ„ì—ì„œ ì„¤ëª…í•œ DER ë°©ì‹ì—†ì´ë„ ì „ì†¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.)\n\në‘ ë²ˆì§¸ë¡œ, ì••ì¶•(compression)ì„ ì‚¬ìš©í•˜ëŠ” í‘œí˜„ë²•ì…ë‹ˆë‹¤. ì „ì†¡í•˜ëŠ” ë‘ ê°œì˜ ë°ì´í„° $x$,$y$ê°€ Elliptic Curve ìœ„ì— ì¡´ì¬í•œë‹¤ëŠ” ì—°ê´€ì ì„ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ($y^2 = x^3 + ax + b$)\n\n$x$ë§Œ ë³´ë‚´ê³ , $y$ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ë‘ ê°€ì§€ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\n1. ì œê³±ê·¼ ì—°ì‚°($\\sqrt{y^2}$)ì´ ê°€ëŠ¥í•œê°€?\n2. ì œê³±ê·¼ìœ¼ë¡œ ë‚˜ì˜¨ ê²°ê³¼ê°’ ì¤‘ ì–´ë–¤ ê²ƒì´ ê·¼ì¸ì§€ í™•ì‹ í•  ìˆ˜ ìˆëŠ”ê°€?\n\nì¼ë‹¨ ì œê³±ê·¼ ì—°ì‚°ì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œëŠ” ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ($p+1$ì´ 4ì˜ ë°°ìˆ˜ì¸ ê²½ìš°)\n\n$$ p \\% 4 = 3$$\n\n$$(p + 1) \\% 4 = 0$$\n\në‹¤í–‰íˆë„, Bitcoinê°€ ì‚¬ìš©í•˜ëŠ” ECDSAì—ì„œëŠ” ì´ë¥¼ ë§Œì¡±í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì•„ë˜ì˜ ì‹ì„ ë§Œì¡±í•˜ì—¬ ì‰½ê²Œ ì œê³±ê·¼ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì¤‘ê°„ì— $(p+1)/2$ ì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” Prime numberëŠ” 2ë¥¼ ì œì™¸í•˜ê³ ëŠ” ëª¨ë‘ í™€ìˆ˜ ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.)\n\n$$w^2 = v$$\n\n$$w^{p-1} \\% p = 1$$\n\n$$w=w^{(p+1)/2}=w^{2(p+1)/4} = (w^2)^{(p+1)4} = v^{(p+1)/4} $$\n\në˜ í•˜ë‚˜ì˜ ì œê³±ê·¼ì„ êµ¬í•  ë•Œì—ëŠ” ê°„ë‹¨í•˜ê²Œ ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n\n$$-w = p - w$$\n\në‹¤ìŒìœ¼ë¡œ, ì œê³±ê·¼ìœ¼ë¡œ ë‚˜ì˜¨ ê°’ ì¤‘ íŠ¹ì •í•˜ëŠ” ë°©ë²•ì€ ë°”ë¡œ í™€ìˆ˜ì¸ì§€ ì§ìˆ˜ì¸ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” 1byteë§Œì„ ì „ì†¡í•´ì£¼ë©´ ë©ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ìœ„ì— ì‹ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ $w$ê°€ ì§ìˆ˜ì´ë©´, ë˜ ë‹¤ë¥¸ ê·¼ì¸ $-w$ëŠ” í™€ìˆ˜ì¼ ìˆ˜ ë°–ì— ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ($p$ = í™€ìˆ˜)\n\në”°ë¼ì„œ, ì „ì†¡ ì‹œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë”ìš± ê°„ì†Œí•´ì§‘ë‹ˆë‹¤.\n\nìš°ì„ ì€, 0x02 ë˜ëŠ” 0x03 ë°ì´í„°ë¥¼ ë§¨ ì•ì— ë¶™ì´ê³ , ìˆœì„œëŒ€ë¡œ Public keyì˜ Xì¢Œí‘œë¥¼ ë¶™ì—¬ì£¼ë©´ ë©ë‹ˆë‹¤.\n\nì§ìˆ˜ : 0x02 + {public key's x (bytes)}\n\ní™€ìˆ˜ : 0x03 + {public key's x (bytes)}\n\nì´ëŠ” í•­ìƒ ì‚¬ì´ì¦ˆê°€ 33(1 + 32)bytesë¡œ ê³ ì •ëœë‹¤ëŠ” ì ì„ ì•Œ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\nì•„ë˜ ë§í¬ë¥¼ í†µí•´ì„œ ë” ìì„¸í•œ ì‚¬í•­ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— Standards for Efficient Cryptography Group](https://www.secg.org/)\n\n### 5. Hash160, Hash256\n\nhashë¼ëŠ” ê²ƒ ì—­ì‹œ serialization partì—ì„œ ë¹ˆë²ˆí•˜ê²Œ ë“±ì¥í•  ìˆ˜ ë°–ì— ì—†ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. hashë€ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§€ëŠ” í•¨ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤.\n\n1. one way function : ì—­ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥ì—°ì‚°ì…ë‹ˆë‹¤.\n2. return fixed length : ë°˜í™˜ëœ ê²°ê³¼ê°’ì´ í•­ìƒ ì¼ì •í•œ ê¸¸ì´ë¥¼ ê°€ì§‘ë‹ˆë‹¤.\n3. collision with very low probability : ë°˜í™˜ëœ ê²°ê³¼ê°’ì´ ì¶©ëŒë  ê°€ëŠ¥ì„±ì´ ì‚¬ì‹¤ìƒ ì—†ë‹¤. ì¦‰, ì™„ë²½í•œ 1:1 ëŒ€ì¹­ì€ ì•„ë‹ˆì§€ë§Œ, ì´ì— ë§¤ìš° ê·¼ì‚¬í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nhashì˜ ì „ë°˜ì ì¸ ì„¤ëª…ì€ ì—¬ê¸°ì„œ ë‹¤ë£¨ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì´ì •ë„ë§Œ ê¸°ì–µí•´ë‘ì‹œë©´ ë©ë‹ˆë‹¤. ì—­ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—, ëŒ€ê²Œ ë°ì´í„°ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” í˜•íƒœë¡œ ì €ì¥í•˜ê³ ì í•˜ëŠ” ê²½ìš°ì— ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ MD-5, SHA-1, SHA-2(SHA-256, SHA-512, ...)ê°€ ìˆìŠµë‹ˆë‹¤.\n\nhashëŠ” ëŒ€ê²Œì˜ ê²½ìš° ë§¤ìš° ì œëŒ€ë¡œ ì˜ ë™ì‘í•˜ì§€ë§Œ, collisionì— ì˜í•´ì„œ ë§ê°€ì§€ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë³´ì•ˆí•˜ê¸° ìœ„í•´ì„œ ê³„ì†í•´ì„œ ìƒˆë¡œìš´ ë°©ë²•ë“¤ì´ ê³ ì•ˆ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, Bitcoinì—ì„œëŠ” SHA256 ì´í›„ì— ì´ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ripemd160ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ Hash160ì´ë¼ê³  í•˜ê³ , SHA256ì„ ì—°ë‹¬ì•„ì„œ ë‘ ë²ˆ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ Hash256ì´ë¼ê³  í•©ë‹ˆë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë‹¤ì‹œí”¼, Hash160ì€ ê²°ê³¼ê°’ì´ 160bits(20bytes), SHA256ì€ 256bits(32bytes)ì…ë‹ˆë‹¤.\n\n### 6. Varint\n\nVariable + intì˜ í•©ì„±ì–´ë¡œ variable lengthë¡œ integer dataë¥¼ serializationí•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•©ë‹ˆë‹¤. ìµœëŒ€ ìˆ˜ì˜ ë²”ìœ„ëŠ” $2^{64} - 1$ê¹Œì§€ í‘œí˜„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§¤ìš° ìœ ìš©í•˜ë©°, ë¶ˆí•„ìš”í•œ ë°ì´í„°ì˜ ì „ì†¡ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚´ìš© ìì²´ëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤.\n\n1. í•´ë‹¹ ìˆ˜ê°€ 253ë³´ë‹¤ ì‘ë‹¤ë©´ 1 byteë§Œ ì´ìš©í•´ì„œ ë°”ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n2. ê·¸ë ‡ì§€ ì•Šê³ , í•´ë‹¹ ìˆ˜ê°€ 2^16 - 1 ë³´ë‹¤ ì‘ë‹¤ë©´, 253(0xfd)ë¥¼ prefixë¡œ ë§¨ ì•ì— ë¶™ì´ê³ , 2 byteë¥¼ ì´ìš©í•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n3. ê·¸ë ‡ì§€ ì•Šê³ , í•´ë‹¹ ìˆ˜ê°€ 2^32 - 1 ë³´ë‹¤ ì‘ë‹¤ë©´, 254(0xfe)ë¥¼ prefixë¡œ ë§¨ ì•ì— ë¶™ì´ê³ , 4 byteë¥¼ ì´ìš©í•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n4. ê·¸ë ‡ì§€ ì•Šê³ , í•´ë‹¹ ìˆ˜ê°€ 2^64 - 1 ë³´ë‹¤ ì‘ë‹¤ë©´, 255(0xff)ë¥¼ prefixë¡œ ë§¨ ì•ì— ë¶™ì´ê³ , 8 byteë¥¼ ì´ìš©í•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n\nì¦‰, 0ìœ¼ë¡œ ì•ì— ë‚¨ëŠ” byteë¥¼ ë³´ë‚´ëŠ” ì–‘ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë³€ìˆ˜ ìƒíƒœì˜ integerë¥¼ ì „ì†¡í•  ë•Œ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ Bitcoinì—ì„œ Serializationë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n### 1. Public Key\n\nê¸°ë³¸ì ìœ¼ë¡œ Public keyëŠ” ëª¨ë‘ì—ê²Œ ê³µê°œë˜ì–´ì•¼ í•˜ëŠ” ì •ë³´ ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë¶„ë°°í•˜ëŠ” ë¬¸ì œ ì—­ì‹œ ì¤‘ìš”í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Bitcoinì—ì„œëŠ” ì• ì„œ ì‚´í´ë³´ì•˜ë˜, SEC, Base58ë¥¼ ì´ìš©í•˜ë©°, í•„ìš”ì— ë”°ë¼ì„œÂ hash160ì„ ì´ìš©í•´ì„œ ë‚´ìš©ì„ ê°ì¶”ê¸°ë„ í•©ë‹ˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ, SECì™€ Base58ì„ ì´ìš©í•˜ì—¬, ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ì´ìœ ëŠ” í›„ì— Public Key ì—­ì‹œ ì‚¬ëŒë“¤ì—ê²Œ ì‰½ê²Œ ë…¸ì¶œì´ ë˜ëŠ”ë°, ì´ë¥¼ ì‰½ê²Œ ì‚¬ëŒë“¤ì´ ì•Œì•„ë³¼ ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•¨ì´ë©°, hash160ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” Public Keyë¥¼ ê°ì¶”ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. ì´ ë§ì´ ì´ìƒí•˜ê²Œ ë“¤ë¦´ ìˆ˜ ìˆëŠ”ë°, Public keyê°€ Open ë˜ê³  ë°”ë¡œ ì‚¬ìš©ëœë‹¤ë©´, ë¬¸ì œê°€ ë˜ì§€ ì•Šì§€ë§Œ, Public Keyê°€ ê³µê°œë˜ê³  ì˜¤ëœ ì‹œê°„ì´ ì§€ë‚œë‹¤ë©´, ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìƒê¸°ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. (ë„ˆë¬´ë‚˜ ì˜¤ë«ë™ì•ˆ ë…¸ì¶œëœë‹¤ë©´, private keyê°€ ê²°êµ­ì€ í•´ë…ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.) ì´ëŠ” ë°”ë¡œ ë‹¤ìŒ chapterì—ì„œ ë” ì•Œì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 2. Signature\n\nSignature ë°©ì‹ ê°™ì€ ê²½ìš°ëŠ” í‘œì¤€ì²˜ëŸ¼ ë„“ê²Œ ì‚¬ìš©ë˜ëŠ” DERì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n### 3. Private Key\n\nPrivate keyë¥¼ ì „ì†¡í•œë‹¤ëŠ” ê²ƒì€ êµ‰ì¥í•œ ìœ„í—˜ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì´ë¥¼ ì „ì†¡í•´ì•¼í•  ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. usbì— ì €ì¥í•˜ê³  ì‹¶ë‹¤ê±°ë‚˜ ë³„ë„ì˜ softwareë¡œ ì˜®ê¸°ê³  ì‹¶ì€ ê²½ìš°ë„ ì¡´ì¬í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ìœ„í•œ Serialization Formatë„ ì¡´ì¬í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ë¥¼ WIF(Wallet Import Format)ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.\n\nì´ëŠ” ì´ë¦„ì—ì„œë¶€í„° ëŠê»´ì§€ë“¯ì´ Bitcoinì—ì„œ íŒŒìƒëœ standardë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ëŠ” Base58ë¡œ encodingëœë‹¤ëŠ” ì  ì •ë„ë§Œ ê¸°ì–µí•˜ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤.\n\në˜í•œ, ìœ„ì—ì„œëŠ” ë‹¤ë£¨ì§€ ì•Šì•˜ì§€ë§Œ, Bitcoin networkëŠ” ê°œë°œìš©(testnet)ê³¼ ì‹¤ì œ ì„œë¹„ìŠ¤ìš©(mainnet)ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—, ì´ë¥¼ êµ¬ë¶„í•˜ëŠ” êµ¬ë¶„ìë¥¼ ê° serialization ì•ì— í‘œì‹œí•˜ëŠ” ê²ƒì„ ì›ì¹™ìœ¼ë¡œ í•©ë‹ˆë‹¤.\n\n- mainnet = 0x80\n- testnet = 0xef\n\n### 4. Number of data\n\nbitcoin ìƒì—ì„œë„ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë°, ë§Œì•½ í•´ë‹¹ ë°ì´í„°ì˜ ê°¯ìˆ˜ê°€ ì •í•´ì ¸ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë•Œì— ë”°ë¼ì„œ ë³€ê²½ë˜ëŠ” ê²½ìš°ì—ëŠ” ìœ„ì—ì„œ ì œì‹œí•œ Varintë¥¼ ì‚¬ìš©í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ë°”ë¡œ ë‹¤ìŒ Chapterì—ì„œ ì•Œì•„ë³¼ Transaction ë‚´ë¶€ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ì „ ê¸€ê³¼ ë™ì¼í•˜ê²Œ êµ¬í˜„ ì‚¬í•­ì€ githubì— ì •ì˜í•´ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n","slug":"bitcoin-2","date":"2022-03-18 14:51","title":"[Bitcoin] 2. Serialization","category":"Tech","tags":["BlockChain","Bitcoin"],"thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Intro\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.**Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” Bitcoinì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì „ë‹¬ë˜ë©°, Bitcoinì„ ì´ìš©í•œ ê±°ë˜ëŠ” ì–´ë–»ê²Œ ìˆ˜í–‰ë˜ëŠ”ì§€ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ìœ„í•´ Bitcoinì—ì„œ êµ¬ì¶•í•œ Scriptë¼ëŠ” languageë¥¼ ì†Œê°œí•˜ê³  ì—¬ëŸ¬ ì¸ì¦ ë°©ì‹ì„ ì†Œê°œí•©ë‹ˆë‹¤.**\n\n---\n\n### 1. Transaction\n\nTransactionì€ Bitcoinì˜ ê½ƒì´ë¼ê³  í‘œí˜„í•  ìˆ˜ ìˆì„ ì •ë„ë¡œ ê°€ì¥ ì¤‘ìš”í•œ ìœ„ì¹˜ë¥¼ ì°¨ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•ì„œ ë³´ì•˜ë˜, Signature, Serialization ì—­ì‹œ ì´ë¥¼ ìœ„í•œ í† ëŒ€ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤. ìš°ì„  Transactionì´ ë¬´ì—‡ì¸ì§€ì— ëŒ€í•´ì„œë¶€í„° ì•Œì•„ë´…ì‹œë‹¤.\n\nTransactionì˜ ëœ»ì„ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ë©´, ê±°ë˜ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **Bitcoin system ìƒì—ì„œëŠ”, Bitcoinì„ ëˆ„êµ°ê°€ì—ê²Œ ì „ì†¡í•˜ëŠ” í–‰ìœ„ë¥¼ Transactionì´ë¼ê³  ì •ì˜í•©ë‹ˆë‹¤.** Bitcoin ìƒì—ì„œ Transactionì€ ì—¬ëŸ¬ **íŠ¹ì´í•œ ì†ì„±**ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ Bitcoinì„ ì´í•´í•˜ëŠ” ê¸°ë°˜ì´ ë  ê²ƒì…ë‹ˆë‹¤. (ì•„ë˜ íŠ¹ì§•ì€ ì €ì˜ ì£¼ê´€ì ì¸ ìƒê°ì„ ë‹´ì€ ê²ƒì…ë‹ˆë‹¤. ë” ë§ì€ íŠ¹ì§•ì´ ìˆì§€ë§Œ, í•´ë‹¹ chapterì—ì„œ ì„¤ëª…í•  ë‚´ìš©ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒ ë‚´ìš©ì„ ì¼ë‹¨ ë¨¸ë¦¿ì†ì— ìƒˆê¸°ê³  ê°€ë„ë¡ í•©ì‹œë‹¤.)\n\n#### 1-1. íŠ¹ì§•\n\n1. **ê³µê°œì„± (Public)** : ëª¨ë“  Transactionì€ ê³µìœ ë©ë‹ˆë‹¤. ëˆ„êµ¬ë‚˜ ì›í•œë‹¤ë©´, ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n2. **ì—°ì†ì„± (Continuity)** : coinbaseì—ì„œ ì§ì ‘ ìƒì„±í•œ Transactionì„ ì œì™¸í•˜ê³ ëŠ” ëª¨ë“  Transactionì€ ì´ì „ Transactionì— ì˜ì¡´í•˜ì—¬ ì •ì˜ë©ë‹ˆë‹¤. ë˜í•œ, í•´ë‹¹ chapterì—ì„œëŠ” coinbaseì—ì„œ ìƒì„±ëœ Transactionì—ì„œëŠ” ê³ ë ¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì‹¤ìƒí™œì—ì„œ ìƒê°í•´ë³´ë©´, ê±°ë˜ë¼ëŠ” ê²ƒë„ ì€í–‰ì—ì„œ ì§ì ‘ ì „ë‹¬ë°›ì€ ëˆì´ ì•„ë‹ˆë¼ë©´, ëª¨ë‘ ë‹¤ë¥¸ ì‚¬ëŒê³¼ì˜ ê±°ë˜ë¥¼ í†µí•´ì„œ ìƒì„±ë˜ëŠ” ê²ƒì´ë¯€ë¡œ ë‹¹ì—°í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)\n3. **ì¼íšŒì„± (One time)** : í•˜ë‚˜ì˜ Transactionì´ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¨ í•œ ë²ˆë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. (Transactionì€ outputì„ ì—¬ëŸ¬ ê°œ ê°€ì§€ë¯€ë¡œ, ì´ë“¤ì´ ê° ê° ì‚¬ìš©ë  ìˆ˜ëŠ” ìˆì–´ë„, ê°™ì€ Transactionì˜ ê°™ì€ outputì€ ë‹¨ í•œ ë²ˆë§Œ ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì”ëˆì´ ë°œìƒí•œë‹¤ë©´, Transactionì— ë‹¤ì‹œ ìì‹ ì—ê²Œ ë³´ë‚´ëŠ” outputì„ ìƒì„±í•©ë‹ˆë‹¤.)\n4. **ìµëª…ì„± (Anonymous)** : í•´ë‹¹ Transactionì˜ outputì„ ì‚¬ìš©í•  ì‚¬ëŒì„ ëª…ì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, ëˆ„êµ¬ë‚˜ í•´ë‹¹ Transaction outputì˜ ì†Œìœ ê¶Œì„ ì£¼ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì‹¤ì œ ì„¸ìƒì—ì„œ ëˆ„ê°€ ëˆ„êµ¬ì—ê²Œ ë³´ë‚´ëŠ” ê²ƒì¸ì§€ëŠ” ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì›í•œë‹¤ë©´, ê±°ë˜ addressë¥¼ ê³„ì† ë°”ê¿€ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ë ‡ê²Œ ê³„ì† ë°”ê¾¸ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê¸°ë„ í•©ë‹ˆë‹¤.)\n\nTransactionì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” Bitcoinì„ ë°›ì„ ìˆ˜ë„ ìˆê³ , ì „ë‹¬í•  ìˆ˜ë„ ìˆìœ¼ë©°, í•´ë‹¹ Bitcoinì´ ìì‹ ì˜ ì†Œìœ ë¼ëŠ” ê²ƒì„ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në˜í•œ, ê¸°ì–µí•´ë‘ì–´ì•¼ í•  ì ì€ Transactionì˜ Outputì€ Bitcoinì„ í¬í•¨í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¸°ì–µí•©ì‹œë‹¤. ê·¸ë¦¬ê³ , ëª¨ë“  Bitcoinì€ Transactionì— ì˜í•´ì„œ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ê²ƒì´ ì–´ë–»ê²Œ ê°€ëŠ¥í•œì§€ Transactionì˜ **êµ¬ì„± ìš”ì†Œ**ë¥¼ ë¨¼ì € ì‚´í´ë³´ê³  ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤.\n\n#### 1-2. êµ¬ì„±ìš”ì†Œ\n\n1. **Version**Â : Transactionì˜ versionì´ ì¡´ì¬í•©ë‹ˆë‹¤. Bitcoin ìì²´ê°€ ê³„ì†í•´ì„œ ë°œì „í•´ì™”ê¸° ë•Œë¬¸ì—, í•˜ë‚˜ì˜ versionìœ¼ë¡œ ê³ ì •ë˜ì–´ ìˆì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ëŒ€ê²ŒëŠ” 1ì´ì§€ë§Œ, í•„ìš”ì— ë”°ë¼ ë‹¤ë¥¸ versionì„ ì¨ì•¼ í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.\n2. **Outputs**Â : ì—¬ëŸ¬ ê°œì˜ outputì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ê° outputì€ ë‹¤ìŒê³¼ ê°™ì€ ê°’ì„ í¬í•¨í•©ë‹ˆë‹¤.\n   1. **amount** : í•´ë‹¹ outputì´ ê°€ì§ˆ bitcoinì˜ ì–‘ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n   2. **ScriptPubKey** : í•´ë‹¹ outputì´ í›„ì— ì‚¬ìš©ë  ë•Œ, ì •ë‹¹í•œ ê¶Œí•œì´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ë‹¨ì´ ë©ë‹ˆë‹¤. ë§ˆì¹˜ ê¸ˆê³ ì˜ ì ê¸ˆ ì¥ì¹˜ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì–´ë–»ê²Œ ì ê·¸ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ë°‘ì—ì„œ Script partì—ì„œ ì„¤ëª…í•©ë‹ˆë‹¤.\n3. **Inputs**Â : í•˜ë‚˜ì˜ inputì€ ì´ì „ Transaction ì¤‘ í•˜ë‚˜ì˜ outputì„ ê°€ë¥´í‚¤ê³  ìˆìœ¼ë©°, ì´ë¥¼ ì—¬ëŸ¬ ê°œ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ê° inputì€ ë‘ ê°€ì§€ ê¸°ëŠ¥ì„ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì²«ì§¸ë¡œ, **íŠ¹ì • Transactionì˜ í•˜ë‚˜ì˜ outputì„ ì‹ë³„**í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” **Transactionì´ ìì‹ ì˜ ê²ƒì„ì„ ì¦ëª…**í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n   1. **PrevTxId** : ì´ì „ Transactionì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ê°’ì…ë‹ˆë‹¤.\n   2. **PrevTxIndex** : ì´ì „ Transactionì˜ output ì¤‘ í•˜ë‚˜ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ ê°’ì…ë‹ˆë‹¤.\n   3. **ScriptSig**Â : í•´ë‹¹ outputì´ ìì‹ ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ì„ì„ ì¦ëª…í•  ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ì…ë‹ˆë‹¤. ë§ˆì¹˜ ê¸ˆê³ ì˜ ì—´ì‡ ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n   4. **Sequence** : ì´ˆê¸°ì— Bitcoin ì„¤ê³„ ì‹œì—ëŠ” ë™ì‹œì— ì„œë¡œ ê°„ì— ë„ˆë¬´ ë§ì€ Transactionì´ ìƒê¸°ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œ, ì—¬ëŸ¬ Transactionì„ í•˜ë‚˜ì˜ Transactionìœ¼ë¡œ í†µí•©ì‹œí‚¤ê¸°ë¥¼ ì›í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê·¸ë•Œ í•´ë‹¹ ê±°ë˜ê°€ ëª‡ ë²ˆì§¸ ì¸ì§€ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©ë˜ì—ˆìœ¼ë‚˜ í˜„ì¬ì—ëŠ” ë³´ì•ˆìƒì˜ ì·¨ì•½ì ì´ ë°œê²¬ë˜ì–´ ì‚¬ìš©ë˜ê³  ìˆì§€ ì•Šê¸°ì—, 4 bytes little endianìœ¼ë¡œ ìµœëŒ“ê°’(0xffffffff)ìœ¼ë¡œ í‘œê¸°í•©ë‹ˆë‹¤.\n4. **Locktime**Â : ìœ„ì—ì„œ ì„¤ëª…í•œ Sequence ì²˜ëŸ¼, Transactionì„ ì–´ëŠ ì •ë„ ì‹œê°„ì´ ë  ë•Œê¹Œì§€ Transactionì˜ inputìœ¼ë¡œì¨ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ë§‰ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ chapterì—ì„œ ì„¤ëª…í•  Blockì˜ heightê°€ ë  ìˆ˜ë„ ìˆê³ , Unix timestampë¥¼ í†µí•´ì„œ ì‹œê°„ì„ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ë˜í•œ, 4 bytesë¥¼ í†µí•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n\n![transaction](/images/transaction.jpeg)\n\n#### 1-3. ì¶”ê°€ ê°œë…\n\n1. **Fee**  \n  **ì¼ëª… ê±°ë˜ ìˆ˜ìˆ˜ë£Œ**ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ê²Œ, ì´ ê±°ë˜ë¥¼ í™•ì¸í•´ì£¼ëŠ” minerë“¤ì—ê²Œ ì£¼ì–´ì§€ëŠ” ë³´ìƒìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì†¡ì‹ ìëŠ” ê±°ë˜ë¥¼ í•  ë•Œ, ì´ë¥¼ ì¸ì¦ë°›ê¸° ìœ„í•´ì„œ ì´ë¥¼ í™•ì¸í•´ì¤„ ì—¬ëŸ¬ ì œ3ìë“¤ì—ê²Œ ì¼ì • ìˆ˜ìˆ˜ë£Œë¥¼ ì œì‹œí•©ë‹ˆë‹¤. ë¹ ë¥¸ ê±°ë˜ë¥¼ ì›í•œë‹¤ë©´, ë” ë§ì€ ë¹„ìš©ì„, ì²œì²œíˆ í•´ë„ ìƒê´€ì´ ì—†ë‹¤ë©´, ì ì€ ë¹„ìš©ì„ íˆ¬ìí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n2. **UTXO(Unspent Transaction Output) Set**  \n  ì‚¬ìš©í•˜ì§€ ì•Šì€ Transaction Outputì˜ ì§‘í•©ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆì–´ì•¼ì§€ë§Œ, ì™œëƒí•˜ë©´, ë‘ ë²ˆ ì´ìƒ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒ ìì²´ë¥¼ ë§‰ì•„ì•¼ë§Œ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ëª¨ë“  UTXOë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ ê³„ì†í•´ì„œ ì¶”ì í•˜ëŠ” ë…¸ë“œë¥¼ Full nodesë¼ê³  ë¶€ë¥´ë©°, ì´ê²ƒì´ ìˆì–´ì•¼ì§€ë§Œ Bitcoin ê±°ë˜ë¥¼ ë¹ ë¥´ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nTransactionì´ë¼ëŠ” ê²ƒì€ ê²°êµ­ Bitcoinì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì´ê²ƒì´ ìˆì–´ì•¼ë§Œ ìš°ë¦¬ëŠ” ì‹¤ì„¸ê³„ì— ìˆëŠ” ë¬¼ê±´ì„ ì‚¬ëŠ” ëª…ë¶„ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ°ë° ì—¬ê¸°ì„œ, ì˜ë¬¸ì ì´ ê°€ì¥ í¬ê²Œ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ë­”ê°€ ê±°ë˜ë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” Transactionì„ í†µí•´ì„œ Bitcoinì„ ë³´ë‚´ì•¼ í•˜ëŠ” ê²ƒì€ ì´í•´í–ˆëŠ”ë°, ë‚´ê°€ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” Transactionì´ ëª¨ë‘ì—ê²Œ ê³µê°œëœë‹¤ê³  í–ˆëŠ”ë°, ì´ê²Œ ìì‹ ì˜ ê²ƒì´ë¼ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ì¦ëª…í•  ìˆ˜ ìˆì„ê¹Œìš”? ì´ ë°©ë²•ìœ¼ë¡œ ê³ ì•ˆëœ ê²ƒì´ Scriptì…ë‹ˆë‹¤. ì´ì— ëŒ€í•´ì„œ ì‚´í´ë´…ì‹œë‹¤.\n\n![transaction-relation](/images/transaction-relation.jpeg)\n\n### 2. Script\n\nBitcoin(Transactionì˜ Output)ì„ ì „ë‹¬í•  ë•Œ, ì´ë¥¼ ëˆ„êµ¬ë‚˜ ì“¸ ìˆ˜ ì—†ê²Œ **ì ê·¸ëŠ” ê³¼ì •(lock)**ì´ í•„ìš”í•˜ê³ , í›„ì—ëŠ” ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²ŒÂ **í•´ì œ ê³¼ì •(unlock)**ì´ í•„ìš”í•©ë‹ˆë‹¤. Bitcoinì—ì„œëŠ” ì´ë¥¼ ìœ„í•´ì„œ Scriptë¼ëŠ” ê²ƒì„ ê³ ì•ˆí•´ëƒˆìŠµë‹ˆë‹¤. ScriptëŠ” ì™„ì„±ëœ í˜•íƒœë¡œ ì¡´ì¬í•  ë•Œ, í•´ë‹¹ outputì˜ ì†Œìœ ê°€ ìì‹ ì´ë¼ëŠ” ê²ƒì„ **ëˆ„êµ¬ë‚˜ ì¸ì •í•  ìˆ˜ ìˆëŠ” ë¬¸ì„œ**ê°€ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë¥¼ ë°˜ìœ¼ë¡œ ì˜ë¼ì„œ, í•˜ë‚˜ëŠ” output ìª½ì— ë¶™ì—¬ë‘ê³ (**ScriptPubkey**), ë‚˜ë¨¸ì§€ í•˜ë‚˜(**ScriptSig**)ëŠ” ìì‹ ì´ ì†Œìœ í•˜ê³  ìˆë‹¤ê°€ ì‚¬ìš©í•  ë•Œ, ì´ ì¡°ê°ì„ ë“¤ì´ ë°€ì–´ì„œ ìì‹ ì„ì„ ì¸ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nÂ ê·¸ë ‡ë‹¤ë©´, Scriptë¼ëŠ” ê²ƒì´ ë„ëŒ€ì²´ ë¬´ì—‡ì´ê¸¸ë˜ **ëˆ„êµ¬ë‚˜ ì¸ì •í•  ìˆ˜ ìˆëŠ” ë¬¸ì„œ**ê°€ ë  ìˆ˜ ìˆëŠ” ê²ƒì¼ê¹Œìš”? ì´ëŠ” Scriptì˜ í•´ì„ë²•ì„ ì•Œë©´, ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n#### 2-1. Script (language)\n\nScriptë¼ê³  ì“°ê¸°ë„ í•˜ê³ , Script languageë¼ê³ ë„ ë¶€ë¥´ëŠ” í•´ë‹¹ ì–¸ì–´ëŠ”Â ì˜ì–´ ê°™ì€ ì‚¬ëŒì˜ ì–¸ì–´ë¡œ ì‘ì„±ë˜ì§€ë„ ì•Šê³ , pythonì´ë‚˜ cì™€ ê°™ì€ **turning complete(=ëª¨ë“  ê³„ì‚° ê°€ëŠ¥í•œ ë¬¸ì œë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ”**, ëŒ€ê²ŒëŠ” loop, condition, memory ì œì–´ ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ”ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.**)**í•œ programming language ë¡œ ì‘ì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì´ëŸ¬í•œ ScriptëŠ” **íš¨ìœ¨**ì„ ìœ„í•´ì„œ ë„ˆë¬´ ë³µì¡í•œ ë¡œì§ì„ ê°€ì ¸ì„œë„ ì•ˆë˜ê³ , ë³´ì•ˆìƒì˜ **ì·¨ì•½ì **ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ ìì²´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, Bitcoinì˜ Scriptì—ì„œëŠ” loopë¬¸ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” í˜•íƒœë¥¼ ê°€ì§‘ë‹ˆë‹¤.\n\n#### 2-2. êµ¬ì„±ìš”ì†Œ\n\nScriptë¥¼ í•´ì„í•˜ê¸° ìœ„í•´ì„œëŠ”, êµ¬ì„±ìš”ì†Œë¥¼ ë¨¼ì € ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ê° êµ¬ì„±ìš”ì†Œì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n1. **Element** : ì¼ë°˜ programming languageì—ì„œ variableì´ í•˜ëŠ” ì—­í• ì„ ë§¡ìŠµë‹ˆë‹¤.\n2. **Operation** : ì¼ë°˜ programming languageì—ì„œ functionì˜ ì—­í• ì„ ë§¡ìŠµë‹ˆë‹¤. ì´ëŠ” elementë¥¼ ë°›ì•„ì„œ ë™ì‘ì„ ìˆ˜í–‰í•˜ì—¬, Stackì˜ ë³€í™”ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤. ë§Œì•½, ì¤‘ê°„ì˜ Operationì˜ ë™ì‘ì´ ì‹¤íŒ¨í•œë‹¤ë©´, í•´ë‹¹ Scriptì˜ ì‹¤í–‰ì€ ì¢…ë£Œë˜ê³ , íƒ€ë‹¹í•˜ì§€ ì•Šì€ Scriptë¼ëŠ” ê²°ë¡ ì„ ë‚´ë†“ìŠµë‹ˆë‹¤.\n3. **Stack** : ì¼ë°˜ programming languageì™€ëŠ” ë‹¤ë¥´ì§€ë§Œ, í›„ìœ„ í‘œí˜„ë²•ì— ê¸°ë°˜í•œ languageì—ì„œëŠ” í”íˆ ë³¼ ìˆ˜ ìˆëŠ” íŠ¹ì§•ì…ë‹ˆë‹¤. elementê°€ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ê³µê°„ìœ¼ë¡œ operationì€ stack ì•ˆì— ìˆëŠ” elementë§Œì„ ì†Œë¹„í•˜ì—¬ ë™ì‘í•©ë‹ˆë‹¤.\n\nì „ì²´ ì½”ë“œëŠ” ìœ„ì—ì„œë¶€í„° ì‹¤í–‰ë˜ë©´ì„œ, ë§ˆì¹˜ í•˜ë‚˜ì˜ stackì²˜ëŸ¼ êµ¬ì„±ë˜ë©°, í›„ìœ„ í‘œê¸°ì‹ì²˜ëŸ¼ ë™ì‘í•œë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. í›„ìœ„ í‘œê¸°ì‹ì—ì„œëŠ” elementê°€ ë¨¼ì € ë‚˜ì˜¤ê³  ì´ë¥¼ ê¸°ì–µí•´ë‘ê³  ìˆë‹¤ê°€ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. (ë”°ë¼ì„œ, stackì´ í•„ìš”í•œ ê²ƒì…ë‹ˆë‹¤.) ë”°ë¼ì„œ, ìœ„ì—ì„œ ë¶€í„° ì‹¤í–‰í•˜ë©´ì„œ elementê°€ ë‚˜ì˜¨ë‹¤ë©´, stackì— ìŒ“ì•„ë‘ê³ , operationì´ ë‚˜ì˜¨ë‹¤ë©´ stackì— ìˆëŠ” ë°ì´í„°ë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n#### 2-3. Operationì˜ ì¢…ë¥˜\n\nì• ì„œ ScriptëŠ” turning completeí•œ ì–¸ì–´ê°€ ì•„ë‹ˆë¼ê³  í–ˆìœ¼ë¯€ë¡œ, operationì—ëŠ” loopë¥¼ í¬í•¨í•˜ì§€ ì•Šê±°ë‚˜ í˜„ì¬ëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ, ë³´ì•ˆìƒ ì·¨ì•½ì ì´ ë°í˜€ì§„ Operation ì—­ì‹œ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” Scriptì˜ íŠ¹ì„±ì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ì˜ Operationì„ ì„¤ëª…í•˜ê³  ë™ì‘ ë°©ì‹ì„ ì„¤ëª…í•©ë‹ˆë‹¤.\n\n- **OP\\_DUP** : stackì— ìˆëŠ” element ì¤‘ ê°€ì¥ ì•ì— ìˆëŠ” elementë¥¼ ë³µì‚¬í•´ì„œ stackì— ì¶”ê°€í•©ë‹ˆë‹¤.\n- **OP\\_x**(number) : stackì— x elementë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë•Œ, xëŠ” 0 ~ 16ê¹Œì§€ì˜ ìˆ˜ë¥¼ ëœ»í•©ë‹ˆë‹¤.\n- **OP\\_PUSHDATAx** : ë¨¼ì € x byteì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë°›ìŠµë‹ˆë‹¤. ì´ëŠ” ì´ì œ stackì— ì…ë ¥í•  ë°ì´í„°ì˜ í¬ê¸°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ í›„ ì…ë ¥ë°›ì€ ê¸¸ì´ë§Œí¼ì„ ì½ì–´ ë“¤ì¸ í›„ì— ì´ë¥¼ stackì— ì¶”ê°€í•©ë‹ˆë‹¤. xëŠ” 1, 2,4ê°€ ì¡´ì¬í•˜ì§€ë§Œ, stackì— ì…ë ¥í•˜ëŠ” ë°ì´í„°ëŠ” ìµœëŒ€ 520 bytes ê¹Œì§€ë§Œ í—ˆìš©í•©ë‹ˆë‹¤.\n- **OP\\_VERIFY** : stackì—ì„œ í•˜ë‚˜ì˜ ê°’ì„ êº¼ë‚¸ í›„, 1ì¸ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n- **OP\\_EQUAL** : stackì—ì„œ ë‘ ê°œì˜ ê°’ì„ êº¼ë‚¸ í›„, ì„œë¡œ ê°™ì€ì§€ë¥¼ í™•ì¸í•˜ê³ , ê°™ë‹¤ë©´ 1 ë‹¤ë¥´ë‹¤ë©´, 0ì„ ì¶”ê°€í•©ë‹ˆë‹¤.\n- **OP\\_CHECKSIG** : stackì—ì„œ ë‘ ê°œì˜ ê°’ì„ êº¼ë‚¸ í›„, ì²« ë²ˆì§¸ elementëŠ” PubKey ê·¸ë¦¬ê³ , ë‘ ë²ˆì§¸ elementëŠ” Signatureë¡œ í•˜ì—¬ ECDSAë¥¼ ë§Œì¡±ì‹œí‚¤ëŠ”ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n- **OP\\_MULTI\\_CHECK\\_SIG** : ì´ëŠ” stackì— PubKeyì™€ Signatureê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ, ì´ë¥¼ ëª¨ë‘ í™•ì¸í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.\n- **OP\\_HASH160, OP\\_SHA1, OP\\_SHA256, OP\\_HASH256** : stackì˜ í•˜ë‚˜ì˜ elementë¥¼ êº¼ë‚¸ í›„, hashí•˜ì—¬ ë‹¤ì‹œ stackì— ì¶”ê°€í•©ë‹ˆë‹¤.\n\nì¶”ê°€ì ì¸ Operationì— ëŒ€í•´ì„œë„ ê¶ê¸ˆí•˜ë‹¤ë©´, ì•„ë˜ linkë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\n\n[ğŸ”— Script - Bitcoin Wiki](https://en.bitcoin.it/wiki/Script)\n\n#### **2-3. Goal**\n\nScriptì˜ ìµœì¢… ëª©ì ì€Â **Scriptì˜ ëª¨ë“  êµ¬ì„±ìš”ì†Œë¥¼ ì‹¤í–‰ì‹œì¼œì„œ, ì¤‘ê°„ì— operationì˜ ì—ëŸ¬ ì—†ì´ stackì— 1ì´ë¼ëŠ” ìˆ«ìë¥¼ ë‚¨ê¸°ëŠ” ê²ƒì…ë‹ˆë‹¤.**Â ë”°ë¼ì„œ, í•´ì„ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°ëŠ” ë‘ ê°€ì§€ ì…ë‹ˆë‹¤. Scriptì˜ í•´ì„ ë„ì¤‘ì— operationì´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼°ê±°ë‚˜, ëª¨ë“  Scriptë¥¼ í•´ì„í–ˆìŒì—ë„ stackì— 1ì´ ì•„ë‹Œ ê°’ì´ ìˆê±°ë‚˜ ì•„ë¬´ ê°’ë„ ì—†ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.\n\nì•„ê¹Œ ë§í–ˆë“¯ì´ ìš°ë¦¬ëŠ” ì´ Scriptë¥¼ ë‘ ê°œì˜ ì¡°ê°(ScriptPubKey, ScriptSig)ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤. ì¦‰, ì½”ë“œë¥¼ ì¤‘ê°„ì— íˆ­ ì˜ë¼ë²„ë¦°ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ, í›„ë°˜ë¶€ì— í•´ë‹¹í•˜ëŠ” ë‚´ìš©(ScriptPubKey)ì„ Transactionì˜ Outputì— ë„£ì–´ì„œ ë³´ê´€í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ, ScriptPubKeyì— ì „ë°˜ë¶€ì— í•´ë‹¹í•˜ëŠ” ScriptSigë¥¼ ê°€ì§„ ì‚¬ëŒì´ ìˆë‹¤ë©´, ê·¸ ì‚¬ëŒì´ Transactionì˜ Outputì— ìˆëŠ” Bitcoinì„ í•´ë‹¹í•˜ëŠ” amountë§Œí¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n![transaction-script](/images/transaction-script.jpeg)\n\n#### 2-4. Example\n\nì´ì œ ScriptPubKeyê°€ ì£¼ì–´ì¡Œë‹¤ê³  ê°€ì •í•©ì‹œë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŠ” ë§ˆì¹˜ í•˜ë‚˜ì˜ ë¬¸ì œì²˜ëŸ¼ ëŠê»´ì§ˆ ìˆ˜ ìˆê³ , ìš°ë¦¬ëŠ” ì´ë¥¼ ë§Œì¡±í•˜ëŠ” ê°’ì„ ScriptSigì— ë„£ì–´ì„œ ë§Œë“¤ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.\n\n> **2-4-1. $x^2 + x = 6$ì„ ë§Œì¡±í•˜ëŠ” x ê°’ ë„£ê¸°**\n\nì™„ì„±ëœ Scriptì—ì„œ xì— ë¬´ì—‡ì´ ë“¤ì–´ê°€ë©´ ë ì§€ë¥¼ ì¶”ì¸¡í•´ë´…ì‹œë‹¤.\n\n![transaction-example-2-4-1](/images/transaction-example-2-4-1.png)\n\nê²°ë¡ ìƒ $x^2 + x = 6$ì„ ë§Œì¡±í•˜ëŠ” xê°’ì´ í•„ìš”í•˜ë¯€ë¡œ $ x = 2$ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\n> **2-4-2. SHA-1ì˜ collisionì„ ë°œìƒì‹œí‚¤ëŠ” ë‘ ê°œì˜ ê°’**\n\nì´ë²ˆì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ScriptPubKeyê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ScriptSigë¡œ ë­ê°€ ë“¤ì–´ê°€ì•¼ í• ì§€ë¥¼ ì¶”ì¸¡í•´ë´…ì‹œë‹¤.\n\n`ScriptPubKey`\n\n![transaction-example-2-4-2-goal](/images/transaction-example-2-4-2-goal.jpeg)\n\në‹¤ìŒê³¼ ê°™ì€ í˜•íƒœê°€ ì£¼ì–´ì§ˆ ë•Œ, ì´ë¥¼ ì—­ì—°ì‚°í•˜ì—¬ í•„ìš”ë¡œ í•˜ëŠ” ê°’ì´ ë¬´ì—‡ì¸ì§€ ì°¾ì•„ë‚˜ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![transaction-example-2-4-2](/images/transaction-example-2-4-2.png)\n\nê²°ë¡ ìƒ ë‹¤ìŒì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” h, kë¥¼ **ScriptSig**ë¡œ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.\n\n1. $h \\\\ne k$\n2. $sha1(h) = sha1(k)$\n\nì´ëŠ” SHA-1ì´ collisionì„ ë°œìƒí•˜ê²Œ í•˜ëŠ” ë‘ ê°œì˜ ê°’ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. (ì´ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ê°€ hashí•¨ìˆ˜ì˜ ì„±ëŠ¥ì„ í‘œì‹œí•˜ëŠ”ë° ê°€ì¥ í° ì§€í‘œê°€ ë©ë‹ˆë‹¤.)\n\nì´ì™€ ê°™ì€ í˜•íƒœë¡œ íŠ¹ì • ìˆ˜í•™ ë¬¸ì œ, ë˜ëŠ” hash collision ì˜ˆì‹œì— ëŒ€í•´ì„œ Bitcoinì„ í†µí•´ì„œ í˜„ìƒê¸ˆì„ ê±¸ê¸°ë„ í•œë‹¤ê³  í•©ë‹ˆë‹¤.\n\n#### 2-5. ì£¼ìš” Script\n\nìœ„ì˜ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì•˜ì§€ë§Œ, ì‚¬ì‹¤ ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ Scriptë¥¼ í‘œí˜„í•œë‹¤ë©´, ëˆ„êµ¬ë‚˜ í•´ë‹¹ Transactionì˜ Outputì•ˆì— ìˆëŠ” Bitcoinì„ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì´ì œ ë‚˜ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Transaction Outputì„ ë§Œë“¤ê¸° ìœ„í•œ ì£¼ìš” Script í˜•íƒœë¥¼ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n> **2-5-1. p2pk(Pay to PubKey)**\n\n**ScriptPubKey**ì—ëŠ” PubKeyì™€ OP\\_CHECKSIG ë‘ ê°œë¥¼ ë„£ì–´ë‘ê³ , **ScriptSig**ì— Signatureë§Œ ë„£ì–´ë‘ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ ë°©ì‹ ë•Œë¬¸ì—, Transaction Outputì— ìˆëŠ” ScriptPubKeyì˜ ì´ë¦„ì´ ì´ë ‡ê²Œ ë¶ˆë ¤ì§€ê³ , Transaction Inputì˜ ScriptSigì˜ ì´ë¦„ì´ ì •í•´ì§€ê²Œ ëœ ê²ƒì…ë‹ˆë‹¤.\n\n![transaction-p2pk](/images/transaction-p2pk.png)\n\n> **2-5-2. p2pkh(Pay to PubKey Hash)**\n\np2pkì—ì„œ ë¬¸ì œê°€ í•˜ë‚˜ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ê³µê°œí‚¤ê°€ ëª¨ë“  ì´ë“¤ì—ê²Œ ë³´ì¸ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì´ê²ƒì´ ì™œ ë¬¸ì œì¼ ìˆ˜ ìˆëƒê³  í•  ìˆ˜ ìˆì§€ë§Œ, í•´ë‹¹ ê±°ë˜ ìì²´ê°€ ëª¨ë‘ ê³µê°œë˜ê¸° ë•Œë¬¸ì— ê³µê°œí‚¤ë¥¼ ì—´ì–´ë‘ê³ , ê¸´ ì‹œê°„ ë™ì•ˆ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì–¸ì œ ê°€ëŠ” ë¬´ì‹í•˜ê²Œ í’€ì–´ë‚˜ê°€ëŠ” ê³¼ì •ì—ì„œ ë‹µì„ ì°¾ì•„ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ëŒ€ê²ŒëŠ” ê³µê°œí‚¤ì˜ ìœ íš¨ì‹œê°„ì„ ë‘ê³  í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, Transactionì˜ ìœ íš¨ê¸°ê°„ì„ ë‘˜ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, PubKeyë¥¼ ë°”ë¡œ ê³µê°œí•˜ì§€ ì•ŠëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¦„ì—ì„œë¶€í„° ëŠê»´ì§€ê² ì§€ë§Œ, **PubKeyì˜ hashë¥¼ ìˆ˜í–‰**í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ê²°ë¡ ì ìœ¼ë¡œ ê±°ë˜ë¥¼ ì‚¬ìš©í•  ë•Œ, outputì„ ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œ, pubkeyì™€ signatureë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. (ì—¬ê¸°ì„œ PubKeyì— hash160ì„ ìˆ˜í–‰í•˜ê³ , Base58ë¡œ encoding í•œ ê²ƒì„ addressë¼ê³  í•©ë‹ˆë‹¤.)\n\n`ScriptPubKey ì™€ ScriptSig`\n\n![transaction-p2pkh](/images/transaction-p2pkh.jpeg)\n\n`Scriptì˜ ì„±ê³µì ì¸ ë™ì‘ì˜ˆì‹œ 1`\n\n![transaction-p2pkh-2](/images/transaction-p2pkh-2.jpeg)\n\n`Scriptì˜ ì„±ê³µì ì¸ ë™ì‘ì˜ˆì‹œ 2`\n\n![transaction-p2pkh-3](/images/transaction-p2pkh-3.jpeg)\n\n> **2-5-3. p2psh (Pay to Script Hash)**\n\np2pshëŠ” ì—¬ëŸ¬ ê°œì˜ keyì™€ signatureë¥¼ ê°€ì§€ëŠ” ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ PubKeyë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” RedeemScriptë¼ëŠ” ê²ƒì„ Hash í•˜ì—¬ ScriptPubKeyì— ì¶”ê°€ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. RedeemScriptë¼ê³  ë¶ˆë¦¬ëŠ” ì´ìœ ëŠ” ì´ê²ƒì´ í›„ì— ë‹¤ì‹œ í•˜ë‚˜ì˜ Scriptë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë‚´ë¶€ì— ë“¤ì–´ê°€ëŠ” RedeemScriptëŠ” Serialization í•´ì„œ elementë¡œ ë„£ìŠµë‹ˆë‹¤.\n\n`ScriptPubKey, ScriptSig ê³¼ RedeemScript`\n\n![transaction-p2psh-1](/images/transaction-p2psh-1.jpeg)\n\n`Scriptì˜ ë™ì‘ ì˜ˆì‹œ - 1`\n\n![transaction-p2psh-2](/images/transaction-p2psh-2.jpeg)\n\n`Scriptì˜ ë™ì‘ ì˜ˆì‹œ - 2`\n\n![transaction-p2psh-3](/images/transaction-p2psh-3.jpeg)\n\n`Scriptì˜ ë™ì‘ ì˜ˆì‹œ - 3`\n\n![transaction-p2psh-4](/images/transaction-p2psh-4.jpeg)\n\n> **2-5-0. Signature ìƒì„±**\n\nì£¼ìš” Scriptë¥¼ ì•Œì•„ë³´ê¸° ì „ì— ë¹ íŠ¸ë¦° ë¶€ë¶„ì„ ë¨¼ì € ì±„ìš°ê³  ê°€ì•¼ í•©ë‹ˆë‹¤. ë°”ë¡œ, ì´ì „ì— ECDSAì—ì„œ ì‚¬ìš©í•˜ë˜ ë³€ìˆ˜ ì¤‘ í˜„ì¬ ëˆ„ë½ëœ ë³€ìˆ˜ë¥¼ ì±„ìš°ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ì „ì— ì‚´í´ë´¤ë“¯ì´ íŠ¹ì • dataì˜ ì†Œìœ ê°€ ìì‹ ì´ë¼ëŠ” ê²ƒì„ ì¸ì¦í•˜ê¸° ìœ„í•´ì„œ, ECDSAì—ì„œëŠ” ê³µê°œí•˜ëŠ” ë°ì´í„°ë¡œ Signatureì™€ dataì˜ hash ê°’ ê·¸ë¦¬ê³  Public Keyë¥¼ ì´ìš©í–ˆê³ , ê³µê°œí•˜ì§€ ì•Šê³ , ìì‹ ë§Œ ê°€ì§€ëŠ” ë°ì´í„°ë¡œ Private Keyë¼ëŠ” ê²ƒì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ëˆ„ë½ëœ ê²ƒì€ ë°”ë¡œ **dataì˜ hash ê°’**ê³¼ **Signatureì˜ ìƒì„±** ë°©ë²•ì…ë‹ˆë‹¤.(ì™œëƒí•˜ë©´, SignatureëŠ” dataì˜ hashê°’ì´ ì¡´ì¬í•´ì•¼ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.) ì´ëŠ” ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ëŠ” ì•Œì•„ë´…ì‹œë‹¤.\n\n1. í˜„ì¬ì˜ Transactionì—ì„œ ëª¨ë“  inputì˜ ScriptSigë¥¼ ë¹ˆ ê°’ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n2. ê·¸ë¦¬ê³ , ScriptSigë¥¼ ìƒì„±í•´ì•¼ í•˜ëŠ” inputì— ScriptSig ë¶€ë¶„ì—ë§Œ ì´ì „ Transactionì˜ ScriptPubKeyë¥¼ ëŒ€ì…í•©ë‹ˆë‹¤. (ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ì„œ ì´ë ‡ê²Œ ì¼ì§€ë§Œ, ì´ ë°©ë²•ë§Œ ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. ì´ëŸ° ë°©ë²•ì´ ëª‡ ê°œ ë” ìˆìœ¼ë©´, ì´ ë°©ë²•ì— ëŒ€í•œ ì‹ë³„ ê°’ì´ 4ë²ˆì—ì„œ í‘œì‹œë©ë‹ˆë‹¤.)\n3. ì´ë¥¼ ì´ì œ Serialization í•©ë‹ˆë‹¤.\n4. Hash ë°©ë²•ì— í•´ë‹¹í•˜ëŠ” dataì˜ ë§¨ ë’¤ì— 4 bytesë¡œ ì‚½ì…í•©ë‹ˆë‹¤.\n5. ê·¸ë¦¬ê³ , ì´ë¥¼ Hash í•©ë‹ˆë‹¤.\n6. ì´ë ‡ê²Œ ìƒì„±ëœ hash ê°’ì„ ì´ìš©í•´ì„œ Signatureë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\nì´ì œ, ìš°ë¦¬ëŠ” zì™€ signatureë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ Transactionì˜ ìƒì„±ìëŠ” signatureë¥¼ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, Transactionì„ ë³¼ ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ëª¨ë“  ì‚¬ëŒë“¤ë„ í•´ë‹¹ Transactionì´ íƒ€ë‹¹í•œì§€ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ì§€ Transactionì„ ìœ„ì™€ ê°™ì´ ë³€ê²½í•˜ì—¬ì„œ, zë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 3. Transaction Validation\n\nê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ëŠ” Transactionì´ ì–¸ì œ íƒ€ë‹¹í•˜ë‹¤ê³  ë§í•  ìˆ˜ ìˆì„ê¹Œìš”? ë°”ë¡œ ë‹¤ìŒ ì„¸ ê°€ì§€ë¥¼ ë§Œì¡±ì‹œì¼œì•¼ì§€ ìš°ë¦¬ëŠ” í•´ë‹¹ Transactionì´ íƒ€ë‹¹í•˜ë‹¤ê³  í•©ë‹ˆë‹¤.\n\n- ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” Transactionì˜ outputì´ ì§„ì§œ ì‚¬ìš©ëœ ì ì´ ì—†ëŠ”ì§€ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n  ì´ëŠ” ìœ„ì—ì„œ ì œì‹œí–ˆë˜ UTXOë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì§€ê¸ˆì€ ì´ ì •ë„ë¡œ ë°–ì— ì„¤ëª…í•  ìˆ˜ ì—†ì§€ë§Œ, ì´ëŠ” í›„ì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.\n- Transactionì˜ inputë“¤ë³´ë‹¤ outputë“¤ì´ ë” í° ê°’ì„ ë‚´ë³´ë‚´ì§€ëŠ” ì•Šì•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n  ì´ëŠ” ì´ì „ Transaction Outputì„ ëª¨ë‘ ë”í•œ ê°’ì´ í˜¹ì—¬ í˜„ì¬ Transactionì˜ Outputì˜ ì´í•©ë³´ë‹¤ í°ì§€ë¥¼ í™•ì¸í•˜ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ìœ„ì˜ ì§„ì§œ ì‚¬ìš© ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ì „ Transaction outputì˜ amountë„ ì•Œ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ëŠ” ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ScriptSig + ScriptPubKeyë¡œ ë§Œë“¤ì–´ì§„ ìµœì¢… Scriptê°€ íƒ€ë‹¹í•œì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n  ì´ëŠ” ìœ„ì—ì„œ ì§„í–‰í–ˆë˜ Scriptì˜ Checkë¥¼ í†µí•´ì„œ ìˆ˜í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\nì´ ëª¨ë“  ê³¼ì •ì„ í†µê³¼í–ˆì„ ë•Œ, ìš°ë¦¬ëŠ” í•´ë‹¹ Transactionì´ íƒ€ë‹¹í•˜ë‹¤ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 4. Transaction Creation\n\nì´ì œê¹Œì§€ì˜ ëª¨ë“  ê²ƒì„ ì •ë¦¬í•˜ì—¬, Transactionì˜ ìƒì„± ê³¼ì •ì„ ëª¨ë‘ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n1. Transactionì„ í†µí•´ Bitcoinì„ ë³´ë‚¼ ëŒ€ìƒì˜ PubKey ë˜ëŠ” address(PubKeyë¥¼ hash + Base58)ë¥¼ ë°›ì•„ì˜¤ê³ , ì–¼ë§ˆë‚˜ Bitcoinì„Â  ë³´ë‚¼ì§€(amount)ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.\n2. Transactionì˜ feeë¡œ ì–¼ë§ˆë‚˜ ì§€ì¶œí• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.\n3. Inputsê°€ ì‚¬ìš©í•˜ëŠ” ì´ì „ Transaction Outputsì˜ í•©ì´ (fee + ì§€ì¶œí•  Bitcoin) Outputsì˜ ì´í•©ë³´ë‹¤ í¬ë„ë¡ CTXOë¥¼ í•˜ë‚˜ ì´ìƒ ì„ íƒí•©ë‹ˆë‹¤. (ì´ ê³¼ì •ì—ì„œ CTXOê°€ ì •ë§ ì‚¬ìš©ëœ ê²ƒì´ ì•„ë‹Œ ê²ƒì¸ì§€ì— ëŒ€í•œ í™•ì¸ë„ ìˆ˜í–‰í•©ë‹ˆë‹¤.)\n4. CTXOê°€ ìì‹ ì˜ ê°’ì„ì„ ì¦ëª…í•  ìˆ˜ ìˆë„ë¡ Signatureë¥¼ ìƒì„±í•˜ê³ , (ì´ ê³¼ì •ì—ì„œ ë‹¹ì—°íˆ 2-5-0ì—ì„œ ì„¤ëª…ëœ ê³¼ì •ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.) ì´ì „ Transaction Outputì—ì„œ ì œì‹œí•œ **ScriptPubKey**ì™€ ê²°í•©í–ˆì„ ë•Œ, íƒ€ë‹¹í•œ Scriptê°€ ë  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” **ScriptSig**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n5. ìœ„ì—ì„œ ìƒì„±í•œ ScriptSigì™€ ì´ì „ Transaction Outputì„ íŠ¹ì •í•  ìˆ˜ ìˆëŠ” ê°’ì„ ë¬¶ì–´ì„œ Transaction Inputë“¤ì„ ì‘ì„±í•©ë‹ˆë‹¤.\n6. Bitcoinì„ ë³´ë‚¼ ëŒ€ìƒì˜ addressë¥¼ ì´ìš©í•´ì„œ, ì ì ˆí•œ **ScriptPubKey**ë¥¼ ìƒì„±í•˜ì—¬, amountì™€ í•¨ê»˜ Transaction Outputë“¤ì„ ë§Œë“­ë‹ˆë‹¤. ì´ë•Œ ì”ëˆì´ ë°œìƒí•œë‹¤ë©´, ìì‹ ì—ê²Œ ë‹¤ì‹œ ë³´ë‚´ëŠ” Transaction Outputë„ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n7. Transactionì— version, locktime ë“±ì„ ì¶”ê°€í•˜ì—¬, Transactionì„ ìµœì¢…ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.\n\nì´ì „ ê¸€ê³¼ ë™ì¼í•˜ê²Œ êµ¬í˜„ ì‚¬í•­ì€ githubì— ì •ì˜í•´ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n","slug":"bitcoin-3","date":"2022-03-22 11:22","title":"[Bitcoin] 3. Transaction","category":"Tech","tags":["BlockChain","Bitcoin","ECC","ecdsa"],"thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Intro\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.**Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” Blockchain Network êµ¬ì¡°ì— ëŒ€í•œ ì´í•´ì™€ ì‹¤ìš©ì„±ì„ í–¥ìƒí•˜ê¸° ìœ„í•œ MerkleTree, Bloom Filter, SigWitì— ëŒ€í•´ì„œ ì •ë¦¬í•©ë‹ˆë‹¤.**\n\nì´ì „ Chapterì—ì„œëŠ” Transactionì˜ ì†Œìœ  ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ìì„¸íˆ ë‹¤ë£¨ì—ˆìŠµë‹ˆë‹¤. ê±°ê¸°ì„œ Transactionì˜ ì‚¬ìš© ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œì—ëŠ” UTXO(Unspent Transaction Output) setì´ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŠ” ì–´ë–»ê²Œ ìƒì„±ë˜ê³ , ì–´ë–»ê²Œ ê´€ë¦¬ë˜ëŠ”ì§€ë¥¼ í•´ë‹¹ partì—ì„œ í•œ ë²ˆ ë‹¤ë£¨ì–´ë³´ê² ìŠµë‹ˆë‹¤.\n\n---\n\n### 1. Blockchain\n\nìš°ë¦¬ì˜ Transactionì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì„ ê°•êµ¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ëª¨ë“  Transactionì„ í‘œì˜ í˜•íƒœë¡œ ì €ì¥í•´ë‘ëŠ” ê²ƒë„ ë°©ë²•ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, Bitcoinì—ì„œëŠ” ì´ë¥¼ Blockì´ë¼ëŠ” ë‹¨ìœ„ë¡œ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n#### 1-1. Block\n\n##### 1-1-1. ì •ì˜\n\nBlockì´ë€ Transactionì„ ì €ì¥í•˜ëŠ” í•˜ë‚˜ì˜ ë‹¨ìœ„ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ Blockì˜ í¬ê¸°ëŠ” 1MBë¡œ ì œí•œë˜ì–´ìˆìŠµë‹ˆë‹¤. (ë¬¼ë¡  ì§€ê¸ˆì€ ì—¬ëŸ¬ ë‹¤ë¥¸ ë³€ì¢…ì—ì„œëŠ” ì´ ì œí•œì´ ë‹¤ë¥´ê¸°ë„ í•©ë‹ˆë‹¤.)\n\n##### 1-1-2. êµ¬ì¡°\n\në”°ë¼ì„œ, Blockì—ëŠ” ì´ë¥¼ ë§Œì¡±í•˜ëŠ” Transactionì˜ ê°¯ìˆ˜ë§Œí¼ë§Œì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì´ë£¨ëŠ” êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n1. Header : í•´ë‹¹ Blockì— ëŒ€í•œ ì„¤ëª…ì„ ìœ„í•œ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. íŠ¹íˆ, í•´ë‹¹ Blockì˜ ì •ë‹¹ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•œ ë‚´ìš©ì„ í¬í•¨í•©ë‹ˆë‹¤.\n2. Coinbase Transaction : Blockì— ì¡´ì¬í•˜ëŠ” ì²«ë²ˆì§¸ Transactionì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n3. Transactions : ì—¬ëŸ¬ userë“¤ì˜ ê±°ë˜ ë‚´ìš©ì„ í¬í•¨í•˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. ì´ ì•ˆì—ë„ Block ìƒì„±ìë¥¼ ìœ„í•œ ë³´ìƒì´ í¬í•¨ë©ë‹ˆë‹¤. ë³´ìƒì´ ì—†ë‹¤ë©´, í•´ë‹¹ transactionì˜ ìš°ì„ ìˆœìœ„ëŠ” ë‚®ì„ ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\n![blockchain](/images/blockchain.jpeg)\n\n##### 1-1-3. Coinbase Transaction\n\nê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  Transactionì€ ì´ì „ Transactionì˜ Outputì„ ê°€ë¥´í‚¤ê³  ìˆì–´ì•¼ í•˜ë©°, ì´ê²ƒì´ ìì‹ ì˜ ê²ƒì´ë¼ëŠ” ì¦ëª…ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì˜ë¬¸ì´ ìƒê¸°ëŠ” ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  Transactionì˜ ëìœ¼ë¡œ ê°”ì„ ë•Œ, ê³¼ì—° ê¸°ë°˜ Transactionì€ ì–´ë””ì„œ ì˜¤ëŠ”ê°€ì— ëŒ€í•œ ê³ ë¯¼ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ê²ƒì´ ë˜ëŠ” ê²ƒì´ ë°”ë¡œ ì´ Coinbase Transactionì…ë‹ˆë‹¤. ì´ëŠ” ì´ì „ Transactionì˜ Output ì—†ì´ë„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ Blockì„ ë§Œë“¤ì–´ë‚¸ ìƒì„±ìì—ê²Œ ë³´ìƒì„ ì œê³µí•˜ëŠ” ì˜ë¯¸ì—ì„œ Bitcoinì„ ì œê³µí•©ë‹ˆë‹¤. í•´ë‹¹ Transactionì€ ì´ì „ Transactionì„ ê°€ë¦¬í‚¤ëŠ” ê°’ì´ ëª¨ë‘ 0ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì–´ìˆì–´ ì‰½ê²Œ ì‹ë³„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ, íŠ¹ì´í•˜ê²Œë„, Coinbase Transactionì˜ ì •ë‹¹ì„±ì€ Block ìì²´ê°€ ì¦ëª…í•˜ê¸° ë•Œë¬¸ì—, inputì˜ ScriptSig ë¶€ë¶„ì€ ë¬´ì˜ë¯¸í•œ ë°ì´í„°ê°€ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì—¬ê¸°ì—ëŠ” ìì‹ ë§Œì˜ ì² í•™ì„ ë‹´ì€ ë¬¸êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì‹œê°„ì´ ì¢€ íë¥¸ í›„ì—ëŠ” ì—¬ê¸°ì— Blockì˜ height(ì œì¼ ì²« ë²ˆì§¸ Blockê³¼ì˜ ê±°ë¦¬)ë¥¼ í‘œì‹œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\nì™œ Blockì„ ìƒì„±í•œ ì‚¬ëŒì—ê²Œ Bitcoinì„ ì œê³µí•˜ëŠ” ê²ƒì¼ê¹Œìš”? ì´ëŠ” ì´ì œ ì•ìœ¼ë¡œ ì‚´í´ë³¼ PoWì—ì„œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\n##### 1-1-4. Header\n\nHeaderëŠ” ì´ 6ê°œì˜ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.\n\n1. Version : BIP(Bitcoin Improvement Proposal)ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ Bitcoin ì‹œìŠ¤í…œì˜ í–¥ìƒì„ ìœ„í•œ ì œì•ˆë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ì‹¤ì œë¡œ Blockì˜ Versionì´ ë°”ë€Œê¸°ë„ í•©ë‹ˆë‹¤. ê·¸ëŸ°ë°, ì´ê²ƒì´ ì´ì „ Versionì˜ Blockê³¼ í˜¸í™˜ì´ ëœë‹¤ë©´, ì´ë¥¼ Soft Forkë¼ê³  í•˜ê³ , ì´ì „ Versionê³¼ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ë…ë¦½ì ì¸ Chainìœ¼ë¡œ ë¶„ë¦¬ë˜ëŠ” ê²ƒì„ Hard Forkë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.\n2. Previous Block : Blockchainì´ë¼ê³  ë¶ˆë¦¬ëŠ” ì´ìœ ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ì— ë³´ì•˜ë˜ Transaction ì²˜ëŸ¼ Block ì—­ì‹œ ì´ì „ Blockê³¼ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ëª¨ë“  ê±°ë˜ ì¥ë¶€ì˜ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n3. Merkle root : í•´ë‹¹ Blockì´ ì†Œìœ í•˜ê³  ìˆëŠ” Transactionì˜ hashê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  íŠ¸ë¦¬ êµ¬ì¡°ì—ì„œ rootì— í•´ë‹¹í•˜ëŠ” ê°’ì…ë‹ˆë‹¤. ì´ëŠ” í›„ì— Block ë‚´ë¶€ì— Transaction ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ë„êµ¬ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n4. Timestamp : í•´ë‹¹ Blockì˜ ìƒì„± ì‹œì ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n5. Bits : ì•ìœ¼ë¡œ ë‚˜ì˜¬ PoW partì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ìœ¼ë¡œ, ì´ëŠ” íŠ¹ì • ì‘ì—…ì˜ ë‚œì´ë„ë¥¼ í‘œí˜„í•©ë‹ˆë‹¤.\n6. Nonce : ì•ìœ¼ë¡œ ë‚˜ì˜¬ PoW partì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ìœ¼ë¡œ, ì´ëŠ” íŠ¹ì • ì‘ì—…ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜ê°’ì— í•´ë‹¹í•©ë‹ˆë‹¤.\n\n##### 1-1-5. Proof of Work(PoW)\n\nì´ëŠ” Blockchainì—ì„œ ìµœì´ˆë¡œ ë§Œë“¤ì–´ì§„ ê°œë…ì€ ì•„ë‹™ë‹ˆë‹¤. ê¸°ì¡´ì— Spam mailì„ ë§‰ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©ëœ ì ì´ ìˆëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ ê¸°ìˆ ì˜ ëª©ì ì€ ë¬´ë¶„ë³„í•œ ê°€ì§œ, ì‚¬ê¸°, ë¬´ì˜ë¯¸í•œ ë°ì´í„°ê°€ ë¹ˆë²ˆí•˜ê²Œ ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ê³µìœ ë˜ëŠ” ê±¸ ë§‰ëŠ” ê²ƒì…ë‹ˆë‹¤. ì¦‰, ëˆ„êµ°ê°€ ì•…ì˜ì ìœ¼ë¡œ Bitcoin ì‹œìŠ¤í…œì„ ë§ˆë¹„ì‹œí‚¤ê¸° ìœ„í•´ì„œ, ì•…ì˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¬´ì°¨ë³„ì ìœ¼ë¡œ ë³´ë‚´ë©´, Blockì˜ Transactionì„ ì¦ëª…í•˜ëŠ” ë°ì—ë§Œ ë„ˆë¬´ ë§ì€ ìì›ì„ ì†Œëª¨í•˜ê²Œ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ ê²ƒì´ PoWì…ë‹ˆë‹¤.\n\ní•˜ë‚˜ì˜ Blockì„ ë§Œë“¤ê³ , ê³µìœ í•˜ê³ , ê²€ì¦ë°›ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ì–´ë–¤ íŠ¹ì • ëª©í‘œê°’ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì°¾ë„ë¡ í•˜ì—¬ ì´ëŸ¬í•œ ë¬´ë¶„ë³„í•œ Blockì˜ ìƒì„±ì„ ë§‰ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. Bitcoinì—ì„œëŠ” í•˜ë‚˜ì˜ Blockì„ ë§Œë“œëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ í‰ê·  10ë¶„ì´ ë  ìˆ˜ ìˆë„ë¡ ê³„ì†í•´ì„œ, ë‚œì´ë„ë¥¼ ìˆ˜ì •í•˜ëŠ” Algorithmì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. (2016 Block ë‹¨ìœ„ë¡œ ë‚œì´ë„ëŠ” ê°±ì‹ ë©ë‹ˆë‹¤.)\n\nì´ì œ ì—¬ê¸°ì„œ ê¶ê¸ˆí•  ìˆ˜ ìˆëŠ” ì‚¬í•­ì´ ëª‡ ê°œ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•´ì„œ í•œ ë²ˆ ì¤€ë¹„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\n\n1. ì–´ë–»ê²Œ í‰ê·  10ë¶„ì´ ê±¸ë¦¬ëŠ” ë¬¸ì œë¥¼ ë‚¼ ìˆ˜ ìˆëŠ”ê°€?  \n    hash í•¨ìˆ˜ ì¤‘ hash256(sha-1 ë¼ëŠ” hash í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ ì—°ì†ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•)ì„ ì‚¬ìš©í•˜ë©´, ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. sha í•¨ìˆ˜ëŠ” ê²°ê³¼ ê°’ìœ¼ë¡œ ë‚˜ì˜¨ ë°ì´í„°ì˜ ê° ìë¦¬ê°€ 1ì„ ê°€ì§ˆ í™•ë¥ ì´ 1/2ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì—­ì—°ì‚°ì„ í†µí•´ì„œ ì°¾ì„ ìˆ˜ë„ ì—†ê¸° ë•Œë¬¸ì—, ì—°ì†í•´ì„œ 0ì´ nê°œ ë‚˜ì˜¤ëŠ” ê°’ì„ ì°¾ìœ¼ë¼ê³  í–ˆì„ ë•Œ, ë¬´ì‘ì • ìˆ˜í–‰ì„ ë°˜ë³µí•˜ë©´ì„œ ì°¾ì„ ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ í•œ ë²ˆ ìˆ˜í–‰í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ Blockì— ë‹´ê¸´ timestampë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°í•˜ì—¬ í‰ê· ìƒ 10ë¶„ì´ ë‚˜ì˜¤ë„ë¡ ê°’ì„ ì¡°ì •í•´ì¤€ë‹¤ë©´, ì´ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë•Œ ìš°ë¦¬ê°€ Block headerì—ì„œ nonceë¼ëŠ” ê°’ì„ ê³„ì†í•´ì„œ ë°”ê¿”ì£¼ê³ , ì´ë¥¼ í¬í•¨í•œ Block headerë¥¼ hash í•˜ì—¬ ì—°ì†í•´ì„œ 0ì´ nê°œ ë‚˜ì˜¤ë„ë¡ í•˜ëŠ” nonceê°’ì„ ì°¾ê²Œ ëœë‹¤ë©´, ì´ê²ƒì´ ë°”ë¡œ í•˜ë‚˜ì˜ Blockì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.Â Â \n2. ë‚œì´ë„ë¼ëŠ” ê²ƒì€ ì–´ë–»ê²Œ ë³€ê²½ë˜ëŠ” ê²ƒì¼ê¹Œ?  \n    Computerì˜ ì„±ëŠ¥ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³„ì†í•´ì„œ ë°œì „í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— Blockì„ í•˜ë‚˜ ì±„êµ´í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì€ ê³„ì†í•´ì„œ ì§§ì•„ì§ˆ ê²ƒì´ë¼ê³  ì¶”ì¸¡í•  ìˆ˜ ìˆì§€ë§Œ, Bitcoin ì‹œìŠ¤í…œì—ì„œëŠ” ì´ ë‚œì´ë„ ê°’ì„ bitsë¼ëŠ” Blockì˜ headerë¥¼ í†µí•´ì„œ í†µì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n3. Blockì— ë‹´ê¸´ Transactionì€ ì–´ë””ì—ì„œ ì˜¤ëŠ”ê°€?  \n    Blockì— ë‹´ê¸°ëŠ” Transactionì€ ëª¨ë‘ ì±„êµ´ì(Blockì„ ìƒì„±í•˜ê³ ì í•˜ëŠ” ì)ê°€ ì†¡ê¸ˆí•œ ê¸°ë¡ì´ ì•„ë‹Œ ì£¼ë³€ nodeë“¤ë¡œë¶€í„° ì „ë‹¬ë°›ì€ Transactionì´ ëŒ€ë¶€ë¶„ì…ë‹ˆë‹¤. ì±„êµ´ìëŠ” ì´ë¥¼ Blockì— ë‹´ì„ ìˆ˜ ìˆëŠ” ì–‘ë§Œí¼ ëª¨ì•„ì„œ Block Headerë¥¼ ì‘ì„±í•œ í›„, nonceë¼ëŠ” ê°’ì„ ì°¾ì•„ ë– ë‚˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë•Œ Blockì— ë‹´ê¸°ëŠ” Transactionì˜ ìš°ì„ ìˆœìœ„ëŠ” Blockì„ ë§Œë“œëŠ” ì´ì—ê²Œ ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤.\n4. Blockì„ ì™œ ë§Œë“¤ì–´ì£¼ëŠ”ê°€?  \n    ì•„ê¹Œë„ ë§í–ˆë“¯ì´ Coinbase Transactionì€ ì±„êµ´ì(Blockì„ ìƒì„±í•˜ê³ ì í•˜ëŠ” ì)ì—ê²Œ í–¥í•˜ëŠ” outputì„ ê°€ì§‘ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì±„êµ´ìëŠ” ì´ë¥¼ í†µí•´ì„œ Bitcoinì„ ë²Œ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜í•œ, Transactionì„ Blockì— ì˜¬ë¦¬ê¸° ìœ„í•´ì„œ, ì£¼ë³€ nodeë“¤ì—ê²Œ Bitcoin ì†¡ê¸ˆìë“¤ì´ ì´ë¥¼ ìš”ì²­í•˜ë©´ì„œ, ìˆ˜ìˆ˜ë£Œ ì¼ë¶€ë¥¼ í•´ë‹¹ nodeì—ê²Œ ê°€ëŠ” outputìœ¼ë¡œ ì§€ì •í•˜ê¸° ë•Œë¬¸ì—, Blockì„ ë§Œë“ ë‹¤ëŠ” ê²ƒì€ Bitcoinì„ ë²„ëŠ” ê²ƒê³¼ ê°™ì€ í–‰ìœ„ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì˜¬ë¼ê°ˆ Transactionì˜ ìš°ì„ ìˆœìœ„ëŠ” ì´ ìˆ˜ìˆ˜ë£Œì— ê¸°ë°˜í•˜ì—¬ ìƒì„±ë©ë‹ˆë‹¤.\n5. Blockì„ ì¤‘ê°„ì— ëˆ„ê°€ ë°”ê¿”ì„œ ìì‹ ì˜ ê²ƒì´ë¼ê³ , ë°”ê¾¸ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ê°€?  \n    ìµœì´ˆë¡œ ë°œê²¬í•œ Blockì— ëŒ€í•´ì„œ ëˆ„êµ°ê°€ ì´ê²ƒì„ ìì‹ ì´ ë°œê²¬í–ˆë‹¤ê³ , ì†ì´ëŠ” ê²ƒì€ ì˜ë¯¸ê°€ ì—†ìŠµë‹ˆë‹¤. ì• ì´ˆì— Blockì„ ë„ìš©í•˜ëŠ” ê²ƒì€ ì´ê²ƒì„ í†µí•´ì„œ ë°œìƒí•˜ëŠ” ìˆ˜ìˆ˜ë£Œë¥¼ ì¼ë¶€ ì·¨í•˜ê² ë‹¤ëŠ” ê²ƒì¸ë°, ì´ëŠ” Block ë‚´ë¶€ì˜ Transactionì„ ë°”ê¾¸ì–´ì•¼ í•˜ê³ , ì´ë¥¼ ë°”ê¾¼ë‹¤ëŠ” ê²ƒì€ headerì˜ merkle root ê°’ì„ ë°”ê¾¸ëŠ” ê²°ê³¼ë¥¼ ì´ˆë˜í•©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ ë‹¹ì—°íˆ ì´ì „ì˜ nonceê°’ì´ ê°€ì§€ëŠ” íš¨ê³¼ëŠ” ëª¨ë‘ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì—, ë„ìš©í•œë‹¤ëŠ” ê²ƒ ìì²´ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.\n6. Blockì˜ ê²€ì¦ì€ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§€ëŠ”ê°€?  \n    ìœ„ì—ì„œ ë³´ì•˜ë“¯ì´ Blockì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì•ì—ì„œë¶€í„° ì—°ì†í•´ì„œ 0ì´ nê°œ ë‚˜ì˜¤ê²Œ í•˜ëŠ” Blockì˜ hashê°’ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ í•´ë‹¹ Blockì„ ë°›ê³ , ì´ë¥¼ hash í•œ í›„ì— ë¹„êµë¥¼ í†µí•´ì„œ, ì´ Blockì´ ì ì ˆí•œì§€ íŒŒì•…í•˜ëŠ” ê²ƒì€ ë‹¨ í•œ ë²ˆì˜ hashë¡œ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ê²€ì¦ì€ ë§¤ìš° ì‰½ì§€ë§Œ, ìƒì„±ì€ êµ‰ì¥íˆ ì–´ë µê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n7. nonce fieldì˜ í¬ê¸°ê°€ ì •í•´ì ¸ìˆë˜ë° ëª¨ë“  nonceë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆëŠ”ë°ë„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?  \n    ì´ë•Œì—ëŠ” coinbase transactionì˜ ê°’ì„ ì‚´ì§ ì¡°ì •í•©ë‹ˆë‹¤. ì´ë¥¼ ì¡°ì •í•˜ê²Œ ë˜ë©´, merkle rootì˜ ê°’ë„ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì—, hashë¥¼ ë‹¤ì‹œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n8. BlockChainì— ë™ì‹œì— ì—¬ëŸ¬ Nodeê°€ ë“±ë¡ì„ í•˜ê²Œ ë˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ê°€?  \n    ì¼ë‹¨ Blockì„ ë§Œë“¤ê²Œ ë˜ë©´, í•´ë‹¹ ì±„êµ´ìëŠ” ì´ë¥¼ ì „íŒŒí•©ë‹ˆë‹¤. ì´ê²ƒì´ ì˜¬ë°”ë¥¸ì§€ë¥¼ íŒŒì•…í•œ ë‹¤ë¥¸ Nodeë“¤ì€ ì´ë¥¼ ìì‹ ì˜ Blockchainì— ì—°ê²°í•˜ê²Œ ë˜ê³ , ë˜‘ê°™ì´ ì „íŒŒí•˜ê¸°ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë‹¤ë¥¸ ëª¨ë“  Nodeë“¤ì´ í•´ë‹¹ Blockì„ í¬í•¨í•˜ëŠ” Blockchainì„ ê°–ê²Œ ë˜ë©´, í•´ë‹¹ Blockì€ ì´ì œ íƒ€ë‹¹í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ë§Œ ë™ì‹œì— ì—¬ëŸ¬ Blockì„ ë°›ì€ ê²½ìš°ì—ëŠ” í•´ë‹¹ Blockì„ ì—¬ëŸ¬ ê°œ ëª¨ë‘ ë³‘ë ¬ë¡œ ì—°ê²°í•´ë‘ê³  ìˆë‹¤ê°€, ê°€ì¥ ë¨¼ì € ìƒˆë¡œìš´ Blockì´ ì—°ê²°ëœ Blockì„ ì±„íƒí•˜ê³ , ë‚˜ë¨¸ì§€ ê¸°ì¡´ Blockì€ ë²„ë¦¬ê²Œ ë©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— Blockì„ ì±„êµ´í–ˆë‹¤ê³  ëì¸ ê²Œ ì•„ë‹ˆë¼ ì™„ì „íˆ ì„ íƒë˜ê¸°ê¹Œì§€ëŠ” ì™„ë²½í•˜ê²Œ Bitcoinì„ íšë“í–ˆë‹¤ê³ ëŠ” ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ëŒ€ê°œì˜ ê²½ìš°ì—ëŠ” ìì‹ ì„ í¬í•¨í•œ Blockì´ 6ê°œ ì—°ê²°ë˜ì—ˆì„ ë•Œ, ë¹„ë¡œì†Œ í•´ë‹¹ Blockì´ Blockchainì— ì™„ë²½í•˜ê²Œ ë“±ë¡ë˜ì—ˆë‹¤ê³  ë³´ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.\n\n##### 1-1-6. Genesis Block\n\nBlock ë‚´ì—ì„œë„ ìµœì´ˆì˜ Transactionì´ ì¡´ì¬í•˜ë“¯ì´, Block ë˜í•œ, ìµœì´ˆì˜ Blockì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ë¥¼ ìš°ë¦¬ëŠ” Genesis Blockì´ë¼ê³  ë¶€ë¥´ê³ , ëª¨ë“  Blockì˜ ìµœìƒë‹¨ì€ í•´ë‹¹ Blockì´ ë©ë‹ˆë‹¤. í•´ë‹¹ Blockì˜ Coinbase Transactionì˜ ScriptSigì—ëŠ” Bitcoinì˜ ì°½ì‹œì Satoshiì˜ ë™ê¸°ê°€ ë‹´ê¸´ ë¬¸êµ¬ë¥¼ í¬í•¨ì‹œì¼°ë‹¤.  \n(chancellor on brink of second bailout for banks)\n\n#### 1-2. P2P network\n\nìš°ë¦¬ê°€ ìƒê°í•˜ëŠ” Internetê³¼ ê²Œì„ ì‚°ì—…ê³¼ ê°ì¢… ì„œë¹„ìŠ¤ë“¤ì€ ëŒ€ê²Œ í° ê·œëª¨ì˜ Serverë¥¼ ê°€ì§€ê³  ìˆëŠ” ì—…ì²´ê°€ ìì‹ ë“¤ì˜ ì„œë¹„ìŠ¤ë¥¼ í•´ë‹¹ Serverë¥¼ í†µí•´ì„œ ëª¨ë“  Client(ì‚¬ìš©ì)ë“¤ì—ê²Œ ì œê³µí•˜ëŠ” í˜•íƒœë¥¼ ë„ê³  ìˆìŠµë‹ˆë‹¤. ì¦‰, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìê°€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì œê³µí•¨ê³¼ ë™ì‹œì— ì†Œí”„íŠ¸ì›¨ì–´ ì‚¬ìš©ìê°€ í†µì‹ í•˜ì—¬ ì–»ì„ ë°ì´í„°ë“¤ë„ ëª¨ë‘ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìê°€ ê´€ë¦¬í•œë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì´ ëŒ€ê²Œ ì¼ë°˜ì ì¸ í˜•íƒœì˜ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ì™€ ì „í˜€ ë‹¤ë¥¸ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ P2P networkì…ë‹ˆë‹¤. ì´ëŠ” Peer to Peerì˜ ì¤„ì„ë§ë¡œ, ê° Client(ì‚¬ìš©ì) ê°„ì˜ ì—°ê²°ì„ í†µí•´ì„œ Serviceë¥¼ ì œê³µí•œë‹¤ëŠ” ì ì´ ë§¤ìš° íŠ¹ì´í•œ ì ì…ë‹ˆë‹¤. ì¦‰, ê°œë°œìëŠ” Softwareë¥¼ ë§Œë“¤ê³ , ì´ë¥¼ ë°°í¬í•˜ëŠ” ì—­í• ë§Œì„ í•˜ê³ , Software ë¼ë¦¬ì˜ í†µì‹ ì€ Serverë¥¼ í†µí•´ì„œ ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ ê° Softwareë¼ë¦¬ ì—°ê²°ë˜ì–´ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ í†µì‹  networkë¥¼ ë§Œë“œëŠ” í˜•ì‹ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ ë§Œë“  ë„¤íŠ¸ì›Œí¬ëŠ” Softwareë§Œ ë¬´ê²°í•˜ê²Œ ë§Œë“¤ì—ˆë‹¤ë©´, ì„œë¡œê°€ ì„œë¡œë¥¼ ê²€ì¦í•˜ê³ , ì£¼ì²´ì ìœ¼ë¡œ íŒë‹¨í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ì–´ì„œ ë” ê±´ì „í•œ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì˜ Server êµ¬ì¡°ì—ì„œëŠ” ëª¨ë“  Clientì˜ ìš”ì²­ì„ Serverì—ì„œ í•´ê²°í•˜ê¸° ë•Œë¬¸ì—, ë¶€ë‹´ì´ ë§¤ìš° í¬ê³ , í•´í‚¹ì˜ íƒ€ê¹ƒì´ ë˜ëŠ” ë“± í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì— ëŒ€í•œ ë¶€í•˜ê°€ êµ‰ì¥íˆ í¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, P2P êµ¬ì¡°ì—ì„œëŠ” ì´ëŸ¬í•œ ë¶€ë‹´ì„ ë‚˜ëˆ ê°€ì§€ê¸° ë•Œë¬¸ì— ì˜¤íˆë ¤ ì•ˆì „í•´ì§ˆ ìˆ˜ ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë˜ì„œ, Bitcoinì—ì„œëŠ” Blockì„ ê³µê°œí•˜ê¸° ìœ„í•œ P2P networkë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¤‘ì•™ì— ìˆëŠ” ì‹œìŠ¤í…œ ì—†ì´ ê°œì¸ì´ ì–¸ì œë“ ì§€ ëª¨ë“  Blockchainì„ ë³´ê´€í•˜ê³  ìˆì„ ìˆ˜ ìˆê³ , ì´ë¥¼ ì´ìš©í•´ì„œ íŠ¹ì • ê±°ë˜ì— ëŒ€í•˜ì—¬ ê²€ì¦ì„ í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì„œë¡œê°€ ì„œë¡œë¥¼ ê°ì‹œí•˜ë©°, ì„œë¡œê°€ ë³´ë‚´ëŠ” ë°ì´í„°ì— ëŒ€í•œ 100%ì˜ ì‹ ë¢°ë¥¼ ê°–ì§€ ì•Šê³ , ì§ì ‘ ê²€ì¦ì„ í†µí•´ì„œ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì´ Bitcoinì—ì„œ ì¶”êµ¬í•˜ëŠ” íƒˆì¤‘ì•™í™” ëœ ê±°ë˜ ê´€ë¦¬ ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-client-server-arch](/images/blockchain-client-server-arch.jpeg)\n\n![blockchain-p2p-arch](/images/blockchain-p2p-arch.jpeg)\n\n#### 1-3. Blockchain Data Types\n\nP2P networkë¥¼ í†µí•´ì„œ Blockê³¼ Transactionì´ ê³µìœ ê°€ ë˜ê¸° ë•Œë¬¸ì—, Bitcoin ì‹œìŠ¤í…œ ë‚´ì—ì„œëŠ” ë°ì´í„°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ 3ê°€ì§€ë¡œ ë‚˜ëˆ„ì–´ ë³´ê´€í•©ë‹ˆë‹¤.\n\n1. mempool : ìŠ¹ì¸ë˜ì§€ ì•Šì€ Transactionì„ ë³´ê´€í•˜ëŠ” poolì…ë‹ˆë‹¤. minerë“¤ì€ ì´ë¥¼ Blockì— ë‹´ì•„ì„œ P2P networkë¡œ ë‹¤ì‹œ ê³µìœ í•˜ê³ , ì´ë¥¼ ë°›ì€ nodeëŠ” ì´ë¥¼ Blockchainì— ì—°ê²°ì‹œì¼œì„œ Blockì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.\n2. Blockchain : Blockì„ í•˜ë‚˜ì˜ ê¸´ chainì˜ í˜•íƒœë¡œ ë³´ê´€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ëª¨ë“  Bitcoin ê±°ë˜ì— í•´ë‹¹í•˜ëŠ” ê°€ê³„ë¶€(ì›ì¥)ì´ë¼ê³  í•  ìˆ˜Â  ìˆìŠµë‹ˆë‹¤.\n3. UTXO set : ì´ì „ì—ë„ ì‚´í´ë³´ì•˜ì§€ë§Œ, ìš°ë¦¬ëŠ” Transactionì˜ ê²€ì¦ì„ ìˆ˜í–‰í•  ë•Œ ë°˜ë“œì‹œ í•´ë‹¹ Transactionì˜ ì‚¬ìš©ì—¬ë¶€ë¥¼ í™•ì¸í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ Transaction ì¤‘ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•Šì€ Transaction Outputì„ Blockchainì—ì„œë¶€í„° ì¶”ì¶œí•˜ì—¬ ë³„ë„ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ì „ì²´ Blockchainì„ ì¡°íšŒí•˜ëŠ” ê²ƒë³´ë‹¤ ë¹ ë¥´ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šì€ Transaction outputì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-data-type](/images/blockchain-data-type.jpeg)\n\n#### 1-4. Blockchain Node Types\n\nP2P networkì—ì„œëŠ” ì—¬ëŸ¬ ê°œì˜ nodeê°€ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–¤ Nodeì—ì„œëŠ” Block ìì²´ë¥¼ ìƒì„±í•´ë‚´ëŠ” ì—­í• ì„ í•  ìˆ˜ë„ ìˆê³ , ì–´ë–¤ Nodeì—ì„œëŠ” ìµœì†Œí•œì˜ Transaction ë§Œì„ ê°€ì§€ëŠ” ê²½ìš°ë„ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ì— ëŒ€í•´ì„œ, ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤.\n\n1. Full Node\n2. Miner Node\n3. Light Node\n\n#### 1-5. Block ë‚´ì˜ Transactionì˜ ì¡´ì¬ ì—¬ë¶€\n\nBlock ë‚´ì˜ Transactionì˜ ì—¬ë¶€ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œëŠ” ê°„ë‹¨íˆ Blockì—ì„œ Transactionì„ ì°¾ì•„ì„œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ê°€ì¥ ê°„í¸í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ, ëª¨ë“  Blockchainì„ ë‹´ì„ ìˆ˜ê°€ ì—†ëŠ” ê²½ìš°ì…ë‹ˆë‹¤. 2022ë…„ í˜„ì¬ë¥¼ ê¸°ì ìœ¼ë¡œ Blockchainì˜ ë°ì´í„° ì‚¬ì´ì¦ˆëŠ” 400GBë¥¼ ë„˜ì–´ì„°ìŠµë‹ˆë‹¤. ì´ë¥¼ Smartphoneê³¼ ê°™ì€ ì¥ì¹˜ì—ì„œ ëª¨ë‘ ë³´ê´€í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ì¢€ ë” ê°„ì†Œí™”í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ëŠ” ê³¼ì •ì—ì„œ ë§Œë“¤ì–´ì§„ ê²ƒì´ Headerì˜ Merkle Rootì…ë‹ˆë‹¤. ì´ê²ƒì˜ ì›ë¦¬ë¥¼ ì•Œê¸° ìœ„í•´ì„œ Merkle Treeì—ì„œë¶€í„° ì•Œì•„ë³´ì•„ì•¼ í•©ë‹ˆë‹¤.\n\n### 2. Merkle Tree\n\n#### 2-1.Â  ë°°ê²½\n\nBlockchainì˜ ë­ë“  Blockì„ ê°–ê³  ìˆëŠ” ê²ƒì€ ì–´ë–¤ Nodeì—ê²ŒëŠ” êµ‰ì¥íˆ í° ë¶€ë‹´ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ì´ë¥¼ ë³´ê´€í•¨ìœ¼ë¡œì¨ í•˜ê³ ì í–ˆë˜ í–‰ë™ìœ¼ë¡œ ê´€ì‹¬ì„ ëŒë¦° ê²ƒì…ë‹ˆë‹¤. ì›ë˜ ëª©ì ì¸ Block ë‚´ì˜ Transactionì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ëª©í‘œì˜€ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ëª¨ë‘ ìœ ì§€í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ, ì´ì— ëŒ€í•œ ìš”ì•½ë³¸ì„ ê°€ì§€ëŠ” ê²ƒì´ ë°”ë¡œ Merkle Treeì…ë‹ˆë‹¤.\n\n#### 2-2.Â  ì •ì˜\n\nMerkleTreeëŠ” Proof of Inclusion(í¬í•¨ ì—¬ë¶€ë¥¼ ì¦ëª…)í•˜ê¸° ìœ„í•´ ê³ ì•ˆëœ data structure(ìë£Œêµ¬ì¡°)ì…ë‹ˆë‹¤. ì´ë¦„ì—ì„œë¶€í„° ëŠë‚„ ìˆ˜ ìˆê² ì§€ë§Œ, êµ¬ì¡°ëŠ” Tree í˜•íƒœë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ëŠ” ë‘ ê°œì˜ í•µì‹¬ ê°œë…ì— ì˜í•´ì„œ êµ¬í˜„ë©ë‹ˆë‹¤.\n\n1. Ordered List\n2. Hash Function\n\nêµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•ì€ ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤.\n\n1. Ordered Listë¥¼ leaf ë…¸ë“œ ê°¯ìˆ˜ë¡œ ê°–ëŠ” complete binary tree(leaf nodeë¥¼ ì œì™¸í•˜ê³ ëŠ” ëª¨ë“  nodeê°€ ì±„ì›Œì ¸ ìˆìœ¼ë©°, ì™¼ìª½ì—ì„œë¶€í„° ë°ì´í„°ê°€ ì±„ì›Œì§€ëŠ” í˜•íƒœì…ë‹ˆë‹¤.)ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ëª©í‘œì´ë¯€ë¡œ, ëª¨ë“  Ordered Listë¥¼ í¬í•¨í•  ìˆ˜ ìˆëŠ” leaf nodeë¥¼ ê°€ì§€ëŠ” complete binary treeë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n2. ì´ì œ leafë…¸ë“œì— ê° ordered listì˜ elementë“¤ì„ hash functionì„ ì ìš©í•˜ì—¬, ì±„ì›Œë„£ìŠµë‹ˆë‹¤.\n3. ì´ì œ ê° leaf ë…¸ë“œì—ì„œë¶€í„° ì°¨ê·¼ì°¨ê·¼ ìœ„ë¡œ ì˜¬ë¼ê°€ë©´ì„œ, tree êµ¬ì¡°ì˜ ëª¨ë“  nodeì˜ ê°’ì„ ì±„ìš¸ ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ parentì˜ ê°’ì€ left nodeì˜ hash ê°’ê³¼ right nodeì˜ hashê°’ì„ ì´ì–´ ë¶™ì—¬ì„œ(ë”í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ì–´ì„œ ë¶™ì…ë‹ˆë‹¤.) ë‹¤ì‹œ í•œë²ˆ hash functionì„ ì ìš©í•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬í•©ë‹ˆë‹¤.\n4. ì—¬ê¸°ì„œ, ë§Œì•½ ì™¼ìª½ nodeëŠ” ìˆì§€ë§Œ, ì˜¤ë¥¸ìª½ nodeê°€ ì—†ëŠ” ê²½ìš°, ì™¼ìª½ nodeë¥¼ ë³µì‚¬í•˜ì—¬ ì˜¤ë¥¸ìª½ nodeì— ë¶™ì—¬ ë„£ìŠµë‹ˆë‹¤.\n5. ì´ ê³¼ì •ì„ ë°˜ë³µí•˜ë©´ì„œ, root ë…¸ë“œì— ìˆëŠ” ê°’ê¹Œì§€ êµ¬í•´ëƒ…ë‹ˆë‹¤.\n\nì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ê²ƒì´ merkle treeì…ë‹ˆë‹¤. ì´ êµ¬ì¡°ê°€ ì™œ í¬í•¨ ì¦ëª…ì„ í•˜ê¸°ì— ì í•©í•œì§€ë¥¼ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\n![blockchain-merkle-tree-1](/images/blockchain-merkle-tree-1.jpeg)\n\n#### 2-3. **ë™ì‘ì›ë¦¬**\n\n$H\\_6$ ë¼ëŠ” Transactionì´ Merkle Treeì˜ í¬í•¨ë˜ì–´ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Light Nodeê°€ Blockchainì—ì„œ Transactionì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³ ì í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì €, ê·¼ì²˜ì˜ Full Nodeì—ê²Œ Flag Bitì™€ Hash ê°’ì„ ìš”ì²­í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ì´ë¥¼ ì´ìš©í•´ì„œ, ì •ë§ $H\\_6$ê°€ í¬í•¨ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Flag Bitì™€ ë³´ë‚¼ Hash ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„ ì •ë©ë‹ˆë‹¤.\n\n1. ë¨¼ì € Merkle Treeë¥¼ ìœ„í•´ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ ì œì‘í•˜ê³  ì´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.\n2. ê·¸ë¦¬ê³  í•´ë‹¹ Transaction Hash ê°’ì— í•´ë‹¹í•˜ëŠ” Blockì—ì„œ í•´ë‹¹ Transaction Hashë¥¼ ì°¾ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œëŠ” ë…¸ë€ìƒ‰ì…ë‹ˆë‹¤.\n3. ê·¸ë ‡ë‹¤ë©´, ë§Œì•½ ìš°ë¦¬ê°€ íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ ë°ì´í„°ë§Œ ìˆë‹¤ë©´, ë³´ë¼ìƒ‰ ê°’ì„ ìœ ì¶”í•  ìˆ˜ ìˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n4. ë˜í•œ, ìš°ë¦¬ëŠ” Merkle Root ê°’ì„ ê°–ê³  ìˆê¸° ë•Œë¬¸ì—, ì´ë¥¼ í†µí•´ ìœ ì¶”í•´ë‚¸ Merkle Rootê°’ê³¼ Merkle Rootì´ ê°™ë‹¤ë©´, í•´ë‹¹ Transactionì´ í•´ë‹¹ Blockì— ìˆë‹¤ëŠ” ê²ƒì€ ì¦ëª…ë˜ì—ˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-merkle-tree-2](/images/blockchain-merkle-tree-2.jpeg)\n\në”°ë¼ì„œ, ìš°ë¦¬ê°€ ê°€ì§€ê³  ìˆì–´ì•¼ í•  ë°ì´í„°ëŠ” ìš°ë¦¬ê°€ ë³´ë‚¸ íŒŒë€ìƒ‰ hashì˜ ê°’ê³¼ ìœ„ì¹˜ë¥¼ ìœ ì¶”í•  ìˆ˜ ìˆëŠ” ê°’ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ì´ ê³¼ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n\n![blockchain-merkle-tree-3](/images/blockchain-merkle-tree-3.jpeg)\n\nì´ì œ Flag Bitsì™€ Hashesë§Œì„ ê°–ê³  ìˆìœ¼ë©´, ì´ì œ ìš°ë¦¬ëŠ” ì´ë¥¼ ì—­ì—° ì‚°í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n### 3. BloomFilter\n\n#### 3-1. ë°°ê²½\n\nBlockchainì˜ ê¸°ë°˜ì€ ë¿Œë¦¬ ê¹Šì€ ë¶ˆì‹ ì—ì„œë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ, ì´ì „ì—, ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” Transactionì— ëŒ€í•´ì„œ ì¡°íšŒí•˜ëŠ” ê²ƒì€ ìì‹ ì˜ ìì‚°ì„ ë…¸ì¶œí•˜ëŠ” ê²ƒì´ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìì‹ ì˜ ìì‹ ì„ ê°ì¶”ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Bloom Filterì…ë‹ˆë‹¤. Bloom FilterëŠ” ì™„ë²½í•˜ê²Œ ê°ì¶”ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ë‹¤ë¥¸ ë°ì´í„°ì™€ ì¤‘ì²©ë˜ë„ë¡ í•˜ì—¬ ì‰½ê²Œ ì¶”ì¸¡í•  ìˆ˜ ì—†ë„ë¡ í•˜ëŠ” ë° ìˆìŠµë‹ˆë‹¤.\n\n#### 3-2. ì •ì˜\n\nBloom Filterë€ ë°ì´í„°ë¥¼ hash í•˜ê³ , ì´ë¥¼ Bit fieldë¼ëŠ” ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë‹´ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‚˜ëˆ„ì–´ ë‹´ì€ ë°ì´í„°ëŠ” 1ê°œì˜ Bucketì´ë¼ëŠ” ì˜ì—­ì— ë‹´ê¸°ê²Œ ë©ë‹ˆë‹¤. ì´ë•Œ Bucketì€ í•˜ë‚˜ì˜ Bitê°€ ë  ìˆ˜ë„ ìˆê³ , ì—¬ëŸ¬ ê°œì˜ Bitsê°€ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ë™ì¼í•œ Bucketì— ë‹´ê¸°ëŠ” ë°ì´í„°ì˜ ì–‘ì€ í‰ê· ì ìœ¼ë¡œ \"$ \\\\text{# of data} \\\\div \\\\text{# of bucket} $\"ê°€ ë©ë‹ˆë‹¤.\n\nì—¬ëŸ¬ ê°œì˜ Bitsë¥¼ í•˜ë‚˜ì˜ Bucketìœ¼ë¡œ ì“°ëŠ” ê²½ìš°ì—ëŠ”, ë‹¤ìŒê³¼ ê°™ì´ ë§ì€ ì–‘ì˜ Bucketì´ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-bloom-filter-1](/images/blockchain-bloom-filter-1.jpeg)\n\n![blockchain-bloom-filter-2](/images/blockchain-bloom-filter-2.jpeg)\n\n#### 3-3. ë™ì‘ì›ë¦¬\n\në¨¼ì €, ë°ì´í„°ë¥¼ hash í•˜ì—¬ ì„ì˜ì˜ ê°’ì„ ìƒì„±í•´ëƒ…ë‹ˆë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ê°’ì„ Bit Fieldì˜ í¬ê¸°ë¡œ modulo ì—°ì‚°(%)ì„ ìˆ˜í–‰í•´ì£¼ì–´ ë‚˜ì˜¨ ê²°ê³¼ë¥¼ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. ë§Œì•½, Bucketì˜ í¬ê¸°ë¥¼ 1 ì´ìƒìœ¼ë¡œ í•˜ê³  ì‹¶ë‹¤ë©´, ë‹¤ë¥¸ hash í•¨ìˆ˜ë¥¼ ìˆ˜í–‰í•˜ê±°ë‚˜ ë‹¤ì‹œ í•œë²ˆ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì—¬ ë§Œë“¤ë„ë¡ í•©ë‹ˆë‹¤.\n\n### 4. SegWit\n\n#### 4-1. ë°°ê²½\n\në¨¼ì € ê±°ë˜ì˜ ì–‘ì´ ê¸‰ê²©íˆ ì¦ê°€í•˜ë©´, Blockì— ë‹´ì„ ìˆ˜ ìˆëŠ” Transactionì˜ ì–‘ì„ ëŠ˜ë¦¬ëŠ” ê²ƒì— ëŒ€í•œ í† ì˜ê°€ ë¹ˆë²ˆí–ˆìŠµë‹ˆë‹¤. ì´ ìƒí™©ì—ì„œ ì–´ë–»ê²Œ í•˜ë©´ ë” íš¨ìœ¨ì ì¸ Transactionì˜ ì €ì¥ì„ í• ì§€ì— ëŒ€í•œ ê³ ë¯¼ì´ ê¹Šì–´ì¡ŒìŠµë‹ˆë‹¤. ë˜í•œ, Transactionì˜ ScriptSig PartëŠ” ScriptPubKeyì™€ ê²°í•©í•˜ì—¬ ì•ˆì •ì ì¸ ê²°ê³¼ë§Œ ë‚´ë†“ì„ ìˆ˜ ìˆìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì—, Transactionì˜ ScriptSigëŠ” í•˜ë‚˜ì˜ ê³ ì •ëœ ë°ì´í„°ê°€ ì•„ë‹Œ ì—¬ëŸ¬ ë‹¤ë¥¸ í˜•íƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ë°”ê¾¸ê²Œ ë˜ë©´, Transactionì˜ ê°’ì„ Hash í•˜ì—¬ ì–»ëŠ” Transactionì˜ IDê°€ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì—, ë‹¤ë¥¸ Transactionìœ¼ë¡œ ì—¬ê¸°ê³  Bugê°€ ë°œìƒí•˜ê¸°ë„ í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n#### 4-2. ì •ì˜\n\nSegrete Witnessì˜ ì¤„ì„ë§ë¡œ, Blockì—ì„œ ë¶€í„° ì„œëª… ë¶€ë¶„ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, ë‘ ê°€ì§€ ì¥ì ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ, í•˜ë‚˜ì˜ Blockì— ë” ë§ì€ Transactionì„ í¬í•¨í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ì„œëª… ë¶€ë¶„ì˜ ì½”ë“œê°€ ì¡°ê¸ˆì”©ë§Œ ë°”ë€Œì–´ë„ Transaction IDê°€ ë°”ë€Œì–´ í˜¼ë€ì´ ë°œìƒí•˜ëŠ” Transaction Malleability ìœ„í˜‘ì„ ì°¨ë‹¨í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n#### 4-3. ë™ì‘ì›ë¦¬*\n\në°”ë¡œ ê¸°ì¡´ ScriptSig ë¶€ë¶„ì„ ë¹„ì›Œë‘ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ë³€í™”í•˜ì§€ ì•ŠëŠ” í˜•íƒœë¡œ ë‘ê³ , ì´ì „ì— ë³´ì•˜ë˜ p2pshì˜ redeemScriptì²˜ëŸ¼ í›„ì— ë³€í™˜í•  ìˆ˜ ìˆëŠ” ScriptSigë¥¼ ë³„ë„ë¡œ ì €ì¥í•˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì›ë¦¬ëŠ” Simple í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ê¸°ì–µí•´ì•¼ ë  ê²ƒì€ SegWitê°€ Soft-forkë¥¼ í†µí•´ì„œ êµ¬í˜„ë  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì¦‰, ì´ì „ì— SegWitë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Nodeë“¤ê³¼ë„ í˜¸í™˜ì´ ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤. Soft-forkë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ, êµ¬ì¡°ëŠ” ë” ë³µì¡í•´ì§€ê³ , ì´í•´í•  ìˆ˜ ì—†ëŠ” í˜•íƒœê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒì´ Bitcoin ì‹œìŠ¤í…œì—ì„œ í˜¸í™˜ì„±ì´ í° ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ëŠ” ì•„ì£¼ ëŒ€í‘œì ì¸ ì˜ˆì‹œì´ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì•Œì•„ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤.\n\nì´ì „ ê¸€ê³¼ ë™ì¼í•˜ê²Œ êµ¬í˜„ ì‚¬í•­ì€ githubì— ì •ì˜í•´ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n","slug":"bitcoin-4","date":"2022-03-25 17:59","title":"[Bitcoin] 4. Blockchain","category":"Tech","tags":["BlockChain","Bitcoin"],"thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\nì ì  ë‹¤ì–‘í•œ ì–¸ì–´ë“¤ì´ ìƒê²¨ë‚˜ê³ , ê°ì²´ ì§€í–¥ì— ëŒ€í•œ ê´€ì‹¬ì´ ì‹œë“¤í•´ì§€ê³  ìˆëŠ” í™˜ê²½ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì—¬ëŸ¬ ì‹œìŠ¤í…œì—ì„œë„ ê±°ì˜ ê³ ìœ  ëª…ì‚¬ë¡œ ì“°ì´ê³  ìˆê¸°ì— ê°ì²´ ì§€í–¥ì˜ ëŒ€í‘œì ì¸ ë””ìì¸ íŒ¨í„´ì„ ìµí˜€ë‘ëŠ” ê²ƒì€ í•„ìˆ˜ì ì´ë¼ê³  ìƒê°í•´ì„œ ì œê°€ ë´¤ì„ ë•Œ ê°€ì¥ ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©ë˜ëŠ” ìš©ì–´ì— ëŒ€í•´ì„œ ì •ë¦¬ë¥¼ ì¢€ í•´ë³´ê³ ì í•©ë‹ˆë‹¤.\n\ní•´ë‹¹ ê¸€ì—ì„œëŠ” ì¼ë‹¨ introductionì— ëŒ€í•œ ë‚´ìš©ì„ ì •ë¦¬í•©ë‹ˆë‹¤.\n\n## Reference\n\n- Design Patterns: Elements of reusable object oriented software.\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Design Pattern\n\nsoftwareì ìœ¼ë¡œ íŠ¹ì • ìƒí™©ì—ì„œ ì¼ë°˜ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë°˜ë³µë˜ì–´ ì‚¬ìš©ë˜ëŠ” patternì„ ë§í•©ë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ algorithmì´ ì•„ë‹Œ ì´ëŸ° êµ¬ì¡°ê°€ ë” ê²½í—˜ìƒ ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ì´ë£° ìˆ˜ ìˆë‹¤ëŠ” templateë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ patternë“¤ì€ 4ê°œì˜ ìš”ì†Œë¥¼ ê°€ì§‘ë‹ˆë‹¤.\n\n1. **Pattern name** : patternì˜ ì‹¤ì œ ì´ë¦„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n2. **Problem** : ì–¸ì œ í•´ë‹¹ patternì„ ì ìš©í•˜ëŠ”ì§€ë¥¼ í‘œê¸°í•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ patternìœ¼ë¡œ ì—¬ëŸ¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤ë©´, ë‹¹ì—°íˆ list í˜•íƒœë¡œë„ í‘œê¸°í•©ë‹ˆë‹¤.\n3. **Solution** : designì„ ì´ë£¨ëŠ” ìš”ì†Œë“¤ê³¼ ê´€ê³„, ì—­í• (ì±…ì„)ì„ ëª…ì‹œí•œë‹¤. í•˜ë‚˜ì˜ ë¬¸ì œì— ì •í™•í•˜ê²Œ ëŒ€ì¹˜ë˜ëŠ” í•´ê²°ì±…ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ êµ¬ì¡°ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆëŠ” templateë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n4. **Consequences** : í•´ë‹¹ patternì„ ì ìš©í•˜ê²Œ ë˜ì—ˆì„ ë•Œ ì–»ê²Œ ë˜ëŠ” ê²°ê³¼ë¡œ, ëŒ€ê²Œ ìœ ì—°í•˜ê²Œ í™•ì¥ì´ë‚˜ ì¬ì‚¬ìš©ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ê´€ì ì—ì„œ ì¥ì ê³¼ ë‹¨ì ì„ í‘œê¸°í•©ë‹ˆë‹¤.\n\nì´ ì±…ì—ì„œ ë§í•˜ëŠ” design patternë“¤ì´ ì¶”ê°€í•˜ëŠ” ê°€ì¥ í° ëª©í‘œëŠ”\n\nObject Oriented Programmingì„ 100% í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n<mark>**ì´ëŠ” Maintainable í•˜ê¸° ìœ„í•´ì„œ, ê°€ë…ì„±ì´ ë†’ê³  ìœ ì—°í•˜ë©°, ì¬ì‚¬ìš©ì´ ì¢‹ì€ systemì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì°¾ëŠ” ê²ƒì´ë¼ëŠ” ë§ê³¼ ê°™ìŠµë‹ˆë‹¤.**</mark>\n\nì´ë¥¼ í•­ìƒ ë¨¸ë¦¿ì†ì— ë‘ê³ , ì´ì–´ ë‚˜ê°‘ì‹œë‹¤.\n\n### Example) MVC\n\ndesign patternì— ëŒ€í•˜ì—¬ ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ì˜ˆì‹œì…ë‹ˆë‹¤. ë§Œì•½, MVC ìì²´ê°€ ìƒì†Œí•˜ë‹¤ë©´, ë„˜ì–´ê°€ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\nê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ UI ì‘ì—…ì„ í•˜ê²Œ ë  ë•Œ ë§ì´ ì‚¬ìš©ë˜ëŠ” design patternì…ë‹ˆë‹¤. ì´ë¥¼ êµ¬ì„±í•˜ëŠ” Model / View / Controllerì˜ ì• ê¸€ìë¥¼ í•˜ë‚˜ì”© ê°€ì ¸ì™€ì„œ ì´ë¥¼ ì§€ì€ ê²ƒì…ë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ, Modelì€ applicationì˜ dataë¥¼ í‘œí˜„í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤.  \nViewëŠ” modelì„ userë“¤ì—ê²Œ ë³´ì—¬ì£¼ëŠ” ë°©ë²•ì„ ì •ì˜í•œ ê°ì²´ì…ë‹ˆë‹¤.  \nControllerëŠ” user inputì— ëŒ€í•˜ì—¬ model ë˜ëŠ” viewë¥¼ ì–´ë–»ê²Œ ë³€ê²½í• ì§€ë¥¼ ì •ì˜í•œ ê°ì²´ì…ë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ, í”íˆ ì‚¬ìš©ë˜ëŠ” design pattern 3ê°€ì§€ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n> **1. Observer pattern**\n\nì´ëŠ” modelê³¼ viewë¥¼ ë¶„ë¦¬í•˜ê³ , subscribe/notify í˜•íƒœë¥¼ ê°–ê²Œ í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.(viewëŠ” modelì˜ ë³€ê²½ì´ë¼ëŠ” eventë¥¼ êµ¬ë…í•˜ê³  ìˆê³ , modelì€ ìì‹ ì´ ë³€ê²½ë˜ë©´, viewì—ê²Œ ì´ë¥¼ ì•Œë ¤ì„œ, viewê°€ ë³€ê²½ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤.)\n\nì´ë ‡ê²Œ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ì–»ëŠ” íš¨ê³¼ëŠ” ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ modelì— ëŒ€í•´ì„œ ì—¬ëŸ¬ ê°œì˜ viewë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ë˜í•œ, ìƒˆë¡œìš´ viewë¥¼ ì¶”ê°€í•  ë•Œì—ë„ modelì„ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨ìœ¼ë¡œ ì‰½ê²Œ í™•ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> **2. Composite pattern**\n\nViewëŠ” ì¤‘ì²©í•´ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, Viewì•ˆì— Viewë¥¼ ì¤‘ì²©í•´ì„œ ìŒ“ìŒìœ¼ë¡œì¨ ì¬ì‚¬ìš©ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.\n\n> **3. Strategy pattern**\n\nViewëŠ” user inputì„ ë°›ëŠ” ì¥ì¹˜(button) ë“±ì„ í¬í•¨í•˜ê³  ìˆê³ , Controller instanceë¥¼ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, í•´ë‹¹ instanceë¥¼ êµì²´í•¨ìœ¼ë¡œì¨ ì‰½ê²Œ ë™ì‘ì„ ë³€ê²½í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n\n### **Type**\n\ní•´ë‹¹ ì±…ì—ì„œëŠ” ì´ 23ê°€ì§€ì˜ design patternì„ ì œì‹œí•©ë‹ˆë‹¤. ê·¸ë“¤ì„ ë¶„ë¥˜í•˜ëŠ” ì²´ê³„ë¥¼ ì–´ëŠ ì •ë„ ë‚˜ëˆˆë‹¤ë©´ ì‰½ê²Œ ì´í•´ê°€ ê°€ëŠ¥í•  ê²ë‹ˆë‹¤.\n\n> **1. Purpose**\n\nì‹¤ì œë¡œ í•´ë‹¹ patternì´ í•˜ê³ ì í•˜ëŠ” ë°”ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ 3 ê°€ì§€ì˜ ëª©ì ìœ¼ë¡œ design patternì„ ë‚˜ëˆˆ ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n1. **Creational** :Â objectì˜ ìƒì„± ì‹œì— íŠ¹ì • ë¶€ë¶„ì„ ìì‹ class ë˜ëŠ” ë‹¤ë¥¸ objectë¡œ ì˜®ê¸°ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\n2. **Structural**Â : class ë˜ëŠ” objectë¥¼ êµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\n3. **Behavioral**Â : class ë˜ëŠ” objectê°€ íŠ¹ì • í–‰ë™ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ê° ìš”ì†Œì˜ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n\n> **2. Scope**Â : êµ¬í˜„ì´ ê¸°ë³¸ì ìœ¼ë¡œ class ë‹¨ìœ„ì¸ì§€, object ë‹¨ìœ„ ì¸ì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\n1. **Class**Â : classë“¤ê³¼ subclassë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ë‹¤ë£¨ê¸° ë•Œë¬¸ì—, ìƒì†ì— ì˜í•´ì„œ ì •ì˜ë˜ë©°, compile timeì— ê³ ì •ë˜ì–´ì„œ ë°”ë€Œì§€ ì•ŠìŠµë‹ˆë‹¤.\n2. **Object** :Â objectë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ì˜ë¯¸í•˜ë©°, run timeì— ìœ ë™ì ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![design-pattern-category](/images/design-pattern-category.jpeg)\n\n### Basic Skill\n\ndesign patternì´ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì¼ë°˜ì ì¸ ê¸°ìˆ ë“¤ì„ ë¨¼ì € ì´í•´í•˜ë©´, ì´ë¥¼ ì¡°í•©í•´ì„œ ìš°ë¦¬ëŠ” design patternì„ êµ¬ì„±í•  ê²ƒì´ë¯€ë¡œ, ì´ ì¼ë°˜ì ì¸ ê¸°ìˆ ë¶€í„° ì•Œì•„ë³´ê³  ê°€ë„ë¡ í•©ì‹œë‹¤.\n\n#### <mark>Object Oriented Programming</mark>\n\nì´ ì±…ì˜ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ê°ì²´ ì§€í–¥ì— ëŒ€í•œÂ  ë‚´ìš©ì…ë‹ˆë‹¤. ì´ë¥¼ ì½ê³  ì•„ë˜ë¥¼ ì½ìœ¼ì‹œëŠ” ê²ƒì´ ì´í•´ê°€ ë” ì‰¬ìš¸ ê²ƒì…ë‹ˆë‹¤. ì´ë¯¸ ì•Œê³  ìˆë‹¤ë©´, ë°”ë¡œ ë‹¤ìŒë¶€í„° ì½ìœ¼ì‹œë©´ ë  ê±° ê°™ìŠµë‹ˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ object oriented programì—ì„œ <mark>object</mark>ë€ dataì™€ í•´ë‹¹ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ëŠ” ì—¬ëŸ¬ operationë¥¼ ë¬¶ì€ ê²ƒì„ ë§í•©ë‹ˆë‹¤. ì´ë•Œ, ìš°ë¦¬ëŠ” í•´ë‹¹ object ì•ˆì˜ dataë¥¼ ì§ì ‘ì ìœ¼ë¡œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ê³ , objectì—ê²Œ operationì˜ ë™ì‘ì„ ìš”ì²­í•¨ìœ¼ë¡œì¨ outputìœ¼ë¡œì¨ dataë¥¼ ì–»ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìš°ë¦¬ëŠ” encapsulated ë˜ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤.\n\nobjectì— ì˜í•´ì„œ ì„ ì–¸ëœ ëª¨ë“  operationì€ ì´ë¦„ê³¼ input parameter, output valueë¥¼ ëª…ì‹œí•œ signatureë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì´ëŸ¬í•œ signatureë¥¼ ëª¨ì•„ë†“ì€ ê²ƒì„ í•´ë‹¹ objectì˜ <mark>interface</mark>ë¼ê³  í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, interfaceì— ìˆëŠ” ë‚´ìš©ì„ ë§Œì¡±í•˜ëŠ” requestë§Œì´ objectë¡œ ë³´ë‚´ì§„ ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ interfaceëŠ” ì ˆëŒ€ë¡œ êµ¬í˜„ì„ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨ì§€ í•´ë‹¹ operationì— ëŒ€í•œ ì´ë¦„ê³¼ input, outputì„ ì•Œë ¤ì¤„ ë¿ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ê°™ì€ ì´ë¦„ì´ë©°, ë“¤ì–´ê°€ëŠ” ë°ì´í„°, ë‚˜ì˜¤ëŠ” ë°ì´í„°ëŠ” ê°™ì§€ë§Œ ì „í˜€ ë‹¤ë¥¸ êµ¬í˜„ì„ ê°€ì§€ë„ë¡ ë§Œë“¤ ìˆ˜ë„ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ì²˜ëŸ¼ run timeì— interfaceë¥¼ implementation í•œ object ì¤‘ì—ì„œ ë¬´ì—‡ì„ ì‹¤í–‰ì‹œí‚¬ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì„ dynamic bindingì´ë¼ê³  í•©ë‹ˆë‹¤. interfaceê°€ runtimeì— ì •í™•í•˜ê²Œ ì–´ë–»ê²Œ ë™ì‘í• ì§€ ì—¬ëŸ¬ í˜•íƒœë¥¼ ê°€ì§€ëŠ” ê²ƒì„ ìš°ë¦¬ëŠ” polymorphismì´ë¼ê³  í•©ë‹ˆë‹¤.\n\nì´ êµ¬ì¡°ê°€ ê°€ì§€ëŠ” ì¥ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n> **1. ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤.**\n\n\"ìš°ë¦¬ê°€ ê¸€ì„ ì“°ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ì—°í•„ì´ í•„ìš”í•˜ë‹¤.\"ëŠ” ê·œì¹™ì„ ì •í–ˆë‹¤ë©´,\n\nìš°ë¦¬ëŠ” ìƒ¤í”„ë‚˜ ë‹¤ë¥¸ ë³¼íœì´ ìˆë”ë¼ë„ ì´ ê·œì¹™ì— ì–´ê¸‹ë‚˜ë¯€ë¡œ ìš°ë¦¬ëŠ” ê¸°ì¡´ ê·œì¹™ì„ ë‹¤ì‹œ ë°”ê¾¸ê±°ë‚˜ ì—°í•„ì„ ê°€ì ¸ì™€ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ì• ì´ˆì— ê·œì¹™ì„ \"ìš°ë¦¬ê°€ ê¸€ì„ ì“°ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ê²€ì€ìƒ‰ì„ í‘œì‹œí•  ìˆ˜ ìˆëŠ” ë„êµ¬ê°€ í•„ìš”í•˜ë‹¤.\"ëŠ” ê·œì¹™ì„ ì •í–ˆë‹¤ë©´, ë” ìœ ì—°í•œ ê·œì¹™ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nìš°ë¦¬ì˜ ì½”ë“œë„ ë§ˆì°¬ê°€ì§€ë¡œ interfaceë¥¼ í†µí•´ì„œ ê²€ì€ìƒ‰ ê¸€ìë¥¼ ì“°ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œ interfaceë¡œ ì„ ì–¸í•˜ê³  ì´ë¥¼ typeìœ¼ë¡œ ì§€ì •í•´ë‘”ë‹¤ë©´, ì´ë¥¼ ì‹¤í–‰í•˜ëŠ” objectê°€ ì—°í•„, ìƒ¤í”„, ë³¼íœ ë¬´ì—‡ì´ ë˜ì–´ë„ ë˜ê¸° ë•Œë¬¸ì— ëŒ€ì²´ ê°€ëŠ¥í•œ êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n> **2. ìœ ì—°í•˜ë‹¤.**\n\nìœ„ì˜ ì²˜ëŸ¼ ê·œí˜„ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” ìœ ì—°í•˜ê²Œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ê´€ê³„ê°€ ëŠìŠ¨í•˜ê²Œ ì—°ê²°ëœë‹¤ê³  SW ì—…ê³„ì—ì„œëŠ” ìì£¼ í‘œí˜„í•©ë‹ˆë‹¤.\n\nê°€ëŠ¥í•œ í•œ ìµœì†Œí•œì˜ ê¸°ëŠ¥ë§Œì„ í†µí•´ì„œë§Œ ëŒ€ìƒì„ ì •ì˜í•œë‹¤ë©´, ë”ìš±ë” ìœ ì—°í•œ êµ¬ì¡°ê°€ ëœë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n> **3. ê°€ë…ì„±ì´ ì¢‹ë‹¤.**\n\nìš°ë¦¬ëŠ” í•´ë‹¹ objectë¥¼ ì‚¬ìš©í•  ë•Œ ì´ê²ƒì´ ì–´ë–»ê²Œ ëŒì•„ê°€ëŠ”ì§€ ëª¨ë¥´ë”ë¼ë„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤. ìŠ¤ë§ˆíŠ¸í°ì„ ê°€ë™ì‹œí‚¤ê¸° ìœ„í•´ì„œ ì´ê²ƒì˜ ë¶€íŒ… ì ˆì°¨ì™€ ì—¬ëŸ¬ algorithmì„ ì´í•´í•˜ëŠ” ê²ƒì€ ìš°ë¦¬ê°€ ë¬¸ìë¥¼ ë³´ë‚´ëŠ” ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ìµœëŒ€í•œ ìµœì†Œí•œì˜ ë‚´ìš©ë§Œì„ ì•Œë©´ ë©ë‹ˆë‹¤. ê°€ë ¹ \"ì˜¤ë¥¸ìª½Â  ì „ì› ë²„íŠ¼ì„ ëˆ„ë¥´ë©´(input) í™”ë©´ì´ ì¼œì§„ë‹¤(output)\"ëŠ” ì´ëŸ¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì´ëŠ” ìš°ë¦¬ê°€ ë” ë³µì¡í•œ ë¬¸ì ë©”ì‹œì§€ ë³´ë‚´ê¸°ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆëŠ” í† ëŒ€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n> **4. ë¬¸ì„œí™”ê°€ ìš©ì´í•˜ë‹¤.**\n\nì´ì œ ìš°ë¦¬ê°€ ì‹œìŠ¤í…œì„ íŒë§¤í•˜ê±°ë‚˜ ì´ë¥¼ í†µí•´ì„œ ê°™ì´ ì¼í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸´ë‹¤ë©´, ì´ì— ëŒ€í•œ ì„¤ëª…ì„œê°€ í•„ìš”í•©ë‹ˆë‹¤. ë§Œì•½, ì—¬ëŸ¬ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ì„ í•´ë‘ì—ˆë‹¤ë©´, í†µì¼ì„± ìˆëŠ” ë¬¸ì„œë¥¼ ê¸°ëŒ€í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, interfaceë¥¼ í†µí•´ì„œ êµ¬í˜„í–ˆë‹¤ë©´, ì´ interfaceê°€ ìš”êµ¬í•˜ëŠ” ë™ì‘ë§Œì„ ì •í™•í•˜ê²Œ ì ì–´ë‘”ë‹¤ë©´, ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆê³  êµ¬ì¡°í™”ëœ ë¬¸ì„œë¥¼ ë§Œë“¤ê¸°ê°€ ìš©ì´í•©ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, ì‹¤ì œë¡œ programmingì—ì„œ ì´ interfaceì™€ objectë¥¼ êµ¬í˜„í•˜ëŠ”ì§€ë¥¼ ì‚´í´ë³´ì•„ì•¼ í•©ë‹ˆë‹¤.\n\nëŒ€ê²Œì˜ ì–¸ì–´ì—ì„œëŠ” interface, abstract classë¼ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ë“¤ì„ ê° ê° ì´ë“¤ì„ êµ¬í˜„ ë˜ëŠ” ìƒì†í•  ëŒ€ìƒë“¤ì´ ë°˜ë“œì‹œ ê°€ì ¸ì•¼ í•  ìš”ì†Œ(name, input parameter, return value)ì— ëŒ€í•œ ë‚´ìš©ì„ ê¸°ìˆ í•©ë‹ˆë‹¤.\n\nê·¸ëŸ¬ë©´ ìš°ë¦¬ëŠ” classë¥¼ í†µí•´ì„œ ì´ì— ëŒ€í•œ êµ¬í˜„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ interfaceì— ëŒ€í•˜ì—¬ ì—¬ëŸ¬ ê°œì˜ êµ¬í˜„ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. (ì´ë¥¼ êµ¬í˜„ì„ defer(ë¯¸ë£¨ì—ˆë‹¤)ê³  í‘œí˜„í•©ë‹ˆë‹¤.) ê·¸ë¦¬ê³ , ì´ì œ ì‹¤ì œë¡œ ë§Œë“¤ì–´ì§€ëŠ” objectë“¤ì„ ìš°ë¦¬ëŠ” classë¥¼ <mark>instantiating</mark>(í‹€ì„ ê¸°ë°˜ìœ¼ë¡œ ë³µì‚¬)í•˜ì—¬ ìƒì„±í•˜ëŠ”ë° ì´ë•Œ ë§Œë“¤ì–´ì§„ ëŒ€ìƒì„ ìš°ë¦¬ëŠ” íŠ¹ë³„íˆ <mark>instance</mark>ë¼ê³  í•©ë‹ˆë‹¤.\n\në˜í•œ, classë¥¼ ì„ ì–¸í•œë‹¤ëŠ” ê²ƒì€ ìš°ë¦¬ì—ê²Œ ë‘ ê°€ì§€ íš¨ê³¼ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. classë¼ëŠ” instantiating í•˜ê¸° ìœ„í•œ í‹€ì„ ë§Œë“¤ ë¿ë§Œ ì•„ë‹ˆë¼ <mark>type</mark>ì„ ìƒì„±í•©ë‹ˆë‹¤. ì¦‰ ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ instanceë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë  ë•Œ ì•ì— ìˆëŠ” ClassëŠ” classì˜ typeì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ê³ , ë’¤ì— ìˆëŠ” ê²ƒì€ instanceë¥¼ ë§Œë“¤ê¸° ìœ„í•œ í‹€ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\n```c++\nSimpleClass sc = new SimpleClass();\n```\n\nê·¸ë ‡ìŠµë‹ˆë‹¤. ë§Œì•½ ìš°ë¦¬ê°€ classë¥¼ interfaceì˜ êµ¬í˜„ìœ¼ë¡œ ë§Œë“  ê²ƒì´ ì•„ë‹ˆë¼ë©´, interface typeì„ ë§Œë“¤ë©´ì„œ, class í‹€ê¹Œì§€ ê°™ì´ ë§Œë“  ê²ƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, interfaceì™€ ë‹¤ë¥¸ ì ì´ë¼ë©´, ì´ë¥¼ ìƒì†í•˜ê²Œ ë˜ë©´, ì´ ì•ˆì˜ êµ¬í˜„ë„ ê°™ì´ subclassë¡œ ì „ë‹¬ëœë‹¤ëŠ” ì ì´ ìˆê² ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ë” ìœ ì—°í•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ê³ ì í•œë‹¤ë©´, ë‹¹ì—°íˆ ì¼ë°˜ classë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” typeë¥¼ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ëŠ” abstract class ë˜ëŠ” interfaceë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” typeì„ í™œìš©í•˜ëŠ” ê²ƒì´ ë” ìœ ì—°í•˜ê³ , reusable í•œ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” í•µì‹¬ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ ë‹¤ë£° ë‚´ìš©ì€ classì˜ êµ¬ì„± ë°©ì‹ì…ë‹ˆë‹¤.\n\në§Œì•½, íŠ¹ì • ì‹œìŠ¤í…œì´ ë¬´ì–¸ê°€ë¥¼ êµ¬í˜„í•œë‹¤ê³  í–ˆì„ ë•Œ, \"AëŠ” Bë‹¤\"ë¥¼ í†µí•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ ì•„ë‹ˆë©´, \"AëŠ” Bë¥¼ ê°–ê³  ìˆë‹¤\"ë¥¼ í†µí•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê°€ì…ë‹ˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ìƒì†ì„ í†µí•´ì„œ í‘œí˜„ë˜ëŠ” ê´€ê³„ë¥¼ \"inheritance\" ë˜ëŠ” \"is a\" ê´€ê³„ë¼ê³  í•©ë‹ˆë‹¤. ì¦‰, Aê°€ Bë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì†í•œë‹¤ë©´, AëŠ” Bì´ë‹¤.ë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, Bë¥¼ ìƒì†í•˜ëŠ” AëŠ” ë‹¹ì—°íˆ Bì˜ í•˜ìœ„ ê´€ê³„ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. (ex. ì½”ë¼ë¦¬ëŠ” ë™ë¬¼ì´ë‹¤.) í•˜ì§€ë§Œ, ìƒì†ì´ ì•„ë‹Œ ë³€ìˆ˜ë¡œì„œ ì´ë¥¼ í¬í•¨í•  ë•Œ ìš°ë¦¬ëŠ” ì´ë¥¼ \"composition\" ë˜ëŠ” (\"has\" or \"use\") ê´€ê³„ë¼ê³  í•©ë‹ˆë‹¤. ì¦‰, Aê°€ Bë¥¼ ê°–ê³  ìˆë‹¤ë¡œ ë³´ëŠ” ê²ƒì…ë‹ˆë‹¤. (ex. ì½”ë¼ë¦¬ëŠ” ë™ë¬¼ì˜ ì†ì„±ì„ ê°€ì§„ë‹¤.)\n\nì´ ì¤‘ì—ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ì§€ëŠ” ìëª…í•©ë‹ˆë‹¤. ë‹¹ì—°íˆ compositionì…ë‹ˆë‹¤.\n\nì´ë¥¼ ì•Œì•„ë³´ê¸° ìœ„í•´ì„œ êµ¬í˜„ì´ ë°”ë€ŒëŠ” ì˜ˆì‹œë¥¼ ë“¤ì–´ë´…ì‹œë‹¤.\n\n- ë§Œì•½, ì½”ë¼ë¦¬ ì¤‘ì—ì„œ ì½”ê°€ ì§§ì€ ê°œì²´ê°€ ë°œê²¬ë˜ì–´ ë” ì´ìƒ ì½”ë¼ë¦¬ëŠ” ì½”ê°€ í¬ë‹¤ëŠ” ì†ì„±ì„ ì“¸ ìˆ˜ ì—†ëŠ” ê²½ìš°\n  - inheritance, composition : ë‘˜ ë‹¤ êµ¬í˜„ë¶€ì—ì„œ ì‰½ê²Œ ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ì½”ë¼ë¦¬ ì¤‘ì—ì„œ ì™¸ê³„ì— ì¡´ì¬í•˜ëŠ” ì¢…ì´ ë°œê²¬ë˜ì–´ ì™¸ê³„ì¢…ì˜ íŠ¹ì§•ì„ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ê²½ìš°\n  - inheritance : ì™¸ê³„ ìƒëª…ì²´ë¼ëŠ” interfaceë¥¼ ì¶”ê°€ë¡œ ìƒì†í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ê³¼ì •ì—ì„œ ì¶©ëŒë˜ëŠ” ì†ì„±ë“¤(ex. ê²¹ì¹˜ëŠ” operation ì´ë¦„, ì„œë¡œ ë°˜ëŒ€ë˜ëŠ” ì„±ì§ˆ) ë“±ì— ì˜í•´ì„œ ìµœì•…ì˜ ê²½ìš° interfaceë¥¼ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ëŠ” ê²½ìš° ì´ interfaceë¥¼ êµ¬í˜„í•œ ëª¨ë“  classë“¤ ì—­ì‹œ ë³€ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤\n  - composition: í•´ë‹¹ ì™¸ê³„ ìƒëª…ì²´ë¼ëŠ” ì†ì„±ì„ ê°€ì ¸ì™€ì„œ í•„ìš”ë¡œ í•˜ëŠ” ì†ì„±ë§Œì„ í™•ì¸í•˜ê³  êµ¬í˜„í•©ë‹ˆë‹¤.\n- ì½”ë¼ë¦¬ë¼ëŠ” ì‹ë¬¼ì´ ìƒˆë¡œ ë°œê²¬ëœ ê²½ìš° => ëª¨ë‘ í¬ê²Œ ë³€ê²½í•´ì•¼ í•¨.\n  - inheritance : ìƒì†ì„ ì‹ë¬¼ë¡œ ë³€ê²½í•˜ê³ , ì‹ë¬¼ì˜ ì†ì„±ì— êµ¬í˜„ëœ ê²ƒì„ ìƒˆë¡œ ì •ì˜í•©ë‹ˆë‹¤.\n  - composition : ê°€ì§€ê³  ìˆë˜ ë³€ìˆ˜ë¥¼ ì‹ë¬¼ë¡œ ë³€ê²½í•˜ê³ , ë³€ìˆ˜ì— ì˜ì¡´ì„±ì´ ìˆë˜ ë¶€ë¶„ì„ ì§ì ‘ ë°”ê¾¸ì–´ êµ¬í˜„í•©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ëŒ€ê°œì˜ ê²½ìš° ìƒì†ì€ interfaceë¥¼ ì§ì ‘ì ìœ¼ë¡œ êµ¬í˜„í•  ë•Œì—ë§Œ ì‚¬ìš©í•˜ê³ , ê·¸ ì™¸ì— ê²½ìš°ì— compositionì„ í†µí•´ì„œ ì˜ì¡´ì„±ì„ í˜•ì„±í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤.\n\ncompositionì€ í•´ë‹¹ ê´€ê³„ê°€ run-timeì— ìƒì„±ë˜ëŠ”ê°€ ì•„ë‹ˆë©´, compile-timeì— ìƒì„±ë˜ëŠ”ê°€ì— ë”°ë¼ì„œ ë‘ ê°œë¡œ ë‚˜ë‰  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§Œì•½, class ë‚´ë¶€ì—ì„œ í•´ë‹¹ ë³€ìˆ˜ë¥¼ ìƒì„± ì‹œë¶€í„° ì†Œë©¸ ì‹œê¹Œì§€ ê°–ê³  ìˆëŠ”ë‹¤ë©´, ì´ëŠ” <mark>aggregation</mark>(have)ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì¦‰, compile timeì— ê´€ê³„ê°€ í˜•ì„±ë©ë‹ˆë‹¤.) ê·¸ë ‡ì§€ ì•Šê³ , run timeì— ìƒì„±ë˜ì–´ ì ê¹ ì‚¬ìš©ë˜ëŠ” ì •ë„ì˜ ê´€ê³„ë¼ë©´, ì´ëŠ” <mark>acquaintance</mark>(use) ê´€ê³„ë¡œ ë´…ë‹ˆë‹¤.\n\n#### Finding Appropriate Objects\n\nìš°ë¦¬ê°€ í•´ê²°í•˜ê³ ì í•˜ëŠ” ë¬¸ì œë¥¼ ìœ„í•´ì„œ ì–´ëŠ ì •ë„ê¹Œì§€ì˜ objectë“¤ì´ í•„ìš”í•˜ê³ , ì´ë¥¼ ì–´ë–»ê²Œ ì •ì˜í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì„ ë„ì™€ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.(Composite, Strategy,...)\n\n#### Determining Object Granuality\n\nObjectë¥¼ ë¬´ì—‡ìœ¼ë¡œ ê²°ì •í–ˆë‹¤ë©´, ë‹¹ì—°íˆ ì´ Objectì˜ í¬ê¸°ë¥¼ ì–´ëŠ ì •ë„ë¡œ í• ì§€ì— ëŒ€í•œ ë‚´ìš©ë„ í•„ìš”í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ì •ì˜í•˜ëŠ” design pattern(Facade, FlyWeight,...)ë„ ì¡´ì¬í•©ë‹ˆë‹¤.\n\n#### Specifying Object Interfaces\n\në¬´ì—‡ì„ interfaceì— ì¶”ê°€í•´ì•¼ í•˜ëŠ”ì§€ ì•„ë‹ˆë©´ í¬í•¨ì‹œì¼œì„œëŠ” ì•ˆ ë˜ëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì„ ì„œìˆ í•œ design pattern(Memento), interface ê°„ì˜ ê´€ê³„ë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒ(Decorator, Proxy)ë„ ìˆìŠµë‹ˆë‹¤.\n\n#### Delegation\n\ndelegationì€ ìì‹ ì˜ operationì˜ êµ¬í˜„ì„ composition í•œ instanceì—ê²Œ ë§¡ê¸°ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n![delegation](/images/delegation.jpeg)\n\në³´ëŠ” ë°”ì™€ ê°™ì´ ìì‹ ì˜ Areaë¼ëŠ” í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ Rectangleì˜ Area í•¨ìˆ˜ë¡œ ëŒ€ì²´í•¨ìœ¼ë¡œì¨ ë” ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ì— Windowê°€ Circleë¡œ ë°”ë€ë‹¤ë©´ ê°„ë‹¨íˆ Circleì˜ instanceë¥¼ ìƒì„±í•´ì„œ ì´ instanceì˜ Areaë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•˜ë©´ ë  ê²ƒì…ë‹ˆë‹¤.\n\nì´ëŠ” êµ‰ì¥íˆ ìœ ìš©í•˜ê³ , ìœ ì—°í•œ ê°œë°œì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ë‹¤ë¥¸ instanceì˜ ìš”ì†Œë¥¼ ì‹¤í–‰ì‹œí‚¤ë‹ˆ ë§Œí¼ run-time ì¤‘ì— ë¹„íš¨ìœ¨ì ì¸ ë™ì‘ì„ ë§‰ì„ ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ìœ ì˜í•˜ê³  ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì‹¤ì œë¡œë„ State, Strategy patternì—ì„œë„ ì‚¬ìš©ë©ë‹ˆë‹¤.\n","slug":"design-pattern-1","date":"2022-02-20 16:48","title":"[Design Pattern] 1. Intro","category":"Tech","tags":["DesignPattern","OOP"],"thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\n## Reference\n\n- Design Patterns: Elements of reusable object oriented software.\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Creational Pattern\n\nobjectì˜ instantiationì„ ì¶”ìƒí™”í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.\n\nì¦‰, instanceë¥¼ ë§Œë“¤ ë•Œ, ì–´ë–»ê²Œ í•˜ë©´ ì¬ì‚¬ìš©ê³¼ ë³€ê²½ì— ìœ ìš©í•œ êµ¬ì¡°ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œì— ëŒ€í•œ ê³ ë¯¼ì˜ ê²°ê³¼ë¡œ ë‚˜ì˜¨ patternì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì¼ë°˜ì ì¸ ìˆœì„œë¡œëŠ” Abstract Factory, Builder, Factory Method, Prototype, Singletonì´ì§€ë§Œ, ì œê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ìˆœì„œëŒ€ë¡œ ì •ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.\n\nëª¨ë“  ê°€ì •ì€ Appì´ë¼ëŠ” main classì—ì„œ product1ê³¼ product2ë¼ëŠ” objectê°€ í•„ìš”í•˜ë‹¤ëŠ” ê°€ì •í•˜ì—ì„œ ì´ë¥¼ ì–´ë–»ê²Œ ì–»ì–´ì˜¤ëŠ”ì§€ì— ëŒ€í•´ì„œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n### <mark>1. Singleton<mark>\n\n![singleton](/images/singleton.jpeg)\n\nê°€ì¥ ë¨¼ì € ì•Œì•„ë³¼ ê²ƒì€ Singleton ì…ë‹ˆë‹¤. ê°€ì¥ ê¸°ë³¸ì´ê¸°ì— ê°€ì¥ ì¤‘ìš”í•œ design pattern ì¤‘ì— í•˜ë‚˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\n\nìš°ë¦¬ê°€ íŠ¹ì • objectê°€ í•„ìš”í•  ë•Œ, í•´ë‹¹ ëŒ€ìƒì„ ë‹¨ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì„œ ì´ë¥¼ ì „ì—­ì—ì„œ ì ‘ê·¼í•˜ë„ë¡ í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\në‹¹ì—°íˆ ì´ ë°©ì‹ì„ ì´ìš©í•˜ê²Œ ë˜ë©´, zero copyë¼ëŠ” ì¸¡ë©´ì—ì„œ íš¨ìœ¨ì´ êµ‰ì¥íˆ ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ëŸ¬í•œ patternì„ ë‚¨ìš©í•˜ê²Œ ëœë‹¤ë©´, ëˆ„ê°€ ì´ productì— ì ‘ê·¼í•˜ê³  ìˆëŠ”ì§€ ê·¸ë¦¬ê³  ëˆ„ê°€ ë³€ê²½í–ˆëŠ”ì§€ ì•Œê¸° ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤. ë”°ë¼ì„œ, **í•´ë‹¹ Singletonì—ì„œ ì¤‘ìš”í•œ ì ì´ë¼ë©´, ë³€í•˜ì§€ ì•ŠëŠ” ê°’ë§Œ ê°€ì§€ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.**\n\nì´ë¥¼ í†µí•´ì„œ, ëˆ„ê°€ ì´ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ì‹œìŠ¤í…œì—ëŠ” ì˜í–¥ì„ ì•ˆ ì£¼ë©´, zero copyë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ íš¨ìœ¨ìƒìœ¼ë¡œë„ í›Œë¥­í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, maintainableì˜ ì…ì¥ì—ì„œëŠ” í° ì•½ì ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ êµ¬í˜„ì„ ë°”ê¾¸ê²Œ ëœë‹¤ë©´, ì „ì²´ ì‹œìŠ¤í…œì´ ì–´ë””ì„œ ì–´ë–»ê²Œ ì˜í–¥ì„ ë°›ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´ ì ì—ì„œëŠ” ì•½ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” objectì— ë³€í™”ê°€ í•„ìš”í•˜ê³ , ëŠ¥ë™ì ì¸ ì¡°ì‘ì´ í•„ìš”í•œ ê²½ìš°ì— object ìì²´ë¡œ singletonìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì—ëŠ” ì œí•œì´ ìƒê¹ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” objectì˜ instanceë¥¼ ëŒ€ì‹ í•´ì„œ ìƒì„±í•´ì£¼ëŠ” factoryë¼ëŠ” ê°œë…ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. (ì´ë“¤ì„ singletonìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.)\n\nì´ëŠ” ì €ë²ˆ ì±•í„° 1ì—ì„œ ë³´ì•˜ë˜ delegationì„ í™œìš©í•œ ê²ƒì…ë‹ˆë‹¤. ìì‹ ì´ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” objectì˜ instantiationì„ ë‹¤ë¥¸ objectì—ê²Œ ë§¡ê¸°ëŠ” í˜•ì‹ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ë³¸ì—°ì— í•˜ê³ ì í•˜ë˜ í–‰ë™ì— ì¢€ ë” ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\në‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ê¸° ì „ì—, í•œ ë²ˆ ë” ë¨¸ë¦¿ì†ì— ì •ë¦¬í•©ì‹œë‹¤. ì§€ê¸ˆì˜ Appì´ ì•Œê³  ìˆëŠ” ì‚¬í•­ì€ ë¬´ì—‡ì¼ê¹Œìš”?\n\nì–´ë–¤ ë‚´ìš©ë„ ì¶”ìƒí™”ë¥¼ í†µí•´ì„œ ê°ì¶”ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ ì•Œê³  ìˆê³ , ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ê¹Œì§€ë„ ì™„ë²½í•˜ê²Œ ì•Œê³  ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 2. Builder\n\n![builder](/images/builder.jpeg)\n\nê°€ì¥ ì‰½ê²Œ objectì˜ ìƒì„±ì„ ë§¡ê¸´ë‹¤ê³  í–ˆì„ ë•Œ, ìƒìƒí•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. IBuilderë¼ëŠ” interfaceë¥¼ í†µí•´ì„œ builderë¥¼ ë¬¶ì–´ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ, ë‹¨ìˆœíˆ ê° object(product)ì— ëŒ€í•œ builderë¥¼ ìƒì„±í•´ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n**ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê°œë…ì€ ê° productì— ëŒ€í•œ ì „ë¬¸ ìƒì„±ìë¥¼ êµ¬ì¶•í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.** ë‚´ê°€ ë§Œë“¤ê³ ì í•˜ëŠ” objectì— ëŒ€í•´ì„œ ì´ê²ƒë§Œì„ ì „ë¬¸ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” classë¥¼ singletonìœ¼ë¡œ ìƒì„±í•¨ìœ¼ë¡œì¨, ì‰½ê²Œ ë¬´ì–¸ê°€ì˜ ì œí’ˆì„ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, ì´ builderì—ê²Œ ë§¡ê¸°ë©´ ë˜ê² ë‹¤ëŠ” ì‹ì˜ ë°œìƒìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nbuilderëŠ” ì–»ê³ ì í•˜ëŠ” productì— ëŒ€í•œ ëª¨ë“  ë‚´ìš©ì„ ì¶”ìƒí™”í•´ë²„ë¦¬ê¸° ë•Œë¬¸ì—, ë‚´ë¶€ì˜ ì½”ë“œê°€ ì •êµí•˜ê²Œ ë§Œë“¤ì–´ì§€ê³  ë³€í™”ê°€ ì—†ë‹¤ë©´, ë§¤ìš° ì¢‹ê²Œ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, product í•˜ë‚˜ë¥¼ ì—¬ëŸ¬ objectë“¤ì´ ì‚¬ìš©í•œë‹¤ë©´, í›„ì— ë³€ê²½ì´ ë§¤ìš° ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\nì ì´ë²ˆì—ë„ ë„˜ì–´ê°€ê¸° ì „ì—, í•œ ë²ˆ ë” ë¨¸ë¦¿ì†ì— ì •ë¦¬í•©ì‹œë‹¤. ì§€ê¸ˆì˜ Appì´ ì•Œê³  ìˆëŠ” ì‚¬í•­ì€ ë¬´ì—‡ì¼ê¹Œìš”?\n\nìš°ë¦¬ëŠ” í˜„ì¬ builderë¼ëŠ” ëŒ€ìƒì—ê²Œ objectì˜ ìƒì„±ì„ ë„˜ê²¼ìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ ì•Œê³  ìˆì§€ë§Œ, ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì€ ëª¨ë¥´ëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 3. Abstract Factory\n\n![abstractFactory](/images/abstractFactory.jpeg)\n\nì´ì œ ê·¸ë¦¼ì´ ì¡°ê¸ˆ ë³µì¡í•´ì§‘ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì¢€ ë” ë³µì¡í•œ ìƒí™©ì„ ê³ ë ¤í•œë‹¤ëŠ” ê²ƒì„ ì§ê°ì ìœ¼ë¡œ ë°›ì•„ë“¤ì´ì‹œë©´ ë©ë‹ˆë‹¤.\n\nì´ì œ ìš°ë¦¬ëŠ” ë§Œë“¤ê³ ì í•˜ëŠ” objectë„ ì–´ë–¤ ë¶€ë¥˜ ì¤‘ì— í•˜ë‚˜ë‹¤ ì •ë„ë¡œë§Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ìƒí™©ì—ì„œ ìš°ë¦¬ëŠ” ì´ë¥¼ ë§Œë“¤ê³ ì í•˜ëŠ” object ë§ˆì € ì¶”ìƒí™”ë¥¼ í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në˜í•œ, ìš°ë¦¬ëŠ” Factoryë¥¼ Singletonìœ¼ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ëŠ” ì ì—ë„ ì£¼ëª©í•´ì•¼ í•©ë‹ˆë‹¤.\n\nê²°êµ­ ëª¨ë“  ìƒì„±ì˜ ëŒ€í•œ ê¶Œí•œì€ factoryì—ê²Œ ë„˜ì–´ê°”ê³ , í•„ìš”ì— ë”°ë¼ì„œ ìš°ë¦¬ëŠ” íŠ¹ì •í•œ factoryë¥¼ ê³¨ë¼ì„œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ product ì—­ì‹œ í•„ìš”ì— ë”°ë¼ ê³¨ë¼ì„œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ì´ patternì€ êµ‰ì¥íˆ ë¹„ì‹¼ patternì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í›„ì— ì§€ì›í•˜ê³ ì í•˜ëŠ” product ìì²´ë¥¼ í•˜ë‚˜ ë” ë§Œë“ ë‹¤ë©´, (ProductC) ì´ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ ëª¨ë“  FactoryëŠ” ì´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½ì´ ë˜ì–´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.\n\n---\n\nê·¸ëŸ¼ ì´ë²ˆì—ëŠ” ì–´ë–¨ê¹Œìš”?\n\nìš°ë¦¬ëŠ” í˜„ì¬ factoryë¼ëŠ” ëŒ€ìƒì—ê²Œ objectì˜ ìƒì„±ì„ ë„˜ê²¼ìŠµë‹ˆë‹¤. ë˜í•œ, product ë˜í•œ ì¶”ìƒí™”ë¥¼ í†µí•´ì„œ ì´ê²ƒì´ ë¬´ìŠ¨ ê¸°ëŠ¥ì„ í•˜ëŠ”ì§€ëŠ” ì–´ë ´í’‹í•˜ê²Œ ì•Œê³  ìˆì§€ë§Œ, ì´ê²ƒì´ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ëŠ” ëª¨ë¦…ë‹ˆë‹¤.(ì˜ˆì „ì—ëŠ” ì •í™•í•˜ê²Œ êµ¬ë‘ë¼ê³  ì§€ì •í–ˆë‹¤ë©´, ì´ë²ˆì—ëŠ” ë‘ë£¨ ë­‰ìˆ í•˜ê²Œ ì‹ ë°œì´ë¼ê³  ì“°ê³  ì´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.) ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ë„ ëª¨ë¥´ê³ , ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²• ë˜í•œ ëª¨ë¥´ëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 4. Prototype\n\n![prototype](/images/prototype.jpeg)\n\nPrototypeì˜ ëœ»ë¶€í„° ì•Œê³  ê°€ë©´ ì¢‹ìŠµë‹ˆë‹¤. ì´ëŠ” í•˜ë‚˜ì˜ typeì„ ëŒ€í‘œí•  ìˆ˜ ìˆëŠ” ì „í˜•ì ì¸ ì˜ˆ, ì›ë˜ì˜ í˜•íƒœ ì •ë„ë¡œ í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, íŠ¹ì • ë¶€ë¥˜ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” ì „í˜•ì ì¸ ì˜ˆì—ì„œ ë¶€í„° í™•ì¥ì„ ì‹œì‘í•œë‹¤ëŠ” ê°œë…ìœ¼ë¡œ ë°›ì•„ë“¤ì´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\nê¸°ì¡´ì˜ Interfaceë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì€ ëŒ€ìƒì´ ì •í™•í•˜ê²Œ ë¬´ìŠ¨ ê¸°ëŠ¥ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ì—„ê²©í•œ ì„ ì–¸ì´ ìˆì—ˆë‹¤ë©´, í•´ë‹¹ ë°©ì‹ì—ì„œëŠ” ë‹¤ì†Œ ëŠìŠ¨í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „í˜•ì ì¸ ì˜ˆì¸ prototypeì—ì„œë¶€í„° ì‹œì‘í•˜ì—¬ ì´ë¥¼ í™•ì¥í•˜ì—¬ í‘œí˜„í•œë‹¤ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ê²¬í•´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, êµ¬í˜„ë„ Factoryì—ì„œ Prototypeì„ ê°€ì§€ê³  ì´ë¥¼ Clone í•˜ì—¬ì„œ instantiatingì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ì´ë¥¼ í™•ì¥í•˜ì—¬ì„œ ë˜ ë‹¤ë¥¸ objectë¥¼ ìƒì„±í•˜ëŠ” Factoryë¥¼ êµ¬í˜„í•˜ëŠ” ì‹ìœ¼ë¡œ í™•ì¥í•´ë‚˜ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë ‡ê¸°ì— Prototype ë°©ì‹ì—ì„œëŠ” cloneì´ë¼ëŠ” methodê°€ êµ‰ì¥íˆ ì¤‘ìš”í•©ë‹ˆë‹¤. (ë˜í•œ, ì´ Prototypeì€ Singletonì´ë¼ëŠ” ê²ƒë„ ì•„ì‹œê² ì§€ìš”?) ê¸°ì¡´ì˜ abstract factory ë°©ì‹ê³¼ëŠ” ë‹¤ë¥´ê²Œ Factory ìì²´ì—ì„œ Prototypeì„ ê°€ì§€ê³  ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ì´ë¥¼ ì´ìš©í•´ì„œ objectë¥¼ ìƒì„±í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë°©ì‹ì€ ê³¼ê±° í•´ë‹¹ ì±…ì´ ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ë§Œ í•´ë„ ë‹¤ì†Œ ë¹„ì£¼ë¥˜ë¡œ (ë¬¼ë¡  ì§€ê¸ˆë„ ì£¼ë¥˜ëŠ” ì•„ë‹™ë‹ˆë‹¤.) ì—¬ê²¨ì¡Œì—ˆì§€ë§Œ, ì´ì œëŠ” immutableì´ë¼ëŠ” ë§ë„ ê³„ì†í•´ì„œ ì‚¬ìš©ë˜ê³  ìˆê³ , Modern Java, javascript ë“± ì—¬ëŸ¬ ì–¸ì–´ì—ì„œë„ ì´ patternì„ ê¸°ë³¸ìœ¼ë¡œ ë°›ì•„ë“¤ì˜€ìŠµë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œëŠ” ì–´ë–¨ê¹Œìš”?\n\nì´ ë˜í•œ factoryì—ê²Œ ìƒì„±ì„ ë§¡ê²¼ê³ , product ë˜í•œ ì´ë¥¼ ëŒ€í‘œí•  ìˆ˜ ìˆëŠ” ì „í˜•ì ì¸ ì˜ˆ ì •ë„ë¥¼ ì•Œê³  ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ë„ ëª¨ë¥´ê³ , ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²• ë˜í•œ ëª¨ë¥´ëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 5. Factory Method\n\n![factoryMethod](/images/factoryMethod.jpeg)\n\nì´ë²ˆì—ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ êµ¬í˜„ì…ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ìƒì„±ì„ ìœ„í•œ ëŒ€ë¦¬ìë¥¼ ë‘ì§€ ì•Šê³ , ë‹¤ë¥¸ Productë¥¼ ì“°ê³  ì‹¶ë‹¤ë©´, App ìì²´ë¥¼ ìƒˆë¡œ ì‘ì„±í•˜ìëŠ” íë¦„ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, App ìì²´ê°€ íŠ¹ì • Productì™€ ì˜ì¡´ì„±ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì •í™•í•˜ê²Œ Productë¥¼ ì•Œê³  ìˆë‹¤ëŠ” ê²ƒì€ type ê²€ì‚¬ì— ì‹œê°„ì„ ë‚­ë¹„í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ê³ , ê·¸ë¡œ ì¸í•´ ë” ë¹ ë¥¸ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ëœ»ìœ¼ë¡œ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë°©ë²•ë¡ ì€ ëŒ€ê²Œ ê°œë°œ ì´ˆê¸°ì— ë§¤ìš° ë§ì´ ì“°ì¸ë‹¤ê³  í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì•„ì§ ì–´ë–¤ Productê¹Œì§€ ì§€ì›í• ì§€ ëª¨ë¥´ì§€ë§Œ ì–´ëŠì •ë„ì˜ ì¶”ìƒí™”ë¥¼ í†µí•´ì„œ í•´ë‹¹ objectê°€ ê°€ì ¸ì•¼ í•  ìµœì†Œí•œì˜ ê¸°ëŠ¥ì„ ì§€ì •í•´ë†“ê³ , ë°”ë¡œ íŠ¹ì • objectì— ëŒ€í•œ ê°œë°œì„ ì‹œì‘í•¨ìœ¼ë¡œì¨ í•´ë‹¹ ì‹œìŠ¤í…œì˜ ê²€ì¦ì„ ë¹ ë¥´ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³ , í›„ì— maintainì˜ ì‹œê°„ì´ ì˜¤ë©´, codeë¥¼ refactoring í•˜ê³  ìœ„ì—ì„œ ë³´ì•˜ë˜ ë‹¤ë¥¸ design patternì„ ê²€í† í•˜ë©° ì„ íƒí•˜ëŠ” ì‹œê°„ì„ ê°€ì§„ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\ní•´ë‹¹ ì‹œìŠ¤í…œì— ëŒ€í•œ êµ¬í˜„ì€ ì œ Githubì— ë³„ë„ì˜ Branchë¥¼ í†µí•´ì„œ êµ¬í˜„í•´ë‘ì—ˆìŠµë‹ˆë‹¤. ì–¸ì–´ëŠ” typescriptë¡œ ì‘ì„±í•˜ì˜€ê³ , ì°¸ê³ í•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. :)\n\n[ğŸ”— GitHub](https://github.com/euidong/oop-design-pattern/tree/creational-pattern)\n","slug":"design-pattern-2","date":"2022-02-22 16:54","title":"[Design Pattern] 2. Creational Pattern","category":"Tech","tags":["DesignPattern","AbstractFactoryPattern","BuilderPattern","Creationalpattern","FactoryMethodPattern","PrototypePattern","SingletonPattern"],"thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\nì¤‘ê°„ì— ì¢‹ì€ referenceë¥¼ ì°¾ì•˜ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œë¶€í„°ëŠ” ì¶œì²˜ê°€ ë°”ë€ë‹ˆë‹¤. ì €ë„ í•´ë‹¹ ì‚¬ì´íŠ¸ì˜ ë„ì›€ì„ ë§ì´ ë°›ì•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì‚¬ì´íŠ¸ í•œ ë²ˆ ì§ì ‘ ê°€ë³´ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\n\n## Reference\n\n- Design Patterns: Elements of reusable object oriented software.\n- Refactoring GURU :Â [https://refactoring.guru/design-patterns/structural-patterns](https://refactoring.guru/design-patterns/structural-patterns)\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Structural Pattern\n\nì• ì„œ ì‚´í´ë³¸ creational patternì´ objectì˜ ìƒì„±ì— ëŒ€í•œ ë°©ë²•ë“¤ì„ ì œê³µí•˜ì˜€ë‹¤ë©´, í•´ë‹¹ objectë“¤ì˜ ê´€ê³„ë¥¼ ì–´ë–»ê²Œ ì—°ê²°í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ê³ ë¯¼ì—ì„œ ë§Œë“¤ì–´ì§„ patternì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ì–´ì„œ, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë‚´ë¶€ ëª¨ë“ˆ ê°„ì˜ ìƒí˜¸ì‘ìš©ì´ë‚˜ ì´ë“¤ì„ ì—°ê²°í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 1. Adapter\n\n![adapter](/images/adapter.jpeg)\n\nobjectì™€ objectê°„ì˜ ìƒí˜¸ì‘ìš©ì„ ë•ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. ì œ ìƒê°ì—ëŠ” **Converterë¡œ** í‘œí˜„í•  ìˆ˜ ìˆì„ ê±° ê°™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, pdfë¥¼ í•„ìš”ë¡œ í•˜ëŠ” moduleì´ ìˆë‹¤ê³  í–ˆì„ ë•Œ, ìš°ë¦¬ê°€ ê°€ì§„ ê²ƒì´ ì´ë¯¸ì§€ë°–ì— ì—†ë‹¤ë©´, ìš°ë¦¬ëŠ” ì´ë¥¼ ë³€í™˜í•´ì¤„ ìˆ˜ ìˆëŠ” converterë¥¼ ì¤‘ê°„ì— ì„¤ì¹˜í•¨ìœ¼ë¡œì¨ ì´ë“¤ì„ ìˆ˜ì •í•´ì£¼ì§€ ì•Šê³ , í•©ì¹  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì´ ë°”ë¡œ Adapter patternì˜ í•µì‹¬ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì¼ë°˜ì ì¸ êµ¬í˜„ì€ adapterë¼ëŠ” classë¥¼ ë³€í™˜ ê²°ê³¼ë¬¼ì˜ classì˜ í™•ì¥(ìƒì†)ìœ¼ë¡œ ë‘¡ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´, í•´ë‹¹ classì˜ ì†ì„±ì„ ëª¨ë‘ ê°€ì§‘ë‹ˆë‹¤. ì—¬ê¸°ì„œ adapterì˜ ìƒì„± ì‹œì— ë³€í™˜ ì „ì˜ classë¥¼ ì „ë‹¬í•˜ì—¬, ë‚´ë¶€ êµ¬í˜„ì„ overriding í•˜ëŠ” ë°©ì‹ì„ ì·¨í•˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. **ì¦‰, adapter ìì²´ê°€ ì›í•˜ëŠ” ì œí’ˆì˜ ë³€í™˜ ì™„ë£Œ ìƒíƒœë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.**\n\nrefactoring.guru ì‚¬ì´íŠ¸ì—ì„œ ì˜ˆì‹œë¥¼ ë“  ìƒí™©ì„ ë´…ì‹œë‹¤.\n\nì›í˜• êµ¬ë©ì— ì›ê¸°ë‘¥ì„ ë„£ìœ¼ë©´ì„œ, ì›í˜• êµ¬ë©ë³´ë‹¤ ë°˜ì§€ë¦„ì´ í° ì›ê¸°ë‘¥ì€ filteringí•˜ëŠ” ì½”ë“œê°€ ìˆì—ˆë‹¤ê³  í•©ì‹œë‹¤. ì´ë•Œ, ì›ê¸°ë‘¥ì´ ì•„ë‹Œ ì§ìœ¡ë©´ì²´ë¥¼ ë„£ê³  ì‹¶ë‹¤ë©´, ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ì§ìœ¡ë©´ì²´ë¥¼ ë§ˆì¹˜ ì›ê¸°ë‘¥ì²˜ëŸ¼ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆë„ë¡ ì§ìœ¡ë©´ì²´ì˜ ë°‘ë³€ì˜ ë³€ì˜ ê¸¸ì´ë¥¼ í†µí•´ì„œ ë°˜ì§€ë¦„ì„ ìƒì„±í•´ë‚´ëŠ” ë¡œì§ì„ ê°€ì§„ adapterë¥¼ ë§Œë“¤ì–´ë‚´ë©´ ë  ê²ƒì…ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ê¸°ì¡´ì˜ ë³€í™˜ ê²°ê³¼ë¬¼ë¡œ ëŒì•„ê°€ëŠ” ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ëŒ€ê²Œ dataì˜ ë³€í™˜ ì‹œì— ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤. (ex. XML -> JSON)\n- ì‚¬ì‹¤ ì„ì‹œ ë°©í¸ì´ë¼ê³  ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ìœ„ì— ì›í˜• êµ¬ë©ì— ë„£ì„ ìˆ˜ ìˆëŠ” ê²ƒì„ ì›í˜•ê¸°ë‘¥ìœ¼ë¡œ ì œí•œí•œ ìƒí™©ì—ì„œ ì§ìœ¡ë©´ì²´ë¥¼ ë„£ì—ˆë‹¤ëŠ” ê²ƒì—ì„œë¶€í„° ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³ , ë³µì¡ë„ê°€ ë†’ì•„ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n### 2. Bridge\n\n> before\n\n![bridge-1](/images/bridge-1.jpeg)\n\n> after\n\n![bridge-2](/images/bridge-1.jpeg)\n\ní•˜ë‚˜ì˜ classì˜ í¬ê¸°ê°€ ë„ˆë¬´ ë¹„ëŒ€í•´ì§€ê±°ë‚˜ ê° classë“¤ ê°„ì˜ ì˜ì¡´ì„±ì´ ë†’ì•„ì§€ëŠ” ê²½ìš°ì— ì´ë¥¼ ë‘ ê°œì˜ ê³„ì¸µ êµ¬ì¡°ë¡œ ë‚˜ëˆ„ì–´ ì˜ì¡´ì„±ì„ ì œê±°í•˜ë©´ì„œ ê°œë³„ì ìœ¼ë¡œ ê°œë°œí•˜ëŠ” í™˜ê²½ì„ ë§Œë“œëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\nê°œë°œì„ ì§„í–‰í•˜ë‹¤ ë³´ë©´, í•˜ë‚˜ì˜ classì˜ í¬ê¸°ê°€ êµ‰ì¥íˆ ë¹„ëŒ€í•´ì§€ëŠ”Â  ê²½í—˜ì„ í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ ë²„íŠ¼ì´ë¼ëŠ” classë¥¼ ë§Œë“¤ì—ˆì—ˆëŠ”ë°, ë””ìì¸ì˜ detailì„ ìœ„í•œ ë‚´ìš©ì— ì˜í•´ì„œ ì½”ë“œê°€ êµ‰ì¥íˆ ë¹„ëŒ€í•´ì§€ê³ , ì´ë¥¼ click í–ˆì„ ë•Œ, hover í–ˆì„ ë•Œì™€ ê°™ì€ ë¡œì§ë„ ê³„ì†í•´ì„œ ì¶”ê°€ë˜ë©´ì„œ classê°€ ë¹„ëŒ€í•´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì—¬ê¸°ì„œ design ë¶€ë¶„ì„ ë³„ë„ì˜ classë¡œ ë¶„ë¦¬ì‹œí‚¤ê³  ì´ë¥¼ ê¸°ì¡´ button classê°€ ë³€ìˆ˜ë¡œ í¬í•¨í•˜ëŠ” ë°©ì‹ì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ì¦‰, ì—¬ëŸ¬ êµ¬í˜„ method, attributeë¥¼ í•˜ë‚˜ì˜ attribute typeìœ¼ë¡œ í†µí•©í•˜ê³ , ì´ë¥¼ interfaceë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.** ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì¢€ ë” ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ì‹¤ ìš°ë¦¬ì˜ main applicationì´ moduleì„ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šê³ , ì—¬íƒ€ moduleì„ installí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì´ì™€ ìœ ì‚¬í•˜ë‹¤ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ bridgeì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ëŒ€ê²Œ design(css style)/platform(ios, android, web)ê³¼ logicì„ ë¶„ë¦¬í•˜ì—¬ ì„œë¡œê°„ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•  ë•Œ, ìœ ìš©í•©ë‹ˆë‹¤.\n\n### 3. Composite\n\n![composite](/images/composite.jpeg)\n\n**objectë“¤ì„ tree êµ¬ì¡°ë¡œ ë§Œë“¤ì–´**ì„œ ë§ˆì¹˜ í•˜ë‚˜ì˜ object ì¸ ê²ƒì²˜ëŸ¼ ë™ì‘ì‹œí‚¤ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ë§Œë“¤ê³ ì í•˜ëŠ” êµ¬í˜„ ëª©í‘œ ìì²´ê°€ tree êµ¬ì¡°ë¡œ í‘œí˜„ ê°€ëŠ¥í•  ë•Œì—ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. treeëŠ” ìì‹ ì˜ ê¸°ëŠ¥ì„ ë‹´ëŠ” rootì™€ ë‹¤ë¥¸ subtreeë“¤ë¡œ ì´ë£¨ì–´ì§€ë©°, ì´ë“¤ì„ ê°€ë¦¬í‚¤ëŠ” pointerë¥¼ ê°€ì§„ë‹¤.(subtreeëŠ” ì—†ì„ ìˆ˜ë„ ìˆë‹¤.)\n\nëŒ€ê²Œ êµ¬í˜„ì„ ìœ„í•´ì„œ, ê°€ì¥ ê¸°ë°˜ì´ ë˜ëŠ” ê¸°ëŠ¥ì„ interface typeìœ¼ë¡œ ìƒì„±í•˜ë©´, leafì²˜ëŸ¼ ì‚¬ìš©ë  classì™€ ì´ë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” í˜•íƒœì˜ classë¡œ ë‚˜ëˆ„ì–´ êµ¬í˜„í•©ë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ë©´, file systemì„ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. file systemì€ í¬ê²Œ fileê³¼ folderë¡œ ë‚˜ë‰˜ì–´ì§‘ë‹ˆë‹¤. folderëŠ” ë§ˆì¹˜ í•˜ë‚˜ì˜ subtreeê°€ ë˜ëŠ” ê²ƒì´ê³ , fileì€ í•˜ë‚˜ì˜ leafê°€ ë˜ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° leafë§ˆë‹¤ ì•Œë§ì€ êµ¬í˜„ì„ í•  ìˆ˜ ìˆê³ , folderì—ë„ ì•Œë§ì€ êµ¬í˜„ì„ ì‰½ê²Œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ compositeì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ê³„ì¸µìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ” ë³µì¡í•œ êµ¬ì¡°ë¥¼ ì‰½ê²Œ êµ¬ì¡°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ì¶”ê°€í•  ë•Œì—ë„, ê¸°ì¡´ ì½”ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, ì–µì§€ë¡œ ë„ì…í•˜ê¸° ìœ„í•´ì„œ, ê³¼ë„í•˜ê²Œ ì¼ë°˜í™”í•œ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë˜ë©´, ì´í•´í•˜ê¸° ì–´ë ¤ìš´ êµ¬ì¡°ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, treeë¥¼ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤ëŠ” ê²ƒì´ ëª…í™•í•  ë•Œì—ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n### <mark>4. Decorator</mark>\n\n![decorator](/images/decorator.jpeg)\n\n**ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì„ objectì— ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ ê¸°ì¡´ objectëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ , ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” wrapperë¡œ ê°ì‹¸ì£¼ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.**\n\në§Œì•½, í•¸ë“œí° push ì•Œë¦¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë†“ì•˜ê³ , ì´ë¥¼ ì—¬ëŸ¬ ì—…ì²´ì—ê²Œ ë°°í¬í•˜ì˜€ë‹¤ê³  ê°€ì •í•©ì‹œë‹¤. ê·¸ëŸ°ë°, ì–´ë–¤ ì—…ì²´ì—ì„œëŠ” Facebook ì•Œë¦¼, ë˜ ë‹¤ë¥¸ ì—…ì²´ì—ì„œëŠ” Slack ì•Œë¦¼ì„ ì¶”ê°€ë¡œ ì „ì†¡í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´, ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ê°€ì¥ ì‰½ê²Œ ìƒê° ë‚˜ëŠ” ë°©ë²•ì€ ê° notification ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” classë¥¼ ìƒì„±í•˜ê³ , appì—ì„œ ì—¬ëŸ¬ ê°œë¥¼ ìƒì„±í•´ì„œ ë³´ë‚´ëŠ” ë°©ë²•ì¼ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, ë‹¨ í•˜ë‚˜ì˜ objectë§Œ ë°›ì„ ìˆ˜ ìˆë„ë¡ êµ¬í˜„ì´ ë˜ì–´ ìˆê³ , ì´ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” app codeë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤ë©´, ìš°ë¦¬ëŠ” ê²°êµ­ 3 ê°€ì§€ì˜ ì•Œë¦¼ì„ í•˜ë‚˜ì˜ classë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ, 7ê°œì˜ classê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n1. push ì•Œë¦¼ë§Œ ìˆëŠ” class\n2. facebook ì•Œë¦¼ë§Œ ìˆëŠ” class\n3. slack ì•Œë¦¼ë§Œ ìˆëŠ” class\n4. push + facebook ì•Œë¦¼ class\n5. push + slack ì•Œë¦¼ class\n6. slack + facebook ì•Œë¦¼ class\n7. push + slack + facebook ì•Œë¦¼ class\n\nì´ëŸ¬í•œ êµ¬ì¡°ë¥¼ ê°€ì§€ëŠ” ê±°ëŠ” êµ‰ì¥í•œ ì¤‘ë³µ ì½”ë“œë¥¼ ë§Œë“¤ì–´ë‚¼ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë‚˜ì˜¨ patternì´ decoratorì…ë‹ˆë‹¤. ê¸°ì¡´ objectì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ í•˜ëŠ” objectë¥¼ ê°ì‹¸ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì‹¤í–‰ ì‹œì—ëŠ” ë°– or ì•ˆë¶€í„° ì‹¤í–‰ì„ ì‹œí‚¤ë©´ì„œ ì§„í–‰í•©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œëŠ” decoratorì˜ íŠ¹ì§•ì„ ì‚´í´ë´…ì‹œë‹¤.\n\n- ì´ ì—­ì‹œ ê¸°ì¡´ ì½”ë“œì˜ ìˆ˜ì •ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.\n- runtimeì— ì‰½ê²Œ ìƒˆë¡œìš´ êµ¬í˜„ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê° wrapperê°€ í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ í•˜ë„ë¡ êµ¬í˜„í•˜ì—¬, responsibilityë¥¼ í•˜ë‚˜ë§Œ ê°–ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, ë•Œë¡œëŠ” wrapperê°„ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ íŠ¹ì • wrapperë¥¼ ì œê±°í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n### 5. Facade\n\n![facade](/images/facade.jpeg)\n\n**ê°„ì†Œí™”ëœ interfaceë¥¼ ë³µì¡í•œ class êµ¬ì¡°(library, framework)ì— ê°„ë‹¨í•œ interfaceë¥¼ ì œê³µí•˜ëŠ” patternì…ë‹ˆë‹¤.** ì¦‰, third partyë¥¼ ì‚¬ìš©í•  ë•Œ, ì§ì ‘ì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ facadeë¼ëŠ” objectë¥¼ í†µí•´ì„œ ì¶”ìƒí™”í•œ methodë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨ ì‹¤ì œ ì‹œìŠ¤í…œê³¼ third partyì™€ì˜ ì˜ì¡´ì„±ì„ ì¤„ì´ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n---\n\nfacadeì˜ íŠ¹ì§•ì€ ìœ„ì—ì„œ ë§í•œ ë°”ì™€ ê°™ê³ , ì£¼ì˜ì‚¬í•­ì´ í•˜ë‚˜ ì¡´ì¬í•©ë‹ˆë‹¤.\n\n- facadeê°€ ëª¨ë“  objectë“¤ì˜ êµ¬í˜„ì„ ì•„ëŠ” a god objectê°€ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´, ì‚¬ì‹¤ìƒ ì´ë¥¼ ì´ìš©í•˜ëŠ” applicationë„ ê²°ì½” systemì— ë…ë¦½ì ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\n### 6. Flyweight\n\n> before\n\n![flyweight-before](/images/flyweight-before.jpeg)\n\n> after\n\n![flyweight-after](/images/flyweight-after.jpeg)\n\nobjectë¥¼ ìœ ì§€í•˜ëŠ”ë° ë¹„ìš©ì„ ë„ˆë¬´ ë§ì´ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, **ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë™ì¼í•œ ë¶€ë¶„ì„ ë³„ë„ë¡œ objectì— í¬í•¨ì‹œí‚¤ì§€ ì•Šê³  ê³µìœ í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨ objectë¥¼ ê²½ëŸ‰í™”í•˜ê¸° ìœ„í•´ì„œ ë‚˜ì˜¨ patternì…ë‹ˆë‹¤.**\n\n---\n\nFlyweightì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- RAMì˜ ì‚¬ìš©ëŸ‰ì„ ì¤„ì¸ë‹¤ëŠ” ê²ƒì€ ê·¸ë§Œí¼ CPU ì‚¬ìš©ëŸ‰ì´ ëŠ˜ì–´ë‚œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n- ë˜í•œ, Computerë¥¼ ìœ„í•œ ì„¤ê³„ì´ë‹ˆ ë§Œí¼ ì‚¬ëŒì´ ì´í•´í•˜ê¸°ì— ê°€ë…ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### <mark>7. Proxy</mark>\n\n![proxy](/images/proxy.jpeg)\n\nëŒ€ì²´ objectë¥¼ ì œê³µí•˜ê±°ë‚˜ ë˜ ë‹¤ë¥¸ objectë¥¼ ìœ„í•œ placeholderë¥¼ ì œê³µí•˜ëŠ” patternì´ë‹¤. original objectì— ì ‘ê·¼ì„ ì œì–´í•˜ë©´ì„œ, ìš”ì²­ì˜ ì²˜ë¦¬ ì „ í›„ë¡œ, íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì‚¬ë¡€ëŠ” ë‹¹ì—°í•˜ê²Œë„ Databaseì— ì ‘ê·¼í•˜ëŠ” ë¡œì§ì„ ì •ì˜í•˜ëŠ” APIë¥¼ ë§Œë“œëŠ” ê²½ìš°ë¥¼ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. API serverëŠ” ì‚¬ì‹¤ìƒ databaseì— ì ‘ê·¼í•˜ê¸° ì´ì „ì— ìˆ˜í–‰í•´ì•¼ í•  ë™ì‘ë“¤ì„ ë¯¸ë¦¬ ì •ì˜í•˜ê³ , ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì´ë¥¼ ì²˜ë¦¬í•˜ì—¬ clientì—ê²Œ ì „ì†¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì´ í•„ìš”í•œ ì´ìœ ëŠ” ë¯¼ê°ì •ë³´ì˜ ë³´í˜¸ì™€ ì„œë¹„ìŠ¤ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ì¥í•˜ê¸° ìœ„í•¨ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, í•´ë‹¹ objectë§Œìœ¼ë¡œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ìš”êµ¬ì— ë”°ë¼ì„œ, object ì ‘ê·¼ ì „í›„ë¡œ ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš° proxy patternì„ í†µí•´ì„œ êµ¬í˜„í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\n\n---\n\nProxyì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- serviceì™€ ì´ë¥¼ ì´ìš©í•˜ëŠ” clientì™€ ë…ë¦½ì ìœ¼ë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ì¼ë°˜ì ìœ¼ë¡œ serviceì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒë³´ë‹¤ delayê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n","slug":"design-pattern-3","date":"2022-03-09 15:12","title":"[Design Pattern] 3. Structural Pattern","category":"Tech","tags":["DesignPattern","AdapterPattern","BridgePattern","CompositePattern","DecoratorPattern","FacadePattern","FlyweightPattern","ProxyPattern"],"thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\n## Reference\n\n- Design Patterns: Elements of reusable object oriented software.\n- Refactoring GURU :Â [https://refactoring.guru/design-patterns/structural-patterns](https://refactoring.guru/design-patterns/structural-patterns)\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Behavioral Pattern\n\nAlgorithmê³¼ object ê°„ì˜ ì±…ì„ ë¶„ë°°ì— ê´€í•œ patternì…ë‹ˆë‹¤.\n\nì¦‰, objectì˜ ì‚¬ìš© ëª©ì ì— ë”°ë¼ì„œ methodë¥¼ ì •ì˜í•  ë•Œ, ë§ì´ ì‚¬ìš©ë˜ëŠ” êµ¬í˜„ patternì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\n### 1. Chain of Responsibility(CoR)\n\n![cor](/images/cor.jpeg)\n\n**requestë¥¼ ì—¬ëŸ¬ handlerë“¤ì„ í•˜ë‚˜ì˜ chainìœ¼ë¡œ ì—°ê²°í•œ objectì— ì „ë‹¬í•˜ì—¬ requestë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.** ì—¬ê¸°ì„œ ê° ê°ì˜ handlerëŠ” ìŠ¤ìŠ¤ë¡œ ì‘ì—…ì„ ëë‚´ê³  responseë¥¼ ë³´ë‚¼ ìˆ˜ë„ ìˆê³ , ì´ë¥¼ ë‹¤ìŒ handlerë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆìœ¼ë©°, í•´ë‹¹ requestë¥¼ ì´ìš©í•´ì„œ side effectë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.\n\nì´ëŠ” ëŒ€ê²Œ requestë¥¼ ì²˜ë¦¬í•˜ëŠ” moduleì„ ì„¤ê³„í•˜ëŠ” ê³¼ì •ì—ì„œ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, REST API ë¥¼ êµ¬í˜„í•˜ê³ ì í•  ë•Œ, ì—¬ëŸ¬ requestì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” logicì„ ë³„ë„ì˜ middlewareë¼ëŠ” ê²ƒìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ êµ¬í˜„í•˜ê³  ì¬í™œìš©í•˜ëŠ” ê²ƒì„ ë§ì´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ex. nodeJS express, Go http.Handler, etc...)\n\n---\n\nì—¬ê¸°ì„œ CoRì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- Requestì˜ ì²˜ë¦¬ ìˆœì„œë„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê° handlerê°€ í•˜ë‚˜ì˜ ì—­í• ë§Œ í•˜ë„ë¡ í•˜ì—¬, ìœ ì—°ì„±ê³¼ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.(Single Responsibility)\n- ìƒˆë¡œìš´ handlerì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì˜ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n\n### <mark>2. Command</mark>\n\n![command](/images/command.jpeg)\n\n**ëª¨ë“  requestë¥¼ í•˜ë‚˜ì˜ queueì— ì €ì¥í•˜ê³ , ì²˜ë¦¬ìëŠ” queueì˜ ìˆœì„œì— ë”°ë¼ì„œ, requestë¥¼ ì²˜ë¦¬í•˜ëŠ” patternì…ë‹ˆë‹¤.** ì´ëŸ¬í•œ ë°©ì‹ì€ requestë¥¼ ë§ˆì¹˜ í•˜ë‚˜ì˜ method paratemerë¡œ ë°›ì•„ë“¤ì´ë„ë¡ í•˜ê³ , requestì˜ ì‹¤í–‰ì„ queueë¡œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨, ì‰½ê²Œ ë˜ëŒë¦¬ê¸° ê¸°ëŠ¥ë„ ì§€ì›í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì‰½ê²Œ ì˜ˆë¥¼ ë“¤ë©´, ì‹ë‹¹ì—ì„œ ì›¨ì´í„°ëŠ” ì£¼ë¬¸ì„ ë°›ì•„ì„œ, ì˜ìˆ˜ì¦ì„ ìˆœì„œì— ë”°ë¼ì„œ order boardì— ë¶™ì´ë©´, ì£¼ë°©ì¥ì€ ì´ë¥¼ ë³´ê³ , ìˆœì„œì— ë”°ë¼ì„œ ìš”ë¦¬ë¥¼ ë‚´ë³´ë‚´ëŠ” í˜•ì‹ì´ë¼ê³  ë³´ë©´ ë˜ê² ìŠµë‹ˆë‹¤.\n\nêµ¬í˜„ ì‹œì—ëŠ” Commandë¼ëŠ” Interfaceë¥¼ êµ¬í˜„í•˜ëŠ” ê°ê°ì˜ Command classë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ê° CommandëŠ” ìƒì„± ì‹œì— receiverë¥¼ ì „ë‹¬ë°›ì•„ì„œ, í˜¸ì¶œ ì‹œì— ì´ë¥¼ Receiverì—ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ , Command Interfaceë¥¼ í˜¸ì¶œí•˜ëŠ” Invokerë¥¼ ì„ ì–¸í•´ì¤ë‹ˆë‹¤.\n\n---\n\nCommandì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- Command ë‹¨ìœ„ë¡œ classë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ì—°ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ Commandì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n- ë˜ëŒë¦¬ê¸°ì™€ ë‹¤ì‹œ ì¬ìƒ ë“±ì˜ ë™ì‘ì˜ êµ¬í˜„ì´ ì‰½ìŠµë‹ˆë‹¤.\n\n### 3. Iterator\n\n![iterator](/images/iterator.jpeg)\n**ë‚´ë¶€ì˜ êµ¬í˜„ë¬¼ì„ ë“¤ì–´ë‚´ì§€ ì•Šì€ ìƒíƒœì—ì„œ êµ¬ì„±ìš”ì†Œë¥¼ ìˆœí™˜í•˜ê¸° ìœ„í•´ ê³ ì•ˆëœ patternì…ë‹ˆë‹¤.**\n\nê¸°ë³¸ì ìœ¼ë¡œëŠ” iteratorëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìš”ì†Œë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.\n\n1. í˜„ì¬ ìì‹ ì˜ êµ¬ì„±ìš”ì†Œë¥¼ retuerní•˜ëŠ” method\n2. ë‹¤ìŒ iteratorë¥¼ ë°˜í™˜í•˜ëŠ” method\n3. ë‹¤ìŒ iteratorê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ ì²´í¬í•˜ëŠ” method\n\ní•´ë‹¹ objectë¥¼ í†µí•´ì„œ ì „ì²´ êµ¬ì¡°ë¥¼ ìˆœí™˜í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì£¼ìš” ì˜ˆì‹œëŠ” file ì…ì¶œë ¥ì„ ì˜ˆë¥¼ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ê²Œ while ë¬¸ì„ í†µí•´ì„œ ë” ì´ìƒ ì½ì„ ë¬¸ìê°€ ì—†ì„ ë•Œê¹Œì§€ line ë‹¨ìœ„ë¡œ ë°›ì•„ì˜¤ë©°, nextë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹ì˜ êµ¬í˜„ì„ ë§ì´ ë³´ì•˜ì„ ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë‘ ê°€ì§€ë¡œ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n1. object ë‚´ì˜ ìì„¸í•œ êµ¬í˜„ì„ ê°ì¶”ê¸° ìœ„í•´ì„œ\n2. í•„ìš”ì— ë”°ë¼ ì—¬ëŸ¬ iteratorë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ\n\nëŒ€ê²Œ objectê°€ í•˜ë‚˜ ì´ìƒì˜ ë™ì¼ objectë¥¼ í¬í•¨í•˜ê²Œ ëœë‹¤ë©´, ì´ objectë¥¼ ìˆœí™˜í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ treeë¥¼ êµ¬í˜„í–ˆë‹¤ê³  í–ˆì„ ë•Œ, ê¸°ë³¸ì ìœ¼ë¡œ depth first search, breadth first searchì„ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ì„œ íš¨ìœ¨ì ì¸ ë°©ì‹ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ê°ê¸° ë‹¤ë¥¸ ìˆœí™˜ ë°©ì‹ì„ ì§€ì›í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n---\n\niteratorì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- Iterator ê° ê°ì— í•„ìš”ë¡œ í•˜ëŠ” algorithmì„ êµ¬í˜„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ iteratorì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n- objectë¡œë¶€í„° ìƒì„±ëœ ê° iteratorëŠ” ì„œë¡œ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- í•˜ì§€ë§Œ, í•´ë‹¹ êµ¬í˜„ì€ ë‹¤ë£¨ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ì ì€ ê²½ìš° ì§€ë‚˜ì¹  ìˆ˜ë„ ìˆê³ , ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒë³´ë‹¤ ì†ë„ê°€ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\n### 4. Mediator\n\n![mediator](/images/mediator.jpeg)\n\nobject ê°„ì˜ í˜¼ë€ìŠ¤ëŸ¬ìš´ ì˜ì¡´ì„±ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ ê³ ì•ˆëœ patternìœ¼ë¡œ, **object ê°„ì˜ ì§ì ‘ì ì¸ ì‚¬ìš©ì„ ì œí•œí•˜ê³ , mediatorë¼ëŠ” ì¤‘ê³„ìë¥¼ í†µí•´ì„œë§Œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” pattern**ì…ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ë””ì–‘í•œ object ê°„ì˜ communicationì„ ì¶”ì¶œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, object ë³¸ì—°ì˜ ì‘ì—…ì— ì§‘ì¤‘í•˜ì—¬ í¸ë¦¬í•˜ê³  ìœ ì§€í•˜ê¸° ì‰½ê²Œ ë§Œë“­ë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ mediatorë¥¼ ì¶”ê°€í•  ë•Œ, ê¸°ì¡´ codeì˜ ë³€ê²½ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤. (Open/Close)\n- ê° Object ê°„ì˜ ì˜ì¡´ì„±ì„ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê°œë°œì´ ì§„í–‰ë ìˆ˜ë¡ mediatorê°€ ì „ì²´ ì‹œìŠ¤í…œì„ ê´€ë¦¬í•˜ëŠ” a God Objectê°€ ë˜ê³ , mediatorë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  objectê°€ ì´ì— ì˜ì¡´ì„±ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.\n\n### 5. Memento\n\n![memento](/images/memento.jpeg)\n\nobjectì˜ ìƒíƒœ ë³€ê²½ì— ì´ì „ ìƒíƒœê°€ í° ì˜í–¥ì„ ë¯¸ì¹˜ê±°ë‚˜ historyì— ëŒ€í•œ êµ¬í˜„ì´ í•„ìš”í•œ ê²½ìš° êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **objectì˜ êµ¬ì²´ì ì¸ êµ¬í˜„ì— ëŒ€í•œ ë‚´ìš©ì„ ì œì™¸í•˜ê³ , ì´ì „ ìƒíƒœë¥¼ ì €ì¥í•˜ê³ , í•„ìš”ì— ë”°ë¼ ì´ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ëŠ” pattern**ì…ë‹ˆë‹¤.\n\nêµ¬í˜„ì„ í•˜ê¸° ìœ„í•´ì„œëŠ”, ë³¸ë˜ì˜ objectë¥¼ ê·¸ëŒ€ë¡œ ë‘ê³ , í•„ìš”ë¡œ í•˜ëŠ” private variablesë¥¼ í¬í•¨í•˜ëŠ” mementoë¥¼ êµ¬í˜„í•˜ì—¬ stateë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” methodë¥¼ í¬í•¨í•˜ê²Œ í•´ì„œ, ì´ mementoë“¤ë§Œ caretakerë¼ëŠ” objectì—ì„œ listí˜•íƒœì˜ historyë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n\n---\n\nmementoì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- ê¸°ì¡´ objectì˜ encapsulationì„ ìœ ì§€í•˜ë©´ì„œ, ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê¸°ì¡´ codeë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•œ ì±„ë¡œ caretakerë¥¼ í†µí•´ì„œ, history logicì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, mementoë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ì¶”ê°€ì ì¸ ê³µê°„ì´ í•„ìš”í•˜ë©°, ì˜¤ë˜ëœ ë°ì´í„° ì‚­ì œë¥¼ ìœ„í•œ ì›ë³¸ì„ í–¥í•œ ì¶”ì ì´ í•„ìš”ë¡œ ë©ë‹ˆë‹¤.\n\n### <mark>6. Observer</mark>\n\n![observer](/images/observer.jpeg)\n\nê°€ì¥ ë§ì´ ì“°ì´ë©´ì„œ, ì¤‘ìš”í•œ pattern ì¤‘ì— í•˜ë‚˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. **subscription ë¡œì§ì„ ì •ì˜í•˜ê³ , subscriptionì„ ìˆ˜í–‰í•œ ëª¨ë“  objectì—ê²Œ íŠ¹ì • eventì˜ ë°œìƒì„ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.**\n\nì¦‰, objectì—ì„œ íŠ¹ì • eventê°€ ë°œìƒí•˜ë©´, ì´ë¥¼ ê³„ì†í•´ì„œ broadcasting í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ êµ¬ë…í•˜ê³  ìˆëŠ” ê° objectê°€ ì´ì— ë”°ë¥¸ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\nêµ¬í˜„ì„ í•˜ê¸° ìœ„í•´ì„œëŠ”,\n\nCommand Patternê³¼ êµ‰ì¥íˆ ìœ ì‚¬í•˜ë‹¤ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Command Patternì€ Queueì— Commandë¥¼ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì•„ë‘ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ì›í•˜ëŠ” Objectê°€ ì´ë¥¼ ì°¾ì•„ê°€ëŠ” ë°©ì‹ì´ë¼ë©´, Observer Patternì€ ì €ì¥í•˜ê¸°ë³´ë‹¤ëŠ” ì´ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” Objectì—ê²Œ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ìƒˆë¡œìš´ Subscriber, Publisherê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n- ì‹¤í–‰ ì¤‘ì— objectê°„ì˜ ê´€ê³„ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, Subscriber ê°„ì˜ ìˆœì„œë¥¼ ì •ì˜í•˜ê±°ë‚˜ ê° eventì˜ ìˆœì„œë¥¼ ì—„ë°€íˆ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë³„ë„ì˜ êµ¬í˜„ì²´ë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.\n\n### 7. State\n\n![state](/images/state.jpeg)\n\n**objectì˜ ë‚´ë¶€ ìƒíƒœê°€ ë³€í™”í•  ë•Œë§ˆë‹¤ ë™ì‘ì„ ë°”ê¾¸ë„ë¡ í•˜ëŠ” patternì…ë‹ˆë‹¤.** ë§ˆì¹˜ objectê°€ ì´ê²ƒì˜ classë¥¼ ë°”ê¾¸ëŠ” ê²ƒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆëŠ” ì˜ˆì‹œê°€ ê²Œì‹œê¸€ ì‘ì„±ì´ë‹¤. ì—„ê²©í•œ ì ˆì°¨ë¥¼ ë”°ë¥´ëŠ” ê¸€ ì‘ì„±ì—ëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ì˜ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë©ë‹ˆë‹¤.\n\n1. ì œì¶œ ì „\n2. ì œì¶œ ì™„ë£Œ (ê²€í†  ì¤‘)\n3. ë°°í¬ (ì—…ë¡œë“œ ì™„ë£Œ)\n\nê° ë‹¨ê³„ë§ˆë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” methodì™€ ê° methodì˜ ë™ì‘ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë³„ë„ì˜ classë¡œ ë‚˜ëˆ„ì§€ ì•Šê³ , í•˜ë‚˜ì˜ classë¡œ ë§Œë“¤ë©´ì„œ stateë¥¼ í¬í•¨í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨, ì´ë¥¼ ë‚´ë¶€ì—ì„œ control í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” patternì…ë‹ˆë‹¤.\n\nêµ¬í˜„ ì‹œì—ëŠ” ê° Stateë¥¼ ë³„ë„ì˜ Classë¡œ ë¶„ë¦¬í•˜ê³ , ê·¸ ë‚´ë¶€ì—ì„œ ë³€ê²½ë˜ëŠ” methodë¥¼ ì§ì ‘ êµ¬í˜„í•˜ë„ë¡ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì‹¤ì œ stateë¥¼ í¬í•¨í•œ ì›ë³¸ classëŠ” ì´ stateì— ì •ì˜ëœ methodë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\nstateì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ë³„ë„ì˜ stateë¥¼ classë¡œ ë¶„ë¦¬í•˜ê¸° ë•Œë¬¸ì—, ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ stateì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n\n### 8. Strategy\n\n![strategy](/images/strategy.jpeg)\n\në™ì¼í•œ methodì— ëŒ€í•´ì„œ ì—¬ëŸ¬ algorithmì„ ì •ì˜í•˜ê³ , ê°ê°ì„ ë³„ë„ì˜ classë¡œ ë‚˜ëˆ„ì–´ ìƒí˜¸ í˜¸í™˜ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ëŠ” patternì…ë‹ˆë‹¤.\n\n**ì¦‰, objectì˜ method ìì²´ë¥¼ ë³„ë„ì˜ interfaceë¡œ ë¶„ë¦¬í•˜ëŠ” ë°©ì‹ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**Â ì•ì„œ ë³´ì•˜ë˜ stateëŠ” context(ë¬¸ë§¥)ì— ë”°ë¼ì„œ, ìƒíƒœê°€ ë°”ë€Œì§€ë§Œ Strategy Patternì—ì„œëŠ” í–‰ìœ„ ìì²´ê°€ ë°”ë€ë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.\n\nëŒ€ê²Œ ê²Œì„ì—ì„œ ì‰½ê²Œ ì˜ˆì‹œë¥¼ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. playerì˜ skillì„ interfaceí™” ì‹œí‚¤ê³ , í•´ë‹¹ ë™ì‘ì— ë”°ë¥¸ damageì™€ mp ë³€í™” ë“±ì„ ê° skillë§ˆë‹¤ ì§ì ‘ ê³„ì‚°í•˜ì—¬ player objectë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤.\n\n---\n\nstrategyì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ì‹¤í–‰ ì¤‘ì˜ íŠ¹ì • strategyë¥¼ ì„ íƒí•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ê° strategyì— ëŒ€í•œ ìì„¸í•œ êµ¬í˜„ì„ ê°ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ëŒ€ê²Œ ìƒì† í˜•íƒœë¥¼ ëŒ€ì²´í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ìƒˆë¡œìš´ strategyì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n\n### 9. Template Method\n\n![templateMethod](/images/templateMethod.jpeg)\n\n**algorithmì˜ skeletonì„ ìƒìœ„ classì— ì •ì˜í•˜ê³ , ì „ì²´ì ì¸ êµ¬ì¡°ëŠ” ë°”ê¾¸ì§€ ì•Šìœ¼ë©´ì„œ ê° ë‹¨ê³„ì— ëŒ€í•œ êµ¬í˜„ì„ override í•˜ëŠ” patternì…ë‹ˆë‹¤.**\n\në”°ë¼ì„œ, ì „ê³µê³¼ëª© ê³¼ì œë¥¼ í•˜ë‹¤ ë³´ë©´ êµìˆ˜ë‹˜ë“¤ì´ skeleton ì½”ë“œë¥¼ ì¤€ë‹¤ê³  í–ˆì„ ë•Œ, ëŒ€ê²Œ êµ¬ì¡°ë§Œ ìˆê³ , ê° í•¨ìˆ˜ì˜ ë‚´ë¶€ê°€ ë¹„ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë˜ ê±° ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ classë¥¼ inherit í•˜ì—¬ êµ¬ì²´ì ì¸ êµ¬í˜„ì„ í•˜ëŠ” ì‹ìœ¼ë¡œ classë¥¼ ë§Œë“¤ë©´ ë©ë‹ˆë‹¤.\n\n---\n\ntemplate methodì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- êµ¬í˜„ì˜ ë‚´ìš©ì„ ì¤„ì´ê³ , ì¤‘ë³µë˜ëŠ” ì½”ë“œì˜ ì‚¬ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, skeletonì— ì˜í•œ ì œí•œìœ¼ë¡œ ë¶ˆê°€í”¼í•˜ê²Œ codeì˜ ë³€ê²½ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 10. Visitor\n\n![visitor](/images/visitor.jpeg)\n\n**íŠ¹ì • objectì— ì ‘ê·¼í•˜ë ¤ëŠ” objectì— ë”°ë¼ ë³„ë„ì˜ algorithmì„ ì ìš©í•˜ëŠ” patternì…ë‹ˆë‹¤.**\n\nì¦‰, ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” objectë¥¼ í•˜ë‚˜ì˜ interfaceë¡œ ì¶”ìƒí™”í•˜ê³ , ê° objectëŠ” ì´ë¥¼ ì‚¬ìš©í•  client(visitor)ë¥¼ í—ˆìš©í•  ê²ƒì¸ì§€ ê·¸ë¦¬ê³  ì–´ë–¤ algorithmì„ ìˆ˜í–‰í•  ê²ƒì¸ì§€ë¥¼ ì •ì˜í•´ë‘¡ë‹ˆë‹¤. ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜ˆì‹œëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Elementì˜ ì¢…ë¥˜ê°€ ë§¤ìš° ë‹¤ì–‘í•˜ë©° ê³„ì†í•´ì„œ ì¶”ê°€ë  ê°€ëŠ¥ì„±ì´ ë†’ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ë§Œ, Visitorì˜ ì¶”ê°€ëŠ” ë§¤ìš° ì–´ë µê¸° ë•Œë¬¸ì— ì´ì— ìœ ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ìƒˆë¡œìš´ algorithmì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì˜ ë³€ê²½ì—†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (Open/Close)\n- ë™ì¼í•œ class ë‚´ë¶€ì—ì„œ ë™ì¼í•œ ë™ì‘ì„ ì—¬ëŸ¬ versionìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆì–´ ìœ ì—°í•©ë‹ˆë‹¤. (Single Responsibility)\n- ê·¸ëŸ¬ë‚˜, visitorì˜ ì¶”ê°€ëŠ” ê¸°ì¡´ algorithmì˜ ìˆ˜ì •ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n","slug":"design-pattern-4","date":"2022-03-10 11:22","title":"[Design Pattern] 4. Behavioral Pattern","category":"Tech","tags":["DesignPattern","CommandPattern","CoRPattern","MediatorPattern","MementoPattern","ObserverPattern","StatePattern","StrategyPattern","Template\"MethodPattern\"","VisitorPattern"],"thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n- Tumbnail : Photo by [Michael](https://unsplash.com/@michael75?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/cargo-ships?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\n## Intro\n\nDocker Swarmì„ docker stackì„ ì´ìš©í•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ê²Œ ëœë‹¤ë©´, ë¬´ì—‡ì´ ìƒì„±ë˜ëŠ”ê°€? ìš°ë¦¬ëŠ” ì„œë¹„ìŠ¤ê°€ ìƒì„±ë˜ê¸°ë„ ì „ì— networkê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ê°€ ìˆë‹¤. containerì™€ containerê°„ ê·¸ë¦¬ê³ , hostë¥¼ í†µí•´ ì™¸ë¶€ internetí™˜ê²½ì— containerë¥¼ ì—°ê²° ì‹œí‚¤ëŠ” ëª¨ë“  ê³¼ì •ì„ ì•Œì•„ë³´ì.\n\nDockerë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´, hostì™€ í†µì‹ ì„ ìœ„í•´ ì™¸ë¶€ë¡œ portë¥¼ ì—´ì–´ì£¼ëŠ” ê²ƒê³¼ container ê°„ì˜ í†µì‹ ì„ í—·ê°ˆë ¤ í•˜ëŠ” ì‚¬ëŒë“¤ì´ ìƒê°ë³´ë‹¤ ë§ì€ ê²ƒ ê°™ë‹¤. ì‹¬ì§€ì–´ëŠ” containerê°„ í†µì‹ ì„ ìœ„í•´ì„œ localhostë¡œ ì •ë³´ë¥¼ ì£¼ê³ ë°›ì„ë ¤ê³  í•˜ëŠ” ëª¹ì“¸ ì‹œë„ë¥¼ í•˜ëŠ” ê´€ê²½ë„ ëª‡ëª‡ ë´ì™”ë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•œ ë²ˆ Dockerì˜ networkì— ëŒ€í•´ì„œ í•œ ë²ˆ ê³µë¶€í•´ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.\n\ní•´ë‹¹ ì°¨ì‹œì—ì„œëŠ” ìš°ì„  ì „ì²´ì ì¸ docker networkë¥¼ ì„¤ëª…í•˜ëŠ” ê¸°ë³¸ì ì¸ í‚¤ì›Œë“œë¥¼ ì•Œì•„ë³¼ ê²ƒì´ê³ ,\n\n2 ì°¨ì‹œì—ì„œëŠ” ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” docker network driverë¥¼ ì•Œì•„ë³¼ ê²ƒì´ê³ ,\n\n3 ì°¨ì‹œì—ì„œëŠ” libnetworkì˜ í•µì‹¬ ê¸°ëŠ¥ ì¤‘ service discovery, load balancingì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ë‹¤.\n\n## Docker Networking Base\n\nìš°ë¦¬ê°€ ê¸°ì–µí•´ì•¼ í•  ê²ƒì€ CNM, libnetwork, Driver ì´ë ‡ê²Œ 3ê°€ì§€ë‹¤. ê° ê°ì´ ë¬´ì—‡ì¸ì§€ëŠ” ì°¨ë¡€ì°¨ë¡€ ì•Œì•„ë³´ì.\n\n### Container Network Model (CNM)\n\ncontainerê°„ì˜ networkë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ designì„ ì œì‹œí•œ ë‚´ìš©ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ideaì¼ ë¿ì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ í•˜ìœ„ ë§í¬ë¥¼ í†µí•´ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n[ğŸ”— Github - moby/libnetwork](https://github.com/moby/libnetwork/blob/master/docs/design.md)\n\ní•˜ì§€ë§Œ, ì´ë¥¼ ì¢€ ë” ìš”ì•½í•´ë´…ì‹œë‹¤. ì¼ë‹¨ í•µì‹¬ ìš”ì†Œ 3ê°€ì§€ë¥¼ ë¨¼ì € ì´í•´í•´ë´…ì‹œë‹¤.\n\n- **Sandbox** : ê³ ë¦½ëœ í•˜ë‚˜ì˜ Network ê³µê°„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í•´ë‹¹ ê³µê°„ì—ëŠ” ehternet interfaceë‚˜ port ê·¸ë¦¬ê³  routing tableê°™ì€ êµ¬í˜„ì´ í¬í•¨ë©ë‹ˆë‹¤.\n- **Endpoints**Â : Virtual Networkë¥¼ ì„œë¡œ ì—°ê²°í•˜ëŠ” interfaceì˜ ì—­í• ì…ë‹ˆë‹¤. (vethë¼ê³ ë„ ë¶ˆë¦½ë‹ˆë‹¤.) CNMì—ì„œëŠ” Sandbox ë‚´ë¶€ì—ì„œ ì´ì™€ Networkë¥¼ ì—°ê²°í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.\n- **Networks**Â : Virtual Switchë¡œ ì—¬ê¸°ë©´ ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ì—¬ëŸ¬ ê°œì˜ endpointsë¥¼ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì ì´ì œ ì´ë ‡ê²Œ 3ê°œì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì •ë¦¬í•˜ë©´, ì´ì œ Container ë‚´ë¶€ì— Sandboxê°€ ì¡´ì¬í•˜ê³ , ê·¸ Sandbox ë‚´ë¶€ì˜ endpointsë¥¼ ì—°ê²°í•˜ëŠ” Networkë¥¼ í†µí•´ì„œ ê²°ë¡ ì ìœ¼ë¡œ Container ê°„ì˜ ì—°ê²°ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.\n\n![cnm](/images/cnm.jpeg)\n\n### libnetwork\n\nìœ„ì—ì„œ ì´ì•¼ê¸°í•œ ê²ƒì²˜ëŸ¼ CNMì€ ë‹¨ìˆœíˆ ideaì¼ ë¿ì…ë‹ˆë‹¤. ì´ë¥¼ êµ¬í˜„í—ˆì—¬ í‘œì¤€í™”ëœ ê²ƒì´ ë°”ë¡œ libnetworkë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. ì´ëŠ” Goë¥¼ ì´ìš©í•˜ì—¬ ì‘ì„±ëœ open sourceë¡œ ìœ„ì—ì„œ ì œì‹œí•œ ë§í¬ë¥¼ í†µí•´ì„œ í•´ë‹¹ open sourceì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ì–¸ê¸‰í•œ CNMì„ êµ¬í˜„í•˜ì˜€ê³ , ì¶”ê°€ì ìœ¼ë¡œ service discovery, ingress-based container load balancing, network control plane ë° management plane ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ë‹¤. í˜„ì¬ì—ëŠ” dockerì—ì„œ network êµ¬í˜„ì— ì‚¬ìš©ëœë‹¤.\n\n\\* control & management plane : ì§ì ‘ì ìœ¼ë¡œ networkì˜ íë¦„ì„ ì œì–´í•˜ëŠ” ë‹¨ê³„ë¡œ, routingê³¼ ê°™ì€ ì œì–´ë¥¼ ìˆ˜í–‰í•œë‹¤.\n\n### Drivers\n\nì¦‰, libnetworkê°€ ì „ì²´ì ì¸ networkì˜ control planeê³¼ management plane ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ë‹¤ë©´, driverëŠ” data planeì„ êµ¬í˜„í•œë‹¤. ì¦‰, ì§ì ‘ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤. ì´ëŸ¬í•œ ê¸°ëŠ¥ë“¤ì€ dockerì—ì„œ ì—¬ëŸ¬ ê°œì˜ driverë¼ëŠ” submoduleì„ í†µí•´ì„œ êµ¬í˜„í•˜ì˜€ë‹¤. docker pubë¥¼ í†µí•´ì„œ defaultë³´ë‹¤ ë‚˜ì•„ê°„ driver ì—­ì‹œ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ, host, bridge, overlay, ipvlan, macvlan ë“±ì„ í¬í•¨í•˜ê³  ìˆë‹¤.\n\nì—¬ê¸°ê¹Œì§€ê°€ docker networkì— ëŒ€í•œ overviewì´ë‹¤. ë‹¤ìŒ ì°¨ì‹œì— ê³„ì†...\n","slug":"docker-network-1","date":"2021-07-10 21:21","title":"[Docker] Network(1)","category":"Tech","tags":["Docker","Container","Network"],"thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n\n## Intro\n\nì €ë²ˆ ê¸€ì— ì´ì–´ì„œ ì´ë²ˆì—ëŠ” docker networkì˜ driverë“¤ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì„ ë‹¤ë£¨ê² ë‹¤.\n\n- bridge networks\n- overlay networks\n- host networking\n- IPVlan networks\n- MacVlan networks\n\n### Bridge Network\n\ncontainerê°„ì˜ í†µì‹ ì„ ìœ„í•´ì„œ í•„ìš”í•œ ê²ƒì´ bridge ë„¤íŠ¸ì›Œí¬ì´ë‹¤. í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ì£¼ì˜í•´ì•¼í•  ê²ƒì€ ì˜¤ì§, single hostì—ì„œë§Œ ë™ì‘í•œë‹¤ëŠ” ì ì´ë‹¤. ì¦‰, ë‹¤ë¥¸ docker hostì— ì¡´ì¬í•˜ëŠ” containerì™€ëŠ” ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, bridgeê°€ ë¬´ì—‡ì¸ê°€? ì´ëŠ” ë‘ ê°œì˜ network ì¥ì¹˜ë¥¼ ì—°ê²°í•˜ëŠ” L2 switchë¥¼ ë§í•œë‹¤. ì¦‰, containerë¥¼ ì—°ê²°í•˜ëŠ” ë„êµ¬ë¼ê³  ë³´ë©´ ë˜ê² ë‹¤. ì´ë¥¼ í†µí•´ì„œ ì—°ê²°ëœ containerëŠ” í•´ë‹¹ containerì˜ ëª¨ë“  portì— ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì§„ë‹¤.\n\n![docker-bridge-network](/images/docker-bridge-network.png)\n\nìœ„ëŠ” `$ docker network ls`ë¥¼ ì…ë ¥í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆëŠ” ë‚´ìš©ì´ë‹¤. ìœ„ì— ì„¸ê°œëŠ” ì²˜ìŒë¶€í„° ëê¹Œì§€ dockerì— ì¡´ì¬í•˜ëŠ” default networkì…ë‹ˆë‹¤. hostëŠ” ì§ì ‘ì ìœ¼ë¡œ hostì— ì—°ê²°í•˜ëŠ” ê²½ìš°ì˜ networkì´ê³ ,(í›„ì— ì„¤ëª…í•©ë‹ˆë‹¤.) noneì€ ì•„ë¬´ ë„¤íŠ¸ì›Œí¬ì—ë„ ì—°ê²°ë˜ì§€ ì•Šì•„ ì™¸ë¶€ë¡œ ì–´ë–¤ trafficë„ ë³´ë‚´ì§€ ì•Šì„ containerë“¤ì´ ì†í•˜ê²Œ ëœë‹¤. ì—¬ê¸°ì„œ bridgeëŠ” default bridgeë¼ê³  ë¶ˆë¦¬ë©°, networkë¥¼ ì„¤ì •í•˜ì§€ ì•Šê³ , containerë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í•´ë‹¹ bridgeë¡œ ì—°ê²°ë˜ê²Œ ëœë‹¤. ì´ë¥¼ í†µí•´ì„œ container ê°„ì˜ ì—°ê²°ë„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\ní•˜ì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œ ë‹¨ì¼ ê¸°ê¸°ì—ì„œ container ê°„ì˜ ì—°ê²°ì„ ìˆ˜í–‰í•  ë•Œì—ëŠ” bridgeë¥¼ ì§ì ‘ ìƒì„±í•˜ì—¬ ì—°ê²°í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. (ê·¸ ì´ìœ ëŠ” ë„ë©”ì¸ ë„¤ì„ ì„¤ì •ì„ ìë™ìœ¼ë¡œ í•´ì¤€ë‹¤ëŠ” ì ì—ì„œ ì´ì ì´ ìˆê¸° ë•Œë¬¸ -> [ğŸ”— ì°¸ê³ ](https://docs.docker.com/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge))\n\nì•„ë˜ëŠ” ì´ë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ ì˜ˆì‹œì´ë‹¤.\n\n```bash\n# bridge ìƒì„±\n$ docker network create -d bridge eui_bridge\n\n# container ìƒì„±\n$ docker container run -d --name c1 \\\n  -network eui_bridge \\\n  alpine sleep 1d\n  \n# container2 ìƒì„±\n$ docker container run -it --name c2 \\\n  -network eui_bridge \\\n  alpine sh\n   \n# pingì„ í†µí•´ c1ê³¼ ì—°ê²° ì—¬ë¶€ í™•ì¸\n$ ping c1\n```\n\nìœ„ì˜ ê³¼ì •ì„ ì²˜ìŒë¶€í„° ì„¤ëª…í•˜ìë©´,\n\n1. eui\\_bridgeë¼ëŠ” networkë¥¼ bridgeë¡œ ìƒì„±í•œë‹¤.\n2. containerì— eui\\_bridgeë¥¼ ì—°ê²°í•˜ê³ , alpine ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±í•œë‹¤. ì´ë•Œ ì‹œì‘ ì‹œì— sleepì„ í•˜ë£¨ ë™ì•ˆ ì‹œí–‰í•œë‹¤.(sleep í•˜ëŠ” ì´ìœ ëŠ” êº¼ì§€ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•¨)\n3. ë§ˆì°¬ê°€ì§€ë¡œ eui\\_bridgeì— ì—°ê²°í•˜ê³ , alpine ì´ë¯¸ì§€ë¡œ containerë¥¼ ìƒì„±í•œ í›„ì— shellì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n4. c2ì—ì„œ ì‹¤í–‰ëœ shellì—ì„œ c1ìœ¼ë¡œ pingì„ ì „ì†¡í•œë‹¤. (ì´ë•Œ ê°™ì€ network bridgeë¼ë¦¬ëŠ” container nameìœ¼ë¡œ domainì´ ìƒì„±ëœë‹¤.)\n\nì°¸ê³ ë¡œ ì—¬ê¸°ì„œ ê¸°ì–µí•´ì•¼í•  ê²ƒì´ ìˆë‹¤ë©´, bridgeëŠ” containerê°„ì˜ ì—°ê²°ì„ ìœ„í•œ ê²ƒì´ê³ , containerì˜ íŠ¹ì • portë¥¼ hostì™€ mappingí•˜ê³ ì í•  ë•Œì—ëŠ”Â `--publish`Â ë¥¼ í™œìš©í•´ì•¼ í•œë‹¤.\n\n```bash\n$ docker run -p 5000:80 nginx\n```\n\nì´ë¥¼ í†µí•´ì„œ hostì˜ 5000ë²ˆê³¼ containerì˜ 80ë²ˆ portë¥¼ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.\n\n### Overlay Network\n\nìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒì´ ë‹¨ì¼ í˜¸ìŠ¤íŠ¸ ë‚´ë¶€ì—ì„œ container ê°„ì˜ ì—°ê²°ì´ì—ˆë‹¤ë©´, ì—¬ëŸ¬ hostê°€ ì¡´ì¬í•˜ëŠ” cluster í™˜ê²½ì—ì„œ dockerì˜ containerê°„ í†µì‹ ì„ ìœ„í•œ driverê°€ overlayì´ë‹¤. í˜„ì¬ì—ëŠ” docker swarmì„ í†µí•´ì„œ applicationì„ ì—¬ëŸ¬ hostì—ì„œ ì œê³µí•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•˜ê²Œ ëœë‹¤.\n\në¨¼ì € ì›ë¦¬ë¥¼ ì•Œì•„ë³´ìë©´, VXLANì„ í™œìš©í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” L3 network ìƒìœ„ì—ì„œ ë‹¤ë¥¸ ë‘ ê¸°ê¸° ê°„ì— L2 í†µì‹ ì„ ì§€ì›í•˜ëŠ” ê²ƒì¸ë°, ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ë¥¸ nodeê°„ì— ì¡´ì¬í•˜ëŠ” container ë¼ë¦¬ë„ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆë‹¤. docker swarmì— ì˜í•´ì„œ ê´€ë¦¬ë˜ì–´ L3ë¡œ ì—°ê²°ëœ ë‘ nodeì˜ ìœ„ì—ì„œëŠ” VXLAN Tunnel EndPoint(VTEP)ì´ ê° ê° ì¡´ì¬í•œë‹¤. ì´ë“¤ì„ í†µí•´ì„œ, tunnelì´ í˜•ì„±ë˜ê³  í†µì‹ ì´ ê°€ëŠ¥í•´ì§€ëŠ”ë°, ê¸°ì¡´ì— containerì— ì¡´ì¬í•˜ê³  ìˆë˜ CNMì—ì„œ ì •ì˜í•œ Sandbox ì†ì— virtual switchê°€ ìƒì„±ë˜ê³  ì´ì™€ VTEPì´ ì—°ê²°ë˜ì–´ ë‹¤ë¥¸ ê¸°ê¸°ì— ìˆëŠ” containerê°„ì—ë„ í†µì‹ ì´ ê°€ëŠ¥í•´ì§€ëŠ” ê²ƒì´ë‹¤.\n\nì˜ˆì‹œë¥¼ ë“ ë‹¤ë©´, docker stackì„ í†µí•´ì„œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•´ë³¸ ì ì´ ìˆë‹¤ë©´, containerë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œ networkê°€ ë¨¼ì € ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì´ë•Œ ìƒì„±ë˜ëŠ” ê²ƒì´ overlay ë„¤íŠ¸ì›Œí¬ë¡œ ì´ë¥¼ í†µí•´ì„œ ì—¬ëŸ¬ containerê°€ replicaê°€ ì–´ëŠ nodeì— ìƒê¸¸ì§€ í™•ì •í•  ìˆ˜ ì—†ìŒì—ë„ í†µì‹ ì„ ììœ ë¡­ê²Œ í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n### Host Networking\n\ní•´ë‹¹ ë°©ì‹ì€ dockerë¥¼ í•œ ë²ˆì´ë¼ë„ ì¨ë³¸ ì‚¬ëŒì´ë¼ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ëŠ” ìµìˆ™í•  ê²ƒì´ë‹¤.\n\n```bash\n$ docker run -p 80:80 nginx\n```\n\nnginx imageë¥¼ ê¸°ë°˜ìœ¼ë¡œ containerë¥¼ ì‹¤í–‰ì‹œí‚¤ê³ , container ë‚´ë¶€ì˜ 80ë²ˆê³¼ hostì˜ 80ë²ˆ portë¥¼ mappingí•˜ê² ë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ containerëŠ” hostì˜ networkì— ê´€ì—¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\ní•˜ì§€ë§Œ, host networkingì„ ì´ìš©í•˜ê²Œ ë˜ë©´ container ë‚´ë¶€ì— network stackì´ ìƒì„±ë˜ì§€ ì•Šê³ , í•´ë‹¹ containerì˜ ëª¨ë“  network ì„¤ì •ì´ í•´ë‹¹ hostì˜ ì„¤ì •ì— ê·¸ëŒ€ë¡œ mappingë˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´ ì„±ëŠ¥ìƒì˜ ì´ì ì€ ìˆê² ì§€ë§Œ, ìƒë‹¹íˆ ì„¤ì •ì´ ë‚œì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.\n\n### IPVlan Network\n\nMAC addressì™€ IP adressë¥¼ ë¶€ì—¬í•˜ì—¬, ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ì— containerë¥¼ ì§ì ‘ ì—°ê²°í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\nì¥ì ì€ ë³„ë„ì˜ port forwardingì´ë‚˜ bridgeë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¹ì—°íˆ ë¹ ë¥´ì§€ë§Œ, NICë¥¼ ì´ìš©í•˜ê¸°ì— promiscuous modeë¥¼ opení•´ì•¼ í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì´ëŠ” switchê°€ ë°ì´í„°ë¥¼ ì „ì†¡í•  ëŒ€ìƒì„ ì°¾ì§€ ì•Šê³ , ì—°ê²°ëœ ëª¨ë“  ëŒ€ìƒì—ê²Œ ë³´ë‚´ëŠ” ëª¨ë“œë¡œ, sniffingì— ì·¨ì•½í•˜ê³  ì´ ë•Œë¬¸ì— public cloud systemì—ì„œëŠ” ì´ë¥¼ ë§‰ì•„ ë†“ê¸°ì— ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.\n\n![docker-ip-vlan](/images/docker-ip-vlan.png)\nì—¬ê¸°ê¹Œì§€ ë§í–ˆì„ ë•Œ, ì´í•´í–ˆë‹¤ë©´, ì´ë¯¸ ì„¤ì •í•˜ëŠ” ê²ƒì„ ì•Œì•„ë³´ëŸ¬ ë– ë‚˜ë©´ ë  ê²ƒì´ê³ , ì´í•´í•˜ì§€ ëª»í–ˆë‹¤ë©´, ì•„ë§ˆ ì“¸ ì¼ì´ ì—†ì„ ê²ƒì´ë‹ˆ ë„˜ì–´ê°€ì‹œë©´ ë  ê²ƒì´ë‹¤.\n\nìì„¸í•œ ì‚¬í•­ì€ ê³µì‹ í˜ì´ì§€ë¥¼ ì°¸ê³ í•˜ì.\n\n[ğŸ”— IPvlan networks](https://docs.docker.com/network/ipvlan/)\n\n### MacVlan Network\n\nipvlanê³¼ ë™ì¼í•˜ì§€ë§Œ ì°¨ì´ì ì€ MAC ì£¼ì†Œë¥¼ í• ë‹¹í•œë‹¤ëŠ” ì ì´ë‹¤. ê·¸ ì™¸ì—ëŠ” ë‹¤ë¥¼ ê²ƒì´ ì—†ë‹¤.\n\n[ğŸ”— macvlan networks](https://docs.docker.com/network/macvlan/)\n","slug":"docker-network-2","date":"2021-07-11 00:04","title":"[Docker] Network(2)","category":"Tech","tags":["Docker","Container","Network"],"thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n\n## Intro\n\nì—¬íƒœê¹Œì§€ dockerì˜ driverë¥¼ í†µí•œ networking ê¸°ìˆ ì„ ì•Œì•„ë³´ì•˜ê³ , ì´ì œ libnetworkë¡œ 1/3ì—ì„œ ì œì‹œí–ˆë˜ ê¸°ë³¸ routingê³¼ ê°™ì€ ê¸°ëŠ¥ ì™¸ì— êµ¬í˜„ë˜ì–´ ìˆëŠ” ê¸°ëŠ¥ë“¤ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤.\n\n- service discovery\n- load balancing\n\n### Service discovery\n\nëª¨ë“  containerë“¤ê³¼ swarmì˜ ì„œë¹„ìŠ¤ë“¤ì´ ì´ë¦„ì„ í†µí•´ì„œ ê° ê°ì„ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤. DockerëŠ” ìì²´ì ìœ¼ë¡œ ë‚´ë¶€ì˜ DNS ì„œë²„ë¥¼ ì´ìš©í•˜ì—¬ ì´ë¥¼ ìˆ˜í–‰í•œë‹¤. ê³¼ì •ì„ ìš”ì•½í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. containerê°€ ì´ë¦„ì„ í†µí•´ì„œ íŠ¹ì • containerë¥¼ ì°¾ì•„ì•¼ í•¨ì„ ì¸ì‹í•œë‹¤.\n2. ë¨¼ì € Local ë‚´ë¶€ì—ì„œ ì´ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°–ê³  ìˆëŠ”ì§€ë¥¼ íƒìƒ‰í•œë‹¤. -> ìˆë‹¤ë©´, ì¢…ë£Œ\n3. Docker DNS serverì— ì´ë¥¼ ìš”ì²­í•˜ëŠ” queryë¥¼ ì „ì†¡í•œë‹¤.\n4. Docker DNS serverëŠ” ëª¨ë“  containerì˜ nameê³¼ network alias(ë³„ì¹­)ë¥¼ ì•Œê¸° ë•Œë¬¸ì— ì´ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.\n5. ì´ë•Œ, DNS serverëŠ” ë¨¼ì € ë™ì¼í•œ networkì— í•´ë‹¹ containerê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤. -> ì—†ë‹¤ë©´, ì™¸ë¶€ DNS serverë¡œ\n6. ì¡´ì¬í•œë‹¤ë©´, ì´ë¥¼ ìš”ì²­ì„ ë³´ë‚¸ resolverì—ê²Œ ì „ë‹¬í•˜ê³ , ì´ê²Œ ë‹¤ì‹œ containerë¡œ ì „ë‹¬ëœë‹¤.\n\n### Load balancing\n\ndocker swarmì€ ê¸°ë³¸ì ì¸ load balancerë¥¼ ì§€ì›í•˜ì—¬, ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ êµ¬í˜„ë˜ì–´ì§„ë‹¤.\n\n```bash\n$ docker service create \\\n  --name my-web \\\n  --publish published=8080,target=80 \\\n  --replicas 2 \\\n  nginx\n```\n\n![docker-ingress-network](/images/docker-ingress-network.png)\n\nì¦‰, ì–´ë””ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤ê³ , í• ì§€ë¼ë„ load balancerëŠ” ì–´ë””ì— í•´ë‹¹ ì„œë¹„ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ íŒŒì•…í•˜ê³ , ì´ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§„ë‹¤. ë”°ë¼ì„œ, ì–´ëŠ ë…¸ë“œë¡œ ìš”ì²­ì„ ë³´ë‚´ë”ë¼ë„ ì •ìƒì ìœ¼ë¡œ ìš”ì²­ì´ ì „ë‹¬ë  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ Ingress load balancingì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n\në§Œì•½, íŠ¹ì • nodeë¡œ ì „ë‹¬ëœ ìš”ì²­ì€ í•´ë‹¹ nodeì— ìˆëŠ” containerë¡œ ì „ë‹¬ë˜ê¸°ë¥¼ ë°”ë€ë‹¤ë©´, hostëª¨ë“œë¥¼ ì´ìš©í•˜ì—¬ ì§„í–‰í•  ìˆ˜ë„ ìˆë‹¤.\n\nì—¬ê¸°ê¹Œì§€ê°€ networkì— ëŒ€í•œ ì „ë°˜ì ì´ ë‚´ìš©ì…ë‹ˆë‹¤.\n","slug":"docker-network-3","date":"2021-07-11 00:40","title":"[Docker] Network(3)","category":"Tech","tags":["Docker","Container","Network"],"thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n\n## Intro\n\ní•´ë‹¹ ê¸€ì€ Linuxì—ì„œ dockerë¥¼ ë™ì‘ì‹œí‚¨ë‹¤ëŠ” ê°€ì •í•˜ì— ì‘ì„±í•˜ì˜€ë‹¤. (Windowë„ ëŒ€ë¶€ë¶„ ë™ì¼í•˜ë‹¤ê³  í•œë‹¤.)\n\ndockerëŠ” ì—¬ëŸ¬ ê°œì˜ ë³´ì•ˆ ì •ì±…ì„ í¬í•¨í•œë‹¤.\n\nì´ë¥¼ í¬ê²Œ ëˆ„ê°€ ê´€ë¦¬í•˜ëŠëƒì— ë”°ë¼ì„œ ë‘ ê°œì˜ ë¶€ë¥˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.\n\n1. OS system (Linux)\n2. Docker\n\nì´ì „ ê°€ìƒí™”ì™€ ë°˜ê°€ìƒí™”ë¥¼ ë¹„êµí•œ ê¸€ì—ì„œ ë³´ì•˜ë“¯ì´ Container ê¸°ìˆ ì„ ê²°ê³¼ì ìœ¼ë¡œ ë°˜ê°€ìƒí™”ì— í•´ë‹¹í•˜ë©°, ì´ë¥¼ ìœ„í•´ì„œ OSì˜ ì§€ì›ì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ Linux ìì²´ì—ì„œ êµ¬í˜„í•´ì£¼ëŠ” ê²ƒì´ ì¡´ì¬í•˜ê³ , Dockerì—ì„œ Application ë‹¨ì—ì„œ êµ¬í˜„í•œ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì§€ëŠ” ê²ƒì´ë‹¤.\n\në¨¼ì €, Linuxì—ì„œ ì§€ì›í•˜ëŠ” ê°ì¢… securityì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤.\n\n## Linux's Security for Docker\n\nì „ì²´ì ì¸ ë””í…Œì¼ ì‚¬í•­ì€ ì •ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤. í•´ë‹¹ ë‚´ìš©ì€ ê°„ë‹¨íˆ ì‚´í´ë³´ëŠ” ì •ë„ì´ë‹¤.\n\n### Namespaces\n\nnamespaceëŠ” container ê¸°ìˆ ì—ì„œ ë§¤ìš° í•µì‹¬ì ì¸ ìœ„ì¹˜ì— ì¡´ì¬í•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, OSë¥¼ ì—¬ëŸ¬ ê°œë¡œ ë‚˜ëˆ„ê³ , ë§ˆì¹˜ ì™„ì „íˆ ê³ ë¦½ëœ í˜•íƒœì˜ OSì²˜ëŸ¼ ëŠë¼ë„ë¡ ë§Œë“ ë‹¤. (í‚¤ì›Œë“œëŠ” isolation) ê·¸ë ‡ë‹¤ë©´ í•˜ë‚˜ì˜ host ë‚´ì—ì„œ ì–´ë–»ê²Œ ì—¬ëŸ¬ ê°œì˜ containerê°€ ì™„ë²½í•˜ê²Œ ë…ë¦½ë˜ì–´ ìˆë‹¤ê³  ëŠë‚„ ìˆ˜ ìˆê²Œ í•  ìˆ˜ ìˆì„ê¹Œ? ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¢…ë¥˜ì˜ namespaceë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì„œ ê°€ëŠ¥í•˜ë‹¤.\n\n- **process ID (pid)** : processëŠ” tree í˜•íƒœë¡œ ì´ë£¨ì–´ì§€ê²Œ ëœë‹¤. ë”°ë¼ì„œ, í•˜ë‚˜ì˜ process (ì¦‰, PID 1)ì— ì˜í•´ì„œ ì—¬ëŸ¬ ê°œì˜ processê°€ ë™ì‘ì„ ì‹œì‘í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ°ë°, namespaceë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ì—¬ëŸ¬ ê°œì˜ ì™„ë²½í•˜ê²Œ ë…ë¦½ì ì¸ process treeë¥¼ êµ¬ì¶•í•˜ê²Œ ëœë‹¤.\n- **Network (net)** :Â ê° ê°ì˜ containerë§ˆë‹¤ network stackì„ êµ¬í˜„í•œë‹¤. ì¦‰, network interface ë¶€í„° ì‹œì‘í•´ì„œ, IP Address, port, routing table ë“±ì„ êµ¬ì¶•í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.\n- **Filesystem / mount (mnt)** :ëª¨ë“  containerê°€ ê°ìì˜ root filesystemì„ ê°€ì§€ê³ , ë‹¤ë¥¸ ëª¨ë“  containerë“¤ì€ ì´ê²ƒì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.\n- **Inter process Communication(ipc)** : processê°„ì˜ í†µì‹ ì„ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” shared memoryë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë° ì´ ë˜í•œ ê³ ë¦½ì ìœ¼ë¡œ êµ¬í˜„ë˜ë„ë¡ í•œë‹¤.\n- **User** : ê° containerë§ˆë‹¤ ë‹¤ë¥¸ user groupì„ êµ¬ì¶•í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.\n- **Unix Time sharing (uts)** : hostnameì„ containerë§ˆë‹¤ ì œê³µí•˜ëŠ” ê²ƒìœ¼ë¡œ, ì´ë¥¼ í†µí•´ì„œ network ìƒì—ì„œ ipê°€ ì•„ë‹Œ hostnameìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§„ë‹¤.\n\nì¦‰, í•´ë‹¹ ì ˆì—ì„œëŠ” ì´ í•œ ë§ˆë””ë¥¼ ê¸°ì–µí•˜ë©´ í¸í•´ì§‘ë‹ˆë‹¤. \"í•˜ë‚˜ì˜ Dockerì˜ containerëŠ” namespaceë“¤ì˜ ì§‘í•©ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤.\"\n\n### Control Groups(C group)\n\nnamespaceê°€ ê° containerê°„ì˜ isolationì„ ë³´ì¥í•œë‹¤ë©´, cgroupì€ í•œê³„ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì—­í• ì´ë‹¤. containerë“¤ì´ í•˜ë‚˜ì˜ machineì—ì„œ ë™ì‘í•œë‹¤ë©´ ì–´ì©” ìˆ˜ ì—†ì´ ê·¸ë“¤ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì´ ìì›ì˜ ì–‘ì€ í•œì •ë  ìˆ˜ ë°–ì— ì—†ë‹¤. ê·¸ë¦¬ê³ , ìì¹« ì˜ëª»í•˜ë©´ í•˜ë‚˜ì˜ containerê°€ ë„ˆë¬´ ë§ì€ ìì›(CPU, Memory, Storage, ...)ì„ ì†Œëª¨í•˜ì—¬ ë‹¤ë¥¸ containerì˜ ë™ì‘ì„ ë°©í•´í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•œ ê²ƒì´ ë°”ë¡œ cgroupì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ê° containerì—ê²Œ ìì›ì„ ë‚˜ëˆ„ì–´ í• ë‹¹í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Capabilities\n\nì–´ë–¤ ì‘ì—…ì„ í•˜ë”ë¼ë„, Machineì„ root ê¶Œí•œìœ¼ë¡œ ì‘ì—…ì„ í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ìœ„í—˜í•˜ë‹¤. ë”°ë¼ì„œ, containerì—ì„œ applicationì„ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ê¶Œí•œë§Œì„ ë¶€ì—¬í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì˜¬ë°”ë¥´ë‹¤. ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡, ê¶Œí•œì„ ì§€ì •í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Mandatory Access Control(MAC) system\n\nMACì€ íŒŒì¼ì´ë‚˜ íŠ¹ì • ë°ì´í„°ì— ëŒ€í•œ ì ‘ê·¼ ì œì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë°, ì´ëŠ” AppArmorë‚˜ SELinux ë“±ì— ì˜í•´ì„œ êµ¬í˜„ë˜ì–´ì§€ëŠ”ë°, ê¸°ë³¸ì ìœ¼ë¡œ DockerëŠ” containerì— AppArmorë¥¼ ê° containerì— ì ìš©í•˜ì—¬ ì´ë¥¼ êµ¬í˜„í•œë‹¤. customizingì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì´ì— ëŒ€í•œ ì´í•´ë¥¼ ì¶©ë¶„íˆ í•˜ê¸°ë¥¼ ê¶Œí•œë‹¤.\n\n### seccomp\n\nseccompì˜ filter modeë¥¼ í™œìš©í•˜ë©´, containerì—ì„œ ë°œìƒí•˜ëŠ” syscallì„ ì œí•œí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ì´ëŠ” MAC ì²˜ëŸ¼ ì§ì ‘ customizingë„ ê°€ëŠ¥í•˜ì§€ë§Œ ì´ì— ëŒ€í•œ ê¹Šì€ ì´í•´ê°€ ë’·ë°›ì¹¨ë˜ì–´ì•¼ í•œë‹¤.\n\n## Docker Engine's Security for Docker\n\n### Secure Swarm Mode\n\nê¸°ë³¸ì ìœ¼ë¡œ Docker Swarmì€ managerì™€ workerë¡œ êµ¬ë¶„ë˜ì–´ ë™ì‘í•œë‹¤. managerëŠ” ê¸°ë³¸ì ìœ¼ë¡œ control planeì„ ì œì–´í•˜ê³ , ì „ì²´ ì ì¸ cluster í™˜ê²½ì„ êµ¬ì„±í•˜ë©°, ì‘ì—…ì„ ì ì ˆí•˜ê²Œ ì „ë‹¬í•œë‹¤. ê·¸ë¦¬ê³ , ì „ì²´ì ì¸ application codeë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ workerë“¤ì´ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ managerì™€ workerë“¤ì€ ëª¨ë‘ ë‹¤ë¥¸ Nodeì´ë‹¤. ë”°ë¼ì„œ, ì´ë“¤ê°„ì˜ í†µì‹ ì„ ìˆ˜í–‰í•  ë•Œì— ì¸ì¦ê³¼ ê°™ì€ ì‘ì—…ì„ í•„ìˆ˜ì ì´ë‹¤. ë”°ë¼ì„œ, Docker Swarmì—ì„œëŠ” ì´ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ì„œ managerë¡œ ì„ëª…ëœ nodeë¥¼ CAë¡œ í•˜ì—¬ TLS ì¸ì¦ì„ ìˆ˜í–‰í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ, ì„œë¡œë¥¼ ì¸ì¦í•˜ê³ , ì „ì†¡ ë°ì´í„° ì•”í˜¸í™”ë¥¼ ìˆ˜í–‰í•œë‹¤.  \n  \n\\* control plane vs data plane : í†µì‹ ì„ ì¼ìƒì—ì„œì˜ êµí†µíë¦„ì´ë¼ê³  ë³¸ë‹¤ë©´, control planeì€ ì‹ í˜¸ë“±ê³¼ ê°™ì€ ê·œì¹™ì„ ì˜ë¯¸í•˜ê³ , data planeì€ ì‹¤ì œë¡œ ì´ë™í•˜ëŠ” ì°¨ëŸ‰ë“¤ë¡œ ë¹„ìœ í•  ìˆ˜ ìˆë‹¤. ì¦‰, control planeì€ cluster í™˜ê²½ì—ì„œì˜ ì œì–´ë¥¼ ìœ„í•œ ë°ì´í„°ì´ê³ , data planeì€ ì‹¤ì œë¡œ ì£¼ê³  ë°›ëŠ” ë°ì´í„°ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\n\n### Image Scanning\n\nDockerëŠ” ì´ë¯¸ì§€ì—ì„œ ë³´ì•ˆìƒì˜ ì·¨ì•½ì  ì—¬ë¶€ë¥¼ scaní•˜ëŠ” ê¸°ëŠ¥ì„ ê¸°ë³¸ì ìœ¼ë¡œ íƒ‘ì¬í•˜ê³  ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ì´ë¯¸ì§€ê°€ ê°€ì§„ ì·¨ì•½ì  ë“±ì„ íŒŒì•…í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Docker Content Trust\n\nDockerëŠ” download ë˜ëŠ” ì‹¤í–‰í•  ì´ë¯¸ì§€ì˜ ì œê³µìë¥¼ ì‹ë³„í•˜ê³  ë¬´ê²°ì„±ì„ ì‰½ê²Œ ì²´í¬í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œ Docker Content Trustë¥¼ ì œê³µí•œë‹¤. registryì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ë•Œ, ì§ì ‘ ì„œëª…ì´ ê°€ëŠ¥í•˜ê³ , ì´ë¥¼ í†µí•´ì„œ íŠ¹ì • ì‚¬ìš©ìì— ì˜í•´ì„œ ìƒì„±ë˜ì—ˆìŒì„ í™•ì •í•  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ì„œëª…ì´ ì¡´ì¬í•´ì•¼ë§Œ pullì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒ ì—­ì‹œ ê°€ëŠ¥í•˜ë‹¤.\n\n### Docker Secrets\n\nDockerì—ì„œ ë³´ì•ˆ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ê¸° ìœ„í•´ì„œ ê³ ì•ˆëœ ê²ƒìœ¼ë¡œ, íŠ¹ì • íƒ€ê²Ÿì—ì„œ ì•ˆì „í•˜ê²Œ SSH keyì™€ ê°™ì€ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì „ë‹¬í•˜ëŠ” ê²ƒ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n","slug":"docker-security","date":"2021-07-10 19:52","title":"[Docker] Security","category":"Tech","tags":["Docker","Container","Security"],"thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"}],"params":{"subject":"Tech"}},"__N_SSG":true}