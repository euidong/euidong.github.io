{"pageProps":{"recentPosts":[{"content":"\n## Intro\n\nEthereumì˜ TPSë¥¼ Client ë‹¨ì—ì„œ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë…¸ë ¥ìœ¼ë¡œ, LMPTëŠ” Layered Merkle Partical Trieì˜ ì•½ìì´ë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì—ì„œ ì‚¬ìš©í•˜ë˜ MPTì˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•˜ì—¬ ì œê¸°ëœ ì•„ì´ë””ì–´ë¡œ Computer Architectureì—ì„œ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” cacheë¥¼ ì ‘ëª©í•œ ë°©ë²•ì´ë‹¤. (í•´ë‹¹ ë…¼ë¬¸ ICBC 2022ì˜ ë…¼ë¬¸ ì¤‘ LMPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìš”ì•½ê¸€ì´ë‹¤.)\n\n## Terms\n\n- **ERC-20**  \n  Ethereumê³¼ í˜¸í™˜ì´ ê°€ëŠ¥í•œ tokenì— ëŒ€í•œ í‘œì¤€ì„ ì œì‹œí•œ ë¬¸ì„œì´ë‹¤. ì¦‰, ì´ í‘œì¤€ì„ ë§Œì¡±í•˜ëŠ” tokenì€ Ethereumì„ í†µí•´ì„œ êµí™˜ì´ ê°€ëŠ¥í•˜ë©° ê·¸ ë°˜ëŒ€ë„ ê°€ëŠ¥í•˜ë‹¤.\n- **Tether token**  \n  Tether tokenì€ ERC-20ì— ê¸°ë°˜í•œ ëŒ€í‘œì ì¸ tokenìœ¼ë¡œ, ë¯¸êµ­ ë‹¬ëŸ¬ì™€ 1:1ë¡œ ëŒ€ì‘í•˜ëŠ” USDTë¡œ ìœ ëª…í•˜ë‹¤. ì‹¤ì œ ê±°ë˜ì—ì„œë„ ë¹ˆë²ˆíˆ ì‚¬ìš©ë˜ëŠ” ERC-20 tokenì´ë‹¤.\n- **Trie**  \n  TrieëŠ” sequenceë¡œ ì´ë£¨ì–´ì§„ ë°ì´í„°ì˜ ë¹ ë¥¸ ê²€ìƒ‰ì„ ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ treeì˜ ì¼ì¢…ì´ë‹¤. ë°ì´í„°ë¥¼ ì €ì¥í•  ë•Œ sequence ë°ì´í„°ì˜ ê²€ìƒ‰ì„ ìµœì í™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. ì›ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. sequenceì˜ ê²€ìƒ‰ ì‹œì— sequenceì˜ ì•ì—ì„œë¶€í„° ë§ëŠ” nodeë¥¼ rootì—ì„œë¶€í„° ê²€ìƒ‰í•˜ë©° ì°¾ì•„ë‚˜ê°„ë‹¤. ì´ ë•ë¶„ì— ê²€ìƒ‰ ì‹œì—ëŠ” sequenceì˜ ê¸¸ì´ë§Œí¼ì˜ ì‹œê°„ì´ë©´ ì¶©ë¶„íˆ ë°ì´í„°ë¥¼ ì°¾ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ, ì €ì¥ sequenceë¥¼ í’€ì–´ì„œ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— ê²½ìš°ì˜ ìˆ˜ê°€ ì—„ì²­ ë§ì•„ì§„ë‹¤. ì´ëŠ” sequenceë¥¼ í•˜ë‚˜ì˜ ë°ì´í„°ë¡œ ë³´ëŠ” ê²ƒë³´ë‹¤ ì €ì¥ ê³µê°„ì„ ë§ì´ ì°¨ì§€í•œë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤.\n- **Patricia Trie**  \n  Trieì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  sequenceë¥¼ ìš”ì†Œ í•˜ë‚˜ë¥¼ nodeë¡œ ë³´ì•˜ë‹¤ë©´, Patricia Trieì—ì„œëŠ” ê° nnodeê°€ ë‘ ê°œë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. branch node, leaf nodeì´ë‹¤. leaf nodeëŠ” ê° sequenceì˜ ëì„ ì˜ë¯¸í•˜ë©° ê° sequenceëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ leaf nodeë¡œ ì¢…ê²°ë˜ì–´ì§€ê³ , branch nodeëŠ” ì €ì¥í•œ ë°ì´í„° ì¤‘ì—ì„œ ì¤‘ë³µì´ ë°œìƒí•˜ëŠ” ê²½ìš° ì¤‘ê°„ ì§€ì ìœ¼ë¡œ ì €ì¥í•´ë‘ëŠ” ë°©ì‹ì´ë‹¤. ë”°ë¼ì„œ, Trieì—ì„œëŠ” ê° ë…¸ë“œê°€ sequenceì˜ í•˜ë‚˜ì˜ ê°’ì„ ì˜ë¯¸í–ˆë‹¤ë©´, Patricia Trieì—ì„œëŠ” pathê°€ sequenceì˜ ìš”ì†Œë“¤ì„ ì˜ë¯¸í•œë‹¤. ì´ì— ëŒ€í•œ ì´í•´ë¥¼ ìœ„í•´ì„œëŠ” ì•„ë˜ì— ì œì‹œëœ ê·¸ë¦¼ì„ ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.(ì¢Œ. trie, ìš°. patricia trie)  \n  ![patricia-trie](/images/patricia-trie.png)\n- **Merkle Tree**  \n  Bitcoinì—ì„œ ì‚¬ìš©ëœ ìë£Œêµ¬ì¡°ë¡œ Blockchainì˜ ëª¨ë“  Blockì„ ì €ì¥í•˜ëŠ” ê²ƒì€ íŠ¹ì • nodeì—ê²ŒëŠ” ë¶€ë‹´ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ì— ëŒ€í•œ ì¸ì¦ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•´ì„œ ìš”ì•½ë³¸ë§Œì„ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ğŸ”— bitcoin-4](/posts/bitcoin-4)ì˜ 2. Merkle Tree ë¶€ë¶„ì—ì„œ ìì„¸íˆ ë‹¤ë£¨ì—ˆë‹¤. ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´, Blockì„ serializationí•˜ê³  hashí•˜ì—¬ ê²°ê³¼ê°’ì„ ì €ì¥í•œ í›„ ì´ë¥¼ leaf nodeë¡œ í•˜ëŠ” í˜•íƒœì˜ binary treeë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ê¸°ì— ìš°ë¦¬ëŠ” Merkle Treeì˜ hashê°’ ëª‡ê°œë§Œ ê°–ê³ ë„ í•´ë‹¹ transactionì„ í¬í•¨í•˜ëŠ” blockì´ ìœ íš¨í•œì§€ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.  \n- **MPT**  \n  Merkle Patricia Trieì˜ ì¤„ì„ë§ë¡œ ê¸°ì¡´ Bitcoinì—ì„œ ì‚¬ìš©í•˜ë˜ Merkle Treeì™€ Patricia Trieì˜ ê²°í•©ì„ í†µí•´ ë§Œë“¤ì–´ë‚¸ ìë£Œêµ¬ì¡°ì´ë‹¤. ì´ì— ëŒ€í•œ ì„¤ëª…ì€ ì•„ë˜ì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¬ë‹¤.\n- **Latency bound issue**  \n  Memoryì—ì„œ ë„ˆë¬´ ë§ì€ ë°ì´í„°ë¥¼ ì–»ì–´ì˜¤ë ¤ê³  í•  ë•Œë¥¼ ì˜ë¯¸í•˜ëŠ” Memory Bound ì¤‘ì˜ í•˜ë‚˜ë¡œ dataë¥¼ Memory ë§Œìœ¼ë¡œëŠ” ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì„ ë•Œ, secondary storageì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ë°œìƒí•˜ëŠ” latencyë¥¼ ì˜ë¯¸í•œë‹¤.\n\n## Problem\n\nBitcoinì—ì„œ ì‹œì‘ëœ Blockchainì— ëŒ€í•œ ì‘ìš©ì€ ì˜ë£Œ, ê³µê¸‰ë§ ê´€ë¦¬ ë“±ìœ¼ë¡œ í™•ì¥ë˜ë©° ê³„ì†í•´ì„œ ë°œì „ë˜ê³  ìˆë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì•„ì§ê¹Œì§€ **transactionì˜ ë¹ ë¥¸ ì²˜ë¦¬**ëŠ” challengeí•œ ë¶€ë¶„ìœ¼ë¡œ ë‚¨ì•„ìˆë‹¤. ì´ëŠ” P2P í™˜ê²½ì—ì„œ ì•ˆì „í•œ transactionì˜ ìƒì„± ë° ì¡°íšŒ ê·¸ë¦¬ê³  ê²€ì¦ì„ ìœ„í•´ì„œ ì–´ì©” ìˆ˜ ì—†ëŠ” trade offë¡œ ë°›ì•„ë“¤ì—¬ì¡Œë‹¤. ê·¸ ê²°ê³¼ 7~30 tps(transaction per second)ì •ë„ì— ê·¸ì¹˜ëŠ” ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ì£¼ë¥˜ì¸ ì¤‘ì•™ ì²˜ë¦¬ ë°©ì‹ì€ ìˆ˜ ì²œê°œì˜ transactionì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒê³¼ ë¹„êµí–ˆì„ ë•Œì—ëŠ” êµ‰ì¥íˆ ë‚®ì€ ìˆ˜ì¤€ì´ë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë‹¤ë…„ê°„ ì—¬ëŸ¬ê°€ì§€ ì ‘ê·¼ ë°©ì‹ê³¼ í•´ê²°ì±…ì´ ì œì‹œë˜ì—ˆë‹¤(AI-gorand, Conflux, Prism, OHIE, etc). ì´ë¥¼ í†µí•´ì„œ ìˆ˜ ì²œê°œì˜ transactionì„ blockchainì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ì‘ìš©í•˜ëŠ”ë°ì—ëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ê·¸ê²ƒì€ stateë¥¼ ë³´ê´€í•˜ëŠ” ledger ë‹¨ì—ì„œ ë°œìƒí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‹¤ì œë¡œ transactionì„ ì²˜ë¦¬í•˜ëŠ” client ë‹¨ì—ì„œì˜ ë¬¸ì œì´ë‹¤. ì´ëŠ” ë°”ë¡œ **blockchain stateë¥¼ ë³€ê²½í•˜ëŠ” transactionì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ëŠ” ê²½ìš° client ë‹¨ì—ì„œ ìƒˆë¡œìš´ bottleneckì´ ë°œìƒí•œë‹¤ëŠ” ì ì´ë‹¤.** ì‹¤ì œë¡œ ê°€ì¥ ìœ ëª…í•œ Ethereum Clientì¸ GoEthereumê³¼ OpenEtereumì—ì„œëŠ” 700 tpsë¡œ ê¸°ì¡´ ì œì‹œëœ ìˆ˜ ì²œ transactionë³´ë‹¤ëŠ” í•œì°¸ ëª» ë¯¸ì¹˜ëŠ” ì„±ëŠ¥ì„ ë³´ì—¬ì¤€ë‹¤.\n\nê·¸ ì›ì¸ì€ ì‚¬ì‹¤ìƒ state machineì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” Ethereumê³¼ ì´ê²ƒì˜ ê²€ì¦ì„ ìœ„í•´ ì œì•ˆëœ MPTì˜ êµ¬ì¡°ì ì¸ í•œê³„ë¡œ ì¸í•´ ë°œìƒí•œë‹¤(ì´ëŠ” Backgroundì—ì„œ ì œëŒ€ë¡œ ë‹¤ë£° ê²ƒì´ë‹¤). ì´ êµ¬ì¡°ì ì¸ í•œê³„ì— ì˜í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ í˜„ìƒë“¤ì´ ë°œìƒí•œë‹¤.\n\n1. key-value ì§ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ” ë°ì´í„°ì˜ read/write ì—°ì‚°ì´ ì¦í­í•´ì„œ ë°œìƒí•œë‹¤.\n2. íŠ¹íˆ write operationì€ ëª¨ë“  nodeì— ëŒ€í•œ hashë¥¼ ì¬ê³„ì‚°í•˜ë„ë¡ í•œë‹¤.\n3. ì´ëŸ¬í•œ ë™ì‘ì´ ì™„ë£Œë˜ê¸° ì „ê¹Œì§€ ë°˜ë“œì‹œ transactionì„ ì²˜ë¦¬í•˜ëŠ” threadëŠ” ëŒ€ê¸°í•´ì•¼ í•œë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, í•´ë‹¹ ë…¼ë¬¸ì€ LMPTë¼ëŠ” ìƒˆë¡œìš´ ìë£Œêµ¬ì¡°ë¥¼ ì œì‹œí•œë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì˜ MPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œë³´ë‹¤ 6ë°° ì •ë„ ìƒìŠ¹ëœ tps ì„±ëŠ¥ ì§€í‘œë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ì´ê²ƒì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” MPTë¥¼ ê³„ì¸µí™”(layer)í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, ìµœê·¼ updateëœ ë‚´ìš©ì„ ë³„ë„ì˜ ì €ì¥ê³µê°„ì„ í™œìš©í•˜ì—¬ ì €ì¥í•´ë‘ê³  ì´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ë” ë¹ ë¥¸ ì²˜ë¦¬ ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.\n\n## Background\n\n> <mark>**1. Ethereum**</mark>\n\nEthereumì€ ê¸°ì¡´ Bitcoin Blockchain Systemê³¼ í™•ì—°íˆ ë‹¤ë¥¸ì ì´ ìˆë‹¤. ë°”ë¡œ State Machineì´ë¼ëŠ” ì ì´ë‹¤. ê¸°ì¡´ì˜ Bitcoinì—ì„œëŠ” ê±°ë˜ ë‚´ì—­ì„ ëª¨ë‘ ê³µê°œí•˜ê³ , ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ìµœì´ˆ Blockì—ì„œë¶€í„° ì´ ê±°ë˜ ë‚´ì—­ì„ ì½ì–´ë“¤ì´ë©´ì„œ ê°€ì§„ ìì‚°ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¦‰, ê±°ë˜ historyë¥¼ ì¢…í•©í•´ì„œ ê²°ê³¼ê°’ì„ ì–»ëŠ” ê²ƒì´ë‹¤. Transactionì˜ ìˆ˜ì •ê³¼ ì‚­ì œ ì—†ì´ ê³„ì†í•´ì„œ ì¶”ê°€ë§Œ ì´ë£¨ì–´ì§€ëŠ” í˜•íƒœë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, Ethereumì—ì„œëŠ” Transactionì„ State Machineì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ëŠ” í•˜ë‚˜ì˜ actionìœ¼ë¡œ ë°›ì•„ë“¤ì¸ë‹¤. ë”°ë¼ì„œ, Transactionì— ì˜í•´ì„œ ìš°ë¦¬ëŠ” ìƒíƒœê°€ ë³€í™”í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì¸ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•´ë‹¹ Stateë§Œ ë³´ê³  ìì‹ ì˜ ìì‚°ì„ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n> <mark>**2. MPT**</mark>\n\nê²°êµ­ Ethereum ì‹œìŠ¤í…œì„ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“  ê²ƒì´ ê³µê°œë˜ëŠ” Network ìƒì—ì„œ ì•ˆì „í•˜ê²Œ Stateì™€ ì´ë¥¼ ë³€ê²½í•˜ëŠ” Transactionì„ ë³´ê´€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì´ëŸ¬í•œ dataë¥¼ ë¬´ê²°í•˜ê²Œ ê·¸ëŸ¬ë©´ì„œë„ ìˆ˜ì •, ì‚­ì œ, ê²€ìƒ‰ ë“±ì´ ìš©ì´í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œ Ethereumì—ì„œëŠ” MPT(Merkle Patricia Trie)ë¥¼ í™œìš©í•œë‹¤. ì´ëŠ” ê²°êµ­ ìœ„ì—ì„œ ì„¤ëª…í•œ Merkle Treeì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•˜ìœ„ Nodeì˜ Hashê°’ì„ ìƒìœ„ Nodeì—ì„œ ê°€ì§€ê¸° ë•Œë¬¸ì— Root Hashë§Œì„ ë¹„êµí•˜ì—¬ ê²€ì¦ì„ í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ê°•ì ì„ ê°€ì§€ê³  ìˆë‹¤.\n\nMPTëŠ” 3ê°€ì§€ì˜ Nodeë¡œ ì´ë£¨ì–´ì§„ë‹¤.\n\n1. **Leaf Node**  \n   ì‹¤ì œë¡œ valueë¥¼ ì €ì¥í•˜ëŠ” ë§ë‹¨ nodeì´ë‹¤. ë§Œì•½, pathë¡œ keyê°€ ëª¨ë‘ í‘œì‹œë˜ì§€ ì•Šì•˜ë‹¤ë©´, key-endì— ë‚¨ì€ keyë¥¼ ëª¨ë‘ ë‹´ëŠ”ë‹¤.\n2. **Extension Node**  \n   Leaf Node ì´ì™¸ì— ê²½ë¡œì˜ í™•ì¥ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©ë˜ì–´ì§€ëŠ” Nodeë¡œ Branch Nodeì˜ hash dataë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ëŠ” ë“±ì˜ ì—­í• ì„ í•œë‹¤.\n3. **Branch Node**  \n   16ê°œì˜ pointerë¥¼ í¬í•¨í•˜ëŠ” Nodeë¡œ ì´ë¥¼ í†µí•´ì„œ Leaf, Extension, Branch Nodeë¥¼ ê°€ë¥´í‚¤ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ, ì¼ë°˜ì ì¸ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n\n![mpt](/images/mpt.png)\n\nì´ êµ¬ì¡°ê°€ ê°€ì§€ëŠ” ì˜ì˜ëŠ” ê²°êµ­ ìš°ë¦¬ëŠ” í•˜ìœ„ nodeë“¤ì„ hashí•œ ë°ì´í„°ë¥¼ ìƒìœ„ nodeì—ì„œ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í•„ìš”ì— ë”°ë¼ trieì— ì¼ë¶€ë¶„ë§Œì„ ì €ì¥í•´ë„ dataì˜ ê²€ì¦ì€ ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì´ë‹¤. ë”°ë¼ì„œ, ëª¨ë“  dataë¥¼ ê°€ì§€ëŠ” full nodeì™€ ë‹¬ë¦¬ light clientëŠ” ë” ì ì€ ë°ì´í„°ë§Œ ê°–ê³ ë„ ê²€ì¦ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, light clientì—ì„œ authenticated read(full nodeì˜ ë„ì›€ì´ í•„ìš”í•œ read)ë¥¼ ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ê²½ìš° full nodeì—ì„œëŠ” readë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ pathë¥¼ ë”°ë¼ì„œ ì½ê¸°ë¥¼ ë°˜ë³µí•´ë‚˜ê°€ë©°, leaf nodeì— ìˆëŠ” ìµœì¢… valueë¥¼ ì–»ì–´ì™€ì•¼ í•œë‹¤.\n\n> <mark>**3. Futher Observation**</mark>\n\ní•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” OpenEthereum Clientë¥¼ ê´€ì¸¡í•˜ê³ , ê¸°ì¡´ ë…¼ë¬¸ë“¤ì—ì„œ ì—¬ëŸ¬ ì˜ê°ì„ ì–»ì—ˆë‹¤. ë‹¤ìŒì€ ì´ ë…¼ë¬¸ì—ì„œ insightë¥¼ ì–»ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•œ ê´€ì¸¡ ì •ë³´ì´ë‹¤.\n\n1. Transactionì´ Blockchain Stateì— ë¹ˆë²ˆí•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ë¡ Transactionì˜ ì²˜ë¦¬ ì„±ëŠ¥ì€ ë‚®ì•„ì§„ë‹¤.\n2. ì‹¤ì œ Transactionì˜ ì‹¤í–‰ ì‹œê°„ ì¤‘ì—ì„œ ê°€ì¥ ë§ì€ ì‹œê°„ì„ ì°¨ì§€í•˜ëŠ” ê²ƒì€ Blockchain Stateì— ì ‘ê·¼í•˜ëŠ” ë™ì‘(SLOAD, SSTORE)ì´ë‹¤.  \n   [ğŸ”— ê¸°ë°˜ ë…¼ë¬¸(Securing Smart Contract with Runtime Validation)](https://aoli.al/papers/solythesis-pldi20.pdf)\n3. í•œ ë²ˆì˜ Transactionì€ ì—¬ëŸ¬ ë²ˆì˜ IOì„ ìœ ë°œí•œë‹¤.(IO amplication)  \n   MPT êµ¬ì¡°ì—ì„œ í•˜ë‚˜ì˜ key ì¡°íšŒë¥¼ ìœ„í•´ì„œ í•œ ë²ˆì— ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ê²°êµ­ keyë¥¼ í†µí•´ì„œ Trieë¥¼ ìˆœíšŒí•˜ì—¬ì•¼ í•œë‹¤.  \n   ì´ëŠ” keyì— ëŒ€ì‘ë˜ëŠ” Nodeê°€ ë§ì„ ìˆ˜ë¡ ë§ì€ IOë¥¼ ìš”êµ¬í•œë‹¤.\n4. Transaction ì‹¤í–‰ threadëŠ” ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šê³ , ìœ„ì—ì„œ ì œì‹œëœ operationì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.  \n   ì¦‰, Transactionì„ ì²˜ë¦¬í•˜ëŠ” ThreadëŠ” critical path(section)ë¥¼ ì§€í‚¤ê¸° ìœ„í•´ì„œ ë‹¨ í•˜ë‚˜ë§Œ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n5. memory cache sizeë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒì€ ì„±ëŠ¥í–¥ìƒì— í° ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.  \n   | Memory Cache size(MB) | Hit Rate | TPS  |\n   | :-------------------- | :------- | :--- |\n   | 50                    | 0.635    | 1238 |\n   | 100                   | 0.758    | 1256 |\n   | 500                   | 0.862    | 1278 |\n   | 1000                  | 0.879    | 1292 |\n\n   ìœ„ì˜ í‘œë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆì§€ë§Œ, Cache Sizeë¥¼ ëŠ˜ë ¸ì„ ë•Œ Hit RateëŠ” ëŠ˜ë¦´ ìˆ˜ ìˆì§€ë§Œ TPSì˜ ì„±ëŠ¥ í–¥ìƒ í­ì€ 5% ìˆ˜ì¤€ì— ê·¸ì¹œë‹¤. ì´ëŠ” memory cacheë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³  ìˆìŒì„ ì˜ë¯¸í•œë‹¤.\n\nì¦‰, í•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” í•˜ë‚˜ì˜ Transactionì— ì˜í•´ì„œ IOê°€ ë¹ˆë²ˆíˆ ë°œìƒí•˜ëŠ”ë° ì´ë¥¼ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ ê¸°ì¡´ MPTë§Œìœ¼ë¡œëŠ” í•œê³„ê°€ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤.\n\n## LMPT\n\nLayered Merkle Patricia Trieì˜ ì•½ìë¡œ ê¸°ì¡´ Ethereum MPTì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ ì œì•ˆí•˜ëŠ” ìë£Œêµ¬ì¡°ì´ë‹¤. ì´ì˜ í•µì‹¬ì ì¸ ëª©í‘œëŠ” Authenticated Ethereum Stateë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ë°”ë¡œ ê¸°ì¡´ Computer Architectureì—ì„œ ì‚¬ìš©í–ˆë˜ Hierarchical Memoryì˜ êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ì°¨ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, cacheë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” MPTë¥¼ ë” êµ¬í˜„í•´ë‘ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ê²°ë¡ ìƒìœ¼ë¡œ MPTì˜ readì‹œì— IO amplicationì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\nìš°ì„  êµ¬ì„± ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. **Delta MPT**  \n   Read accessê°€ ìš”ì²­ë˜ë©´ ê°€ì¥ ë¨¼ì € ì¡°íšŒë˜ëŠ” MPTì´ë‹¤.\n2. **Intermediate MPT**  \n   Delta MPT ì´í›„ì— ì¡°íšŒë˜ëŠ” MPTì´ë‹¤.\n3. **Snapshot MPT**  \n   ì›ë³¸ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” MPTì´ë‹¤. ì „ì²´ blockchain dataë¥¼ ì €ì¥í•˜ë©°, diskì— ì¡´ì¬í•œë‹¤.\n4. **Flat KV Store**  \n   readì‹œì— ê°€ì¥ ë§ˆì§€ë§‰ì— ì¡°íšŒëœë‹¤. ì´ ì—­ì‹œë„ ì „ì²´ blockchain dataë¥¼ ì €ì¥í•˜ì§€ë§Œ, ì°¨ì´ì ì´ë¼ë©´ keyë¥¼ pathë¡œ í•˜ì—¬ ì¡°íšŒí•˜ëŠ” MPTì™€ ë‹¤ë¥´ê²Œ key, value storeí˜•íƒœì´ë‹¤.  \n   ê·¸ë ‡ê¸°ì— snapshot MPTì™€ ë™ì¼í•˜ê²Œ diskì— ì¡´ì¬í•˜ì§€ë§Œ, ë” ë¹ ë¥´ë‹¤ê²Œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.  \n   snapshot MPTë¥¼ ì¡°íšŒí•˜ëŠ” ëŒ€ì‹ ì— ì´ë¥¼ í†µí•´ì„œ ì¡°íšŒë¥¼ í•œë‹¤ë©´, keyë¥¼ í†µí•´ì„œ ë°”ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— read IO amplicationì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\nìœ„ì˜ ê¹Œì§€ëŠ” readì‹œì— ìµœì í™”ë¥¼ ìˆ˜í–‰í•˜ì˜€ë‹¤ë©´, write ì‹œì—ëŠ” ì´ë ‡ê²Œ ê³„ì¸µí™”ë¥¼ í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— diskì— writeí•˜ëŠ” ë™ì•ˆì˜ ì—¬ìœ ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. LMPTì—ì„œëŠ” MPTì˜ ì ì€ ë³€í™”ì¼ ê²½ìš°ì—ëŠ” delta MPTì— ì €ì¥í•˜ê³  ìˆë‹¤ê°€ periodic checkpointë¥¼ ë‘ê³ , í•´ë‹¹ ì‹œì ë§ˆë‹¤ delta MPTì˜ ë³€ê²½ì‚¬í•­ì€ intermediate MPT, intermediate MPTì˜ ë³€ê²½ ë‚´ìš©ì€ snapshot MPTì— í•©ì¹œë‹¤. ë”°ë¼ì„œ, write ë™ì‘ì€ ì‹œê°„ì°¨ë¥¼ ë‘ê³  **batch ë‹¨ìœ„**ë¡œ **verificationê³¼ëŠ” ë…ë¦½ì **ìœ¼ë¡œ ì§„í–‰ëœë‹¤. ì´ëŠ” ê²°êµ­ ë³‘ë ¬ì ìœ¼ë¡œ IO ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì—¬ì§€ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.\n\n> <mark>**[Design] Structure**</mark>\n\nì–´ë–»ê²Œ ì‹¤ì œë¡œ ì´ë¥¼ êµ¬í˜„í–ˆëŠ”ì§€ì— ëŒ€í•œ outlineì„ ì œì‹œí•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. (OpenEthereumì€ Rustë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— LMPTë„ Rustì— ê¸°ë°˜í•œ codeì´ë‹¤. psuedo codeì´ê¸° ë•Œë¬¸ì— ë¬¸ë²•ì€ ë‹¤ì†Œ)\n\n```rust\nstruct Trie {\n  root: uint256,\n  kv:   Map\n}\nstruct LMPT {\n  delta, interm:  Trie, // In memory\n  snapshot:       Trie, // In Disk\n  flat:           Map   // In Disk\n}\n```\n\nìœ„ì—ì„œ ì œì‹œí•œ ì „ì²´ êµ¬ì„±ìš”ì†Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ delta, intermedidate, snapshot mptë¥¼ ì •ì˜í•˜ê³  flatë¥¼ ì •ì˜í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n> <mark>**[Design] Read/Write**</mark>\n\nì‹¤ì œë¡œ Writeì™€ ReadëŠ” ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰ë˜ì–´ì§„ë‹¤. ì½”ë“œëŠ” ë…¼ë¬¸ì„ ì°¸ì¡°í•˜ì˜€ì§€ë§Œ, ì„¤ëª…ì€ ì§ì ‘ ì‘ì„±í•˜ì˜€ë‹¤.\n\n```rust\nT := LMPT()\n\nfn write_LMPT(k, v) {\n  root := T.delta.put(T.delta.root, k, v) // put new k, v data and get recomputed root hash\n  T.delta.root := root                    // set new root\n}\n\nfn read_LMPT(k, auth_proof) -> <v, p> {\n  // get value and path from delta mpt with key\n  <v, p1> := T.delta.get(T.delta.root, k)\n  // check whether value is exist or not\n  // if exist, then return value and path\n  // if not exist, then we get a adjacent path from delta MPT and store it in p1.\n  if v is present\n    return <v, p1>\n  // get value and path from intermediate mpt with key\n  <v, p2> := T.interm.get(T.interm.root, k)\n  // check whether value is exist or not\n  // if exist, then return value and path(p1 is adjacent path in delta, p2 is real path in intermediate MPT)\n  // if not exist, then we get a adjacent path from intermediate MPT and store it in p2.\n  if v is present\n    return <v, p1 + p2>\n  // if client want authneticated read(when they can't have authenticity), \n  // then request to snapshot MPT and return result\n  // else then request to flat kv store and return result without path.\n  if auth_proof\n    <v, p3> := T.snapshot.get(T.snapshot.root, k)\n    return <v, p1 + p2 + p3>\n  else\n    v := T.flat.get(k)\n    return <v, dummy>\n}\n```\n\nê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´, ê²°êµ­ writeì˜ ê²½ìš°ì—ëŠ” ë‹¤ìŒ ì ˆì°¨ê°€ ëì¸ ê²ƒì´ë©°,\n\n1. key, valueë¥¼ ë°›ì•„ì„œ delta MPTì— ì €ì¥í•œë‹¤.\n2. ë³€ê²½ëœ root hashë¥¼ delta MPTì— ì ìš©í•œë‹¤.\n\nreadì˜ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ê°€ ëì¸ ê²ƒì´ë‹¤.\n\n1. delta MPTë¥¼ ìš°ì„  ì¡°íšŒí•œë‹¤.\n2. intermediate MPTë¥¼ ë‹¤ìŒìœ¼ë¡œ ì¡°íšŒí•œë‹¤.\n3. ë§Œì•½, ì¶œì²˜ê°€ í™•ì‹¤í•œ ìš”ì²­ì¸ ê²½ìš° auth_proofê°€ í•„ìš”ì—†ìœ¼ë¯€ë¡œ, flat KV storeë¥¼ ì¡°íšŒí•œë‹¤.\n4. auth_proofê°€ í•„ìš”í•˜ë‹¤ë©´, snapshot MPTë¥¼ ì¡°íšŒí•œë‹¤.\n\n> <mark>**[Design] Merge**</mark>\n\nwrite ê³¼ì •ì—ì„œëŠ” delta MPTì—ë§Œ ì¶”ê°€ë¥¼ ìˆ˜í–‰í–ˆì—ˆë‹¤. ì•„ë˜ì—ì„œëŠ” ì‹¤ì œë¡œ ë³€ê²½ì‚¬í•­ì„ snapshot MPTì™€ flat KV storeì— ì ìš©í•œ ê²ƒì´ë‹¤.\n\n```rust\n// merge intermediate MPT to snapshot MPT and flat KV store\nfn merge_compute(T) -> (root, flat) {\n  flat := T.flat            \n  root := T.snapshot.root   \n  for <k, v> in T.interm.kv(T.interm.root)\n    root := T.snapshot.append(root, k, v)\n    flat := flat.set(k, v)\n  return (root, flat) \n}\n\n// reconfigure flat, snapshot root, intermediate MPT, delta MPT\nfn merge_update(T, root, flat) {\n  T.flat := flat\n  T.snapshot.root := root\n  T.interm := T.delta\n  T.interm.root := T.delta.root\n  T.delta := Trie()\n  T.delta.root := None\n}\n```\n\nì´ ê³¼ì •ë„ ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. merge_compute, merge_updateê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•œë‹¤.\n2. merge_computeì—ì„œëŠ” intermediate MPTì˜ dataë¥¼ ëª¨ë‘ snapshot MPTì™€ flat KV storeì— ì¶”ê°€í•œë‹¤.\n3. merge_updateì—ì„œëŠ” intermediate MPTëŠ” ì´ë¯¸ ì ìš©ì´ ì™„ë£Œë˜ì—ˆê¸° ë•Œë¬¸ì— delta MPTë¥¼ intermediate MPTë¡œ ë³€ê²½í•œ í›„, delta MPTë¥¼ ë¹„ì–´ ìˆëŠ” MPTë¡œ ë³€ê²½í•œë‹¤.\n4. ë§¤ ì£¼ê¸°ê°€ ë  ë•Œë§ˆë‹¤ merge_computeì™€ merge_updateê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.\n\nìœ„ methodê°€ ì¤‘ìš”í•œ ì ì€ ë°”ë¡œ transactionì˜ write/readì™€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ì¦‰, diskì— dataë¥¼ write í•˜ê¸° ìœ„í•´ì„œ ì‹¤ì œ transaction ì²˜ë¦¬ì— waitingì´ í•„ìš”ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n> <mark>**[Design] Flush**</mark>\n\nìœ„ì—ì„œ ì œì‹œí•œ Methodë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì ìš©í•¨ìœ¼ë¡œì„œ ë‹¤ìŒê³¼ ê°™ì´ Ethereum stateë¥¼ updateí•˜ê³ , ë¬´ê²°í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.\n\n```rust\nblock_cnt := 0\nmerge_interval := 100     // you can set this constant\n\nT := LMPT(genesis_state)  // setup initial state\n\nwhile Block is processing\n  for transaction in Block\n    T.update_trie(transaction)                  // apply transaction to LMPT\n  block_cnt += 1\n  if block_cnt % merge_interval == 0\n    Wait for last spawned thread to end         // wait until previous thread finished.\n    merge_update(T, root, flat)               \n    spawn_thread(root, flat=merge_compute(T))   // make new thread for merging\n```\n\nì´ ê³¼ì •ì˜ ìš”ì•½ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. merge_intervalë¥¼ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤. (ì´ ê°’ì— ëŒ€í•´ì„œ ë…¼ë¬¸ì—ì„œëŠ” ì œì‹œí•˜ì§€ ì•ŠìŒ)\n2. ì´ˆê¸° genesis_stateë¥¼ í†µí•´ LMPTë¥¼ ì´ˆê¸°í™”í•œë‹¤.\n3. blockchainì˜ blockì„ ì²˜ë¦¬í•˜ë„ë¡ í•œë‹¤. ìƒˆë¡œìš´ blockì— ëŒ€í•œ ì²˜ë¦¬ë„ ì´ì— í¬í•¨ëœë‹¤.\n4. ê·¸ ê³¼ì •ì—ì„œ íŠ¹ì • intervalì´ ë˜ë©´, ê¸°ì¡´ merge_computeë¥¼ ìˆ˜í–‰í•˜ëŠ” threadê°€ ìˆëŠ”ì§€ë¥¼ í™•ì¸í–ˆë‹¤ê°€ backgroundë¡œ merge_computeë¥¼ ì‹¤í–‰í•˜ëŠ” threadë¥¼ ìƒì„±í•œë‹¤.\n\n## Evaluation\n\në³¸ ë…¼ë¬¸ì—ì„œëŠ” í‰ê°€ë¥¼ ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‹¤í—˜ì„ ìˆ˜í–‰í•œë‹¤.\n\n|       | data structure | workload              |\n| :---- | :------------- | :-------------------- |\n| Test1 | MPT vs LMPT    | simple payment        |\n| Test2 | MPT vs LMPT    | ETC-20 token (Tether) |\n\nì—¬ê¸°ì„œ ì‹¤í—˜ ì‹œì— ê³ ë ¤í•œ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. ì‹¤ì œì™€ ê°™ì€ ìƒí™©ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì‹¤ì œ Ethereum transaction 500,000ê°œë¥¼ í™œìš©í•œ benchmarkë¥¼ ë§Œë“¤ì—ˆë‹¤.\n2. ë˜í•œ, ë˜ ë‹¤ë¥¸ insightë¥¼ ì–»ê¸° ìœ„í•´ì„œ ê° addressê°„ì˜ ê³ ë¥´ë©´ì„œë„ randomí•˜ê²Œ transactionì„ ë³´ë‚´ë„ë¡ í•˜ëŠ” Random senders traces benchmarkë„ ë§Œë“¤ì—ˆë‹¤.\n3. ë˜í•œ, ê°„ë‹¨í•œ paymentì˜ ê²½ìš°ì™€ ë³µì¡í•œ smart contractì— ì˜í•´ ë™ì‘í•˜ëŠ” ETC-20 token ì¤‘ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” Tether tokenì„ í™œìš©í•œ ë¹„êµë„ ìˆ˜í–‰í•˜ì˜€ë‹¤.\n\nê²°ê³¼ì ìœ¼ë¡œ stateë¡œ ë³´ê´€í•´ì•¼í•  accountì˜ ìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ LMPTì™€ MPT ì‚¬ì´ì˜ ì°¨ì´ë¥¼ ëª…í™•í•˜ê²Œ ë³¼ ìˆ˜ ìˆëŠ” í˜•íƒœë¥¼ ë³´ì—¬ì¤€ë‹¤. ì´ ì°¨ì´ëŠ” ë” ë³µì¡í•œ ETC-20 tokenì—ì„œ ë” ëª…í™•í•˜ê²Œ ë“¤ì–´ë‚˜ê³  ì„±ëŠ¥ ì°¨ì´ëŠ” ì ê²ŒëŠ” 1.2ë°°ì—ì„œ 6ë°° ì´ìƒê¹Œì§€ë„ ë²Œì–´ì§€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ê²°ê³¼ì ìœ¼ë¡œ cacheë¥¼ í™œìš©í•˜ì—¬ ë” íš¨ìœ¨ì ì¸ Transaction ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n## Related Work\n\ní•´ë‹¹ ë…¼ë¬¸ì€ ê²°êµ­ Blockchainì˜ MPT êµ¬í˜„ì„ ë³€í˜•í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì œì‹œí•˜ì˜€ë‹¤. ì´ì™¸ì—ë„ TPSë¥¼ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—¬ëŸ¬ ë°©ë²•ì´ ì œì‹œë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, LMPTëŠ” ì´ëŸ¬í•œ ì—°êµ¬ë“¤ë³´ë‹¤ ì• ì„  ê²°ê³¼ë¥¼ ë³´ì—¬ì¤€ë‹¤. ê·¸ ì´ìœ ë¥¼ ë“¤ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì „ ì—°êµ¬ì™€ ë¹„êµí–ˆì„ ë•Œ ì–´ëŠ ì ì´ ì¢‹ì€ì§€ë¥¼ ë°íŒë‹¤.\n\n1. **Distributed MPTs**  \n   LMPTì™€ ê°€ì¥ ìœ ì‚¬í•œ ì—°êµ¬ ì‚¬ë¡€ë“¤ë¡œ MPTì˜ êµ¬í˜„ì„ ë³€ê²½í•˜ì—¬ ìµœì í™”ë¥¼ í•˜ê³ ì í•œ ì‚¬ë¡€ì´ë‹¤. í•˜ì§€ë§Œ, ì´ë“¤ ì¤‘ì—ì„œë„ LMPTê°€ ë” ìš°ìˆ˜í•˜ë‹¤ëŠ” ê²ƒì„ ë‹¤ìŒì„ í†µí•´ì„œ ì•Œ ìˆ˜ ìˆë‹¤.\n   - [ğŸ”— mLSM](https://www.usenix.org/conference/hotstorage18/presentation/raju)  \n     MPT ìì²´ë¥¼ ì—¬ëŸ¬ ê°œì˜ MPTë¡œ ë‚˜ëˆ„ì–´ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ íƒí•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ì„œ read, write ì‹œì— IO amplicationì„ ë§‰ì„ ìˆ˜ **ìˆì—ˆì§€ë§Œ**, ì˜¤íˆë ¤ write ì‹œì—ëŠ” ì—¬ëŸ¬ ë²ˆì˜ ì¤‘ë³µ writingìœ¼ë¡œ ì¸í•´ì„œ ë” ë§ì€ ë¹„ìš©ì´ ë°œìƒí•˜ì˜€ë‹¤.\n   - [ğŸ”— RainBlock](https://www.usenix.org/conference/atc21/presentation/ponnapalli)  \n     MPTë¥¼ shardingí•˜ì—¬ ë¶„ë°°í•˜ì—¬ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ ì„ íƒí•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ì„œ ì„±ëŠ¥ì„ ì˜¬ë¦¬ëŠ” ê²ƒì´ ê°€ëŠ¥í–ˆì§€ë§Œ, ì´ëŠ” ì „ì²´ì ì¸ Ethereum êµ¬í˜„ì„ ë°”ê¾¸ì–´ì•¼ í•œë‹¤. **í•˜ì§€ë§Œ**, LMPTëŠ” ì´ëŸ¬í•œ ë³€ê²½ì—†ì´ë„ clientë‹¨ì—ì„œ ì‰½ê²Œ êµ¬í˜„ ë° ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.\n2. **Consensus protocols**  \n   consensus protocolì„ ë³€ê²½í•˜ì—¬ ìµœì í™”ë¥¼ í•˜ë ¤ëŠ” ì‹œë„ ì—­ì‹œ ë§ì•˜ë‹¤(HyperLedger Fabric, Prism, etc). **í•˜ì§€ë§Œ**, ì´ë¥¼ í†µí•´ì„œ storage bottleneckì„ í•´ê²°í•  ìˆ˜ëŠ” ì—†ë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ ì—°êµ¬ì™€ consensus protocol ê´€ë ¨ ì—°êµ¬ëŠ” ìƒí˜¸ ë³´ì™„ì ì¸ ê´€ê³„ë¡œ, ê°™ì´ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë” ì¢‹ì€ ì„±ëŠ¥ì„ ë³´ì¼ ê²ƒì´ë¼ê³  ê¸°ëŒ€í•˜ê³  ìˆë‹¤.\n3. **Sharding in Blockchains**  \n   shardingì€ Ethereum v2ì˜ architecture ì¤‘ í•˜ë‚˜ë¡œ ì œì‹œëœ ë‚´ìš© ì¤‘ í•˜ë‚˜ë¡œ ì´ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´ transaction ì‹¤í–‰ì„ ë¶„ì‚°í•˜ëŠ” íš¨ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, shardê°„ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•œ protocolê³¼ shardê°„ cross-shard í†µì‹ ìœ¼ë¡œ ì¸í•œ overheadë„ ê³ ë ¤í•´ì•¼ í•œë‹¤. ì´ëŸ¬í•œ ë‚´ìš©ì„ ì œì³ë‘ê³ ë„ ê²°êµ­ì€ shardingê³¼ LMPTëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— consensus protocolê³¼ ê°™ì´ ë…ë¦½ì ìœ¼ë¡œ ë³´ì•„ë„ ë¬´ê´€í•˜ë‹¤.\n\n## Opinion\n\nTPSë¥¼ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë°©ë²•ì€ Bitcoinì´ ì²˜ìŒ ìƒê¸°ê³  ë‚˜ì„œë¶€í„° ê³„ì†í•´ì„œ ê³ ë ¤ë˜ê³  ìˆëŠ” ë¬¸ì œë¼ê³  ìƒê°í•œë‹¤. í•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” ê¸°ì¡´ ë…¼ë¬¸ì´ ì˜€ë˜ mLSMì—ì„œ ì˜ê°ì„ ì–»ì–´ì„œ ì´ë¥¼ ë” ë°œì „ì‹œí‚¨ ë°©ë²•ì„ ì°¾ì•˜ë‹¤ê³  ìƒê°í•œë‹¤. ë‹¨ìˆœíˆ ì—¬ëŸ¬ ê°œì˜ MPTë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œ ì‹¤ì œ ë¬¸ì œë¥¼ ëª…í™•í•˜ê²Œ ì •ì˜í•´ì„œ ì—¬ëŸ¬ ê°œì˜ MPTë¡œ ì–´ë–»ê²Œ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ëª…í™•í•˜ê²Œ ì œì‹œí•œ ê²ƒ ê°™ë‹¤. ì—¬ëŸ¬ ê°œì˜ MPTë¥¼ í†µí•´ì„œ read ê³¼ì •ì—ì„œ localityë¥¼ í™•ë³´í–ˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ merge ê³¼ì •ì„ write ê³¼ì •ì—ì„œ ë¶„ë¦¬í•¨ìœ¼ë¡œì„œ ê¸°ì¡´ transactionì´ ê°€ì§€ë˜ bottleneckì„ í•´ì†Œí•œ ê²ƒì´ë‹¤. ì´ ì ì´ ëª…í™•í•˜ê²Œ ë°›ì•„ë“¤ì—¬ì ¸ì„œ í•´ë‹¹ ë¶„ì•¼ ì „ê³µì´ ì•„ë‹˜ì—ë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ, ì•„ì‰½ê²Œë„ ì‹¤ì œ êµ¬í˜„ codeë¥¼ ì°¾ì„ ìˆ˜ëŠ” ì—†ì—ˆê¸°ì— flushë‹¨ê³„ì—ì„œ ì‚¬ìš©ëœ merge_intervalì˜ ì •í™•í•œ ê°’ì´ ê¶ê¸ˆí–ˆì§€ë§Œ ì°¾ì§€ëŠ” ëª»í–ˆë‹¤. ë˜, ì´ ì„ê³„ê°’ì´ ìƒí™©ì— ë”°ë¼ì„œ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìš”ì†Œë¼ê³  íŒŒì•…ì„ í•˜ê³  ìˆì—ˆëŠ”ë° ì´ë¥¼ ì•Œ ìˆ˜ ì—†ì–´ì„œ ì•„ì‰¬ì› ë‹¤.\n\nì•„ë§ˆ ì—¬ê¸°ì„œ í›„ì† ì—°êµ¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤ë©´, í•´ë‹¹ ì„ê³„ê°’ì„ ML, DL, RLì„ ì´ìš©í•´ì„œ ì¢€ ë” íš¨ê³¼ì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ì—°êµ¬ ë°©í–¥ì´ ë  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\nì´ëŸ¬í•œ ì£¼ì œë¥¼ ì²˜ìŒ ì ‘í–ˆê³ , Ethereumì˜ êµ¬í˜„ì— ëŒ€í•´ì„œë„ ì „í˜€ ì•„ëŠ”ê²Œ ì—†ì—ˆê¸° ë•Œë¬¸ì— ë‹¤ì–‘í•œ ì‚¬ì „ ì¡°ì‚¬ë¥¼ ìš”êµ¬í–ˆë˜ ë…¼ë¬¸ì´ì˜€ë‹¤. í•˜ì§€ë§Œ, Backgroundì— ëŒ€í•œ ì„¤ëª…ë„ ìì„¸íˆ ë‚˜ì™€ìˆê³ , Idea ìì²´ê°€ ëª…í™•í–ˆê¸°ì— í›Œë¥­í•˜ê³  ê°€ë…ì„±ì´ ë†’ì€ ë…¼ë¬¸ì´ ëœ ê±° ê°™ë‹¤.\n\n## Reference\n\n- Jemin Andrew Choi, Sidi Mohamed Beillahi, Peilun Li, Andreas Veneris, Fan Long [`\"LMPTs: Eliminating Storage Bottlenecks for Processing Blockchain Transactions\"`](https://ieeexplore.ieee.org/document/9805484/), May 2022\n- Ao Li, Jemin Andrew Choi, Fan Long [`\"Securing Smart Contract with Runtime Validation\"`](https://aoli.al/papers/solythesis-pldi20.pdf), June 2020\n- Tumbnail : Photo by [Shubham Dhage](https://unsplash.com/@theshubhamdhage?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/blockchain?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- Merkle Patricia Image : <https://ethereum.stackexchange.com/questions/268/ethereum-block-architecture>\n- Pandian Raju, Soujanya Ponnapalli, Evan Kaminsky, Gilad Oved, and Zachary Keener, University of Texas at Austin; Vijay Chidambaram, University of Texas at Austin and VMware Research; Ittai Abraham, VMware Research, [`mLSM: Making Authenticated Storage Faster in Ethereum`](https://www.usenix.org/conference/hotstorage18/presentation/raju), July 2018\n- Soujanya Ponnapalli, Aashaka Shah, and Souvik Banerjee, University of Texas at Austin; Dahlia Malkhi, Diem Association and Novi Financial; Amy Tai, VMware Research; Vijay Chidambaram, University of Texas at Austin and VMware Research; Michael Wei, VMware Research, [`RainBlock: Faster Transaction Processing in Public Blockchains`](https://www.usenix.org/conference/atc21/presentation/ponnapalli), July 2021\n","slug":"lmpt","date":"2022-10-28 17:17","title":"LMPT","category":"Paper","tags":["Blockchain","Ehtereum","MPT"],"desc":"Ethereumì˜ TPSë¥¼ Client ë‹¨ì—ì„œ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë…¸ë ¥ìœ¼ë¡œ, LMPTëŠ” Layered Merkle Partical Trieì˜ ì•½ìì´ë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì—ì„œ ì‚¬ìš©í•˜ë˜ MPTì˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•˜ì—¬ ì œê¸°ëœ ì•„ì´ë””ì–´ë¡œ Computer Architectureì—ì„œ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” cacheë¥¼ ì ‘ëª©í•œ ë°©ë²•ì´ë‹¤. (í•´ë‹¹ ë…¼ë¬¸ ICBC 2022ì˜ ë…¼ë¬¸ ì¤‘ LMPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìš”ì•½ê¸€ì´ë‹¤.)","thumbnailSrc":"https://euidong.github.io/images/blockchain-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì „ê¹Œì§€ íŠ¹ì • wordë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ modelingì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ íŠ¹ì • wordì˜ sequenceë¥¼ í†µí•´ì„œ ê° wordì— ëŒ€í•œ classificationì„ í•œ ë²ˆì— í•˜ê³  ì‹¶ì€ ê²½ìš°ëŠ” ì–´ë–»ê²Œ í• ê¹Œ?(ì˜ˆë¥¼ ë“¤ì–´, ê° ë‹¨ì–´ì˜ í’ˆì‚¬ë¥¼ ì§€ì •í•˜ëŠ” ì¼) ì¼ë°˜ì ìœ¼ë¡œ ê° ë‹¨ì–´ê°€ íŠ¹ì • í•´ë‹¹ classì¼ í™•ë¥ ë¡œ êµ¬í•˜ëŠ” ë°©ë²•ì´ ì¼ë°˜ì ì¼ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ë¬¸ë§¥ì„ ê³ ë ¤í•˜ì—¬ í™•ë¥ ì„ êµ¬í•  ë°©ë²•ì€ ì—†ì„ê¹Œ? ê·¸ ë°©ë²•ì€ ë°”ë¡œ bigramì„ ì´ìš©í•˜ë©´ ë  ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì‚¬ì‹¤ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë¬¸ë§¥ì´ ë‹¨ì–´ ìì²´ë³´ë‹¤ëŠ” ì´ì „ classê°€ ë” ì˜í–¥ì´ í¬ë‹¤ë©´, ì´ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì´ë¥¼ ìœ„í•œ í•´ê²°ì±…ì´ HMMì´ë‹¤. NLP ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ë„“ê²Œ ì‚¬ìš©ë˜ê³  ìˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” NLP ë¶„ì•¼ì—ì„œ ì–´ë–»ê²Œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.\n\n## Markov Model\n\nHMMì„ ì•Œì•„ë³´ê¸°ì „ì— Markov Modelì„ ì•Œì•„ì•¼ í•œë‹¤. ì´ëŠ” íŠ¹ì • sequenceì˜ í™•ë¥ ì„ ì¶”ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì¦‰ ìš°ë¦¬ì—ê²Œ state sequence ($S= {s_{0}, s_{1}, ..., s_{N}}$)ê°€ ì£¼ì–´ì§ˆ ë•Œ, ê° stateì—ì„œ ë‹¤ìŒ stateë¡œ ì „ì´(ì´ë™)í•  í™•ë¥ ì„ ì´ìš©í•´ì„œ state sequenceì˜ í™•ë¥ ì„ êµ¬í•˜ëŠ” ë°©ë²•ì´ë‹¤.\n\n![nlp-markov-model-1](/images/nlp-markov-model-1.jpg)\n\nìœ„ì˜ ê·¸ë¦¼ì´ state ê° ê°ì—ì„œ ë‹¤ìŒ stateë¡œ ì „ì´í•  í™•ë¥ ì„ ë‚˜íƒ€ë‚¸ ê²ƒì´ë¼ë©´, ìš°ë¦¬ëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ê·¸ë¦¼ìœ¼ë¡œ sequenceì˜ í™•ë¥ ì„ ì¶”ë¡ í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n![nlp-markov-model-2](/images/nlp-markov-model-2.jpg)\n\në”°ë¼ì„œ, ìœ„ì˜ ê·¸ë¦¼ì—ì„œ ìš°ë¦¬ê°€ ë§Œì•½ $(s_{0}, s_{1}, s_{0}, s_{2})$ìœ¼ë¡œ ì´ë£¨ì–´ì§„ sequenceì˜ í™•ë¥ ì„ ì–»ê¸°ë¥¼ ë°”ë€ë‹¤ë©´, ê·¸ í™•ë¥ ì€ ì•„ë˜ì™€ ê°™ì•„ì§„ë‹¤.\n$$\n\\begin{align*}\np(s_{0}, s_{1}, s_{0}, s_{2}) &= p(s_{0}| \\text{start}) \\times p(s_{1}|s_{0}) \\times p(s_{0}|s_{1}) \\times p(s_{2}|s_{1}) \\times p(end|s_{2}) \\\\\n&= \\pi_{0} \\times p_{01} \\times p_{10} \\times p_{12} \\times 1 \n\\end{align*}\n$$\n\nì´ë¥¼ ì˜ ì‚´í´ë³´ë‹ˆ bigramì—ì„œì˜ Likelihoodë¥¼ êµ¬í•˜ëŠ” ê³µì‹ê³¼ ë˜‘ê°™ë‹¤. ì¦‰, state ê° ê°ì„ wordë¼ê³  ë³¸ë‹¤ë©´, Markov Modelì„ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” í™•ë¥ ì€ bigramì˜ Likelihoodì¸ ê²ƒì´ë‹¤.\n\nê·¸ë¦¬ê³  ì´ë¥¼ ì¼ë°˜í™”í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\np(seq) = \\prod_{i=1}^{N}p(seq_{i}|seq_{i-1})\n$$\n\nê·¸ëŸ°ë°, ì—¬ê¸°ì„œ nì´ 3 ì´ìƒì¸ ngramì„ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´, ê° stateë¥¼ n-1 gramìœ¼ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.\n\n$$\n\\begin{align*}\nX_{i} &= (Q_{i-1}, Q_{i}) \\text{ë¼ë©´, }\\\\\nP(X_{i} | X_{i-1}) &= P(Q_{i-1}, Q_{i} | Q_{i-2}, Q_{i-1}) \\\\\n&= P(Q_{i} | Q_{i-2}, Q_{i-1})\n\\end{align*}\n$$\n\në”°ë¼ì„œ, trigramì„ ì ìš©í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n$$\n\\begin{align*}\np((start, w_{0}), (w_{0}, w_{1}), (w_{1}, w_{0}), (w_{0}, w_{2})) &= p(w_{0}| \\text{start}, \\text{start}) \\times p(w_{1}|\\text{start}, w_{0}) \\times p(w_{0}|w_{0}, w_{1}) \\times p(w_{2}|w_{1}, w_{0}) \\times p(end|w_{0}, w_{2}) \\\\\n&= \\pi_{0} \\times p_{01} \\times p_{10} \\times p_{12} \\times 1\n\\end{align*}\n$$\n\n\n## Hidden Markov Model\n\nHidden Markov Modelì€ stateë¥¼ í•˜ë‚˜ ë” ë§Œë“ ë‹¤ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤. ê·¸ë˜ì„œ, ìš°ë¦¬ê°€ ì§ì ‘ ê´€ì¸¡í•˜ëŠ” state(**observed state**)ì™€ ì§ì ‘ì ìœ¼ë¡œ ê´€ì¸¡í•˜ì§€ ì•Šì§€ë§Œ, ê´€ì¸¡í•œ stateë“¤ì— ì˜ì¡´í•˜ëŠ” state(**hidden state**) ì´ ë‘ ê°œì˜ stateë¥¼ ì‚¬ìš©í•œë‹¤. ì¼ë°˜ì ì¸ ì˜ˆì‹œê°€ textê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ ìš°ë¦¬ëŠ” ê° ë‹¨ì–´ë¥¼ observed stateë¼ê³  í•œë‹¤ë©´, ê° ë‹¨ì–´ì˜ í’ˆì‚¬ë¥¼ hidden stateë¼ê³  ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n![nlp-markov-model-3](/images/nlp-markov-model-3.jpg)\n\nìœ„ì˜ ì˜ˆì‹œëŠ” ìš°ë¦¬ê°€ ê´€ì¸¡í•˜ëŠ” ë°ì´í„°($O$)ê°€ 3ê°œì˜ stateë¥¼ ê°€ì§€ê³ , ì´ ì‚¬ê±´ì— ì˜ì¡´ì ì¸ ë˜ ë‹¤ë¥¸ ì‚¬ê±´($H$)ì´ 3ê°œì˜ stateë¥¼ ê°€ì§€ëŠ” ê²½ìš°ì´ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ ê¸°ì¡´ Markov Modelë³´ë‹¤ ë³µì¡í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Estimation\n\nìš°ë¦¬ê°€ í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì€ í¬ê²Œ ë‘ ê°€ì§€ì´ë‹¤. ì¼ë°˜ì ì¸ Markov Modelì—ì„œ í•  ìˆ˜ ìˆë˜ ë°©ì‹ì´ **Trellis** ë°©ì‹ì´ê³ , ë˜ ë‹¤ë¥¸ ë°©ì‹ì´ **Viterbi** ë°©ì‹ì´ë‹¤.\n\n1. $(o_{0}, o_{1}, o_{0}, o_{2})$ì˜ í™•ë¥ ì´ ê¶ê¸ˆí•  ë•Œ(**Trellis**)\n2. $(o_{0}, o_{1}, o_{0}, o_{2})$ê°€ ì£¼ì–´ì§ˆ ë•Œ, ì´ê²ƒì˜ hidden stateì˜ sequence ì¤‘ ê°€ì¥ ìœ ë ¥í•œ sequenceë¥¼ ì°¾ê³ ìí•  ë•Œ(**Viterbi**)\n\nìœ„ì˜ ê²½ìš°ë¥¼ ê°ê° í’€ì–´ë³´ë„ë¡ í•˜ì.\n\n> <mark>**1. Trellis**</mark>\n\nìš°ë¦¬ê°€ ì§ì ‘ ê´€ì¸¡í•œ ë°ì´í„°ì˜ sequence ìì²´ì˜ í™•ë¥ ì´ ê¶ê¸ˆí•  ë•Œì´ë‹¤. ë”°ë¼ì„œ, ì´ì— ëŒ€í•œ ë¶„ì„ì€ $(o_{0}, o_{1}, o_{0}, o_{2})$ì˜ í™•ë¥ ì„ ë¶„ì„í•´ë³´ë©´ì„œ ì„¤ëª…í•˜ê² ë‹¤.\n\n$$\n\\begin{align*}\np(o_{0}, o_{1}, o_{0}, o_{2}) &= p(o_{0}, o_{1}, o_{0}) \\times p(o_{2} | o_{0}, o_{1}, o_{0}) \\\\\n&= p(o_{0}, o_{1}, o_{0}) \\times \\{p(o_{2} | h_{0})p(h_{0} | o_{0}, o_{1}, o_{0}) + p(o_{2} | h_{1})p(h_{1} | o_{0}, o_{1}, o_{0}) + p(o_{2} | h_{2})p(h_{2} | o_{0}, o_{1}, o_{0})\\} \\\\\n&= p(o_{0}, o_{1}, o_{0}) \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n&= p(o_{0}, o_{1}) \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n&= p(o_{0}) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n&= \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) }\n\\end{align*}\n$$\n\nì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n![nlp-hidden-markov-model-1](/images/nlp-hidden-markov-model-1.jpg)\n\në˜í•œ, ì´ ì‹ì„ ë‹¤ìŒê³¼ ê°™ì´ ì¶•ì†Œê°€ ê°€ëŠ¥í•˜ë‹¤.\n\n$$\n\\begin{align*}\n  &\\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}\\alpha_{0 i} \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}{\\alpha_{1 i} } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}{\\alpha_{2 i} } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}{\\alpha_{3 i} }\n\\end{align*}\n$$\n\nìš°ë¦¬ëŠ” ì´ë¥¼ í†µí•´ì„œ, Markov Modelì˜ íŠ¹ì§•ì„ í•˜ë‚˜ ë°°ìš¸ ìˆ˜ ìˆë‹¤. ê·¸ê²ƒì€ ë°”ë¡œ ë³µì¡í•œ sequence ì „ì²´ì˜ í™•ë¥ ì—ì„œ ë²—ì–´ë‚˜ì„œ ë°”ë¡œ ì§ì „ì˜ í™•ë¥ ê°’ë§Œ ìœ¼ë¡œ ë‹¤ìŒ í™•ë¥ ì„ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì´ Markov Chainì´ë¼ëŠ” ì´ë¡ ì´ê³ , ì´ë¥¼ ì´ìš©í–ˆê¸° ë•Œë¬¸ì— Markov Modelë¼ê³  ë¶€ë¥´ëŠ” ê²ƒì´ê¸°ë„ í•˜ë‹¤.\n\në”°ë¼ì„œ, $\\alpha$ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\alpha(t, i) = \\sum_{k=1}^{N}{\\alpha(t-1, k)p(h_{i}|h_{k})p(o = s_{t}|h_{i})} \\quad (s_{t} = \\text{inputìœ¼ë¡œ ë“¤ì–´ì˜¨ sequenceì˜ të²ˆì§¸ ê°’})\n$$\n\në˜, ì´ë¥¼ ë°˜ëŒ€ë¡œ í•  ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n![nlp-hidden-markov-model-2](/images/nlp-hidden-markov-model-2.jpg)\n\n$$\n\\begin{align*}\n  &\\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{\\beta_{3i}} \\\\\n  =& \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{\\beta_{2i}} \\\\\n  =& \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{\\beta_{1i}} \\\\\n  =& \\sum_{i=0}^{2}{\\beta_{0i}} \\\\\n\\end{align*}\n$$\n\n$$\n\\beta(t, i) = \\sum_{k=1}^{N}{\\beta(t+1, k)p(h_{k}|h_{i})p(o = s_{t}|h_{i})} \\quad (s_{t} = \\text{inputìœ¼ë¡œ ë“¤ì–´ì˜¨ sequenceì˜ të²ˆì§¸ ê°’})\n$$\n\nìœ„ì˜ ì²˜ëŸ¼ ì•ì—ì„œë¶€í„° í’€ì´ë¥¼ í•´ë‚˜ê°€ë©´ì„œ, $\\alpha$ì˜ í•©ìœ¼ë¡œ ëì´ ë‚˜ë„ë¡ í‘¸ëŠ” ë°©ë²•ì„ forwarding ë°©ì‹ì´ë¼í•˜ê³ , ë°˜ëŒ€ë¡œ ë’¤ì—ì„œë¶€í„° í’€ì´í•˜ë©´ì„œ $\\beta$ì˜ í•©ìœ¼ë¡œ í‘¸ëŠ” ë°©ë²•ì„ backwarding ë°©ì‹ì´ë¼ê³  í•œë‹¤. ì‚¬ì‹¤ ì´ ê²½ìš°ëŠ” HMMì´ êµ³ì´ ì•„ë‹ˆë”ë¼ë„, MMìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆìœ¼ë‹ˆ êµ³ì´ í•„ìš”ëŠ” ì—†ë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒì€ í›„ì— modeling ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤.\n\n> <mark>**2. Viterbi**</mark>\n\nì´ëŠ” observed stateì˜ sequenceì— ì˜í•´ì„œ íŒŒìƒë˜ëŠ” ê°€ì¥ ì ì ˆí•œ hidden sequenceë¥¼ êµ¬í•˜ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ í•  ìˆ˜ ìˆëŠ” ëŒ€í‘œì ì¸ ê²ƒì´ sequence classificationì´ë‹¤. \n\nê·¸ë ‡ë‹¤ë©´ ê°€ì¥ ìœ ë ¥í•œ hidden stateì˜ sequenceë¥¼ $\\hat{s}^{(H)}$ë¼ê³  í•˜ì. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\begin{align*}\n\\hat{s}^{(H)} &= \\argmax_{s^{(H)} \\in S^{(H)}}P(s^{(H)}|s^{(O)}) \\\\\n&= \\argmax_{s^{(H)} \\in S^{(H)}}P(s^{(O)}|s^{(H)})P(s^{(H)}) \\\\\n&= \\argmax_{{h_{1}, h_{2}, ..., h_{N}} \\in S^{(H)}}\\underbrace{P(o_{1}, o_{2}, ... , o_{N}|h_{1}, h_{2}, ... , h_{N})}_{\\text{Markov Model}}\\underbrace{P(h_{1}, h_{2}, ... , h_{N})}_{\\text{Markov Model}} \\\\\n&= \\argmax_{{h_{1}, h_{2}, ..., h_{N}} \\in S^{(H)}}\\prod_{i=1}^{N}p(o_{i}|h_{i})p(h_{i}|h_{i-1})\n\\end{align*}\n$$\n\n![nlp-hidden-markov-model-3](/images/nlp-hidden-markov-model-3.jpg)\n\nì¦‰, ê° layerì—ì„œ ë‹¨ í•˜ë‚˜ì˜ ê°€ì¥ í° outputë§Œ ì‚´ì•„ë‚¨ì„ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. ì´ ê³¼ì •ì´ ì‚¬ì‹¤ìƒ HMMì˜ ë³¸ì§ˆì ì¸ ëª©í‘œì´ë‹¤. sequenceë¥¼ ì…ë ¥í•´ì„œ sequence í˜•íƒœì˜ classification ê²°ê³¼ë¥¼ ì–»ëŠ” ê²ƒì´ë‹¤.\n\n### Modeling\n\nì—¬íƒœê¹Œì§€ HMMì„ í™œìš©í•˜ì—¬ sequential classë¥¼ ì–´ë–»ê²Œ estimation í•˜ëŠ”ì§€ ì•Œì•„ë³´ì•˜ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ì œëŠ” ì´ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” í™•ë¥ ê°’ì„ êµ¬í•´ì•¼í•œë‹¤. í•„ìš”í•œ í™•ë¥ ê°’ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- $p(h_{i}|h_{i-1})$ : Hidden Stateì—ì„œ Hidden Stateë¡œ ë„˜ì–´ê°€ê¸° ìœ„í•œ í™•ë¥ ì´ë‹¤.\n- $p(o_{i}|h_{i})$ : ë°©ì¶œ í™•ë¥ ë¡œ íŠ¹ì • Hidden Stateì—ì„œ ë‹¤ìŒ Stateì˜ Observed Stateë¡œ ë„˜ì–´ê°€ëŠ” ë°©ë²•ì´ë‹¤. \n- $\\pi_{i}$\n\nTrelli ë°©ì‹ì—ì„œ ë§Œë“¤ì—ˆë˜, $\\alpha$ì™€ $\\beta$ì˜ ì˜ë¯¸ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤. ê° ê°ì€ í•´ë‹¹ ê³¼ì •ê¹Œì§€ ì˜¤ë©´ì„œ ëˆ„ì í•´ì˜¨ í™•ë¥ ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³ , ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì€ ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ ì˜ ë°˜ì˜í•  ìˆ˜ ìˆëŠ” í™•ë¥  ê°’ì„ ì°¾ëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ìƒê°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ í‰ê· ì„ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ êµ¬í•˜ëŠ” ê³¼ì •ì„ ë¨¼ì € ì‚´í´ë³´ì.\n\n$$\n\\begin{align*}\n  c(i, j, k) &= h_{i}\\text{ì—ì„œ } h_{j}\\text{ë¡œ ë„˜ì–´ê°€ê³ , } o_{k}\\text{ê°€ ê´€ì¸¡ë  í™•ë¥ ì˜ í•©} \\\\\n  &= \\sum_{t=2}^{T} \\alpha(t-1, i)p(h_{j}|h_{i})p(o_{k}|h_{j}) \\beta(t, j) \\\\\n  \\\\\n  c(i,j) &= h_{i}\\text{ì—ì„œ } h_{j}\\text{ë¡œ ë„˜ì–´ê°ˆ í™•ë¥ ì˜ í•©} \\\\\n  &= \\sum_{k=1}^{K}\\sum_{t=2}^{T}{\\alpha(t-1, i)p(h_{j}|h_{i})p(o_{k}|h_{j}) \\beta(t, j)} \\\\\n  \\\\\n  c(i) &= h_{i}\\text{ì—ì„œ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í™•ë¥ ì˜ í•©} \\\\\n  &= \\sum_{j=1}^{N}\\sum_{k=1}^{K}\\sum_{t=2}^{T}{\\alpha(t-1, i)p(h_{j}|h_{i})p(o_{k}|h_{j}) \\beta(t, j)} \\\\\n\\end{align*}\n$$\n\nìœ„ì˜ ê°’ì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” ìš°ë¦¬ê°€ ê°€ì§€ê³  ìˆë˜ í™•ë¥ ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\np(h_{j}|h_{i}) &= {c(i,j)\\over c(i)} \\\\\np(o_{k}|h_{i}) &= {c(i,j,k)\\over c(i,j)}\n\\end{align*}\n$$\n\nì¦‰, ìš°ë¦¬ëŠ” ë‹¤ìŒ ê³¼ì •ì„ ìˆ˜í–‰í•˜ì—¬ Modelingì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n1. ì´ˆê¸°ê°’ ($p(h_{i}|h_{i-1})$, $p(o_{i}|h_{i})$, $\\pi_{i}$)ì„ ì´ˆê¸°í™” í•œë‹¤.  \n2. Trellië¥¼ í†µí•´ì„œ $\\alpha$, $\\beta$ë¥¼ ê³„ì‚°í•œë‹¤.\n3. $p(h_{i}|h_{i-1})$, $p(o_{i}|h_{i})$ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.  \n   ($pi_{i}$ê°™ì€ ê²½ìš°ëŠ” ë°œìƒ ë¹ˆë„ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.)\n4. ì„ê³„ì¹˜ì— ë„ë‹¬í•  ë•Œê¹Œì§€ 2,3ë²ˆì„ ë°˜ë³µí•œë‹¤.\n\nì´ ê³¼ì •ì„ ëŒ€ê²Œ 10ë²ˆ ì •ë„ë§Œ í•˜ë©´ ìˆ˜ë ´í•˜ê²Œ ë˜ê³ , ì´ë¥¼ í™•ë¥ ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"nlp-hmm","date":"2022-10-21 21:55","title":"[NLP] 5. Hidden Markov Model","category":"AI","tags":["NLP","MarkovModel","HMM","HiddenMarkovModel"],"desc":"ì´ì „ê¹Œì§€ íŠ¹ì • wordë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ modelingì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ íŠ¹ì • wordì˜ sequenceë¥¼ í†µí•´ì„œ ê° wordì— ëŒ€í•œ classificationì„ í•œ ë²ˆì— í•˜ê³  ì‹¶ì€ ê²½ìš°ëŠ” ì–´ë–»ê²Œ í• ê¹Œ?(ì˜ˆë¥¼ ë“¤ì–´, ê° ë‹¨ì–´ì˜ í’ˆì‚¬ë¥¼ ì§€ì •í•˜ëŠ” ì¼) ì¼ë°˜ì ìœ¼ë¡œ ê° ë‹¨ì–´ê°€ íŠ¹ì • í•´ë‹¹ classì¼ í™•ë¥ ë¡œ êµ¬í•˜ëŠ” ë°©ë²•ì´ ì¼ë°˜ì ì¼ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ë¬¸ë§¥ì„ ê³ ë ¤í•˜ì—¬ í™•ë¥ ì„ êµ¬í•  ë°©ë²•ì€ ì—†ì„ê¹Œ? ê·¸ ë°©ë²•ì€ ë°”ë¡œ bigramì„ ì´ìš©í•˜ë©´ ë  ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì‚¬ì‹¤ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë¬¸ë§¥ì´ ë‹¨ì–´ ìì²´ë³´ë‹¤ëŠ” ì´ì „ classê°€ ë” ì˜í–¥ì´ í¬ë‹¤ë©´, ì´ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì´ë¥¼ ìœ„í•œ í•´ê²°ì±…ì´ HMMì´ë‹¤. NLP ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ë„“ê²Œ ì‚¬ìš©ë˜ê³  ìˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” NLP ë¶„ì•¼ì—ì„œ ì–´ë–»ê²Œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì „ Postingì—ì„œëŠ” sentenceì˜ ì ì ˆì„±ì„ í™•ì¸í•œë‹¤ë“ ì§€ ë‹¤ìŒ ë‹¨ì–´ë¥¼ ìœ ì¶”í•œë‹¤ë“ ì§€ ì˜¤íƒ€ë¥¼ ì •ì •í•˜ëŠ” ë“±ì— í•„ìš”í•œ ê¸°ë³¸ì ì¸ Language Modeling ë°©ì‹ì„ ì‚´í´ë³´ì•˜ë‹¤. ì´ë²ˆì—ëŠ” ì‹¤ì œë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì˜ˆì œì¸ Classificationì„ Language Modelì„ ì´ìš©í•˜ì—¬ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë°°ìš°ë©°, ì´ë¥¼ ì§ì ‘ Spam Filteringì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì‚´í´ë³¸ë‹¤. ì£¼ì˜í• ì ì€ í•´ë‹¹ Postingì€ Naive Bayes ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” Classificationì´ë‹¤. ë” ë‹¤ì–‘í•œ ë°©ë²•ë¡ ì„ ì›í•œë‹¤ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ë„ì›€ì„ ì£¼ê¸° ì–´ë µë‹¤. ë§Œì•½ ì§€ê¸ˆ ë§ì´ ì´í•´ê°€ ì•ˆëœë‹¤ë©´, ê·¸ëƒ¥ ê³„ì† ì½ìœ¼ì‹œë©´ ë˜ê² ë‹¤.\n\n## Classification\n\nê¸°ë³¸ì ìœ¼ë¡œ inputì´ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ ì•Œë§ì€ ë¶„ë¥˜ë¡œ ë‚˜ëˆ„ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¨ìˆœíˆ ì‚¬ì „ ì§€ì‹ì— ê¸°ë°˜í•´ì„œ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆì§€ë§Œ, Language Modelingì„ ì´ìš©í•˜ë©´, ë” ì •í™•ë„ ë†’ì€ ë¶„ë¥˜ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” Classification ë„êµ¬ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n\n1. Naive Bayes\n2. Hidden Markov Model(HMM)\n3. Maximum Entropy Model(MaxEnt)\n   1. Logistic Regression\n   2. Support Vector Machine\n   3. Neural Network(Deep Learning)\n4. K Nearest Neighbors\n\ní•´ë‹¹ Postingì—ì„œëŠ” **Naive Bayes Classifier**ë¥¼ ì´ìš©í•œ ë¶„ë¥˜ë¥¼ ìˆ˜í–‰í•  ê²ƒì´ë‹¤. 3ë²ˆ ë°©ë²•ì€ ê¸°ë³¸ì ìœ¼ë¡œ ê° ë‹¨ì–´ë¥¼ Random Variableë¡œ ì¹˜í™˜í•´ì„œ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•œë° ì´ëŠ” í›„ì— ë” ìì„¸íˆ ë‹¤ë£° ê²ƒì´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ì ì¸ Classifierë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ê³  í›„ì— ê°€ì„œ wordë¥¼ vectorë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œ í›„ì— ë” í›Œë¥­í•œ ê¸°ìˆ ë“¤ì„ í™œìš©í•´ë³´ê² ë‹¤.  \në”°ë¼ì„œ, ì•ìœ¼ë¡œ 3ê°œì˜ Posting ë™ì•ˆì€ Naive Bayes, HMM, MaxEnt ë°©ì‹ì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ê²ƒì´ê³ , ê·¸ í›„ì—ëŠ” wordë¥¼ vector ë°ì´í„°ë¡œ ì¹˜í™˜í•˜ì—¬ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë°©ì‹ì„ ë°°ì›Œë³¼ ê²ƒì´ë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ Classificationì€ ë°ì´í„°ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, í•´ë‹¹ ë°ì´í„°ê°€ íŠ¹ì • classì— ì†í•  í™•ë¥ ì„ ì œì‹œí•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, íŠ¹ì • classì—ì„œ í•´ë‹¹ ë°ì´í„°ê°€ ì–¼ë§ˆë‚˜ ìì£¼ ë°œìƒë˜ëŠ”ì§€ì™€ ì‹¤ì œë¡œ í•´ë‹¹ classì˜ ë¹ˆë„ê°€ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤.\n\nì´ë¥¼ ìˆ˜ì‹ì ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒ ë³€ìˆ˜ë“¤ì„ ë¨¼ì € ì‚´í´ë³´ì.\n\n- **documents($D$)**: ì—¬ëŸ¬ ê°œì˜ Documentë¥¼ ì˜ë¯¸í•˜ë©°, í•˜ë‚˜ì˜ DocumentëŠ” ëŒ€ê²Œ ì—¬ëŸ¬ ê°œì˜ wordsë¥¼ í¬í•¨í•œë‹¤. ê° documentëŠ” $d_{i} \\in D$ì˜ í˜•íƒœë¡œ í‘œí˜„í•œë‹¤.\n- **classes($C$)**: classëŠ” ë‘ ê°œ ì´ìƒì„ ê°€ì§„ë‹¤. ê° í´ë˜ìŠ¤ëŠ” $c_{i} \\in C$ì˜ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤.\n- **labeled dataset**: ì´ëŠ” (document($d_{i}$), class($c_{i}$))ê°€ í•˜ë‚˜ì”© mappingëœ í˜•íƒœë¡œ ì¡´ì¬í•œë‹¤. ìš°ë¦¬ê°€ ê°€ì§€ëŠ” datasetìœ¼ë¡œ í•™ìŠµ, í‰ê°€ ì‹œì— ì‚¬ìš©í•œë‹¤. ëŒ€ê²Œ í‰ê°€ì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ëŠ” í•™ìŠµ ì‹œì— ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¸ˆì§€í•˜ê¸° ë•Œë¬¸ì— ë³„ë„ë¡œ ë¶„ë¦¬í•˜ì—¬ ì‚¬ìš©í•œë‹¤.\n- **word($w$)**: í•˜ë‚˜ì˜ wordë¥¼ ì˜ë¯¸í•˜ë©° NLP í•™ìŠµ ì‹œì— ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì´ë‹¤. ëŒ€ê²Œ document í•˜ë‚˜ì— ìˆëŠ” ë‹¨ì–´ì˜ ìˆ˜ëŠ” Nìœ¼ë¡œ í‘œê¸°í•˜ê³ , uniqueí•œ ë‹¨ì–´ì˜ ìˆ˜ëŠ” V(size of vocabulary)ë¡œ í‘œì‹œí•œë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ê°€ ì°¾ê³ ì í•˜ëŠ” ê°€ì¥ ë†’ì€ í™•ë¥ ì„ ê°€ì§„ classëŠ” ë‹¤ìŒì„ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\nc_{MAP} &= \\argmax_{c \\in C}{P(c|d)} \\\\\n&= \\argmax_{c \\in C}{p(d|c)p(c)\\over p(d)} \\\\\n&= \\argmax_{c \\in C}{p(d|c)p(c)} \\\\\n&= \\argmax_{c \\in C}{p(w_{1}, w_{2}, ... , w_{N} | c)p(c)} \\\\\n&= \\argmax_{c \\in C}{\\prod_{i=1}^{N}p(w_{i})p(c)} \\\\\n&= \\argmax_{c \\in C}{\\log(\\prod_{i=1}^{N}p(w_{i})p(c))} \\\\\n&= \\argmax_{c \\in C}{\\sum_{i=1}^{N}\\log p(w_{i}) + \\log{p(c)}} \\\\\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ìš°ë¦¬ê°€ language modelì„ ë¬´ì—‡ìœ¼ë¡œ ì •í–ˆëŠ”ì§€ê°€ ì¤‘ìš”í•˜ë‹¤. ìœ„ì—ì„œëŠ” uni-gramì´ë¼ê³  ê°€ì •í•´ì„œ í’€ì´í–ˆì§€ë§Œ, bi-gramì¸ ê²½ìš° documentì˜ í˜•íƒœê°€ $d={(w_{1}, w_{2}), (w_{2}, w_{3}), ... , (w_{N-1}, w_{N})}$ì´ë‹¤. ë”°ë¼ì„œ, ì „ì²´ì ì¸ í¬ê¸°ì™€ vocabularyìì²´ë„ ë°”ë€Œê²Œ ëœë‹¤.\n\nì¦‰, ìš°ë¦¬ëŠ” train setì„ í†µí•´ì„œ vocabularyë¥¼ ì™„ì„±í•œë‹¤. ê·¸ë¦¬ê³ , ê° wordì˜ count ë° í•„ìš”ì— ë”°ë¼ í•„ìš”í•œ word sequenceì˜ countë¥¼ ìˆ˜ì§‘í•˜ì—¬ $p(w_i)$ë¥¼ êµ¬í•œ í›„ ìœ„ì— ë°©ë²•ì„ í†µí•´ì„œ íŠ¹ì • classë¥¼ ì¶”ì¸¡í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n## Evaluation\n\nbinary classificaitonì˜ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ì´ 4ê°œ ì¤‘ í•˜ë‚˜ë¡œ ê²°ì •ëœë‹¤.\n\n| prediction\\answer | True           | False          |\n| :---------------- | :------------- | :------------- |\n| Positive          | true positive  | false positive |\n| Negative          | false negative | true negative  |\n\nì´ë¥¼ ì‰½ê²Œ ì´í•´í• ë ¤ë©´, ë³‘(ì½”ë¡œë‚˜)ì˜ ì–‘ì„±/ìŒì„± íŒì •ì´ rowì— í•´ë‹¹í•˜ê³ , ì‹¤ì œ ë³‘ì˜ ì—¬ë¶€ë¥¼ columnìœ¼ë¡œ ìƒê°í•˜ë©´ ì‰½ë‹¤. ë˜í•œ, ê° cellì˜ ê°’ì´ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë°, ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì´ ì˜ˆì¸¡ì˜ ì •í™•ë„ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì˜ˆì¸¡ ê²°ê³¼ëŠ” ê·¸ëŒ€ë¡œ ë³´ì—¬ì£¼ë©´ì„œ, ì´ê²ƒì´ í‹€ë ¸ëŠ”ì§€ ë§ì•˜ëŠ”ì§€ë¥¼ ì•ì— true/falseë¡œ í‘œí˜„í–ˆë‹¤ê³  ìƒê°í•˜ë©´ ì‰½ë‹¤.\n\n\nclassificationì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ëŠ” ì§€í‘œëŠ” ëŒ€í‘œì ìœ¼ë¡œ 4 ê°€ì§€ê°€ ìˆë‹¤.\n\n1. **Accuracy(ì •í™•ë„)**  \n   ê°€ì¥ ì‰½ê²Œ ê·¸ë¦¬ê³  ì¼ë°˜ì ìœ¼ë¡œ ìƒê°í•˜ëŠ” ì§€í‘œë‹¤. ìœ„ì˜ í‘œì—ì„œëŠ” ì „ì²´ ê²½ìš°ì˜ ìˆ˜ë¥¼ ë”í•˜ì—¬ ì˜³ê²Œ ì˜ˆì¸¡í•œ ê²ƒ(true postive, true negative)ì˜ í•©ì„ ë‚˜ëˆ„ëŠ” ê²ƒì´ë‹¤. \n   $tp + fn \\over tp + fp + fn + tn$  \n   í•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ í•œê³„ê°€ ìˆë‹¤. ë°”ë¡œ, ë°ì´í„°ê°€ í•œìª½ìœ¼ë¡œ ì¹˜ìš°ì³ì ¸ìˆì„ ë•Œì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¦¬ê°€ ì§„ì§œë¥¼ ì§„ì§œë¼ê³  ë§ì¶œí™•ë¥ ì€ ë†’ì§€ë§Œ, ê°€ì§œë¥¼ ê°€ì§œë¼ê³  ë§ì¶œ í™•ë¥ ì´ ë‚®ë‹¤ê³  í•  ë•Œ, ì´ë¥¼ ì œëŒ€ë¡œ ë°˜ì˜í•˜ê¸°ê°€ ì–´ë µë‹¤. ê·¸ëŸ°ë° ë°ì´í„°ì—ì„œ ì§„ì§œê°€ ê°€ì§œë³´ë‹¤ ì••ë„ì ìœ¼ë¡œ ë§ì„ ê²½ìš° ì •í™•ë„ëŠ” ì¢‹ì€ ì§€í‘œë¡œ ì“°ê¸° ì–´ë µë‹¤ëŠ” ê²ƒì´ë‹¤.\n2. **Precision(ì •ë°€ë„, ì •ë‹µë¥ )**  \n   ì‰½ê²Œ ì •ë‹µ ìì²´ë¥¼ ë§í í™•ë¥ ì…ë‹ˆë‹¤.  \n   $tp \\over tp + fn$\n3. **Recall(ì¬í˜„ìœ¨)**  \n   ì˜ˆì¸¡ì´ ë§ì„ í™•ë¥ ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.  \n   $tp \\over tp + fp$\n4. **F1 Score**  \n   ì¢€ ë” ì„¸ë¶„í™”ëœ í‰ê°€ì§€í‘œì´ë‹¤. ì¡°í™” í‰ê· ì— ê¸°ë°˜í•˜ì—¬ ëª¨ë¸ì˜ ì„±ëŠ¥ì„ ì •í™•í•˜ê²Œ í‰ê°€í•  ë•Œ ì‚¬ìš©í•œë‹¤.  \n   $2 \\times {\\text{Precision} \\times \\text{Recall} \\over \\text{Precision} + \\text{Recall}}$\n\nì—¬ê¸°ê¹Œì§€ ë´¤ìœ¼ë©´, ìŠ¬ìŠ¬ multi classì˜ ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ê¶ê¸ˆí•  ê²ƒì´ë‹¤. ëŒ€ê²Œ ë‘ ê°€ì§€ ë°©ë²•ì„ í†µí•´ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n> **1. Micro Average**\n\nì „ì²´ classë¥¼ í•˜ë‚˜ì˜ binary tableë¡œ í•©ì¹˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, í´ë˜ìŠ¤ê°€ A, B, C 3ê°œê°€ ìˆë‹¤ë©´, ê° í´ë˜ìŠ¤ ë³„ë¡œ ì˜ˆì¸¡ ì„±ê³µë„ë¥¼ binaryë¡œ í‘œì‹œí•˜ê³ , ì´ë¥¼ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ í•©ì¹˜ëŠ” ê²ƒì´ë‹¤. ê·¸ í›„ì—ëŠ” binaryì—ì„œ ê³„ì‚°í•˜ëŠ” ì‹ì„ ê·¸ëŒ€ë¡œì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  \n\n> **2. Macro Average**\n\nmulti classì˜ ê²½ìš°ì—ë„ ë³„ë¡œ ë‹¤ë¥¼ ê²ƒì€ ì—†ë‹¤. ë‹¨ì§€ Precisionê³¼ Recall ê·¸ë¦¬ê³  Accuracyê°€ ì–´ë–»ê²Œ ë°”ë€ŒëŠ”ì§€ë§Œ ì•Œë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.  \n\n| prediction\\answer | c1            | c2            | c3            | c4            |\n| :---------------- | :------------ | :------------ | :------------ | :------------ |\n| c1                | true positive | x             | x             | x             |\n| c2                | x             | true positive | x             | x             |\n| c3                | x             | x             | true positive | x             |\n| c4                | x             | x             | x             | true positive |\n\n- Precision: $c_{ii} \\over \\sum_{j}c_{ij}$\n- Recall: $c_{ii} \\over \\sum_{j}c_{ji}$\n- Accuracy: $c_{ii} \\over \\sum_{i}\\sum_{j}c_{ij}$\n\n## Case Study. Spam Filtering\n\nì´ˆê¸° NLPê°€ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ì—ˆë˜ ì˜ˆì‹œ ì¤‘ì— í•˜ë‚˜ì´ë‹¤. ì—¬ëŸ¬ ê°œì˜ ë©”ì¼ì— spamì¸ì§€ hamì¸ì§€ë¥¼ labelingí•œ ë°ì´í„°ë¥¼ ê°–ê³  í›„ì— inputìœ¼ë¡œ mail ë°ì´í„°ê°€ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ filteringí•˜ëŠ” ê²ƒì´ë‹¤. ìœ„ì—ì„œ ì‚´í´ë³´ì•˜ë˜ í™•ë¥ ì„ ê·¸ëŒ€ë¡œ ì ìš©í•˜ë©´ ëœë‹¤. ì˜ˆì¸¡ì— í•„ìš”í•œ í™•ë¥ ì„ ìŠµë“í•˜ê³ , ì˜ˆì¸¡í•˜ëŠ” ë°©ë²•ê³¼ ì´ë¥¼ í‰ê°€í•˜ëŠ” ë°©ë²•ì˜ ìˆœìœ¼ë¡œ ì„¤ëª…í•˜ê² ë‹¤.\n\n### 0. Preprocessing\n\nì‚¬ì‹¤ mail dataì˜ í˜•íƒœê°€ ì´ìƒí•  ìˆ˜ë„ ìˆë‹¤. Subjectë¶€í„° ì‹œì‘í•˜ì—¬ ë‚ ì§œ ë°ì´í„° ê·¸ë¦¬ê³  íŠ¹ìˆ˜ ë¬¸ì ë“±ì´ ì¡´ì¬í•  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ ë¨¼ì € ì²˜ë¦¬í•´ì„œ í›„ì— ìˆì„ Modeling ë‹¨ê³„ì—ì„œ ì˜ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í˜•íƒœë¥¼ ë³€í˜•í•´ì£¼ì–´ì•¼ í•œë‹¤.\n\n[ğŸ”— ì´ì „ Posting(Text Processing)](/posts/nlp-text-processing)ì—ì„œ ë°°ì› ë˜ ê¸°ìˆ ë“¤ì„ í™œìš©í•˜ì—¬ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n\nëŒ€í‘œì ìœ¼ë¡œ í•´ì¤„ ìˆ˜ ìˆëŠ” ì‘ì—…ë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. ëŒ€ì†Œë¬¸ì í†µì¼\n2. alphabetì´ í•˜ë‚˜ë¼ë„ ë“¤ì–´ìˆì§€ ì•Šì€ ë°ì´í„°ëŠ” ì‚­ì œ\n3. date, ì°¸ì¡° ë“±ì„ ì˜ë¯¸í•˜ëŠ” ë°ì´í„° ì‚­ì œ\n\n### 1. Modeling\n\nParameter Estimation / Learning / Modeling ë“±ìœ¼ë¡œ ë¶ˆë¦¬ëŠ” ë‹¨ê³„ì´ë‹¤. ì¼ë‹¨ ìš°ë¦¬ëŠ” train setìœ¼ë¡œë¶€í„° ìš°ë¦¬ê°€ ì›í•˜ëŠ” í™•ë¥ ì„ ì¶”ì¶œí•´ì•¼ í•œë‹¤. ê·¸ ì „ì— ìš°ë¦¬ê°€ ì–´ë–¤ language modelì„ ì´ìš©í• ì§€ ì„ íƒí•´ì•¼ í•œë‹¤. ë¨¼ì € uni-gramì¸ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ train setì´ ì •ì˜ëœë‹¤.\n$$\n\\text{TrainSet} = {(d_{1}, c_{1}),  (d_{2}, c_{2}), ..., (d_{N}, c_{N})}\n$$\n$$\nd_{i} = \\begin{cases}\n  {w_{1}, w_{2}, ... , w_{M_{i}}} \\quad&\\text{unigram} \\\\\n  {(<s>, w_{1}), (w_{1}, w_{2}), ... , (w_{M_{i}}, </s>)} \\qquad&\\text{bigram}\n\\end{cases}\n$$\n\nì´ì œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” parameter, ì¦‰ í™•ë¥ ì€ ë‹¤ìŒê³¼ ê°™ì€ ë°ì´í„°ì´ë‹¤.\n\n> **unigram**\n\n$$\n\\begin{align*}\np(w_{i}|c_{j}) &= {\\text{count}(w_{i}, c_{j}) \\over \\sum_{w \\in V} \\text{count}(w, c_{j})} \\\\\np(c_{j}) &= {\\sum_{i = 1}^{N}{1[c_{i} = c_{j}]} \\over N}\n\\end{align*}\n$$\n\n> **bigram**\n\n$$\n\\begin{align*}\np(w_{i}|w_{i-1},c_{j}) &= {\\text{count}((w_{i-1}, w_{i}), c_{j}) \\over \\sum_{(w^{(1)}, w^{(2)}) \\in V} \\text{count}((w^{(1)}, w^{(2)}), c_{j})} \\\\\np(c_{j}) &= {\\sum_{i = 1}^{N}{1[c_{i} = c_{j}]} \\over N}\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ë°˜ë“œì‹œ Smoothingì„ í•´ì£¼ì–´ì•¼ í•œë‹¤. ì™œëƒí•˜ë©´, spam mailì—ì„œ ì•ˆ ë³¸ ë‹¨ì–´ê°€ ë‚˜ì˜¬ ê°€ëŠ¥ì„±ì´ ë„ˆë¬´ë‚˜ ë†’ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì‹¤ì œ $p(w_{i}|c_{j})$ëŠ” ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ëœë‹¤. (ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ ë“¤ê¸° ìœ„í•´ì„œ Add-1 ë°©ì‹ì„ ì‚¬ìš©í–ˆë‹¤. - í•´ë‹¹ ë‚´ìš©ì´ ê¸°ì–µì´ ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´, [ğŸ”— ì´ì „ í¬ìŠ¤íŒ…](/posts/nlp-language-modeling)ì„ ë‹¤ì‹œ ë³´ê³  ì˜¤ì.)\n\n$$\np(w_{i}|c_{j}) = {\\text{count}(w_{i}, c_{j}) + 1 \\over \\sum_{w \\in V} \\text{count}(w, c_{j}) + |V|}\n$$\n\nì£¼ì˜í•  ì ì€ ë‹¤ì‹œ í•œ ë²ˆ ê°•ì¡°í•˜ì§€ë§Œ, $V$ëŠ” í›„ì— Estimationì—ì„œ inputìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë‹¨ì¼ documentê¹Œì§€ í¬í•¨í•œ Vocabularyì´ë‹¤.\n\n### 2. Estimation\n\nì´ì œ ìš°ë¦¬ê°€ ì–»ì€ parameterë¥¼ ì´ìš©í•´ì„œ ì‹¤ì œ input dataì— ëŒ€í•œ estimationì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\nì´ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\hat{c} = \\argmax_{c \\in C} p(c)\\prod_{w \\in d_{\\text{input}}}p(w|c)\n$$\n\në¬¼ë¡  ì–´ë–¤ n-gramì„ ì“°ëƒì— ë”°ë¼ $d_{\\text{input}}$ë„ í˜•íƒœê°€ ë‹¬ë¼ì§ˆ ê²ƒì´ë‹¤.\n\n### 3. Evaluation\n\nì´ì œ í‰ê°€ë¥¼ ìˆ˜í–‰í•  ê²ƒì´ë‹¤. í‰ê°€ëŠ” ìš°ë¦¬ê°€ ì•Œì•„ë´¤ë˜ Accuracyì™€ F1 Scoreë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤. Binary Classificationì´ê¸° ë•Œë¬¸ì— ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\n\n| prediction\\answer | True                                                                       | False                                                                     |\n| :---------------- | :------------------------------------------------------------------------- | :------------------------------------------------------------------------ |\n| Positive          | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} = c, c = \\text{spam}]$    | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} \\neq c, c = \\text{ham}]$ |\n| Negative          | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} \\neq c, c = \\text{spam}]$ | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} = c, c = \\text{ham}]$    |\n\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"nlp-classification","date":"2022-10-21 21:53","title":"[NLP] 4. Classification","category":"AI","tags":["NLP","Classification","SpamFiltering","F1Score"],"desc":"ì´ì „ Postingì—ì„œëŠ” sentenceì˜ ì ì ˆì„±ì„ í™•ì¸í•œë‹¤ë“ ì§€ ë‹¤ìŒ ë‹¨ì–´ë¥¼ ìœ ì¶”í•œë‹¤ë“ ì§€ ì˜¤íƒ€ë¥¼ ì •ì •í•˜ëŠ” ë“±ì— í•„ìš”í•œ ê¸°ë³¸ì ì¸ Language Modeling ë°©ì‹ì„ ì‚´í´ë³´ì•˜ë‹¤. ì´ë²ˆì—ëŠ” ì‹¤ì œë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì˜ˆì œì¸ Classificationì„ Language Modelì„ ì´ìš©í•˜ì—¬ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë°°ìš°ë©°, ì´ë¥¼ ì§ì ‘ Spam Filteringì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì‚´í´ë³¸ë‹¤. ì£¼ì˜í• ì ì€ í•´ë‹¹ Postingì€ Naive Bayes ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” Classificationì´ë‹¤. ë” ë‹¤ì–‘í•œ ë°©ë²•ë¡ ì„ ì›í•œë‹¤ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ë„ì›€ì„ ì£¼ê¸° ì–´ë µë‹¤. ë§Œì•½ ì§€ê¸ˆ ë§ì´ ì´í•´ê°€ ì•ˆëœë‹¤ë©´, ê·¸ëƒ¥ ê³„ì† ì½ìœ¼ì‹œë©´ ë˜ê² ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì œ í†µê³„ì ì¸ ê´€ì ì—ì„œ NLì„ inputìœ¼ë¡œ í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ë°©ë²•ì„ ì°¾ì„ ê²ƒì´ë‹¤. ì´ë¥¼ Language Modelingì´ë¼ê³  í•˜ë©°, ì´ë¥¼ ìœ„í•´ì„œ ë˜ëŠ” ì´ë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•œ ë°©ë²•ë“¤ì„ ì†Œê°œí•  ê²ƒì´ë‹¤.\n\n## Noisy Channel\n\nì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ì›í•˜ëŠ” ê²°ê³¼ê°€ ìˆë‹¤. ê·¸ ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ë§ì„ í•˜ê±°ë‚˜ í–‰ë™ì„ í•˜ê±°ë‚˜ ê¸€ì„ ì“´ë‹¤. ê·¸ ê³¼ì •ì€ ìš°ë¦¬ê°€ ê°–ê³  ì‹¶ì€ Aë¼ëŠ” ê²ƒì„ ì–»ê¸° ìœ„í•´ì„œ Bë¼ëŠ” í–‰ë™ì„ ëŒ€ì‹ í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ì¦‰, ìš°ë¦¬ëŠ” ì´ë¥¼ Aì— noiseê°€ ê»´ì„œ Bë¼ëŠ” ê²ƒì´ ìƒì„±ë˜ì—ˆë‹¤ê³  ìƒê°í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ìš°ë¦¬ê°€ ê´€ì¸¡í•  ìˆ˜ ìˆëŠ” ê²ƒì€ Bë°–ì— ì—†ëŠ” ê²ƒì´ë‹¤.\n\nì´ëŠ” ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” NLì—ì„œë„ ë™ì¼í•˜ë‹¤. ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²°ê³¼ê°’ Aë¥¼ ì–»ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” Bë¼ëŠ” ë¬¸ì¥, ìŒì„±ì„ ì œì‹œí•œë‹¤. ê·¸ ê²°ê³¼ê°€ ì›í•˜ëŠ” ê²°ê³¼ë¡œ ë  ìˆ˜ ìˆëŠ” í™•ë¥ ì„ ì–»ì–´ì„œ ìµœì¢… ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì´ ìš°ë¦¬ì˜ ëª©í‘œì¸ ê²ƒì´ë‹¤.\n\nì´ ê³¼ì •ì„ ìˆ˜ì‹ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì•„ì§„ë‹¤.\n\n$$\nP(A|B) = {P(B|A)P(A)\\over{P(B)}}\\quad(\\text{Bayes Rule})\n$$\n\nìš°ë¦¬ê°€ ì–»ê³  ì‹¶ì€ $P(A|B)$ ë¥¼ ì–»ê¸° ìœ„í•´ì„œ, $P(A)$ì™€ $P(B|A)$ ë¥¼ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ì´ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ MLì„ ì´í•´í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤. ì¶”ì²œí•˜ëŠ” Postingì€ [ğŸ”— [ML] Parametric Estimation](/posts/ml-parametric-estimation)ì´ë‹¤.\n\n## Language Modeling\n\nê²°êµ­ ìš°ë¦¬ê°€ ì–»ê³  ì‹¶ì€ ê²ƒì€ íŠ¹ì • ë¬¸ì¥ì˜ í• ë‹¹ëœ í™•ë¥ ì¸ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, Language Modelì€ inputìœ¼ë¡œ word sequenceê³¼ ë“¤ì–´ì™”ì„ ë•Œ, í™•ë¥ ì„ ê³„ì‚°í•˜ëŠ” ê²ƒì´ë‹¤.\nê·¸ë¦¬ê³ , ì´ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ parameterë¥¼ ì°¾ëŠ” ê³¼ì •ì„ Language Modelingì´ë¼ê³  í•œë‹¤.\n\n## Input(N-gram)\n\nëŒ€ê²Œ ì´ëŸ¬í•œ ëª¨ë¸ì€ ë¬¸ì¥ ë˜ëŠ” wordì˜ ë°°ì—´ì´ ë‹¤ìŒê³¼ ê°™ì´ ì£¼ì–´ì§ˆ ë•Œ, $W = w_{1}\\ w_{2}\\ w_{3}\\ ...\\ w_{n}$ ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n- **Single word probability**  \n  í•˜ë‚˜ì˜ ë‹¨ì–´ì˜ í™•ë¥ ì„ ë‚˜íƒ€ë‚¼ ë•Œ ë‹¨ìˆœí•˜ê²Œ ì•„ë˜ì™€ ê°™ì´ í‘œí˜„í•œë‹¤.  \n  $P(w_{i})\\quad(w_{i} \\in W)$\n- **Sequence of Words probability**  \n  ì¼ë°˜ì ìœ¼ë¡œ sentenceì˜ í™•ë¥ ì„ ë‚˜íƒ€ë‚¼ ë•Œ, ì—¬ëŸ¬ ë¬¸ì¥ì„ í•œêº¼ë²ˆì— ê°€ì§€ëŠ” í™•ë¥ ì´ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.  \n  $P(W) = P(w_{1}, w_{2}, w_{3}, ..., w_{n})$\n- **single word probability with context**  \n  ì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ì´ì „ì— ì‚¬ìš©í•œ ë‹¨ì–´ê°€ ë¬¸ë§¥ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, êµ¬ì²´ì ì¸ ë‹¨ì–´ë“¤ ì´í›„ì— íŠ¹ì • ë‹¨ì–´ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì€ ë¬¸ë§¥ì„ ë°˜ì˜í•œ í™•ë¥ ì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤.  \n  $P(W) = P(w_{5}| w_{1}, w_{2}, w_{3}, w_{4})$\n\nìœ„ì˜ ì‹ì„ ë³´ê²Œ ë˜ë©´, ìš°ë¦¬ëŠ” ë‹¤ì‹œ í•œë²ˆ sentenceì˜ í™•ë¥ ì„ ë‹¤ì‹œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\nP(W) = P(w_{1}) \\times P(w_{2}|w_{1}) \\times P(w_{3}|w_{1},w_{2}) \\times ... \\times P(w_{n}| w_{1},w_{2},..., w_{n-1})\n$$\n\nìœ„ì˜ ì‹ì„ ë³´ê²Œë˜ë©´, Wê°€ ì§§ë‹¤ê³  í•˜ë”ë¼ë„ êµ‰ì¥íˆ ë§ì€ ì²˜ë¦¬ê°€ í•„ìš”í•˜ê³ , ì €ì¥ì„ ìœ„í•´ ë§ì€ ê³µê°„ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í˜„ì¬ ë‹¨ì–´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë„ˆë¬´ ì˜¤ë˜ëœ ë‹¨ì–´ì— ëŒ€í•´ì„œëŠ” ë¬´ì‹œë¥¼ í•˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì„ ì·¨í•˜ëŠ” ê²ƒì´ë‹¤.(**Markov Chain**) ì´ë¥¼ \"n ë²ˆì§¸ê¹Œì§€ í—ˆë½\"í–ˆì„ ë•Œ, ì´ë¥¼ n-gram ì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n\n$$\np(W) = \\prod_{i=1}^{n}{p(w_{i}|w_{i-n+1},w_{i-n+2},...,w_{i-1})}\n$$\n\nê·¸ë ‡ë‹¤ë©´, n-gramì—ì„œ ì ì ˆí•œ nì´ë€ ë¬´ì—‡ì¼ê¹Œ? ì¼ë°˜ì ìœ¼ë¡œëŠ” nì´ í¬ë‹¤ëŠ” ê²ƒì€ contextë¥¼ ë§ì´ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ë¡œ ë°›ì•„ë“¤ì—¬ì§ˆ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, nì´ í´ìˆ˜ë¡ ì„±ëŠ¥ì˜ ìµœì í™” ê°€ëŠ¥ì„±ì´ ë” ë†’ë‹¤. í•˜ì§€ë§Œ, Vocabularyì˜ ì‚¬ì´ì¦ˆê°€ ì»¤ì§€ëŠ” ê²½ìš°ë¥¼ ì˜ˆë¥¼ ë“¤ì–´ë³´ì. ì—¬ê¸°ì„œëŠ” $|V| = 60$k ë¼ê³  í•´ë³´ì.\n\n| n-gram          | p(w_{i})                         | # of parameters   |\n| :-------------- | :------------------------------- | :---------------- |\n| 0-gram(uniform) | ${1\\over\\vert V\\vert}$           | 1                 |\n| 1-gram(unigram) | $p(w_{i})$                       | $6\\times10^4$     |\n| 2-gram(bigram)  | $p(w_{i}\\vert w_{i-1})$          | $3.6\\times10^9$   |\n| 3-gram(trigram) | $p(w_{i}\\vert w_{i-2}, w_{i-1})$ | $2.16\\times10^14$ |\n\nnì´ ì»¤ì§ˆ ìˆ˜ë¡ ê°€ëŠ¥í•œ ì¡°í•©ì˜ ìˆ˜ëŠ” êµ‰ì¥íˆ ì»¤ì§€ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ë³´ì§€ ëª»í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë„ êµ‰ì¥íˆ ì¦ê°€í•˜ê²Œ ë˜ì–´ dataìì²´ì˜ ë¹ˆë„ê°€ ì ì–´ì§€ëŠ” í˜„ìƒ(sparse)ì´ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ, ëŒ€ê²Œì˜ ê²½ìš° ìµœëŒ€ nì˜ í¬ê¸°ëŠ” 3ì •ë„ë¡œ í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n```plaintext\n ğŸ¤” ì£¼ì˜\n\n ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ê³µí•  ë•Œì—ëŠ” bigramë¶€í„°ëŠ” ë¬¸ì¥ì˜ ì‹œì‘ê³¼ ëì„ í‘œì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤. \n ê·¸ë ‡ì§€ ì•Šìœ¼ë©´, ì²«ë²ˆì§¸ ë¬¸ìì˜ í™•ë¥ ì„ êµ¬í•  ë•Œ, ì´ì „ ë‹¨ì–´ì˜ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ì—†ë‹¤.\n ì •í•´ì§„ ê·œì¹™ì€ ì—†ì§€ë§Œ, ëŒ€ê²Œ <s></s>ë¥¼ ì´ìš©í•œë‹¤.\n ex.  bigram : <s> w1 w2 w3 w4 </s>\n     trigram : <s> <s> w1 w2 w3 w4 </s> </s>\n```\n\n```plaintext\n ğŸ¤” Google N-gram\n\n êµ¬ê¸€ì—ì„œ 2006ë…„ì— N-gramì„ ì§ì ‘ êµ¬ì„±í•œ ê²ƒì´ ìˆë‹¤. \n ì´ 1,024,908,257,229ê°œì˜ ë‹¨ì–´ê°€ ì¡´ì¬í•˜ê³ , 40íšŒ ì´ìƒ ë“±ì¥í•˜ëŠ” 5-gramì´ 1,176,470,663ê°œ ì¡´ì¬í•œë‹¤. \n ì´ Vocabularyì˜ sizeëŠ” 200ë²ˆ ì´í•˜ë¡œ ë“±ì¥í•˜ëŠ” ê²ƒì€ ì œì™¸í•˜ë©´, 13,588,391ê°œì´ë‹¤. \n```\n\n## Estimation\n\nMLì—ì„œëŠ” Estimationì„ ìˆ˜í–‰í•  ë•Œ, continuousí•˜ê²Œ ì¶”ì •í•˜ì˜€ë‹¤. ì¦‰, ë³´ì§€ ëª»í•œ ë°ì´í„°ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ continuousí•œ ë¶„í¬ì˜ parameterë§Œ ì¶”ì •í•˜ë©´ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, NLPì—ì„œëŠ” ë‹¤ë¥´ë‹¤. NLë¥¼ continuousí•˜ê²Œ í‘œí˜„í•  ë§ˆë•…í•œ ë°©ë²•ì´ ì—†ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ê²°êµ­ ëª¨ë“  í™•ë¥ ì„ discreteí•˜ê²Œ êµ¬í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” íŠ¹ì • ë‹¨ì–´ì˜ í™•ë¥ ì„ êµ¬í•˜ëŠ” ë°©ë²•ì€ ë‹¨ í•˜ë‚˜ê°€ ëœë‹¤.\n\n$$\n|T| = \\text{count of observed tokens}\n$$\n$$\nc(w_{i}) = \\text{count of observed } w_{i}\n$$\n$$\n\\begin{align*}\n&P(w_{i}) = {{c(w_{i})}\\over{|T|}} \\\\\n&P(w_{i}| w_{i-1}) = {{c(w_{i-1}, w_{i})}\\over{c(w_{i-1})}} \\\\\n&P(w_{i}| w_{i-2}, w_{i-1}) = {{c(w_{i-2}, w_{i-1}, w_{i})}\\over{c(w_{i-2}, w_{i-1})}} \\\\\n\\end{align*}\n$$\n\nì´ë•Œ, ë°˜ë“œì‹œ sequenceì˜ ìˆœì„œë¥¼ ìœ ì˜í•˜ë„ë¡ í•˜ì. ìˆœì„œê°€ ë°”ë€Œë©´ ë‹¤ë¥¸ ì¢…ë¥˜ì´ë‹¤.\n\n> **Small Example**\n\në°ì´í„°ê°€ ë‹¤ìŒê³¼ ê°™ì´ ì£¼ì–´ì§„ë‹¤ê³  í•˜ì.\n\n```plaintext\n He can buy the can of soda.\n```\n\nì´ë•Œ ê° n-gramì„ ì´ìš©í•œ modelì˜ í™•ë¥ ë“¤ì„ ì‚´í´ë³´ì.\n\n| model    | probability                                                                                                                                                     |\n| :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| uni-gram | $p(He)=p(buy)=p(the)=p(of)=p(soda)=p(.) = 0.125$<br /> $p(can)=0.25$                                                                                            |\n| bi-gram  | $p(He\\vert <s>)=p(can\\vert He)=p(the\\vert buy)=p(can\\vert the)=p(soda\\vert of)=p(.\\vert sode) =p(</s> \\vert .) = 1$<br /> $p(buy\\vert can)=p(of\\vert can)= 0.5$ |\n| tri-gram | $p(He\\vert <s>, <s>)=p(can\\vert <s>, He)=p(the\\vert He, buy)=...=p(</s>\\vert ., </s>) =1$                                                                       |\n\n\n## Evaluation\n\ní‰ê°€í•  ë•ŒëŠ” MLê³¼ ê²°êµ­ì€ ë™ì¼í•˜ë‹¤. ìš°ë¦¬ê°€ í™•ë¥ ë¶„í¬ë¥¼ êµ¬í•  ë•Œ, ì‚¬ìš©í•œ ë°ì´í„° ì™¸ì— ë°ì´í„°ë¥¼ ì´ìš©í•´ì„œ ì˜ ì ìš©ì´ ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, wordì˜ ê°¯ìˆ˜ì™€ ë°ì´í„°ì˜ ìˆ˜ê°€ êµ‰ì¥íˆ ë§ì€ NLì˜ íŠ¹ì„±ìƒ ì´ Evaluation ë‹¨ê³„ì—ë§Œ êµ‰ì¥íˆ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì¦‰ê°ì ì¸ í‰ê°€ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì²™ë„ê°€ ìˆë‹¤.\n\n> **Perplexity**\n\ntrain setì„ í†µí•´ í•™ìŠµì„ í•˜ê³ , test setì„ í†µí•´ì„œ í‰ê°€ë¥¼ ìˆ˜í–‰í•  ë•Œ, train setì„ í†µí•´ êµ¬í•œ í™•ë¥ ì´ ì‹¤ì œ test setì—ì„œ ì–´ëŠì •ë„ì˜ Entropyë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤. ì›ë˜ì˜ ì‹ì€ \n$PP = 2^{H}$ì´ì§€ë§Œ, ì´ë¥¼ ë³€í˜•í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\nPP(W) &= \\sqrt[N]{1 \\over P(w_1, w_2, ..., w_N)} \\\\\n&= \\sqrt[N]{\\prod_{i=1}^{N}{P(w_i|w_{i-n+1}, w_{i-n+2}, ..., w_{i-1})}}\n\\end{align*}\n$$\n\nì´ë¥¼ í†µí•´ì„œ, ì‹¤ì œë¡œ í•´ë‹¹ ë¬¸ì œê°€ ë„ˆë¬´ ì–´ë µì§€ëŠ” ì•Šì€ì§€, ì„ íƒí•œ modelì´ ì˜ëª»ë˜ì§€ëŠ” ì•Šì•˜ëŠ”ì§€ë¥¼ íŒë‹¨í•œë‹¤.\n\n| model    | probability                                                                                                                                                     | entropy |\n| :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------ |\n| uni-gram | $p(He)=p(buy)=p(the)=p(of)=p(soda)=p(.) = 0.125$<br /> $p(can)=0.25$                                                                                            | 2.75    |\n| bi-gram  | $p(He\\vert <s>)=p(can\\vert He)=p(the\\vert buy)=p(can\\vert the)=p(soda\\vert of)=p(.\\vert sode) =p(</s> \\vert .) = 1$<br /> $p(buy\\vert can)=p(of\\vert can)= 0.5$ | 0.25    |\n| tri-gram | $p(He\\vert <s>, <s>)=p(can\\vert <s>, He)=p(the\\vert He, buy)=...=p(</s>\\vert ., </s>) =1$                                                                       | 0       |\n\nìœ„ì˜ ì˜ˆì‹œë¥¼ ê°€ì ¸ì™€ì„œ ë´ë³´ì. ë¬¼ë¡  ë™ì¼í•œ datasetì—ì„œ perplexityë¥¼ ì¸¡ì •í•˜ê¸°ëŠ” í–ˆì§€ë§Œ, nì´ ì»¤ì§ˆ ìˆ˜ë¡ ì ì  entropyê°€ ì‘ì•„ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŸ° dataê°€ ì¢‹ì€ ê±¸ê¹Œ? ì´ëŠ” ì¢‹ì€ ê²Œ ì•„ë‹ˆë‹¤. ì™œëƒí•˜ë©´, í•´ë‹¹ datasetì—ì„œë§Œ ì˜ ì‘ë™í•˜ë„ë¡ ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì¼ëª… **overfitting**ì´ë‹¤.\n\n## Smooting\n\nìœ„ì—ì„œ ë§í•œ overfittingì„ ì–´ëŠì •ë„ í•´ì†Œí•  ë¿ë§Œ ì•„ë‹ˆë¼ ì •ë§ í° ë¬¸ì œê°€ ë  ìˆ˜ ìˆëŠ” probabilityê°€ 0ì´ ë˜ëŠ” ë¬¸ì œ(ìš°ë¦¬ê°€ trainsetì„ í†µí•´ í•™ìŠµí•œ í™•ë¥  ë¶„í¬ì—ì„œ testsetì— ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°ì— í•´ë‹¹í•˜ëŠ” í™•ë¥ ê°’ì´ ì—†ì„ ë•Œ, ì¦‰ í•´ë‹¹ í™•ë¥ ì´ 0ì¼ë•Œ)ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” smoothingì´ í•„ìˆ˜ì ì´ë‹¤. probabilityê°€ 0ì´ ëœë‹¤ëŠ” ê²ƒì€ í›„ì— ìœ„ì—ì„œ êµ¬í•œ í™•ë¥ ë¡œ Predictionì„ í•  ë•Œ ëª¨ë“  ì˜ˆì¸¡ì„ ë§ì¹˜ëŠ” ìš”ì¸ì´ ëœë‹¤. ì™œëƒí•˜ë©´, ì¶”ì •í™•ë¥ ì˜ ìµœì  Entropyë¥¼ ì˜ë¯¸í•˜ëŠ” Cross Entropyë¥¼ $\\infin$ë¡œ ë§Œë“¤ê¸° ë•Œë¬¸ì´ë‹¤. (ìµœì  Entropyê°€ ë¬´í•œëŒ€ë¼ëŠ” ê²ƒì€ ì¶”ì •ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.)\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” probabilityê°€ 0ì´ ë˜ì§€ ì•Šê²Œ í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ê¸°ì¡´ì˜ í™•ë¥ ì˜ ì¼ë¶€ë¥¼ ë‚˜ëˆ„ì–´ì£¼ë„ë¡ í•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤. ì´ê²ƒì´ smoothingì´ë‹¤.\n\nì´ë•Œ ë°˜ë“œì‹œ ìœ ì˜í•  ì ì€ smoothingì„ í•˜ê±´ ì•ˆí•˜ê±´ ê° í™•ë¥ ì˜ ì´í•©ì€ 1ì´ ë˜ë„ë¡ ë³´ì¥í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\sum_{w \\in \\Omega}p(w) = 1\n$$\n\nëŒ€ëµ 6ê°€ì§€ì˜ ëŒ€í‘œì ì¸ smoothing ë°©ì‹ë“¤ì„ ì†Œê°œí•˜ê² ë‹¤.\n\n> <mark>**1. Add-1(Laplace)**</mark>\n\nê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì˜ smoothing ë°©ë²•ì´ì§€ë§Œ, ì‹¤ìš©ì ì¸ë©´ì€ ë‹¤ì†Œ ë–¨ì–´ì§€ëŠ” ë°©ë²•ì´ë‹¤. ì•„ì´ë””ì–´ëŠ” ê°„ë‹¨í•˜ë‹¤. predictionì„ ìˆ˜í–‰í•  ë•Œ, í˜„ì¬ ë“¤ì–´ì˜¨ inputê¹Œì§€ í¬í•¨í•˜ì—¬ ë§Œë“  $|V|$ë¥¼ ë¶„ëª¨ì— ë”í•˜ê³ , ë¶„ìì— 1ì„ ë”í•´ì£¼ëŠ” ë°©ë²•ì´ë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´, ì„¤ì‚¬ countê°€ 0ì´ ë”ë¼ë„ í™•ë¥ ì´ 0ì´ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n\n$$\np(w) = {X \\over Y} \\rArr p^{\\prime}(w) = {X + 1 \\over Y + |V|}\n$$\n\nì—¬ê¸°ì„œ, $|V|$ ê°’ì´ ì •ë§ í—·ê°ˆë ¸ëŠ”ë°, ì•„ë¬´ë„ ì˜ ì„¤ëª…ì„ ì•ˆí•˜ëŠ” ê²ƒ ê°™ì•„ì„œ ì§šê³  ë„˜ì–´ê°€ë©´, ìš°ë¦¬ê°€ í™•ë¥ ê°’ì„ ì–»ê¸° ìœ„í•´ì„œ ì‚¬ìš©í–ˆë˜ datasetê³¼ í˜„ì¬ predictionì„ í•˜ê¸° ìœ„í•´ì„œ ë“¤ì–´ì˜¨ input ë‘˜ì—ì„œ ë°œìƒí•œ ëª¨ë“  uniqueí•œ ë‹¨ì–´ì˜ ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤. (# of vocabulary)\n\nê·¸ë ‡ê²Œ í•´ì•¼ë§Œ $\\sum_{w \\in \\Omega}p(w) = 1$ì„ ë§Œì¡±í•˜ëŠ” ê°’ì´ ë‚˜ì˜¨ë‹¤.\n\në”°ë¼ì„œ, ì´ë¥¼ ê° ê°ì˜ n-gramì— ëŒ€ì…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n| n    | $p(w_{i})$                                                 | $p^{\\prime}(w_{i})$                                                            |\n| :--- | :--------------------------------------------------------- | :----------------------------------------------------------------------------- |\n| $1$  | $c(w_{i}) \\over \\vert T \\vert$                             | $c(w_{i}) + 1 \\over \\vert T \\vert + \\vert V \\vert$                             |\n| $2$  | ${{c(w_{i-1}, w_{i})}\\over{c(w_{i-1})}}$                   | ${{c(w_{i-1}, w_{i}) + 1}\\over{c(w_{i-1})} + \\vert V \\vert} $                  |\n| $3$  | ${{c(w_{i-2}, w_{i-1}, w_{i})}\\over{c(w_{i-2}, w_{i-1})}}$ | ${{c(w_{i-2}, w_{i-1}, w_{i}) + 1}\\over{c(w_{i-2}, w_{i-1})} + \\vert V \\vert}$ |\n\n> <mark>**2. Add-k**</mark>\n\n1ì´ë¼ëŠ” ìˆ«ìê°€ ê²½ìš°ì— ë”°ë¼ì„œëŠ” êµ‰ì¥íˆ í° ì˜í–¥ì„ ì¤„ ë•Œê°€ ìˆë‹¤. íŠ¹íˆ ê¸°ì¡´ ë°ì´í„°ì˜ ìˆ˜ê°€ ì ì€ ê²½ìš°ì— ë”ìš± ê·¸ë ‡ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ 1ë³´ë‹¤ ì‘ì€ ì„ì˜ì˜ ê°’(k)ì„ ì“°ëŠ” ë°©ë²•ì´ë‹¤.\n\n$$\np(w) = {X \\over Y} \\rArr p^{\\prime}(w) = {X + 1 \\over Y + k|V|}\n$$\n\ní•˜ì§€ë§Œ, ìœ„ì™€ ê°™ì€ ë°©ì‹ì€ ê²°êµ­ ì–´ë–¤ í™•ë¥  ê°’ì´ë“ ì§€ ë¶„ìì— 1ì„ ë”í•˜ê¸° ë•Œë¬¸ì— ë¶ˆí‰ë“±í•˜ê²Œ ê°’ì„ ë‚˜ëˆ ì¤€ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´, ì• ì´ˆì— count(ë¶„ì)ê°€ í° ë°ì´í„°ì—ê²Œ 1ì€ ë³„ë¡œ ì˜í–¥ì„ ì•ˆì£¼ê² ì§€ë§Œ, ë¶„ìê°€ ì²˜ìŒë¶€í„° ì‘ì•˜ë˜ ê²½ìš°ì—ëŠ” ì´ë¡œ ì¸í•´ì„œ ë°›ëŠ” ì˜í–¥ì´ êµ‰ì¥íˆ í¬ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ í•œê³„ì ì„ ê·¹ë³µí•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì´ ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ë“¤ì´ë‹¤.\n\n> <mark>**3.Good Turing**</mark>\n\nì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ìš°ë¦¬ëŠ” ìƒˆë¡œìš´ featureì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤. ë°”ë¡œ wordì˜ frequencyì˜ frequencyì´ë‹¤. \n\n$$\nN_{k} = \\sum_{i=1}^{n}1[c(w_{i}) = k]\n$$\n\nì•„ë§ˆ ì˜ˆì‹œë¥¼ ë´ì•¼ ì´í•´ê°€ ë¹ ë¥¼í…Œë‹ˆ í•˜ë‚˜ì˜ ì˜ˆì‹œë¥¼ ë³´ì.\n\n```plaintext\n sam I am I am sam I do not eat\n```\n\nì´ ê²½ìš° ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ countë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\n  &c(I) &=\\ 3 \\\\\n  &c(sam) &=\\ 2\\\\\n  &c(am) &=\\ 2\\\\\n  &c(do) &=\\ 1\\\\\n  &c(not) &=\\ 1\\\\\n  &c(eat) &=\\ 1\\\\\n\\end{align*}\n\\quad\\rArr\\quad\n\\begin{align*}\n  & N_{1} = 3 \\\\\n  & N_{2} = 2 \\\\\n  & N_{3} = 1\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ Good Turingì€ í•œ ë²ˆë„ ì•ˆë³¸ ë°ì´í„°ì—ê²ŒëŠ” í•œ ë²ˆë§Œ ë³´ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ì „ì²´ ê²½ìš°ì˜ ìˆ˜ë¡œ ë‚˜ëˆˆê°’ë§Œí¼ì˜ í™•ë¥ ì„ ë‚˜ëˆ„ì–´ì£¼ê³ , ê¸°ì¡´ ë°ì´í„°ë“¤ì—ê²ŒëŠ” laplaceì²˜ëŸ¼ 1ì„ ë”í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¹„ë¡€í•˜ëŠ” ë§Œí¼ì„ ê³±í•´ì£¼ì–´ ì ì ˆí•œ í™•ë¥ ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆê²Œí•˜ì˜€ë‹¤.\n\në”°ë¼ì„œ, ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n$$\np(w_{i}) = {(c(w_{i})+1)N_{c(w_{i})+1}\\over{N_{c(w_{i})}}} \\times {1\\over |T|},\\quad (N_{0} = 1)\n$$\n\nëŒ€ê²Œ ${(c(w_{i})+1)N_{c(w_{i})+1}\\over{N_{c(w_{i})}}}$ì´ ë¶€ë¶„ì„ $c^{*}$ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.\n\n> <mark>**4. Kneser-Ney**</mark>\n\nê°€ì¥ ë„ë¦¬ ì“°ì´ëŠ” Smoothing ë°©ì‹ìœ¼ë¡œ ê¸°ì–µí•´ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì €, Absolute Discountingì„ ë¨¼ì € ì´í•´í•´ì•¼ í•œë‹¤.  \nGood-turing ë°©ì‹ì„ ì‚¬ìš©í–ˆì„ ë•Œ $c$ì™€ $c^{*}$ì‚¬ì´ì— ì°¨ì´ê°€ ê²½í—˜ì ìœ¼ë¡œ íŠ¹ì • ìƒìˆ˜ë§Œí¼ì”© ì°¨ì´ê°€ ë‚œë‹¤ëŠ” ê²ƒì„ ë°œê²¬í•˜ì—¬, \n\n$$\nc^{*} = c - d\n$$\n\nChurchê³¼ Galeì€ ì´ë¥¼ Absolute Discounting í™•ë¥ ì´ë¼ë©° ë‹¤ìŒ ì‹ì„ ì œì‹œí•œë‹¤.\n\n$$\nP(w_{i}|w_{i-1}) = {c(w_{i-1}, w_{i}) -d \\over c(w_{i-1})} + \\lambda(w_{i-1})P(w) \n$$\n\nì—¬ê¸°ì„œ ë’·ì— ë¶€ë¶„ $\\lambda(w_{i-1})P(w)$ì€ discountingìœ¼ë¡œ ë°œìƒí•œ ì˜¤ì°¨ë¥¼ ë§¤ê¾¸ê¸° ìœ„í•œ ê°’ì´ë‹¤.\n\nì—¬ê¸°ì„œ Kneser-Ney problemì€ ë” ë„“ì€ ë²”ìœ„ë¡œ í™•ì¥ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë²”ìœ„ë¡œ í™•ì¥ì‹œí‚¨ ê²ƒì´ë‹¤. ê¸°ì¡´ì—ëŠ” bigramìœ¼ë¡œ ì œí•œë˜ì–´ ìˆë˜ Absolute Discountingì˜ ì‹ì€ ë‹¤ìŒê³¼ ê°™ì´ ë³€í˜•ëœë‹¤.\n\n$$\nP_{KN}(w_{i}|w_{i-n+1}^{i-1}) = {\\max(c(w_{i-1}, w_{i}) -d, 0) \\over c(w_{i-n+1}^{i-1})} + \\lambda(w_{i-n+1}^{i-1})P_{KN}(w_{i}|w_{i-n+2}^{i-1}) \n$$\n\n(ìœ„ì˜ ì‹ì— ëŒ€í•´ì„œ ì •í™•í•˜ê²Œ ì´í•´ë¥¼ í•˜ì§€ ì•Šì•˜ì§€ë§Œ, ê·¸ë ‡êµ¬ë‚˜ í•˜ê³  ë„˜ì–´ê°€ë„ ì¶©ë¶„í•  ê²ƒ ê°™ë‹¤.)\n\n> <mark>**5. Backoff & Interpolation**</mark>\n\nìƒí™©ì— ë”°ë¼ì„œ unigram, bigram, trigramì„ ê°€ì¤‘ì¹˜ë§Œí¼ ë”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. ê²°êµ­ n-gramì—ì„œ nì´ ì‘ì•„ì§ˆ ìˆ˜ë¡ detailì„ ì‹ ê²½ì“¸ ìˆ˜ ì—†ì§€ë§Œ, ì‹ ë¢°ë„ ìì²´ëŠ” ëŠ˜ì–´ë‚  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ì ì ˆíˆ ì„ì–´ì“°ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤ëŠ” ì´ë¡ ì´ë‹¤. í•˜ì§€ë§Œ, ì–´ë–¤ ê²ƒì„ ë” ì¤‘ì ìœ¼ë¡œ ì§ì ‘ ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. \n\n$$\np^{\\prime}(w_{i}|w_{i-2}, w_{i-1}) = \\lambda_{3}p(w_{i}|w_{i-2}, w_{i-1}) + \\lambda_{2}p(w_{i}|w_{i-1}) + \\lambda_{1}p(w_{i}) + {\\lambda_{0}\\over|V|}\n$$\n\nì´ë¥¼ ì •í•  ë•ŒëŠ” ëŒ€ê²Œ held-out dataë¥¼ í™œìš©í•´ì„œ êµ¬í•œë‹¤.(validation setì´ë¼ê³  ë¶€ë¥¸ë‹¤.) ì¦‰, ì „ì²´ corpusë¥¼ (train, validation, test)ë¡œ ì ì ˆíˆ ë‚˜ëˆ„ì–´ ì“°ë¼ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ì„±ëŠ¥ì„ ì¸¡ì •í•  ë•ŒëŠ” testsetì„ ì“°ê³ , $\\lambda$ë¥¼ ì¶”ì •í•  ë•Œì—ëŠ” validation(heldout)setì„ ì‚¬ìš©í•˜ë¼ëŠ” ê²ƒì´ë‹¤.\n\n\n## Word Class\n\nSmoothing ë°©ì‹ì„ ì´ìš©í•´ì„œ unseen dataë¥¼ ì²˜ë¦¬í•´ì£¼ì—ˆëŠ”ë° ì¢€ ë” íš¨ê³¼ì ìœ¼ë¡œ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•œ ê²ƒì´ë‹¤. classë‹¨ìœ„ë¡œ wordë¥¼ groupingí•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë‹¨ì–´ì˜€ë‹¤ê³  í•˜ë”ë¼ë„ íŠ¹ì • groupì— ì†í•œë‹¤ë©´, ì´ë¥¼ í™œìš©í•´ì„œ ì–´ëŠì •ë„ í™•ë¥ ì„ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ ë°©ì‹ì„ í™œìš©í•˜ë©´, ì‹¤ì œë¡œ ë³´ì§€ ì•Šì€ ë°ì´í„°ì— ëŒ€í•´ì„œë„ í˜„ì‹¤ì ì¸ ì¶”ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ detailì— ëŒ€í•œ ì„±ëŠ¥ì€ ê°ì†Œí•  ìˆ˜ ìˆë‹¤.\n\n$$\np(w_{i}|w_{i-1}) \\rArr p(w_{i}|c_{i-1}) ={ c(c_{i}, w_{i}) \\over c(c_{i-1}) }\n$$\n\nìœ„ì˜ ì‹ì„ ë³´ë©´, ì´ì „ ë‹¨ì–´ì˜ contextë¥¼ ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ì œëŠ” classë¥¼ ë³´ê³  ë‹¤ìŒ ë‹¨ì–´ë¥¼ probabilityë¥¼ ê³„ì‚°í•˜ë„ë¡ ë°”ë€ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì´ í™•ë¥ ì€ classë‚´ë¶€ì—ì„œ í•´ë‹¹ ë‹¨ì–´ì˜ ë¹ˆë„ë¥¼ ì´ì „ classì˜ ë¹ˆë„ë¡œ ë‚˜ëˆ„ì—ˆë‹¤ê³  ë³´ë©´ ë˜ê² ë‹¤.\n\n$$\np(w_{i}|c_{i-1}) = p(w_{i}|c_{i}) \\times p(c_{i}|h_{i})\n$$\n\nì¦‰, class ë‹¨ìœ„ë¡œ ë‹¨ì–´ë¥¼ ë¬¶ê³  classì—ì„œ ë‹¨ì–´ì˜ ë°œìƒ í™•ë¥ ì— classì—ì„œì˜ n-gramì„ ê³±í•œ ê°’ì´ ë˜ëŠ” ê²ƒì´ë‹¤. ì¼ë°˜ì ì¸ Bayes Decison Ruleì— ê¸°ë°˜í•˜ì—¬ ì„ íƒí•œë‹¤ê³  ë³´ë©´ ë˜ê² ë‹¤.\n\n## Example. Spelling Correction\n\nì—¬íƒœê¹Œì§€ ë°°ìš´ ë‚´ìš©ì„ í™œìš©í•˜ì—¬ Spelling ì˜¤ë¥˜ë¥¼ ì •ì •í•´ì£¼ëŠ” applicationì„ ì œì‘í•œë‹¤ê³  í•´ë³´ì. ë¨¼ì €, Spelling Errorì˜ ì¢…ë¥˜ë¶€í„° ì•Œì•„ë³´ë„ë¡ í•˜ì.\n\n- **Non word Error**  \n  ì˜ëª»ëœ spellingì— ì˜í•´ì„œ ì „í˜€ ëœ»ì´ ì—†ëŠ” ë‹¨ì–´ê°€ ë§Œë“¤ì–´ì§„ ê²½ìš°ì´ë‹¤.  \n  í•´ê²°ì„ ìœ„í•´ì„œëŠ” ì‚¬ì „ì—ì„œ ìœ ì‚¬í•œ ë‹¨ì–´ë¥¼ ì°¾ì•„ì„œ ê°€ì¥ ê°€ëŠ¥ì„±ì´ ë†’ì€ ê²ƒ ë˜ëŠ” ì´ì „ì— ë°°ì› ë˜ shortest edit distanceë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤.\n- **Real word Error**  \n  ì˜ëª»ëœ spelling ë˜ëŠ” ìœ ì‚¬í•œ ë°œìŒ ë•Œë¬¸ì— ëœ»ì´ ìˆëŠ” ë‹¨ì–´ê°€ ë§Œë“¤ì–´ì¡Œì§€ë§Œ, ì˜¤ë¥˜ê°€ ì˜ì‹¬ë˜ëŠ” ê²½ìš°ì´ë‹¤.  \n  í•´ê²°ì±…ì€ ë¹„ìŠ·í•œ ë°œìŒ ë˜ëŠ” spellingì˜ ëª¨ë“  ë‹¨ì–´ë¥¼ ì°¾ì•„ì„œ í•´ë‹¹ ë‹¨ì–´ì™€ í•¨ê»˜ language modelì— ë„£ì–´ì„œ ê°€ì¥ ë†’ì€ ê°€ëŠ¥ì„±ì„ ê°€ì§€ëŠ” ê°’ì„ ì°¾ëŠ” ê²ƒì´ë‹¤.\n\në¨¼ì €, **Non Word Error** ê°™ì€ ê²½ìš°ëŠ” ì˜¤íƒ€ ë°ì´í„°ì— ì›ë˜ ì“°ë ¤ê³  í–ˆë˜ ê°’ì„ labelingí•´ì„œ ëª¨ì•„ë‘ê³  ë‹¤ìŒ ê°’ì„ í•™ìŠµì‹œí‚¤ëŠ” ê²ƒì´ë‹¤. \n(*x=ì˜¤íƒ€ë°ì´í„°, w=ì‚¬ì „ì—ìˆëŠ”ë‹¨ì–´)\n- $P(x|w)$ = xê°€ wì¼ ê°€ëŠ¥ì„±\n- $p(w)$ = wì˜ í™•ë¥ \n\nê·¸ë¦¬ê³  ë‚˜ì„œ, ë‹¤ìŒì„ ì‹¤í–‰ì‹œì¼œì„œ ê°€ì¥ ì ì ˆí•œ $\\hat{w}$ë¥¼ ì°¾ìœ¼ë©´ ëœë‹¤.\n$$\n\\begin{align*}\n\\hat{w} &= \\argmax_{w \\in V}P(w|x) \\\\\n&= \\argmax_{w \\in V}{P(x|w)P(w)}\n\\end{align*}\n$$\n\n**Real Word Error**ì˜ ê²½ìš°ì—ëŠ” ê²°êµ­ ì´ì „ ë‹¨ì–´ sequenceë¥¼ í™œìš©í•´ì•¼ í•œë‹¤. ì „ì²´ corpusë¥¼ í•™ìŠµí•´ì„œ tri-gramì„ ì¶”ì¶œí•´ë†“ê³ , ë²ˆê°ˆì•„ê°€ë©´ì„œ í›„ë³´ ë‹¨ì–´ë“¤ì„ ì§‘ì–´ë„£ì–´ì„œ ê°€ì¥ ë†’ì€ í™•ë¥ ì´ ë‚˜ì˜¤ëŠ” ë‹¨ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í›„ë³´ ë‹¨ì–´ê°€ ë‹¤ìŒê³¼ ê°™ì´ ì •í•´ì¡Œë‹¤ê³  í•˜ì. ($\\bold{w}_{3} = {w_3^{(1)}, w_3^{(2)}, w_3^{(3)}, ...}$) ì´ë•Œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” wëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\hat{w}_{3} = \\argmax_{w_{3}^{(i)} \\in \\bold{w}_{3}} P(w_{3}^{(i)}| w_{1}, w_{2}) \n$$\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)","slug":"nlp-language-modeling","date":"2022-10-21 12:15","title":"[NLP] 3. Language Modeling","category":"AI","tags":["NLP","NoisyChannel","Ngram","LanguageModeling","Smoothing","WordClass"],"desc":"ì´ì œ í†µê³„ì ì¸ ê´€ì ì—ì„œ NLì„ inputìœ¼ë¡œ í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ë°©ë²•ì„ ì°¾ì„ ê²ƒì´ë‹¤. ì´ë¥¼ Language Modelingì´ë¼ê³  í•˜ë©°, ì´ë¥¼ ìœ„í•´ì„œ ë˜ëŠ” ì´ë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•œ ë°©ë²•ë“¤ì„ ì†Œê°œí•  ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"},{"content":"\n## Intro\n\nìš°ë¦¬ëŠ” Linear Regression, Logistic Regression, SVMì„ ê±°ì¹˜ë©° dataë¡œ ë¶€í„° ìœ ì˜ë¯¸í•œ patternì„ ë°œê²¬í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³´ì•˜ë‹¤. ì´ ê³¼ì •ì€ ìš°ë¦¬ì—ê²Œ ëª…í™•í•œ ì‹ í•˜ë‚˜ë¥¼ ì œì‹œí•˜ì˜€ê³ , ëª¨ë“  ê³¼ì •ì„ ìš°ë¦¬ê°€ ì œì–´í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ë°ì´í„°ë¥¼ ìš°ë¦¬ê°€ ëª¨ë‘ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆëŠ” ê²ƒì¸ì§€ëŠ” ì˜ë¬¸ì´ ë“¤ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ì´í•´í•˜ì§€ëŠ” ëª»í•˜ì§€ë§Œ, ì•Œì•„ì„œ ìµœì ì˜ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œ? ì´ëŸ° ë§ˆë²•ê°™ì€ ì¼ì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ê²ƒì´ Neural Networkì´ë‹¤.\n  ê²Œ ì•Œì§€ ëª»í•˜ì§€ë§Œ inputì´ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ ì²˜ë¦¬í•´ì„œ outputì„ ì „ë‹¬í•˜ëŠ” ì‹œìŠ¤í…œì„ ìš°ë¦¬ì˜ ì‹ ì²´ì—ì„œ ì°¾ê²Œ ëœë‹¤. ë°”ë¡œ ìš°ë¦¬ ëª¸ì„ ì´ë£¨ëŠ” ì‹ ê²½ë§ì´ë‹¤. ì˜ˆì‹œë¡œ ìš°ë¦¬ëŠ” ëˆˆì„ í†µí•´ ë¹›ì´ë¼ëŠ” inputì„ ë°›ìœ¼ë©´, ìš°ë¦¬ ëˆˆê³¼ ë‡Œì—ì„œ ë¬´ìŠ¨ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ëŠ” ëª¨ë¥´ì§€ë§Œ ê²°ê³¼ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ë¬¼ì²´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. ì´ ê³¼ì •ì„ ì¶”ì¸¡ì˜ ê³¼ì •ì— ë„ì…í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?\n\n## Perceptron\n\nPerception(ì¸ì§€ ëŠ¥ë ¥) + Neuron(ì‹ ê²½ ì„¸í¬)ì˜ í•©ì„±ì–´ì´ë‹¤. ì¤‘ê³ ë“±í•™êµ ìƒëª… ìˆ˜ì—…ì„ ë“¤ì—ˆë‹¤ë©´, ìš°ë¦¬ì˜ ëª¨ë“  ì‹ ê²½ì€ ë‰´ëŸ°ì´ë¼ëŠ” ë‹¨ìœ„ ì„¸í¬ë¡œ ì´ë£¨ì–´ì§„ë‹¤ëŠ” ê²ƒì„ ë°°ì› ì„ ê²ƒì´ë‹¤. ì¦‰, ìš°ë¦¬ì˜ ì‹ ê²½ ì„¸í¬ë¥¼ ì»´í“¨í„° ê³µí•™ì—ì„œ í™œìš©í•˜ê¸° ìœ„í•´ì„œ, ìˆ˜í•™ì ìœ¼ë¡œ ë³€í™˜í•œ ê²ƒì´ë‹¤. í˜•íƒœë¥¼ ë¨¼ì € ì‚´í´ë³´ì.\n\n$$\ny = sign(\\bold{w}^{\\top}\\bold{x} + b)\n$$\n\n![nn-perceptron-1](/images/nn-perceptron-1.jpg)\n\nëŒ€ë‹¨í•œ ê²ƒì„ ê¸°ëŒ€í–ˆë‹¤ë©´ ì‹¤ë§í•˜ê² ì§€ë§Œ, simpleí•œ ê²ƒì´ ìµœê³ ë¼ëŠ” ì—°êµ¬ì˜ ì§„ë¦¬ì— ë”°ë¼ì„œ ìœ„ì˜ ì‹ì€ ê½¤ë‚˜ í•©ë¦¬ì ì´ë‹¤. ìš°ë¦¬ê°€ Linear Regressionê³¼ Logistic Regressionì„ ë°°ì› ìœ¼ë‹ˆ ì•Œ ê²ƒì´ë‹¤. ì´ëŠ” ì‚¬ì‹¤ Linear Regressionì„ ì´ìš©í•´ì„œ ìš°ë¦¬ê°€ Classificationì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©í–ˆë˜ ì‹ì´ë‹¤. ì¦‰, perceptron í•˜ë‚˜ëŠ” inputì„ ì„ í˜•ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” decision boundaryë¥¼ ì°¾ëŠ” ê²ƒê³¼ ê°™ë‹¤.\n\n> **Optimization**\n\nê·¸ë ‡ë‹¤ë©´, í•´ë‹¹ perceptronì„ í†µí•´ì„œ ëª¨ë“  ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì„ ë§Œì¡±í•˜ëŠ” $\\bold{w}$ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.\n\n$$\ny_{n} = \n\\begin{cases}\n1  &\\text{ if  } \\bold{x}_{n} \\in \\mathcal{C}_{1} \\\\\n-1 &\\text{ if  } \\bold{x}_{n} \\in \\mathcal{C}_{2} \\\\\n\\end{cases}\n$$\n$$\ny_{n}\\bold{w}^{\\top}\\bold{x}_{n} \\gt 0, \\forall n\n$$\n\nê²°êµ­ Loss í•¨ìˆ˜ëŠ” perceptronì˜ ì˜ëª»ëœ classification ê²°ê³¼ë¥¼ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\mathcal{J}(\\bold{w}) = - \\sum_{n \\in \\mathcal{M}(\\bold{w})}{y_{n}\\bold{w}^{\\top}\\bold{x}_{n}} \\quad( \\mathcal{M}(\\bold{w}) = \\{ n : y_{n}\\bold{w}^{\\top}\\bold{x}_{n} \\} )\n$$\n$$\n\\nabla_{\\bold{w}}\\mathcal{J}(\\bold{w}) = - \\sum_{n \\in \\mathcal{M}(\\bold{w})}{y_{n}\\bold{x}_{n}}\n$$\n\në”°ë¼ì„œ, ìš°ë¦¬ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Gradient Descentì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\bold{w}_{t+1} = \\bold{w}_{t} + \\alpha\\sum_{n \\in \\mathcal{M}(\\bold{w})}{y_{n}\\bold{x}_{n}}\n$$\n\nê°„ë‹¨í•œ ì˜ˆì‹œë¡œ AND, OR Gateë¥¼ percentronì„ í†µí•´ í‘œí˜„í•´ë³´ì.\n\n![nn-and-gate](/images/nn-and-gate.jpg)\n![nn-or-gate](/images/nn-or-gate.jpg)\n\ní•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ë°ì´í„°ëŠ” í•­ìƒ ì™„ë²½í•˜ê²Œ ì„ ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì§€ì§€ëŠ” ì•ŠëŠ”ë‹¤. í•˜ë‚˜ì˜ perceptronìœ¼ë¡œëŠ” ì•„ë˜ì˜ XORì¡°ì°¨ë„ êµ¬ë¶„í•´ë‚¼ ìˆ˜ ì—†ë‹¤.\n\n![nn-multi-line-example](/images/nn-multi-line-example.jpg)\n\n## Multilayer Perceptron\n\nìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë‚˜ì˜¨ ê²ƒì´ perceptronì„ ë‹¤ì¸µìœ¼ë¡œ ìŒ“ì•„ì„œ í•´ê²°í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ì œëŠ” í•˜ë‚˜ì˜ ì‹ ê²½ì„¸í¬ì˜€ë˜ perceptronì„ ì§„ì§œ ì‹ ê²½ë§ì²˜ëŸ¼ ì—°ê²°í•´ë³´ìëŠ” ê²ƒì´ë‹¤.\n\në¨¼ì € ì¶”ìƒì ì¸ ì˜ˆì‹œë¥¼ ìƒê°í•´ë³´ì. ìš°ë¦¬ê°€ XOR Gateë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì–´ë–¤ Gateë¥¼ ê²°í•©í•´ì•¼í• ê¹Œ?\n\n$$\na \\oplus b = ab + \\bar{a}\\bar{b}\n$$\n\nìš°ë¦¬ëŠ” AND Gate 2ê°œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê³ , í•´ë‹¹ ê²°ê³¼ê°’ì„ ì´ìš©í•´ì„œ OR Gate ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë©´ XOR Gateë¥¼ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ê° GateëŠ” ìš°ë¦¬ê°€ perceptronìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆì—ˆëŠ”ë° ê·¸ëƒ¥ ì´ê²ƒì„ gateë¡œ í‘œí˜„í•˜ë“¯ì´ ë˜‘ê°™ì´ ë‚˜íƒ€ë‚´ë©´ í’€ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ?\n\nê·¸ë˜ì„œ ì§ì ‘ ìˆ˜í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê°’ì„ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n![nn-xor-gate](/images/nn-xor-gate.jpg)\n\n```plaintext\n ğŸ¤” Insight\n\n ìœ„ì˜ ê³¼ì •ì„ ë³´ë‹¤ë³´ë©´ ë†€ë¼ìš´ ê²ƒì„ í•˜ë‚˜ ë°œê²¬í•  ìˆ˜ ìˆë‹¤. ë°”ë¡œ ì™¼ ìª½ ê·¸ë¦¼ì˜ ë³€í™”ì´ë‹¤. \n ì²«ë²ˆì§¸, ë‘ ê°œì˜ perceptronì„ í†µí•´ì„œ ë§Œë“¤ì–´ì§„ outputì´ ì´ë£¨ëŠ” ê²°ê³¼ê°’ì˜ í˜•íƒœë¡œ featureë¥¼ ë³€í™˜í•˜ë©´, \n í•˜ë‚˜ì˜ perceptronìœ¼ë¡œ decision boundaryë¥¼ ê·¸ë¦´ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. \n ì´ëŠ” ë§ˆì¹˜ ì´ì „ linear regressionì—ì„œ ë°°ì› ë˜ basis function(Ï•)ì´ í–ˆë˜ ì—­í• ì´ë‹¤.\n\n ê·¸ë ‡ë‹¤ë©´, ì´ë¥¼ ë”ìš± í™•ì¥í•´ë³´ì. \n ë§Œì•½ í•´ë‹¹ Layerê°€ ë” ê¹Šì–´ì§„ë‹¤ê³  í•´ë„, ì¶œë ¥ ì§ì „ì˜ layerëŠ” ë‹¨ìˆœíˆ ì´ì „ ëª¨ë“  layerëŠ” ì…ë ¥ ë°ì´í„°ë¥¼ ê°€ê³µí•´ì„œ\nfeatureë¥¼ ë³€í™˜í•˜ëŠ” í•˜ë‚˜ì˜ basis function(Ï•)ë¥¼ ì·¨í•œ ê²ƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.\n```\n\nê²°ë¡ ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ë” ë³µì¡í•˜ê³ , ì–´ë ¤ìš´ ë¬¸ì œì˜ ê²½ìš°ì—ë„ ë” ê¹Šê²Œ ì‹ ê²½ë§ì„ êµ¬ì„±í•˜ë©´ ê²°êµ­ì€ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n> **Universal Approximation Theorem**\n\nìœ„ì™€ ê°™ì€ ê¹Šì€ ì‹ ê²½ë§ êµ¬ì¡°ë¥¼ ì´ìš©í•˜ìëŠ” ì£¼ì¥ë„ ìˆì§€ë§Œ, ì´ì™€ ìœ ì‚¬í•˜ê²Œ ë„“ì€ ì‹ ê²½ë§ì„ ì“°ìëŠ” ì£¼ì¥ë„ ì¡´ì¬í–ˆë‹¤.  \n\n![nn-universal-approx-theorem-1](/images/nn-universal-approx-theorem-1.jpg)\n\në§Œì•½, ìš°ë¦¬ê°€ í•˜ë‚˜ì˜ Layerì™€ outputì—ì„œ ìµœì¢… output perceptronë§Œ ê°–ê³  ì²˜ë¦¬ë¥¼ í•œë‹¤ë©´, ê²°êµ­ ì—¬ëŸ¬ perceptronì˜ weighted í•©ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ ê²½ìš° ìš°ë¦¬ëŠ” ê³„ë‹¨ í•¨ìˆ˜ì˜ weighted í•©ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆëŠ”ë° perceptronì´ ë§ì•„ì§ˆ ìˆ˜ë¡ ì´˜ì´˜í•´ì§€ë©° ì •ë‹µê³¼ ìœ ì‚¬í•œ ì¶”ë¡ ì´ ê°€ëŠ¥í•´ì§„ë‹¤.(ë§ˆì¹˜ ì ë¶„ì˜ ê°œë…ê³¼ ìœ ì‚¬í•˜ë‹¤. ë¬¼ë¡  ì´ëŠ” ì¶”ìƒì ì¸ ì„¤ëª…ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œëŠ” ê³„ë‹¨í•¨ìˆ˜ì˜ í•©ì´ê¸° ë•Œë¬¸ì— ì¢€ ë‹¤ë¥´ë‹¤.)\n\n![nn-universal-approx-theorem-2](/images/nn-universal-approx-theorem-2.jpg)\n\nìœ„ì˜ ê·¸ë¦¼ì„ ë³´ë©´ ì´í•´í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ ê²°êµ­ ëª¨ë“  í•¨ìˆ˜ í˜•íƒœë¥¼ ê¸°ì–µí•˜ëŠ” ê²ƒì´ë‹¤.(**memorizer**) ì´ê²ƒì€ input dataê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ë³µì¡ë„ê°€ ê¸‰ê²©í•˜ê²Œ ì¦ê°€í•˜ê¸° ë•Œë¬¸ì— í•™ìŠµê³¼ ì˜ˆì¸¡ê³¼ì •ì— êµ‰ì¥íˆ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í•œë‹¤.\n\n> **Multilayer Optimization(Backpropagation)**\n\nê·¸ë ‡ë‹¤ë©´, ë„“ì€ ì‹ ê²½ë§ì´ í•œê³„ê°€ ìˆìœ¼ë‹ˆ ì„ íƒì§€ëŠ” inputê³¼ output ì‚¬ì´ì˜ layer(**hidden layer**)ì˜ ê°¯ìˆ˜ë¥¼ ëŠ˜ë ¤ì„œ ê¹Šì€ ì‹ ê²½ë§ì„ ë§Œë“œëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” perceptronì€ signí•¨ìˆ˜ë¡œ ê°ì‹¸ì ¸ìˆê¸° ë•Œë¬¸ì— ë¯¸ë¶„ ì‹œì— ê¸°ìš¸ê¸°ê°€ 0ì´ë¼ëŠ” ë¬¸ì œë¥¼ ê°–ëŠ”ë‹¤. ë˜í•œ, ê·¸ë ‡ë‹¤ê³  ì •ë‹µì˜ ê°¯ìˆ˜ë¥¼ ì´ìš©í•˜ê¸°ì—ëŠ” ê° perceptronì˜ ì˜í–¥ì„ ì „ë‹¬í•˜ê¸°ì— ë¶€ì¡±í•˜ë‹¤ëŠ” ê²ƒì´ ëª…í™•í•˜ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” perceptronì— ìˆëŠ” ì •ë‹µì„ íŒë³„í•˜ëŠ” í•¨ìˆ˜ signì„ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ëŒ€ì²´í•˜ê¸°ë¡œ í•œë‹¤.\n\n![nn-perceptron-2](/images/nn-perceptron-2.jpg)\n\nì—¬ê¸°ì„œ ì´ í•¨ìˆ˜ë¥¼ ìš°ë¦¬ëŠ” **activation function**ì´ë¼ê³  ë¶€ë¥´ê³  ëŒ€í‘œì ìœ¼ë¡œëŠ” ê°™ì€ ì¢…ë¥˜ê°€ ìˆë‹¤.\n\n- **sigmoid**  \n  ìš°ë¦¬ê°€ ê°€ì¥ ì‰½ê²Œ ìƒê°í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤. logistic regressionì—ì„œ ì‚¬ìš©í•´ë³¸ë§Œí¼ ê¸°ìš¸ê¸°ê°’ì„ íš¨ê³¼ì ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\n- **tanh**  \n  sigmodì™€ êµ‰ì¥íˆ ìœ ì‚¬í•œ í•¨ìˆ˜ì´ë‹¤. ë”°ë¼ì„œ, ë¹„ìŠ·í•œ ìš©ë„ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.\n- **ReLU**  \n  ì¶œë ¥ ì‹œì ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ, ê° ê°ì˜ hidden layerì—ì„œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ì™œëƒí•˜ë©´, sigmoid í•¨ìˆ˜ëŠ” ì¶œë ¥ê°’ì˜ í˜•íƒœê°€ [0, 1], tanhëŠ” [-1, 1]ì´ê¸° ë•Œë¬¸ì— ë°˜ë³µí•´ì„œ ì ìš©í•˜ë©´, gradientê°€ ì‚¬ë¼ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ê¸°ìš¸ê¸°ë¥¼ ìˆëŠ” ê·¸ëŒ€ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ì´ëŸ¬í•œ í˜•íƒœë¥¼ ì¶œë ¥ ì´ì „ì—ëŠ” ë§ì´ ì‚¬ìš©í•œë‹¤.\n- **Leaky ReLU**  \n  ReLUê°€ ìŒìˆ˜ê°’ì„ ì™„ì „íˆ ë¬´ì‹œí•˜ëŠ”ë° Leaky ReLUëŠ” ì´ëŸ¬í•œ ë°ì´í„°ê°€ ì¡°ê¸ˆì´ë¼ë„ ì˜ë¯¸ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n- **ELU**  \n  Leaky ReLUì™€ ë¹„ìŠ·í•œ ì´ìœ ì´ë‹¤.\n\n  ![activation-functions](/images/activation-functions.png)\n  \nìë£Œê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤ë©´ [ğŸ”— wikipedia](https://en.wikipedia.org/wiki/Activation_function)ë¥¼ ì°¸ê³ í•˜ì.\n\n---\n\nì ì´ì œ ì‹¤ì œë¡œ ì–´ë–»ê²Œ optimizationì„ ìˆ˜í–‰í• ì§€ë¥¼ ì•Œì•„ë³´ë„ë¡ í•˜ì.\n\në¨¼ì €, LossëŠ” ê°€ì¥ ë§ˆì§€ë§‰ layer(output layer)ì˜ outputê³¼ ì‹¤ì œ ê°’ê³¼ì˜ ì°¨ì´ê°€ ë  ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n(ì•„ë˜ì„œ $\\bold{h}_{L}$ì€ Lë²ˆì§¸ layerì˜ outputì„ ì˜ë¯¸í•œë‹¤.)\n\n$$\n\\begin{align*}\n\\mathcal{L} &= \\sum_{n=1}^{N}{\\ell(y_n, \\bold{h}_L)} \\\\\n&= \\sum_{n=1}^{N}{(y_{n} - \\bold{h}_{L})^2} \\\\\n&= \\sum_{n=1}^{N}{(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\bold{h}_{L-1} + b_{L-1}))^2} \\\\\n&= \\sum_{n=1}^{N}{(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\sigma(\\bold{w}_{L-1}^{\\top}\\bold{h}_{L-2} + b_{L-2}) + b_{L-1}))^2} \\\\\n&= ...\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ ìš°ë¦¬ëŠ” ì „ì²´ $\\bold{W}$ë¥¼ í•™ìŠµì‹œì¼œì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ì¶œë ¥ì¸µë§Œ í•™ìŠµí•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ì „ì²´ ëª¨ë“  layerì˜ $\\bold{w}_{i}$ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ìš°ë¦¬ëŠ” ${{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{i}}}$ë¥¼ ëª¨ë‘ êµ¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì•„ë§ˆ ê°€ì¥ ìŠµê´€ì ìœ¼ë¡œ í•˜ëŠ” í–‰ìœ„ëŠ” ìˆ«ìê°€ ì‘ì€ ê°’ë¶€í„° í¸ë¯¸ë¶„í•˜ë©´ì„œ ì§„í–‰í•˜ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ê·¸ë ‡ê²Œ í•˜ì§€ë§ê³  ë°˜ëŒ€ ìˆœì„œë¡œ ë¯¸ë¶„ì„ í•˜ë¼ëŠ” ê²ƒì´ **backpropagation**ì˜ main ideaì´ë‹¤.\n\n$$\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L}}} = \\sum_{n=1}^{N}\\{({\\partial \\bold{h}_L \\over \\partial \\bold{w}_{L}} )\\times\\red{-2(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\bold{h}_{L-1} + b_{L-1}))}\\}\n$$\n\n$$\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L-1}}} = \\sum_{n=1}^{N}\\{({\\partial \\bold{h}_{L} \\over \\partial \\bold{w}_{L-1} })\\times\\red{-2(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\bold{h}_{L-1} + b_{L-1}))}\\}\n$$\n\nì¦‰, ë‹¤ìŒê³¼ ê°™ì€ chain ruleì„ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\begin{align*}\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L}}} &= \\red{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{w}_{L}}} \\\\\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L-1}}} &= \\red{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{w}_{L-1}}} \\\\\n&= \\red{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{h}_{L-1}}} {{\\partial\\bold{h}_{L-1}}\\over{\\partial \\bold{w}_{L-1}}} \\\\\n&= \\blue{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L-1}}} } {{\\partial\\bold{h}_{L-1}}\\over{\\partial \\bold{w}_{L-1}}} \\\\\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L-2}}} &= \\blue{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L-1}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{w}_{L-2}}} \\\\\n\\end{align*}\n$$\n\nìš°ë¦¬ëŠ” ë¹¨ê°„ìƒ‰ê³¼ íŒŒë€ìƒ‰ ë¶€ë¶„ì˜ ì—°ì‚°ì„ ì¬í™œìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ë˜í•œ, ${{\\partial\\bold{h}_{l}}\\over{\\partial \\bold{w}_{l}}}$ì€ êµ‰ì¥íˆ ì‰¬ìš´ ì—°ì‚°ì´ê¸°ì— ìš°ë¦¬ê°€ ì‹ ê²½ ì¨ì„œ ê³„ì‚°í•´ì•¼ í•  ê°’ì€ ë§¤ë‹¨ê³„ë¥¼ ì—°ê²°í•´ì¤„ $ {{\\partial\\bold{h}_{l}}\\over{\\partial \\bold{h}_{l-1}}}$ì´ë‹¤.\n\n![ml-backpropagation](/images/ml-backpropagation.jpg)\n\n## Loss Function\n\nìš°ì„  KL-Divergence, Entropy, Cross Entropyì— ëŒ€í•œ ì•½ê°„ì˜ ì´í•´ê°€ í•„ìš”í•˜ë‹ˆ ì´ì „ Posting([ğŸ”— Base Knowledge](posts/ml-base-knowledge))ì„ ì‚´í´ë³´ê³  ì˜¤ì.\n\nìœ„ì—ì„œëŠ” ìì—°ìŠ¤ëŸ½ê²Œ Lossë¥¼ ê³„ì‚°í•  ë•Œ, Squared Errorë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ê²½ìš°ì— ë”°ë¼ì„œëŠ” ë‹¤ì–‘í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. multiclass classificationì—ì„œëŠ” **Cross Entropy Loss**ë¥¼ ì‚¬ìš©í•œë‹¤. \n\nìš°ì„  Cross Entropy LossëŠ” ëŒ€ê²Œ L2 Loss(Squared Error)ì™€ ê°™ì´ ë¹„êµë˜ì–´ì§„ë‹¤. ìš°ì„  ìš°ë¦¬ê°€ ì´ì „ [ğŸ”— Parametric Estimation](posts/ml-parametric-estimation)ì—ì„œ MLEë¥¼ ë‹¤ë£° ë•Œ, KL-Divergenceë¥¼ í†µí•´ì„œ MLEê°€ ìµœì  parameterë¥¼ ì°¾ì„ ê²ƒì´ë¼ëŠ” ê±¸ ì¦ëª…í•œ ì ì´ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ [ğŸ”— Logistic Regression](/posts/ml-logistic-regression)ì—ì„œ Squared Errorë¥¼ í†µí•´ì„œ Lossë¥¼ êµ¬í–ˆë˜ ê³µì‹ì„ í™•ì¸í•´ë³´ì.(Gradient Asecent Part)\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê³µì‹ì„ ë´¤ì—ˆë‹¤.\n\n$$\n\\argmax_{\\bold{w}} \\sum_{n=1}^{N}y_{n}\\log{\\sigma(\\bold{w}^{\\top}\\bold{x}_{n}) + (1-y_{n})\\log{(1-\\sigma(\\bold{w}^{\\top}\\bold{x}_{n}))} }\n$$\n\nì´ ê³µì‹ì„ Cross Entropyë¥¼ í†µí•´ì„œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\nH_{q}(p) &= - \\sum_{x \\in \\Omega}q(x)\\log_{2}p(x) \\\\\n&= \\sum_{n=1}^{N}{[-y_{n}\\log\\hat{y}_{n} - (1- y_{n})\\log(1-\\hat{y}_{n})]}\n\\end{align*}\n$$\n\nì¦‰, ì—¬ê¸°ì„œ ìš°ë¦¬ê°€ ì–»ì„ ìˆ˜ ìˆëŠ” insightëŠ” Cross EntropyëŠ” sigmoidë¥¼ ì·¨í•œ binary classificationì—ì„œ Squared Errorì™€ ê°™ê³ , ì´ëŸ¬í•œ Cross Entropyë¥¼ Squared Errorê°€ í•  ìˆ˜ ì—†ëŠ” Multiclassì—ëŠ” ì ìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ëŠ” ì ì´ë‹¤. ì™œëƒí•˜ë©´, multiclass classificationì— ì‚¬ìš©ë˜ëŠ” Softmax Functionì„ ì´ìš©í•´ì„œ Sigmoid functionì„ ìœ ë„í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì ì‹œ ê¹Œë¨¹ì—ˆì„ê¹Œë´ Softmax í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ì ëŠ”ë‹¤.\n\n$$\n\\hat{y}_{k} = {{\\exp(\\bold{w}_{k}^{\\top}\\bold{x})}\\over{\\sum_{i=1}^{K}{\\exp(\\bold{w}_{i}^{\\top}\\bold{x})}}}\n$$\n\në”°ë¼ì„œ, Cross Entropy Lossë¥¼ ëŒ€ì…í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ Lossë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n$$\n\\mathcal{L} = \\sum_{n=1}^{N}\\sum_{k=1}^{K}[-y_{k,n}\\log\\hat{y}_{k,n}],\\quad y_{k,n} = p(x_{n} \\in C_{k}| x_{n}) \n$$\n\nì—¬ê¸°ì„œ $y_{k,n}$ì€ one-hot encodingëœ ë°ì´í„°ë¡œ, ì •ë‹µì¸ classë§Œ 1ì´ê³  ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ 0ìœ¼ë¡œ ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ, multiclass classificationì—ì„œëŠ” ìœ„ì™€ ê°™ì€ Lossë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.\n\nì´ ë‘ê°€ì§€ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°€ì§€ Loss Functionì´ ì´ë¯¸ ì¡´ì¬í•œë‹¤. ì˜ˆì „ì— ì ê¹ ì„¤ëª…í–ˆë˜ L1 Lossë¶€í„° ì‹œì‘í•´ì„œ NLLLoss, KLDivLoss ë“±ë“± ì¡´ì¬í•˜ë©°, dataì˜ íŠ¹ì„±ê³¼ outputì˜ í˜•íƒœì— ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ìŠ¤ìŠ¤ë¡œ Loss Functionì„ ìƒˆë¡œ ì •ì˜í•  ìˆ˜ë„ ìˆë‹¤.\n\n\n\n\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- activation function, wikipedia, https://en.wikipedia.org/wiki/Activation_function","slug":"ml-nn","date":"2022-10-20 09:00","title":"[ML] 6. Neural Network","category":"AI","tags":["ML","NeuralNetwork","Perceptron","Backpropagation","CrossEntropyLoss"],"desc":"ìš°ë¦¬ëŠ” Linear Regression, Logistic Regression, SVMì„ ê±°ì¹˜ë©° dataë¡œ ë¶€í„° ìœ ì˜ë¯¸í•œ patternì„ ë°œê²¬í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³´ì•˜ë‹¤. ì´ ê³¼ì •ì€ ìš°ë¦¬ì—ê²Œ ëª…í™•í•œ ì‹ í•˜ë‚˜ë¥¼ ì œì‹œí•˜ì˜€ê³ , ëª¨ë“  ê³¼ì •ì„ ìš°ë¦¬ê°€ ì œì–´í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ë°ì´í„°ë¥¼ ìš°ë¦¬ê°€ ëª¨ë‘ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆëŠ” ê²ƒì¸ì§€ëŠ” ì˜ë¬¸ì´ ë“¤ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ì´í•´í•˜ì§€ëŠ” ëª»í•˜ì§€ë§Œ, ì•Œì•„ì„œ ìµœì ì˜ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œ? ì´ëŸ° ë§ˆë²•ê°™ì€ ì¼ì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ê²ƒì´ Neural Networkì´ë‹¤.  ê²Œ ì•Œì§€ ëª»í•˜ì§€ë§Œ inputì´ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ ì²˜ë¦¬í•´ì„œ outputì„ ì „ë‹¬í•˜ëŠ” ì‹œìŠ¤í…œì„ ìš°ë¦¬ì˜ ì‹ ì²´ì—ì„œ ì°¾ê²Œ ëœë‹¤. ë°”ë¡œ ìš°ë¦¬ ëª¸ì„ ì´ë£¨ëŠ” ì‹ ê²½ë§ì´ë‹¤. ì˜ˆì‹œë¡œ ìš°ë¦¬ëŠ” ëˆˆì„ í†µí•´ ë¹›ì´ë¼ëŠ” inputì„ ë°›ìœ¼ë©´, ìš°ë¦¬ ëˆˆê³¼ ë‡Œì—ì„œ ë¬´ìŠ¨ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ëŠ” ëª¨ë¥´ì§€ë§Œ ê²°ê³¼ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ë¬¼ì²´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. ì´ ê³¼ì •ì„ ì¶”ì¸¡ì˜ ê³¼ì •ì— ë„ì…í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nNLPë¥¼ ìˆ˜í–‰í•  ë•Œ, ìš°ë¦¬ëŠ” sequence of characterë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì œëŒ€ë¡œ ì•Œì•„ì•¼ ì œëŒ€ë¡œ ëœ ì „ì²˜ë¦¬ì™€ í›„ì²˜ë¦¬ ë“±ì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ í•´ë‹¹ chapterì—ì„œëŠ” ì–´ë–»ê²Œ ì›ë³¸ ë¬¸ì/ë‹¨ì–´/ë¬¸ì¥ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ë‹¤ë£° ê²ƒì´ë‹¤.\n\n## Regular Express\n\nì•„ì£¼ ê¸°ë³¸ì ì¸ ë¬¸ìì—´ ì²˜ë¦¬ ë°©ë²•ì´ë‹¤. ì´ë¥¼ ì•Œê³  ìˆì–´ì•¼ ì‹¤ì§ˆì ì¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. í•´ë‹¹ ë‚´ìš©ì€ ë³„ë„ì˜ Postingìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ë‹¤ë£¨ì—ˆë‹¤. ([ğŸ”— Regex](/posts/regex))ë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ì.\n\n## Text Normalization\n\nìš°ë¦¬ê°€ ì‚¬ìš©í•  NLì€ ì •ì œë˜ì–´ ìˆì§€ ì•Šì•„ì„œ ì—¬ëŸ¬ ì „ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. ê·¸ ì¤‘ì—ì„œ ëŒ€ì¤‘ì ìœ¼ë¡œ ì¢‹ë‹¤ê³  ì•Œë ¤ì§„ ë°©ë²•ë“¤ì„ ì‚´í´ë³¼ ê²ƒì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì•„ë˜ ë‹¨ê³„ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n1. Word Tokenization  \n   ë§ ê·¸ëŒ€ë¡œ NL ë°ì´í„°ê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ, ì´ë¥¼ ë‹¨ì–´ ë‹¨ìœ„ë¡œ ìª¼ê°œëŠ” ê²ƒì´ë‹¤.\n2. Word Reformating  \n   ë‹¨ì–´ë¥¼ ë‚˜ëˆ„ì—ˆë‹¤ë©´, ê° ë‹¨ì–´ì˜ í˜•íƒœë¥¼ ì²˜ë¦¬í•˜ê¸° ì‰¬ìš´ í˜•íƒœë¡œ Normalizingí•˜ëŠ” ê²ƒì´ë‹¤.  \n3. Sentence Segmentation  \n   ë¬¸ì¥ ë‹¨ìœ„ë¡œ êµ¬ë¶„í•´ëŠ” ê³¼ì •ì´ë‹¤.\n\nì´ì œ ê° ë‹¨ê³„ë¥¼ ì„¸ë¶€ì ìœ¼ë¡œ ë‹¤ë¤„ë³´ê² ë‹¤.\n\n### 1. Word Tokenization\n\nìš°ì„  ì‰½ê²Œ ìƒê°í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë‹¨ìˆœíˆ ë„ì–´ì“°ê¸°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ê²Œ í•˜ë©´, ìš°ë¦¬ëŠ” ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§„ Corpusì—ì„œ tokenì„ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤. \n\ní•˜ì§€ë§Œ, \"San Francisco\"ì™€ ê°™ì€ ë‹¨ì–´ê°€ ë‘ ê°œì˜ tokenìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•˜ë‚˜ì˜ tokenìœ¼ë¡œ ì²˜ë¦¬ë˜ê¸°ë¥¼ ì›í•  ìˆ˜ ìˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ ì¼ë¶€ ì–¸ì–´ë“¤(íŠ¹íˆ ì¤‘êµ­ì–´ì™€ ì¼ë³¸ì–´)ì˜ ê²½ìš° ë„ì–´ì“°ê¸° ì—†ì´ ì‘ì„±í•˜ëŠ” ì–¸ì–´ë“¤ì˜ ê²½ìš° ë¬¸ì œëŠ” ë” ì»¤ì§ˆ ìˆ˜ ìˆë‹¤. ì´ ê²½ìš°ì—ëŠ” **Word Segmenting**ì´ë¼ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•  ìˆ˜ë„ ìˆëŠ”ë°, ì›ë¦¬ëŠ” ë§¤ìš° ê°„ë‹¨í•˜ë‹¤. ì–¸ì–´ì˜ ëª¨ë“  ë‹¨ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì‚¬ì „ì„ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì¥ì—ì„œ ì‚¬ì „ì— ì¼ì¹˜í•˜ëŠ” ê°€ì¥ ê¸´ ë¬¸ìì—´ì„ ì°¾ì„ ìˆ˜ ìˆì„ ë•Œê¹Œì§€ tokenì„ ì—°ì¥í•´ì„œ ë§Œë“œëŠ” ë°©ì‹ì´ë‹¤.\n\nê·¸ëŸ¬ë‚˜ ì´ ë°©ì‹ë„ ê²°êµ­ì€ íŠ¹ì • ì–¸ì–´(ì¤‘êµ­ì–´, ë“±)ì—ì„œëŠ” ì˜ ì‘ë™í•˜ì§€ë§Œ, ì¼ë¶€ ì–¸ì–´(ì˜ì–´ ë“±)ì—ì„œëŠ” ì˜ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§ë‹¤. ë”°ë¼ì„œ, ìµœê·¼ì—ëŠ” í™•ë¥ ì— ê¸°ë°˜í•˜ì—¬ ê°™ì´ ë“±ì¥í•˜ëŠ” íšŸìˆ˜ê°€ ë§ì„ ê²½ìš° í•˜ë‚˜ì˜ tokenìœ¼ë¡œ ë¬¶ëŠ” í˜•íƒœì˜ tokenizationì„ ë” ì„ í˜¸í•œë‹¤.\n\nì´ ê³¼ì •ì—ì„œ ìš°ë¦¬ê°€ ì¶”ê°€ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ë°”ë¡œ wordì˜ ê°¯ìˆ˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ë‹¤. ëŒ€ê²Œ ìš°ë¦¬ê°€ ê´€ì‹¬ ìˆì–´í•˜ëŠ” ìˆ˜ëŠ” ì´ 3ê°€ì§€ì´ë‹¤.\n\n1. **number of tokens**  \n   ì¦‰, ë„ì–´ì“°ê¸°ë¡œ ë‚˜ë‰˜ì–´ì§€ëŠ” tokenë“¤ì˜ ì´ ê°¯ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.\n2. **number of types(Vocabulary)**  \n   ë„ì–´ì“°ê¸°ë¡œ ë‚˜ë‰˜ì–´ì§„ tokenë“¤ì˜ ì¤‘ë³µì„ ì œê±°í•œ ì¢…ë¥˜ë“¤ì˜ ê°¯ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤. ëŒ€ê²Œ ì´ëŸ¬í•œ typeë“¤ì˜ ëª¨ìŒì„ Vocabularyë¼ê³  í•œë‹¤.\n3. **number of each type's tokens**  \n   ê° ì¢…ë¥˜ì˜ tokenì´ ì–¼ë§ˆë‚˜ ë§ì´ ë“±ì¥í–ˆëŠ”ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.\n\nì—¬ê¸°ì„œ ì´ëŸ¬í•œ tokenì´ë‚˜ typeì´ ì„œë¡œ ê°™ë‚˜ëŠ” ê²ƒì„ ì–´ë–»ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆì„ê¹Œ? ì´ë¥¼ ìœ„í•´ì„œ Word Reformatingì„ ìˆ˜í–‰í•˜ì—¬ ì¢€ ë” ì¼ë°˜ì ì¸ í˜•íƒœë¡œ ë³€í˜•í•˜ì—¬ ìœ„ì˜ ìˆ˜ë“¤ì„ íŒŒì•…í•˜ê¸°ë„ í•œë‹¤.\n\n### 2. Word Normalization and Stemming(Word Reformating)\n\nëŒ€ê²Œì˜ ì–¸ì–´ëŠ” wordì˜ í˜•íƒœê°€ ì—¬ëŸ¬ ê°œë¡œ ì¡´ì¬í•œë‹¤. ì´ ê³¼ì •ì—ì„œ ìš°ë¦¬ê°€ ê³ ë ¤í•´ì•¼ í•  ê²ƒì´ ì •ë§ ë§ë‹¤. ê·¸ ì¤‘ì—ì„œ ê°€ì¥ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì–´ì•¼ í•  ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. í•´ë‹¹ ë‚´ìš©ì€ ì˜ì–´ì— ì¤‘ì‹¬ì„ ë‘” ì„¤ëª…ì´ë‹¤.\n\n1. **Uppercase**  \n   ì˜ì–´ì—ì„œ ì²« ê¸€ìëŠ” ëŒ€ë¬¸ìë¡œ ì‹œì‘í•œë‹¤ëŠ” ê·œì¹™ì´ ìˆë‹¤. ë˜ëŠ” ê°•ì¡°í•˜ê³  ì‹¶ì€ ë‹¨ì–´ë¥¼ ëŒ€ë¬¸ìë¡œ í‘œí˜„í•˜ê¸°ë„ í•œë‹¤. ê·¸ ê²°ê³¼ tokenì˜ ì¢…ë¥˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ê³¼ì •ì—ì„œ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ê¸°ë„ í•œë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ëª¨ë‘ lowercaseë¡œ ë°”ê¿”ë²„ë¦¬ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ëª¨ë“  ê²½ìš°ì— ì´ë¥¼ ì ìš©í•  ìˆ˜ ì‡ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ê°€ì¥ ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ USì™€ usì˜ ì˜ë¯¸ê°€ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤. ë˜, ê³ ìœ  ëª…ì‚¬ì¸ General Motorsì™€ ê°™ì€ ê²½ìš°ë„ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ê³ ë ¤í•´ì„œ ë¨¼ì € ì²˜ë¦¬í•œ ì´í›„ì— ì „ì²´ ë°ì´í„°ë¥¼ lowercaseë¡œ ë³€í™˜í•˜ëŠ” ë°©ì‹ì„ ìˆ˜í–‰í•œë‹¤.  \n2. **Lemmatization**  \n   Lemma(ê¸°ë³¸í˜•, ì‚¬ì „í˜•)ë¡œ ë‹¨ì–´ë¥¼ ë³€í™˜í•˜ëŠ” ê²ƒì´ë‹¤. ê°€ì¥ ê¸°ë³¸ì ì¸ ê²ƒì€ am, are, isì™€ ê°™ì€ beë™ì‚¬ë¥¼ ëª¨ë‘ beë¡œ ë³€í™˜í•˜ê±°ë‚˜ car, cars, car'së¥¼ ëª¨ë‘ ê¸°ë³¸í˜•íƒœì¸ carë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤. ëŒ€ê²Œì˜ ê²½ìš°ì—ëŠ” ì´ ê³¼ì •ì—ì„œ ì˜ë¯¸ë¥¼ ì¼ë¶€ ìƒì–´ë²„ë¦¬ê¸° ë•Œë¬¸ì— lemma + tagë¡œ ê¸°ì¡´ tokenì„ ë³µêµ¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” tagë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.\n3. **Stemming**  \n   morpheme(í˜•íƒœì†Œ)ì€ ì¤‘ì‹¬ ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” stemê³¼ í•µì‹¬ ì˜ë¯¸ëŠ” ì•„ë‹ˆì§€ë§Œ stemì— ì¶”ê°€ ì˜ë¯¸ë¥¼ ë”í•´ì£¼ëŠ” affixesë¡œ ë‚˜ëˆ„ì–´ wordë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ê° tokenì„ ê°€ì¥ coreì˜ ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” stemìœ¼ë¡œ ë‚˜íƒ€ë‚´ëŠ” ë°©ì‹ì´ë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ automate, automatic, automationì„ automatìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” lemmatizationë³´ë‹¤ ë„“ì€ ë²”ìœ„ì˜ wordë¥¼ í•˜ë‚˜ë¡œ ë¬¶ê¸° ë•Œë¬¸ì— ì„¸ë¶€ì˜ë¯¸ê°€ ë” ì†ì‹¤ë  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ê¸°ì¡´ ì˜ë¯¸ë¡œ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” tagë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. \n\n### 3. Sentence Segmentation\n\në¬¸ì¥ì„ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¡œ ìš°ë¦¬ëŠ” \"?\", \"!\", \".\"ì„ í™œìš©í•œë‹¤. \"?\"ì™€ \"!\" ê°™ì€ ê²½ìš°ëŠ” ë¬¸ì¥ì˜ ëì„ ì˜ë¯¸í•˜ëŠ”ê²ƒì´ ëŒ€ê²Œ ìëª…í•˜ë‹¤. í•˜ì§€ë§Œ, \".\"ì€ ê½¤ë‚˜ ì• ë§¤í•  ìˆ˜ ìˆë‹¤. ì†Œìˆ˜ì , Abbreviation(Mr., Dr., Inc.)ì™€ ê°™ì€ ê²½ìš°ì— ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•´ì„œ Decision Treeë¥¼ ë§Œë“¤ì–´ì„œ ì´ë¥¼ ìˆ˜í–‰í•œë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‚¬ëŒì´ ì§ì ‘ ê·œì¹™ì„ ì •í•  ìˆ˜ë„ ìˆì§€ë§Œ í˜„ì¬ëŠ” ëŒ€ê²Œ í†µê³„ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.\n\n![nlp-sentence-segmentation](/images/nlp-sentence-segmentation.jpg)\n\n## Collocation(ì—°ì–´) processing\n\nText Normalizationì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” sentenceë¥¼ êµ¬ë¶„í•˜ê³ , wordë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ, ë‹¨ìˆœíˆ í•˜ë‚˜ì˜ wordë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì£¼ë³€ ë‹¨ì–´ë¥¼ í™œìš©í•˜ì—¬ ì²˜ë¦¬í•´ì•¼ë§Œ ì–»ì„ ìˆ˜ ìˆëŠ” ì •ë³´ë“¤ì´ ìˆë‹¤. ìš°ë¦¬ëŠ” ì´ë¥¼ Collocation(ì—°ì–´)ë¥¼ í™œìš©í•˜ì—¬ ìˆ˜í–‰í•œë‹¤. ì´ëŠ” íŠ¹ì • ë‹¨ì–´ìŒì´ ë†’ì€ ë¹ˆë„ë¡œ ê°™ì´ ë¶™ì–´ ì‚¬ìš©ë˜ëŠ” í˜„ìƒì„ ë§í•œë‹¤. **\"ëª¨ë“  ë‹¨ì–´ëŠ” ì´ë¥¼ ë™ë°˜í•˜ëŠ” ì£¼ë³€ ë‹¨ì–´ì— ì˜í•´ íŠ¹ì„± ì§€ì–´ì§„ë‹¤.\"** ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ collocationì„ co-ocurrenceë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì„ í•  ìˆ˜ ìˆë‹¤.\n\n1. **lexicography(ì‚¬ì „ í¸ì°¬)** : ê°™ê°€ë‹ˆ ìœ ì‚¬í•œ ëœ»ì„ ê°€ì§€ëŠ” ë‹¨ì–´ëŠ” ë¹ˆë²ˆí•˜ê²Œ ë¶™ì–´ì„œ ì‚¬ìš©ë˜ëŠ”ë° ì´ë¥¼ ì´ìš©í•´ì„œ í•˜ë‚˜ì˜ ë‹¨ì–´ì˜ ëœ»ì„ ì•ˆë‹¤ë©´, ì´ë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ ë‹¨ì–´ì˜ ëœ»ì„ ì¶”ë¡ í•˜ë©° í™•ì¥í•´ë‚˜ê°ˆ ìˆ˜ ìˆë‹¤.\n2. **language modeling** : NLë¥¼ í†µí•´ì„œ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•´ì„œ íŠ¹ì • parameterë¥¼ ì¶”ì •í•´ë‚´ëŠ” ê²ƒì„ language modelingì´ë¼ê³  í•˜ëŠ”ë° ì´ ê³¼ì •ì—ì„œ collocationì„ í™œìš©í•˜ëŠ” ê²ƒì´ ë‹¨ì¼ ë‹¨ì–´ë¥¼ í™œìš©í•˜ëŠ” ê²ƒë³´ë‹¤ contextë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì¥ì ì„ ë°œíœ˜í•  ìˆ˜ ìˆë‹¤.\n3. **NL generation** : ìš°ë¦¬ëŠ” ë¬¸ë§¥ìƒ ë§¤ë„ëŸ¬ìš´ ë¬¸ì¥ì„ ì›í•œë‹¤. ì¦‰, \"ê°ì„ ì¡ë‹¤\"ë¥¼ \"ê°ì„ ë¶™ì¡ë‹¤\"ë¼ê³  í–ˆì„ ë•Œ, ëœ»ì„ ì´í•´í•  ìˆ˜ëŠ” ìˆì§€ë§Œ ì–´ìƒ‰í•˜ë‹¤ê³  ëŠë‚€ë‹¤. ë”°ë¼ì„œ, ì´ ê´€ê³„ë¥¼ í™œìš©í•´ì„œ NLì„ ìƒì„±í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— collocationì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, ì´ëŸ¬í•œ Collocationì„ ì–´ë–»ê²Œ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œ?\n\n1. **Frequency**  \n   ê°€ì¥ ê°„ë‹¨í•˜ê²Œ ë‹¨ìˆœíˆ ë™ì‹œ ë°œìƒ ë¹ˆë„ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤. ì •í™•í•œ íŒŒì•…ì„ ìœ„í•´ì„œëŠ” ë¹ˆë²ˆí•˜ê²Œ ë“±ì¥í•˜ëŠ” ì˜ë¯¸ ì—†ëŠ” ë‹¨ì–´ë¥¼ ë¨¼ì € filteringí•  í•„ìš”ê°€ ìˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ a, the, and ë“±ì´ ìˆë‹¤.\n2. **Hypothesis Testing**  \n   ê°€ì„¤ ê²€ì¦ìœ¼ë¡œ ìš°ë¦¬ê°€ ê°€ì •í•œ collocationì„ ì§€ì •í•˜ê³ , ì´ ì‚¬ê±´ì´ ì¼ì–´ë‚  ê°€ëŠ¥ì„±ì„ êµ‰ì¥íˆ ë‚®ê²Œ í•˜ëŠ” ê°€ì„¤ì„ ë°˜ëŒ€ë¡œ ê°€ì •í•œ í›„ì— ì´ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•˜ëŠ” Null Hypothesisë¥¼ ì´ìš©í•œ ì¦ëª…ìœ¼ë¡œ íƒ€ë‹¹ì„±ì„ í™•ë³´í•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ë³´ì´ê³ ì í•˜ëŠ” ê²ƒì€ word1, word2ê°€ ìˆì„ ë•Œ, ë‘ ë‹¨ì–´ê°€ ì„œë¡œ ì˜ì¡´ì ì´ë¼ëŠ” ê²ƒì„ ì¦ëª…í•˜ê³  ì‹¶ì€ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, Null Hypothesisë¡œ ë‘ ë‹¨ì–´ëŠ” ë…ë¦½ì´ë‹¤ë¼ê³  ì§€ì •í•˜ë©´, ìš°ë¦¬ëŠ” ë‹¤ìŒ ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.  \n   $p(w_{1}, w_{2}) = p(w_{1})p(w_{2})$  \n   ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ t-ê²€ì¦ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.  \n   $t = {{p(w_{1}, w_{2}) - p(w_{1})p(w_{2})} \\over \\sqrt{p(w_{1}, w_{2})\\over{N}}} $  \n   tê°’ì´ ì´ì œ ì»¤ì§ˆ ìˆ˜ë¡ ìš°ë¦¬ëŠ” í•´ë‹¹ ê°€ì„¤ì´ í‹€ë ¸ìŒì„ ì¦ëª…í•˜ì—¬ collocationì„ì„ ì£¼ì¥í•  ìˆ˜ ìˆë‹¤.\n\n## Minimum Edit Distance\n\në‹¨ì–´ ë˜ëŠ” ë¬¸ì¥ ê°„ ìœ ì‚¬ë„ë¥¼ ì¸¡ì •í•  ë•Œ, ì‚¬ì „ì„ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆì§€ë§Œ ì°¸ê³ í•  corpusê°€ ë§ˆë•…í•˜ì§€ ì•Šê±°ë‚˜ ë” ì¶”ê°€ì ì¸ ìˆ˜ì¹˜ê°€ í•„ìš”í•˜ë‹¤ë©´, Minimum Edit Distanceë¡œ ìœ ì‚¬ë„ë¥¼ ì¸¡ì •í•˜ê¸°ë„ í•œë‹¤. ì¦‰, ë‘ ë¬¸ìì—´ì´ ê°™ì•„ì§€ê¸° ìœ„í•´ì„œ ì–´ëŠì •ë„ì˜ ìˆ˜ì •ì´ í•„ìš”í•œì§€ë¥¼ ìˆ˜ì¹˜í™”í•œ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ì—°ì‚°ì€ ìƒˆë¡œìš´ ë¬¸ì ì¶”ê°€, ì‚­ì œ, ëŒ€ì²´ë§Œ ê°€ëŠ¥í•˜ë‹¤.\n\n\n```plaintext\nS - N O W Y  | - S N O W - Y\nS U N N - Y  | S U N - - N Y\ndistance : 3 | distance : 5\n```\n\në‹¤ìŒê³¼ ê°™ì´ í‘œí˜„ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n1. ë¬¸ìì—´ x, yê°€ ìˆì„ ë•Œ, $E(i, j)$ëŠ” xì˜ 0\\~iê¹Œì§€ë¥¼ í¬í•¨í•˜ëŠ” ë¬¸ìì—´ê³¼ yì˜ 0~jê¹Œì§€ë¥¼ í¬í•¨í•˜ëŠ” ë¬¸ìì—´ì˜ distanceë¼ê³  í•˜ì. \n2. ì´ë ‡ê²Œ ë˜ë©´, $E(i,j)$ì—ì„œ ìš°ë¦¬ëŠ” ëë¬¸ìì˜ ê·œì¹™ì„ ë³¼ ìˆ˜ ìˆë‹¤.\n    \n    ì˜¤ë¥¸ìª½ ë ë¬¸ìê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì¡°í•©ì€ 3ê°€ì§€ ë°–ì— ì—†ë‹¤.\n    \n    ```plaintext\n    x[i]        | -           | x[i]\n    -           | y[j]        | y[j]\n    distance: 1 | distance: 1 | distance: 0 or 1\n    ```\n    \n3. ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ ì‚¬ì‹¤ì„ ì•Œê²Œ ëœë‹¤.\n    \n    $E(i,j)$ëŠ” ë‹¤ìŒ ê²½ìš°ì˜ ìˆ˜ ì¤‘ í•˜ë‚˜ì—¬ì•¼ë§Œ í•œë‹¤.\n    \n    - $E(i-1, j) + 1$\n    - $E(i, j-1) + 1$\n    - $E(i-1, j-1) + ((x[i] == y[j])\\text{ ? 0 : 1} )$\n4. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì€ ì‹ì„ ìœ ë„í•  ìˆ˜ ìˆë‹¤.\n    \n    $E(i, j) =\\min( \\\\\n      \\quad E(i-1, j) + 1, \\\\\n      \\quad E(i, j-1) + 1,  \\\\\n      \\quad E(i - 1, j-1) + ((x[i] == y[j])\\text{ ? 0 : 1} )\\\\\n    )$\n\në§Œì•½, ê° ì—°ì‚°ì˜ ë¹„ìš©ì´ ë‹¤ë¥¼ ê²½ìš°ë¼ë©´, 1 ëŒ€ì‹ ì— ê·¸ ê°’ì„ ë„£ì–´ì£¼ë©´ ì¶©ë¶„íˆ í’€ ìˆ˜ ìˆìœ¼ë©°, ì¶”ê°€ì ìœ¼ë¡œ ìµœì ì˜ ì´ë™í˜•íƒœë¥¼ ì•Œê³  ì‹¶ë‹¤ë©´, back pointer í•˜ë‚˜ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)","slug":"nlp-text-processing","date":"2022-10-19 21:59","title":"[NLP] 2. Text Processing","category":"AI","tags":["NLP","Regex","Tokenization","Collocation","MinimumEditDistance"],"desc":"NLPë¥¼ ìˆ˜í–‰í•  ë•Œ, ìš°ë¦¬ëŠ” sequence of characterë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì œëŒ€ë¡œ ì•Œì•„ì•¼ ì œëŒ€ë¡œ ëœ ì „ì²˜ë¦¬ì™€ í›„ì²˜ë¦¬ ë“±ì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ í•´ë‹¹ chapterì—ì„œëŠ” ì–´ë–»ê²Œ ì›ë³¸ ë¬¸ì/ë‹¨ì–´/ë¬¸ì¥ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ë‹¤ë£° ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"}],"categorizedPosts":{"Algorithm":[{"content":"\n## Intro\n\nBinary SearchëŠ” ê°€ì¥ ê¸°ë³¸ì ì´ë©´ì„œë„ íš¨ê³¼ì ì¸ íƒìƒ‰ ë°©ë²•ì´ë‹¤. ì´ëŠ” êµ‰ì¥íˆ ë§ì€ ì•Œê³ ë¦¬ì¦˜ì˜ ê¸°ë³¸ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ëœë‹¤. ë”°ë¼ì„œ, Binary Searchë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•  ì¤„ ì•Œì•„ì•¼ í•œë‹¤. ë˜í•œ, ë’¤ì— ë¶€ë¶„ì—ì„œëŠ” ì´ë¥¼ ì´ìš©í•´ì„œ ì¤‘ë³µìˆ˜ë¥¼ ì°¾ì•„ë‚´ëŠ” ì—°ì‚°ì„ ì–´ë–»ê²Œ Binary Searchë¥¼ í†µí•´ì„œ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.\n\n## Binary Search\n\nBinary Searchë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € listë¥¼ ì •ë ¬í•´ì•¼ í•œë‹¤. ê·¸ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, íŠ¹ì • ìˆ˜ë¥¼ ì°¾ê¸° ìœ„í•´ì„œ ìµœëŒ€ list ì „ì²´ë¥¼ íƒìƒ‰í•˜ëŠ” ê²ƒì—ì„œ ë¦¬ìŠ¤íŠ¸ì˜ í¬ê¸°ë¥¼ log ì·¨í•œ ë§Œí¼ ë§Œ ì—°ì‚°í•´ë„ ì¶©ë¶„í•˜ë‹¤.\n\nì¼ë°˜ì ì¸ ì˜ˆì‹œê°€ Up&Down ê²Œì„ì´ë‹¤. ì´ëŠ” íŠ¹ì • ë²”ìœ„ ì•ˆì˜ ìˆ«ìë¥¼ ë§íˆê³ ì í•  ë•Œ ê¸°íšŒë¥¼ ì—¬ëŸ¬ ë²ˆì£¼ê³ , ì‹œë„í•  ë•Œë§ˆë‹¤ ì‹œë„í•œ ê°’ê³¼ ëª©í‘œ ê°’ì„ ë¹„êµí•˜ì—¬ ëª©í‘œê°’ì´ ë” í¬ë©´ Up, ë” ì‘ìœ¼ë©´ Downì„ ì•Œë ¤ì£¼ëŠ” ê²Œì„ì´ë‹¤. ìš°ë¦¬ê°€ ê°’ì„ ë§ì¶”ê³ ìí•  ë•Œë§ˆë‹¤ í•´ë‹¹ ê°’ì— ëŒ€í•œ íŒíŠ¸ê°€ ì£¼ì–´ì§€ê²Œ ë˜ëŠ”ë°, ë§Œì•½ ìš°ë¦¬ê°€ ë§¤ë²ˆ ìˆ˜ì˜ ì¤‘ì•™ ê°’ì„ ë§í•œë‹¤ë©´, ì–»ì„ ìˆ˜ ìˆëŠ” ì •ë³´ì˜ ì§ˆì´ êµ‰ì¥íˆ ë†’ì•„ì§„ë‹¤. ë¬¼ë¡  ë²”ìœ„ê°€ 100ì´ê³  ë§ì¶”ê³ ì í•˜ëŠ” ê°’ì´ 100ì¼ ë•Œ, 99ë¼ê³  ë§í•˜ê³  Upì„ ë“£ëŠ”ë‹¤ë©´ ìµœìƒì˜ ì •ë³´ë¥¼ ì–»ê²Œ ë˜ëŠ” ê²ƒì´ì§€ë§Œ, ë§Œì•½ Downì´ë¼ë©´, ë°›ì„ ìˆ˜ ìˆëŠ” ì •ë³´ì˜ ì§ˆì´ êµ‰ì¥íˆ ë–¨ì–´ì§„ë‹¤. ì™œëƒí•˜ë©´ ë‚´ê°€ í•´ë‹¹ ìˆ˜ë¥¼ ì™¸ì¹¨ìœ¼ë¡œì¨ ë‹¤ìŒ ì‹œë„ì—ì„œ ì œì™¸í•  ìˆ˜ ìˆëŠ” ìˆ˜ëŠ” 2ê°œ ë°–ì— ì—†ê¸° ë•Œë¬¸ì´ë‹¤.\n\nê²°êµ­ ìš°ë¦¬ëŠ” íŠ¹ì • ìˆ˜ë¥¼ ë§ì¶”ì§€ ëª»í–ˆì„ ê²½ìš°, ê³ ê¸‰ ì •ë³´ë¥¼ ì–»ì–´ ë‹¤ìŒ ë„ì „ì„ í•  ìˆ˜ë„ ìˆê³ , ì•ˆì¢‹ì€ ì •ë³´ë¥¼ ì–»ì–´ ë‹¤ìŒ ë„ì „ì— ë„ì›€ì´ ëœ ë  ìˆ˜ë„ ìˆë‹¤. ì¦‰, ìš°ë¦¬ê°€ ë§ì¶”ì–´ì•¼ í•  ìˆ˜ê°€ í•˜ë‚˜ë¼ë©´, ìœ„ì™€ ê°™ì€ ìš”í–‰ì— ê¸°ëŒ€ì–´ ë„ì „í•˜ëŠ” ê²ƒë„ ë‚˜ì˜ì§€ ì•Šì€ ì„ íƒì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ì–´, 2ì˜ ë°°ìˆ˜ ìˆœìœ¼ë¡œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ë‹¤.\n\ní•˜ì§€ë§Œ, ìš°ë¦¬ê°€ í•´ë‹¹ ê²Œì„ì„ ì—¬ëŸ¬ ë²ˆ ì§„í–‰í•  ê²ƒì´ê³ , ë²”ìœ„ê°€ ë„“ì–´ì§ˆ ê²½ìš° ì§ˆì´ ì•ˆì¢‹ì€ ì •ë³´ë¥¼ ì–»ì—ˆì„ ê²½ìš°ì˜ Riskê°€ ë„ˆë¬´ í´ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì–´ë–¤ ìˆ«ìê°€ ë“¤ì–´ì˜¤ë”ë¼ë„ **í™•ì •ì ìœ¼ë¡œ ì—°ì‚° íšŸìˆ˜ë¥¼ ì¤„ì´ê¸°ë¥¼ ê¸°ëŒ€í•  ê²ƒ**ì´ë‹¤. ê·¸ ë°©ë²•ì´ í•­ìƒ ë²”ìœ„ì˜ ì¤‘ì•™ê°’ì„ ì„ íƒí•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì–´ë–¤ ìˆ˜ê°€ ëª©í‘œì´ë”ë¼ë„ ìš°ë¦¬ëŠ” ì„ íƒì§€ë¥¼ ë§¤ë²ˆ ë°˜ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ê²°ë¡ ìƒ ì¤‘ì•™ê°’ ì„ íƒì„ k ë²ˆí–ˆì„ ë•Œ, ì‚¬ì‹¤ìƒ $2^{n-1} + 2^{n-2} + ... + 2^{n-k}$ = $2^{n}(1-{1\\over{2^k}})$ = $\\text{ì „ì²´} \\times (1 - {1 \\over {2^k}})$ê°œë¥¼ ì¡°íšŒí•œ ê²ƒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ë³´ëŠ” ê²ƒì´ë‹¤. ì´ íš¨ê³¼ë¥¼ ë³¸ ê²°ê³¼ ìš°ë¦¬ê°€ Kë²ˆ ì‹œë„ í›„ì— ì •ë‹µì¼ ê°€ëŠ¥ì„±ì´ ìˆëŠ” ìˆ˜ë¥¼ ë‚˜ì—´í•´ë³´ë¼ê³  í•œë‹¤ë©´, í•´ë‹¹ ìˆ˜ëŠ” $\\lfloor{\\text{ì „ì²´} \\over {2^k}}\\rfloor$ ê°œë§Œ ë‚¨ì•„ìˆê²Œ ëœë‹¤. ê²°ê³¼ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” $\\lfloor{\\text{ì „ì²´} \\over {2^k}}\\rfloor = 0$ì´ ë˜ëŠ” kë²ˆë§Œ ìˆ˜í–‰í•˜ë©´, ì–´ë–¤ ìˆ˜ê°€ ë“¤ì–´ì˜¤ë”ë¼ë„ ëª©í‘œê°’ì„ í™•ì •ì ìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\nì´ì§„ íƒìƒ‰ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” **ê²°êµ­ ì¤‘ì•™ê°’ì„ ë¹ ë¥´ê²Œ ì°¾ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.** ë”°ë¼ì„œ, ì •ë ¬ì´ ì¤‘ìš”í•œ ê²ƒì´ë‹¤. ì •ë ¬ì„ í•˜ê²Œ ë˜ë©´, ì¤‘ì•™ê°’ì„ ë‹¨ìˆœíˆ ì „ì²´ í¬ê¸°ì˜ ë°˜ì— ìœ„ì¹˜í•œ ê°’ìœ¼ë¡œ ì°¾ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ ì—°ì‚°ì´ ë§¤ìš° ê°„ë‹¨í•´ì§„ë‹¤.\n\nì´ë¥¼ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n```python\ndef binary_search(arr, target):\n  start = 0\n  end = len(arr)\n  # endëŠ” ì´ë¯¸ ë´¤ê±°ë‚˜ ë°°ì—´ë²”ìœ„ì˜ ë°–ì´ë‹¤.\n  while end > start:\n    mid = (start + end) // 2\n    if arr[mid] > target:\n      end = mid\n    elif arr[mid] < target:\n      start = mid + 1\n    else:\n      return mid\n  return len(arr)\n\nA = [1,2,3,4,5,6,7,8]\nB = [1,3,5,7,10,15,50]\nC = [1,3,-7,-4,-1,-5]\n\nbinary_search(A, 3) # 2 \nbinary_search(B, 5) # 2\nbinary_search(B, 14) # ëª»ì°¾ì•„ì„œ, ë°°ì—´ì˜ í¬ê¸°(7)ì„ return\nbinary_search(C, 3) # ëª»ì°¾ê³ , ë°°ì—´ì˜ í¬ê¸°(6)ë¥¼ return\nbinary_search(sorted(C), 3) # 5\n```\n\në‹¤ë¥¸ ì–¸ì–´ì—ì„œëŠ” -1ì„ returní•˜ëŠ” ê²½ìš°ë„ ìˆì§€ë§Œ, pythonì—ì„œëŠ” -1ì„ indexë¡œ ì°¾ì„ë ¤ê³  í•´ë„ compile ì˜¤ë¥˜ê°€ ì•ˆë‚˜ê¸° ë•Œë¬¸ì— ë°°ì—´ì˜ í¬ê¸°ë¥¼ returní•˜ì—¬ compile ì—ëŸ¬ë¥¼ ë§Œë“œëŠ”ê²Œ ë‚«ë‹¤.\n\n## Lower Bound / Upper Bound\n\nì´ë¶„íƒìƒ‰ì˜ ì‘ìš©ìœ¼ë¡œ ë‚˜ì˜¤ëŠ” ê²ƒì´ í•˜í•œì„ (Lower Bound)ê³¼ ìƒí•œì„ (Upper Bound)ì´ë‹¤. Lower BoundëŠ” íŠ¹ì • ìˆ˜ ì´ìƒì˜ ê°’ì´ ì²˜ìŒ ë‚˜ì˜¤ëŠ” indexë¥¼ ì˜ë¯¸í•˜ê³ , Upper BoundëŠ” íŠ¹ì • ìˆ˜ë¥¼ ì´ˆê³¼í•˜ëŠ” ê°’ì´ ì²˜ìŒ ë‚˜ì˜¤ëŠ” indexë¥¼ ì˜ë¯¸í•œë‹¤.\n\nì´ë“¤ì„ ì°¾ëŠ” ê³¼ì •ì´ ì´ë¶„ íƒìƒ‰ê³¼ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤.\n\n```python\ndef lower_bound(arr, target):\n  start = 0\n  end = len(arr)\n  while end > start:\n    mid = (start+end) // 2\n    if arr[mid] < target:\n      start = mid + 1\n    else:\n      end = mid\n  return end\n\ndef upper_bound(arr, target):\n  start = 0\n  end = len(arr)\n  while end > start:\n    mid = (start + end) // 2\n    if arr[mid] <= target:\n      start = mid + 1\n    else:\n      end = mid\n  return end\n```\n\n## ì¤‘ë³µìˆ˜ì˜ ê°¯ìˆ˜\n\nìš°ë¦¬ê°€ ì¤‘ë³µìˆ˜ë¥¼ ì…€ ë•Œ ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ?\n\n1. ì•ì—ì„œ ë¶€í„° ì°¾ì•„ë‚˜ê°„ë‹¤. $O(N)$\n2. íŠ¹ì • ìˆ˜ë¥¼ ì°¾ê³ , ì¢Œìš° ê°’ì„ ì°¾ëŠ”ë‹¤. $O(N)$\n3. í•´ë‹¹ ìˆ˜ ì´ìƒì´ ì²˜ìŒ ë‚˜ì˜¤ëŠ” ìœ„ì¹˜ë¥¼ ì°¾ê³ , í•´ë‹¹ ìˆ˜ë¥¼ ì´ˆê³¼í•œ ê°’ì´ ì²˜ìŒ ë‚˜ì˜¤ëŠ” ìœ„ì¹˜ë¥¼ ì°¾ëŠ”ë‹¤. $(O(\\log{N}))$\n\nê·¹ë‹¨ì ì¸ ì˜ˆì‹œë¡œ 0ì´ ì—°ì†ìœ¼ë¡œ 1ì¡°ê°œ ì´ìƒ ìˆëŠ” listì—ì„œ 0ì˜ ì¤‘ë³µ íšŸìˆ˜ë¥¼ ì…€ë ¤ë©´ 100ì–µë²ˆì˜ ì—°ì‚°ì´ í•„ìš”í•˜ë‹¤. í•˜ì§€ë§Œ, 3ë²ˆ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´, $2^{40} \\ge \\text{1ì¡°}$ì´ë¯€ë¡œ ì´ 80íšŒ ì •ë„ì˜ ì—°ì‚°ìœ¼ë¡œ ì„±ê³µì ì¸ ì—°ì‚°ì´ ê°€ëŠ¥í•˜ë‹¤.\n\ní•˜ì§€ë§Œ, ìœ ì˜í•  ê²ƒì€ lower_boundê°€ í•´ë‹¹ ê°’ì„ ì‹¤ì œë¡œ ì°¾ì•˜ëŠ”ê°€ì´ë‹¤. ë”°ë¼ì„œ, lower_boundë¥¼ í†µí•´ì„œ ì–»ì€ indexê°€ ì‹¤ì œë¡œ í•´ë‹¹ ëª©í‘œê°’ì´ ë§ëŠ”ì§€ë¥¼ ë°˜ë“œì‹œ í™•ì¸í•˜ì.\n(ì™œëƒí•˜ë©´, returnê°’ì´ 0ì¸ ê²½ìš°, ì°¾ì•˜ì„ ìˆ˜ë„ ìˆê³ , ëª»ì°¾ì•˜ì„ ìˆ˜ë„ ìˆë‹¤.)\n\n```python\ndef get_dup_cnt(arr, target):\n  lb = lower_bound(arr, target)\n  if lb < len(arr) and arr[lb] == target:\n    return lb - upper_bound(arr, target)\n  return 0\n```\n","slug":"binary-search","date":"2022-05-02 15:34","title":"Binary Search","category":"Algorithm","tags":["Binary Search","Upper Bound","Lower Bound","ì¤‘ë³µ ìˆ˜ì˜ ê°¯ìˆ˜"],"desc":"Binary SearchëŠ” ê°€ì¥ ê¸°ë³¸ì ì´ë©´ì„œë„ íš¨ê³¼ì ì¸ íƒìƒ‰ ë°©ë²•ì´ë‹¤. ì´ëŠ” êµ‰ì¥íˆ ë§ì€ ì•Œê³ ë¦¬ì¦˜ì˜ ê¸°ë³¸ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ëœë‹¤. ë”°ë¼ì„œ, Binary Searchë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•  ì¤„ ì•Œì•„ì•¼ í•œë‹¤. ë˜í•œ, ë’¤ì— ë¶€ë¶„ì—ì„œëŠ” ì´ë¥¼ ì´ìš©í•´ì„œ ì¤‘ë³µìˆ˜ë¥¼ ì°¾ì•„ë‚´ëŠ” ì—°ì‚°ì„ ì–´ë–»ê²Œ Binary Searchë¥¼ í†µí•´ì„œ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nìš°ë¦¬ê°€ ì•Œê³ ë¦¬ì¦˜ì„ ìƒê°í•  ë•Œ, ê°€ì¥ ë¨¼ì € ë– ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ë°©ë²• ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ê°€ì¥ ê¸°ë³¸ì ì¸ ì•Œê³ ë¦¬ì¦˜ì´ê¸° ë•Œë¬¸ì—, êµ³ì´ ì„¤ëª…ì„ í•˜ì§€ ì•Šì•„ë„ ìì—°ìŠ¤ëŸ½ê²Œ ì±„ë“í•˜ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì´ì§€ë§Œ, ì‚¬ê³ ì˜ í‹€ì„ ì •í•˜ì—¬ ë” ë¹ ë¥´ê²Œ ë‹µì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nBrute Forceë¥¼ ì§ì ‘ì ìœ¼ë¡œ ë²ˆì—­í•˜ë©´, ì´ëŠ” \"ë¬´ì°¨ë³„Â  ëŒ€ì…\"ì •ë„ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì—¬ëŸ¬ ê°€ì§€ì˜ ê²½ìš°ì˜ ìˆ˜ì—ì„œ ìµœì ì˜ ë‹µì´ í•œ ê°œ ì´ìƒ ì¡´ì¬í•  ë•Œ, ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ í•˜ë‚˜í•˜ë‚˜ ëŒ€ì…í•´ë³´ë©´ì„œ, ì •ë‹µì´ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì¦‰, ê°€ëŠ¥í•œ ëª¨ë“  ê²½ìš°ë¥¼ ë§Œë“¤ê³ , ê·¸ í›„ì— ì´ê²ƒì´ ì •ë‹µì¸ì§€ë¥¼ ê³„ì†í•´ì„œ í™•ì¸í•˜ëŠ” ê³¼ì •ì´ ì•Œê³ ë¦¬ì¦˜ì˜ í•µì‹¬ì…ë‹ˆë‹¤.\n\nê°€ì¥ í”í•œ ì˜ˆì‹œê°€ í•´ì»¤ë“¤ì´ íŠ¹ì • ìœ ì €ì˜ passwordë¥¼ ì•Œì•„ë‚´ê¸° ìœ„í•´ì„œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ëŒ€ì…í•˜ì—¬ í™•ì¸í•˜ëŠ” ê²ƒì´ ìˆìŠµë‹ˆë‹¤.\n\n## í•´ê²° ë°©ë²•\n\nì´ ì•Œê³ ë¦¬ì¦˜ì˜ êµ¬í˜„ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n1. ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ í—¤ì•„ë¦°ë‹¤.\n2. í•˜ë‚˜ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ ê°–ê³  í•˜ëŠ” ì—°ì‚°ì˜ íšŸìˆ˜ë¥¼ í—¤ì•„ë¦°ë‹¤.\n3. í•´ë‹¹ ì•Œê³ ë¦¬ì¦˜ì´ ì‹œê°„ ë‚´ì— ì‘ë™í•  ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•œë‹¤.  \n    ëŒ€ê²Œ, 1ì´ˆë™ì•ˆ í•  ìˆ˜ ìˆëŠ” ì—°ì‚°ì€ ëŒ€ëµ 1ì–µíšŒë¼ê³  ê°€ì •í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤.\n4. ì•Œê³ ë¦¬ì¦˜ì„ ì§ì ‘ êµ¬í˜„í•œë‹¤.\n\n## ëŒ€í‘œ ì˜ˆì‹œ\n\nëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ í™•ì¸í•˜ëŠ” ë¬¸ì œê°€ êµ‰ì¥íˆ ë§ê¸° ë•Œë¬¸ì—, ìˆœì—´/ì¡°í•©/ë¶€ë¶„ì§‘í•© ë¬¸ì œê°€ êµ‰ì¥íˆ ë§ìŠµë‹ˆë‹¤. ê³ ë“±í•™êµ ì‹œì ˆ C, Pë¡œ ê²½ìš°ì˜ ìˆ˜ë¥¼ í‘¸ëŠ” ë¬¸ì œë¥¼ êµ‰ì¥íˆ ë§ì´ í’€ì—ˆë‹¤ë©´, ì•„ë§ˆ ì‰½ê²Œ í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\nì¼ë‹¨ ìˆœì—´ ì¡°í•©ì„ ê°€ì¥ íš¨ìœ¨ì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ, ì¼ë‹¨ ì •ë¦¬ë¥¼ í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n### 1\\. ìˆœì—´(Permutation)\n\n```python\ndef permutation_helper(k, arr=[], prev=[]):\n    if len(prev) == k:\n        return [prev]\n    ss = []\n    for idx in range(len(arr)):\n        ss += permutation_helper(k, arr[:idx] + arr[idx+1:], prev + [arr[idx]])\n    return ss\n\n\ndef permutation(n, k):\n    arr = [i for i in range(1, n+1)]\n    return permutation_helper(k, arr, [])\n    \nprint(permutation(5, 2))\nprint(permutation_helper(2, [1,2,3,4,5], []))\n```\n\n### 2\\. ì¡°í•©(Combination)\n\n```python\ndef combination_helper(k, arr=[], prev=[]):\n    if len(prev) == k:\n        return [prev]\n    ss = []\n    for idx in range(len(arr)):\n        ss += combination_helper(k, arr[idx+1:], prev + [arr[idx]])\n    return ss\n\n\ndef combination(n, k):\n    arr = [i for i in range(1, n+1)]\n    return combination_helper(k, arr, [])\n\nprint(combination(5, 2))\nprint(combination_helper(2, [1,2,3,4,5], []))\n```\n\n### 3\\. ë¶€ë¶„ì§‘í•©(Subset)\n\n```python\ndef subset_helper(k, arr=[], prev=[]):\n    if len(prev) == k:\n        return []\n    ss = []\n    for idx in range(len(arr)):\n        ss.append(prev + [arr[idx]])\n        ss += subset_helper(k, arr[idx+1:], prev + [arr[idx]])\n    return ss\n\n\ndef subset(n, k):\n    arr = [i for i in range(1, n+1)]\n    return subset_helper(k, arr, [])\n\nprint(subset(5, 2))\nprint(subset_helper(2, [1,2,3,4,5], []))\n```\n","slug":"brute-force","date":"2022-04-14 13:51","title":"Brute Force","category":"Algorithm","tags":["BruteForce","ìˆœì—´","ì¡°í•©","ë¶€ë¶„ ì§‘í•©"],"desc":"ìš°ë¦¬ê°€ ì•Œê³ ë¦¬ì¦˜ì„ ìƒê°í•  ë•Œ, ê°€ì¥ ë¨¼ì € ë– ì˜¬ë¦´ ìˆ˜ ìˆëŠ” ë°©ë²• ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ê°€ì¥ ê¸°ë³¸ì ì¸ ì•Œê³ ë¦¬ì¦˜ì´ê¸° ë•Œë¬¸ì—, êµ³ì´ ì„¤ëª…ì„ í•˜ì§€ ì•Šì•„ë„ ìì—°ìŠ¤ëŸ½ê²Œ ì±„ë“í•˜ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì´ì§€ë§Œ, ì‚¬ê³ ì˜ í‹€ì„ ì •í•˜ì—¬ ë” ë¹ ë¥´ê²Œ ë‹µì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.Brute Forceë¥¼ ì§ì ‘ì ìœ¼ë¡œ ë²ˆì—­í•˜ë©´, ì´ëŠ” \"ë¬´ì°¨ë³„Â  ëŒ€ì…\"ì •ë„ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ì—¬ëŸ¬ ê°€ì§€ì˜ ê²½ìš°ì˜ ìˆ˜ì—ì„œ ìµœì ì˜ ë‹µì´ í•œ ê°œ ì´ìƒ ì¡´ì¬í•  ë•Œ, ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ í•˜ë‚˜í•˜ë‚˜ ëŒ€ì…í•´ë³´ë©´ì„œ, ì •ë‹µì´ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì¦‰, ê°€ëŠ¥í•œ ëª¨ë“  ê²½ìš°ë¥¼ ë§Œë“¤ê³ , ê·¸ í›„ì— ì´ê²ƒì´ ì •ë‹µì¸ì§€ë¥¼ ê³„ì†í•´ì„œ í™•ì¸í•˜ëŠ” ê³¼ì •ì´ ì•Œê³ ë¦¬ì¦˜ì˜ í•µì‹¬ì…ë‹ˆë‹¤.ê°€ì¥ í”í•œ ì˜ˆì‹œê°€ í•´ì»¤ë“¤ì´ íŠ¹ì • ìœ ì €ì˜ passwordë¥¼ ì•Œì•„ë‚´ê¸° ìœ„í•´ì„œ ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ ëŒ€ì…í•˜ì—¬ í™•ì¸í•˜ëŠ” ê²ƒì´ ìˆìŠµë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nGraphì˜ íƒìƒ‰ì—ì„œ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. í•œ ì ì—ì„œ ì—°ê²°ëœ ë‹¤ë¥¸ ì ìœ¼ë¡œ ì´ë™ì„ í•˜ë©´ì„œ, ëª¨ë“  ì—°ê²°ëœ ì ì„ ìˆœí™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ê°€ì§„ë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤. ì´ë•Œ, ì •ì ì„ ê³ ë¥´ëŠ” ë°©ì‹ì— ë”°ë¼ì„œ, DFS, BFSë¡œ ë‚˜ëˆ•ë‹ˆë‹¤. DFSì—ì„œëŠ” ìì‹ ê³¼ ì—°ê²°ëœ ì •ì  ì¤‘ì—ì„œ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê³  ì´ë™í•œ ë’¤ì— í•´ë‹¹ ì ì—ì„œ ë‹¤ì‹œ ì—°ê²°ëœ ì§€ì ì„ ì°¾ì•„ì„œ ì´ë™í•©ë‹ˆë‹¤. ì¦‰, ë°”ë¡œ ì§€ê¸ˆ ë½‘ì€ ì ì— ì¸ì ‘í•´ìˆëŠ” ì§€ì ì´ ì´ì „ì— ì¸ì ‘í•´ìˆë˜ ì§€ì ë³´ë‹¤ ê°€ì¤‘ì¹˜ê°€ ë†’ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ëª¨ë‘ ì§„í–‰í•˜ê³ ë„ ë‹µì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ë©´, ì´ì œ ì´ì „ ì‹œì ìœ¼ë¡œ ëŒì•„ì™€ì„œ ë‹¤ì‹œ ì‘ì—…ì„ ì¬ê°œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n## DFS(Depth First Search)\n\nì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” `Stack`ì´ ê°€ì¥ ì¤‘ìš”í•©ë‹ˆë‹¤. ì´ì „ì˜ ì—°ê²°ë˜ì—ˆë˜ ì ë³´ë‹¤ í˜„ì¬ ì—°ê²°ëœ ì ì´ ë” ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì—, í˜„ì¬ê°€ ìš°ì„ ìˆœìœ„ê°€ ë†’ì§€ë§Œ, í›„ì— ì´ë¥¼ ë‹¤ì‹œ ì°¾ì•„ì™€ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•œ ìë£Œêµ¬ì¡°ê°€ í•„ìš”í•œë° ì´ê²ƒì´ `Stack`ì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ì´ë¥¼ ì§ì ‘ êµ¬í˜„í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n```python\nadj = [\n  [2,3],\n  [3],\n  [0,3],\n  [0,1,2]\n]\n\nvisited = [False] * 4\nstack = [(0, visited)]\nwhile len(stack) > 0:\n  cur, visited = stack.pop(-1)\n  visited[cur] = True\n  for next in adj[cur]:\n    if visited[next] === False:\n      stack.append((next, visited))\n```\n\në˜ëŠ”, Recursive Call(í•¨ìˆ˜ì˜ ì¬ê·€ í˜¸ì¶œ)ì„ í†µí•´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¬ê·€ í˜¸ì¶œì„ í†µí•œ êµ¬í˜„ì´ ë” ì¼ë°˜ì ì´ë©°, ì´í•´í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì™œëƒí•˜ë©´, í•¨ìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ `stack` í˜•ì‹ìœ¼ë¡œ í˜¸ì¶œí•œ í•¨ìˆ˜ë“¤ì„ ìŒ“ì•„ë‘ê¸° ë•Œë¬¸ì—, ë” ì›í™œí•œ êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n```python\nadj = [\n  [2,3],\n  [3],\n  [0,3],\n  [0,1,2]\n]\n\ndef dfs(cur, visited):\n  visited[cur] = True\n  for next in adj[cur]:\n    if visited[next] === False:\n      dfs(next, visited)\n\ndfs(0, [-1] * 4)\n```\n\nì¶”ê°€ì ìœ¼ë¡œ ë§Œì•½ ìˆœíšŒí•´ì•¼ í•˜ëŠ” ê·¸ë˜í”„ê°€ í™•ì‹¤í•˜ê²Œ ëª¨ë‘ ì—°ê²°ëœ ê·¸ë˜í”„ê°€ ì•„ë‹ˆë¼ë©´(ì¤‘ê°„ì— ê°„ì„ ì´ ëŠê²¨ ì—°ê²°ì´ ë˜ì§€ ì•ŠëŠ” ì •ì ì´ ì¡´ì¬í•˜ëŠ” ê²½ìš°), ìš°ë¦¬ëŠ” ëª¨ë“  ì •ì ì—ì„œ `dfs`ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ì •ì„ í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì•¼ë§Œ ì „ì²´ ì ì„ ìˆœí™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```python\nadj = [\n  [2,3],\n  [3],\n  [0,3],\n  [0,1,2]\n\n]\n\ndef dfs(cur):\n  visited[cur] = True\n  for next in adj[cur]:\n    if visited[next] === False:\n      dfs(next)\n\ndef dfsAll():\n  visited = [False] * len(adj)\n  for v in range(len(adj)):\n    if not visited[v]:\n      dfs(v)\n  \n```\n\n### ì‹œê°„ë³µì¡ë„\n\nì¼ë°˜ì ìœ¼ë¡œ ëª¨ë“  ë…¸ë“œë¥¼ ìˆœí™˜í•˜ëŠ” ê²ƒì´ ëª©í‘œë¼ë©´,\n\n- ì¸ì ‘ ë¦¬ìŠ¤íŠ¸ : $O(|V| + |E|)$\n- ì¸ì ‘ í–‰ë ¬ : $O(V^2)$\n\n### Example\n\n> **ì—°ê²°ëœ ë¶€ë¶„ì§‘í•© ê°¯ìˆ˜**\n\ndisjoint setì„ í†µí•´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” ë¬¸ì œì´ì§€ë§Œ, DFSë¥¼ í†µí•´ì„œ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ, ì• ì„œ ë³´ì•˜ë˜ `dfsAll`ì—ì„œ `dfs`ì˜ í˜¸ì¶œ íšŸìˆ˜ë¥¼ countingí•˜ë©´ ê°’ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```python\n# adj = [[...], [...], ...]\n# visited = [False, False, ..]\n\ndef dfs(cur):\n  visited[cur] = True\n  for next in adj[cur]:\n    if not visited[next]:\n      dfs(next)\n\ndef dfsAll():\n  visited = [False] * len(adj)\n  cnt = 0\n  for v in range(len(adj)):\n    if not visited[v]:\n      cnt += 1\n      dfs(v)\n  return cnt\n```\n\n---\n\n> **ìœ„ìƒì •ë ¬**\n\nìœ„ìƒ ì •ë ¬ì´ë€ directed edge(ìœ í–¥ ê°„ì„ )ë¡œ ì´ë£¨ì–´ì§„ ê·¸ë˜í”„ë¥¼ ê·œì¹™ì„ ê¹¨ì§€ ì•Šìœ¼ë©´ì„œ ì •ë ¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ê°„ì„ ì´ ì—†ëŠ” ê²½ìš°ì—ëŠ” ìˆœì„œê°€ ìƒê´€ì—†ì§€ë§Œ, ê°„ì„ ì´ ìˆëŠ” ê²½ìš°ì—ëŠ” ìˆœìœ„ê°€ ìˆëŠ” í˜•íƒœì…ë‹ˆë‹¤. (ìš°ì„ ìˆœìœ„ : ì¶œë°œì  < ë„ì°©ì )\nì–¸ëœ» ë³´ê¸°ì—ëŠ” ì–´ë ¤ì›Œ ë³´ì´ì§€ë§Œ, DFSë¥¼ í†µí•´ì„œ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. DFSë¥¼ ì‹¤í–‰í•˜ë©´ì„œ ëì— ì§€ì ì—ì„œ ë¶€í„° ë°°ì—´ì— ì €ì¥í•˜ê³  ì´ë¥¼ ì—­ìˆœìœ¼ë¡œ ì •ë ¬í•˜ë©´ ìœ„ìƒì •ë ¬ì´ ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```python\n# adj = [[...], [...], ...]\n# visited = [False, False, ..]\n\norder = []\n\ndef dfs(cur):\n  visited[cur] = True\n  for next in adj[cur]:\n    if not visited[next]:\n      dfs(next)\n  order.append(cur)\n\ndef dfsAll():\n  visited = [False] * len(adj)\n  order = []\n  for v in range(len(adj)):\n    if not visited[v]:\n      dfs(v)\n\nprint(order[::-1])\n```\n\n> **ì˜¤ì¼ëŸ¬ ì„œí‚·(í•œ ë¶“ ê·¸ë¦¬ê¸°)**\n\nì‹œì‘ ì ê³¼ ë ì ì´ ë™ì¼í•  ë•Œ, ëª¨ë“  ê²½ë¡œë¥¼ ì§€ë‚˜ëŠ” ê¸¸ì°¾ê¸°ì…ë‹ˆë‹¤.\nì´ë¥¼ í•´ê²°í•  ë•Œì—ëŠ” ìš°ì„  ë‹¤ìŒ ì¡°ê±´ì„ ë¨¼ì € í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n\n- ë‘ ê°œ ì´ìƒì˜ Componentë¡œ ë¶„ë¦¬ëœ ê²½ìš° ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n- ì–´ëŠ í•œ ì ì´ë¼ë„ ì°¨ìˆ˜ê°€ í™€ìˆ˜ì´ë©´, ë§Œë“¤ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\ní•´ê²°ì±…ì€ ê°„ë‹¨í•©ë‹ˆë‹¤. ë°˜ë³µì ìœ¼ë¡œ Circuit(ìˆœí™˜)ì„ ì°¾ì•„ì„œ, ìµœì¢… êµ¬ì¡°ë¡œ ì™„ì„±í•˜ë©´ ë©ë‹ˆë‹¤.\n\në‹¤ìŒì´ ê¸°ë³¸ì ì¸ í”„ë¡œì„¸ìŠ¤ì…ë‹ˆë‹¤.\n\n1. ë¨¼ì € ìì‹ ìœ¼ë¡œ ì‹œì‘í•´ì„œ ìì‹ ìœ¼ë¡œ ëŒì•„ì˜¤ëŠ” ìˆœí™˜ì„ ë¨¼ì € ì°¾ëŠ”ë‹¤.\n2. ìœ„ì˜ ê³¼ì •ì„ ì§„í–‰í•˜ê³ ë„, ì•„ì§ ì§€ë‚˜ì§€ ì•Šì€ ê°„ì„ ì„ í¬í•¨í•œ ì •ì ì´ ìˆë‹¤ë©´, ì´ë¥¼ ì‹œì‘ì ìœ¼ë¡œ í•˜ì—¬ ë‹¤ì‹œ ìˆœí™˜ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ì •ì ì´ ì—†ì„ ë•Œê¹Œì§€ ì´ë¥¼ ë°˜ë³µí•´ì„œ ì‹œí–‰í•œë‹¤.\n3. ì´ë¥¼ ìµœì´ˆì˜ ìˆœí™˜ì— ë¶™ì—¬ë‚˜ê°€ë©´ì„œ, ìµœì¢…ìœ¼ë¡œ ì˜¤ì¼ëŸ¬ ì„œí‚·ì„ ì™„ì„±í•œë‹¤.\n\n1ë²ˆê³¼ 2ë²ˆ ê³¼ì •ì—ì„œ ë§Œì•½, ìˆœí™˜ì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ë©´ ì˜¤ì¼ëŸ¬ ì„œí‚·ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²°ë¡ ì„ ë‚´ë¦¬ê³  processë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.\n\n```python\n# adj = [[...],[...],...] (ì¸ì ‘í–‰ë ¬) - ë™ì¼ ê°„ì„ ì´ ì—¬ëŸ¬ ê°œ ìˆì„ ìˆ˜ë„ ìˆìŒ\ndef eulerCircuit(cur, circuit):\n  for next in range(len(adj)):\n    if adj[cur][next] > 0:\n      adj[cur][next] -= 1\n      adj[next][cur] -= 1\n      eulerCircuit(next, circuit)\n  circuit.push_back(cur)   \n```\n\n**ë§Œì•½,** ì‹œì‘ì ê³¼ ëì ì´ ë‹¤ë¥¸ EulerTrailì¼ ê²½ìš°ì—ëŠ” ì„ì˜ë¡œ ì‹œì‘ì ê³¼ ëì ì„ ì‡ê³ , Euler Circuitì„ ì°¾ì€ ë’¤ì— ì‚­ì œí•˜ë©´ ë©ë‹ˆë‹¤.\n","slug":"dfs1","date":"2022-02-03 09:00","title":"DFS(1)-ê¸°ë³¸","category":"Algorithm","tags":["DFS","Graph","Tree"],"desc":"Graphì˜ íƒìƒ‰ì—ì„œ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. í•œ ì ì—ì„œ ì—°ê²°ëœ ë‹¤ë¥¸ ì ìœ¼ë¡œ ì´ë™ì„ í•˜ë©´ì„œ, ëª¨ë“  ì—°ê²°ëœ ì ì„ ìˆœí™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ê°€ì§„ë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤. ì´ë•Œ, ì •ì ì„ ê³ ë¥´ëŠ” ë°©ì‹ì— ë”°ë¼ì„œ, DFS, BFSë¡œ ë‚˜ëˆ•ë‹ˆë‹¤. DFSì—ì„œëŠ” ìì‹ ê³¼ ì—°ê²°ëœ ì •ì  ì¤‘ì—ì„œ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê³  ì´ë™í•œ ë’¤ì— í•´ë‹¹ ì ì—ì„œ ë‹¤ì‹œ ì—°ê²°ëœ ì§€ì ì„ ì°¾ì•„ì„œ ì´ë™í•©ë‹ˆë‹¤. ì¦‰, ë°”ë¡œ ì§€ê¸ˆ ë½‘ì€ ì ì— ì¸ì ‘í•´ìˆëŠ” ì§€ì ì´ ì´ì „ì— ì¸ì ‘í•´ìˆë˜ ì§€ì ë³´ë‹¤ ê°€ì¤‘ì¹˜ê°€ ë†’ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ëª¨ë‘ ì§„í–‰í•˜ê³ ë„ ë‹µì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ë©´, ì´ì œ ì´ì „ ì‹œì ìœ¼ë¡œ ëŒì•„ì™€ì„œ ë‹¤ì‹œ ì‘ì—…ì„ ì¬ê°œí•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nì´ì „ì—ëŠ” DFSì˜ ê¸°ë³¸ì´ ë˜ëŠ” ìš”ì†Œì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ì§€ë§Œ, ì´ì œëŠ” ì¢€ ë” ì‹¬í™”ì ì¸ ë¶€ë¶„ì„ ë°°ì›Œë³´ê³ ì í•œë‹¤.\nDFSê°€ ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ë§Œë“œëŠ” DFS Spanning Treeì— ëŒ€í•œ ë‚´ìš©ì´ë‹¤.\n\n## DFS Spanning Tree\n\nìš°ë¦¬ëŠ” ì´ 4ê°€ì§€ë¡œ ê°„ì„ ì„ ë¶„ë¥˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n1. **Tree Edge(íŠ¸ë¦¬ ê°„ì„ )**- DFS Spanning Treeì— í¬í•¨ëœ ê°„ì„ \n2. **Forward Edge(ìˆœë°©í–¥ ê°„ì„ )** - í•´ë‹¹ ê°„ì„ ì´ ê°€ë¥´í‚¤ëŠ” ì •ì ì´ DFS Spanning Treeì—ì„œ ìì‹ ì˜ descendant(í›„ì†)ì— ì†í•˜ëŠ” ê²½ìš°\n3. **Backward Edge(ì—­ë°©í–¥ ê°„ì„ )** - í•´ë‹¹ ê°„ì„ ì´ ê°€ë¥´í‚¤ëŠ” ì •ì ì´ DFS Spanning Treeì—ì„œ ìì‹ ì˜ ancestor(ì¡°ìƒ)ì— ì†í•˜ëŠ” ê²½ìš°\n4. **Cross Edge(êµì°¨ ê°„ì„ )** - í•´ë‹¹ ê°„ì„ ì´ ê°€ë¥´í‚¤ëŠ” ì •ì ì´ í›„ì†ë„ ì¡°ìƒë„ ì•„ë‹Œ sibiling(í˜•ì œ ë˜ëŠ” ê·¸ë“¤ì˜ ìì†)ì— ì†í•˜ëŠ” ê²½ìš°\n\n![dfs-spanning-tree](/images/dfs-spanning-tree.png)\n\nì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ ë‘ ê°œì˜ ì¶”ê°€ì ì¸ ìë£Œêµ¬ì¡°ê°€ í•„ìš”í•˜ë‹¤.\n\n1. order[1...N] = í•´ë‹¹ ë…¸ë“œì˜ ë°œê²¬ ìˆœì„œ\n2. finished[1...N] = ëª¨ë“  ê°„ì„ ì˜ ì‚¬ìš© ì—¬ë¶€\n\n```python\nadj = [\n  [1,3],\n  [2],\n  [1],\n  [1,2]\n]\nN = len(adj)\n\norder = [-1] * N\nfinished = [False] * N\ncnt = [0]\ndef dfs(curr):\n  order[curr] = cnt[0]\n  cnt[0] += 1\n  for next in adj[curr]:\n    prefix = curr + \"ì—ì„œ \" + next + \"ê¹Œì§€ëŠ”\"\n    # ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì•˜ë‹¤ë©´, íŠ¸ë¦¬ ê°„ì„ ì´ë‹¤.\n    if order[next] == -1:\n      print(prefix + \"íŠ¸ë¦¬ ê°„ì„ ì´ë‹¤.\")\n      dfs(next)\n    # ë§Œì•½ ë‹¤ìŒ ì •ì ì˜ orderê°€ ë” ë‚®ë‹¤ë©´, ìˆœë°©í–¥ ê°„ì„ ì´ë‹¤.\n    elif order[next] > order[curr]:\n      print(prefix + \"ìˆœë°©í–¥ ê°„ì„ ì´ë‹¤.\")\n    # ë§Œì•½, ë‹¤ìŒ ì •ì ì´ ì•„ì§ ê±°ì³ì•¼ í•˜ëŠ” ì •ì ì´ ìˆë‹¤ë©´, ì—­ë°©í–¥ ê°„ì„ ì´ë‹¤.\n    elif not finished[next]:\n      print(prefix + \"ì—­ë°©í–¥ ê°„ì„ ì´ë‹¤.\")\n    # ê·¸ ì™¸ì—ëŠ” êµì°¨ ê°„ì„ ì´ë‹¤.\n    else:\n      print(prefix + \"êµì°¨ ê°„ì„ ì´ë‹¤.\")\n  finished[curr] = True\n\ndef dfsAll():\n  for i in N:\n    if order[i] == -1:\n      dfs(i)\n```\n\nìœ„ì™€ ê°™ì´ êµ¬í˜„í•˜ê²Œ ë˜ë©´, ì ì ˆí•˜ê²Œ ê°„ì„ ì„ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ìœ„ì—ëŠ” ë°©í–¥ì´ ì¡´ì¬í•˜ëŠ” ê·¸ë˜í”„ì˜€ì§€ë§Œ, ë§Œì•½ ë°©í–¥ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë¬´í–¥ ê·¸ë˜í”„ë¼ë©´ ìœ„ì˜ ê³¼ì •ì„ ì¢€ ë” ë‹¨ìˆœí™”í•  ìˆ˜ ìˆë‹¤.\në¨¼ì € ê°„ì„ ì€ ë‹¤ìŒê³¼ ê°™ì´ ì¤„ì–´ë“ ë‹¤.\n\n1. **íŠ¸ë¦¬ ê°„ì„ ** = DFS Spanning Treeì— í¬í•¨ëœ ê°„ì„ \n2. **ì¤‘ì²© ê°„ì„ ** = DFS Spanning Treeì— í¬í•¨ë˜ì§€ ì•Šì€ ê°„ì„ \n\në‹¤ìŒê³¼ ê°™ì´ ì´ 2ê°œë¡œ ì¤„ì–´ë“œëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. êµì°¨ ê°„ì„ ê³¼ ì—­ë°©í–¥ ê°„ì„ ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì´í›„ì— ë°©ë¬¸í•˜ëŠ” ì •ì ì—ì„œ ì´ë¯¸ ë°©ë¬¸í•œ ì •ì ìœ¼ë¡œ ì´ë™í•˜ëŠ” ê²ƒì¸ë° ì´ëŸ° ì¼ì€ ë¬´í–¥ ê·¸ë˜í”„ì—ì„œëŠ” ë°œìƒí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì¡´ì¬í•  ìˆ˜ ì—†ë‹¤.\nê·¸ëŸ¬ë©´, êµ¬í˜„ì€ ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰ë©ë‹ˆë‹¤.\n\n```python\nadj = [\n  [1,2,3],\n  [0,2,3],\n  [0,1,3],\n  [0,1,2]\n]\nN = len(adj)\n\norder = [-1] * N\n# finishëŠ” í•„ìš”í•˜ì§€ ì•Šë‹¤.\ncnt = [0]\ndef dfs(curr):\n  order[curr] = cnt[0]\n  cnt[0] += 1\n  for next in adj[curr]:\n    prefix = curr + \"ì—ì„œ \" + next + \"ê¹Œì§€ëŠ”\"\n    # ì•„ì§ ë°©ë¬¸í•˜ì§€ ì•Šì•˜ë‹¤ë©´, íŠ¸ë¦¬ ê°„ì„ ì´ë‹¤.\n    if order[next] == -1:\n      print(prefix + \"íŠ¸ë¦¬ ê°„ì„ ì´ë‹¤.\")\n      dfs(next)\n    # ë§Œì•½ ë‹¤ìŒ ì •ì ì˜ orderê°€ ë” ë‚®ë‹¤ë©´, ì¤‘ì²© ê°„ì„ ì´ë‹¤.\n    # ì—¬ê¸°ì„œ ìœ ì˜í•´ì•¼ í•  ì ì€ ë°”ë¡œ ì¤‘ì²© ê°„ì„ ì€ ë‘ ë²ˆ í˜¸ì¶œëœë‹¤ëŠ” ì ì´ë‹¤.\n    # ì¤‘ì²© ê°„ì„ ì´ê¸° ë•Œë¬¸ì— ì„œë¡œ í•œ ë²ˆì”© í˜¸ì¶œíˆê¸° ë•Œë¬¸ì´ë‹¤.\n    # ì´ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œ orderë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n    elif order[next] < order[curr]:\n      print(prefix + \"orderê°€ ë†’ì€ ê³³ì—ì„œ ë‚®ì€ ê³³ìœ¼ë¡œ ê°€ëŠ” ì¤‘ì²© ê°„ì„ ì´ë‹¤.\")\n    else:\n      print(prefix + \"orderê°€ ë‚®ì€ ê³³ì—ì„œ ë†’ì€ ê³³ìœ¼ë¡œ ê°€ëŠ” ì¤‘ì²© ê°„ì„ ì´ë‹¤.\")\n\ndef dfsAll():\n  for i in N:\n    if order[i] == -1:\n      dfs(i)\n```\n\nì—¬ê¸°ì„œ ê° ê°„ì„ ì˜ íŠ¹ì§•ì„ ì´í•´í•˜ë©´, ë‹¤ë¥¸ ë¬¸ì œë¥¼ í’€ê¸° ì‰½ë‹¤.\n\n1. ì—­ë°©í–¥ ë˜ëŠ” ì¤‘ì²© ê°„ì„ ì˜ ê°¯ìˆ˜ = circleì˜ ê°¯ìˆ˜\n    - ì—¬ê¸°ì„œ ì£¼ì˜í•  ì ì€ ë°”ë¡œ ë¬´í–¥ ê·¸ë˜í”„ì—ì„œëŠ” ë°”ë¡œ ì§ì „ì˜ ë°©ë¬¸í•œ ì •ì ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ì •ì ì€ ë§¤ë²ˆ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— ì´ëŠ” ì œì™¸í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì£¼ì˜í•˜ì.\n2. ë¬´í–¥ ê·¸ë˜í”„ì—ì„œ íŠ¹ì • ì •ì ì—ì„œ ì‹œì‘ë˜ëŠ” Spanning Treeê°€ ì¤‘ì²© ê°„ì„ ì´ ì—†ë‹¤ëŠ” ê²ƒì€, í•´ë‹¹ ì •ì ì„ ê¸°ì¤€ìœ¼ë¡œ ì—°ê²°ëœ ì •ì ë“¤ì€ ì‹¤ì œ ê·¸ë˜í”„ì—ì„œë„ íŠ¸ë¦¬ í˜•íƒœë¡œ ì¡´ì¬í•œë‹¤ëŠ” ì (ì ˆë‹¨ì )ì´ë‹¤.\n3. ë°©í–¥ ê·¸ë˜í”„ì—ì„œ ì—­ë°©í–¥ ê°„ì„ ê³¼ êµì°¨ ê°„ì„ ì´ ì—†ë‹¤ë©´, ë˜‘ê°™ì€ ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤.\n\n## ë¬¸ì œ í’€ì´\n\nDFS ë¬¸ì œì—ì„œëŠ” ëŒ€ê²Œ ë‹¤ìŒê³¼ ê°™ì€ ìë£Œ êµ¬ì¡°ê°€ ë§ì´ ì‚¬ìš©í•œë‹¤.\n\n- visited : ë°©ë¬¸ ì—¬ë¶€ì— ëŒ€í•œ checklistë¡œ, graphì˜ ì •ì ì˜ í¬ê¸° ë§Œí¼ ì¡´ì¬í•œë‹¤. ì´ˆê¸° ê°’ì€ Falseë¡œ ì´ˆê¸°í™”í•œë‹¤.\n- order : ë°©ë¬¸ ìˆœì„œì— ëŒ€í•œ checklistë¡œ, graphì˜ ì •ì ì˜ í¬ê¸° ë§Œí¼ ì¡´ì¬í•œë‹¤. ì´ˆê¸° ê°’ì€ -1ë¡œ ì´ˆê¸°í™”í•˜ê³ , ë°©ë¬¸ ì‹œë§ˆë‹¤ ì˜¬ë ¤ ì£¼ê¸° ìœ„í•´ì„œ, global variableë¡œ cntë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì„¤ì •í•´ì£¼ê¸°ë„ í•œë‹¤.(ê·¸ë ‡ì§€ ì•Šìœ¼ë©´, dfs parameterë¡œ ì „ë‹¬í•´ì£¼ì–´ì•¼ í•œë‹¤.) ë˜í•œ, ì´ë¥¼ í†µí•´ì„œ, visited íŒë‹¨ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì‚¬ìš©í•  ì‹œì—ëŠ” visitedì˜ ì‚¬ìš©ì„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.\n- finished : ë°©í–¥ ê·¸ë˜í”„ì—ì„œ í•´ë‹¹ ì •ì ì— ëŒ€í•œ íƒìƒ‰ì´ ì¢…ë£Œë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” ìë£Œêµ¬ì¡°ì´ë©° graphì˜ ì •ì ì˜ í¬ê¸° ë§Œí¼ ì¡´ì¬í•œë‹¤. ì´ˆê¸° ê°’ì€ Falseë¡œ ì´ˆê¸°í™”í•˜ê³ , dfsì˜ ëª¨ë“  ì •ì ì„ ë°©ë¬¸í•˜ëŠ” ê²ƒì´ ëë‚œ ê²½ìš°ì— ì´ë¥¼ Trueë¡œ ì„¸íŒ…í•˜ì.\n- parent : ì´ëŠ” ëŒ€ê²Œ DFSë¥¼ ì¬êµ¬ì¡°í™”í•  ë•Œ, ì´ ì—­ì‹œ graphì˜ ì •ì ì˜ í¬ê¸° ë§Œí¼ ì¡´ì¬í•œë‹¤. ëŒ€ê²Œ ê²½ë¡œë¥¼ ë‹¤ì‹œ ê·¸ë ¤ì•¼ í•˜ëŠ” ê²½ìš°ì— ë§ì´ ì‚¬ìš©í•œë‹¤. ë§Œì•½ visitedë„ ê°™ì´ í‘œí˜„í•˜ê³  ì‹¶ìœ¼ë©´, -2ë¡œ ì´ˆê¸°í™”í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. í•˜ì§€ë§Œ, visitedë¥¼ ë”°ë¡œ ì‚¬ìš©í•  ê²ƒì´ë¼ë©´, -1ë¡œ ì´ˆê¸°í™”í•´ë„ ëœë‹¤. ì™œëƒí•˜ë©´, parent -1ì€ dfs spanning treeì˜ rootë¼ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” ê°’ìœ¼ë¡œ ì“°ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì´ë‹¤.\n\n### Circle ì°¾ê¸°\n\nìœ„ì—ì„œ ë‚˜ì˜¨ ëŒ€ë¡œ Circleì„ ì°¾ì•„ë‚˜ê°€ë©´ ë©ë‹ˆë‹¤.\n\n> ë°±ì¤€ 16929\n\n<https://www.acmicpc.net/problem/16929>\n\nê°€ì¥ ê¸°ë³¸ì ì¸ ë¬¸ì œë¡œ ëŒ€ë†“ê³ , Circleì„ ì°¾ìœ¼ë¼ê³  í•©ë‹ˆë‹¤. ìœ ì˜í•  ì ì€ ì§ì „ì— ê·¸ì³ê°„ ì§€ì ìœ¼ë¡œ ëŒì•„ê°€ëŠ” ê²ƒì€ ë§‰ì•„ì•¼ í•œë‹¤. ë”°ë¼ì„œ, prev ê°’ì„ ë“¤ê³  ê°€ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.\n\n> ë°±ì¤€ 12946\n\n<https://www.acmicpc.net/problem/12946>\n\nì‘ìš© ë¬¸ì œì…ë‹ˆë‹¤. ì²˜ìŒì—ëŠ” circle ì°¾ê¸°ë¼ëŠ” ê²ƒì„ ì´í•´í•˜ê¸° ì–´ë µë‹¤. í•˜ì§€ë§Œ, ìµœëŒ€ ìƒ‰ì€ 3ì´ê³ , circleì„ ì´ë£¨ëŠ” ì›ì†Œê°€ í™€ìˆ˜ì¸ì§€ ì§ìˆ˜ì¸ì§€ë¥¼ ì°¾ëŠ” ë¬¸ì œë¡œ ë°›ì•„ë“¤ì´ë©´, êµ‰ì¥íˆ ì‰½ê²Œ í’€ ìˆ˜ ìˆë‹¤.\n\n> ë°±ì¤€ 16947\n\n<https://www.acmicpc.net/problem/16947>\n\nê°€ì¥ ë§ì´ ì‘ìš©ë˜ì–´ì§€ëŠ” ì‘ìš© ì˜ˆì‹œì…ë‹ˆë‹¤. DFS + BFS ê¸°ìˆ ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤. ë¨¼ì €, DFSë¥¼ í†µí•´ì„œ Circleì— ì†í•˜ëŠ” ì›ì†Œë¥¼ ì°¾ì•„ë‚´ê³ , í•´ë‹¹ Circleì— ì†í•˜ëŠ” ì›ì†Œë“¤ì„ queueì— ë„£ì€ í›„ì— ê±°ê¸°ì„œë¶€í„° bfsë¡œ ë°©ë¬¸í•˜ì§€ ì•Šì€ ì ì„ ì°¾ì•„ë‚˜ê°€ë©´ ëœë‹¤.\n","slug":"dfs2","date":"2022-04-23 10:30","title":"DFS(2)-DFS Spanning Tree","category":"Algorithm","tags":["DFS","Graph","Tree","Cycle ì°¾ê¸°"],"desc":"ì´ì „ì—ëŠ” DFSì˜ ê¸°ë³¸ì´ ë˜ëŠ” ìš”ì†Œì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ì§€ë§Œ, ì´ì œëŠ” ì¢€ ë” ì‹¬í™”ì ì¸ ë¶€ë¶„ì„ ë°°ì›Œë³´ê³ ì í•œë‹¤.DFSê°€ ê·¸ë˜í”„ë¥¼ ìˆœíšŒí•˜ë©´ì„œ ë§Œë“œëŠ” DFS Spanning Treeì— ëŒ€í•œ ë‚´ìš©ì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nDynamic Programmingì€ ê¸°ë³¸ì ìœ¼ë¡œ ì´ì „ì— ê³„ì‚°í–ˆë˜ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•  ë•Œ ì ì€ ì‹œê°„ ë¹„ìš©ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. ì´ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œ Overlapping Subproblem, Optimal Structural ë¼ëŠ” ë‹¨ì–´ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ë©° ì´ì— ëŒ€í•´ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n## ì •ì˜\n\nìš°ë¦¬ë§ë¡œ ë™ì  ê³„íšë²•ì´ë¼ê³  ë²ˆì—­ë˜ì–´ì§€ëŠ” ë§ì…ë‹ˆë‹¤. ìš°ì„  ëª…ì¹­ì— ëŒ€í•´ì„œ ì¢€ ì–´ìƒ‰í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” í•´ë‹¹ ì–´ì›ì´ ì˜¤ë˜ë˜ì—ˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë‹¹ì‹œì— programmingì´ë€ ë¬¸ì œ í’€ì´ë¥¼ ìœ„í•œ planning(ê³„íš) ì •ë„ë¡œ ìƒê°í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, **Dynamic Programmingì´ ì˜ë¯¸í•˜ëŠ” ë°”ëŠ” ë‹¤ë‹¨ê³„ ì²˜ë¦¬ì— ëŒ€í•œ ìµœì í™”ëœ ê³„íšë²• ì •ë„ë¡œ í•´ì„**í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nDynamic Programmingì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ë¬¸ì œê°€ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±í•  ë•Œì…ë‹ˆë‹¤.\n\n1. **Optimal Substructure**\n2. **Overlapping Subproblem**\n\n**Optimal Substructure**ë€ ë¬¸ì œì˜ ìµœì í•´ê°€ ì´ê²ƒì˜ í•˜ìœ„ ë¬¸ì œ(subproblem)ì˜ ìµœì í•´ì— ì˜í•´ì„œ ì •ì˜ë˜ì–´ì§ˆ ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì‰½ê²Œ ë§í•´ì„œ ìˆ˜ì—´ì˜ ê²½ìš° ì í™”ì‹ì„ ì‘ì„±í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. ê°€ì¥ ì¼ë°˜ì ì¸ ì˜ˆì‹œê°€ fibonacci ìˆ˜ì—´ì„ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n$$ fibo(n) = fibo(n-1) + fibo(n-2) $$\n\n**Overlapping Subproblem**ì´ë€ ë¬¸ì œì˜ í•˜ìœ„ ë¬¸ì œ(subproblem)ë“¤ì´ ì¤‘ì²©í•´ì„œ ì‚¬ìš©ë˜ëŠ” ê²½ìš°ë¥¼ ë§í•©ë‹ˆë‹¤. ìœ„ì˜ fibonacci ìˆ˜ì—´ë§Œ ë³´ì•„ë„ fibo(100)ì€ fibo(101), fibo(102)ë¥¼ ê³„ì‚°í•˜ê¸° ìœ„í•´ì„œ ì“°ì´ê¸° ë•Œë¬¸ì— ì¤‘ë³µì´ ë°œìƒí•˜ë©°, ë” ë‚˜ì•„ê°€ fibo(101), fibo(102)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” fibo(100)ì„ ë‹¤ì‹œ ê³„ì‚°í•´ì•¼ í•©ë‹ˆë‹¤. ì´ê²ƒì€ êµ‰ì¥í•œ ë¹„ìš©ì„ ì´ˆë¡€í•©ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ ë¬¸ì œë“¤ì— ëŒ€í•œ í•´ê²°ì±…ìœ¼ë¡œì¨ Dynamic Programmingì—ì„œëŠ” ì í™”ì‹ì„ ì´ìš©í•´ì„œ ë¬¸ì œë¥¼ í•´ê²°í•˜ì§€ë§Œ, ì´ë•Œ, í•œ ë²ˆ ê³„ì‚°í•œ ê°’ì„ ë‘ ë²ˆ ê³„ì‚°í•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. **ì´ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” ê²ƒì´ Memoization(í•¨ìˆ˜ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì €ì¥)ì…ë‹ˆë‹¤.** ì¦‰, ì´ì „ì— í˜¸ì¶œí•œ í•¨ìˆ˜ì˜ ê²°ê³¼ê°’ì„ ë³„ë„ì˜ ì €ì¥ ê³µê°„(array, list, map, file ë“±)ì— ì €ì¥í•´ë‘ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” problemì˜ subproblemì´ ì´ë¯¸ ê³„ì‚°ëœ ì ì´ ìˆë‹¤ë©´, í•˜ìœ„ ë¬¸ì œë¥¼ ë‹¤ì‹œ í’€ í•„ìš”ì—†ì´ ë°”ë¡œ solution(ì í™”ì‹)ì„ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, **ê³„ì‚° ì‹œê°„ì„ íšê¸°ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì¶”ê°€ì ì¸ memoryë¥¼ ì‚¬ìš©í•œë‹¤ëŠ” ì ì„ ë°˜ë“œì‹œ ê¸°ì–µí•´ì•¼ í•©ë‹ˆë‹¤.**\n\nì—¬ê¸°ì„œ ê³„ì†í•´ì„œ ë°˜ë³µ ë° êµì²´ë˜ì–´ ì‚¬ìš©ë˜ëŠ” ë‹¨ì–´ê°€ ì í™”ì‹, solution, optimal substructure, function, í•¨ìˆ˜ì…ë‹ˆë‹¤. ì´ëŠ” ëª¨ë‘ ê°™ì€ ëœ»ì„ ê°€ì§€ëŠ”ë°, ì—¬ê¸°ì„œë„ íŠ¹íˆ í•¨ìˆ˜ëŠ” **referential transparency**ë¥¼ ë³´ì¥í•˜ëŠ” í•¨ìˆ˜ë§Œì„ ì§€ì¹­í•©ë‹ˆë‹¤. ìˆ˜í•™ì—ì„œëŠ” ì•„ì£¼ ë‹¹ì—°í•œ ì–˜ê¸°ì´ì§€ë§Œ, inputê°’ì´ ë™ì¼í•  ë•Œ í•­ìƒ ê°™ì€ outputì„ ë‚´ë†“ì•„ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. programmingì—ì„œì˜ í•¨ìˆ˜ëŠ” ëŒ€ê²Œ side effectê°€ ì¡´ì¬í•  ìˆ˜ ìˆê³ , ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸°ë„ í•˜ë¯€ë¡œ, ê°™ì€ inputì´ë¼ë„ ìƒí™©(context)ì— ë”°ë¼ ë‹¤ë¥¸ outputì´ ë°œìƒí•  ìˆ˜ë„ ìˆëŠ”ë° ì´ëŸ¬í•œ ê²ƒì´ í•´ë‹¹ í•¨ìˆ˜ì—ì„œëŠ” ë°œìƒí•´ì„œëŠ” ì•ˆëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n---\n\n## êµ¬í˜„\n\nê¸°ë³¸ì ìœ¼ë¡œ Dynamic Programmingì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ìœ„ì—ì„œ ì–¸ê¸‰í•œ ë‘ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ë¨¼ì € ì í™”ì‹ì„ ì°¾ì•„ë‚´ê³ , ì´ê²ƒì´ ë°˜ë³µ ì‚¬ìš©ë˜ëŠ”ì§€ë¥¼ ë°˜ë“œì‹œ í™•ì¸í•œ í›„ì— ì ìš©í•˜ëŠ” ê²ƒì´ ê¸°ë³¸ì…ë‹ˆë‹¤.\n\nDynamic Programmingì˜ ê¸°ë³¸ì ì¸ êµ¬í˜„ ë°©ì‹ì€ ë‘ ê°€ì§€ê°€ ì¡´ì¬í•©ë‹ˆë‹¤. ë‘˜ ë‹¤ ì¥ë‹¨ì ì´ ìˆê¸° ë•Œë¬¸ì— ì´ê²ƒì— ìœ ì˜í•˜ì—¬ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ì•„ë˜ì—ì„œëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ì˜ˆì‹œë¡œ combinationì„ êµ¬í•˜ëŠ” ë°©ì‹ì„ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê² ìŠµë‹ˆë‹¤. ì¼ë‹¨ Combinationì€ ë‹¤ìŒê³¼ ê°™ì€ ì í™”ì‹ì„ ë§Œì¡±í•©ë‹ˆë‹¤.\n\n$$ {{}_{n}C_{k}} = {{}_{n-1}C_{k-1}} + {{}_{n-1}C_{k}}$$\n\në”°ë¼ì„œ, ì´ë¥¼ Dynamic Programmingì„ í†µí•´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 1\\. Top Down(=Recursive)\n\nÂ ë¨¼ì € inputìœ¼ë¡œ ë“¤ì–´ì˜¬ ë°ì´í„°ì˜ í¬ê¸°ë¥¼ ê³ ë ¤í•˜ì—¬, cache listì˜ í¬ê¸°ë¥¼ ì§€ì •í•©ë‹ˆë‹¤. ê·¸ í›„ì— ì í™”ì‹ì„ í•¨ìˆ˜ ë‚´ì—ì„œ ë‚˜íƒ€ë‚´ê³ , í•´ë‹¹ í•¨ìˆ˜ê°’ì„ returní•´ì£¼ë©´ ë©ë‹ˆë‹¤. ì´ë•Œ ì¤‘ìš”í•œ ê²ƒì´ ì´ë¯¸ í•¨ìˆ˜ê°’ì„ ê³„ì‚°í•œ ì ì´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê³  ìˆë‹¤ë©´, ë°”ë¡œ returní•´ë²„ë¦¬ëŠ” ì ì…ë‹ˆë‹¤.\n\n```python\nsize = 100\n# 1ì°¨ì› ë°°ì—´\ncache = [-1] * size\n\n# 2ì°¨ì› ë°°ì—´\ncache = [[-1 for _ in range(size)] for _ in range(size)]\n\n# ê¸°ì €ê°’ ì„¸íŒ…\ncache[0][0] = 1\ncache[1][0] = 1\ncache[1][1] = 1\n\n# í•¨ìˆ˜ ì§€ì •\ndef recursive_call(a, b):\n    # ì´ë¯¸ ì €ì¥ëœ ê°’ì´ ìˆëŠ” ê²½ìš° return\n    if cache[a][b] != -1:\n        return cache[a][b]\n    # ì—†ë‹¤ë©´, ì—°ì‚° ë° ì €ì¥ í›„ return\n    cache[a][b] = cache[a-1][b-1] + cache[a-1][b]\n    return cache[a][b]\n    \nprint(recursive_call(10, 2))\n```\n\ní•´ë‹¹ ë°©ì‹ì˜ ê°€ì¥ í° ì¥ì ì€ ì´í•´í•˜ê¸° ì‰½ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì í™”ì‹ì´ ë¶„ëª…í•˜ê²Œ ë“¤ì–´ë‚˜ë©°, ê°’ì„ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì„ ìƒìƒí•˜ëŠ” ê²ƒì´ ì‰½ìŠµë‹ˆë‹¤. ë˜í•œ, ëª¨ë“  ê²½ìš°ì˜ ìˆ˜ë¥¼ íƒìƒ‰í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì—°ê´€ëœ ë°ì´í„°ë§Œ ì°¾ê¸° ë•Œë¬¸ì— ê´€ë ¨ ì—†ëŠ” ë°ì´í„°ëŠ” ì°¾ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. **í•˜ì§€ë§Œ,**Â recursive callì¸ ë§Œí¼ í•¨ìˆ˜ í˜¸ì¶œì˜ ìµœëŒ€ íšŸìˆ˜ê°€ ì •í•´ì ¸ìˆì–´, ëª¨ë“  ê²½ìš°ì— ì˜¬ë°”ë¥¸ ë‹µì„ ì°¾ì§€ëŠ” ëª»í•©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ëŠì–´ì„œ ì‹¤í–‰ ì‹œì¼œë‘ëŠ” ë°©ë²•ë„ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ë“¤ì–´ 200ì„ êµ¬í•˜ëŠ” ë¬¸ì œë©´, 50, 100, 150ì„ ë¯¸ë¦¬ í˜¸ì¶œí•´ë‘¡ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ë˜í•œ, ë§¤ë²ˆ ì ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì•„ë‹ˆê¸°ì— ëŒ€ë‹¤ìˆ˜ì˜ ê²½ìš°ì—ëŠ” Bottom Upìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\n\n### 2\\. Bottom Up(with Loop)\n\nìœ„ì™€ ë˜‘ê°™ì€ ì›ë¦¬ë¥¼ ì´ìš©í•´ì„œ êµ¬í˜„í•œ Combinationì…ë‹ˆë‹¤. forë¬¸ì„ ì´ìš©í•´ì„œ ì²˜ìŒë¶€í„° ëê¹Œì§€ êµ¬í•˜ë©´ì„œ ì˜¬ë¼ê°€ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, ë¹ˆí‹ˆì—†ì´ ì•„ë˜ë¶€í„° ê³„ì‚°í•˜ëŠ”ì§€ë¥¼ ì²´í¬í•˜ë©´ì„œ êµ¬í˜„í•´ì•¼í•©ë‹ˆë‹¤. ì¤‘ê°„ì— ë¹ˆê°’ì´ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ì—†ë„ë¡ í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n```python\nsize = 100\n# 1ì°¨ì› ë°°ì—´\ncache = [-1] * size\n\n# 2ì°¨ì› ë°°ì—´\ncache = [[-1 for _ in range(size)] for _ in range(size)]\n\n# ê¸°ì €ê°’ ì„¸íŒ…\ncache[0][0] = 1\ncache[1][0] = 1\ncache[1][1] = 1\n\n# í•¨ìˆ˜ ì§€ì •\nfor i in range(2, size):\n for j in range(0, i+1):\n     cache[i][j] = cache[i-1][j-1] + cache[i-1][j]\n    \nprint(cache[10][2])\n```\n\n---\n\n## ë¬¸ì œ í’€ì´\n\nëª¨ë“  Dynamic Programming ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•´ì„œ ê±°ì³ì•¼ í•˜ëŠ” ë‹¨ê³„ëŠ” ì´ 3ë‹¨ê³„ì…ë‹ˆë‹¤.\n\n1. **ë¬¸ì œë¥¼** **ì •ì˜**í•œë‹¤.\n2. **ì í™”ì‹**ì„ ì°¾ëŠ”ë‹¤.\n3. **ì‹œê°„ ë³µì¡ë„**ë¥¼ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.\n4. **ê³µê°„ ë³µì¡ë„**ë¥¼ ë§Œì¡±í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤.\n\në¬¸ì œë¥¼ ì •ì˜í•˜ê³ , ì í™”ì‹ì„ ì°¾ì„ ë•Œì— ë‚˜íƒ€ë‚˜ëŠ” ëŒ€ëµ 4ê°€ì§€ ìœ í˜•ì„ ë‚˜ëˆ„ì–´ ë³´ì•˜ìŠµë‹ˆë‹¤. ì œê°€ ë§Œë“  ë¶„ë¥˜ê¸°ì¤€ì´ë‹ˆ ê³µì‹ì ì´ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.\n\n### 1. ìì‹ ì˜ Subproblemìœ¼ë¡œë§Œ í‘œí˜„ë˜ëŠ” ìœ í˜•\n\n**A = operate(sub A, sub A)ì™€** ê°™ì€ í˜•íƒœë¡œ ë‚˜íƒ€ë‚˜ëŠ” ê²½ìš°ë¥¼ ë§í•œë‹¤. ì´ ê²½ìš°ì—ëŠ” ë¬¸ì œì˜ ì¬ì •ì˜ê°€ í•„ìš”ì—†ì´ ë°”ë¡œ ì í™”ì‹ì„ ì‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤. ì´ëŸ° ìœ í˜•ì˜ ë¬¸ì œê°€ ìœ„ì—ì„œ ì‚´í´ë³´ì•˜ë˜ combination, fibonacciê°€ ëŒ€í‘œì ì…ë‹ˆë‹¤. ê°€ì¥ ê¸°ë³¸ì ì¸ ì˜ˆì‹œë¥¼ í’€ì–´ë´…ì‹œë‹¤.\n\n> **ë°±ì¤€ 11726**  \n\n\\*ë¬¸ì œë¥¼ ì½ê³  ì˜¤ì‹œê¸° ë°”ëë‹ˆë‹¤.\n\n[11726ë²ˆ: 2Ã—n íƒ€ì¼ë§](https://www.acmicpc.net/problem/11726)\n\në¨¼ì € ì´ ë¬¸ì œëŠ” 2xN í‰ë©´ì— íƒ€ì¼ì„ ì±„ìš¸ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.\n\në”°ë¼ì„œ, $cache[n] = \\text{2xNì„ ì±„ìš¸ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜}$ë¼ê³  ì •ì˜í•˜ê² ìŠµë‹ˆë‹¤.\n\në˜í•œ, ê·œì¹™ì„ ì°¾ì•„ë³´ë©´ í•´ë‹¹ ê°’ì€ ë‹¤ìŒê³¼ ê°™ì€ patternì„ ê°€ì§„ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![tile_2_1](/images/tile_2_1.jpeg)\n\nf(n)ì˜ ì²˜ìŒ ì‹œì‘ì„ ì„¸ë¡œ blockìœ¼ë¡œ ì‹œì‘í•˜ë©´, ë‹¤ìŒ blockë“¤ì˜ ê²½ìš°ì˜ ìˆ˜ëŠ” ëª¨ë‘ ì´ì „ì— êµ¬í•œ ê²½ìš°ì˜ ìˆ˜ì™€ ê°™ê³ , ì²˜ìŒ blockì„ ê°€ë¡œ blockìœ¼ë¡œ ì„¤ì •í•˜ë©´, ìœ„ì— blockì„ ë†“ìœ¼ë©´ ì•„ë˜ë„ ê°€ë¡œë¡œ ë†“ëŠ” ê²ƒì´ ê°•ì œë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ê°€ë¡œë¡œ ìœ„ ì•„ë˜ë¥¼ ë‘ëŠ” ìˆ˜ ë°–ì— ì—†ê³ , ì´ë ‡ê²Œ ë‘ë©´ ì´ì „ì „ì— ë‘ì—ˆë˜ ê²ƒê³¼ ë™ì¼í•œ í˜•íƒœë¡œ ë†“ëŠ” ê²½ìš°ì˜ ìˆ˜ë§Œí¼ì˜ ê²½ìš°ë¥¼ ê°–ê²Œ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ê²°ë¡ ìƒ í˜„ì¬ì˜ blockì˜ ê²½ìš°ì˜ ìˆ˜ëŠ” ì´ë ‡ê²Œ ë‘ ê°œì˜ ê²½ìš°ì˜ ìˆ˜ì˜ í•©ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n> ê´€ë ¨ ìœ í˜• : 1463, 11727, 11052, 16194, 15988, 1699, 2193\n\n#### 2\\. ë¬¸ì œì˜ ì¬ì •ì˜ê°€ í•„ìš”í•œ ìœ í˜•\n\n**A = operate(B), A' = operate(sub B, sub B)ì™€** ê°™ì€ í˜•íƒœë¡œ ë‚˜íƒ€ë‚˜ëŠ” ê²½ìš°ë¥¼ ë§í•œë‹¤. ì´ì™€ ê°™ì€ ìœ í˜•ì€ ê¸°ì¡´ì— ì œì‹œëœ ë¬¸ì œì— íŠ¹ì • ì¡°ê±´ì„ ì¶”ê°€í•˜ì—¬, ìµœì¢…ê°’ì„ êµ¬í•œ í›„ì— ì´ë¥¼ ì´ìš©í•´ì„œ ë‹µì„ êµ¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ë¬¸ì œë¥¼ ë‹¤ì‹œ ì •ì˜í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë‹¤ì†Œ ì–´ë ¤ìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‰¬ìš´ ì˜ˆì œë¶€í„° í’€ì–´ë³´ê² ìŠµë‹ˆë‹¤.\n\n> **ë°±ì¤€ 1912**\n\n[1912ë²ˆ: ì—°ì†í•©](https://www.acmicpc.net/problem/1912)\n\nì´ ë¬¸ì œëŠ” ì í™”ì‹ìœ¼ë¡œ ë‚˜íƒ€ê¸°ê°€ ì–´ë µìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì•½ê°„ ë¬¸ì œë¥¼ ë°”ê¾¸ì–´ì„œ ë‚˜íƒ€ë‚´ì•¼ í•©ë‹ˆë‹¤. ìˆ˜ì—´ì„ Aë¼ í•˜ê³ , ìˆ˜ì—´ì˜ ië²ˆì§¸ ì›ì†Œë¥¼ A[i]ë¼ê³  í•  ë•Œ, A[i]ë¥¼ ë§ˆì§€ë§‰ ì—°ì† í•©ì˜ ê°’ìœ¼ë¡œ í–ˆì„ ë•Œ, ìµœëŒ“ê°’ì„ S[i]ë¼ê³  í•©ì‹œë‹¤. ì´ ê²½ìš°ì— ì´ì „ì˜ ì—°ì†í•©ì´ ìŒìˆ˜ì¸ ê²½ìš°ëŠ” ì˜¤íˆë ¤ ê°’ì´ ë‚®ì•„ì§€ê¸° ë•Œë¬¸ì— ì´ë•ŒëŠ” A[i]ë¥¼ ë°˜í™˜í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ì—ëŠ” S[i-1]ì— A[i]ë¥¼ ë”í•´ì„œ ì—°ì†í•©ì„ êµ¬í•˜ë©´ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœê°€ ë©ë‹ˆë‹¤.\n\n$$\n\\begin{align}\n  S[i] &= S[i-1] + A[i] (\\text{if } S[i-1] > 0) \\\\\n  &= A[i]\n\\end{align}\n$$\n\nì™€ ê°™ì€ í˜•íƒœë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ, S ì¤‘ì—ì„œ ê°€ì¥ í° ê°’ì„ ì°¾ìœ¼ë©´, ê·¸ê²ƒì´ ë‹µì´ ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ Sê°€ cacheì™€ ê°™ì€ ì—­í• ì…ë‹ˆë‹¤.\n\n> ê´€ë ¨ ìœ í˜• : 11053, 2225\n\n#### 3\\. Problemì˜ Subproblemê³¼ ë‹¤ë¥¸ Subproblemì´ ì—°ê³„ë˜ëŠ” ìœ í˜•\n\n**A= operate(sub A, sub B), B = operate(sub A, sub B)ì™€** ê°™ì€ í˜•íƒœë¡œ ë‚˜íƒ€ë‚˜ëŠ” ê²½ìš°ë¥¼ ë§í•©ë‹ˆë‹¤. ì´ì™€ ê°™ì€ ìœ í˜•ì€ ë‘ ê°œ ì´ìƒì˜ subproblemì´ ì„œë¡œ ì—°ê³„ë˜ê¸° ë•Œë¬¸ì— ì´ë“¤ì„ ë™ì‹œì— ì—°ì‚°í•˜ë©´ì„œ, ì§„í–‰í•´ì•¼ í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” ì´ì¤‘ ë°°ì—´ì„ ì´ìš©í•´ì„œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ì´ëŸ° ë‚´ìš©ë“¤ì„ ëŒ€ê²Œ ë¬¸ì œì—ì„œ ì œì•½ì‚¬í•­ì´ ìˆëŠ” ë¬¸ì œì— ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆì œë¥¼ ë³´ë©´ ì‰½ê²Œ ì´í•´ê°€ ë©ë‹ˆë‹¤.\n\n> **ë°±ì¤€ 2133**\n\nÂ [2133ë²ˆ: íƒ€ì¼ ì±„ìš°ê¸°](https://www.acmicpc.net/problem/2133)\n\nì• ì„œ í’€ì—ˆë˜ 2xn íƒ€ì¼ ë¬¸ì œì™€ ë˜‘ê°™ì§€ë§Œ, 3xnìœ¼ë¡œ ë°”ë€Œì—ˆì„ ë¿ì´ë‹¤. ì´ë²ˆì—ë„, ì•ì—ì„œ ë¶€í„° í•œ ë²ˆì”© ê²½ìš°ì˜ ìˆ˜ë¥¼ ë”°ì ¸ë³´ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ë¨¼ì € ì„¸ë¡œë¥¼ ë„£ì€ ê²½ìš°ì—ëŠ” ì•„ë˜ì— ê°€ë¡œê°€ í•˜ë‚˜ ê°•ì œë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³ , ê°€ë¡œë¡œ ë„£ì€ ê²½ìš°ì—ëŠ” ì„¸ë¡œë¡œ ì„¸ìš°ê±°ë‚˜ ê°€ë¡œë¡œ ì„¸ìš°ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, 3ê°€ì§€ì˜ ê²½ìš°ì˜ ìˆ˜ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ êµ¬í•˜ê³ ì í•˜ëŠ” ëª¨ì–‘ê³¼ëŠ” ë‹¤ë¥¸ ëª¨ì–‘ì˜ ì¡°ê°ì´ ë‚¨ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ êµ¬í•˜ê³ ì í•˜ëŠ” ê²ƒ(3xnì„ ì±„ìš°ëŠ” ê²½ìš°ì˜ ìˆ˜)ì„ cache[n][0]ì´ë¼ í•˜ê³ , ê·¸ë¥¼ ìœ„í•´ ë¶€ê°€ì ìœ¼ë¡œ í•´ê²°í•´ì•¼ í•˜ëŠ” ë¬¸ì œ(ë°‘ë³€ì´ nì´ê³ , ìœ—ë³€ì€ n-1, ì¢ŒëŠ” 2, ìš°ëŠ” 3ì¸ ë„í˜•ì„ ì±„ìš°ëŠ” ê²½ìš°ì˜ ìˆ˜)ë¥¼ cache[n][1]ì´ë¼ê³  í•˜ì.\n\nê·¸ë ‡ê²Œ í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ì í™”ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n![tile_3_1](/images/tile_3_1.jpeg)\n\ní•˜ì§€ë§Œ, ë‹¤ë¥¸ ë¶€ê°€ì ì¸ ë¬¸ì œì— ëŒ€í•œ ì í™”ì‹ì„ ì„¸ìš°ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì—, ì´ì— ëŒ€í•œ ì í™”ì‹ë„ ì°¾ì•„ì£¼ì–´ì•¼ í•œë‹¤. ì™¼ìª½ì— ì„¸ë¡œë¥¼ ì±„ìš°ê²Œ ë˜ëŠ” ê²½ìš°ì™€ ê°€ë¡œë¥¼ ë°”ë¡œ ì±„ìš°ëŠ” ê²½ìš°ê°€ ìˆì„ ê²ƒì´ë‹¤. í•´ë‹¹í•˜ëŠ” ê²½ìš°ëŠ” ê° ê° ë‹¤ìŒê³¼ ê°™ì´ ë¬˜ì‚¬ë˜ê³ , ì í™”ì‹ë„ ë™ì¼í•˜ê²Œ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n![tile_3_2](/images/tile_3_2.jpeg)\n\nì´ì œ ì´ë¥¼ ë°˜ë³µí•´ì„œ í’€ì–´ë‚˜ê°€ë©´ ì‰½ê²Œ ë‹µì„ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\nì´ëŸ° ì‹ìœ¼ë¡œ í•˜ë‚˜ì˜ subproblemì„ í’€ê¸° ìœ„í•´ì„œ ì—°ê³„ë˜ëŠ” subproblemì´ ìƒê¸°ëŠ” ìœ í˜•ë„ ì¡´ì¬í•œë‹¤.\n\n>Â ê´€ë ¨ ìœ í˜• : 11054, 13398, 1309, 2156, 1149\n\n#### 4\\. ë™ì ê³„íšë²•ì„ í†µí•´ì„œ ì–»ì€ ê²°ê³¼ê°’ì„ ì¶”ì í•˜ëŠ” ìœ í˜•\n\ní•´ë‹¹ ìœ í˜•ì€ ìƒë‹¹íˆ ê°„ë‹¨í•˜ê²Œë„ parentë¼ëŠ” ë³„ë„ì˜ listë¥¼ ë§Œë“¤ì–´ì„œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤. ì¦‰, cacheì˜ ê°’ì„ ê°±ì‹ í•´ì¤„ ë•Œ ì˜í–¥ì„ ì¤€ subproblemì˜ indexë¥¼ ì €ì¥í•´ë‘ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ í•´ë‹¹ ê°’ì´ ì–´ë””ì„œë¶€í„° ìœ ë˜ë˜ì—ˆëŠ”ì§€ë¥¼ í›„ì— ì¶”ì í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> **ë°±ì¤€ 14002**\n\nÂ [14002ë²ˆ: ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ” ë¶€ë¶„ ìˆ˜ì—´ 4\n\nìˆ˜ì—´ Aê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ”Â ë¶€ë¶„Â ìˆ˜ì—´ì„ êµ¬í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ì‹œì˜¤. ì˜ˆë¥¼ ë“¤ì–´, ìˆ˜ì—´ A = {10, 20, 10, 30, 20, 50} ì¸ ê²½ìš°ì— ê°€ì¥ ê¸´ ì¦ê°€í•˜ëŠ” ë¶€ë¶„Â ìˆ˜ì—´ì€Â A = {10, 20, 10, 30, 20, 50} ì´\n\nwww.acmicpc.net](<https://www.acmicpc.net/problem/14002>)\n\nìœ í˜• 2ì™€ ë™ì¼í•œ í’€ì´ë¡œ í’€ ìˆ˜ ìˆëŠ” ë¬¸ì œì´ë‹¤. ë§Œì•½, cacheê°’ì„ ìˆ˜ì •í•˜ëŠ” ì—°ì‚°ì´ ë°œìƒí•˜ë©´, parentë¥¼ ë³€ê²½í•˜ë©´ ëœë‹¤.\n\n---\n\nìœ„ì— ì–¸ê¸‰í•œ ëª¨ë“  í’€ì´ëŠ” í•´ë‹¹ Githubì— ì¡´ì¬í•©ë‹ˆë‹¤.\n\n[GitHub - euidong/BOJ: ë°±ì¤€ ì•Œê³ ë¦¬ì¦˜ ë¬¸ì œ í’€ì´](https://github.com/euidong/BOJ)\n","slug":"dynamic-programming","date":"2022-04-14 13:51","title":"Dynamic Programming","category":"Algorithm","tags":["Dynamic Programming","BOJ2133","BOJ11726","BOJ14002","BOJ1912","Memoization","Optimal Structural","Overlapping Subproblem","Referential Transparency"],"desc":"Dynamic Programmingì€ ê¸°ë³¸ì ìœ¼ë¡œ ì´ì „ì— ê³„ì‚°í–ˆë˜ ë°ì´í„°ë¥¼ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©í•  ë•Œ ì ì€ ì‹œê°„ ë¹„ìš©ìœ¼ë¡œ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. ì´ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œ Overlapping Subproblem, Optimal Structural ë¼ëŠ” ë‹¨ì–´ë¥¼ ì£¼ë¡œ ì‚¬ìš©í•˜ë©° ì´ì— ëŒ€í•´ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nGraphë€ ì—¬ëŸ¬ ê°œì˜ Vertex(ì •ì )ì™€ ê·¸ë¥¼ ì‡ëŠ” Edge(ê°„ì„ )ë¡œ ì´ë£¨ì–´ì§„ í˜•íƒœì˜ ìë£Œ êµ¬ì¡°ë¥¼ ì˜ë¯¸í•œë‹¤.\n\n## í•µì‹¬ ì¢…ë¥˜\n\n- ë¬´í–¥ ê·¸ë˜í”„: ë°©í–¥ì´ ì—†ì´ ì„ ìœ¼ë¡œ ì´ì–´ì§„ ê·¸ë˜í”„\n- ë°©í–¥ ê·¸ë˜í”„: ë°©í–¥ì„ ê°€ì§„ ê·¸ë˜í”„ë¡œ í•œ ì •ì ì—ì„œ ë‹¤ë¥¸ ì •ì ìœ¼ë¡œ ê°€ëŠ” ë°©í–¥ì„ ëª…ì‹œí•œ ê·¸ë˜í”„\n- ê°€ì¤‘ì¹˜ ê·¸ë˜í”„: ê° ê°„ì„ ì´ ê°€ì¤‘ì¹˜ë¥¼ ê°€ì§€ëŠ” í˜•íƒœë¥¼ ê·¸ë˜í”„\n- ì´ë¶„ ê·¸ë˜í”„: ì •ì ì„ ë‘ ê°œì˜ ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆì„ ë•Œ, ê° ê·¸ë£¹ì€ ì„œë¡œ ì—°ê²°ë˜ì§€ ì•Šì€ ì ë“¤ë¡œë§Œ ì´ë£¨ì–´ì§€ëŠ” ê·¸ë˜í”„\n- **ë°©í–¥ ë¹„ìˆœí™˜ ê·¸ë˜í”„(Directed Acyclic Graph(DAG))**: ì–´ëŠ ì •ì ì—ì„œ ì‹œì‘í•´ë„ cycle(ìˆœí™˜)ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” í˜•íƒœì˜ ê·¸ë˜í”„. ì´ ê·¸ë˜í”„ í˜•íƒœì— tree(íŠ¸ë¦¬)ë„ í•´ë‹¹ë˜ë©°, ì´ê²ƒì´ íŠ¹ë³„í•œ ì´ìœ ëŠ” ì„ í˜•ìœ¼ë¡œ ì •ë ¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ([DFS_ìœ„ìƒì •ë ¬ ì°¸ê³ ](/post/DFS))\n\n## Dense vs Sparse\n\nê·¸ë˜í”„ ê´€ë ¨ ë¬¸ì œë¥¼ í•´ê²°í•  ë•Œ, ë°˜ë“œì‹œ ê³ ë ¤í•´ì•¼ í•  ì ì€ í•´ë‹¹ ê·¸ë˜í”„ê°€ Dense(ë°€ë„ê°€ ë†’ì€, edgeê°€ ë§ì€)í•œ ê²½ìš°ì™€ Sparse(í¬ê·€í•œ, edgeê°€ ì ì€)í•œ ê²½ìš°ë¥¼ ëª¨ë‘ ê³ ë ¤í•´ì£¼ì–´ì•¼ í•œë‹¤. ì´ì— ë”°ë¼ì„œ, ì‹œê°„ë³µì¡ë„ê°€ êµ‰ì¥íˆ ì²œì°¨ë§Œë³„í•˜ê²Œ ë‚˜íƒ€ë‚˜ê¸° ë•Œë¬¸ì´ë‹¤.\n\n## í‘œí˜„ ë°©ë²•\n\n> **1. adjacent list(ì¸ì ‘ ë¦¬ìŠ¤íŠ¸)**\n\nê° ì •ì ë§ˆë‹¤ í•´ë‹¹ ì •ì ì—ì„œ ë‚˜ê°€ëŠ” ê°„ì„ ì˜ ëª©ë¡ì„ ì €ì¥í•´ì„œ ê·¸ë˜í”„ë¥¼ í‘œí˜„í•˜ëŠ” ë²•  \n\n```python\nimport sys\n# N = ì •ì ì˜ ìˆ˜, M = ê°„ì„ ì˜ ìˆ˜\nN, M = [int(i) for i in sys.stdin.readline().split()]\nadj = [[] for _ in range(N)]\nfor _ in range(M):\n  a, b = [int(i) for i in sys.stdin.readline().split()]\n  adj[a].append(b)\n  # ë¬´í–¥ ê·¸ë˜í”„ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë°˜ëŒ€ ë°©í–¥ë„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤.\n  adj[b].append(a)\n```\n\n> **2. adjacent matrix(ì¸ì ‘ í–‰ë ¬)**\n\nì¸ì ‘ ë¦¬ìŠ¤íŠ¸ ë°©ì‹ì˜ ë‹¨ì ì€ íŠ¹ì • ë‘ ì •ì ì´ ì—°ê²° ë˜ì—ˆëŠ”ì§€ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” í•´ë‹¹ ì •ì ê³¼ ì—°ê²°ëœ ëª¨ë“  ì •ì ì„ í™•ì¸í•´ì•¼ í•œë‹¤. ì¸ì ‘ í–‰ë ¬ì—ì„œëŠ” ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. ì—°ê²° ì—¬ë¶€ë¥¼ ì§ì ‘ 2ì°¨ì› $V \\times V$ í–‰ë ¬ë¡œ ë‚˜íƒ€ë‚´ê¸° ë•Œë¬¸ì— ì´ë¥¼ ë°”ë¡œ index ì¡°íšŒë¡œ ì•Œ ìˆ˜ ìˆë‹¤. **í•˜ì§€ë§Œ,** ë©”ëª¨ë¦¬ë¥¼ ë” ì¡ì•„ ë¨¹ì„ ìˆ˜ë„ ìˆê³ , ë‹¨ìˆœíˆ ì—°ê²°ëœ ì •ì ë§Œ ì¡°íšŒí•˜ëŠ” ì—°ì‚°ì¼ ê²½ìš°ì—ëŠ” ì˜¤íˆë ¤ ëª¨ë“  ì •ì ì„ ì¡°íšŒí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¹„ìš©ì´ ì¦ê°€í•  ìˆ˜ ìˆë‹¤. (Sparseí•œ graphì¼ ìˆ˜ë¡ ë¹„ìš© ì¦ê°€ê°€ í¬ë‹¤.)  \n\n```python\nimport sys\n# N = ì •ì ì˜ ìˆ˜, M = ê°„ì„ ì˜ ìˆ˜\nN, M = [int(i) for i in sys.stdin.readline().split()]\nadj = [[0 for _ in range(N)] for _ in range(N)]\nfor _ in range(M):\n  a, b = [int(i) for i in sys.stdin.readline().split()]\n  adj[a][b] += 1\n  # ë¬´í–¥ ê·¸ë˜í”„ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë°˜ëŒ€ ë°©í–¥ë„ ì¶”ê°€í•´ì£¼ì–´ì•¼ í•œë‹¤.\n  adj[b][a] += 1 \n```\n","slug":"graph","date":"2022-04-20 12:00","title":"Graph","category":"Algorithm","tags":["ìë£Œêµ¬ì¡°","Graph"],"desc":"Graphë€ ì—¬ëŸ¬ ê°œì˜ Vertex(ì •ì )ì™€ ê·¸ë¥¼ ì‡ëŠ” Edge(ê°„ì„ )ë¡œ ì´ë£¨ì–´ì§„ í˜•íƒœì˜ ìë£Œ êµ¬ì¡°ë¥¼ ì˜ë¯¸í•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nlistë¥¼ ê°–ê³  ë†€ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì€ pythonìœ¼ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ í’€ê¸° ìœ„í•´ì„œ êµ‰ì¥íˆ ì¤‘ìš”í•œ ê¸°ìˆ ì´ë‹¤.\nì—¬ê¸°ì„œëŠ” ê¸°ë³¸ì ì¸ ë°©ë²•ì—ì„œë¶€í„° ì–´ë–»ê²Œ ë°°ì—´ì„ ì œëŒ€ë¡œ ê°–ê³  ë†€ ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œëŠ” Pythonì„ í™œìš©í•˜ì§€ë§Œ, ì•Œê³ ë¦¬ì¦˜ í’€ì´ë¥¼ ëª©í‘œë¡œ í•˜ê¸° ë•Œë¬¸ì— numpyë¥¼ í™œìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤. ë¬¼ë¡  numpyë¥¼ ì´ìš©í•˜ë©´, í›¨ì”¬ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## ì„ ì–¸\n\npythonì—ì„œëŠ” listë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ëª¨ìë‹ˆë‹¤. ë˜í•œ, listë¼ëŠ” type ìì²´ê°€ ì˜ˆì•½ì–´ì´ê¸° ë•Œë¬¸ì— ì•„ë˜ë¶€í„°ëŠ” arrë¥¼ í†µí•´ì„œ `list`ë¥¼ í‘œí˜„í•©ë‹ˆë‹¤.\n\n```python\n# ë¹„ì–´ ìˆëŠ” 1ì°¨ì› ë°°ì—´\narr = []\n\n# ê½‰ ì°¬ 1ì°¨ì› ë°°ì—´\nN = 100\narr = [0] * N\n\narr = [0 for _ in range(N)]\n\n# ë¹„ì–´ ìˆëŠ” 2ì°¨ì› ë°°ì—´\narr = [[]]\n\n# ê½‰ ì°¬ 2ì°¨ì› ë°°ì—´\nN = 100\nM = 100\n\narr = [[0 for _ in range(M)] for _ in range(N)]\n```\n\nì—¬ê¸°ì„œ ìœ ì˜í•´ì•¼í•  ì ì€ 2ì°¨ì› ë°°ì—´ì—ì„œ ê½‰ ì°¬ ë°°ì—´ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ë°˜ë“œì‹œ for ë¬¸ì„ í†µí•´ì„œ ìƒì„±í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. 1ì°¨ì› ë°°ì—´ì„ ìƒì„±í•  ë•Œ ì‚¬ìš©í–ˆë˜ ê³±í•˜ê¸° ì—°ì‚°ì„ í†µí•œ ë°°ì—´ì˜ ìš”ì†Œ ë³µì‚¬ëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤. (ex, `[[0] * M] * N`, `[[0] * M for _ in range(N)]`) ì™œëƒí•˜ë©´, **referenceë¡œ** ë³µì œë˜ê¸° ë•Œë¬¸ì´ë‹¤.\n\n## ìˆœí™˜\n\npythonì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ìˆœí™˜ ë°©ë²•ì€ `for element in arr` êµ¬ë¬¸ì„ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•˜ë©´ì„œ, ì‚¬ìš©í•˜ê¸°ì— ìœ ìš©í•œ ìˆœí™˜ ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆë‹¤.\n\n```python\n# (1)\nfor element in arr:\n  print(element)\n\nfor idx in range(len(arr)):\n  print(arr[idx])\n\n# (2)\nwhile len(arr) > 0:\n  element = arr.pop(0)\n  print(element)\n\n# (3)\nlist(map(lambda x: x**2, arr))\n\nfrom functools import reduce\nreduce(lambda acc, cur: acc + cur, arr, 0)\n\nlist(filter(lambda x: x == 1, arr))\n\n# (4)\narr = []\n\ndef call(idx):\n  if len(arr) <= idx:\n    print(arr[idx])\n    return\n  call(idx+1)\n  print(arr[idx])\n```\n\n1. ê°€ì¥ ê¸°ë³¸ì ì¸ ìˆœí™˜ ë°©ì‹ì´ë‹¤. ì¼ë°˜ì ìœ¼ë¡œ foreachë¼ê³  ë¶€ë¥¸ë‹¤.\n  ì´ ë°©ì‹ì€ ëŒ€ê²Œì˜ ê²½ìš° íš¨ìœ¨ì ì´ë‹¤. í•˜ì§€ë§Œ, ì‚¬ìš©ì— ìœ ì˜í•´ì•¼í•  ë•Œê°€ ìˆë‹¤. ë°”ë¡œ, ë‚´ë¶€ elementì˜ ì¶”ê°€,ì‚­ì œê°€ ë°œìƒí•˜ëŠ” ê²½ìš°ì´ë‹¤. ë”°ë¼ì„œ, ë°˜ë“œì‹œ ë‚´ë¶€ì—ì„œëŠ” ìˆœí™˜ ì¤‘ì¸ ë°°ì—´ì— ëŒ€í•œ ì¶”ê°€ ë° ì‚­ì œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì§€ ì•Šë„ë¡ í•˜ì.\n2. ëŒ€ê²Œ, queueë¥¼ ìˆœí™˜í•˜ëŠ” ê²½ìš°ì— ë§ì´ ì‚¬ìš©ë˜ê²Œ ë˜ëŠ” í˜•íƒœì´ë‹¤.\n  ì´ ê²½ìš°ëŠ” ì¶”ê°€, ì‚­ì œê°€ ë°œìƒí•  ë•Œì—ë„ ì•ˆì •ì ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ í•  ìˆ˜ ìˆë‹¤.\n3. ì´ëŠ” ìœ„ì—ì„œ ë³´ì•˜ë˜ foreach í˜•íƒœì—ì„œ ë‚´ë¶€ ë³€ìˆ˜ì˜ ë³€ê²½ì„ ê°•ì œë¡œ ë§‰ì„ ìˆ˜ ìˆëŠ” ë°©ì‹ì´ë‹¤.\n  ì´ëŸ° ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ì—ëŸ¬ë¥¼ ì¤„ì´ëŠ”ë°ì— ì¢‹ë‹¤. ì£¼ì˜í•´ì•¼í•  ê²ƒì€ ê¸°ì¡´ arrì™€ ìƒˆë¡œ ìƒê¸°ëŠ” arrì˜ í¬ê¸°ê°€ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— ì´ì— ìœ ì˜í•´ì•¼ í•œë‹¤.\n  reduceëŠ” ë°˜ë“œì‹œ importê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— ë²ˆê±°ë¡­ì§€ë§Œ, ë°°ì—´ì˜ í¬ê¸°ë¥¼ ë°”ê¿€ ìˆ˜ë„ ìˆê³ , ëˆ„ì ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš° ìœ ìš©í•˜ë‹¤.\n  filterë¥¼ í†µí•´ì„œ, íŠ¹ì • ë°ì´í„°ë¥¼ filtering í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n4. ì¬ê·€í•¨ìˆ˜ì˜ íŠ¹ì§•ì¸ call stackì„ í™œìš©í•´ì„œ ìˆœí™˜í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ëŸ° ì‹ìœ¼ë¡œ ê·¸ë˜í”„ë¥¼ ìˆœí™˜í•œë‹¤ë©´, ê·¸ê²ƒì´ DFSì´ë‹¤.\n\n## ìë¥´ê¸°\n\npythonì˜ ì¥ì  ì¤‘ í•˜ë‚˜ê°€ ìë¥´ê¸°(slicing)ê°€ ë§¤ìš° ì‰½ë‹¤ëŠ” ê²ƒì´ë‹¤.\në°°ì—´ ë‚´ë¶€ì— `:`ì„ í†µí•´ì„œ ì‹œì‘ì (start index), ëì (end index), ê·¸ë¦¬ê³  ìˆœì„œ(order)ë¥¼ ëª…ì‹œí•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë°°ì—´ì„ ì‰½ê²Œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.\në˜í•œ, ì´ ë°©ì‹ì„ ì‚¬ìš©í•´ë„, ê¸°ì¡´ì˜ listëŠ” ë³€í˜•ë˜ì§€ ì•Šê³ , ì˜ë¼ì§„ listë¥¼ ë°˜í™˜í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ì.\n\n### 1ì°¨ì› ìë¥´ê¸°\n\n```python\narr = [1,2,3,4,5]\n\narr[1:3:1] # [2,3]\narr[1:3] # [2,3] <-- ìƒëµ ì‹œ ìˆœì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 1\n\narr[1:5] # [2,3,4,5]\narr[1:] # [2,3,4,5] <-- ìƒëµ ì‹œ ëì ì€ ê¸°ë³¸ì ìœ¼ë¡œ ê°€ì¥ ëì \n\narr[0:] # [1,2,3,4,5]\narr[:] # [1,2,3,4,5] <-- ìƒëµ ì‹œ ì‹œì‘ì ì€ ê¸°ë³¸ì ì€ ê°€ì¥ ì²«ì \n```\n\n### 2ì°¨ì› ìë¥´ê¸°\n\n2ì°¨ì› ë°°ì—´ì„ ìë¥´ëŠ” ê²ƒì€ numpyë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì–´ì©” ìˆ˜ ì—†ì´ forë¬¸ì„ ì‘ì„±í•´ì„œ ì˜ë¼ì£¼ì–´ì•¼ í•œë‹¤.\n\n```python\narr = [\n  [1,2,3,4],\n  [5,6,7,8],\n  [9,10,11,12],\n  [13,14,15,16]\n]\n\n# arrì˜ a[0~2][0~2]ë¥¼ ê°€ì ¸ì˜¤ê³  ì‹¶ë‹¤ê³  í•˜ì.\nsliced_arr = [line[:2] for line in arr[:2]]\n```\n\në¬¼ë¡  `arr[:2][:2]` ì´ëŸ°ì‹ìœ¼ë¡œ ì“°ê³  ì‹¶ê² ì§€ë§Œ, ì´ë¥¼ ìˆ˜í–‰í•˜ë©´, arrì„ [:2] slicingí•œ ê²°ê³¼ë¬¼ `[[1, 2, 3, 4], [5, 6, 7, 8]]`ì„ ë‹¤ì‹œ slicingí•˜ì—¬ ë™ì¼í•˜ê²Œ `[[1, 2, 3, 4], [5, 6, 7, 8]]`ê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤. ë”°ë¼ì„œ, ìœ„ì™€ ê°™ì´ forë¬¸ì„ ì´ìš©í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ë°”ê¿”ì£¼ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n## ë³µì œ\n\nê¸°ë³¸ì ìœ¼ë¡œ ë³µì œëŠ” ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ì¡´ì¬í•œë‹¤. í•˜ë‚˜ëŠ” ëŒ€ìƒ ìì²´ë¥¼ ëª¨ë‘ ë³µì‚¬í•˜ëŠ” ê²ƒì´ê³ , í•˜ë‚˜ëŠ” ì‚¬ì‹¤ìƒ í•´ë‹¹ ë°°ì—´ì— ë˜ ë‹¤ë¥¸ ì´ë¦„ì„ ë¶™ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.\nê¸°ë³¸ì ìœ¼ë¡œ ìš°ë¦¬ê°€ ë‹¤ìŒê³¼ ê°™ì´ í•˜ë©´ ë³€ìˆ˜ê°€ ë³µì œë˜ê¸° ë•Œë¬¸ì— ë°°ì—´ë„ ë˜‘ê°™ì´ ë³µì‚¬ë  ê²ƒì´ë¼ê³  ìƒê°í•˜ì§€ë§Œ ì‹¤ìƒì€ ê·¸ë ‡ì§€ ì•Šë‹¤.\n\n```python\n# (1)\na = 3\nb = a\n\n# (2)\narr = [1,2,3,4,5]\ncopy = arr\n```\n\nì¼ë°˜ ë³€ìˆ˜ì— `=` ì—°ì‚°ì„ ì‚¬ìš©í•œë‹¤ë©´, ê°’ì„ ë³µì‚¬í•˜ì—¬ targetì—ê²Œ ëŒ€ì…í•´ì£¼ëŠ” ê²ƒì´ ë§ë‹¤. í•˜ì§€ë§Œ, ë°°ì—´ì—ì„œëŠ” ë³€ìˆ˜ê°€ ê°€ë¥´í‚¤ëŠ” ê²ƒì€ ë°°ì—´ì´ ì¡´ì¬í•˜ëŠ” ì£¼ì†Œë¥¼ ê°€ë¥´í‚¨ë‹¤. ì¦‰, `arr`ì´ë¼ëŠ” êµ¬ì—­ì— ë³€ìˆ˜ê°€ ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë³€ìˆ˜ê°€ ìˆëŠ” ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ `=` ì„ í†µí•´ì„œ `copy`ì—ê²Œ ëŒ€ì…í•´ì£¼ë©´, `copy`ëŠ” ë‹¨ì§€ `arr`ê³¼ ë˜‘ê°™ì€ ì£¼ì†Œì§€ë¥¼ ê°€ë¥´í‚¤ê³  ìˆëŠ” ê²ƒì¼ ë¿ì´ë‹¤. ë¬¼ë¡  ì´ë ‡ê²Œ ë˜ì–´ë„ í¬ê²Œ ë¬¸ì œê°€ ë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆë‹¤. `copy`ì™€ `arr` ëª¨ë‘ ì ˆëŒ€ ë³€ê²½ë˜ì§€ ì•Šì„ ê²ƒì´ë¼ëŠ” í™•ì‹ í•˜ê±°ë‚˜ í•´ë‹¹ í–‰ìœ„ ìì²´ë¥¼ ì˜ë„í•œ ê²½ìš°ì´ë‹¤. í•˜ì§€ë§Œ, ëŒ€ê²Œì˜ ê²½ìš°ì—ëŠ” ì›ë³¸ì´ íšŒì†ë˜ê¸°ë¥¼ ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” ë³„ê°œì˜ listë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì„ ì•Œê³  ìˆì–´ì•¼ í•œë‹¤. pythonì—ì„œëŠ” ì´ë¥¼ ìœ„í•´ slicingì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n```python\n# 1ì°¨ì› ë°°ì—´\narr = [1,2,3,4,5]\ncopy = arr[:] \n\n# 2ì°¨ì› ë°°ì—´\narr = [\n  [1,2,3,4],\n  [5,6,7,8],\n  [9,10,11,12],\n  [13,14,15,16]\n]\ncopy = [line[:] for line in arr]\n```\n\n2ì°¨ì›ì„ ë³µì‚¬í•  ë•Œì—ë„ `arr[:]`ì„ ì“°ê³  ì‹¶ê² ì§€ë§Œ, ì´ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, ë‚´ë¶€ì— ìˆëŠ” ë°°ì—´ì€ ëª¨ë‘ ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë˜‘ê°™ì€ ë³„ëª…ì„ ë¶™ì—¬ì£¼ëŠ” ê²ƒê³¼ ë˜‘ê°™ì´ ë™ì‘í•œë‹¤.\n\n## modulo\n\nlistì—ì„œëŠ” modulo ì—°ì‚°ì´ ì¤‘ìš”í•˜ë‹¤. ì• ì´ˆì— ë°°ì—´ì˜ indexê°€ 0ì—ì„œ ì‹œì‘í•˜ëŠ”ë°, ì´ê²ƒì€ modulo ê³µê°„ì—ì„œì˜ ê°€ì¥ í° íŠ¹ì§•ì´ê¸°ë„ í•˜ë‹¤. ë§Œì•½, ìš°ë¦¬ê°€ íŠ¹ì • ë°°ì—´ì„ ë°˜ë³µí•´ì„œ ì‹œê³„ë°©í–¥, ë°˜ì‹œê³„ë°©í–¥ ì²˜ëŸ¼ ìˆœí™˜í•  ì¼ì´ ìƒê¸´ë‹¤ë©´, modulo ì—°ì‚°ì„ ë°˜ë“œì‹œ ê¸°ì–µí•´ì•¼ í•œë‹¤.\n\n```python\narr = [1,2,3,4,5]\nidx = 0\nwhile True:\n  print(arr[(idx) % len(arr)])\n  idx+=1\n```\n\n## ë°˜ì „\n\nì´ì „ì— ë³´ì•˜ë˜ slicingì˜ ì‘ìš©ì„ í†µí•´ì„œ ì‰½ê²Œ ë°˜ì „ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```python\n# 1ì°¨ì› ë°°ì—´\narr = [1,2,3,4,5]\nreversed_arr = arr[::-1]\n\n# 2ì°¨ì› ë°°ì—´\narr = [\n  [1,2,3,4],\n  [5,6,7,8],\n  [9,10,11,12],\n  [13,14,15,16]\n]\n\n# ì¢Œìš° ë°˜ì „\nreversed_arr = [line[::-1] for line in arr]\n# ìƒí•˜ ë°˜ì „\nreversed_arr = [line[:] for line in arr[::-1]]\n```\n\n## íšŒì „\n\níšŒì „ì€ 2ì°¨ì› ë°°ì—´ì—ì„œë§Œ ì˜ë¯¸ìˆìœ¼ë¯€ë¡œ, í•´ë‹¹ ì—°ì‚°ë§Œ ë‹¤ë£¹ë‹ˆë‹¤.\níšŒì „ì€ ì´ ë‘ ê°€ì§€ ì¢…ë¥˜ê°€ ìˆì„ ìˆ˜ ìˆë‹¤.\n> **1. ì‹œê³„ ë˜ëŠ” ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ 1ì¹¸ ì´ë™í•˜ëŠ” ì—°ì‚°**\n\n```python\narr = [\n  [1,2,3,4], \n  [5,6,7,8], \n  [9,10,11,12], \n  [13,14,15,16],\n  [17,18,19,20],\n  [21,22,23,24]\n]\nN = len(arr)\nM = len(arr[0])\n\n# ì‹œê³„ ë°©í–¥\n# ì‹œê³„ ë°©í–¥ ì´ë™ ì‹œì˜ ì´ë™ ì •ë„\ndy = [0, 1, 0, -1]\ndx = [1, 0, -1, 0]\n\nrotated_arr = [[-1 for _ in range(M)] for _ in range(N)]\nfor i in range(min([N, M]) // 2):\n  cursor = (i, i+1)\n  prev = (i, i)\n  rotated_arr[i][i] = arr[i+1][i]\n  d = 0\n  while True:\n    y = cursor[0] + dy[d]\n    x = cursor[1] + dx[d]\n    if -1 + i < y < N - i and -1 + i < x < M - i:\n      rotated_arr[cursor[0]][cursor[1]] = arr[prev[0]][prev[1]]\n      prev = (cursor[0], cursor[1])\n      cursor = (y, x)\n    else:\n      d += 1\n      if d == 4:\n        break\n\n# ë°˜ì‹œê³„ ë°©í–¥\n# ë°˜ì‹œê³„ ë°©í–¥ ì´ë™ ì‹œì˜ ì´ë™ ì •ë„\ndy = [1, 0, -1, 0]\ndx = [1, 0, 0, -1]\n\nrotated_arr = [[-1 for _ in range(M)] for _ in range(N)]\nfor i in range(min([N, M]) // 2):\n  cursor = (i+1, i)\n  prev = (i, i)\n  rotated_arr[i][i] = arr[i][i+1]\n  d = 0\n  while True:\n    y = cursor[0] + dy[d]\n    x = cursor[1] + dx[d]\n    if -1 + i < y < N - i and -1 + i < x < M - i:\n      rotated_arr[cursor[0]][cursor[1]] = arr[prev[0]][prev[1]]\n      prev = (cursor[0], cursor[1])\n      cursor = (y, x)\n    else:\n      d += 1\n      if d == 4:\n        break\n```\n\nì˜ˆì œ - [ë°±ì¤€ 16926](https://www.acmicpc.net/problem/16926)\n\n>**2. $90^{\\circ}$, $180^{\\circ}$, $270^{\\circ}$ íšŒì „ ì—°ì‚°**\n\ní•´ë‹¹ ì—°ì‚°ì˜ keypointëŠ” ì—°ì‚°ì´ ì í™”ì‹ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤ëŠ” ì ì´ë‹¤. (A=After, B=Before, size=(NxM))\n\n- $90^{\\circ}$ : `A[i][j] = B[j][N-1-i]`\n- $270^{\\circ}$ : `A[i][j] = B[M-1-j][i]`\n- $180^{\\circ}$ : `A[i][j] = B[N-1-i][M-1-j]`\n\n```python\narr = [\n  [1,2,3,4], \n  [5,6,7,8], \n  [9,10,11,12], \n  [13,14,15,16],\n  [17,18,19,20],\n  [21,22,23,24]\n]\nN = len(arr)\nM = len(arr[0])\n\n# 90ë„\nrotated_arr = [[-1 for _ in range(N)] for _ in range(M)]\nfor i in range(M):\n  for j in range(N):\n    rotated_arr[i][j] = arr[N-1-j][i]\n\n# 270ë„\nrotated_arr = [[-1 for _ in range(N)] for _ in range(M)]\nfor i in range(M):\n  for j in range(N):\n    rotated_arr[i][j] = arr[j][M-1-i]\n\n# 180ë„\nrotated_arr = [[-1 for _ in range(M)] for _ in range(N)]\nfor i in range(N):\n  for j in range(M):\n    rotated_arr[i][j] = arr[N-1-i][M-1-j]\n```\n\nì˜ˆì œ - [ë°±ì¤€ 20327](https://www.acmicpc.net/problem/20327)\n","slug":"list","date":"2022-04-26 21:10","title":"List ê°–ê³  ë†€ê¸°","category":"Algorithm","tags":["List","Python","ìˆœí™˜","ë³µì‚¬","ìë¥´ê¸°","ë°˜ì „","íšŒì „"],"desc":"listë¥¼ ê°–ê³  ë†€ ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì€ pythonìœ¼ë¡œ ì•Œê³ ë¦¬ì¦˜ì„ í’€ê¸° ìœ„í•´ì„œ êµ‰ì¥íˆ ì¤‘ìš”í•œ ê¸°ìˆ ì´ë‹¤.ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ì ì¸ ë°©ë²•ì—ì„œë¶€í„° ì–´ë–»ê²Œ ë°°ì—´ì„ ì œëŒ€ë¡œ ê°–ê³  ë†€ ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œëŠ” Pythonì„ í™œìš©í•˜ì§€ë§Œ, ì•Œê³ ë¦¬ì¦˜ í’€ì´ë¥¼ ëª©í‘œë¡œ í•˜ê¸° ë•Œë¬¸ì— numpyë¥¼ í™œìš©í•˜ì§€ ì•ŠëŠ” ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤. ë¬¼ë¡  numpyë¥¼ ì´ìš©í•˜ë©´, í›¨ì”¬ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nìš°ë¦¬ê°€ ìë£Œë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì´ í•„ìš”í•˜ë‹¤. ê·¸ ì¤‘ì—ì„œë„ ì—°ê´€ì„±ì„ ê°€ì§€ëŠ” ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ëŠ” ê²½ìš°ì—ëŠ” ì„ í˜•ì ì¸ listë§Œìœ¼ë¡œëŠ” ë„ˆë¬´ë‚˜ ë¶€ì¡±í•  ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ, Graphë¥¼ ì´ìš©í•˜ê¸°ì—ë„ ë°ì´í„°ì˜ ì–‘ì´ ë°©ëŒ€í•´ì§€ê³ , ê·œì¹™ì´ ì—†ê¸° ë•Œë¬¸ì— ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ëŠ” ì—°ì‚°ì—ì„œ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í•˜ê²Œ ëœë‹¤.\n\në”°ë¼ì„œ, ë³´ë‹¤ ê·œì¹™ì ì¸ í˜•íƒœë¥¼ ê°€ì§€ë©´ì„œ, ê° ì§€ì ê°„ì˜ ê´€ê³„ë¥¼ ê°€ì§€ê³ , ë” ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ì°¾ê¸° ìœ„í•´ì„œ ê³ ì•ˆëœ ê²ƒì´ íŠ¸ë¦¬ì´ë‹¤.\n\n## Tree\n\níŠ¸ë¦¬(tree)ë€ ê·¸ë˜í”„ì˜ ì¼ì¢…ìœ¼ë¡œ, í•˜ë‚˜ì˜ ì •ì (root) ìì²´ë¥¼ ì˜ë¯¸í•˜ê±°ë‚˜ ë˜ ë‹¤ë¥¸ ë…ë¦½ëœ (sub)íŠ¸ë¦¬ë¥¼ directed edge(ë°©í–¥ ê°„ì„ )ë¥¼ ì´ìš©í•´ì„œ ì—°ê²°í•œ ìë£Œêµ¬ì¡°ë¥¼ ë§í•œë‹¤.\n\n![Tree's Recursive form](/images/tree1.jpeg)\n\nì–¸ëœ» ë³´ê¸°ì— êµ‰ì¥íˆ ì¶”ìƒì ì¸ í‘œí˜„ì¼ ìˆ˜ ìˆì§€ë§Œ, ìœ„ì™€ ê°™ì€ **ì¬ê·€ì  ì •ì˜**ë¥¼ ê¸°ì–µí•˜ëŠ” ê²ƒë„ ë§ì€ ë„ì›€ì´ ëœë‹¤.\n\nì´ë¥¼ ì¢€ ë” ì‰½ê²Œ ì„¤ëª…í•˜ìë©´, ê¸°ë³¸ì ìœ¼ë¡œ íŠ¸ë¦¬ëŠ” ë°©í–¥ì„ ê°€ì§„ ê°„ì„ ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê·¸ë˜í”„ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ìš”ì†Œë¥¼ ê°€ì§€ê³  ìˆì„ ê²½ìš°ë¥¼ íŠ¸ë¦¬ë¼ê³  ë§í•œë‹¤.\n\n1. ë£¨íŠ¸(root)ë¼ëŠ” ë‹¤ë¥¸ ì •ì ì„ ê°€ì§„ë‹¤.\n2. ë£¨íŠ¸ë¥¼ ì œì™¸í•œ ëª¨ë“  ì •ì ì€ í•´ë‹¹ ì •ì ìœ¼ë¡œ ê°€ëŠ” ê°„ì„ (edge)ì´ ë‹¨ í•˜ë‚˜ì´ë‹¤.\n3. ê·¸ë ‡ê¸°ì— ë£¨íŠ¸ì—ì„œ ëª¨ë“  ì •ì ìœ¼ë¡œ ì—°ê²°ë˜ëŠ” ê°„ì„ ë“¤ì˜ ê²½ìš°ì˜ ìˆ˜ë„ ë‹¨ í•˜ë‚˜ì´ë‹¤.\n\n![Tree's Normal form](/images/tree2.jpeg)\n\nì´ë¥¼ ì´í•´í–ˆë‹¤ë©´, ì• ì„œ ì‚´í´ë³´ì•˜ë˜ ì¬ê·€ì  ì •ì˜ë„ ì´í•´ê°€ ë˜ì—ˆëŠ”ì§€ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•˜ê³  ê°€ì.\n\n**ìœ„ì™€ ê°™ì´ íŠ¸ë¦¬ì—ì„œ ë£¨íŠ¸ì— ì—°ê²°ëœ ì„œë¸Œ íŠ¸ë¦¬ëŠ” ë§ˆì¹˜ í•˜ë‚˜ì˜ ë…ë¦½ì ì¸ ë°”êµ¬ë‹ˆë¼ê³  ë³¼ ìˆ˜ë„ ìˆë‹¤.** íŠ¸ë¦¬ì—ì„œëŠ” ì—°ê²°ëœ subtreeê°€ ì„œë¡œ ë…ë¦½ì ì´ê¸° ë•Œë¬¸ì—, ë…ë¦½ì ì¸ ë°”êµ¬ë‹ˆì— ë‹´ëŠ” ê·œì¹™ì„ ë§ˆìŒëŒ€ë¡œ ì •í•˜ì—¬ ë…ë¦½ì ì¸ íŠ¹ì§•ì´ ìˆëŠ” ë°ì´í„°ë¥¼ **ë¶„ë¥˜**í•˜ê¸°ì— ì ì ˆí•œ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.\n\n## ìš©ì–´\n\n- ê¹Šì´(depth) : íŠ¸ë¦¬ì˜ ìµœëŒ€ ë†’ì´ë¥¼ ì˜ë¯¸í•œë‹¤. ëŒ€ê²Œ ë£¨íŠ¸ì˜ ë†’ì´ë¥¼ 0ìœ¼ë¡œ ë³´ê¸° ë•Œë¬¸ì— ë…¸ë“œê°€ 2ê°œë¼ë©´, ê¹Šì´ê°€ 1ì¸ ê±¸ë¡œ ë³¸ë‹¤. í•˜ì§€ë§Œ, ì´ëŠ” êµ¬í˜„ìì˜ ë§ˆìŒì— ë”°ë¼ ë‹¤ë¥´ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤.\n- ë¶€ëª¨(parent) : íŠ¹ì • ì •ì ì„ ê¸°ì¤€ìœ¼ë¡œ ìì‹ ì„ ê°€ë¥´í‚¤ëŠ” ê°„ì„ ì„ ê°€ì§„ ì •ì ì„ ë§í•œë‹¤. ì¦‰, íŠ¸ë¦¬ì˜ êµ¬ì¡°ì—ì„œ ìƒìœ„ì— ìˆëŠ” ë…¸ë“œë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n- ìì‹(child) : íŠ¹ì • ì •ì ì„ ê¸°ì¤€ìœ¼ë¡œ ìì‹ ì—ì„œ ì¶œë°œí•˜ëŠ” ê°„ì„ ì— ì—°ê²°ëœ ì •ì ì„ ë§í•œë‹¤. ì¦‰, íŠ¸ë¦¬ì˜ êµ¬ì¡°ì—ì„œ í•˜ìœ„ì— ìˆëŠ” ë…¸ë“œë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n- ì¡°ìƒ(ancestor) : íŠ¹ì • ì •ì ì„ ê¸°ì¤€ìœ¼ë¡œ ìì‹ ìœ¼ë¡œ ì˜¤ëŠ” ê²½ë¡œê°€ ì¡´ì¬í•˜ëŠ” ì •ì ì„ ë§í•œë‹¤. ì¦‰, íŠ¸ë¦¬ì˜ êµ¬ì¡°ì—ì„œ ë¶€ëª¨ì—ì„œ ë¶€í„° ë£¨íŠ¸ê¹Œì§€ì— ê²½ë¡œì˜ ëª¨ë“  ë…¸ë“œê°€ ì´ì— í¬í•¨ëœë‹¤.\n- ë£¨íŠ¸(root) : ë¶€ëª¨ê°€ ì—†ëŠ” ìµœìƒë‹¨ì˜ ì •ì ì„ ì˜ë¯¸í•œë‹¤.\n- ë¦¬í”„(leaf) : ìì‹ì´ ì—†ëŠ” ìµœí•˜ë‹¨ì˜ ì •ì ë“¤ì„ ì˜ë¯¸í•œë‹¤.\n- ì„œë¸ŒíŠ¸ë¦¬(subtree) : íŠ¸ë¦¬ì˜ ê° ì •ì ì€ í•´ë‹¹ ì •ì ì„ ë£¨íŠ¸ë¡œ í•˜ëŠ” íŠ¸ë¦¬ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ ë³¸ë˜ íŠ¸ë¦¬ì— ì¡´ì¬í•˜ëŠ” ë‚´ë¶€ íŠ¸ë¦¬ë¥¼ ì„œë¸ŒíŠ¸ë¦¬ë¼ê³  í•œë‹¤.\n\n## Binary Tree\n  \nëª¨ë“  ì •ì ì˜ ìì‹ì˜ í¬ê¸°ê°€ 2 ì´í•˜ë¡œ ì •í•´ì§„ íŠ¸ë¦¬ë¥¼ ì´ì§„ íŠ¸ë¦¬(Binary Tree)ë¼ê³  í•œë‹¤.\n\n- Skewed Binary Tree  \n  ì´ì§„ íŠ¸ë¦¬ì—ì„œ ê°™ì€ depthì— ìˆëŠ” ì •ì ì´ ë‹¨ í•˜ë‚˜ ë°–ì— ì—†ëŠ” ê²½ìš°ë¥¼ ë§í•œë‹¤. ë§ˆì¹˜ Linked Listì™€ ê°™ì€ í˜•íƒœì´ë‹¤. ì´ëŠ” íŠ¸ë¦¬ì˜ ëª©ì  ì¤‘ í•˜ë‚˜ì¸ ë¶„ë¥˜ë¼ëŠ” ê¸°ëŠ¥ì„ ì ì ˆíˆ ìˆ˜í–‰í•˜ì§€ ëª»í•˜ëŠ” í˜•íƒœì´ê¸° ë•Œë¬¸ì— ëŒ€ê²Œ ì¢‹ì§€ ì•Šì€ í˜•íƒœë¡œ ë³¸ë‹¤.\n\n![skewed tree](/images/skewed-tree.png)\n\n- Balanced Binary Tree  \n  ê· í˜• ì¡íŒ ì´ì§„ íŠ¸ë¦¬ë¡œ ì¢Œìš°ì˜ depthê°€ ìµœëŒ€ 1ê¹Œì§€ë§Œ ì°¨ì´ê°€ ë‚˜ëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸í•œë‹¤.\n\n![balanced tree](/images/balanced-tree.png)\n\n- Full Binary Tree  \n  ì •ì ì´ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìì‹ì˜ ìˆ˜ê°€ 0 ì•„ë‹ˆë©´ 2ë¡œ ì œí•œë˜ëŠ” í˜•íƒœì˜ ì´ì§„ íŠ¸ë¦¬ë¥¼ ì˜ë¯¸í•œë‹¤. ê·¸ë ‡ê¸°ì— ê¸°ë³¸ì ìœ¼ë¡œ ê· í˜• ì¡íŒ í˜•íƒœì˜ íŠ¸ë¦¬ê°€ ìƒê¸¸ ìˆ˜ ë°–ì— ì—†ë‹¤.\n\n![full tree](/images/full-tree.png)\n\n- Complete Binary Tree  \n  ê· í˜•ì¡íŒ íŠ¸ë¦¬ì´ë©´ì„œ ì •ì ì´ ë°˜ë“œì‹œ ì™¼ìª½ë¶€í„° ì±„ì›Œì§€ëŠ” íŠ¸ë¦¬ë¥¼ ë§í•œë‹¤. í•´ë‹¹ íŠ¸ë¦¬ì˜ ê°€ì¥ í° íŠ¹ì§•ì€ ì´ë¥¼ Arrayë¡œ í‘œí˜„í•˜ê¸°ì— ìµœì í™”ë˜ì–´ìˆë‹¤ëŠ” ì ì´ë‹¤. ì´ëŠ” í›„ì— ìˆì„ **êµ¬í˜„ë²•** íŒŒíŠ¸ì—ì„œ ë” ìì„¸íˆ ì•Œì•„ë³¸ë‹¤. ë”°ë¼ì„œ, Complete Treeë¥¼ ê¸°ì–µí•˜ê³  ê°€ì.\n\n![complete tree](/images/complete-tree.png)\n\n- Perfect Binary Tree  \n  Complete Treeì™€ ê°€ì¥ í˜¼ëˆë˜ëŠ” ê°œë…ì´ë‹¤. ì´ëŠ” ëª¨ë“  ì´ì§„ íŠ¸ë¦¬ê°€ ë¹ˆí‹ˆì—†ì´ ê½‰ ì±„ì›Œì§„ ê²½ìš°ë¥¼ ë§í•œë‹¤. ì¦‰, leaf ë…¸ë“œì˜ ìì‹ì˜ ê°¯ìˆ˜ê°€ ëª¨ë‘ 0ì¼ ë•Œì´ë‹¤.\n\n![perfect tree](/images/perfect-tree.png)\n\n## ì†ì„±\n\ní•´ë‹¹ ì†ì„±ì€ ì •ì˜ì— ì˜í•´ì„œ íŒŒìƒë˜ëŠ” ë‚´ìš©ì´ë‹¤. ì§ì ‘ ìƒìƒí•´ì„œ ì™œ ì•ˆë˜ëŠ”ì§€ë¥¼ ìƒê°í•´ë³´ì.\n\n- ë£¨íŠ¸ì— ì—°ê²°ëœ subtree ê°„ì—ëŠ” ê°„ì„ ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.\n- Cycleì´ ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, Graphì˜ ì¢…ë¥˜ ì¤‘ í•˜ë‚˜ì¸ DAGì— ì†í•œë‹¤.\n- ì •ì ê³¼ ì •ì  ì‚¬ì´ì˜ ê²½ë¡œê°€ ìˆë‹¤ë©´, í•´ë‹¹ ê²½ë¡œëŠ” ìœ ì¼í•œ ê²½ë¡œì´ë‹¤.\n- í˜•ì œ ë…¸ë“œë¡œ ì´ë™í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n## êµ¬í˜„ë²•\n\níŠ¸ë¦¬ëŠ” í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ ëŒ€í‘œì ìœ¼ë¡œ ë‘ ê°€ì§€ë¥¼ ì‚¬ìš©í•œë‹¤. ë¦¬ìŠ¤íŠ¸ë¥¼ ì´ìš©í•œ êµ¬í˜„ ë°©ë²•ê³¼ êµ¬ì¡°ì²´(or Class)ë¥¼ ì´ìš©í•œ êµ¬í˜„ì´ë‹¤.\n\n### 1. êµ¬ì¡°ì²´\n\nì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë„ë¦¬ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤. ë¨¼ì € Treeë¼ëŠ” êµ¬ì¡°ì²´(or Class)ë¥¼ ì •ì˜í•œë‹¤.\n\n```python\nclass Tree:\n  def __init__(self, value, subtrees):\n    self.root = value\n    self.subtrees = subtrees\n    # í•„ìš”ì— ë”°ë¼ì„œ, ë¶€ëª¨ì˜ ì •ë³´ê°€ í•„ìš”í•œ ê²½ìš°ì—ëŠ” parentë¥¼ ì €ì¥í•  ìˆ˜ë„ ìˆë‹¤.\n```\n\nì´ì§„ íŠ¸ë¦¬ì— ê²½ìš°ì—ëŠ” ë‹¨ ë‘ ê°œì˜ subtreeë¡œ ì •í•´ì ¸ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¥¼ ë¹ˆë²ˆíˆ ì‚¬ìš©í•œë‹¤.\n\n```python\nclass Tree:\n  def __init__(self, value, left, right):\n    self.root = value\n    self.left = left\n    self.right = right\n```\n\nì´ë¥¼ í†µí•´ì„œ ê° Tree typeì˜ ë³€ìˆ˜ëŠ” ëª¨ë‘ ë£¨íŠ¸ ê°’ê³¼ subtreeë“¤ì„ í¬í•¨í•˜ê²Œ ëœë‹¤.\n\n### 2. ë¦¬ìŠ¤íŠ¸\n\níŠ¸ë¦¬ì˜ ê° ì •ì ì˜ ìœ ì¼í•œ íŠ¹ì§•ì„ ì´ìš©í•˜ì—¬ í‘œí˜„í•œë‹¤. depthì™€ ì™¼ìª½ì—ì„œë¶€í„° ëª‡ ë²ˆì§¸ ì¸ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” indexë¥¼ ê°™ì´ ì‚¬ìš©í•˜ë©´, ì •ì ì˜ ìœ„ì¹˜ë¥¼ íŠ¹ì •í•˜ì—¬ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.\në”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì€ ì‹ìœ¼ë¡œ Treeì˜ ì •ì ì„ í‘œí˜„í•˜ëŠ” ê²ƒì´ë‹¤.\n\në§Œì•½, ì´ì§„ íŠ¸ë¦¬ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ì‹ìœ¼ë¡œ í•´ë‹¹ ë…¸ë“œê°€ ì–´ëŠ ê³³ì— ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.\n\n1. $\\text{tree}[2^{i} + j] = $ depthê°€ iì´ê³ , ì™¼ìª½ì—ì„œ jë§Œí¼ ë–¨ì–´ì§„ ì •ì ì´ ì§€ë‹Œ ê°’\n2. $\\text{tree}[i]$ì˜ ìì‹ì€ $\\text{tree}[i \\times 2]$ ë˜ëŠ” $\\text{tree}[i \\times 2 + 1]$ì´ë‹¤.\n\n![tree-to-list](/images/tree-to-list.jpeg)\n\nì´ë•Œ ë°˜ë“œì‹œ ì£¼ì˜í•  ì ì€ ì‹œì‘ ì ì€ 0ì´ ì•„ë‹ˆë¼ 1ì´ ë˜ë„ë¡ í•´ì•¼í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.\n\nì´ëŠ” íŠ¸ë¦¬ì˜ ë…¸ë“œì˜ ìˆ˜ê°€ ì œí•œë˜ì–´ ìˆëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë©°, íš¨ìœ¨ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ìµœëŒ€í•œ Complete Treeí˜•íƒœë¥¼ ê°–ì¶”ì–´ì•¼ í•œë‹¤. ì™œëƒí•˜ë©´, ì™¼ìª½ì—ì„œë¶€í„° ë°ì´í„°ë¥¼ ì±„ìš°ê¸° ë•Œë¬¸ì— Complete Tree í˜•íƒœì˜ êµ¬ì¡°ì—¬ì•¼ì§€ë§Œ ìµœëŒ€ íš¨ìœ¨ì„ ë‚¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n## Binary Search Tree\n\nê²€ìƒ‰ íŠ¸ë¦¬(Search Tree)ë€ íŠ¸ë¦¬ë¥¼ ì´ìš©í•´ì„œ ê²€ìƒ‰ì„ ì‰½ê²Œí•˜ê¸° ìœ„í•´ì„œ **ì¼ì •í•œ ê·œì¹™**ì— ë”°ë¼ì„œ ë°ì´í„°ë¥¼ ì €ì¥í•œë‹¤. ì´ ë°©ì‹ì€ í•´ë‹¹ ìë£Œë¥¼ ì¡°íšŒí•˜ëŠ” ê³¼ì •ì´ êµ‰ì¥íˆ ë‹¨ìˆœí™” ë  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì„ ê°€ì§„ë‹¤. ê·¸ ì¤‘ì—ì„œë„ Binary Search TreeëŠ” ì¼ì •í•œ ê·œì¹™ì„ `ë°ì´í„°ì˜ ì‚½ì… ì‹œì— í˜„ì¬ ìœ„ì¹˜ì— ì •ì ë³´ë‹¤ ë°ì´í„°ê°€ í¬ë‹¤ë©´ ì˜¤ë¥¸ìª½, ì‘ë‹¤ë©´ ì™¼ìª½ì— ë°°ì¹˜ì‹œí‚¨ë‹¤.`ë¡œ ì •ì˜í•œ ê²½ìš°ë¥¼ ë§í•œë‹¤. ì´ë ‡ê²Œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê²Œ ë˜ë©´, ë§ˆì¹˜ ì´ì§„ ê²€ìƒ‰ì„ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì°¾ëŠ” ê²ƒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´, í›„ì— ë‚´ê°€ ë°ì´í„°ë¥¼ ì°¾ì„ ë•Œ í˜„ì¬ ìœ„ì¹˜ì˜ ê°’ì„ í™•ì¸í•˜ê³  í•´ë‹¹ ê°’ë³´ë‹¤ ì°¾ê³ ì í•˜ëŠ” ê°’ì´ í¬ë‹¤ë©´ ë°˜ë“œì‹œ ì˜¤ë¥¸ìª½ì— ìˆì„ ê²ƒì´ë¼ëŠ” í™•ì‹ ì„ ê°€ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, ê²€ìƒ‰ ë²”ìœ„ë¥¼ ì¤„ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ë§ˆì¹˜ ì´ì§„ ê²€ìƒ‰ì„ í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë°ì´í„°ì˜ ë²”ìœ„ë¥¼ í•œì •í•  ìˆ˜ ìˆë‹¤. ì´ê²Œ ì•ì—ì„œ ì„¤ëª…í–ˆë˜ íŠ¸ë¦¬ê°€ ê°€ì§€ëŠ” ë¶„ë¥˜ì˜ ê¸°ëŠ¥ì´ë‹¤. ê¸°ì¡´ì˜ ë¦¬ìŠ¤íŠ¸ì—ì„œëŠ” ì •ë ¬ì„ í†µí•´ì„œ index ë²ˆí˜¸ê°€ ìˆœì„œë¼ëŠ” ì •ë³´ë¥¼ ë‹´ê³  ìˆì—ˆë‹¤ë©´, Binary Search Treeì—ì„œëŠ” ì¢Œìš° subtreeê°€ ëŒ€ì†Œ ë¹„êµë¼ëŠ” ì •ë³´ë¥¼ ê°–ê³  ìˆëŠ” ê²ƒì´ë‹¤.\n\ní•˜ì§€ë§Œ, ìœ„ì—ì„œ ì‚´í´ë³´ì•˜ë‹¤ì‹œí”¼ ìœ ì˜í•  ì ì€ ë°ì´í„°ê°€ ì¢Œìš°ë¡œ ê³¨ê³ ë£¨ í¼ì ¸ ìˆì–´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤. ë§Œì•½, ë°ì´í„°ê°€ ì¢Œì¶•ì—ë§Œ ì ë ¤ìˆë‹¤ë©´(skewed), ê²°êµ­ì—ëŠ” ë¶„ë¥˜ë¡œ ì–»ëŠ” ì´ë“ì´ ì—†ì–´ì§„ë‹¤. ë”°ë¼ì„œ, ê²€ìƒ‰ ì‹œì—ëŠ” ì‹œê°„ ë³µì¡ë„ê°€ $O(N~\\log{N})$ ì´ë‹¤.\n\n### Skew í•´ê²°ì±…\n\nì—¬ê¸°ì„œëŠ” Skewì— ëŒ€í•œ ìì„¸í•œ í•´ê²°ì±…ì„ ì œì‹œí•˜ì§€ ì•ŠëŠ”ë‹¤. ì•„ë˜ í‚¤ì›Œë“œë¥¼ ì œì‹œí•˜ì˜€ìœ¼ë‹ˆ ì´ë¥¼ ê²€ìƒ‰í•˜ì—¬ ì°¾ì•„ë³´ê¸¸ ê¶Œì¥í•œë‹¤. (í›„ì— ì •ë¦¬í•  ì‹œê°„ì´ ìˆë‹¤ë©´, ì •ë¦¬í•˜ê² ë‹¤.)\n\n- ê° ì •ì ì— ìš°ì„ ìˆœìœ„ë¥¼ ëœë¤ ê°’ìœ¼ë¡œ ì§€ì •í•˜ê³ , ê° subtreeì˜ rootëŠ” í•´ë‹¹ subtreeì—ì„œì˜ ëœë¤ ê°’ì˜ ì´í•©ì„ ìš°ì„ ìˆœìœ„ë¡œ ê°€ì§€ê²Œ í•˜ì—¬ íŠ¹ì • íŠ¸ë¦¬ê°€ ë°ì´í„°ì˜ ìˆœì„œì— ì˜í•´ì„œ skewë˜ëŠ” í˜„ìƒì„ ë§‰ê¸° ìš°íˆë‚˜ ë°©ë²•ì´ ìˆë‹¤.(Treap)\n- Treeì˜ Skewê°€ ë°œìƒí•  ì‹œì— rotationì´ë¼ëŠ” ë°©ë²•ì„ í†µí•´ì„œ Skewë¥¼ í•´ê²° ì‹œí‚¤ëŠ” ë°©ë²•ë„ ìˆë‹¤. (AVL Tree)\n- ë¹¨ê°•ê³¼ ê²€ì •ì´ë¼ëŠ” ì´ì§„ ì •ë³´ë¥¼ ì¶”ê°€ í™œìš©í•˜ì—¬ í•´ê²°í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤. (Red Black Tree)\n\n## Advanced Topic\n\nì•„ë˜ ì„¤ëª…ëœ Treeì— ëŒ€í•œ ì •ë³´ëŠ” ì•ìœ¼ë¡œ ì°¨ê·¼ì°¨ê·¼ í¬ìŠ¤íŒ…í•  ê³„íšì´ë‹¤.\n\n- DFS Tree\n- Segment Tree\n- Fenwick Tree\n- Heap\n","slug":"tree","date":"2022-04-30 17:58","title":"Tree","category":"Algorithm","tags":["ìë£Œêµ¬ì¡°","Graph"],"desc":"ìš°ë¦¬ê°€ ìë£Œë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ê°€ì§€ ë°©ë²•ì´ í•„ìš”í•˜ë‹¤. ê·¸ ì¤‘ì—ì„œë„ ì—°ê´€ì„±ì„ ê°€ì§€ëŠ” ë°ì´í„°ë¥¼ ì •ë¦¬í•˜ëŠ” ê²½ìš°ì—ëŠ” ì„ í˜•ì ì¸ listë§Œìœ¼ë¡œëŠ” ë„ˆë¬´ë‚˜ ë¶€ì¡±í•  ìˆ˜ë„ ìˆë‹¤. í•˜ì§€ë§Œ, Graphë¥¼ ì´ìš©í•˜ê¸°ì—ë„ ë°ì´í„°ì˜ ì–‘ì´ ë°©ëŒ€í•´ì§€ê³ , ê·œì¹™ì´ ì—†ê¸° ë•Œë¬¸ì— ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ëŠ” ì—°ì‚°ì—ì„œ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í•˜ê²Œ ëœë‹¤.ë”°ë¼ì„œ, ë³´ë‹¤ ê·œì¹™ì ì¸ í˜•íƒœë¥¼ ê°€ì§€ë©´ì„œ, ê° ì§€ì ê°„ì˜ ê´€ê³„ë¥¼ ê°€ì§€ê³ , ë” ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ì°¾ê¸° ìœ„í•´ì„œ ê³ ì•ˆëœ ê²ƒì´ íŠ¸ë¦¬ì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\ní•´ë‹¹ Postingì—ì„œëŠ” Moduloì—°ì‚°ì˜ ì •ì˜ì™€ íŠ¹ì§•ì„ ì´í•´í•˜ê³ , ì´ë¥¼ ì´ìš©í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì†Œê°œí•©ë‹ˆë‹¤.\n\nì‚¬ì¹™ì—°ì‚°ê³¼ ê°™ì€ ì—°ì‚°ìì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, modulo ì—°ì‚°ì€ ê¸°ì¡´ ì‚¬ì¹™ì—°ì‚°ê³¼ëŠ” ë‹¤ë¥¸ ë‹¤ì–‘í•œ íŠ¹ì§•ì„ ê°€ì§€ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì •ë¦¬í•˜ê³  ì´í•´í•˜ëŠ” ê²ƒì€ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n## Modulo ì—°ì‚°\n\nìš°ì„  modulo ì—°ì‚°ì´ë€ ë¬´ì—‡ì¸ì§€ë¶€í„° ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.\n\n$$a = bq + r$$\n\n$$r = a \\mod b = a \\mod q$$\n\nex.\n\n1. $100 \\mod 3 = 1$\n2. $12 \\mod 32 = 12$\n3. $123 \\mod 11 = 2$\n4. $1 \\mod 1 = 0$\n\në¡œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì‰½ê²Œ ë§í•´ì„œ, aì™€ bì— ëŒ€í•´ì„œ, ë‚˜ëˆ—ì…ˆí•œ ë‚˜ë¨¸ì§€ë¥¼ ë°˜í™˜í•˜ëŠ” ì—°ì‚°ìì…ë‹ˆë‹¤.\n\nì´ëŠ” ì—¬ëŸ¬ programming languageì—ì„œëŠ” % í‘œê¸°ë¡œ ë‚˜íƒ€ë‚´ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì•„ë˜ì—ì„œ ë¶€í„°ëŠ” %ë¡œ í‘œê¸°í•©ë‹ˆë‹¤.\n\nì´ ì—°ì‚°ìëŠ” ê¸°íƒ€ ì—¬ëŸ¬ ì•Œê³ ë¦¬ì¦˜ì—ì„œ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì— íŠ¹ì§•ì„ ì•Œì•„ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n## íŠ¹ì§•\n\n1. ì—°ì‚° ê²°ê³¼ëŠ” 0ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ê³  ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ê°’($b$)ë³´ë‹¤ëŠ” ì‘ìŠµë‹ˆë‹¤.\n2. ë§Œì•½, modulo ì—°ì‚°ì„ í–ˆì„ ë•Œ, ê²°ê³¼ê°€ ê°™ë‹¤ë©´, ë‘ ì •ìˆ˜ëŠ” **í•©ë™**ì´ë¼ê³  í•©ë‹ˆë‹¤. ì´ì— ë”°ë¼, í•©ë™ì¸ ì •ìˆ˜ëŠ” ë¬´í•œíˆ ë§ìŠµë‹ˆë‹¤.\n\n## ì—°ì‚° íŠ¹ì§•\n\n1. **ë§ì…ˆì˜ í•­ë“±ì›(0)ì´ ì¡´ì¬í•©ë‹ˆë‹¤.**  \n    $(A + 0) \\% C = A \\% C$\n2. **ë§ì…ˆì˜ ì—­ì›(-A = C-A)ì´ ì¡´ì¬í•©ë‹ˆë‹¤.**  \n    $-A \\% C = (C - A) \\% C$  \n    ex) $-105 \\% 100 = -5 \\% 100 = 95$\n3. $(A+B) \\% C = \\{(A\\%C) + (B\\%C)\\} \\% C$  \n    ex) $54 \\% 17 = \\{(29\\%17) + (25\\%17)\\} \\% 17 = (12+8) \\%17 = 3 $\n4. $(A-B) \\% C = \\{(A\\%C) - (B\\%C)\\} \\% C$  \n    ex) $54 \\% 17 = \\{(70\\%17) - (16\\%17)\\} \\% 17 = (2-16) \\%17 = -14 \\% 17 = 3 $  \n5. $(A \\times B) \\% C = \\{(A\\%C) \\times (B\\%C)\\} \\% C$  \n    ex) $960 \\% 17 = \\{(20\\%17) \\times (18\\%17)\\} \\% 17 = (3 \\times 1) \\%17 = 3 $\n6. **ì •ìˆ˜ k, pì— ëŒ€í•˜ì—¬, pê°€ kì˜ ì•½ìˆ˜ë¼ë©´,**  \n    $A^k \\% C = (A^{k \\over p}\\%C)^p \\% C$  \n    ex) $2^{10}(=1024) \\% 29 = (2^5(=32) \\% 29)^2 \\%29 = 3^2 \\% 29 = 9$\n7. **ê³±ì…ˆì˜ í•­ë“±ì›(1)ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ($ C \\ge 2$)**  \n    $A \\times 1 \\% C = A \\% C$\n8. **ê³±ì…ˆì˜ ì—­ì›(A^{-1})ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.**  \n    $A \\times A^{-1} \\% C = 1 $  \n    í•˜ì§€ë§Œ, ì´ë¥¼ êµ¬í•˜ëŠ” ê²ƒì€ ì§ì ‘ í•´ë³´ëŠ” ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n9. **ê³±ì…ˆì˜ ì—­ì›ì„ í†µí•´ì„œ ë‚˜ëˆ—ì…ˆì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**  \n    $ ({B \\over{A}} ) \\% C = B \\times A^{-1} \\% C$\n\nìœ„ì™€ ê°™ì€ íŠ¹ì§•ë“¤ ë•Œë¬¸ì—, ìˆ˜ì˜ ë²”ìœ„ë¥¼ ì œí•œí•˜ëŠ” ë¬¸ì œë¥¼ í‘¼ë‹¤ê³ í•  ë•Œ, êµ‰ì¥íˆ ìœ ìš©í•˜ê²Œ ì´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, modulo í•©ë™ë¼ë¦¬ëŠ” ì‚¬ì¹™ì—°ì‚°ì˜ ì—¬ëŸ¬ íŠ¹ì§•ë“¤ì„ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\nêµí™˜ ë²•ì¹™, ê²°í•©ë²•ì¹™, ì—­ì›, í•­ë“±ì›ì´ ëª¨ë‘ ì¡´ì¬í•©ë‹ˆë‹¤.\n\në˜í•œ, ë§Œì•½, **ë‚˜ëˆ„ëŠ” ìˆ˜ê°€ ë§Œì•½ ì†Œìˆ˜ë¼ë©´**, ë‚˜ëˆ—ì…ˆì„ ë” ì‰½ê²Œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në°”ë¡œ **Fermat's little theorem**(í˜ë¥´ë§ˆì˜ ì†Œì •ë¦¬)ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ì— ë”°ë¥´ë©´, $A^{n-1} \\% C = 1$ì´ë¼ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ë¥¼ í†µí•´ì„œ, ìš°ë¦¬ëŠ” ì•„ë˜ë¥¼ ì¦ëª…í•  ìˆ˜ ìˆìœ¼ë©°,\n\n$$ A \\times A^{-1} \\% C = 1Â  % C $$\n\n$$ A \\times A^{-1} \\% C = A^{n-1} \\% C $$\n\n$$ A^{-1} \\% C = A^{n-2} \\% C $$\n\nê²°ë¡ ìƒ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜ëˆ—ì…ˆì„ ë³€í˜•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n$$ {A\\over B} \\% C = A\\times B^{n-2} \\% C$$\n\n## ìœ í´ë¦¬ë“œ í˜¸ì œë²•\n\nìµœëŒ€ê³µì•½ìˆ˜(GCD), ìµœì†Œê³µë°°ìˆ˜(LCM)ë¥¼ êµ¬í•˜ëŠ” ë¬¸ì œì—ì„œ ê°€ì¥ ë‹¨ê³¨ë¡œ ì‚¬ìš©ë˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤.\n\ní•´ë‹¹ ì•Œê³ ë¦¬ì¦˜ì˜ ë™ì‘ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n1. í° ìˆ˜(p)ë¡œ ì‘ì€ ìˆ˜(q)ë¥¼ modulo ì—°ì‚°í•˜ì—¬, ê²°ê³¼ê°’(r)ì„ ì–»ìŠµë‹ˆë‹¤.\n2. rì´ 0ì´ë¼ë©´, qëŠ” ìµœëŒ€ê³µì•½ìˆ˜ì…ë‹ˆë‹¤.\n3. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´, qì™€ rì„ ê°–ê³ , 1ë¡œ ëŒì•„ê°€ì„œ ë‹¤ì‹œ ì‹œí–‰í•©ë‹ˆë‹¤.\n\nì´ ê²°ê³¼ë¥¼ í†µí•´ì„œ, ìµœëŒ€ê³µì•½ìˆ˜(GCD)ë¥¼ êµ¬í•  ìˆ˜ ìˆê³ , ëª¨ë‘ê°€ ì•Œë‹¤ì‹œí”¼, ìµœì†Œê³µë°°ìˆ˜ëŠ” ${p \\times q}\\over {gcd}$ì´ë¯€ë¡œ, ì‰½ê²Œ ìœ ë„ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n","slug":"modulo","date":"2022-04-01 09:00","title":"modulo","category":"Algorithm","tags":["Modulo","ë‚˜ë¨¸ì§€"],"desc":"í•´ë‹¹ Postingì—ì„œëŠ” Moduloì—°ì‚°ì˜ ì •ì˜ì™€ íŠ¹ì§•ì„ ì´í•´í•˜ê³ , ì´ë¥¼ ì´ìš©í•œ ì•Œê³ ë¦¬ì¦˜ì„ ì†Œê°œí•©ë‹ˆë‹¤.ì‚¬ì¹™ì—°ì‚°ê³¼ ê°™ì€ ì—°ì‚°ìì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, modulo ì—°ì‚°ì€ ê¸°ì¡´ ì‚¬ì¹™ì—°ì‚°ê³¼ëŠ” ë‹¤ë¥¸ ë‹¤ì–‘í•œ íŠ¹ì§•ì„ ê°€ì§€ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì •ë¦¬í•˜ê³  ì´í•´í•˜ëŠ” ê²ƒì€ ì¤‘ìš”í•©ë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\n**êµ¬ê°„ ëˆ„ì í•©**ì„ êµ¬í•˜ëŠ” ê²½ìš°ê°€ ë§ì´ ë°œìƒí•œë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ë„ˆë¬´ ë§ì€ ê³µê°„ì„ ì“¸ ìˆ˜ëŠ” ì—†ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ í¬ê¸°ê°€ 10,000ì¸ ì§‘í•©ì—ì„œ ëˆ„ì í•©ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” íŠ¹ì • ìˆ˜ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•˜ê³ ì í•œë‹¤ê³  ê°€ì •í•˜ì.\n\nì´ ê²½ìš°ì— ìš°ë¦¬ëŠ” ëª¨ë“  ëˆ„ì í•©ì„ ì €ì¥í•˜ê¸°ì—ëŠ” ê³µê°„ì´ ë„ˆë¬´ í¬ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê³ , ì´ë¥¼ ê·¸ë ‡ë‹¤ê³  Brute Forceí•˜ê²Œ ìˆ˜í–‰í•˜ê¸°ì—ë„ ì‹œê°„ì´ ì¶©ë¶„í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” íš¨ìœ¨ì ìœ¼ë¡œ ëˆ„ì í•© ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìë£Œêµ¬ì¡°ë¥¼ ë§Œë“¤ì—ˆë‹¤.\nê·¸ê²ƒì´ `Segment Tree`ì™€ `Fenwick Tree`ì´ë‹¤. ì´ë“¤ì„ í•˜ë‚˜ì”© ì‚´í´ë³´ë„ë¡ í•˜ì.\n\n## Segment Tree\n\nì´ì „ì— tree postingì—ì„œ Treeë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ Listë¥¼ ì†Œê°œí•˜ì˜€ë‹¤. ì—¬ê¸°ì„œë„ ê·¸ ë°©ì‹ì„ ì´ìš©í•´ì•¼ í•˜ë‹ˆ ì˜ ì•Œì§€ ëª»í•˜ê² ë‹¤ë©´, í•œ ë²ˆ ë³´ê³  ì˜¤ë„ë¡ í•˜ì. ğŸ‘‰ [posting](/posts/tree)\n\nìš°ì„  Segment TreeëŠ” ëˆ„ì í•©ì„ í‘œí˜„í•˜ê¸° ìœ„í•œ ì´ì§„ íŠ¸ë¦¬ í˜•íƒœì˜ ìë£Œêµ¬ì¡°ì´ë‹¤. ì´ì „ì— íŠ¸ë¦¬ëŠ” ë°ì´í„°ë¥¼ ë¶„ë¥˜í•˜ê¸° ìœ„í•´ ìì£¼ ì‚¬ìš©í•œë‹¤ê³  í•˜ì˜€ëŠ”ë°, ì´ê³³ì—ì„œë„ ë™ì¼í•˜ë‹¤.\n\nì´ëŠ” íŠ¸ë¦¬ì˜ leaf nodeê°€ ì›ë˜ ëˆ„ì í•©ì„ ë°°ìš°ê³ ì í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ì˜ ì›ì†Œê°€ ëœë‹¤. ê·¸ë¦¬ê³  ê·¸ ë¶€ëª¨ëŠ” í•´ë‹¹ ì›ì†Œë“¤ì˜ í•©ìœ¼ë¡œ í‘œí˜„ëœë‹¤. ì´ë ‡ê²Œ í•˜ì—¬ rootëŠ” ì „ì²´ ë¦¬ìŠ¤íŠ¸ì˜ ì´í•©ì´ ë˜ëŠ” í˜•íƒœë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ë‹¤.\n\nì´ëŸ¬í•œ ìë£Œ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë˜ë©´ ìš°ë¦¬ëŠ” ë‘ ê°€ì§€ì˜ ì¥ì ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\n\n1. íŠ¹ì • êµ¬ê°„ì—ì„œì˜ ëˆ„ì í•©ì„ êµ‰ì¥íˆ ë¹ ë¥´ê²Œ êµ¬í•  ìˆ˜ ìˆë‹¤. ($\\log{N}$)\n2. ì—…ë°ì´íŠ¸ ì‹œì—ë„ ê¹¨ì§€ì§€ ì•Šê³ , ì´ë¥¼ ë¹ ë¥´ê²Œ ì ìš©í•  ìˆ˜ ìˆë‹¤. ($\\log{N}$)\n\n### ëˆ„ì í•© êµ¬í•˜ê¸° in segment\n\nìš°ì„  í•´ë‹¹ íŠ¸ë¦¬ê°€ ì´ë¯¸ ë§Œë“¤ì–´ì¡Œë‹¤ëŠ” ê°€ì •í•˜ì—ì„œ ì–´ë–»ê²Œ $\\log{N}$ ë§Œì— **ëˆ„ì í•©ì„ ì°¾ì„ ìˆ˜ ìˆëŠ”ì§€**ë¥¼ í™•ì¸í•´ë³´ì.\n\nì´ëŠ” 1ë²ˆì§¸ index bì—ì„œë¶€í„° 6ë²ˆì§¸ index gê¹Œì§€ì˜ í•©ì„ êµ¬í•˜ëŠ” ì—°ì‚°ì´ë‹¤.\n\n![segment tree find](/images/segment-tree-find.jpeg)\n\nìœ„ì—ì„œ ë¶€í„° íƒìƒ‰ì„ í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.\n\n1. ë‚´ê°€ ì¡°íšŒí•˜ê³ ì í•˜ëŠ” ë²”ìœ„ê°€ í•´ë‹¹ ì§€ì ì´ í‘œí˜„í•˜ëŠ” ë²”ìœ„ì˜ ë°–ì´ë¼ë©´, í•´ë‹¹ ì§€ì ì€ ì˜ë¯¸ì—†ìœ¼ë¯€ë¡œ, íƒìƒ‰ì„ ì¤‘ì§€í•œë‹¤.\n2. ì¡°íšŒ ë²”ìœ„ê°€ í•´ë‹¹ ì§€ì ì„ ì™„ì „ í¬í•¨í•œë‹¤ë©´, í•´ë‹¹ê°’ì„ ë°˜í™˜í•œë‹¤. (ê°€ì¥ í° ë²”ìœ„ë¥¼ í¬í•¨í•˜ëŠ” ì§€ì ì—ì„œë¶€í„° íƒìƒ‰í•˜ê¸° ë•Œë¬¸ì— ì¡°íšŒ ë²”ìœ„ì— ì—‰ëš±í•œ ê²ƒì´ ì„ì´ì§€ ì•ŠëŠ”ë‹¤.)\n3. ë§Œì•½, ê·¸ë ‡ì§€ ì•Šë‹¤ë©´ í•´ë‹¹ ì§€ì ì— í¬í•¨ëœ ì˜ì—­ì„ ë” ì¶”ì¶œí•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— í•˜ìœ„ ì§€ì ìœ¼ë¡œ ì´ë™í•œë‹¤.\n\në…¸ë“œ ë°©ë¬¸ íšŸìˆ˜ê°€ ëŒ€ëµ $\\log{N}$ ê¹Œì§€ ê°ì†Œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n### ëˆ„ì í•© ê°±ì‹  in segment\n\nì´ì œ ì‹¤ì œë¡œ **updateë¥¼** ìˆ˜í–‰í•´ë³´ì.\n\n5ë²ˆì§¸ index fì— 1ì„ ë”í•˜ëŠ” ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ê·¸ë¦¼ì´ë‹¤.\n\n![segment tree update](/images/segment-tree-update.jpeg)\n\nìœ„ì—ì„œ ë¶€í„° ë³€ë™ì‚¬í•­ì„ ì ìš©í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.\n\n1. ë‚´ê°€ ì¶”ê°€í•˜ê³ ì í•˜ëŠ” ìœ„ì¹˜ê°€ í•´ë‹¹ ì§€ì ì´ í‘œí˜„í•˜ëŠ” ë²”ìœ„ì˜ ë°–ì´ë¼ë©´, í•´ë‹¹ ì§€ì ì€ ì˜ë¯¸ì—†ìœ¼ë¯€ë¡œ, íƒìƒ‰ì„ ì¤‘ì§€í•œë‹¤.\n2. ì¶”ê°€í•˜ê³ ì í•˜ëŠ” ê°’ì„ í•´ë‹¹ ì§€ì ì— ì¶”ê°€í•œë‹¤.\n3. í•´ë‹¹ ì§€ì ì´ leaf ì¸ì§€ í™•ì¸í•˜ê³ , ë§ë‹¤ë©´ ì¢…ë£Œí•œë‹¤.\n4. ê·¸ë ‡ì§€ ì•Šë‹¤ë©´, í•˜ìœ„ ì§€ì ì„ ë” íƒìƒ‰í•œë‹¤.\n\n### êµ¬í˜„ in segment\n\nì—…ë°ì´íŠ¸ ì‹œì—ë„ ë³µì¡í•œ ì—°ì‚°ì´ ì—†ì´ ë°”ë¡œ ë‚´ë ¤ê°€ë©´ì„œ, ë§ì…ˆì´ í•„ìš”í•œ êµ¬ì—­ì— ë”í•´ì£¼ëŠ” ê²ƒìœ¼ë¡œ ì‰½ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```python\nS = [1,2,3,4,5,6,7]\n# treeì˜ í¬ê¸°ëŠ” ì›ë˜ ì›ë˜ì˜ ë°°ì—´ì˜ í¬ê¸°ë³´ë‹¤ í° 2ì˜ ì œê³±ìˆ˜ * 2 - 1ì´ë‹¤.\n# í•˜ì§€ë§Œ, ì´ë¥¼ ë” ì‰½ê²Œ ë§Œë“œëŠ” ë°©ë²•ì€ ê°„ë‹¨í•˜ê²Œ ê³±í•˜ê¸° 4í•˜ëŠ” ê²ƒì´ë‹¤.\ntree = [0] * (len(S) * 4)\n\n# íŠ¸ë¦¬ë¥¼ êµ¬ì„±í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.\n# ë£¨íŠ¸ì—ì„œë¶€í„° í˜¸ì¶œí•˜ì§€ë§Œ, ê²°ê³¼ëŠ” ë°‘ì—ì„œ ë¶€í„° êµ¬í•˜ë©´ì„œ ì˜¬ë¼ì˜¨ë‹¤.\ndef make_seg(start=0, end=len(S) - 1, cursor=1):\n  if start == end:\n    tree[cursor] = S[start]\n    return tree[cursor]\n  mid = (start + end) // 2\n  tree[cursor] = make_seg(start, mid, 2 * cursor) + \\\n                  make_seg(mid + 1, end, 2 * cursor + 1)\n  return tree[cursor]\n\n# ìœ„ì—ì„œ ë³´ì•˜ë˜ ëˆ„ì í•©ì„ ì¡°íšŒí•˜ëŠ” ì—°ì‚°ì´ë‹¤.\ndef find(left, right, cursor=1, start=0, end=len(S)-1):\n  if left > end or right < start:\n    return 0\n  if left >= start and right <= end:\n    return tree[cursor]\n  mid = (start + end) // 2\n  return find(left, right, cursor * 2, start, mid) \\\n    + find(left, right, cursor * 2 + 1, mid + 1, end)\n\n# ìœ„ì—ì„œ ë³´ì•˜ë˜ ëˆ„ì í•©ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” ì—°ì‚°ì´ë‹¤.\ndef update(idx, diff, cursor=1, start=0, end=len(S) - 1):\n  if idx > end or idx < start:\n    return\n  tree[cursor] += diff\n  if start == end:\n    return\n  mid = (start + end) // 2\n  update(idx, diff, start, mid)\n  update(idx, diff, mid + 1, end)\n\nmake_seg() \nprint(find(1, 6)) # 28\nupdate(3, 5)\nprint(find(1, 6)) # 33\n```\n\n## Fenwick Tree\n\nsegment treeì™€ ë™ì¼í•˜ê²Œ fenwick treeë„ listë¥¼ í†µí•´ì„œ treeë¥¼ í‘œí˜„í•œë‹¤.\në˜í•œ, segment treeì—ì„œëŠ” ê¸°ì¡´ ë°°ì—´ì˜ ì‹œì‘ì ì„ ì–´ë””ë¡œ í•˜ë˜ ìƒê´€ì—†ì—ˆì§€ë§Œ, êµ¬í˜„ ìƒì˜ í¸ì˜ë¥¼ ìœ„í•´ì„œ ê¸°ì¡´ ë°°ì—´ì„ ì™¼ìª½ì—ì„œ í•œ ì¹¸ ë°€ì–´ì£¼ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ Fenwick TreeëŠ” ì´ì§„ìˆ˜ì˜ íŠ¹ì§•ì„ í™œìš©í•œ ì—°ì‚°ì„ í†µí•´ì„œ í•©ì„ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤. ë¨¼ì € Fenwick treeëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ êµ¬ì¡°í™”ëœë‹¤.\n\n![fenwick-tree](/images/fenwick-tree.jpeg)\n\nì¦‰, í•´ë‹¹ ìˆ˜ì˜ ì•½ìˆ˜ ì¤‘ ê°€ì¥ í° 2ì˜ ì œê³± ìˆ˜ë§Œí¼ ìì‹ ì„ í¬í•¨í•œ í•˜ìœ„ ìˆ˜ì˜ ëˆ„ì í•©ì„ í¬í•¨í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë”°ë¼ì„œ, í™€ìˆ˜ì˜ ê²½ìš°ëŠ” ìì‹ ë§Œì„ ëˆ„ì í•©ìœ¼ë¡œ ê°€ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\nì´ë ‡ê²Œ êµ¬ì¡°í™”ëœ ë°ì´í„°ëŠ” LSB(Least Significant Bit, ì´ì§„ìˆ˜ì—ì„œ ê°€ì¥ ì˜¤ë¥¸ìª½ì— ìˆëŠ” bitë¥¼ ì˜ë¯¸í•œë‹¤.)ë¼ëŠ” íŠ¹ì§•ì„ ì´ìš©í•´ì„œ ëˆ„ì í•©ê³¼ í•´ë‹¹ ì›ì†Œë¥¼ í¬í•¨í•œ ëŒ€ìƒë“¤ì„ ì°¾ê¸°ì— ìœ ìš©í•˜ë‹¤.\n\n### ëˆ„ì í•© êµ¬í•˜ê¸° in Fenwick\n\nìš°ì„  Fenwick TreeëŠ” êµ¬ê°„í•©ì„ ë°˜ë“œì‹œ ë§¨ ì²˜ìŒë¶€í„° íŠ¹ì • ìœ„ì¹˜ê¹Œì§€ êµ¬í•˜ëŠ” ì—°ì‚°ë§Œ ìˆ˜í–‰ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ êµ¬ê°„ì´ ì²˜ìŒë¶€í„°ê°€ ì•„ë‹ˆë¼ë©´, Fenwick Treeì˜ ì¡°íšŒ ì—°ì‚°ì„ ë‘ ë²ˆ ìˆ˜í–‰í•˜ì—¬ ë‘ ê°’ì„ ë¹¼ì„œ êµ¬í•œë‹¤.\n\n> ì˜ˆì‹œ\n\n1. hë¼ëŠ” ê°’ì„ ì¡°íšŒí•˜ëŠ” ê²½ìš°  \n  $$\n  \\begin{align}\n      &= origin[8] \\notag \\\\\n      &= sum(8) - sum(7) \\notag \\\\\n      &= fenwick[8] - (fenwick[4 to 7]) \\notag\n  \\end{align}\n  $$\n2. e + f + gì˜ êµ¬ê°„í•©ì´ í•„ìš”í•œ ê²½ìš°  \n  $$\n  \\begin{align}\n      &= origin[5to7] \\notag \\\\\n      &= sum(7) - sum(4) \\notag \\\\\n      &= (fenwick[4 to 7]) - fenwick[4] \\notag\n  \\end{align}\n  $$\n\nì—¬ê¸°ì„œ `sum`ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ parameterë¡œ ë“¤ì–´ì˜¨ ê°’ì˜ LSBì—ì„œ ë¶€í„° 1ì„ ì‚­ì œí•˜ë©´ì„œ ì§„í–‰í•˜ë©´ ëœë‹¤.\nì¦‰, 7ì´ ë“¤ì–´ì™”ë‹¤ë©´, ì´ëŠ” ì´ì§„ìˆ˜ë¡œ $111_{(2)}$ì´ê³ , ì˜¤ë¥¸ìª½ì—ì„œë¶€í„° 1ì„ ë°œê²¬í•  ë•Œë§ˆë‹¤ í•´ë‹¹ ê°’ì„ ëˆ„ì í•©ì— ì¶•ì í•˜ê³ , ì‚­ì œí•˜ë©´ ëœë‹¤.\n\n1. ëˆ„ì í•© accë¥¼ 0ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤.\n2. $111_{(2)}$ëŠ” LSBê°€ 1ì´ë‹¤. ë”°ë¼ì„œ, ëˆ„ì í•©ì— fenwick[$111_{(2)} = 7$]ë¥¼ ë”í•œë‹¤.\n3. $111_{(2)}$ì—ì„œ ë§ˆì§€ë§‰ 1ì„ ì§€ìš´ë‹¤. (ê²°ê³¼ê°’ì€ $110_{(2)}$)\n4. $110_{(2)}$ëŠ” LSBì˜ ë‹¤ìŒì´ 1ì´ë‹¤. ë”°ë¼ì„œ, ëˆ„ì í•©ì— fenwick[$110_{(2)} = 6$]ë¥¼ ë”í•œë‹¤.\n5. $110_{(2)}$ì—ì„œ ë§ˆì§€ë§‰ 1ì„ ì§€ìš´ë‹¤. (ê²°ê³¼ê°’ì€ $100_{(2)}$)\n6. $100_{(2)}$ëŠ” LSBì˜ ë‹¤ë‹¤ìŒì´ 1ì´ë‹¤. ë”°ë¼ì„œ, ëˆ„ì í•©ì— fenwick[$100_{(2)} = 6$]ë¥¼ ë”í•œë‹¤.\n7. $100_{(2)}$ì—ì„œ ë§ˆì§€ë§‰ 1ì„ ì§€ìš´ë‹¤. (ê²°ê³¼ê°’ì€ $000_{(2)}$)\n8. ê²°ê³¼ê°’ì´ 0ì´ë¯€ë¡œ íƒìƒ‰ì„ ì¢…ë£Œí•œë‹¤.\n\n![fenwick-tree-add](/images/fenwick-sum.jpeg)\n\n### ëˆ„ì í•© ê°±ì‹  in fenwick\n\níŠ¹ì • ê°’ì— ëˆ„ì í•©ì„ ê°±ì‹ í•˜ëŠ” ê²ƒ ì—­ì‹œ ê°„ë‹¨í•˜ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. LSBì—ì„œ ê°€ì¥ ê°€ê¹Œìš´ 1ì— 1ì„ ë”í•´ì£¼ëŠ” ì—°ì‚°ì„ ë”í•´ê°€ë©´ì„œ ì—…ë°ì´íŠ¸ë¥¼ ìˆ˜í–‰í•´ì£¼ë©´ ëœë‹¤.\n\n1. $11_{(2)}$ëŠ” LSBê°€ 1ì´ë‹¤. ë”°ë¼ì„œ, fenwick[$11_{(2)} = 3$]ì— ê°’ì„ ë”í•œë‹¤.\n2. $11_{(2)}$ì—ì„œ ê°€ì¥ ì˜¤ë¥¸ìª½ì˜ 1ì„ ë”í•œë‹¤. (ê²°ê³¼ê°’ì€ $100_{(2)}$)\n3. $100_{(2)}$ëŠ” LSBì˜ ë‹¤ë””ìŒì´ 1ì´ë‹¤. ë”°ë¼ì„œ, fenwick[$100_{(2)} = 4$]ì— ê°’ì„ ë”í•œë‹¤.\n4. $100_{(2)}$ì—ì„œ ë§ˆì§€ë§‰ 1ì„ ë”í•œë‹¤. (ê²°ê³¼ê°’ì€ $1000_{(2)}$)\n5. $1000_{(2)}$ëŠ” LSBì˜ ë‹¤ë‹¤ë‹¤ìŒì´ 1ì´ë‹¤. ë”°ë¼ì„œ, ëˆ„ì í•©ì— fenwick[$1000_{(2)} = 8$]ì— ê°’ì„ ë”í•œë‹¤.\n6. ë”ì´ìƒ ë”í•˜ëŠ” ê²ƒì€ ë²”ìœ„ ë°–ì´ë¯€ë¡œ ì¢…ë£Œí•œë‹¤.\n\n![fenwick-tree-update](/images/fenwick-update.jpeg)\n\n### êµ¬í˜„ in fenwick\n\n```python\norigin = [None, 1,2,3,4,5,6,7,8,9]\nfenwick = [0] * len(origin)\n\ndef update(idx, val):\n  while idx < len(fenwick):\n    fenwick[idx] += val\n    idx += (idx & -idx)\n\ndef sum(idx):\n  acc = 0\n  while idx > 0:\n    acc += fenwick[idx]\n    idx -= (idx & -idx)\n  return acc\n\ndef make_fen(origin):\n  for idx in range(1, len(origin)):\n    update(idx, origin[idx])\n\nmake_fen(origin)\nprint(sum(7) - sum(4)) # 18\nupdate(5, 5)\nprint(sum(7) - sum(4)) # 23\n```\n\n## Versus\n\në‘˜ ë‹¤ êµ¬ê°„í•©ì„ êµ¬í•˜ê¸°ì— ì í•©í•œ êµ¬ì¡°ì´ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì€ ì°¨ì´ì ì„ ê°€ì§€ê³  ìˆë‹¤ëŠ” ì ì„ ëª…ì‹œí•˜ì. ìƒëŒ€ì ìœ¼ë¡œ í™œìš©ì„±ì´ ë†’ì€ Segment Treeë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ëŒ€ë‹¤ìˆ˜ ì¢‹ì„ ìˆ˜ ìˆì§€ë§Œ, Fenwick Treeê°€ ê°€ì§€ëŠ” í¬ê¸°ì˜ ì¥ì ê³¼ ì½”ë“œì˜ êµ¬í˜„ì´ ì‰½ë‹¤ëŠ” ì ì€ êµ‰ì¥í•œ ì´ì ì´ë‹¤.\n\n|                    | Segment Tree                                      | Fenwick Tree                  |\n| :----------------- | :------------------------------------------------ | :---------------------------- |\n| find ì‹œê°„ë³µì¡ë„    | $O(\\log{N})$                                      | $O(\\log{N})$                  |\n| update ì‹œê°„ë³µì¡ë„  | $O(\\log{N})$                                      | $O(\\log{N})$                  |\n| ê³µê°„ë³µì¡ë„(ì‚¬ì´ì¦ˆ) | $2^{k + 1}$($2^{k} \\ge$ len(origin))              | len(origin)                   |\n| í™œìš©ì„±             | êµ¬ê°„ ë‚´ í•© ë¿ë§Œ ì•„ë‹ˆë¼ ìµœëŒ€, ìµœì†Œê°’ìœ¼ë¡œ ì‘ìš© ê°€ëŠ¥ | **ì˜¤ì§ êµ¬ê°„ í•©ì—ë§Œ ì‚¬ìš©ê°€ëŠ¥** |\n| êµ¬í˜„ ì½”ë“œ ê¸¸ì´     | ìƒëŒ€ì ìœ¼ë¡œ ê¹€                                     | ìƒëŒ€ì ìœ¼ë¡œ ì§§ìŒ               |\n","slug":"accumerated-number","date":"2022-04-30 14:09","title":"ëˆ„ì í•©","category":"Algorithm","tags":["ìë£Œêµ¬ì¡°","Segment Tree","Fenwick Tree"],"desc":"êµ¬ê°„ ëˆ„ì í•©ì„ êµ¬í•˜ëŠ” ê²½ìš°ê°€ ë§ì´ ë°œìƒí•œë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ë„ˆë¬´ ë§ì€ ê³µê°„ì„ ì“¸ ìˆ˜ëŠ” ì—†ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ í¬ê¸°ê°€ 10,000ì¸ ì§‘í•©ì—ì„œ ëˆ„ì í•©ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” íŠ¹ì • ìˆ˜ì˜ ê²½ìš°ì˜ ìˆ˜ë¥¼ êµ¬í•˜ê³ ì í•œë‹¤ê³  ê°€ì •í•˜ì.ì´ ê²½ìš°ì— ìš°ë¦¬ëŠ” ëª¨ë“  ëˆ„ì í•©ì„ ì €ì¥í•˜ê¸°ì—ëŠ” ê³µê°„ì´ ë„ˆë¬´ í¬ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆê³ , ì´ë¥¼ ê·¸ë ‡ë‹¤ê³  Brute Forceí•˜ê²Œ ìˆ˜í–‰í•˜ê¸°ì—ë„ ì‹œê°„ì´ ì¶©ë¶„í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆë‹¤.ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” íš¨ìœ¨ì ìœ¼ë¡œ ëˆ„ì í•© ì •ë³´ë¥¼ ì €ì¥í•  ìˆ˜ ìˆëŠ” ìë£Œêµ¬ì¡°ë¥¼ ë§Œë“¤ì—ˆë‹¤.ê·¸ê²ƒì´ Segment Treeì™€ Fenwick Treeì´ë‹¤. ì´ë“¤ì„ í•˜ë‚˜ì”© ì‚´í´ë³´ë„ë¡ í•˜ì.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"},{"content":"\n## Intro\n\nì†Œìˆ˜ì°¾ê¸°ëŠ” êµ‰ì¥íˆ ë§ì€ í”„ë¡œê·¸ë˜ë° ì±…ì—ì„œ forë¬¸ ì…ë¬¸ ì‹œì— ì‚¬ìš©í•˜ëŠ” ì˜ˆì œë¡œ ë§ì´ ì‚¬ìš©ëœë‹¤.\nì—¬ê¸°ì„œëŠ” ì†Œìˆ˜ë¥¼ ì°¾ê¸° ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ë¥¼ ì œì‹œí•œë‹¤.\n\n---\n\në§Œì•½ ì´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , ì†Œìˆ˜ë¥¼ ì°¾ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n```python\nprimes = [2]\n\nmax_num = 100_000\nfor num in range(3, max_num+1):\n  is_prime = True\n  max_prime = inr(num ** 0.5)\n  for prime in primes:\n    if num % prime == 0:\n      is_prime = False\n      break\n    if prime > max_prime:\n      break\n  if is_prime:\n    primes.append(num)\n```\n\nì´ëŠ” ì•„ë˜ì˜ ìˆ˜ë¶€í„° ì†Œìˆ˜ë¥¼ ì°¾ìœ¼ë©´ì„œ ì§„í–‰í•˜ê³ , ì†Œìˆ˜ê°€ ìˆë‹¤ë©´ ë‹¤ìŒì— ìˆ˜ë¥¼ ì°¾ì„ ë•Œ, ì´ë¥¼ ì´ìš©í•´ì„œ ì†Œìˆ˜ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n(ì—¬ê¸°ì„œ sqrtë¥¼ ì´ìš©í•œ ì´ìœ ëŠ” ì†Œìˆ˜ê°€ ì•„ë‹ˆë¼ë©´ ì•½ìˆ˜ëŠ” ë‘ ìˆ˜ì˜ ê³±ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆì–´ì•¼ í•˜ë¯€ë¡œ, ì œê³±ìˆ˜ê¹Œì§€ë§Œ í™•ì¸í•´ë„ ì¶©ë¶„í•˜ë‹¤.)\ní•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ ì†Œìˆ˜ë¥¼ ë§¤ ë°˜ë³µë¬¸ë§ˆë‹¤ ë°˜ë³µí•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ ë¶ˆí•„ìš”í•œ ë™ì‘ì„ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ì„œ ë²”ìœ„ê°€ ì •í•´ì ¸ ìˆëŠ” ì†Œìˆ˜ë¥¼ ì°¾ì„ ê²½ìš°ì—ëŠ” ì—ë¼í† ìŠ¤í…Œë„¤ì„œì˜ ì²´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤.\n\nì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ëŠ” ë°°ì—´ì˜ indexë¥¼ ìˆ˜ì˜ ê°’ìœ¼ë¡œ í•˜ê³ , valueë¥¼ ì†Œìˆ˜ ì—¬ë¶€ë¡œ ë‚˜íƒ€ë‚´ëŠ” ë¹„íŠ¸ë§ˆìŠ¤í¬ í˜•íƒœì´ë‹¤. (*ë¹„íŠ¸ ë§ˆìŠ¤í¬ : 0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§„ ì²´ë¡œ, indexë¥¼ í†µí•´ì„œ ë¬´ì–¸ê°€ë¥¼ ê²€ìƒ‰í•  ë•Œ, O(1)ë¡œ ì—°ì‚°í•  ìˆ˜ ìˆëŠ” ìë£Œêµ¬ì¡°)\n\nì—¬ê¸°ì„œ, ì†Œìˆ˜ë¥¼ ì°¾ì„ ë•Œë§ˆë‹¤ ì´ë¥¼ ì•½ìˆ˜ë¡œ ê°–ëŠ” ëª¨ë“  ìˆ˜ë“¤ì„ ì†Œìˆ˜ê°€ ì•„ë‹ˆë¼ê³  ë§ˆí‚¹í•˜ì—¬ ì‰½ê²Œ O($N^{1\\over{2}}$)ë§Œì— í•´ë‹¹ ë²”ìœ„ì•ˆì˜ ëª¨ë“  ì†Œìˆ˜ë¥¼ íŒë³„í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤.\n\n```python\nN = 100_000\nis_primes = [True] * (N+1)\n\nfor num in range(2, int(N ** 0.5) +1):\n    if not is_primes[num]:\n        continue\n    for j in range(2 * num, N+1, num):\n        is_primes[j] = False\n\nprimes = [i for i in range(2, n) if is_primes[i] == True]\n```\n","slug":"find-prime","date":"2022-05-01 14:23","title":"ì†Œìˆ˜ì°¾ê¸°","category":"Algorithm","tags":["ì†Œìˆ˜ì°¾ê¸°","ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´"],"desc":"ì†Œìˆ˜ì°¾ê¸°ëŠ” êµ‰ì¥íˆ ë§ì€ í”„ë¡œê·¸ë˜ë° ì±…ì—ì„œ forë¬¸ ì…ë¬¸ ì‹œì— ì‚¬ìš©í•˜ëŠ” ì˜ˆì œë¡œ ë§ì´ ì‚¬ìš©ëœë‹¤.ì—¬ê¸°ì„œëŠ” ì†Œìˆ˜ë¥¼ ì°¾ê¸° ìœ„í•œ ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ì—ë¼í† ìŠ¤í…Œë„¤ìŠ¤ì˜ ì²´ë¥¼ ì œì‹œí•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/algorithm.png"}],"Computer Architecture":[{"content":"\n## Intro\n\ní•´ë‹¹ ë‚´ìš©ì€ ì»´í“¨í„° êµ¬ì¡°ë¥¼ ë” ì˜ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ë…¼ë¦¬íšŒë¡œì˜ ë‚´ìš©ì„ ì¶•ì•½í•˜ì—¬ ì •ë¦¬í•œ í¬ìŠ¤íŒ…ì´ë‹¤.\n\nì»´í“¨í„° íšŒë¡œì—ì„œëŠ” ëª¨ë“  ì—°ì‚°ì´ ì´ì§„ìˆ˜ë¡œ ì´ë£¨ì–´ì§„ë‹¤. ê·¸ ì´ìœ ëŠ” ë†’ì€ ì „ì••ì´ íë¥¼ ë•Œë¥¼ 1, ê·¸ë ‡ì§€ ì•Šì„ ë•Œë¥¼ 0ìœ¼ë¡œ ì •ì˜ë¥¼ í•˜ì—¬ ì´ë¥¼ í†µí•´ì„œ ê°’ì„ êµ¬ë¶„í•˜ê¸° ë•Œë¬¸ì´ë©°, ì´ê²ƒì´ ìš°ë¦¬ê°€ ì´ì§„ìˆ˜ ì²´ê³„ì—ì„œ ì»´í“¨í„° ì—°ì‚°ì„ í‘œí˜„í•˜ëŠ” ì´ìœ ì´ë‹¤.\n\në§Œì•½, ì´ë¥¼ ì‚¼ì§„ìˆ˜ ì´ìƒìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ë©´, ë” íšê¸°ì „ ì—°ì‚°ì´ ê°€ëŠ¥í•˜ê² ì§€ë§Œ, ë¹„ìš©ì ì¸ ì¸¡ë©´ê³¼ ë¬¼ë¦¬ì ì¸ ì¸¡ë©´ì—ì„œ ì•„ì§ì€ í•œê³„ê°€ ìˆë‹¤. (ì–‘ì ì»´í“¨í„° ì—­ì‹œ ì´ì™€ ìœ ì‚¬í•œ ì›ë¦¬ì´ë‹¤.)\n\ní•´ë‹¹ ë¶„ì•¼ì—ì„œëŠ” 0->1ë¡œ ë°”ë€ŒëŠ” ê²ƒì„ active(í™œì„±í™”)ì‹œì¼°ë‹¤ê³  í•œë‹¤.\në˜í•œ, 0ì¸ ìƒíƒœë¥¼ deasserted signal, 1ì¸ ìƒíƒœë¥¼ asserted signalì´ë¼ê³  í•œë‹¤.\n\n---\n\n### Truth Table(ì§„ë¦¬í‘œ)\n\nì´ì§„ìˆ˜ë¡œ í‘œí˜„ë˜ëŠ” ê°’ì˜ inputê³¼ ì´ë¥¼ í†µí•œ outputì„ ë‚˜íƒ€ë‚´ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ì§„ë¦¬í‘œë¥¼ í™œìš”í•œë‹¤. ì—¬ê¸°ì„œëŠ” A,Bê°€ input, Cê°€ outputì´ ëœë‹¤. CëŠ” Aì™€ Bë¥¼ OR ì—°ì‚°í•œ ê²°ê³¼ì´ë‹¤.\n\n| A    | B    | C    |\n| :--- | :--- | :--- |\n| 0    | 0    | 0    |\n| 0    | 1    | 1    |\n| 1    | 0    | 1    |\n| 1    | 1    | 1    |\n\n---\n\n### Gate\n\nê·¸ë¦¼ì€ ìœ„ì—ì„œ ë¶€í„° AND, OR, NOR, NAND, ê·¸ë¦¬ê³  inputì„ ë’¤ì§‘ëŠ” inversion Gateë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒì´ë‹¤.\n\n![AND Gate](/images/and.png)\n\n![OR Gate](/images/or.png)\n\n![NOR Gate](/images/nor.png)\n\n![NAND Gate](/images/nand.png)\n\n![Inversion Gate](/images/inversion.png)\n\nê° GateëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì—°ì‚°ì„ ì¶œë ¥í•œë‹¤.\n\n**1. AND**\n   2 inputs / 1 output\n   | A    | B    | C    |\n   | :--- | :--- | :--- |\n   | 0    | 0    | 0    |\n   | 0    | 1    | 0    |\n   | 1    | 0    | 0    |\n   | 1    | 1    | 1    |\n\n$0 \\cdot0 = 0 \\\\\n0 \\cdot1 = 0 \\\\\n1 \\cdot0 = 0 \\\\\n1 \\cdot1 = 1$\n\n**2. OR**\n   2 inputs / 1 output\n   | A    | B    | C    |\n   | :--- | :--- | :--- |\n   | 0    | 0    | 0    |\n   | 0    | 1    | 1    |\n   | 1    | 0    | 1    |\n   | 1    | 1    | 1    |\n\n$0 + 0 = 0 \\\\\n0 + 1 = 1 \\\\\n1 + 0 = 1 \\\\\n1 + 1 = 1$\n\n**3. NOR**\n   2 inputs / 1 output\n   | A    | B    | C    |\n   | :--- | :--- | :--- |\n   | 0    | 0    | 1    |\n   | 0    | 1    | 0    |\n   | 1    | 0    | 0    |\n   | 1    | 1    | 0    |\n\n$\\overline{(0 + 0)} = 1 \\\\\n\\overline{(0 + 1)} = 0 \\\\\n\\overline{(1 + 0)} = 0 \\\\\n\\overline{(1 + 1)} = 0$\n\n**4. NAND**\n   2 inputs / 1 output\n   | A    | B    | C    |\n   | :--- | :--- | :--- |\n   | 0    | 0    | 1    |\n   | 0    | 1    | 1    |\n   | 1    | 0    | 1    |\n   | 1    | 1    | 0    |\n\n$\\overline{(0 \\cdot0)} = 1 \\\\\n\\overline{(0 \\cdot1)} = 1 \\\\\n\\overline{(1 \\cdot0)} = 1 \\\\\n\\overline{(1 \\cdot1)} = 0$\n\n**5. Inversion(=NOT)**\n   1 inputs / 1 output\n   | A    | C    |\n   | :--- | :--- |\n   | 0    | 1    |\n   | 1    | 0    |\n\n$\\overline{1} = 0 \\\\\n\\overline{0} = 1$\n\nì—¬ê¸°ì„œ í•˜ë‚˜ íŠ¹ë³„í•œ ê°œë…ì´ ë‚˜ì˜¨ë‹¤. ë°”ë¡œ Functional Completeì´ë‹¤. íŠ¹ì • Gateë§Œ ê°€ì§€ê³ , ìœ„ì—ì„œ ì œì‹œëœ ëª¨ë“  ì—°ì‚°ì„ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë©´, ì´ë¥¼ Functional Completeë¼ê³  í•œë‹¤. ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ê°€ì¥ ë³´í¸ì ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆëŠ” {AND, OR, NOT}ëŠ” ëª¨ë‘ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë°, ì—¬ê¸°ì„œ {NAND} í•˜ë‚˜ë§Œ ê°€ì§€ê³  ì´ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ë°, ì•„ë˜ê°€ ì´ì— ëŒ€í•œ ì˜ˆì‹œì´ë‹¤.\n\n![NAND complete](/images/complete-1.png)\n\nê·¸ë¦¬ê³ , {NOR}ë§Œ ê°€ì§€ê³ ë„ ë˜‘ê°™ì´ í‘œí˜„ê°€ëŠ¥í•˜ë‹¤.\n\n![NOR complete](/images/complete-2.png)\n\në™ì¼í•œ ê°’ì„ NAND, NORí•˜ë©´ ì—­ìˆ˜ê°€ ë‚˜ì˜¨ë‹¤ëŠ” íŠ¹ì§•ê³¼ [ë“œ ëª¨ë¥´ê°„ì˜ ë²•ì¹™](https://ko.wikipedia.org/wiki/%EB%93%9C_%EB%AA%A8%EB%A5%B4%EA%B0%84%EC%9D%98_%EB%B2%95%EC%B9%99)ì— ì˜í•´ì„œ ì´ê²ƒì´ ì •ì˜ëœë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.\n\n---\n\n### Decoder\n\nn bitë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” $2^{n}$ê°œì˜ ê°’ì„ íšŒì„ ì„ í†µí•´ì„œ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ $2^{n}$ê°œì˜ íšŒì„  ì¤‘ì—ì„œ ë‹¨ í•˜ë‚˜ì˜ ê°’ë§Œ activeí•œë‹¤.\n\n| input1 | input2 | input3 |\n| :----: | :----: | :----: |\n|   0    |   0    |   0    |\n|   0    |   0    |   1    |\n|   0    |   1    |   0    |\n|   0    |   1    |   1    |\n|   1    |   0    |   0    |\n|   1    |   0    |   1    |\n|   1    |   1    |   0    |\n|   1    |   1    |   1    |\n\n| output1 | output2 | output3 | output4 | output5 | output6 | output7 | output8 |\n| :------ | :------ | :------ | :------ | :------ | :------ | :------ | :------ |\n| 1       | 0       | 0       | 0       | 0       | 0       | 0       | 0       |\n| 0       | 1       | 0       | 0       | 0       | 0       | 0       | 0       |\n| 0       | 0       | 1       | 0       | 0       | 0       | 0       | 0       |\n| 0       | 0       | 0       | 1       | 0       | 0       | 0       | 0       |\n| 0       | 0       | 0       | 0       | 1       | 0       | 0       | 0       |\n| 0       | 0       | 0       | 0       | 0       | 1       | 0       | 0       |\n| 0       | 0       | 0       | 0       | 0       | 0       | 1       | 0       |\n| 0       | 0       | 0       | 0       | 0       | 0       | 0       | 1       |\n\n![Decoder](/images/decoder.png)\n\n---\n\n### Multiplexor(=Selector)\n\nControlì— ì˜í•´ì„œ ì„ íƒë˜ì–´ì§„ Inputì„ Outputìœ¼ë¡œ ë‚´ë³´ë‚¸ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ Input ì—¬ëŸ¬ ê°œì™€ ì´ ì¤‘ì— ë¬´ì—‡ì„ ì„ íƒí• ì§€ë¥¼ ì˜ë¯¸í•˜ëŠ” Selector(=Control) Valueì„ ì…ë ¥í•œë‹¤.\ní˜•íƒœëŠ” inputì˜ ê°¯ìˆ˜ë§Œí¼ì˜ AND Gateì™€ Output Gate, ê·¸ë¦¬ê³  Decoderë¡œ ì´ë£¨ì–´ì§„ë‹¤.\n\n1. Decoderë¥¼ í†µí•´ì„œ Signal Bitë¥¼ ë‚˜ëˆˆë‹¤.\n2. ê° Inputì˜ í¬ê¸°ë§Œí¼ Decoderì˜ ê° Inputì˜ í¬ê¸°ë¥¼ í™•ì¥í•˜ì—¬ AND ì—°ì‚°ì„ ì·¨í•œë‹¤.\n3. ë‚˜ì˜¨ ëª¨ë“  ê²°ê³¼ë¥¼ ORë¡œ ì—°ì‚°í•œë‹¤.\n\n| Input1 | Input2 | Signal | Output |\n| :----- | :----- | :----- | :----- |\n| x      | y      | 0      | x      |\n| x      | y      | 1      | y      |\n\n![Mux](/images/mux.png)\n\n---\n\n### Clock\n\nClockì´ë€ ê³ ì •ëœ Cycle timeì„ ì£¼ê¸°ë¡œ í•˜ì—¬ ë°œìƒí•˜ëŠ” ì‹ í˜¸ë¥¼ ì˜ë¯¸í•œë‹¤. ì—¬ê¸°ì„œ ê³ ì •ëœ Cycle Timeì€ Clockì´ ë†’ì€ ì‹œì ê³¼ ë‚®ì€ ì‹œì ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ìš°ë¦¬ì˜ ëª¨ë“  ì—°ì‚°ì€ Clockì´ ê°ì†Œí•˜ê±°ë‚˜ ì¦ê°€í•˜ëŠ” ê·¸ ì‹œì ì— ë™ì‘í•œë‹¤. ì´ë¥¼ `Edge Triggered Clocking`ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì •í™•íˆ ìƒíƒœê°’ì´ ë³€í•˜ëŠ” `edge`ì—ì„œë¥¼ active ìƒíƒœë¼ê³  ë¶€ë¥´ëŠ”ë° ì´ë¥¼ ì˜¤ë¥´ëŠ” `edge`ë¡œ í• ì§€ ë‚´ë ¤ê°€ëŠ” `edge`ë¡œ í• ì§€ëŠ” ì„¤ê³„ìì˜ ëª«ì´ë‹¤.\n\ní•˜ë‚˜ì˜ Clockì´ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ íŠ¹ì • ìƒíƒœì—ì„œ ì—°ì‚°ì´ ì´ë£¨ì–´ì ¸ì„œ ë‹¤ìŒ ë‹¨ê³„ë¡œ ë„˜ì–´ê°„ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ë”°ë¼ì„œ, Clock Periodê°€ ì§§ì„ ìˆ˜ë¡, ë‹¤ìŒ ìƒíƒœë¡œ ë¹ ë¥´ê²Œ ë„˜ì–´ê°ˆ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ë¬´í•œì •ìœ¼ë¡œ ì˜¬ë¦¬ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë©°, ì—´ì´ ë„ˆë¬´ ì¦ê°€í•˜ì—¬ íšŒë¡œ ì „ì²´ì— ì•…ì˜í–¥ì„ ì¤„ ìˆ˜ë„ ìˆë‹¤.\n\n![clock](/images/clock-1.png)\n\n![clock](/images/clock-2.png)\n\n---\n\n### Latches\n\nê±¸ì‡ ë¥¼ ì˜ë¯¸í•˜ë©°, ê°’ì„ ì €ì¥í•´ë†“ëŠ”ë‹¤ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ Memoryì™€ ê°™ì€ ì €ì¥ì¥ì¹˜ë¥¼ ë§Œë“¤ ë•Œ ì‚¬ìš©í•œë‹¤. ë‘ ê°€ì§€ í˜•íƒœê°€ ì¡´ì¬í•˜ë‹ˆ í•˜ë‚˜ì”© ì•Œì•„ë³´ì. (ë¬¼ë¡  ìì„¸íˆ ì•Œë©´ ì¢‹ê² ì§€ë§Œ í•„ìëŠ” ì´ì •ë„ ê°œë…ì´ ìˆë‹¤ëŠ” ì •ë„ë¡œë§Œ ê¸°ì–µí•œë‹¤.)\n\n> **S-R Latch(Set Reset Latch)**\n\nSì™€ Rì´ ëª¨ë‘ 0ì´ë©´ ê°’ì´ ë³€í•˜ì§€ ì•Šê³ , Crossë˜ëŠ” ìœ„ì¹˜ì— ë°ì´í„°ê°€ ì €ì¥ë˜ê²Œ ëœë‹¤.\nR(Reset)ë§Œ 1ë¡œ í•˜ë©´, ë°ì´í„° ê°’ì´ 0ìœ¼ë¡œ ì´ˆê¸°í™”ëœë‹¤.\nS(Set)ë§Œ 1ë¡œ í•˜ë©´, ë°ì´í„° ê°’ì´ 1ë¡œ ì„¸íŒ…ëœë‹¤.\nRê³¼ Së¥¼ ëª¨ë‘ 1ë¡œ í•˜ë©´ í•´ë‹¹ ê°’ì€ ì €ì¥ì´ë¼ëŠ” ì˜ë¯¸ë¥¼ ê°–ì§€ ëª»í•œë‹¤.\n\n| S    | R    | Q    |\n| :--- | :--- | :--- |\n| 0    | 0    | keep |\n| 0    | 1    | 0    |\n| 1    | 0    | 1    |\n| 1    | 1    | x    |\n\n![sr-latch](/images/sr-latch.png)\n\n> **D Latch**\n\nClockë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì´ì™€ ê°™ì€ ì¥ì¹˜ë¥¼ ì´ìš©í•œë‹¤. í•˜ì§€ë§Œ, ì´ëŠ” Clockì´ assertedëœ ìƒíƒœ(1)ì¸ ìƒíƒœì— ì–¸ì œë“ ì§€ ë³€í™˜ëœë‹¤ëŠ” íŠ¹ì§•ì„ ê°–ê³  ìˆë‹¤. Outputì€ ì €ì¥ë˜ì–´ìˆëŠ” ê°’ê³¼ ë“±ì¼í•˜ë‹¤.\n\n![d-latch](/images/d-latch.png)\n\n---\n\n## Flip-Flop\n\nClockë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì´ì™€ ê°™ì€ ì¥ì¹˜ë¥¼ ì´ìš©í•œë‹¤. í•˜ì§€ë§Œ, ì´ëŠ” Clockì´ ë³€í™”í•˜ëŠ” edgeì—ì„œë§Œ ìƒíƒœê°€ ë³€í•œë‹¤ëŠ” íŠ¹ì§•ì„ ê°–ê³  ìˆë‹¤. Outputì€ ì €ì¥ë˜ì–´ìˆëŠ” ê°’ê³¼ ë™ì¼í•˜ë‹¤. ì•„ë˜ëŠ” ëŒ€í‘œì ì¸ D Flip-Flopì´ë‹¤.\n\n![flip-flop](/images/flip-flop.png)\n\n---\n\nì‹¤ì œë¡œëŠ” Latchë³´ë‹¤ Flip Flopì„ ì´ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ë°, ì™œ ê·¸ë ‡ê²Œ í•˜ëŠ” ê²ƒì¼ê¹Œ? ì´ëŠ” ìš°ë¦¬ê°€ ì…ë ¥ì„ ë°›ì„ ë•Œ, ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìµœì†Œí•˜ì˜ ì‹œê°„ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\n\nì´ ìµœì†Œí•œì˜ ì‹œê°„ì€ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜ëœë‹¤.\n\n$t_\\text{prop} + t_\\text{combinational} + t_\\text{setup} + t_\\text{skew}$\n\n1. $t_\\text{prop}$  : flip-flop ë‚´ì—ì„œ ì‹ í˜¸ê°€ ì²˜ë¦¬ë˜ëŠ”ë° ê¹Œì§€ ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤.\n2. $t_\\text{combinational}$ : ì‹¤ì œ ì—°ì‚°ì´ ìˆ˜í–‰ë˜ëŠ” ë¶€ë¶„ì´ë‹¤.\n3. $t_\\text{setup}$  : ì „ê¸°ì  ì‹ í˜¸ê°€ ë°”ë¡œ lowì—ì„œ highë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì´ë¥¼ setupí•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤.\n4. $t_\\text{skew}$ : ê³µì •ê³¼ì •ì—ì„œ ì™„ë²½í•˜ê²Œ ë§Œë“¤ë”ë¼ë„ ê° ì†Œìë§ˆë‹¤ ì–´ëŠì •ë„ ì°¨ì´ê°€ ë°œìƒí•˜ê²Œ ë˜ëŠ”ë° ì´ë¥¼ ì˜ë¯¸í•œë‹¤.\n\nì´ì²˜ëŸ¼ ì´ ì‹œê°„ë™ì•ˆ ìš°ë¦¬ëŠ” ë‹¤ë¥¸ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ, ì´ê²ƒì„ ì²˜ë¦¬í•˜ëŠ” ë™ì•ˆì˜ ì‹œê°„ì„ í™•ë³´í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” Edgeì—ì„œë§Œ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤. ë˜í•œ, Clock Cycle Time ë˜í•œ ì´ë³´ë‹¤ëŠ” í¬ê²Œ settingí•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n","slug":"digital-logic-circuit","date":"2022-04-27 23:28","title":"0. ë…¼ë¦¬íšŒë¡œ ìš”ì•½","category":"Computer Architecture","tags":["ë…¼ë¦¬íšŒë¡œ"],"desc":"í•´ë‹¹ ë‚´ìš©ì€ ì»´í“¨í„° êµ¬ì¡°ë¥¼ ë” ì˜ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ë…¼ë¦¬íšŒë¡œì˜ ë‚´ìš©ì„ ì¶•ì•½í•˜ì—¬ ì •ë¦¬í•œ í¬ìŠ¤íŒ…ì´ë‹¤.ì»´í“¨í„° íšŒë¡œì—ì„œëŠ” ëª¨ë“  ì—°ì‚°ì´ ì´ì§„ìˆ˜ë¡œ ì´ë£¨ì–´ì§„ë‹¤. ê·¸ ì´ìœ ëŠ” ë†’ì€ ì „ì••ì´ íë¥¼ ë•Œë¥¼ 1, ê·¸ë ‡ì§€ ì•Šì„ ë•Œë¥¼ 0ìœ¼ë¡œ ì •ì˜ë¥¼ í•˜ì—¬ ì´ë¥¼ í†µí•´ì„œ ê°’ì„ êµ¬ë¶„í•˜ê¸° ë•Œë¬¸ì´ë©°, ì´ê²ƒì´ ìš°ë¦¬ê°€ ì´ì§„ìˆ˜ ì²´ê³„ì—ì„œ ì»´í“¨í„° ì—°ì‚°ì„ í‘œí˜„í•˜ëŠ” ì´ìœ ì´ë‹¤.ë§Œì•½, ì´ë¥¼ ì‚¼ì§„ìˆ˜ ì´ìƒìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ë©´, ë” íšê¸°ì „ ì—°ì‚°ì´ ê°€ëŠ¥í•˜ê² ì§€ë§Œ, ë¹„ìš©ì ì¸ ì¸¡ë©´ê³¼ ë¬¼ë¦¬ì ì¸ ì¸¡ë©´ì—ì„œ ì•„ì§ì€ í•œê³„ê°€ ìˆë‹¤. (ì–‘ì ì»´í“¨í„° ì—­ì‹œ ì´ì™€ ìœ ì‚¬í•œ ì›ë¦¬ì´ë‹¤.)í•´ë‹¹ ë¶„ì•¼ì—ì„œëŠ” 0-1ë¡œ ë°”ë€ŒëŠ” ê²ƒì„ active(í™œì„±í™”)ì‹œì¼°ë‹¤ê³  í•œë‹¤.ë˜í•œ, 0ì¸ ìƒíƒœë¥¼ deasserted signal, 1ì¸ ìƒíƒœë¥¼ asserted signalì´ë¼ê³  í•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Intro\n\nComputer Organization and Designì´ë¼ëŠ” ì±…ì„ ì •ë¦¬í•˜ê³  ë˜ëŒì•„ë³¼ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œëŠ” ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” Ideaë“¤ì„ ì •ë¦¬í•  ê²ƒì´ë‹¤.\n\n## 1\\. 8 Greate Ideas\n\nì»´í“¨í„° êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ëŠ” ê³¼ì •ì—ì„œ ì¤‘ìš”í•˜ê²Œ ì—¬ê²¨ì§€ëŠ” 8ê°€ì§€ í•µì‹¬ ì•„ì´ë””ì–´ë“¤ì´ë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ ì´ëŠ” ì „ì²´ì ì¸ ì»´í“¨í„° ê³¼í•™ì—ì„œ ì¤‘ìš”í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆëŠ” ì•„ì´ë””ì–´ë“¤ì´ë‹¤. ë”°ë¼ì„œ, ì•ìœ¼ë¡œì˜ Postingì—ì„œ Whyë¼ëŠ” ì˜ë¬¸ì´ ë“ ë‹¤ë©´, ì•„ë˜ 8ê°€ì§€ ì´ìœ  ì¤‘ì˜ í•˜ë‚˜ë¡œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.\n\n1. **Moore's Law**  \n    18 ~ 24 ê°œì›”ë§ˆë‹¤ ì»´í“¨í„° ì„±ëŠ¥ì˜ ì§€ëŒ€í•œ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” IC ì¹©ì˜ ì„±ëŠ¥ì´ 2ë°°ì”© ì„±ì¥í•œë‹¤ëŠ” Mooreì˜ ì£¼ì¥ì—ì„œ ìœ ë˜í•˜ì˜€ë‹¤. ì¦‰, **ì»´í“¨í„°ì˜ ì„±ëŠ¥ì€ ì§€ìˆ˜ì ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì„±ì¥ì„ í•˜ê³  ìˆìŒì„ ì˜ë¯¸í•œë‹¤.** ì´ë¡œ ì¸í•´ êµ¬ì¡°ë¥¼ ì„¤ê³„í•˜ëŠ” ê³¼ì •ì—ì„œë„ í˜„ì¬ì˜ IC ì¹©ì˜ ì„±ëŠ¥ì— ë§ì¶”ëŠ” ê²ƒì´ ì•„ë‹Œ ì´ë³´ë‹¤ ë” í° ì„±ëŠ¥ì„ íƒ€ê²Ÿìœ¼ë¡œ ì„¤ì •ì„ í•œë‹¤.\n2. **Abstraction**  \n    ìš°ë¦¬ ë§ë¡œ ì¶”ìƒí™”ë¼ê³  í‘œí˜„í•˜ë©°, ë³µì¡í•œ í•˜ìœ„ ë‚´ìš©ì„ ëª¨ë‘ ê¸°ìˆ í•˜ì§€ ì•Šê³ , ê°„ë‹¨í•˜ê²Œ í‘œí˜„í•˜ì—¬ ì´ë¥¼ ì‰½ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, **ì„¤ê³„ ê³¼ì •ì—ì„œì˜ ë³µì¡ë„ë¥¼ ì¤„ì¼ ìˆ˜ ìˆë‹¤.**\n3. **Common Case Fast**  \n    **ë“œë¬¼ê²Œ ì¼ì–´ë‚˜ëŠ” caseë³´ë‹¤ëŠ” ì¼ë°˜ì ì¸ caseë¥¼ ë¹ ë¥´ê²Œ ë§Œë“¬ìœ¼ë¡œì¨ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.** ë“œë¬¼ê²Œ ì¼ì–´ë‚˜ëŠ” caseëŠ” ë§¤ìš° ë³µì¡í•˜ê³ , í•´ê²°í•˜ê¸°ë„ ë‚œí•´í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ëŒ€ê²Œì˜ ê²½ìš° ì¼ë°˜ì ì¸ caseëŠ” ê°„ë‹¨í•˜ë‹¤. ì´ë¥¼ ìµœì í™”í•˜ëŠ” ê²ƒì´ ì „ì²´ì ì¸ ì‹œìŠ¤í…œ ì„±ëŠ¥ í–¥ìƒì— í° ë„ì›€ì´ ë˜ëŠ” ê²ƒì€ ë‹¹ì—°í•˜ë©° í•´ê²°ë„ ë§¤ìš° ì‰½ë‹¤.\n4. **Performance via Parallelism**  \n    ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ì´ë‹¤. í•˜ë‚˜ëŠ” í•˜ë‚˜ì˜ ì¥ì¹˜ì˜ ì„±ëŠ¥ì„ ì˜¬ë¦¬ëŠ” ê²ƒì´ê³  ë˜ í•˜ë‚˜ê°€ ë°”ë¡œÂ **í•˜ë‚˜ì˜ ì‘ì—…ì„ ì—¬ëŸ¬ ëª…ì´ ë™ì‹œì— ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì´ë‹¤.**\n5. **Performance via Pipelining**  \n    ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•œ ë³‘ë ¬ì²˜ë¦¬ ë°©ì‹ ì¤‘ì—ì„œ ê°€ì¥ ìœ ëª…í•œ ë°©ì‹ì´ pipeliningì´ë‹¤. ì‰½ê²Œ ìƒê°í•˜ë©´, ë¶„ì—…ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. **ì—¬ëŸ¬ ëª…ì´ì„œ í•˜ë‚˜ì˜ ëª©ì ì„ ìœ„í•´ ì¼ì„ í•  ë•Œ, íš¨ìœ¨ì ìœ¼ë¡œ ì‘ì—…í•˜ê¸° ìœ„í•´ì„œ ì—…ë¬´ë¥¼ ë¶„ë‹´í•˜ì—¬ ë™ì‹œì— ì‘ì—…**í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n6. **Performance via Prediction**  \n    ìš°ë¦¬ëŠ” ë¬´ìŠ¨ ì‘ì—…ì„ í•  ë•Œ, ì•„ì§ ê²°ì •ë˜ì§€ ì•Šì€ ì‚¬í•­ ë•Œë¬¸ì— ê¸°ë‹¤ë¦¬ëŠ” ê²½ìš°ê°€ ìˆëŠ”ë°, ì´ê²ƒì´ ì–´ë–»ê²Œ ë ì§€ë¥¼ **ì˜ˆì¸¡í•˜ì—¬ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ , ë¯¸ë¦¬ ì§„í–‰í•˜ì**ëŠ” ë°œìƒì—ì„œ ë‚˜ì˜¨ ê²ƒì´ë‹¤. ë§Œì•½, ì´ ì˜ˆì¸¡ì˜ ì ì¤‘ë¥ ì´ ë†’ë‹¤ë©´, ì„±ëŠ¥ í–¥ìƒì— êµ‰ì¥í•œ ë„ì›€ì„ ì¤„ ìˆ˜ ìˆë‹¤.\n7. **Hierarchy of Memories**  \n    ì»´í“¨í„°ì˜ ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ë©”ëª¨ë¦¬ëŠ” ë¹ ë¥´ê³ , í¬ê³ , ì‹¸ì•¼ í•œë‹¤. í•˜ì§€ë§Œ, ë¹ ë¥´ê¸° ìœ„í•´ì„œëŠ” ë¹„ì‹¸ì•¼í•˜ê³ , í¬ê¸° ìœ„í•´ì„œë„ ë¹„ì‹¸ì•¼ í•œë‹¤. ê·¸ë˜ì„œ ìƒê°í•´ë‚¸ ë°©ë²•ì´ ê³„ì¸µí™”ì´ë‹¤. **ë¹ ë¥´ê³ , ì‘ì€ memoryë¥¼ ìœ„ë¡œ ìŒ“ê³ , ëŠë¦¬ê³ , í° memoryë¥¼ ì•„ë˜ë¡œ ìŒ“ìŒìœ¼ë¡œì¨ ë¹„ìš©ì„ ì ˆê°**í•˜ìëŠ” ê²ƒì´ë‹¤.\n8. **Dependability via Redundancy**  \n    ì»´í“¨í„°ëŠ” ë¹ ë¥´ê¸°ë§Œ í•´ì„œ ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. **ì‹ ë¢°**í•  ìˆ˜ ìˆëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•´ì•¼ í•œë‹¤. ì‹¤íŒ¨í•˜ì§€ ì•ŠëŠ” ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì€ ë§¤ìš° í˜ë“  ì¼ì´ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ëŠ” **ì—¬ë¶„ ì¥ì¹˜**ë¥¼ ë‘ì–´ ì´ë¥¼ í†µí•´ì„œ ì‹¤íŒ¨ ì‹œì— ì´ë¥¼ ë– ë§¡ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ì„¤ê³„ë¥¼ í•´ì•¼ í•œë‹¤.\n\n## 2\\. Below Your Program\n\nprogram ë°‘ì—ëŠ” ë¬´ì—‡ì´ ìˆëŠ”ê°€?\n\nìš°ë¦¬ì˜ programì€ ëª¨ë‘ application softwareì´ê³ , ì´ëŠ” hardware ë°”ë¡œ ìœ„ì— ì¡´ì¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ system softwareìœ„ì—ì„œ ë™ì‘í•˜ê²Œ ëœë‹¤.\n\n![kernel](/images/kernel.png)\n\n**System Software**ëŠ” Hardwareë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì œì–´í•˜ê±°ë‚˜ computerê°€ ì‘ë™í•˜ê¸° ìœ„í•´ í•„ìˆ˜ì ì´ë©° ê¸°ë³¸ì ì¸ softwreë¥¼ ë§í•œë‹¤. ê·¸ ì¤‘ì—ì„œ ê°€ì¥ ëŒ€í‘œì ì¸ ê²ƒì´ OSì´ê³  **OS**ëŠ” ì‚¬ì‹¤ìƒ ìš°ë¦¬ê°€ ë³´ëŠ” Softwareì™€ Hardware ê°„ì˜ interfaceì—­í• ì„ í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, memory ê´€ë¦¬, process ê´€ë¦¬ ë“±(ì´ëŠ” OS ì—ì„œ ìì„¸íˆ ë°°ì›ì‹œë‹¤.)ì„ ìˆ˜í–‰í•œë‹¤. ë°˜ë©´, **Application** **Software**ëŠ” ì§ì ‘ì ìœ¼ë¡œ hardwareë¥¼ ê´€ë¦¬í•˜ê±°ë‚˜ í•„ìˆ˜ì ì¸ ìš”ì†ŒëŠ” ì•„ë‹ˆì§€ë§Œ computerë¥¼ í†µí•´ì„œ ê°€ì¹˜ìˆëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•˜ë„ë¡ í•œë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ ì›¹ë¸Œë¼ìš°ì €, word, game ë“±ì´ ì—¬ê¸°ì— í¬í•¨ëœë‹¤.\n\nÂ  ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ë§Œë“  ì½”ë“œ(Application Software)ê°€ ì–´ë–»ê²Œ ì‹¤í–‰ë˜ì–´ì§ˆ ìˆ˜ ìˆì„ê¹Œ? ì´ ë˜í•œ, System Softwareì¸ compiler, assembler, linker, loaderì˜ ë„ì›€ì„ í†µí•´ì„œ ì‹¤í–‰ë˜ì–´ì§„ë‹¤. **compiler**ëŠ” ìš°ë¦¬ê°€ ê³  ìˆ˜ì¤€ì˜ ì–¸ì–´(C++, Java, ë“±)ë¡œ ë§Œë“  software codeë¥¼ Assembly ì–¸ì–´ë¡œ ë³€ê²½í•œë‹¤. ê·¸ëŸ¬ë©´, ì´ë¥¼ **Assembler**ê°€ 0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§„ ê¸°ê³„ì–´ë¡œ ë²ˆì—­í•´ì¤€ë‹¤. í•´ë‹¹ ì‘ì—…ì´ ëë‚˜ë©´, **Linker**ê°€ ë‚˜íƒ€ë‚˜ ì—¬ëŸ¬ ê°œë¡œ ë‚˜ë‰˜ì–´ì ¸ìˆë˜ ì´ íŒŒì¼ê³¼ ê¸°ì¡´ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í•˜ë‚˜ì˜ íŒŒì¼ë¡œ ë¬¶ì–´ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. ì´ ì‘ì—…ì„ ë§ˆì¹˜ê³  ë§Œë“¤ì–´ì§„ ìµœì¢… íŒŒì¼ì„ ì‹¤í–‰í•˜ê³ ìí•  ë•Œ, **Loader**ëŠ” ì´ë¥¼ memoryì— ì˜¬ë¦¬ëŠ” ì—­í• ì„ í•œë‹¤. ì´ë ‡ê²Œ ì‹¤í–‰ëœ programì€ ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³ , memoryì˜ ì•„ì˜ˆ ë‹¤ë¥¸ ì˜ì—­ì— ìœ„ì¹˜í•˜ëŠ” libraryë„ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ì´ê²ƒì„ **Dynamic Linked Library**(DLL)ë¼ê³  í•œë‹¤.\n\n![run-process](/images/run-process.png)\n\nì´ë ‡ê²Œ í•˜ë‚˜ì˜ ì½”ë“œë¥¼ ì‘ì„±í•˜ë©´, ì‹¤ì œë¡œ ì‹¤í–‰ë˜ê¸°ê¹Œì§€ ì—¬ëŸ¬ ì‘ì—…ë“¤ì„ ê±°ì³ì•¼ë§Œ í•œë‹¤. ê·¸ëŸ¼ì—ë„ assembly ì–¸ì–´ë‚˜ ê¸°ê³„ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë”©ì„ í•˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ì•„ë˜ ì„¸ ê°€ì§€ ì´ìœ ê°€ ì£¼ìš”í•˜ë‹¤.\n\n1. ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰½ë‹¤.\n2. ìƒì‚°ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤.\n3. Compilerì™€ assemblyë¥¼ í†µí•´ì„œ ì–´ë””ì„œë“  ëŒì•„ê°€ëŠ” í”„ë¡œê·¸ë¨ì„ ì œì‘í•  ìˆ˜ ìˆë‹¤.\n\n## 3\\. Under the Covers\n\nìš°ë¦¬ì˜ ì»´í“¨í„°ëŠ” ì–´ë–»ê²Œ ì´ë£¨ì–´ì§€ëŠ”ê°€ë¥¼ í¬ê³  ì–‡ê²Œ í•œ ë²ˆ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.\n\n- **Input Device** : ìš°ë¦¬ì˜ ì…ë ¥ì„ ë°›ëŠ” ë¶€ë¶„ì´ë‹¤. ë§ˆìš°ìŠ¤, í‚¤ë³´ë“œ, í„°ì¹˜ìŠ¤í¬ë¦° ë“±ì´ ìˆë‹¤.\n- **Output Device** : ìš°ë¦¬ê°€ ì¶œë ¥ì„ ë°›ëŠ” ë¶€ë¶„ì´ë‹¤. ëª¨ë‹ˆí„°, í”„ë¦°í„° ë“±ì´ ìˆë‹¤.\n- **IC(Integrated Circuits, Chip)** : ì§‘ì  íšŒë¡œë¡œ ë²ˆì—­ë˜ì–´ì§€ë©°, í†µìƒ ìš°ë¦¬ê°€ chipì´ë¼ê³  ë¶€ë¥´ëŠ” ë…€ì„ë“¤ì´ë‹¤. ì´ë“¤ì€ ì ê²ŒëŠ” ìˆ˜ì‹­ê°œ ë§ê²ŒëŠ” ì–µ ë‹¨ìœ„ ì´ìƒì— ì´ë¥´ëŠ” ì–‘ì˜ transisterë¥¼ ê°€ì§€ê³  ìˆê³ , ì´ë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê±°ë‚˜ ì²˜ë¦¬í•˜ëŠ” ì—­í• ì„ í•  ìˆ˜ ìˆë‹¤. ì¦‰, ICë¥¼ í†µí•´ì„œ CPU, Memoryë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤.\n  - trasistor: ì‰½ê²Œ ë§í•´ì„œ ì „ê¸°ë¥¼ í†µí•´ì„œ on/offë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” switchë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ë°ì´í„°ë¥¼ ì—°ì‚°í•˜ê±°ë‚˜ ì €ì¥í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n- **CPU (Central Processor Unit, Processor, MicroProcessor)** : ì¤‘ì•™ ì²˜ë¦¬ ì¥ì¹˜ë¼ëŠ” ì˜ë¯¸ë¡œ, ê°ì¢… ì—°ì‚°ê³¼ I/O Device ì²˜ë¦¬ ë“±ì˜ ì¤‘ì‹¬ ì—­í•™ì„ ìˆ˜í–‰í•œë‹¤. CPUëŠ” í¬ê²Œ ë‘ ê°œì˜ ìš”ì†Œë¡œ ì´ë£¨ì–´ì§„ë‹¤.\n  - DataPath : ìˆ˜í•™ì ì¸ ì—°ì‚°ì„ ìˆ˜í–‰í•œë‹¤.\n  - Control : programì˜ instructionì´ ë¬´ì—‡ì„ ìš”êµ¬í•˜ëŠ”ì§€ë¥¼ ì…ì¶œë ¥ ì¥ì¹˜, memory ë˜ëŠ” datapathì— ì „ë‹¬í•©ë‹ˆë‹¤.\n- **Memory(RAM(Random Access Memory), main memory, primary memory)** : ì‹¤í–‰ë˜ê³  ìˆëŠ” í”„ë¡œê·¸ë¨ì´ ìœ„ì¹˜í•˜ëŠ” ê³³ì´ë‹¤. ì‹¤í–‰ë˜ëŠ” í”„ë¡œê·¸ë¨ì— ëŒ€í•œ ì •ë³´ì™€ ê°™ì€ ë‚´ìš©ì„ í¬í•¨í•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” DRAMìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤. ë˜í•œ, Random Access Memoryë¼ê³  ë¶ˆë¦¬ëŠ” ì´ìœ ëŠ” ì–´ëŠ ìœ„ì¹˜ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ìˆì–´ë„ í•´ë‹¹ ë°ì´í„°ë¥¼ ì°¾ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ë™ì¼í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\n  - DRAM(Dynamic Random Access Memory) : IC chipì„ í†µí•´ì„œ ë§Œë“¤ì–´ì§„ë‹¤. ì—¬ê¸°ì„œ Random Accessë€ ì ‘ê·¼í•  ë•Œ, ì•ì—ì„œë¶€í„° ì°¨ë¡€ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í•œ ë²ˆì— ë°”ë¡œ ì§šì„ ìˆ˜ ìˆìŒì„ ì˜ë¯¸í•œë‹¤.\n- **Cache Memory** : ëŒ€ê²Œ Cacheë¼ê³ ë„ ë¶€ë¥´ë©°, Processor ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” memoryë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì¦‰, ì‹¤ì œ Memoryì˜ buffer ê¸°ëŠ¥ì„ í•œë‹¤. ì—¬ê¸°ì„œëŠ” SRAMì„ ì‚¬ìš©í•œë‹¤.\n\n- SRAM(Static Random Aceess Memory) : DRAMë³´ë‹¤ëŠ” ë¹ ë¥´ì§€ë§Œ, ì§‘ì ë„ê°€ ë‚®ê³  ë” ë¹„ì‹¸ê¸° ë•Œë¬¸ì— ë§ì´ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ëŠ” chipì´ë‹¤. í•˜ì§€ë§Œ, ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•´ì„œ processor ë°”ë¡œ ì•ì— bufferë¡œì¨ ì‚¬ìš©í•œë‹¤.\n- buffer : ìë£Œêµ¬ì¡°ì˜ queueë¥¼ ì´ìš©í•œ ê²ƒìœ¼ë¡œ, ì²˜ë¦¬ë¥¼ ìš”ì²­í•œ ëŒ€ìƒê³¼ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ëŒ€ìƒ ì‚¬ì´ì—ì„œ ë°ì´í„°ë¥¼ ì ê¹ ë³´ê´€í•˜ê¸° ìœ„í•œ ì¥ì†Œë¡œ ì‚¬ìš©ëœë‹¤.\n\n- **Secondary Memory** : main memoryëŠ” íœ˜ë°œì„±ì´ë¼ëŠ” íŠ¹ì§•ì„ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— ì‹œìŠ¤í…œì´ ì¢…ë£Œë˜ì–´ ì „ê¸°ê°€ ë” ì´ìƒ ê³µê¸‰ë˜ì§€ ì•Šìœ¼ë©´, ëª¨ë“  ë°ì´í„°ëŠ” ë‚ ë¼ê°„ë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ ê·¸ë¦¬ê³  ë¶€ì¡±í•œ main memoryì˜ ì €ì¥ê³µê°„ì„ ë³´ì¡°í•˜ê¸° ìœ„í•´ì„œ ë³´ì¡° ê¸°ì–µ ì¥ì¹˜ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ê²ƒì— ì‚¬ìš©ë˜ëŠ” ê²ƒì€ í¬ê²Œ ë‘ ê°€ì§€ ì´ë‹¤.\n  - magnatic disk : ìê¸° diskë¥¼ ì´ìš©í•´ì„œ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì „ê¸°ê°€ ê³µê¸‰ë˜ì§€ ì•ŠìŒì—ë„ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  ìˆì„ ìˆ˜ ìˆë‹¤.\n  - flash memory : ë°˜ë„ì²´ë¥¼ ì´ìš©í•˜ì—¬ ë°ì´í„°ë¥¼ ì €ì¥í•˜ë©°, DRAMë³´ë‹¤ëŠ” ëŠë¦¬ì§€ë§Œ, ë” ì‹¸ê³  íœ˜ë°œì„±ì´ ì—†ë‹¤.\n- **Instruction Set Architecture(ISA, architecture)** : 0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§„ ê¸°ê³„ì–´ê°€ ë“¤ì–´ì™”ì„ ë•Œ, ì´ê²ƒì´ ë¬´ìŠ¨ ì˜ë¯¸ì¸ì§€ë¥¼ ë‚˜íƒ€ë‚´ëŠ” instruction \bSetì— ë”°ë¼ CPUê°€ ì•Œë§ì€ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” architectureì´ë‹¤.\n  - Instruction \bSet : hardwareì—ê²Œ ë™ì‘ì„ ìš”ì²­í•˜ëŠ” í•˜ë‚˜ì˜ ëª…ë ¹ì–´ë¥¼ Instructionì´ë¼ê³  í•œë‹¤. ì´ë“¤ì´ ë¬´ìŠ¨ ì—­í• ì„ í•˜ëŠ”ì§€ë¥¼ ì •ë¦¬í•´ë†“ì€ ê²ƒì´ Instruction Setì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Operating Systemì€ hardwareì— ì ‘ê·¼í•˜ì—¬ íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\n  - ABI(Application Binary Interface) : application ë‹¨ì— programmerê°€ hardware ì‘ì—… ë“±ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•˜ì—¬ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, binaryí•œ ë™ì‘ë„ application programmerê°€ ì¡°ì‘í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ì¸ APIì™€ ì—­í• ì´ ë™ì¼í•˜ì§€ë§Œ, programming languageê°€ ì•„ë‹Œ machine languageë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ë˜ê¸° ë•Œë¬¸ì— hardware ì ‘ê·¼ ë“±ì— ì œí•œì´ ì—†ë‹¤.\n\n## 4\\. Performance\n\nìš°ë¦¬ê°€ Computerì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ëŠ” ê²ƒì€ ì¤‘ìš”í•˜ë‹¤. ì™œëƒí•˜ë©´, ì´ë¥¼ ì§€í‘œë¡œ ê³„ì†í•´ì„œ computerì˜ ì„±ëŠ¥ì„ í–¥ìƒì‹œì¼œì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.\n\nê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n$$\\text{Excution Time} = \\text{Clock Cycle Time} \\times {\\text{Number of Instruction}} \\times {CPI}$$\n\nì¦‰, **ì´ ì‹¤í–‰ ì‹œê°„**(Execution Time)ì€ **í•œ ë²ˆ Clockì´ íšŒì „í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„**(Clock Cycle Time)ì— í•´ë‹¹ **programì˜ instruction ìˆ˜**(Number of Instruction) ê·¸ë¦¬ê³  **í•˜ë‚˜ì˜ instructionì„ ì²˜ë¦¬í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” clock cycleì˜ íšŸìˆ˜**(CPI)ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\n\nì¦‰, ìš°ë¦¬ê°€ íŠ¹ì • í”„ë¡œê·¸ë¨ì„ ë¹ ë¥´ê²Œ ëŒë¦¬ê³  ì‹¶ë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì€ ì‹ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤.\n\n1. í•œ ë²ˆ íšŒì „í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¤„ì´ê¸° ìœ„í•´ í´ë½ frequencyë¥¼ ë†’ì¸ë‹¤. **í•˜ì§€ë§Œ, íšŒì „ì—´ë¡œ ì¸í•´ í˜„ì¬ëŠ” frequencyë¥¼ ì˜¬ë¦¬ëŠ” ê²ƒì€ í¬ê¸°í•˜ê³  ìˆë‹¤.**\n2. í”„ë¡œê·¸ë¨ì„ ì˜ ì§œê±°ë‚˜ Compilerë¥¼ ë”ìš± ë” ìµœì í™”í•˜ì—¬ instructionì˜ ìˆ˜ë¥¼ ì¤„ì¸ë‹¤.\n3. í•˜ë“œì›¨ì–´ë¥¼ ì˜ ì„¤ê³„í•´ì„œ ëª…ë ¹ í•˜ë‚˜ë¥¼ ì²˜ë¦¬í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„(CPI)ì„ ì¤„ì¸ë‹¤.\n4. ë™ì‹œì— ì—¬ëŸ¬ CPUë¥¼ ì‹¤í–‰ì‹œì¼œì„œ, ì‹¤í–‰ì„ í•˜ëŠ” unit ìì²´ë¥¼ ë” ë§Œë“œëŠ” ë°©ë²•ë„ ìˆë‹¤.\n\në”°ë¼ì„œ, ì•ìœ¼ë¡œ ìš°ë¦¬ê°€ Performanceë¥¼ ì˜¬ë¦¬ê¸° ìœ„í•´ì„œ, Compilerë¥¼ ì–´ë–»ê²Œ ìµœì í™”í• ì§€ë¥¼ ê°œëµì ìœ¼ë¡œ ë°°ìš°ë©°, í•˜ë“œì›¨ì–´ë¥¼ ì–´ë–»ê²Œ ì˜ ì„¤ê³„í• ì§€ë¥¼ ìì„¸íˆ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ë˜í•œ, Parallelismì„ í†µí•´ì„œ ì‘ì—…ì„ ë” ë¹ ë¥´ê²Œ ìˆ˜í–‰í•˜ëŠ” ë°©ë²• ë˜í•œ ë‹¤ë£° ê²ƒì´ë‹¤.\n\n---\n\n## \\+ Amdahl's Law\n\nì‘ì—…ì˜ ì„±ëŠ¥ì„ ê°œì„ ì‹œì¼°ì„ ë•Œ ì´ì „ê³¼ ë¹„êµí•˜ì—¬ ì–¼ë§ˆë‚˜ íš¨ìœ¨ì´ ì¦ê°€í–ˆëŠ”ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ì§€í‘œì´ë‹¤.\n\n$$1\\over{(1-P) + {P\\over{S}}}$$\n\nì—¬ê¸°ì„œ ê°œì„ ëœ ì‘ì—…ì´ ì „ì²´ì—ì„œ ì°¨ì§€í•˜ëŠ” ë¹„ìœ¨ì„ Pë¼ê³  í•˜ê³ , í•´ë‹¹ ì‘ì—…ì˜ í–¥ìƒëœ ì‘ì—… íš¨ìœ¨ì„ Së¼ê³  í•œë‹¤.\n\në§Œì•½, ì „ì²´ì— 10%ë¥¼ ì°¨ì§€í•˜ëŠ” ì‘ì—…ì„ 2ë°° ë¹ ë¥´ê²Œ ì§„í–‰í•œë‹¤ë©´,\n\n$${1\\over{(1-0.1) + {0.1\\over{2}}}} = {1\\over{0.95}} \\approx 1.05$$\n\në”°ë¼ì„œ, ë‹¨ê¸°ê°„ì˜ ì„±ëŠ¥í–¥ìƒì„ í•˜ê³  ì‹¶ë‹¤ë©´, ë¹„ìœ¨ì´ í° ì‘ì—…ì˜ ì„±ëŠ¥í–¥ìƒì„ ê¾€í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\n## Reference\n\n- David A. Patterson, John L. Hennessy,Â Computer Organization and Design\n","slug":"architecture-base","date":"2022-04-12 09:00","title":"1. Base","category":"Computer Architecture","tags":["Computer Organization And Design","ISA"],"desc":"Computer Organization and Designì´ë¼ëŠ” ì±…ì„ ì •ë¦¬í•˜ê³  ë˜ëŒì•„ë³¼ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œëŠ” ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” Ideaë“¤ì„ ì •ë¦¬í•  ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Intro\n\nì»´í“¨í„°ê°€ ì•Œì•„ë“¤ì„ ìˆ˜ ìˆëŠ” ëª…ë ¹ì„ ìš°ë¦¬ëŠ” Instructionì´ë¼ê³  í•œë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ë“¤ì„ ëª¨ì•„ë†“ì€ ë‹¨ì–´ì¥(Vocabulary)ëŠ” **Instruction set**ì´ ë˜ëŠ” ê²ƒì´ë‹¤. ì´ëŸ° ì˜ë¯¸ì—ì„œ í˜„ëŒ€ì˜ computerëŠ” ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆê¸° ë•Œë¬¸ì—, ì´ë¥¼Â **Instruction set architecture**ë¼ê³  ë¶€ë¥¸ë‹¤. í•´ë‹¹ ì±…ì—ì„œëŠ” MIPSë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— ë˜‘ê°™ì´ MIPSë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ë¥¸ processorë“¤ê³¼ ë§¤ìš° ìœ ì‚¬í•˜ë‹ˆ ì´ë¥¼ ë°°ìš°ë©´ ì‰½ê²Œ ë‹¤ë¥¸ ê²ƒë„ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, Instructionì´ë€ ë¬´ì—‡ì¼ê¹Œ? ì´ëŠ” ê¸°ê³„ì–´(0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§„ ì´ì§„ìˆ˜ ì²´ê³„)ì˜ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ Assembly Instructionì´ë¼ê³ ë„ í•œë‹¤. ì´ëŠ” hardwareì—ê²Œ íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” ëª…ë ¹ì–´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸°ì— ìš°ë¦¬ê°€ ì‹¤í–‰í•˜ê±°ë‚˜ ì‘ì„±í•˜ëŠ” ëª¨ë“  programë“¤ì€ ì‚¬ì‹¤ Instructionë“¤ì˜ ì§‘í•©ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì‹¤ì œë¡œ Computerì—ì„œ Programì´ ë™ì‘í•  ë•Œ, ì´ëŠ” ComputerëŠ” memoryì— programì˜ ë‚´ìš©ê³¼ programì—ì„œ ì‚¬ìš©í•  dataë“¤ì„ ìœ„í•œ ê³µê°„ì„ ë°°ì •í•´ì¤€ë‹¤. ê·¸ëŸ° í›„ì— ì‹¤ì œë¡œ ì‹¤í–‰ë  ë•Œì—ëŠ” programì˜ Instructionì„ ì°¨ë¡€ì°¨ë¡€ ì½ì–´ê°€ë©´ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ë‹¤.\n\n## Assembly Instructionì˜ êµ¬ì„±ìš”ì†Œ\n\nê¸°ë³¸ì ìœ¼ë¡œ MIPSëŠ” 32bit(=4Bytes) ì‹œìŠ¤í…œì„ ì‚¬ìš©í•œë‹¤. ë”°ë¼ì„œ, í•˜ë‚˜ì˜ Instructionì€ 4 Bytesë¡œ í‘œí˜„ëœë‹¤. ì´ë¥¼ í•˜ë‚˜ì˜ ê°€ì¥ ë‹¨ìœ„ë¼ê³  ì—¬ê²¨ì„œ wordë¼ê³ ë„ ë¶€ë¥¸ë‹¤. ë”°ë¼ì„œ, 64bit(=8Bytes) CPUì—ì„œëŠ” 1 wordê°€ 8 Bytesê°€ ë  ìˆ˜ë„ ìˆë‹¤. ê²°êµ­ ëª¨ë“  Instructionì´ 0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§„ë‹¤. í•˜ì§€ë§Œ, ì´ëŠ” ë„ˆë¬´ ì½ê¸° ì–´ë µê¸° ë•Œë¬¸ì— ìš°ì„  Assembly(ê¸°ê³„ì–´ë³´ë‹¤ëŠ” ì‚¬ëŒì˜ ì–¸ì–´ì— ê°€ê¹ì§€ë§Œ ì•„ì£¼ ì›ì´ˆì ì¸ í˜•íƒœì˜ ì–¸ì–´) Instructionì„ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. ì´ë¥¼ ê¸°ê³„ì–´ë¡œ ë°”ê¾¸ëŠ” ê²ƒì€ í•´ë‹¹ í¬ìŠ¤íŒ…ì˜ ë°‘ì—ì„œ ë‹¤ë£¬ë‹¤.\n\n### 1\\. Operand\n\nì—°ì‚°ì„ ìœ„í•´ì„œ í•„ìš”í•œ ê²ƒì€ ì—°ì‚°ìì™€ í”¼ì—°ì‚°ìì´ë‹¤. ë³´í†µì˜ programming ì–¸ì–´ì—ì„œëŠ” ì´ë¥¼ ë³€ìˆ˜ë¼ê³  í•œë‹¤.\n\nMIPSì—ì„œëŠ” ì´ ë‘ ê°€ì§€ì˜ ë³€ìˆ˜ typeì´ ì¡´ì¬í•œë‹¤.\n\n1. **Constant**  \n    í•˜ë‚˜ì˜ ìƒìˆ˜ë¡œì¨ ë™ì‘í•˜ëŠ” ë³€ìˆ˜ì´ë‹¤. ì£¼ì–´ì§„ ë²”ìœ„ ë‚´ì—ì„œ ììœ ë¡­ê²Œ ìƒìˆ˜ë¡œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.\n2. **Register No**  \n    í•˜ë“œì›¨ì–´ ìƒì˜ registerë“¤ê³¼ programmingì—ì„œì˜ ë³€ìˆ˜ì™€ ì°¨ì´ì ì´ ìˆë‹¤ë©´, ë°”ë¡œ ê°¯ìˆ˜ì˜ ì œí•œì´ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ë³´í†µì€ ê°¯ìˆ˜ë¥¼ 32ê°œë¡œ ì œí•œí•œë‹¤. ê·¸ë ‡ê²Œ í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ì´ë¼ê³  ì°¾ì•„ëƒˆë‹¤ê³  í•œë‹¤. ë” ë§ì´ ì¨ë„ Clock Cycleì´ ë” ì†Œëª¨ë  ë¿ì´ê³ , ì ë‹¤ë©´ í‘œí˜„ë ¥ì´ ë¶€ì¡±í•´ì§€ ìˆ˜ë„ ìˆë‹¤. ë˜í•œ, í•˜ë‚˜ì˜ registerì˜ í¬ê¸° ë˜í•œ ìš°ë¦¬ëŠ” ëŒ€ê²Œ 32bit(1 word)ë¡œ ì œí•œí•œë‹¤. ì´ë¥¼ í‘œí˜„í•  ë•Œì—ëŠ” ë³´í†µ \\$ í‘œì‹œë¥¼ í™œìš©í•˜ê³ , registerëŠ” íŠ¹ì • ëª©ì ì„ ìœ„í•´ì„œ ì§€ì •ë˜ì–´ ìˆë‹¤. (ë°‘ì— í‘œë¥¼ ì°¸ê³ )  \n    Instructionì—ì„œëŠ” Registerë¥¼ ê°€ë¥´í‚¤ê¸° ìœ„í•´ì„œ 5bitë¥¼ ì‚¬ìš©í•œë‹¤. $2^5$ì´ë©´ ëª¨ë“  Registerë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.\n3. **Memory Address**  \n    í•´ë‹¹ ê³µê°„ì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ registerì— ë‹´ê¸°ì§„ ëª»í•œ ëª¨ë“  ì •ë³´ê°€ ì €ì¥ëœë‹¤. ì™œëƒí•˜ë©´, register ê°€ í•˜ë‚˜ì˜ ë³€ìˆ˜ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ë° ë§Œì•½, ë³€ìˆ˜ê°€ 32ê°œë¥¼ ë„˜ì–´ê°„ë‹¤ë©´, ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ë§¤ìš° ë²„ê±°ì›Œì§„ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ì„ì‹œë¡œ ì €ì¥í•´ë‘ì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ memoryì— ì ê¹ ì €ì¥í•˜ëŠ”ë° ì´ë¥¼ **spilling register**ë¼ê³  ë¶€ë¥¸ë‹¤.  \n    ì¢€ ë” ë³µì¡í•œ ë°ì´í„° êµ¬ì¡°ë¥¼ ê°€ì§€ëŠ” ê²½ìš°ì—ë„ ì´ë¥¼ ëª¨ë‘ registerì— ë‹´ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” Memoryë¼ëŠ” ê²ƒì„ í™œìš©í•œë‹¤. MemoryëŠ” 8bit ë‹¨ìœ„ë¡œ í•œ ì¹¸ìœ¼ë¡œ ë‚˜ëˆ„ì–´ 4ê°œì˜ ì¹¸ì„ í•©ì¹œ ê²ƒì„ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¡œ ë´…ë‹ˆë‹¤. (ì™œëƒí•˜ë©´ ì´ê²ƒì´ 4x8bit = 32bit = 1wordê°€ ë˜ê¸° ë•Œë¬¸ì´ë‹¤.) ë”°ë¼ì„œ, ìš°ë¦¬ê°€ íŠ¹ì • ê°’ì— ì ‘ê·¼í•  ë•Œì—ëŠ” 4ì˜ ë°°ìˆ˜ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ì˜¬ë°”ë¥¸ ì ‘ê·¼ì´ë‹¤. ë˜í•œ, í•˜ë‚˜ì˜ ë°ì´í„°ê°€ 4ê°œì˜ ì¹¸ìœ¼ë¡œ ìª¼ê°œì§€ê¸° ë•Œë¬¸ì— ì €ì¥ ë°©ë²•ì— ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆë‹¤. ì–´ë–¤ ì‚¬ëŒë“¤ì€ ì• ìë¦¬ë¶€í„° ì°¨ê³¡ì°¨ê³¡ ë„£ì„ ìˆ˜ë„ ìˆì§€ë§Œ, ëˆ„êµ¬ëŠ” ì—­ìˆœìœ¼ë¡œë„ ë„£ì„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ìœ ì˜í•´ì•¼ í•œë‹¤. MIPSì—ì„œëŠ” ì•ì—ì„œë¶™í„° ì°¨ê³¡ì°¨ê³¡ ë„£ëŠ” Big Endian ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. (ì¦‰, 4ê°œ ì¤‘ ê°€ì¥ ë‚®ì€ ì£¼ì†Œê°’ì— ë†’ì€ ê°’ì„ ì˜ë¯¸í•˜ëŠ” ê°’(MSB)ì´ ì“°ì¸ë‹¤.)  \n    í•˜ë‚˜ì˜ Memory addressë¥¼ ê°€ë¥´í‚¤ê¸° ìœ„í•´ì„œëŠ” 32bitê°€ í•„ìš”í•˜ë‹¤. ì´ë ‡ê²Œ í•˜ì—¬ $2^{32}$ = 4GB ì´í•˜ê¹Œì§€ì˜ MemoryëŠ” ê°€ë¥´í‚¬ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. Instruction ìì²´ê°€ 32bitì¸ë°, ì´ë¥¼ Instructionì— ë°”ë¡œ ë„£ì„ ìˆ˜ëŠ” ì—†ê¸° ë•Œë¬¸ì— íŠ¹ì • Memory addressë¥¼ ê°€ë¥´í‚¤ê¸° ìœ„í•´ì„œ ë³„ë„ì˜ registerì— í•´ë‹¹ Memoryì˜ addressë¥¼ ì €ì¥í•´ë‘ê³  í•´ë‹¹ ì§€ì ë¶€í„° offsetì„ constantë¡œ ì „ë‹¬í•˜ëŠ” ì‹ìœ¼ë¡œ í‘œê¸°í•œë‹¤.(ì—¬ê¸°ì„œ 4ì˜ ë°°ìˆ˜ë¡œ memoryê°€ í‘œí˜„ë˜ë¯€ë¡œ, 2bitë¥¼ ëº€ë‹¤ê³  í•´ë„ 30bitë¡œ ì—¬ì „íˆ ë§ë‹¤.)\n\në‹¤ìŒì€ MIPSì˜ Registerì™€ Memoryë¥¼ ë‚˜íƒ€ë‚¸ ê²ƒì´ë‹¤.\n\n![registers](/images/registers.png)\n\nìƒì‹ì ìœ¼ë¡œ ì•Œì•„ë‘ê³  ê°ˆ ë¶€ë¶„ì€ reigsterëŠ” ì§ì ‘ì ìœ¼ë¡œ ì—°ì‚°ì´ ì´ë£¨ì–´ì§€ëŠ” ê³³ì´ê¸° ë•Œë¬¸ì—, registerì— ì ‘ê·¼í•˜ëŠ” ë¹„ìš©ì´ memoryì— ì ‘ê·¼í•˜ëŠ” ë¶€ë¶„ë³´ë‹¤ í™•ì—°í•˜ê²Œ ë¹„ìš©ì´ ì‹¸ë‹¤.(ì‹œê°„ì´ ì§§ê²Œ ê±¸ë¦°ë‹¤.) ë”°ë¼ì„œ, ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë‹¤ë£¨ì–´ì£¼ëŠ” ê²ƒì´ íš¨ìœ¨ í–¥ìƒì— ë„ì›€ì´ ëœë‹¤.\n\n#### 2\\. Operation\n\nëª¨ë“  computerëŠ” ê¸°ë³¸ì ì¸ ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. MIPSì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ í‘œê¸°ë²•ì„ ì‚¬ìš©í•œë‹¤.\n\n```plaintext\n1. <ëª…ë ¹ì–´(operation)> <ì—°ì‚°ì(operand) 1> <ì—°ì‚°ì(operand) 2> <ì—°ì‚°ì(operand) 3>\n\n2. <ëª…ë ¹ì–´(operation)> <ì—°ì‚°ì(operand) 1> <ì—°ì‚°ì(operand) 2>\n\n3. <ëª…ë ¹ì–´(operation)> <ì—°ì‚°ì(operand)>\n```\n\në§ˆì¹˜ ìš°ë¦¬ê°€ ì˜ì–´ë¥¼ ì²˜ìŒ ë°°ìš¸ ë•Œ, 1í˜•ì‹, 2í˜•ì‹ ë°°ìš°ëŠ” í˜•íƒœë‘ ìœ ì‚¬í•˜ë‹¤. ê·¸ë¦¬ê³  ì—¬ê¸°ì„œëŠ” ëª¨ë“  ë¬¸ì¥ì´ ëª…ë ¹í˜•ìœ¼ë¡œ êµ¬ì„±ëœë‹¤ëŠ” ì ì„ ìœ ì˜í•˜ì. ì´ì— ë”°ë¼ì„œ, ë‹¤ìŒ MIPSì˜ í”¼ì—°ì‚°ì(operand)ì™€ ì£¼ìš” Operationì„ ì‚´í´ë³´ì.\n\n> **Add / Substract**\n\n`add [ì—°ì‚°ì1] [ì—°ì‚°ì2] [ì—°ì‚°ì3]`\n\nëª¨ë“  ì—°ì‚°ì˜ ê¸°ë³¸ìœ¼ë¡œ ìœ„ì˜ í˜•íƒœ ì¤‘ì—ì„œ ì²«ë²ˆì§¸ì— í•´ë‹¹í•œë‹¤. ì´ë¥¼ ìˆ˜í•™ ê¸°í˜¸ë¡œ ë‚˜íƒ€ë‚´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n`[ì—°ì‚°ì1] = [ì—°ì‚°ì2] + [ì—°ì‚°ì3]`\n\nSubstraction ì—°ì‚°ë„ ì´ì™€ ë™ì¼í•˜ê²Œ ë™ì‘í•œë‹¤.\n\n> **Load / Save**\n\nìš°ë¦¬ê°€ Registerì— íŠ¹ì • ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´, $zero register ì— ì €ì¥í•˜ê¸°ë¥¼ ì›í•˜ëŠ” ê°’ ë˜ëŠ” registerë¥¼ addí•´ì„œ í•´ë‹¹ registerì— ì €ì¥í•˜ë©´ ëœë‹¤.\n\n`add [ì €ì¥ì„ ì›í•˜ëŠ” register No] [$zero] [1234]`\n\ní•˜ì§€ë§Œ, Memoryì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œëŠ” ë³„ë„ì˜ ëª…ë ¹ì–´ê°€ í•„ìš”í•˜ë‹¤. ê·¸ê²ƒì´ save ëª…ë ¹ì–´ ì…ë‹ˆë‹¤. ì• ì„œ ë§í•œ ê²ƒê³¼ ê°™ì´ memory addressë¥¼ ì§ì ‘ì ìœ¼ë¡œ Instructionì— í‘œí˜„í•  ìˆ˜ëŠ” ì—†ê¸° ë•Œë¬¸ì— íŠ¹ì • registerì— ì£¼ì†Œê°’ì„ ì €ì¥í•˜ê³ , í•´ë‹¹ ì£¼ì†Œë¥¼ baseë¡œ í•´ì„œ offsetì„ ë”í•´ì„œ ì£¼ì†Œë¥¼ ì°¾ëŠ” í˜•íƒœë¡œ ìˆ˜í–‰í•œë‹¤.\n\n`sw [ë¶ˆëŸ¬ì˜¬ register No] [Memoryì˜ Base Addressë¥¼ ê°€ì§„ register No] offset`\n\nì´ì™€ ë°˜ëŒ€ë¡œ Memoryì—ì„œ ë°ì´í„°ë¥¼ registerë¡œ ë¶ˆëŸ¬ì˜¬ ë•Œì—ë„ ë³„ë„ì˜ ëª…ë ¹ì–´ê°€ í•„ìš”í•˜ë‹¤.\n\n`lw [ë¶ˆëŸ¬ì˜¬ register No] [Memoryì˜ Base Addressë¥¼ ê°€ì§„ register No] offset`\n\n> **Jump**\n\nInstruction ì—­ì‹œ Memoryì— ìƒì£¼í•˜ê³  ìˆëŠ”ë°, ë§Œì•½ í•„ìš”ì— ë”°ë¼ ì´ì „ Instructionìœ¼ë¡œ ëŒì•„ê°€ê±°ë‚˜ Instructionì„ ë›°ì–´ë„˜ì–´ì•¼ í•œë‹¤ë©´, ê·¸ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Instructionì´ë‹¤.\n\n`j [ì´ë™í•  instruction offset]`\n\n> **Branch**\n\nBranch(ë¶„ê¸°)ëŠ” íŠ¹ì • ì¡°ê±´ì˜ ë¶€í•© ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³ , Jumpë¥¼ ìˆ˜í–‰í•˜ëŠ” Instructionì´ë‹¤. ì´ë¥¼ ìœ„í•œ operatorê°€ beq, bneê°€ ìˆë‹¤.\n\n`beq [ë¹„êµí•  register1] [ë¹„êµí•  register2] [ì´ë™í•  instruction offset]`\n\nregister1ê³¼ 2ê°€ ì„œë¡œ ë™ì¼í•˜ë‹¤ë©´, í•´ë‹¹ instruction offsetìœ¼ë¡œ ì´ë™í•˜ë¼ëŠ” ì˜ë¯¸ì´ë‹¤. bneëŠ” ë°˜ëŒ€ë¡œ ë‘ registerê°€ ë‹¤ë¥¼ ë•Œì— ì´ë™í•  ìˆ˜ ìˆë‹¤.\n\n> **ê¸°íƒ€ ì£¼ìš” ëª…ë ¹ì–´**\n\n![instruction](/images/instruction.png)\n\n\\* PC : Program Counterì˜ ì¤„ì„ë§ë¡œ í˜„ì¬ ì‹¤í–‰í•˜ê³  ìˆëŠ” Programì—ì„œ ì–´ëŠ ìœ„ì¹˜ì˜ Instructionì„ ì‹¤í–‰ì‹œí‚¤ê³  ìˆëŠ”ì§€ë¥¼ ë‚˜íƒ€ë‚¸ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ CPUëŠ” ë‹¤ìŒ Instructionì„ ë¶ˆëŸ¬ì˜¨ë‹¤.\n\n\\* offset : offsetì€ ëŒ€ê²Œ instruction ë‹¨ìœ„ë¡œ ë‚˜íƒ€ë‚´ê¸° ë•Œë¬¸ì— 1 offsetì€ 4Bytesë¥¼ ì˜ë¯¸í•œë‹¤. ë”°ë¼ì„œ, offsetì„ ì‹¤ì œ ì£¼ì†Œì— ë”í•  ë•Œì—ëŠ” ê³±í•˜ê¸° 4(ì‹¤ì œë¡œëŠ” shift left 2)ë¥¼ í•´ì•¼í•œë‹¤. ì´ë¡œ ì¸í•´ì„œ, í˜„ì¬ Instructionì˜ ë‹¤ìŒ Instructionì˜ ì£¼ì†Œë¥¼ PC+4 ë¼ê³  í•œë‹¤.\n\n---\n\n## Instructionë¥¼ ì´ìš©í•œ Programming ì–¸ì–´ ê¸°ë³¸ ìš”ì†Œ êµ¬í˜„\n\n### 1\\. ì¡°ê±´ë¬¸ (if / else)\n\n```pseudo\nif (i == j) \n f = g + h;\nelse\n f = g - h;\n```\n\në‹¤ìŒê³¼ ê°™ì€ cì˜ ì¡°ê±´ë¬¸ ì½”ë“œë¥¼ ì•„ë˜ì™€ ê°™ì€ Instructionë“¤ë¡œ ë³€í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```pseudo\nbne $s3, $s4, Else # go to Else if i != j\nadd $s0, $s1, $s2 # f = g + h (skipped if i != j)\nj Exit # go to Exit\n\nElse: \nsub $s0, $s1, $s2 # f = g - h (skipped if i = j)\n\nExit:\n```\n\nì—¬ê¸°ì„œ ElseëŠ” ì„ì˜ì˜ offsetì„ ë‚˜íƒ€ë‚¸ë‹¤. ë”°ë¼ì„œ, \"Else:\"ë¼ê³  í‘œì‹œëœ ë¶€ë¶„ì— í•´ë‹¹í•˜ëŠ” offsetì´ë¼ê³  ìƒê°í•˜ë©´ ëœë‹¤.\n\nSwitch/Case ë¬¸ ê°™ì€ ê²½ìš°ëŠ” if/elseë¡œ ë³€í™˜í•´ì„œ ë‚˜íƒ€ë‚´ê¸°ë„ í•˜ê³ , ì•„ë‹ˆë©´ Switching ìœ„ì¹˜ë¥¼ ì ì–´ë†“ì€ Tableì„ ë§Œë“¤ì–´ì„œ í•´ë‹¹ ìœ„ì¹˜ë¡œ ë°”ë¡œ ì´ë™í•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê¸°ë„ í•œë‹¤.\n\n### 2\\. ë°˜ë³µë¬¸ (while)\n\n```pseudo\nwhile(save[i] == k)\n i += 1;\n```\n\në‹¤ìŒê³¼ ê°™ì€ cì˜ ë°˜ë³µë¬¸ì„ ì•„ë˜ì™€ ê°™ì€ Instructionë“¤ë¡œ ë³€í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```pseudo\n# $t1 : save[i] address pointer\n# $t0 : save[i] value\n# $s3 : i\n# $s6 : saveì˜ base address (save[0] address pointer)\n# $s5 : k\n\n# sll shift left \"<<\" ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. \n# ì¦‰, ì•„ë˜ì—ì„œëŠ” ë‘ ë²ˆí•˜ë¯€ë¡œ, *2^2ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\nLoop: \nsll $t1, $s3, 2 # temp reg $t1 = i * 4\nadd $t1, $t1, $s6 # $t1 = address of save[i]\nlw $t0, 0($t1) # temp reg $t0 = save[i]\nbne $t0, $s5, Exit # go to Exit if save[i] != k\naddi $s3, $s3, 1 # i = i + 1\nj Loop # go to Loop\n\nExit:\n```\n\n### 3\\. í•¨ìˆ˜ (function)\n\nprocedureëŠ” ëŒ€ê²Œ function(í•¨ìˆ˜)ì´ë¼ê³ ë„ ë¶ˆë¦°ë‹¤. í•¨ìˆ˜ë¥¼ ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ ì˜ˆì‹œë¥¼ í†µí•´ì„œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.\n\nprocedureë¥¼ ë¹„ë°€ ì‘ì „ì„ ë§¡ê³  ë– ë‚œ spyë¼ê³  í•˜ì. ì‘ì „ì€ ìì›ì„ ìŠµë“í•˜ì—¬, íŠ¹ì • ì‘ì—…ì„ ìˆ˜í–‰í•˜ê³ , í”ì ì„ ê°ì¶˜ ë’¤ì—, ë°”ëŒì§í•œ ê²°ê³¼ë¥¼ ë“¤ê³  ëŒì•„ì˜¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¦‰, spyëŠ” ì‘ì—…ì„ ë§ˆì¹˜ê³ , ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ê°–ê³  ì™”ì§€ë§Œ, í•´ë‹¹ ê²°ê³¼ ì™¸ì—ëŠ” ì•„ë¬´ê²ƒë„ ë°”ë€Œì§€ ì•Šê¸°ë¥¼ ê¸°ëŒ€í•œë‹¤. (ëˆ„êµ°ê°€í•œí…Œ ì˜ì‹¬ë°›ì§€ ì•Šì•„ì•¼í•˜ê¸° ë•Œë¬¸ì—)\n\nì´ëŸ¬í•œ ê³¼ì •ì´ ë˜‘ê°™ì´ í•¨ìˆ˜ì˜ í˜¸ì¶œë§ˆë‹¤ ë°œìƒí•œë‹¤. ì•„ë˜ëŠ” ì´ë¥¼ ë‹¤ì†Œ ì¶•ì•½í•œ í˜•íƒœì…ë‹ˆë‹¤.\n\n1. parameterë¥¼ procedureê°€ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê³³ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.\n2. controlì„ procedure(callee)ë¡œ ì˜®ê¹ë‹ˆë‹¤.\n3. procedureëŠ” í•´ë‹¹í•˜ëŠ” ìì›(parameter)ì„ ìŠµë“í•©ë‹ˆë‹¤.\n4. ëª©í‘œí•œ ë°”ë¥¼ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n5. ê²°ê³¼ê°’ì„ ìì‹ ì„ í˜¸ì¶œí•œ program(caller)ì´ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê³³ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.\n6. controlì„ í˜¸ì¶œí•œ ê³³(caller)ìœ¼ë¡œ ë„˜ê¹ë‹ˆë‹¤.\n\n\\* ì—¬ê¸°ì„œ controlì´ ì´ë™í–ˆë‹¤ëŠ” ê²ƒì€ \bPCê°’ì´ PC+4ê°€ ì•„ë‹Œ í•¨ìˆ˜ì˜ ì£¼ì†Œë¡œ ì´ë™í–ˆë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\nì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë³„ë„ì˜ registerë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n```pseudo\n$a0 - $a3 : 4 argument(=parameter) registers.\n$v0 - $v1 : 2 return value registers.\n$ra : 1 return address register. ì›ë˜ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ê¸° ìœ„í•œ register.\n```\n\n\\$aì™€ \\$vëŠ” ì‚¬ì‹¤ í•¨ìˆ˜ ì‚¬ìš©ì—ì„œ í•„ìˆ˜ì ì´ê¸° ë•Œë¬¸ì— ì‰½ê²Œ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆì§€ë§Œ, \\$raê°€ ì˜ì•„í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì´ëŠ” procedureë¥¼ í˜¸ì¶œí–ˆë˜ ì‹œì ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ê¸° ìœ„í•´ì„œ í˜¸ì¶œí•œ ì‹œì ì˜ ì£¼ì†Œ(ì‹¤ì œë¡œëŠ” í˜¸ì¶œí•œ ì‹œì ì—ì„œ ë‹¤ìŒ Instructionì˜ ì£¼ì†Œ)ë¥¼ ì €ì¥í•˜ê³  ìˆëŠ” ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ê³¼ì • ì¦‰, \\$raì— ì €ì¥ê³¼ jumpë¥¼ ë™ì‹œì— í•´ì£¼ëŠ” ê²ƒì´ jal instructionì´ë‹¤. ì´ëŠ” ë°”ë¡œ ë‹¤ìŒ instructionì„ ê°€ë¥´í‚¤ë„ë¡ í•˜ì—¬ PC+4ë¡œ ì €ì¥í•˜ê³ , íŠ¹ì • ì§€ì ìœ¼ë¡œ ì´ë™í•œë‹¤. ê·¸ë¦¬ê³  ëŒì•„ì˜¬ ë•Œì—ëŠ” jr instructionì„ ì´ìš©í•´ì„œ \\$raë¡œ ëŒì•„ì˜¬ ìˆ˜ ìˆë‹¤.\n\në§Œì•½, ë” ë§ì€ ë³€ìˆ˜ë¥¼ return value, argumentë¡œ ì“°ê³  ì‹¶ë‹¤ë©´ ìš°ë¦¬ëŠ” ì´ë¥¼ memoryë¡œ ì˜®ê¸°ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. ì´ë•Œ, computer ì—ì„œëŠ” stackì´ë¼ëŠ” êµ¬ì¡°ë¥¼ ì‚¬ìš©í•œë‹¤. (ì‹¤ì œë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆê³ , ë§ˆì¹˜ stack ì²˜ëŸ¼ ì‚¬ìš©í•˜ê¸°ì— ì´ë ‡ê²Œ ë¶€ë¥¸ë‹¤.) Stack pointerë¼ëŠ” register(\\$sp)ë¥¼ ì´ìš©í•˜ì—¬ í˜„ì¬ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” dataê°€ stackì˜ ì–´ë””ë¥¼ ê°€ë¥´í‚¤ê³  ìˆëŠ”ì§€ë¥¼ ì €ì¥í•œë‹¤.\n\n> **ì‹¤ì œ ì˜ˆì œ**\n\n```c\nint leaf_example (int g, int h, int i, int j) {\n int f;\n \n f = (g + h) - (i + j);\n return f;\n}\n```\n\n```c\nleaf_example:\naddi $sp, $sp, â€“12 # adjust stack to make room for 3 items\nsw $t1, 8($sp) # save register $t1 for use afterwards\nsw $t0, 4($sp) # save register $t0 for use afterwards\nsw $s0, 0($sp) # save register $s0 for use afterwards\n\nadd $t0,$a0,$a1 # register $t0 contains g + h\nadd $t1,$a2,$a3 # register $t1 contains i + j\nsub $s0,$t0,$t1 # f = $t0 â€“ $t1, which is (g + h)â€“(i + j)\n\nadd $v0,$s0,$zero # returns f ($v0 = $s0 + 0)\n\nlw $s0, 0($sp)  # restore register $s0 for caller\nlw $t0, 4($sp)  # restore register $t0 for caller\nlw $t1, 8($sp)  # restore register $t1 for caller\naddi $sp,$sp,12 # adjust stack to delete 3 items\n\njr $ra # jump back to calling routine\n```\n\ní•´ë‹¹ ë°©ì‹ì„ í†µí•´ì„œ, ë§Œì•½ ìš°ë¦¬ê°€ argumentë¥¼ ê° argument register ì±„ì›Œì£¼ê³ , \"jal leaf\\_example\"ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë˜ë©´, í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ë™ì‘ì„ í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.\n\ní•˜ì§€ë§Œ, ë” ê³ ë¯¼í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆë‹¤. ë°”ë¡œ í•¨ìˆ˜ ì•ˆì—ì„œ ë˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì´ë‹¤.\n\n> **Nested Function call(Function ë‚´ë¶€ì—ì„œ Functionì˜ í˜¸ì¶œ)**\n\nprocedureê°€ ë˜ procedureë¥¼ í˜¸ì¶œí•˜ëŠ” ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì´ ë•Œì—ëŠ” ê°„ë‹¨í•œê²Œ stackì˜ retuern addressë¥¼ ì €ì¥í•´ë†“ê³ , \\$raë¥¼ ë®ì–´ì”Œìš°ëŠ” ì‹ìœ¼ë¡œ ì‘ë™í•œë‹¤. ì•„ë˜ëŠ” recursive callì„ ìˆ˜í–‰í•œ ê²½ìš°ë¥¼ ë‹´ì€ ë‚´ìš©ì´ë‹¤.\n\n```c\nint fact (int n) {\n if (n < 1) \n  return 1;\n else\n  return n * fact(n-1); \n}\n```\n\n```pseudo\nfact:\naddi  $sp, $sp, â€“8    # adjust stack for 2 items\nsw    $ra, 4($sp)     # save the return address\nsw    $a0, 0($sp)     # save the argument n\n# slti ëŠ” $a0ì˜ ê°’ì´ ìƒìˆ˜ë³´ë‹¤ ì‘ë‹¤ë©´, 0 í¬ë‹¤ë©´ 1ì´ ì €ì¥ë©ë‹ˆë‹¤.\nslti  $t0, $a0, 1     # test for n < 1\nbeq   $t0, $zero, L1  # if n >= 1, go to L1\n\naddi  $sp, $sp, 8     # pop 2 items off stack\n\naddi  $v0, $zero, 1   # return 1\njr    $ra             # return to caller\n\nL1: addi $a0,$a0,â€“1   # n >= 1: argument gets (n â€“ 1)\njal fact              # call fact with (n â€“1)\n\nlw $a0, 0($sp)        # return from jal: restore argument n \nlw $ra, 4($sp)        # restore the return address\naddi $sp, $sp, 8      # adjust stack pointer to pop 2 items\n\nmul $v0,$a0,$v0       # return n * fact (n â€“ 1)\njr   $ra              # return to the caller\n```\n\nì´ì œ ëì¼ ê±° ê°™ì§€ë§Œ, ë§ˆì§€ë§‰ìœ¼ë¡œ ìƒê°í•´ì•¼ í•  ê²Œ ìˆë‹¤. ë°”ë¡œ ë‚´ë¶€ì—ì„œ ë˜ local variableì„ ì„ ì–¸í•œ ê²½ìš°ì´ë‹¤. ì´ ê²½ìš°ì—ë„ memoryì— ê³µê°„ì— ì €ì¥í•´ì•¼ í•˜ëŠ”ë° ì´ë•Œì—ë„ stack pointerë¥¼ ì´ë™ ì‹œì¼œì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ í›„ì— ë™ì‘ì— í˜¼ë€ì„ ì•¼ê¸°í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, frame pointerë¼ëŠ” ê²ƒì„ ì¶”ê°€ë¡œ í• ë‹¹í•˜ì˜€ë‹¤. ì´ëŠ” í•¨ìˆ˜ì˜ ì§„ì… ì‹œì ì— stack pointerì˜ ì´ˆê¸° ìœ„ì¹˜ë¥¼ ê°€ë¥´í‚¨ë‹¤. ë”°ë¼ì„œ, ì‰½ê²Œ í›„ì— ëŒì•„ì˜¬ ì§€ì ì„ ì•Œ ìˆ˜ ìˆê¸°ì— stack pointerë¥¼ ë” ìœ ë™ì ìœ¼ë¡œ ì›€ì§ì¼ ìˆ˜ ìˆë‹¤.\n\n---\n\n## ì—¬ëŸ¬ ë³€ìˆ˜ í˜•íƒœ í‘œí˜„ë²•\n\n### Signed Numbers\n\nì¼ë°˜ì ìœ¼ë¡œ unsigned numberë¼ê³  í•˜ë©´, 0ê³¼ ì–‘ìˆ˜ë¥¼ í¬í•¨í•˜ëŠ” ë²”ìœ„ì´ë‹¤. í•˜ì§€ë§Œ, signed numberëŠ” ìŒìˆ˜ê¹Œì§€ í¬í•¨í•œë‹¤. ê·¸ë ‡ë‹¤ë©´, ì»´í“¨í„°ì—ì„œëŠ” ìŒìˆ˜ë¥¼ ì–´ë–»ê²Œ í‘œí˜„í•  ìˆ˜ ìˆì„ê¹Œ?\n\nì‚¬ëŒì˜ ë¨¸ë¦¬ë¡œ ê°€ì¥ ì‰½ê²Œ ìƒê°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ë¶€í˜¸ë¥¼ ë‚˜íƒ€ë‚´ê¸° ìœ„í•œ ë³„ë„ì˜ í‘œì‹œ bitë¥¼ í•˜ë‚˜ ë„£ì–´ì£¼ë©´ ë  ê±° ê°™ë‹¤ëŠ” ìƒê°ì„ í•  ê²ƒì´ë‹¤. ì´ê²ƒì´ ì •í™•í•˜ë‹¤. ë°”ë¡œ ì˜¤ë¥¸ìª½ ëì— ìˆëŠ” bitê°€ 1ì´ë©´ ìŒìˆ˜ 0ì´ë©´ ì–‘ìˆ˜ë¡œ ë³´ëŠ” ë°©ì‹ì´ë‹¤. 1ì´ ë§¨ ì•ì— ì˜¬ ë•ŒëŠ” 0ì´ ì›ë˜ 1ì˜ ì—­í• ì„ ëŒ€ì‹ í•œë‹¤. ê·¸ë¦¬ê³  0ì´ ì•ì— ì˜¬ ë•ŒëŠ” ì›ë˜ ê³„ì‚°í•˜ë˜ëŒ€ë¡œ ìˆ˜í–‰í•˜ë©´ ëœë‹¤. ê·¸ëŸ¬ë©´ ë†€ëê²Œë„ ìš°ë¦¬ê°€ ìƒê°í•˜ëŠ” ê²ƒì²˜ëŸ¼ ë§ì…ˆ ëº„ì…ˆ ì—°ì‚°ì´ ë™ì‘í•œë‹¤. ê·¸ë¦¬ê³  ì˜¤ë¥¸ìª½ ëì— ìˆëŠ” ìˆ˜ë¥¼ ìš°ë¦¬ëŠ” MST ë¼ê³  í•˜ê³ , ì´ë¥¼ sign bitë¼ê³  ë¶€ë¥¸ë‹¤.\n\n```pseudo\n0000 0000 0000 0000 0000 0000 0000 0000(two) = 0(ten) \n0000 0000 0000 0000 0000 0000 0000 0001(two) = 1(ten)\n0000 0000 0000 0000 0000 0000 0000 0010(two) = 2(ten)\n...\n0111 1111 1111 1111 1111 1111 1111 1101(two) = 2,147,483,645(ten)\n0111 1111 1111 1111 1111 1111 1111 1110(two) = 2,147,483,646(ten)\n0111 1111 1111 1111 1111 1111 1111 1111(two) = 2,147,483,647(ten)\n1000 0000 0000 0000 0000 0000 0000 0000(two) = â€“2,147,483,648(ten)\n1000 0000 0000 0000 0000 0000 0000 0001(two) = â€“2,147,483,647(ten)\n1000 0000 0000 0000 0000 0000 0000 0010(two) = â€“2,147,483,646(ten)\n...\n1111 1111 1111 1111 1111 1111 1111 1101(two) = â€“3(ten)\n1111 1111 1111 1111 1111 1111 1111 1110(two) = â€“2(ten)\n1111 1111 1111 1111 1111 1111 1111 1111(two) = â€“1(ten) \n```\n\n> **Proof**\n\n```pseudo\n# ë§ì…ˆ\n  1111 1111 1111 1110 (-2)\n+                   1 (+1)\n----------------------\n  1111 1111 1111 1111 (-1)\n\n\n                   11  (+3)\n+ 1111 1111 1111 1000  (-8)\n----------------------\n  1111 1111 1111 1011  (-5)\n\n\n# ëº„ì…ˆ 1\n  1111 1111 1111 1110 (-2)\n-                   1 (+1)\n----------------------\n  1111 1111 1111 1101 (-3)\n\n\n# ëº„ì…ˆ 2\n                   11  (+3)\n- 1111 1111 1111 1000  (-8)\n----------------------\n                   11  (+3)\n+ 0000 0000 0000 1000  (+8)\n----------------------\n  0000 0000 0000 1011  (+11)\n```\n\nì—°ì‚°ì„ í•˜ë‹¤ë³´ë©´, ë‹¹ì—°íˆ ë„ˆë¬´ í° ì–‘ìˆ˜ë¥¼ ë”í•˜ê²Œ ë˜ë©´ overflowê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë° ì´ ê²½ìš° ìš´ì˜ì²´ì œë§ˆë‹¤ compilerë§ˆë‹¤ ì²˜ë¦¬ ë°©ì‹ì´ ìƒì´í•˜ë‹¤. Cì—ì„œëŠ” overflowê°€ ë˜ë©´ ê·¸ëŒ€ë¡œ ê°’ì„ ë‚´ë†“ê¸° ë•Œë¬¸ì—, ëŒ€ê²Œ êµ‰ì¥íˆ í° ìŒìˆ˜ê°€ ë‚˜ì˜¤ê²Œ ëœë‹¤.\n\n### Character\n\ncomputerì—ì„œ ìˆ˜ê°€ ì•„ë‹Œ ê°’ì„ ì–´ë–»ê²Œ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ê°€ëŠ” ASCII code í‘œê°€ ë‹µí•´ì¤„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. í•˜ë‚˜ì˜ ë¬¸ìë¥¼ ìš°ë¦¬ëŠ” characterë¼ê³  ë¶€ë¥´ê³ , ASCII code í‘œì™€ ê°™ì€ ë°©ì‹ì„ í†µí•´ì„œ ìˆ˜ë¥¼ ê¸€ìë¡œ ë³€í™˜í•˜ì—¬ í‘œí˜„í•œë‹¤. ë˜í•œ, í•˜ë‚˜ì˜ ë¬¸ìê°€ ì•„ë‹Œ ë‹¨ì–´, ë¬¸ì¥ì— ì´ë¥´ê²Œ ë˜ë©´ ì´ë¥¼ ìš°ë¦¬ëŠ” stringì´ë¼ê³  í•˜ë©°, ì´ëŠ” ì´ ë°ì´í„°ì˜ ê¸¸ì´ë¥¼ í‘œê¸°í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒ 3ê°€ì§€ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ê²Œ ëœë‹¤.\n\n1. stringì˜ ê°€ì¥ ì•ì— ê¸¸ì´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ì„ ë„£ì–´ì¤€ë‹¤.\n2. stringì„ êµ¬ì¡°ì²´ë¡œ ë§Œë“¤ì–´ì„œ ê¸¸ì´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ì„ ë”°ë¡œ ë„£ëŠ”ë‹¤.\n3. stringì˜ ê°€ì¥ ë ë¬¸ìë¥¼ êµ¬ë¶„ìë¡œ ì±„ì›Œì„œ êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. â‡’ Cì—ì„œëŠ” \\\\0 ì„ ì‚¬ìš©í•˜ì—¬ êµ¬ë¶„í•œë‹¤.\n\n---\n\n## Representing Instruction with Machine Language\n\nìœ„ì— ë‚˜ì˜¨ MIPS Assembly codeë¥¼ ì´ì œ MIPSì˜ ê¸°ê³„ì–´ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•  ê²ƒì´ë‹¤.\n\në‹¤ì‹œ í•œ ë²ˆ ì„¤ëª…í•˜ìë©´, ìš°ë¦¬ì˜ programë“¤ì€ ì‚¬ì‹¤ìƒ instructionì˜ ì§‘í•©ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ë˜í•œ, í˜„ëŒ€ì˜ ì»´í“¨í„°ëŠ” ì´ëŸ¬í•œ instructionë“¤ì„ memoryì— ë§ˆì¹˜ ë°ì´í„°ì²˜ëŸ¼ ìŒ“ì•„ì„œ ì‹¤í–‰ì‹œí‚¨ë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ë°©ì‹ì„ **stored program** ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ìš°ë¦¬ëŠ” ìœ„ì—ì„œ memoryì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ í•˜ë‚˜ì˜ word ì¦‰ 32bitë¥¼ ì‚¬ìš©í–ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ì˜ instructionë„ í•˜ë‚˜ì˜ word ë‹¨ìœ„ë¡œ í‘œí˜„í•œë‹¤.\n\nì•„ë˜ ê·¸ë¦¼ì€ 32bitì˜ ê° ê° ë¶€ë¶„ì´ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€ë¥¼ í‘œí˜„í•œ ê²ƒì´ë‹¤. ìœ„ì˜ ì—°ì‚°ì„ í‘œì‹œí•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ wordë¥¼ êµ¬ë¶„í•œë‹¤. ì´ë•Œ ì£¼ì˜í•  ì ì€ í° ê°’ì„ ì²˜ë¦¬í•  ë•Œì—ëŠ” I-Typeì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í˜•íƒœê°€ ê¸°ë³¸í˜•ì¸ R-Typeê³¼ëŠ” ë‹¤ì†Œ ë‹¤ë¥¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n> **R-Type**\n\n![r-type](/images/r-type.png)\n\n- op : opcodeë¼ê³  ë¶ˆë¦¬ë©°, instructionì˜ ë™ì‘ì´ ë¬´ì—‡ì¸ì§€ë¥¼ ì •ì˜í•œë‹¤. (ex. add, jump, ...)\n- rs : first source register\n- rt : second source register\n- rd : destination register. ì—°ì‚°ì˜ ê²°ê³¼ê°’ì´ ì €ì¥ë˜ëŠ” ìœ„ì¹˜ë¥¼ ì˜ë¯¸í•œë‹¤.\n- shamt : shift amountë¼ëŠ” ì˜ë¯¸ë¡œ shift ì—°ì‚°ì„ ì‚¬ìš©í•  ë•Œ ì´ìš©ëœë‹¤.\n- funct : op fieldì—ì„œ êµ¬ì²´ì ì¸ ë™ì‘ì„ ì •ì˜í•  ë•Œ ì‚¬ìš©í•œë‹¤.\n\n> **I-Type**\n\n![i-type](/images/i-type.png)\n\n- op : opcodeë¼ê³  ë¶ˆë¦¬ë©°, instructionì˜ ë™ì‘ì´ ë¬´ì—‡ì¸ì§€ë¥¼ ì •ì˜í•œë‹¤. (ex. addi, jump, ...)\n- rs : first source register\n- rt : second source register\n- constraint or address : ê¸´ ê°’ì´ í•„ìš”í•œ ì—°ì‚°ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ í‘œí˜„í•œë‹¤.\n\n## Addressing\n\nMIPSëŠ” ì—¬ëŸ¬ê°€ì§€ instructionì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—, ì£¼ì†Œë¥¼ targetingí•˜ëŠ” ë°©ì‹ë„ ì—¬ëŸ¬ê°€ì§€ì´ë‹¤. ë˜í•œ, ë”°ë¥¸ instruction set architectureì—ì„œë„ ë‹¤ì–‘í•œ ë°©ë²•ì„ í†µí•´ì„œ memoryì˜ ì£¼ì†Œë¥¼ ê°€ë¥´í‚¨ë‹¤.\n\n1. Immediate addressing : ìƒìˆ˜ë¥¼ í†µí•´ ì§ì ‘ addressë¥¼ ì§€ì •í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n2. Register addressing : registerë¡œ addressë¥¼ ì§€ì •í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n3. Base addressing : ìƒìˆ˜ì— íŠ¹ì • registerê°’ì„ ë”í•´ì„œ êµ¬í•˜ëŠ” ë°©ì‹ì´ë‹¤.(MIPS â†’ Load Word, Save Word)\n4. PC-relative addressing : PC ê°’ì— ìƒìˆ˜ ê°’ì„ ë”í•´ì„œ êµ¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. (MIPS â†’ Branch)\n5. Psedodirect addressing : PCì˜ ë§¨ì• ë‚´ìë¦¬ë¥¼ ê°€ì ¸ì™€ì„œ ì“°ëŠ” ë°©ì‹ì´ë‹¤. (MIPS â†’ Jump)\n\n## Reference\n\n- David A. Patterson, John L. Hennessy, Computer Organization and Design\n","slug":"architecture-instruction","date":"2022-04-14 09:00","title":"2. Instruction","category":"Computer Architecture","tags":["Computer Organization And Design","Instruction","ISA"],"desc":"ì»´í“¨í„°ê°€ ì•Œì•„ë“¤ì„ ìˆ˜ ìˆëŠ” ëª…ë ¹ì„ ìš°ë¦¬ëŠ” Instructionì´ë¼ê³  í•œë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ë“¤ì„ ëª¨ì•„ë†“ì€ ë‹¨ì–´ì¥(Vocabulary)ëŠ” Instruction setì´ ë˜ëŠ” ê²ƒì´ë‹¤. ì´ëŸ° ì˜ë¯¸ì—ì„œ í˜„ëŒ€ì˜ computerëŠ” ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë„ë¡ ì„¤ê³„ë˜ì—ˆê¸° ë•Œë¬¸ì—, ì´ë¥¼Â Instruction set architectureë¼ê³  ë¶€ë¥¸ë‹¤. í•´ë‹¹ ì±…ì—ì„œëŠ” MIPSë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ê¸° ë•Œë¬¸ì— ë˜‘ê°™ì´ MIPSë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ëª…í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ë¥¸ processorë“¤ê³¼ ë§¤ìš° ìœ ì‚¬í•˜ë‹ˆ ì´ë¥¼ ë°°ìš°ë©´ ì‰½ê²Œ ë‹¤ë¥¸ ê²ƒë„ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.ê·¸ë ‡ë‹¤ë©´, Instructionì´ë€ ë¬´ì—‡ì¼ê¹Œ? ì´ëŠ” ê¸°ê³„ì–´(0ê³¼ 1ë¡œ ì´ë£¨ì–´ì§„ ì´ì§„ìˆ˜ ì²´ê³„)ì˜ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ Assembly Instructionì´ë¼ê³ ë„ í•œë‹¤. ì´ëŠ” hardwareì—ê²Œ íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” ëª…ë ¹ì–´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸°ì— ìš°ë¦¬ê°€ ì‹¤í–‰í•˜ê±°ë‚˜ ì‘ì„±í•˜ëŠ” ëª¨ë“  programë“¤ì€ ì‚¬ì‹¤ Instructionë“¤ì˜ ì§‘í•©ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì‹¤ì œë¡œ Computerì—ì„œ Programì´ ë™ì‘í•  ë•Œ, ì´ëŠ” ComputerëŠ” memoryì— programì˜ ë‚´ìš©ê³¼ programì—ì„œ ì‚¬ìš©í•  dataë“¤ì„ ìœ„í•œ ê³µê°„ì„ ë°°ì •í•´ì¤€ë‹¤. ê·¸ëŸ° í›„ì— ì‹¤ì œë¡œ ì‹¤í–‰ë  ë•Œì—ëŠ” programì˜ Instructionì„ ì°¨ë¡€ì°¨ë¡€ ì½ì–´ê°€ë©´ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Intro\n\nì»´í“¨í„° êµ¬ì¡°ì—ì„œ ê¸°ë³¸ì´ ë˜ëŠ” **ì‚¬ì¹™ì—°ì‚°**ê³¼ **ì†Œìˆ˜**ì˜ í‘œí˜„ë°©ì‹(**Floating Point**)ì„ ë‹¤ë£¬ë‹¤.\n\n## Overflow\n\nì‹œì‘í•˜ê¸°ì— ì•ì„œì„œ Overflowë¼ëŠ” ê°œë…ì„ ì•Œê³ ê°€ì•¼í•œë‹¤. Overflowë€ íŠ¹ì • ë³€ìˆ˜ì˜ í‘œí˜„ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ê²½ìš°ì— ë°œìƒí•˜ê²Œ ë˜ëŠ” ì—ëŸ¬ ìƒí™©ì„ ì˜ë¯¸í•œë‹¤. ì¼ë°˜ì ì¸ ì‚¬ëŒì˜ ìƒê°ì—ëŠ” ìˆ˜ì˜ ë²”ìœ„ê°€ ìˆëŠ” ê²ƒì€ ì´ìƒí•  ìˆ˜ ìˆì§€ë§Œ, ì»´í“¨í„°ì—ì„œëŠ” ì´ê²ƒì´ ë§¤ìš° ë‹¹ì—°í•˜ë‹¤. ë¬´í•œëŒ€ë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒì€ ì‚¬ì‹¤ìƒ ì»´í“¨í„°ë¡œëŠ” ë¶ˆê°€ëŠ¥í•˜ë‹¤. ëŒ€ì‹  ë§¤ìš° í° ìˆ˜ë¥¼ í†µí•´ì„œ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì»´í“¨í„°ì—ê²ŒëŠ” ì¼ë°˜ì ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ìš°ë¦¬ê°€ ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©í•˜ëŠ” integer ë³€ìˆ˜ typeì€ ê·¸ ê°’ì˜ ë²”ìœ„ê°€ ì •í•´ì ¸ìˆë‹¤. ì´ëŠ” ëŒ€ê²Œ í•˜ë‚˜ì˜ ë³€ìˆ˜ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ 4bytesë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì´ëŠ” 32bitsì´ê¸° ë•Œë¬¸ì—, ìµœëŒ€ $2^{32}$ê¹Œì§€ê°€ í‘œí˜„ì˜ ë²”ìœ„ê°€ ë˜ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì— ìŒìˆ˜ë¥¼ í‘œí˜„í•˜ê²Œ ë˜ëŠ” ê²½ìš°ì—ëŠ” ë²”ìœ„ê°€ $-2^{31}$ ~ $2^{31}$ë¡œ ì œí•œëœë‹¤. ë”°ë¼ì„œ, ì´ë ‡ê²Œ ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ëŠ” ê²½ìš°ì— ëŒ€í•´ì„œëŠ” programming language ë§ˆë‹¤ ì²˜ë¦¬ê°€ ë‹¬ë¼ì§€ì§€ë§Œ, ëŒ€ê²Œ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¤ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. (pythonì—ì„œëŠ” ì•Œì•„ì„œ ë²”ìœ„ë¥¼ ì¶”ê°€í•œë‹¤.)\n\n## ë§ì…ˆ / ëº„ì…ˆ\n\në§ì…ˆì€ ê° ìë¦¿ìˆ˜ì˜ í•©ê³¼ ì´ì „ ìë¦¿ìˆ˜ì—ì„œ ì˜¬ë¦¼ëœ ìˆ˜(Carry)ì˜ í•©ì´ë¼ê³  ë‹¤ì‹œ í•´ì„í•  ìˆ˜ ìˆë‹¤.\nì´ì§„ìˆ˜ì—ì„œëŠ” ê²°êµ­ ì˜¬ë¦¼ëœ ìˆ˜ì™€ ë‘ ìˆ˜ê°€ ë§Œë“¤ì–´ ë‚¼ ìˆ˜ ìˆëŠ” ê²½ìš°ì˜ ìˆ˜ëŠ” 00 ~ 11ì´ë‹¤.\n\n| A    | B    | Carry | Result |\n| :--- | :--- | :---- | :----- |\n| 0    | 0    | 0     | 00     |\n| 0    | 0    | 1     | 01     |\n| 0    | 1    | 0     | 01     |\n| 0    | 1    | 1     | 10     |\n| 1    | 0    | 0     | 01     |\n| 1    | 0    | 1     | 10     |\n| 1    | 1    | 0     | 10     |\n| 1    | 1    | 1     | 11     |\n\nì´ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” XOR 2ê°œì™€ AND 2ê°œ ê·¸ë¦¬ê³  OR 1ê°œë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤.(C'ì™€ Sê°€ ê²°ê³¼ê°’ì´ë‹¤.)\n\n| A    | B    | Carry(C) | A XOR B(D) | A AND B(E) | C AND D(F) | E OR F(C') | C XOR D(S) |\n| :--- | :--- | :------- | :--------- | :--------- | :--------- | :--------- | :--------- |\n| 0    | 0    | 0        | 0          | 0          | 0          | 0          | 0          |\n| 0    | 0    | 1        | 0          | 0          | 0          | 0          | 1          |\n| 0    | 1    | 0        | 1          | 0          | 0          | 0          | 1          |\n| 0    | 1    | 1        | 1          | 0          | 1          | 1          | 0          |\n| 1    | 0    | 0        | 1          | 0          | 0          | 0          | 1          |\n| 1    | 0    | 1        | 1          | 0          | 1          | 1          | 0          |\n| 1    | 1    | 0        | 0          | 1          | 0          | 1          | 0          |\n| 1    | 1    | 1        | 0          | 1          | 0          | 1          | 1          |\n\n![fullAdder](https://upload.wikimedia.org/wikipedia/commons/5/57/Fulladder.gif)\n\n### ìŒìˆ˜\n\nìŒìˆ˜ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ 2ì˜ ë³´ìˆ˜ë¼ëŠ” ë°©ì‹ì„ í™œìš©í•œë‹¤. ë§Œì•½ íŠ¹ì • ìˆ˜ë¥¼ ìŒìˆ˜ë¡œ ë³€í™˜í•˜ê³  ì‹¶ë‹¤ë©´ ì „ì²´ ìˆ˜ë¥¼ ë°˜ì „ ì‹œí‚¨ í›„ `+1`ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, ìš°ë¦¬ëŠ” ì‰½ê²Œ ìŒìˆ˜ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  ë†€ëê²Œë„ íŠ¹ì • ìˆ˜ë¥¼ ìŒìˆ˜ë¡œ ë³€í™˜í•˜ê³  ë§ì…ˆì„ í•˜ê²Œ ë˜ë©´, ì´ê²ƒì´ ë°”ë¡œ ëº„ì…ˆì´ ëœë‹¤.\n\n## ê³±ì…ˆ\n\në¨¼ì € ì´ì§„ìˆ˜ì˜ ê³±ì…ˆì€ ì•„ë˜ì™€ ê°™ì´ ì‹­ì§„ìˆ˜ì—ì„œì˜ ê³±ì…ˆ ì—°ì‚°ê³¼ ë°©ë²•ì€ ê°™ë‹¤.\n\nê³±í•´ì§€ëŠ” ìˆ˜(multiplicand), ê³±í•˜ëŠ” ìˆ˜(multipler), ê³±í•´ì§„ ê²°ê³¼(product)ì´ë‹¤.\n\n![ê³±ì…ˆ ì˜ˆì œ](/images/multiplication.png)\n\ní•˜ì§€ë§Œ, ì—¬ê¸°ì„œ í•˜ë‚˜ì˜ íŠ¹ì§•ì„ ë°œê²¬í•  ìˆ˜ ìˆë‹¤. ê° ìë¦¿ìˆ˜ì˜ ê²°ê³¼ê°’ì€ ê³±í•˜ëŠ” ìˆ˜ì— ì˜í•´ì„œ ê²°ì •ëœë‹¤ëŠ” ì ì´ë‹¤. ê³±í•˜ëŠ” ìˆ˜ê°€ 1ì´ë©´, ê³±í•´ì§€ëŠ” ìˆ˜ì˜ í•´ë‹¹ ìë¦¿ìˆ˜ê°€ ê²°ê³¼ê°’ì´ ë˜ê³ , 0ì´ë©´ ë¬´ì¡°ê±´ 0ì´ë¼ëŠ” ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì€ ì•Œê³ ë¦¬ì¦˜ì— ë”°ë¼ì„œ ì—°ì‚°ì´ ìˆ˜í–‰ëœë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\n![ê³±ì…ˆ ì•Œê³ ë¦¬ì¦˜](/images/multiplication-flow.png)\n\në§Œì•½, ìŒìˆ˜ì˜ ê³±ì…ˆì˜ ê²½ìš°ì—ëŠ” ê°„ë‹¨í•˜ê²Œ í•´ë‹¹ ê°’ì„ ì–‘ìˆ˜ë¡œ ë³€í™˜í•˜ê³ , ì—°ì‚°ì„ ìˆ˜í–‰í•œ ë’¤ì— ë‹¤ì‹œ ìŒìˆ˜ë¡œ ë³€í™˜í•˜ëŠ” ë°©ì‹ì„ ìˆ˜í–‰í•œë‹¤.\n\n## ë‚˜ëˆ—ì…ˆ\n\në‚˜ëˆ—ì…ˆì€ ì—­ì‹œ ë™ì¼í•˜ë‹¤.\n\në‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜(Dividend), ë‚˜ëˆ„ëŠ” ìˆ˜(Divisor), ëª«(Quotient), ë‚˜ë¨¸ì§€(Remainder) ì´ë‹¤.\n\n![ë‚˜ëˆ—ì…ˆ ì˜ˆì œ](/images/division.png)\n\nì´ë•ŒëŠ” ì—­ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ìˆ˜ë¥¼ ì˜¤ë¥¸ìª½ìœ¼ë¡œ 32ë²ˆ shiftí•˜ì—¬ ë§¤ìš° í° ìˆ˜ë¡œ ë§Œë“¤ê³ , ë‚˜ë¨¸ì§€ë¥¼ ë‚˜ëˆ„ì–´ì§€ëŠ” ìˆ˜ë¡œ ì´ˆê¸°í™”í•˜ì—¬ ì°¨ê·¼ì°¨ê·¼ ë¹¼ë³´ë©´ì„œ ì–‘ìˆ˜ì´ë©´ ë¹¼ê³ , ìŒìˆ˜ì´ë©´ ë˜ëŒë¦¬ê¸°ë¥¼ ë°˜ë³µí•˜ë©´ì„œ ëª«ê³¼ ë‚˜ë¨¸ì§€ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤.\n\n![ë‚˜ëˆ—ì…ˆ ì•Œê³ ë¦¬ì¦˜](/images/division-flow.png)\n\n## ì‹¤ìˆ˜ ì—°ì‚°\n\nìœ„ì—ì„œëŠ” ì—¬íƒœê¹Œì§€ ì •ìˆ˜ì˜ ì—°ì‚°ì„ ë‹¤ë£¨ì—ˆì§€ë§Œ, ì†Œìˆ˜ì ì„ í¬í•¨í•˜ëŠ” ì‹¤ìˆ˜ ì—°ì‚°ì„ ìˆ˜í–‰í•  ë•Œì—ëŠ” ë‹¬ë¼ì§€ëŠ” ì‚¬í•­ì´ ê½¤ë‚˜ìˆë‹¤.\n\në¨¼ì €, ì‹¤ìˆ˜ë¥¼ í‘œê¸°í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ë¨¼ì € ë³´ì.\n\n$$31231.4_{(10)} = 3.12314_{(10)} \\times 10^{4_{(10)}}$$\n\n$$100101.1_{(2)}= 1.001011_{(2)} \\times 2^{101_{(2)}} $$\n\nì´ë¥¼ ì¼ë°˜ì ìœ¼ë¡œ normalizationì´ë¼ê³  í•˜ë©°, ì´ì§„ìˆ˜ ì²´ê³„ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¥¼ ê°–ê²Œ ëœë‹¤.\n\n$$\\text{1.xxxxx} \\times 2^{yyyyy}$$\n\në”°ë¼ì„œ, ëŒ€ê²Œ ì‹¤ìˆ˜ë¥¼ í‘œí˜„í•  ë•Œì—ëŠ” xë¶€ë¶„(fraction)ê³¼ yë¶€ë¶„(exponent) ê·¸ë¦¬ê³  ë¶€í˜¸ë¥¼ í‘œí˜„(sign)í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì„œ ì €ì¥í•œë‹¤. ì´ ë˜í•œ, 4byteë¥¼ í†µí•´ì„œ í‘œí˜„í•  ê²½ìš°ì—ëŠ” xë¶€ë¶„ì— 8bits, yë¶€ë¶„ì— 23bits ê·¸ë¦¬ê³  ë¶€í˜¸ì— 1bitë¥¼ í• ë‹¹í•œë‹¤.\n\në”°ë¼ì„œ, ì¼ë°˜ì ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì“°ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ì˜ í‘œí˜„ì´ë‹¤.\n\n$$(-1)^s \\times(1+\\text{Fraction})\\times2^{(\\text{Exponent})}$$\n\në‹¨, ëª¨ë‘ 0ì´ë©´ 0ìœ¼ë¡œ ì¹œë‹¤. floating point ì—°ì‚°ì€ í›„ì— ë” ì‹œê°„ì´ ìˆìœ¼ë©´ ìì„¸íˆ ë‹¤ë£¨ê² ë‹¤.\n\n## Reference\n\n- David A. Patterson, John L. Hennessy, Computer Organization and Design\n- Full Adder ì´ë¯¸ì§€ëŠ” WIKIPEDIA full adderì˜ ë°œì·Œì´ë‹¤. (<https://upload.wikimedia.org/wikipedia/commons/5/57/Fulladder.gif>)\n","slug":"architecture-arithmetic","date":"2022-04-27 20:50","title":"3. Arithmetic","category":"Computer Architecture","tags":["Computer Organization And Design","Arithmetic"],"desc":"ì»´í“¨í„° êµ¬ì¡°ì—ì„œ ê¸°ë³¸ì´ ë˜ëŠ” ì‚¬ì¹™ì—°ì‚°ê³¼ ì†Œìˆ˜ì˜ í‘œí˜„ë°©ì‹(Floating Point)ì„ ë‹¤ë£¬ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\ní•´ë‹¹ ë‚´ìš©ì€ ì´ì „ì— ë‹¤ë£¨ì—ˆë˜, [ë…¼ë¦¬íšŒë¡œ ë¦¬ë·° ë‚´ìš©](/posts/digital-logic-circuit)ì„ ë³´ê³  ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•©ë‹ˆë‹¤.\n\n## Intro\n\nìš°ë¦¬ì˜ ì»´í“¨í„° ì‹œìŠ¤í…œì€ ê²°êµ­ Finite State Machine(ìœ í•œìƒíƒœì¥ì¹˜)ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì¦‰, ìˆœì„œì— ë”°ë¼ ìœ í•œí•œ ìƒíƒœì—ì„œ ë‹¤ìŒ ìƒíƒœë¡œ ë„˜ì–´ê°€ë©´ì„œ, Outputì„ ê³„ì†í•´ì„œ ë‚´ë³´ë‚´ëŠ” ì¥ì¹˜ë¼ëŠ” ê²ƒì´ë‹¤. ì´ë•Œ í•˜ë‚˜ì˜ ì‘ì—…ì€ í•˜ë‚˜ì˜ Clock ë‹¨ìœ„ë¡œ ìˆ˜í–‰ë˜ë©°, ì—°ì†ì ì€ ì‘ì—… ì²˜ë¦¬ë¥¼ í†µí•´ì„œ ì»´í“¨í„°ëŠ” ì‚¬ìš©ìê°€ ìš”êµ¬í•œ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.\n\n## Processor\n\nprocessorì™€ programì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ì„ í™œìš©í•˜ì˜€ë‹¤.\n\n$$\\text{instruction count} \\times \\text{Clock Cycle Time} \\times \\text{Clock Cycles per Instruction}$$\n\n[2. post](/posts/architecture-instruction)ì—ì„œëŠ” Instruction Countë¥¼ ê´€ë¦¬í•˜ê³ , ì–´ë–»ê²Œ ê³„ì‚°ë˜ëŠ”ì§€ë¥¼ ë³´ì•˜ë‹¤ë©´, **í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” Clock Cycle Timeê³¼ Clock Cycle per Instructionì´ ì–´ë–»ê²Œ êµ¬ì„±ë˜ëŠ”ì§€ë¥¼ ì•Œì•„ë³´ë©°, ì´ë“¤ì„ ì–´ë–»ê²Œ ì¤„ì¼ ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.**\n\nì´ë¥¼ ìœ„í•´ì„œ ìš°ë¦¬ëŠ”\n\n1. MIPS CPUì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ êµ¬í˜„\n2. pipelineëœ MIPS\n3. Instruction ë‹¨ê³„ì—ì„œì˜ ë³‘ë ¬í™”\n\në¥¼ ì‚´í´ë³¼ ê²ƒì´ë‹¤.\n\n```plaintext\n ğŸ¤” ì£¼ì˜\n\n í•´ë‹¹ ë‹¨ê³„ì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‚¬í•­ì€ ë°°ì œí•œë‹¤.\n 1. multiply, shift, divide ì—°ì‚°\n 2. floating point ì—°ì‚°\n\n ê²°ë¡ ì ìœ¼ë¡œ, ì•ìœ¼ë¡œ êµ¬í˜„í•  MIPSì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì—°ì‚°ì„ í•  ìˆ˜ ìˆë‹¤.\n 1. Memoryì— ì ‘ê·¼í•˜ëŠ” Load Word, Store Word\n 2. ê¸°ë³¸ ì—°ì‚°ì ADD, SUB, AND, OR, ë“±\n 3. Branch êµ¬ë¬¸ (BEQ, JUMP)\n```\n\n## 1. ê¸°ë³¸ì ì¸ MIPS êµ¬í˜„(Single Cycle CPU)\n\nê¸°ë³¸ì ì¸ processorì—ì„œ programì´ ë™ì‘ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. PC(Program Counter)ë¥¼ Memoryì— ë³´ë‚´ì„œ codeë¥¼ í¬í•¨í•œ ë¶€ë¶„ì„ íŠ¹ì •í•˜ì—¬ Instructionì„ ë¶ˆëŸ¬ì˜¨ë‹¤.(Instruction Fetch)\n2. í•˜ë‚˜ ë˜ëŠ” ë‘ ê°œì˜ registerë¥¼ ì½ì–´ì„œ Instructionì„ ìˆ˜í–‰í•œë‹¤.\n\në”°ë¼ì„œ, ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ë…¼ë¦¬ êµ¬ì¡°ë¥¼ ê°„ëµíˆ ê·¸ë ¤ë³´ë©´, ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¥¼ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤.\n\n![Basic MIPS](/images/basic-mips.png)\n\në¨¼ì €, PCê°’ì˜ í˜•ì„± ë¶€ë¶„ë¶€í„° ë³´ë©´ ê¸°ë³¸ì ìœ¼ë¡œ PCëŠ” í˜„ì¬ê°’ì— 4ë¥¼ ë”í•˜ëŠ” ì—°ì‚°ì´ê¸° ë•Œë¬¸ì— ìƒë‹¨ì—ì„œ ë”í•œ ê°’ì´ ë°”ë¡œ ë‹¤ìŒ Clockì— ì ìš©ëœë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ°ë°, ë§Œì•½ Jumpë‚˜ Branch ì—°ì‚°ì´ ë“¤ì–´ì˜¨ë‹¤ë©´, í•´ë‹¹ PCê°’ì— íŠ¹ì •ê°’ì„ ë”í•œ ê²°ê³¼ë¡œ ì´ë™í•˜ê²Œ ë  ìˆ˜ ë„ ìˆë‹¤.\n\nê·¸ë¦¬ê³ , ë‚˜ë¨¸ì§€ ë¶€ë¶„ì€ PCë¥¼ í†µí•´ì„œ ì²«ë²ˆì§¸ ë°•ìŠ¤ì—ì„œ Instructionì„ ê³¨ë¼ë‚´ê³ , Instructionì˜ íŠ¹ì • ë¶€ë¶„ì—ì„œ OPì™€ register ë“±ì— ëŒ€í•œ ì •ë³´ë¥¼ í† ëŒ€ë¡œ Registerì™€ ìƒìˆ˜ ë“±ì„ ì´ìš©í•˜ì—¬ ALU ì¥ì¹˜ì—ì„œ OP ì •ë³´ì— ë”°ë¼ ì—°ì‚°ì„ ìˆ˜í–‰í•œ ë’¤ì— ê²°ê³¼ê°’ì„ íŠ¹ì • Registerì— ëŒë ¤ì£¼ê±°ë‚˜ Memoryì— ì €ì¥í•˜ë„ë¡ í•œë‹¤.\n\në¬¼ë¡  ìœ„ì—ì„œëŠ” **mux**(Multiplexor)ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ì— ëŒ€í•œ ë‚´ìš©ì€ ë¹ ì ¸ìˆì§€ë§Œ, ì•„ë˜ ê·¸ë¦¼ì„ ë³´ë©´ ë” ì •í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì—¬ëŸ¬ê°€ì§€ ê²½ìš°ì˜ ìˆ˜ ì¤‘ ìƒí™©ì˜ ë”°ë¼ì„œ outputì´ ë‹¤ë¥¸ ê²½ìš°ì— muxë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°, ì—¬ê¸°ì„œëŠ” Instructionì˜ íŠ¹ì •ë¶€ë¶„ì„ í†µí•´ì„œ Control bitsë¥¼ ì–»ì–´ë‚´ê³ , muxë¥¼ ì„¤ì¹˜í•˜ì—¬ ì ì ˆí•˜ê²Œ í–‰ë™í•˜ë„ë¡ ì œì–´í•˜ê³  ìˆë‹¤.\n\nëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ ì•„ê¹Œ PCê°’ì„ ì„ íƒí•˜ëŠ” ë¶€ë¶„ì´ ë³´ë‹¤ ëª…í™•í•˜ê²Œ í‘œì‹œë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. í˜„ì¬ ê³„ì‚°ëœ PC+4ë¥¼ ì‚¬ìš©í•  ê²ƒì¸ì§€ ì•„ë‹ˆë©´, Branch ëª…ë ¹ì–´ì—ì„œ ê³„ì‚°ëœ ê°’ì„ ì‚¬ìš©í•  ê²ƒì¸ì§€ë¥¼ Control bitê°€ ê²°ì •í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n![Basic MIPS 2](/images/basic-mips2.png)\n\nì´ì œë¶€í„°ëŠ” ê° ë‹¨ê³„ë³„ë¡œ ëœ¯ì–´ì„œ ì‚´í´ë³¸ë‹¤.\n\n### 1) IF ë‹¨ê³„ - Instruction Fetch\n\ní•´ë‹¹ ë‹¨ê³„ì—ì„œëŠ” PCì— ì €ì¥ëœ ê°’ì— ë”°ë¼ì„œ, Memoryì—ì„œ Instructionì„ ì¶”ì¶œí•˜ë©´ì„œ PCì— 4ê°€ ë”í•´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³ , Instructionì˜ íŠ¹ì • ë¶€ë¶„ê³¼ ì—°ì‚°ì´ ìˆ˜í–‰ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆëŠ”ë° ì´ëŠ” Branch êµ¬ë¬¸ì— ì˜í•œ ì´ë™ì„ ìœ„í•´ì„œ ì£¼ì†Œë¥¼ ì €ì¥í•´ë†“ëŠ” ê²ƒì´ë‹¤.\n\nê·¸ë¦¬ê³ , ì´ë¥¼ muxì™€ signal bitë¥¼ í†µí•´ì„œ, ìµœì¢…ì ìœ¼ë¡œ ë‹¤ìŒ Programì˜ lineì„ ê°€ë¥´í‚¬ ìˆ˜ ìˆë‹¤.\n\n![MIPS IF](/images/mips-if.png)\n\n### 2) ID ë‹¨ê³„ - Instruction Decode and Register File Read\n\ní•´ë‹¹ ë‹¨ê³„ì—ì„œëŠ” í¬ê²Œ ë‘ê°€ì§€ì˜ ì¼ì„ í•œë‹¤.\n\nì²« ë²ˆì§¸ëŠ”, Instructionì— í¬í•¨ëœ ì •ë³´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ Registerë¥¼ ì„ íƒí•˜ê³ , í•´ë‹¹ Registerì— í•´ë‹¹í•˜ëŠ” ì •ë³´ë¥¼ ë‚´ë³´ë‚´ëŠ” ê²ƒì´ë©°,\n\n![MIPS ID](/images/mips-id1.png)\n\në‘ ë²ˆì§¸ëŠ”, Control bitsë¥¼ ìƒì„±í•˜ëŠ” ì—­í• ì´ë‹¤.\n\n![MIPS ID](/images/mips-id2.png)\n\n### 3) EX ë‹¨ê³„ - Execution or Address Calculating\n\në‹¤ìŒ ë‹¨ê³„ì—ì„œëŠ” `R-Type`, `I-Type`ì— ë”°ë¼ì„œ ë‘ë²ˆì§¸(2nd) Registerë¥¼ ì‚¬ìš©í• ì§€ ì•„ë‹ˆë©´, ìƒìˆ˜ë¡œ ë°›ì•„ë“¤ì¼ì§€ë¥¼ ì„ íƒí•´ì•¼ í•œë‹¤. ì´ëŠ” ì´ì „ ë‹¨ê³„(ID)ì—ì„œ ìƒì„±í–ˆë˜ Control bitë¥¼ muxì— í†µê³¼ì‹œí‚¤ëŠ” ì‹ìœ¼ë¡œ êµ¬í˜„í•œë‹¤.\n\nì´í›„ì—ëŠ” control bitë“¤ì„ í†µí•´ì„œ ì—°ì‚°ì˜ ì¢…ë¥˜ë¥¼ ì„ íƒí•œ í›„ì—, ALU ë‚´ë¶€ì—ì„œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì—¬ ê²°ê³¼ê°’ì„ ë‚´ë³´ë‚¸ë‹¤.\n\nê²°ê³¼ê°’ì€ ì¼ë°˜ì ì¸ ê²°ê³¼ë¥¼ ë‚´ë³´ë‚´ë©°, ì¶”ê°€ì ìœ¼ë¡œ beq ë˜ëŠ” ì—¬íƒ€ ì—°ì‚°ì˜ ê²°ê³¼ë¥¼ ì‰½ê²Œ ì•Œë¦¬ê¸° ìœ„í•´ì„œ zeroë¼ëŠ” outputìœ¼ë¡œ ê²°ê³¼ê°’ì´ 0ì¸ì§€ë¥¼ ì•Œë ¤ì¤€ë‹¤. ì´ëŠ” ë‹¤ë¥¸ beqì™€ ê°™ì€ ì—°ì‚°ì—ì„œ control bitë¡œ ì‚¬ìš©í•œë‹¤.\n\n![MIPS EX](/images/mips-ex.png)\n\n### 4) MEM ë‹¨ê³„ - Data Memory Access\n\nData Memoryì— ì ‘ê·¼í•˜ëŠ” ë™ì‘ìœ¼ë¡œ ë§Œì•½ Memoryì— ë°ì´í„°ë¥¼ updateí•˜ëŠ” ë™ì‘ì„ í•œë‹¤ë©´, MemWriteê°€ 1ë¡œ ì„¤ì •ë˜ì–´ìˆê³ , ì´ë¥¼ ë³´ê³  ëª…ë ¹ì–´ë¥¼ ì²˜ë¦¬í•˜ê²Œ ëœë‹¤.(readë„ ë™ì¼í•˜ê²Œ MemReadë¥¼ í™œìš©í•œë‹¤.) ë¬¼ë¦¬ì ìœ¼ë¡œ CPUì™€ ë–¨ì–´ì ¸ìˆëŠ” ì¥ë¹„ì´ê¸° ë•Œë¬¸ì— ì ‘ê·¼í•˜ëŠ”ë° ë§ì€ ì‹œê°„ì´ ì†Œìš”ëœë‹¤. ë”°ë¼ì„œ, MIPSì˜ Instruction ì‹¤í–‰ì˜ ëª¨ë“  ë‹¨ê³„ë“¤ ì¤‘ì—ì„œ ê°€ì¥ ì˜¤ëœ ì‹œê°„ì´ í•„ìš”í•œ ì—°ì‚°ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n\n![MIPS MEM](/images/mips-mem.png)\n\n### 5) WB ë‹¨ê³„ - Write Back\n\nì‹¤ì œë¡œ Registerì˜ ê°’ì„ updateí•´ì£¼ëŠ” ë¶€ë¶„ìœ¼ë¡œ registerì˜ updateëŠ” Data Memoryì—ì„œ ê°’ì„ ë¶ˆëŸ¬ì˜¤ê±°ë‚˜ ì—°ì‚° ê²°ê³¼ë¥¼ ë°›ì„ ë•Œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë‘˜ ì¤‘ì— ì–´ë–¤ ê²½ìš°ì¸ì§€ë¥¼ í™•ì¸í•˜ì—¬ ë°ì´í„°ë¥¼ updateí•œë‹¤.\n\n![MIPS WB](/images/mips-wb.png)\n\nìœ„ì™€ ê°™ì´ í•˜ë‚˜ì˜ Instructionì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ì¼ë ¨ì˜ ì‘ì—…ì´ í•œ Clockì„ ë‹¨ìœ„ë¡œ ì‹¤í–‰ë˜ëŠ” ê²½ìš°ë¥¼ Single Cycle CPUë¼ê³  í•œë‹¤.\n\n### 2. Pipelining\n\nê°€ì¥ ê¸°ë³¸ì ì¸ êµ¬ì¡°ë¥¼ ì‚´í´ë³´ì•˜ìœ¼ë‹ˆ ìœ„ì˜ í˜•íƒœë¥¼ ìµœì í™”í•˜ê¸° ìœ„í•œ ê°€ì¥ íš¨ê³¼ì ì´ì˜€ê³ , ëª¨ë“  CPUì—ì„œ ì‚¬ìš©ë˜ê³  ìˆëŠ” ì„¤ê³„ ë°©ë²•ì„ ì„¤ëª…í•  ê²ƒì´ë‹¤. ìœ„ì˜ ê³¼ì •ì„ ë³´ê³  ìˆìœ¼ë©´ ìš°ë¦¬ëŠ” ë¹„íš¨ìœ¨ì„ í•˜ë‚˜ ë°œê²¬í•˜ê²Œ ëœë‹¤. **ë°”ë¡œ íŠ¹ì • ë‹¨ê³„ê°€ ì‹¤í–‰ ì¤‘ì¸ ë™ì•ˆì— í•´ë‹¹ ë‹¨ê³„ì— í¬í•¨ë˜ì§€ ì•Šì€ ì¥ë¹„ë“¤ì€ ë†€ë ¤ì§€ê³  ìˆë‹¤ëŠ” ì ì´ë‹¤.** ì¦‰, ìœ„ì—ì„œ processorì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ëŠ” ì§€í‘œì¸ Clock Cycle Timeì´ ì¦ê°€í•œë‹¤. ë”°ë¼ì„œ, ëª¨ë“  ì¥ë¹„ë¥¼ ê³„ì†í•´ì„œ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ì„œ, í•œ ë‹¨ê³„ê°€ í•œ Clockì´ ë˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì´ ê³ ì•ˆë˜ì—ˆë‹¤.(Multi Cycle CPU)\n\ní•˜ë‚˜ì˜ ì˜ˆë¥¼ ì‚´í´ë³´ì.\n\nì„¸ì°¨ì¥ì— ê°”ë‹¤ê³  í•˜ì. ìš°ë¦¬ëŠ” ë‹¹ì—°íˆ ì¼ì—´ë¡œ ì„œì„œ ìì‹ ì˜ ì°¨ë¡€ê°€ ë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤. í•˜ë‚˜ì˜ ì¥ë¹„ê°€ ì„¸ì°¨ì— ë“¤ì–´ê°€ê¸° ì „ì— ì‚¬ëŒì— ì˜í•´ì„œ ë¨¼ì € ë¹„ëˆ„ê±°í’ˆì„ ë‚´ëŠ” ë‹¨ê³„ê°€ ìˆë‹¤ë©´, ìš°ë¦¬ëŠ” ë‹¹ì—°íˆ ì¤„ì„ ì„œìˆëŠ” ë™ì•ˆ ì„¸ì°¨ì¥ ì•„ë¥´ë°”ì´íŠ¸ìƒì´ ë¹„ëˆ„ì¹ ì„ í•´ì£¼ê¸°ë¥¼ ê¸°ë‹¤ë¦´ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, í•´ë‹¹ ì„¸ì°¨ì¥ì—ì„œëŠ” ë§Œì•½ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì„¸ì°¨ ê¸°ê³„ê°€ ì´ì „ ì°¨ëŸ‰ì— ëŒ€í•œ ì‘ì—…ì„ ë§ˆì¹˜ê³  ì•ˆì •ì ìœ¼ë¡œ ì‘ì—…ì´ ëë‚œ í›„ì— ë¹„ëˆ„ì¹ ì„ í•´ì¤€ë‹¤ê³  í•˜ì. ì´ê²ƒì€ êµ‰ì¥í•œ ì§œì¦ì„ ìœ ë°œí•˜ëŠ” ìš”ì†Œê°€ ë  ê²ƒì´ë‹¤.\n\në”°ë¼ì„œ, Single Cycle CPUë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ í•˜ë“œì›¨ì–´ ì¥ë¹„ë¥¼ ìµœì í™”í•˜ì§€ ëª»í•œ ì‚¬ë¡€ë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n\nìœ„ì™€ ê°™ì´ ë‹¨ê²Œë¥¼ ë‚˜ëˆ„ì–´ ì—¬ëŸ¬ Cycleì— ë‚˜ëˆ„ì–´ í•˜ë‚˜ì˜ ëª…ë ¹ì–´ë¥¼ ì²˜ë¦¬í•˜ê²Œ ë˜ë©´, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ì–»ê²Œ ëœë‹¤.\n\n1. Clock Cycle Timeì´ ì¤„ì–´ë“ ë‹¤.\n2. í•˜ë‚˜ì˜ CPUê°€ ë™ì‹œì— ì—¬ëŸ¬ ê°œì˜ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê²Œ í•  ìˆ˜ë„ ìˆë‹¤.(**Instruction Overlapping**)\n\n![Pipeline Example](/images/pipeline-example.png)\n\nì´ë ‡ê²Œ Instructionì„ ë™ì‹œì—(ë³‘ë ¬ì ìœ¼ë¡œ) ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤ë©´, 1ê°œì˜ Cycle ë™ì•ˆ Hardware ì¥ì¹˜ì˜ ì‰ì—¬ ì‹œê°„ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆë‹¤.\n\ní•˜ì§€ë§Œ, tradeoff ì—­ì‹œ ì¡´ì¬í•œë‹¤.\n\n1. ê° ë‹¨ê³„ì˜ ì—°ì‚°ì´ ëë‚œ í›„ì— í•´ë‹¹ ê°’ì„ ë³´ê´€í•  ì¶”ê°€ì ì¸ í•˜ë“œì›¨ì–´ ì¥ë¹„(register)ê°€ í•„ìš”í•˜ë‹¤.\n2. Clockì´ ì˜¬ë¼ê°€ê³ , ë–¨ì–´ì§€ëŠ” ë™ì•ˆì˜ ë¯¸ì„¸í•œ ì‹œê°„ì˜ ì¶”ê°€ë¡œ ì‹œê°„ ë¹„ìš©ì´ ì¦ê°€í•œë‹¤.\n3. Clock Cycle Timeì€ ë°˜ë“œì‹œ í•˜ë‚˜ì˜ ìƒìˆ˜ë¡œ ì •í•´ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì— ê°€ì¥ ì‹¤í–‰ ì‹œê°„ì´ ê¸´ ë‹¨ê³„ì— ì˜ì¡´í•˜ê²Œ ëœë‹¤. ì¦‰, ì‹¤í–‰ì‹œê°„ì´ ë” ì§§ì€ ë‹¨ê³„ë¼ê³  í• ì§€ë¼ë„ ë‹¤ë¥¸ ê¸´ ë‹¨ê³„ê°€ ìˆë‹¤ë©´ ê¸°ë‹¤ë ¤ì•¼ í•œë‹¤.\n4. 2ì™€ 3ë²ˆì„ ì´ìœ ë¡œ ê²°ë¡ ìƒ í•˜ë‚˜ì˜ Instructionì„ ìˆ˜í–‰í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì€ ì¦ê°€í•  ìˆ˜ ë°–ì— ì—†ë‹¤.\n   ê·¸ë ‡ê¸°ì— ê²°ë¡ ìƒ ë‹¨ê³„ë¥¼ ìƒê°ì—†ì´ ë¬´ì¡°ê±´ ì˜ê²Œ ìë¥¸ë‹¤ê³  ì¢‹ì€ ê²ƒì´ ì•„ë‹ˆë‹¤. ë°”ë¡œ ê· ë“±í•˜ê²Œ ë§ì´ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ë§Œí¼ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì¢‹ì€ ê²ƒì´ë‹¤.\n5. Instructionì„ ë™ì‹œì— ì‹¤í–‰í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¸í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤(Hazard). ì´ëŠ” ë°”ë¡œ ë‹¤ìŒ ë¶€ë¶„ì—ì„œ ë‹¤ë£¬ë‹¤.\n\n### Hazard\n\nHarzardëŠ” ì•„ë˜ì™€ ê°™ì´ ì´ 3ê°€ì§€ì˜ ì¢…ë¥˜ê°€ ìˆë‹¤.\n\n> **1. Structural Hazard**\n\nHardwareê°€ êµ¬ì¡°ì ìœ¼ë¡œ ë™ì‹œì— íŠ¹ì • Instruction ì¡°í•©ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•  ê²½ìš°ë¥¼ ì˜ë¯¸í•œë‹¤. ì¦‰, ì„œë¡œ ë‹¤ë¥¸ pipeline stageì—ì„œ ë™ì¼í•œ resource(Hardware)ì— ì ‘ê·¼í•˜ê³ ì í•  ë•Œ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë§Œì•½ Instruction Memoryì™€ Data Memoryì˜ ë¶„ë¦¬ê°€ ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ì—ëŠ” ì´ëŸ¬í•œ ë¬¸ì œê°€ IF, MEM ë‹¨ê³„ì—ì„œ ë°œìƒí•  ìˆ˜ë„ ìˆì§€ë§Œ, MIPSì—ì„œëŠ” ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n> **2. Data Hazard**\n\në°”ë¡œ Instructionì´ ì„œë¡œ ì—°ê´€(ì˜ì¡´)ë˜ì–´ìˆì„ ë•Œì˜ ë¬¸ì œì´ë‹¤.\n\në‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì„ ê°€ì •í•´ë³´ì. ìš°ë¦¬ê°€ memoryì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™€ì„œ 3ì„ ë”í•˜ëŠ” ì—°ì‚°ì„ í•œë‹¤ê³  í•˜ì. ê·¸ë ‡ë‹¤ë©´ ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n```assembly\nlw $v 0\naddi $v 3\n```\n\nì´ë¥¼ ì‹¤í–‰í•˜ë©´ ë¶ˆí–‰í•˜ê²Œë„ loadê°€ ì±„ ëë‚˜ê¸°ë„ ì „ì— ì±„ì›Œì§€ì§€ ì•Šì€ \\$vì— 3ì´ ë”í•´ì§€ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ 3ê°€ì§€ì˜ ì„ íƒì§€ê°€ ìˆë‹¤.\n\n1. ì˜ì¡´ì„±ì´ ìˆëŠ” ëª…ë ¹ì–´ê°€ ì‹¤í–‰ ì¤‘ì¸ ê²½ìš° ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸° (**Stall**)\n   ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì´ì§€ë§Œ, pipeliningì„ í†µí•œ ì„±ëŠ¥ í–¥ìƒì„ ê°ì†Œì‹œí‚¬ ìˆ˜ ìˆë‹¤.\n2. Compiler ë‹¨ì—ì„œ ì˜ì¡´ì´ ë°œìƒí•˜ëŠ” Instruction ì‚¬ì´ì— ìˆœì„œê°€ ìƒê´€ì—†ëŠ” Instructionì„ ë¼ì›Œë„£ì–´ì„œ resourceê°€ ë‚­ë¹„ë˜ì§€ ì•Šìœ¼ë©´ì„œ hazardê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•œë‹¤. (**Reordering**)\n   Hazardë¥¼ í•´ê²°í•˜ëŠ” ì¢‹ì€ ë°©ë²•ì´ì§€ë§Œ, í•­ìƒ ì´ê²ƒì´ ê°€ëŠ¥í•  ìˆ˜ëŠ” ì—†ë‹¤.\n3. ì¶”ê°€ì ì¸ Hardwareë¥¼ ì‚¬ìš©í•˜ì—¬ ê²°ê³¼ê°’ì„ í•„ìš”ë¡œ í•˜ëŠ” resourceì—ê²ŒëŠ” ë‹¨ê³„ë¥¼ ìƒëµí•˜ê³  ë„˜ê¸´ë‹¤. (**Forwarding**, **Bypassing**)\n   í˜„ì¬ê¹Œì§€ëŠ” ê°€ì¥ ê´œì°®ë‹¤ê³  ë°›ì•„ë“¤ì—¬ì§€ëŠ” ë°©ë²•ì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ, EX ë‹¨ê³„ì—ì„œ ALU ì—°ì‚°ì´ ëë‚˜ìë§ˆì Write Backì„ ìì²´ì ìœ¼ë¡œ ìˆ˜í–‰í•´ì£¼ë©´ ì´ 3ë²ˆì˜ stallì„ 1ë²ˆìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\n> **3. Control Hazard**\n\nBranch Hazardë¼ê³ ë„ ë¶ˆë¦¬ë©°, ì´ì „ Instructionì˜ ê²°ê³¼ì— ë”°ë¼ì„œ ì‹¤í–‰ì‹œí‚¬ Instructionì´ ë³€í™”í•  ë•Œ, ì–´ëŠ Instructionì„ ì‹¤í–‰ì‹œí‚¬ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” Hazardì´ë‹¤. (JUMP, BEQ)\n\nì´ ê²½ìš°ì—ë„ ì´ 3ê°€ì§€ì˜ ì„ íƒì§€ë¥¼ ê°€ì§„ë‹¤.\n\n1. ì„±ê³µì ìœ¼ë¡œ ë¶„ê¸°ë¬¸ì´ ì‹¤í–‰ë  ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.(**Stall**)\n2. ì–´ëŠ ê³³ìœ¼ë¡œ Branchê°€ ë ì§€ë¥¼ ì˜ˆìƒí•˜ì—¬, ë¯¸ë¦¬ ì‹œí–‰í•´ë‘”ë‹¤. (**Branch Prediction**)\n   Resourceë¥¼ ìµœì í™”í•œë‹¤. ë³„ë„ì˜ hardwareë¥¼ ì„¤ì¹˜í•˜ì—¬ ë¯¸ë¦¬ JUMP ë° Branch addressë¥¼ ê³„ì‚°í•´ ë†“ëŠ”ë‹¤(**Hardware Optimization**)ëŠ” ê°€ì •ì´ í•„ìš”í•˜ë‹¤. ë˜í•œ, ì˜ˆì¸¡ì´ ì–¼ë§ˆë‚˜ ì ì¤‘í•˜ëŠ”ê°€ ì—­ì‹œ êµ‰ì¥íˆ ì¤‘ìš”í•œ ìš”ì†Œë¡œ ì‘ìš©í•œë‹¤.\n   ëŒ€ê²Œ ì´ëŸ¬í•œ ì˜ˆì¸¡ì€ ë‘ ê°€ì§€ì˜ ì¢…ë¥˜ê°€ ìˆë‹¤.\n   1. ì •ì  ì˜ˆì¸¡\n      ì‰½ê²Œ ìƒê°í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë°˜ë“œì‹œ ì‹¤íŒ¨í•œë‹¤ê³  ìƒê°í•˜ê±°ë‚˜ ì„±ê³µí•œë‹¤ê³  ìƒê°í•´ì„œ ì§„í–‰í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¢€ ë” ë³µì¡í•œ ë°©ì‹ì€ loopë¬¸ì— ì˜í•œ branchì¸ ê²½ìš° branchê°€ ìˆ˜í–‰ë  í™•ë¥ ì´ ë†’ë‹¤ëŠ” ê²ƒì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ ì„±ê³µ ê°€ëŠ¥ì„±ì´ í¬ë‹¤ê³  ì˜ˆì¸¡í•  ìˆ˜ ìˆë‹¤.\n   2. ë™ì  ì˜ˆì¸¡\n      ì´ì „ ì˜ˆì¸¡ë“¤ì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ í˜„ì¬ ì˜ˆì¸¡ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ë©´, ì—¬ëŸ¬ ë²ˆ ë°˜ë³µë˜ëŠ” í–‰ìœ„ì— ëŒ€í•œ ì˜ˆì¸¡ìœ¨ì´ ìƒë‹¹íˆ ë†’ì•„ì§„ë‹¤. ëŒ€ê²Œ, ìš°ë¦¬ê°€ í•˜ëŠ” ë¶„ê¸°ë¬¸ì´ loop ë“±ì— ì˜í•œ ê²½ìš°ê°€ ë§ìœ¼ë¯€ë¡œ ì¢‹ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, ìµœê·¼ì—ëŠ” machine learningì„ í™œìš©í•˜ì—¬ ì˜ˆì¸¡ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ ë˜í•œ ë‚˜ì˜¤ê³  ìˆë‹¤.\n3. Branch ì—¬ë¶€ì— ìƒê´€ì—†ëŠ” ìš”ì²­ì„ Control Hazardì— ì˜í•´ì„œ ë°œìƒí•˜ëŠ” êµ¬ê°„ì— ë„£ëŠ”ë‹¤. (**Delayed Decision**)\n\n## Parallelism via Instruction\n\nPipeliningì„ í†µí•´ì„œ, Instructionì„ ë™ì‹œì— ì—¬ëŸ¬ ê°œ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” í™˜ê²½ì´ êµ¬ì¶•ë˜ì—ˆë‹¤. ê·¸ ì™€ì¤‘ì— resourece ìì²´ë¥¼ í•˜ë‚˜ ì´ìƒ ë‘ì–´ì„œ Instructionì„ ë™ì‹œì— ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ì‹ì´ ê³ ì•ˆë˜ì—ˆëŠ”ë°, ì´ë¥¼ Multiple Issue processorë¼ê³  í•œë‹¤.\n\nì´ë¥¼ ëŒ€í‘œí•˜ëŠ” ë°©ì‹ì€ í¬ê²Œ ë‘ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.\n\n### 1. Static Multiple Issue\n\nì´ëŠ” compilerê°€ programì„ ê¸°ê³„ì–´ë¡œ ë²ˆì—­í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ë£¨ì–´ì§€ë©°, ëŒ€í‘œì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆë‹¤.\n\n1. VLIW(Very Long Instruction Word)\n   ì˜ì¡´ì„±ì´ ì—†ëŠ” ì—¬ëŸ¬ Instructionì„ í•˜ë‚˜ì˜ Instructionìœ¼ë¡œ ë­‰ì³ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ë²•ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ ì¤‘ì²©ë˜ëŠ” OPCODE ë° ê¸°íƒ€ ì²˜ë¦¬ ë“±ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆë‹¤. Processorê°€ í•´ë‹¹ ê¸°ëŠ¥ì„ ì§€ì›í•˜ëŠ” ê²½ìš°ì—ë§Œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.\n2. Loop Unrolling\n   loopë¥¼ í’€ì–´ì„œ ì—¬ëŸ¬ ê°œì˜ Instructionìœ¼ë¡œ ë§Œë“¤ì–´ì„œ branchë¡œ ì¸í•œ ë¹„ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\n### 2. Dynamic Multiple Issue\n\nprocessorì—ì„œ ì§ì ‘ Instructionì´ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì´ë£¨ì–´ì§„ë‹¤. ì´ëŠ” ì—¬ëŸ¬ ê°œì˜ pipelineì„ CPUì— ë‘ì–´ ì´ë¥¼ SuperScalar ë°©ì‹ì´ë¼ê³ ë„ í•œë‹¤. ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ì• ì„œ ë³´ì•˜ë˜ Compiler ë‹¨ì—ì„œì˜ ì¡°ìœ¨ë„ í•„ìš”í•˜ë©°, ì‹¤í–‰ ì¤‘ì— Instructionì„ ì–´ë–»ê²Œ ë‚˜ëˆŒ ê²ƒì¸ê°€ì— ëŒ€í•œ Dynamic Scheduling ì—­ì‹œ ë§¤ìš° ì¤‘ìš”í•˜ë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ OoO(Out of Order) Executionì„ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹¤. Instructionì˜ Fetchë¥¼ ìˆœì„œëŒ€ë¡œê°€ ì•„ë‹Œ ì˜ì¡´ì„±ì— ì•Œë§ê²Œ ì‹¤í–‰ë˜ë„ë¡ ì¡°ì ˆí•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n## Reference\n\n- David A. Patterson, John L. Hennessy, Computer Organization and Design\n","slug":"architecture-processor","date":"2022-04-28 19:25","title":"4. Processing","category":"Computer Architecture","tags":["Computer Organization And Design","Processing","MIPS Implementation","Pipeline","Branch Prediction","SuperScalar"],"desc":"ìš°ë¦¬ì˜ ì»´í“¨í„° ì‹œìŠ¤í…œì€ ê²°êµ­ Finite State Machine(ìœ í•œìƒíƒœì¥ì¹˜)ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì¦‰, ìˆœì„œì— ë”°ë¼ ìœ í•œí•œ ìƒíƒœì—ì„œ ë‹¤ìŒ ìƒíƒœë¡œ ë„˜ì–´ê°€ë©´ì„œ, Outputì„ ê³„ì†í•´ì„œ ë‚´ë³´ë‚´ëŠ” ì¥ì¹˜ë¼ëŠ” ê²ƒì´ë‹¤. ì´ë•Œ í•˜ë‚˜ì˜ ì‘ì—…ì€ í•˜ë‚˜ì˜ Clock ë‹¨ìœ„ë¡œ ìˆ˜í–‰ë˜ë©°, ì—°ì†ì ì€ ì‘ì—… ì²˜ë¦¬ë¥¼ í†µí•´ì„œ ì»´í“¨í„°ëŠ” ì‚¬ìš©ìê°€ ìš”êµ¬í•œ ëª…ë ¹ì„ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤.","thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Intro\n\nì»´í“¨í„°ë¥¼ ì‚¬ìš©í•  ë•Œ, ìš°ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Memoryê°€ ë¬´í•œí•œ í¬ê¸°ë¥¼ ê°€ì§€ê³  ìˆê¸°ë¥¼ ë°”ë€ë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë¹„ìš©ì ìœ¼ë¡œë„, ê¸°ìˆ ì ìœ¼ë¡œë„ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë§ˆì¹˜ ì¡´ì¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ ëŠë¼ë„ë¡ í•˜ëŠ” Virtual Memoryë¼ëŠ” ê¸°ìˆ ì„ ì‚¬ìš©í•œë‹¤.\n\n## Locality\n\nVirtual Memoryë¥¼ ìœ„í•œ í•µì‹¬ì€ `Locality`ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. ë™ì‘ì—ëŠ” ì¸ê³¼ê°€ ì¡´ì¬í•˜ê³ , ê·¸ë ‡ê¸°ì— ì§ì „ì— ìì‹ ì´ í–ˆë˜ í–‰ë™ ê·¸ë¦¬ê³  ê·¼ì²˜ì˜ ëŒ€ìƒë“¤ì´ í–ˆë˜ í–‰ë™ì´ ì§€ê¸ˆì˜ ìì‹ ì´ í•  í–‰ë™ì— ì˜í–¥ì„ ì£¼ëŠ” ê²ƒì€ ì–´ì°Œë³´ë©´ ë‹¹ì—°í•œ ì‚¬ì‹¤ì´ë‹¤. ì´ëŸ¬í•œ íŠ¹ì§•ì´ `Locality`ì´ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ ìš°ë¦¬ëŠ” Memoryë¥¼ ë§ˆì¹˜ ë¬´í•œì¸ ê²ƒì²˜ëŸ¼ ëŠë‚„ ìˆ˜ ìˆê²Œ í•  ìˆ˜ ìˆë‹¤.\n\n1. **Temporal Locality**\n   í•˜ë‚˜ì˜ Instruction ë˜ëŠ” dataê°€ ì‚¬ìš©ë˜ì—ˆë‹¤ë©´, í•´ë‹¹ ë‚´ìš©ì€ ê³§ ë‹¤ì‹œ ì‚¬ìš©ë  í™•ë¥ ì´ ë§¤ìš° ë†’ë‹¤.(ë°˜ë³µë¬¸ì¼ ê²½ìš°ì—ëŠ” ê·¹ëª…í•˜ê²Œ ë“œëŸ¬ë‚  ê²ƒì´ë‹¤.)\n2. **Spatial Locality**\n   í•˜ë‚˜ì˜ Instruction ë˜ëŠ” dataê°€ ì‚¬ìš©ë˜ì—ˆë‹¤ë©´, í›„ì— ì´ ê·¼ì²˜ì— ìˆëŠ” ë‚´ìš©ì„ ì‚¬ìš©í•  í™•ë¥ ì´ ë§¤ìš° ë†’ë‹¤. (ì¼ë°˜ì ìœ¼ë¡œ ì—°ì†ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” ê²½ìš°ê°€ ë§ê¸° ë•Œë¬¸ì— ê·¼ì²˜ì˜ ëª…ë ¹ì–´ë“¤ì„ ê°™ì´ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤ë©´, ê°€ì ¸ì˜¤ëŠ” ê²ƒì€ í•©ë¦¬ì ì´ë‹¤.)\n\nì´ë¥¼ í™œìš©í•˜ê¸° ìœ„í•´ì„œ, ìš°ë¦¬ëŠ” **Memory Hierarcy**ë¼ëŠ” ë°©ë²•ì„ ì‚¬ìš©í•œë‹¤. ì¦‰, ë©”ëª¨ë¦¬ë¥¼ ê³„ì¸µí™”í•˜ëŠ” ê²ƒì´ë‹¤. ëª¨ë“  ì¥ì¹˜ë¥¼ ë¹ ë¥´ê³ , í¬ê³ , ì‹¸ê²Œ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ë¶ˆê°€ëŠ¥í•˜ê¸°ì— ë¹ ë¥´ê³ , ì‘ì€ ì¥ì¹˜ë¥¼ processorì— ê°€ê¹Œì´ì— ë‘ê³ , ê·¸ ë³´ë‹¤ëŠ” ëœ ë¹ ë¥´ê³ , í° ì¥ì¹˜ë¥¼ ì¢€ ë” ê±°ë¦¬ë¥¼ ë‘ê³  ìœ„ì¹˜ì‹œí‚¤ëŠ” ë°©ì‹ì´ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì´ìš©ìì—ê²Œ ì‹¸ë©´ì„œ, ë¹ ë¥¸ ì‹œìŠ¤í…œì„ ì œê³µí•  ìˆ˜ ìˆë‹¤.\n\nì´ë¥¼ ìœ„í•´ì„œ, ìš°ë¦¬ëŠ” ë” ë©€ë¦¬ ìˆëŠ” Memoryì—ì„œ ì •ë³´ë¥¼ ë³µì‚¬í•´ì„œ ë” ìƒìœ„ì˜ Memoryì— ë¶™ì—¬ë„£ê¸°í•˜ëŠ” ê²ƒì´ë‹¤. ê³„ì¸µ êµ¬ì¡°ì´ê¸° ë•Œë¬¸ì— í•œ ë²ˆì— ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ë‹¨ê³„ê°€ ìˆë‹¤ë©´, ì°¨ê·¼ì°¨ê·¼ ìˆœì„œì— ë§ì¶°ì„œ ìˆ˜í–‰ëœë‹¤. ì¦‰, ë‹¨ê³„ë¥¼ skipí•˜ì—¬ ì´ë™í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n\në§Œì•½, ìƒìœ„ Memory ì¥ì¹˜ì—ì„œ ì›í•˜ëŠ” ì •ë³´(Block, Line)ë¥¼ ì°¾ì•˜ë‹¤ë©´ ì´ë¥¼ `hit`ë¼ê³  í•˜ê³ , ì°¾ì§€ ëª»í–ˆë‹¤ë©´ ì´ë¥¼ `miss`ë¼ê³  í•œë‹¤. ë˜í•œ, `hit time`ì€ ìƒìœ„ Memoryê°€ í•´ë‹¹ Blockì— ì ‘ê·¼í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤. ë°˜ëŒ€ë¡œ `miss penalty`ëŠ” ìƒìœ„ Memoryë¡œ í•´ë‹¹ Blockì„ ìœ„ì¹˜ì‹œí‚¤ëŠ” ì‹œê°„ê³¼ Blockì„ processorì— ì „ë‹¬í•˜ëŠ” ì‹œê°„ê¹Œì§€ë¥¼ í¬í•¨í•œë‹¤.\n\n---\n\nì‹œì‘í•˜ê¸°ì— ì• ì„œ, ì»´í“¨í„° ê³µí•™ì„ ê³µë¶€í•˜ëŠ” ëˆ„êµ¬ë‚˜ ê²ªëŠ” í˜„ìƒì´ë¼ê³  ìƒê°í•˜ëŠ”ë° ë°”ë¡œ Memory íŒŒíŠ¸ëŠ” ì–¸ì–´ê°€ ë§¤ìš° ìê¸° ë©‹ëŒ€ë¡œ ë‚˜ì˜¤ëŠ” ê²½í–¥ì´ ìˆë‹¤. ì¦‰, ê¹”ë”í•œ ì •ë¦¬ê°€ ë˜ì§€ëŠ” ì•Šì•˜ë‹¤. Memoryê°€ ì–´ë–¨ ë•ŒëŠ” Main Memoryë¥¼ ì˜ë¯¸í•˜ë‹¤ê°€ ì „ì²´ ëª¨ë“  ì €ì¥ ì¥ì¹˜ë¥¼ ì˜ë¯¸í•˜ê¸°ë„ í•œë‹¤. ë”°ë¼ì„œ, ì´ ì•„ë˜ë¶€í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì—„ê²©í•˜ê²Œ ë¶„ë¦¬í•˜ì—¬ ì„¤ëª…í•œë‹¤.\n\n1. Memory : ëª¨ë“  ì €ì¥ ì¥ì¹˜ë“¤ì„ ì˜ë¯¸í•œë‹¤. ì¦‰, cache, secondary storage, main memory ë“±ì„ ëª¨ë‘ í¬í•¨í•œ ê°œë…ì´ë‹¤.\n2. Cache : Processorì— ë¶™ì–´ì„œ ë°”ë¡œ ë™ì‘í•˜ëŠ” Memory ì¥ì¹˜\n3. Main Memory : ìš°ë¦¬ê°€ ì£¼ë¡œ RAMì´ë¼ê³  ë¶€ë¥´ëŠ” ì¥ì¹˜\n4. Secondary Storage : ì£¼ë¡œ HDD, SSDë¡œ ì´ë£¨ì–´ì§€ëŠ” ë³´ì¡° ê¸°ì–µ ì¥ì¹˜\n\n## Memory Components\n\nì‹œì‘í•˜ê¸°ì— ì•ì„œ ì‹¤ì œë¡œ ë©”ëª¨ë¦¬ë¥¼ ì´ë£¨ëŠ” êµ¬ì„±ìš”ì†Œë“¤ì„ ë¨¼ì € ì‚´í´ë³´ê³  ê°„ë‹¤.\n\n1. **DRAM**(**Dynamic Random Access Memory**)\n   Main Memoryì— ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¥ì¹˜ë¡œ SRAMë³´ë‹¤ëŠ” ëŠë¦¬ì§€ë§Œ, í™•ì‹¤íˆ ë§ì€ ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë‹¤. í•˜ë‚˜ì˜ bitë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ 1ê°œì˜ transistorë¥¼ ì‚¬ìš©í•˜ëŠ”ë°, ì´ transistorì—ì„œ ì „ë ¥ì´ ìƒˆì–´ ë‚˜ê°€ê¸° ë•Œë¬¸ì— ì •ë³´ë¥¼ ìƒëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œ ì£¼ê¸°ì ìœ¼ë¡œ refreshë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.\n   Random Accessë¼ëŠ” ì˜ë¯¸ëŠ” ìˆœì°¨ì ìœ¼ë¡œ ì•ì—ì„œë¶€í„° íƒìƒ‰í•˜ëŠ” ë°©ì‹ì´ ì•„ë‹ˆê³ , ì°¾ê³ ìí•˜ëŠ” ë°ì´í„°ë¥¼ ë°”ë¡œ ì°¾ì„ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. ë”°ë¼ì„œ, ì•ì—ì„œë¶€í„° ì°¾ëŠ” ë°©ì‹ë³´ë‹¤ ë” ë¹ ë¥¼ ìˆ˜ ë°–ì— ì—†ë‹¤.\n   íœ˜ë°œì„± ì €ì¥ ì¥ì¹˜ì´ê¸° ë•Œë¬¸ì— ì „ë ¥ì´ ê³µê¸‰ë˜ì§€ ì•Šìœ¼ë©´ ì •ë³´ë¥¼ ëª¨ë‘ ìƒëŠ”ë‹¤.\n2. **SRAM**(**Static Random Access Memory**)\n   Cacheì— ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì¥ì¹˜ë¡œ ë§¤ìš° ë¹ ë¥¸ ì—°ì‚°ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, í¬ê¸°ë¥¼ í¬ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë¹„ìš©ì´ ë„ˆë¬´ ë¹„ì‹¸ì§„ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. í•˜ë‚˜ì˜ bitë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œ 6ê°œì˜ transistorë¥¼ ì‚¬ìš©í•œë‹¤. ì´ ë•ë¶„ì— ì „ë ¥ì„ ë‹¤ì‹œ ê³µê¸‰í•´ì£¼ëŠ” refresh ê³¼ì •ì´ í•„ìš”ì—†ë‹¤.\n   ê³¼ê±°ì—ëŠ” processor ë°–ì—ì„œ chip í˜•íƒœë¡œ ì¡´ì¬í•˜ì˜€ì§€ë§Œ, ì ì  íšŒë¡œê°€ ì§‘ì ì´ ë˜ë©°, processorì— í†µí•©ë˜ì—ˆë‹¤.\n   íœ˜ë°œì„± ì €ì¥ ì¥ì¹˜ì´ê¸° ë•Œë¬¸ì— ì „ë ¥ì´ ê³µê¸‰ë˜ì§€ ì•Šìœ¼ë©´ ì •ë³´ë¥¼ ëª¨ë‘ ìƒëŠ”ë‹¤.\n3. **Flash Memory**\n   Electrically Erasable Programmable Read-Only Memory(EEPROM)ì˜ í•œ ì¢…ë¥˜ì´ë‹¤. ë‹¤ë¥¸ ì¥ì¹˜ë“¤ê³¼ëŠ” ë‹¬ë¦¬ writeê°€ flash memoryë¥¼ ë‹³ê²Œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ëŒ€ë¶€ë¶„ì˜ flash memoryëŠ” í•œ bitë¥¼ ì“°ê¸°ê°€ ì§‘ì¤‘ë˜ëŠ” í˜„ìƒì„ ë§‰ê¸° ìœ„í•´ì„œ, ì´ë¥¼ ë¶„ì‚°ì‹œí‚¤ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤. (wear leveling, ì“°ê¸° íšŸìˆ˜ì— ì œí•œì´ ì¡´ì¬í•œë‹¤.) ì´ëŠ” ëŒ€ê²Œ ëª¨ë°”ì¼ ì¥ì¹˜ë“¤ì˜ ì €ì¥ ì¥ì¹˜ë¡œ ë§ì´ ì‚¬ìš©ë˜ë©°, PCì—ì„œ ì‚¬ìš©í•˜ëŠ” SSDì™€ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤.\n4. **Magnetic Disk**\n   ì¼ëª… ìê¸° í…Œì´í”„ ë°©ì‹ìœ¼ë¡œ, ë‹¤ë¥¸ ì¥ì¹˜ë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ ìê¸°ë ¥ì„ ì´ìš©í•˜ì—¬ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì‹¤ì œë¡œ ë¬¼ë¦¬ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” Diskë¡œ í•˜ì—¬ Hard Diskë¼ê³ ë„ ë¶€ë¥¸ë‹¤.ì´ë¥¼ ì½ê³  ì“°ê¸° ìœ„í•´ì„œëŠ” arm(íŒ”)ì´ë¼ëŠ” ê°œì²´ê°€ diskì˜ ì •ë³´ê°€ ìŠ¤ì—¬ì§„ ìœ„ì¹˜ë¡œ ì´ë™í•´ì•¼ ì½ì„ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ê²ƒì´ ë¬¼ë¦¬ì ìœ¼ë¡œ ì›€ì§ì´ëŠ” ì‹œê°„ì´ ì†Œìš”ë˜ê¸° ë•Œë¬¸ì— ì—¬íƒ€ Random Access ì¥ë¹„ë³´ë‹¤ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ í†µí•´ì„œ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì •ë³´ì˜ ì–‘ì€ ë§¤ìš° ë§ë‹¤.\n\n## Cache\n\nMain Memoryì™€ Processor ì‚¬ì´ì—ì„œ memory hierarchyë¥¼ ìˆ˜í–‰í•˜ëŠ” ì¥ì¹˜ë¼ê³  í•œë‹¤. í•˜ì§€ë§Œ, í˜„ëŒ€ì—ëŠ” ì´ëŸ¬í•œ êµ¬ì¡°ì— ì˜ê°ì„ ë°›ì•„ì„œ cacheë¥¼ ì—¬ëŸ¬ ê³³ì—ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ë§ì€ ë¶„ì•¼ì—ì„œ ì´ë¥¼ **localityì˜ ì¥ì ì„ í™œìš©í•˜ê¸° ìœ„í•œ ì¼ì¢…ì˜ ì €ì¥ì†Œ**ë¼ëŠ” ì˜ë¯¸ë¡œ ë§ì´ ì‚¬ìš©í•œë‹¤.\n\n### Cacheì˜ ì—­í• \n\nCacheê°€ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì€ ì €ì¥ ì¥ì¹˜ì´ê¸° ë•Œë¬¸ì— ì½ê¸°ì™€ ì“°ê¸°ê°€ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.\n\n> **Read**\n\nì½ê¸°ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ Cacheì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\n\n1. **Main Memoryì˜ ë°ì´í„°ë¥¼ ì¼ë¶€ ì €ì¥í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**\n   CacheëŠ” Main Memoryë³´ë‹¤ í¬ê¸°ê°€ ì‘ê¸° ë•Œë¬¸ì— Main Memoryì˜ ëª¨ë“  ë°ì´í„°ë¥¼ ì €ì¥í•˜ì§€ ëª»í•œë‹¤. ë”°ë¼ì„œ, ì¼ë¶€ë¶„ì„ ì €ì¥í•˜ëŠ”ë° ì´ë¥¼ ì €ì¥í•  ë•Œ, ê¸°ì¡´ì˜ Main Memoryì—ì„œì˜ ë°ì´í„°ì˜ addressë¥¼ cacheì˜ í¬ê¸°ë§Œí¼ ë‚˜ëˆ„ì–´ cacheì˜ ë²”ìœ„ì— ë“¤ì–´ì˜¤ë„ë¡ í•˜ëŠ” ê²ƒì´ Directed Mappingì´ë‹¤. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì€ ì‹ì´ ì„±ë¦½í•œë‹¤.(ì—¬ê¸°ì„œì˜ Blockì´ë€ í•œ ë²ˆì— cacheë¡œ ê°€ì ¸ì˜¬ ë°ì´í„°ì˜ ë‹¨ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤.)\n   $\\text{Cacheì—ì„œ Blockì˜ ì£¼ì†Œ} =$ $\\text{(Main Memoryì—ì„œ Blockì˜ ì£¼ì†Œ)} \\%$ $\\text{(Cacheì˜ ìš©ëŸ‰)}$\n2. **íŠ¹ì • wordê°€ cacheì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**\n   ì´ë¥¼ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” tagë¥¼ ì´ìš©í•œë‹¤. cache ê³µê°„ìœ¼ë¡œ addressê°€ ë³€í™˜ë˜ì–´ì„œ ìƒëµëœ addressë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤. ì¦‰, cacheì˜ indexë¡œ ì“°ì´ì§€ ì•Šì€ Main Memory Addressì˜ ìƒìœ„ê°’ì„ ê°€ì§€ê³  ìˆë‹¤. ì‰½ê²Œ ìƒê°í•´ì„œ ìœ„ì—ì„œ ë§Œë“¤ì–´ì§„ Cacheì˜ Block ì£¼ì†Œê°€ ë‚˜ë¨¸ì§€ë¼ë©´, tagëŠ” ëª«ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, tagëŠ” ë‹´ê¸°ëŠ” ë°ì´í„°ì— ë”°ë¼ì„œ, ê³„ì†í•´ì„œ ë³€í•˜ì—¬ ì €ì¥ë˜ëŠ” ê°’ì´ë‹¤.\n3. **í•´ë‹¹ ë°ì´í„°ê°€ íƒ€ë‹¹í•œì§€ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.**\n   ë§Œì•½, systemì„ ë§‰ bootingì‹œì¼°ë‹¤ë©´, cacheì—ëŠ” ëª¨ë‘ ì´ìƒí•œ ê°’ì´ ë“¤ì–´ê°ˆ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ì˜ëª»ëœ ê°’ì„ ì°¸ì¡°í•  ìˆ˜ë„ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” **valid bit**(1 bit)ë¥¼ ì´ìš©í•˜ì—¬, í•´ë‹¹ ê°’ì´ ì ì ˆí•˜ê²Œ í• ë‹¹í•œ ê°’ì¸ì§€ë¥¼ í‘œê¸°í•œë‹¤.\n4. **ë®ì–´ ì”Œìš°ê¸°ê°€ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.**\n   ì´ ê²½ìš°ëŠ” ê°„ë‹¨íˆ ë®ì–´ ì”Œì–´ë²„ë¦°ë‹¤. ì´ëŠ” ì• ì„œ ì„¤ëª…í•œ **temporal locality**ì™€ ì¼ë§¥ìƒí†µí•œë‹¤. ìµœê·¼ì— ì“´ ë°ì´í„°ê°€ ë‹¤ì‹œ í˜¸ì¶œí•  í™•ë¥ ì´ ë†’ê¸° ë•Œë¬¸ì´ë‹¤.\n\n> **Example**\n\nì™¼ìª½ì´ Cacheê³ , ì˜¤ë¥¸ìª½ì´ Main Memoryì´ë‹¤.\n\n1. ì´ˆê¸° ìƒíƒœ  \n  ![directed-mapping-1](/images/directed-mapping-1.png)\n2. 001011 ìš”ì²­  \n  ![directed-mapping-2](/images/directed-mapping-2.png)\n3. 001011 ì¬ìš”ì²­  \n  ![directed-mapping-3](/images/directed-mapping-3.png)\n4. 110011 ìš”ì²­  \n  ![directed-mapping-4](/images/directed-mapping-4.png)\n\nBlock ë‹¨ìœ„ë¥¼ 4Bytesë¡œ í–ˆë‹¤ë©´, í•˜ë‚˜ì˜ word ë‹¨ìœ„ê°€ Blockì˜ ë‹¨ìœ„ê°€ ë  ê²ƒì´ë‹¤. ê·¸ë ‡ì§€ ì•Šê³  ë” í° ë‹¨ìœ„ë¡œ Blockì„ ì €ì¥í•  ìˆ˜ë„ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” ì´ Blockì˜ ë‹¨ìœ„ë¥¼ ëŠ˜ë¦¬ë©´ miss rateë¥¼ ë‚®ì¶œ ìˆ˜ ìˆë‹¤. ê·¼ì²˜ì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì—¬ëŸ¬ ê°œ ê°€ì§€ë¯€ë¡œ, **spatial locality**ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ê³¼ë„í•˜ê²Œ ëŠ˜ë¦¬ê²Œ ë˜ë©´, ì˜¤íˆë ¤ ì´ë¡œ ì¸í•´ì„œ indexê°€ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ê°€ ì ì  ì‘ì•„ì§„ë‹¤. (í•œ ë§ˆë””ë¡œ cacheì˜ ì „ì²´ í¬ê¸°(ìš©ëŸ‰)ì€ ê³ ì •ì´ê¸° ë•Œë¬¸ì—, ê°€ë¡œë¥¼ ì˜ë¯¸í•˜ëŠ” blockì˜ ì‚¬ì´ì¦ˆê°€ ëŠ˜ì–´ë‚˜ë©´, ì„¸ë¡œë¥¼ ì˜ë¯¸í•˜ëŠ” indexì˜ ë²”ìœ„ê°€ ì¤„ì–´ë“¤ ìˆ˜ ë°–ì— ì—†ë‹¤.) ì´ë¡œ ì¸í•´ì„œ block sizeë¥¼ ë„ˆë¬´ í¬ê²Œ ëŠ˜ë¦¬ê²Œ ë˜ì–´ë„, miss rateëŠ” ì¦ê°€í•˜ê²Œ ëœë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ miss penaltyë„ í¬ê²Œ ì¦ê°€í•œë‹¤. í•´ë‹¹ ë°ì´í„°ë¥¼ cacheì— ëŒì–´ì˜¤ëŠ” ë™ì•ˆì˜ ì‹œê°„ì´ ì¦ê°€í•  ê²ƒì´ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì ë‹¹í•œ í¬ê¸°ì˜ block ì‚¬ì´ì¦ˆë¥¼ ì§€ì •í•´ì•¼ í•œë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, Cacheë¥¼ ì½ê¸°ë¥¼ ìš”ì²­í•˜ì˜€ì§€ë§Œ í•´ë‹¹ ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° ì´ë¥¼ `Miss`ë¼ê³  í•˜ëŠ”ë°, `Miss`ê°€ ë°œìƒí•˜ë©´ ì´ ë°ì´í„°ë¥¼ Main Memoryì—ì„œ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´ì„œ ì–´ì©” ìˆ˜ ì—†ì´ ìš°ë¦¬ëŠ” stallì„ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. ì´ëŸ¬í•œ `Miss`ëŠ” êµ‰ì¥í•œ ë¹„ìš©ì„ ë°œìƒì‹œí‚¤ê¸° ë•Œë¬¸ì— ëŒ€ê²Œ ì„¸ê°€ì§€ ë°©ì‹ì— ì˜í•´ì„œ ì´ë¥¼ í•´ê²°í•œë‹¤.\n\n1. Multiprocess or Multithread í™˜ê²½ì—ì„œëŠ” ë‹¤ë¥¸ processë¥¼ í•´ë‹¹ stall ë™ì•ˆ ì‹¤í–‰ì‹œì¼œì„œ ì´ë¥¼ í•´ê²°í•œë‹¤.\n2. OoO(Out of Order) Executionì„ ì§€ì›í•˜ëŠ” ì¥ë¹„ì—ì„œëŠ” ì´ë¥¼ í†µí•´ì„œ stallì„ ë°©ì§€í•œë‹¤.\n3. Softwareë¥¼ ê°œë°œí•  ë‹¹ì‹œì— í•´ë‹¹ ì‚¬í•­ì„ ì¸ì§€í•˜ê³  ìµœì í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. cacheì˜ hit ì •ë„ë¥¼ ì•„ë˜ ê·¸ë¦¼ì—ì„œ ì˜¤ë¥¸ìª½ê³¼ ê°™ì´ ì„¤ì •í•˜ê²Œ ë˜ë©´, ê²°ë¡ ì ìœ¼ë¡œ hit í™•ë¥ ì´ ê¸‰ê²©í•˜ê²Œ ì¦ê°€í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ëŸ°ì‹ìœ¼ë¡œ Cache í¬ê¸°ì— ìœ ì˜í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ í•´ë‹¹ ì¥ì¹˜ì— ìµœì í™”í•˜ëŠ” ë°©ì‹ë„ ì¡´ì¬í•œë‹¤.\n\n![software-optimize](/images/software-optimize.png)\n\n> **Write**\n\në°ì´í„°ë¥¼ Main Memoryë¡œ writeí•˜ëŠ” ìƒí™©ì„ ìƒê°í•´ë³´ì. cacheì—ì„œ ì‘ì—…ì„ ì§„í–‰í•˜ì—¬ í•´ë‹¹ ìœ„ì¹˜ì—ë§Œ ë°ì´í„°ë¥¼ ìµœì‹ í™”í•˜ê²Œ ë˜ë©´, í•„ì—°ì ìœ¼ë¡œ cacheì™€ Main Memory ì‚¬ì´ì—ì„œ ë¶ˆì¼ì¹˜ê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ ì„¸ ê°€ì§€ê°€ ìˆë‹¤.\n\n1. **Write Through**\n   ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ìœ¼ë¡œ, writeê°€ ë°œìƒí•˜ë©´, ëª¨ë“  ì €ì¥ ì¥ì¹˜ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•´ ëª¨ë‘ update í•´ì£¼ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜, ì´ writeì˜ ë¹„ìš©ì´ ì—„ì²­ë‚˜ê²Œ í¬ë‹¤ëŠ” ê²ƒì„ ì•Œê¸° ë•Œë¬¸ì— ì´ë¥¼ ìµœëŒ€í•œ ì ê²Œ í•˜ëŠ” ê²ƒì´ ì‚¬ì‹¤ìƒ performance í–¥ìƒì— í•µì‹¬ì´ë¼ê³  ìƒê°í•˜ë©´, ì´ëŠ” ì‹¤ì œë¡œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë¬´ë¦¬ê°€ ìˆë‹¤.\n2. **Write Buffer**\n   Main Memoryì— ì“°ì´ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” bufferë¥¼ ë§Œë“¤ì–´ ë†“ê³ , í•´ë‹¹ ì¥ì¹˜ì—ì„œ writeë¥¼ ì¼ì„í•˜ì—¬ ë†“ëŠ” ë°©ì‹ì´ë‹¤. ì´ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´, Writeì˜ ì™„ë£Œë¥¼ cacheì—ì„œ ë” ì´ìƒ ê¸°ë‹¬ë¦´ í•„ìš”ê°€ ì—†ë‹¤. í•˜ì§€ë§Œ, Write ëª…ë ¹ì–´ë¥¼ processorê°€ ì²˜ë¼í•˜ëŠ” ì†ë„ê°€ bufferê°€ Main Memoryì— ì“°ëŠ” ì†ë„ë³´ë‹¤ í›¨ì”¬ ë¹ ë¥´ê¸° ë•Œë¬¸ì— ë‹¹ì—°í•˜ê²Œ bufferê°€ ê½‰ì°° ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´, ë°˜ë“œì‹œ ê³µê°„ì´ ë‚  ë•Œê¹Œì§€ stallì„ í•´ì•¼ë§Œ í•œë‹¤.\n3. **Write Back**\n   ì´ ë°©ì‹ì€ ì¼ê´€ì„±ì„ í¬ê¸°í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¦‰, ë°ì´í„°ë¥¼ ê°€ì§€ê³  ìˆë‹¤ê°€ ì‹¤ì œë¡œ ì´ ê°’ì´ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ë³€ê²½ë  ë•Œ, cacheì˜ íŠ¹ì • indexì— ìˆëŠ” ê°’ì´ ë‹¤ë¥¸ tagì˜ ê°’ìœ¼ë¡œ ë³€ê²½ë  ë•Œì—ë§Œ ë°ì´í„°ë¥¼ ì“°ëŠ” ë°©ì‹ì´ë‹¤. ë˜ëŠ” ê°•ì œì ìœ¼ë¡œ í•˜ìœ„ memoryë¡œì˜ ì €ì¥ì„ ìš”êµ¬í•  ê²½ìš°ì—ë§Œ ì“°ë„ë¡ í•œë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´, ì„±ëŠ¥ì€ í™•ì—°íˆ ì˜¬ë¼ê°€ì§€ë§Œ, ë¶ˆì¼ì¹˜ì„±ìœ¼ë¡œ ì¸í•´ ë°œìƒí•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë” ë³µì¡í•œ ìš”êµ¬ì‚¬í•­ì´ ë°œìƒí•œë‹¤. (ì¼ë‹¨ cacheì˜ tableì— ê° rowì— í•´ë‹¹ ê°’ì´ í•˜ìœ„ Memoryì—ì„œ copyëœ ì´í›„ë¡œ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë¥¼ í‘œì‹œí•˜ëŠ” dirty bitê°€ í•„ìš”í•˜ë©°, multi processor í™˜ê²½ì—ì„œëŠ” ë” í° ë¬¸ì œë¥¼ ì•¼ê¸°í•œë‹¤.)\n\n### ë” ë‚˜ì€ Cache ì €ì¥ë²•\n\n`Directed Mapping`ì„ í†µí•´ì„œ Cacheì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ê²Œ ë˜ë©´, íŠ¹ì • Blockì´ ìœ„ì¹˜í•  ìˆ˜ ìˆëŠ” ì¥ì†Œê°€ ê³ ì •ë˜ì–´ ë²„ë¦°ë‹¤. ë§Œì•½, indexê°€ ê²¹ì¹˜ëŠ” ê°’ì´ ë™ì‹œì— ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©ëœë‹¤ë©´, miss rateê°€ í¬ê²Œ ì¦ê°€í•  ìˆ˜ ë°–ì— ì—†ë‹¤. ì—¬ê¸°ì„œ, cacheì˜ ìœ„ì¹˜ë¥¼ ê³ ì •í•˜ì§€ ì•Šê³ , ììœ ë¡­ê²Œ í•˜ì—¬ ì´ëŸ¬í•œ ë¬¸ì œëŠ” í¬ê²Œ ì¤„ì¼ë ¤ê³  í•˜ëŠ” ë°©ë²•ì´ ìˆë‹¤.\n\ntagì— ëª¨ë“  address ê°’ì„ ì €ì¥í•˜ê³ , indexë¥¼ addressì˜ ê°’ìœ¼ë¡œ ì „í˜€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°©ì‹ì´ ìˆë‹¤. ì´ê²ƒì„ `full-associative cache`ë¼ê³  í•œë‹¤. ì´ ê²½ìš°ì—ëŠ” í•´ë‹¹í•˜ëŠ” index ë²”ìœ„ì—ì„œ tagê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ì¶”ê°€ì ì¸ ì—°ì‚°ì´ í•„ìš”í•˜ì§€ë§Œ, hardware ì¥ì¹˜ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ë°°ì¹˜í•˜ì—¬ ì´ë¥¼ ë™ì‹œì— ì‹¤í–‰ì‹œì¼œ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¤ëŠ” ë°©ì‹ì„ íƒí•œë‹¤. ì´ ë°©ì‹ì€ ê²°ë¡ ì ìœ¼ë¡œ ë§ì€ hardware ì¥ë¹„ë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ìš”êµ¬í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ë¹„ì‹¸ì§„ë‹¤. ë”°ë¼ì„œ, ì ë‹¹í•œ í•©ì˜ì ì„ ì°¾ëŠ” ê²ƒì´ `set-associative cache`ì´ë‹¤. ì´ëŠ” index ê°’ì„ ì¼ë¶€ë§Œ ì´ìš©í•˜ëŠ” ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì¦‰, 3bitsë¥¼ indexë¡œ ì‚¬ìš©í•˜ëŠ” cacheì—ì„œ ìƒìœ„ nê°œì˜ bitë§Œ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ì—¬ í‘œí˜„í•˜ëŠ” ê²ƒì´ë‹¤. ë™ì¼í•œ indexë¥¼ ê°€ì§„ blockì€ $2^{ì „ì²´ bit ìˆ˜ - n}$ ì¡´ì¬í•˜ê²Œ ëœë‹¤. ì—¬ê¸°ì„œ, ì´ì œë¶€í„° tagë¥¼ í†µí•´ì„œ ì‚¬ìš©í•´ì„œ ê²€ìƒ‰ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ë§Œì•½ nì´ ì „ì²´ bit ìˆ˜ì™€ ê°™ì•„ ì§„ë‹¤ë©´, ì´ê²ƒì´ `full-associative cache`ê°€ ë˜ëŠ” ê²ƒì´ê³ , n = 0ì´ë¼ë©´, ì¼ë°˜ì ì¸ `Directed Mapping`ì´ ë˜ëŠ” ê²ƒì´ë‹¤.\n\n![set-associative](/images/set-associative.png)\n\nê·¸ë ‡ë‹¤ë©´, ì´ë ‡ê²Œ ì—¬ëŸ¬ ê°œì˜ indexê°€ dataë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” ê·¸ë¦‡ì´ ë  ë•Œ, ì–´ëŠ ìœ„ì¹˜ì— ê°’ì„ ë®ì–´ ì”Œìš°ëŠ” ê²ƒì´ í˜„ëª…í•  ê²ƒì¸ê°€ëŠ” **temporal locality**ì— ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ê°€ì¥ ì“°ì¸ì§€ ì˜¤ë˜ëœ indexì— ê°’ì„ ë®ì–´ì”Œìš´ë‹¤. ì´ê²ƒì´ LRU(Least Recently Used) ë°©ì‹ì´ë‹¤. ì´ë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” cacheì— ì¶”ê°€ì ì¸ reference bitë¼ëŠ” ê²ƒì„ ìœ„ì¹˜ì‹œí‚¨ë‹¤.\n\n### MultiLevel Cache\n\nì´ì œ cacheë¥¼ ì—¬ëŸ¬ ê°œ ì¸µ(multilevel cache)ì„ ì´ë£¨ì–´ ì‚¬ìš©í•œë‹¤ê³  í•´ë³´ì. processì— ê°€ê¹Œìš´ ìª½ì„ primary cacheë¼ê³  í•˜ê³ , ê·¸ ë‹¤ìŒì„ secondary cacheë¼ê³  í•˜ì. ë§Œì•½, primary cacheì—ì„œ missê°€ ë°œìƒí–ˆì„ ëŒ€, secondary cacheì— ìˆìœ¼ë©´, miss penaltyë¥¼ ì¤„ì¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, secondary cacheë„ missê°€ ë‚˜ë©´, miss penaltyìì²´ê°€ ì¦ê°€í•œë‹¤. ì™œëƒí•˜ë©´, secondary ë¡œ ë¶ˆëŸ¬ì˜¤ê³ , ë‹¤ì‹œ primaryë¡œ ì˜®ê²¨ì•¼ í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë ‡ê¸°ì— ë¬´ì¡°ê±´ cacheë¥¼ ë§ì´ ë‘”ë‹¤ê³  ì¢‹ì€ ê²ƒì€ ì•„ë‹ˆë‹¤. ì ì ˆí•œ cahceë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ê³ , ëŒ€ê²Œ ì´ëŠ” 3ê°œ ì •ë„ë¡œ í•œë‹¤.\n\nê·¸ë¦¬ê³  ì§ê´€ì ìœ¼ë¡œ ê° cacheë¥¼ ë³´ë©´, primary cacheëŠ” hit timeì„ ì¤„ì´ëŠ” ê²ƒì´ ëª©í‘œì´ê³ , secondary cacheëŠ” miss rateë¥¼ ì¤„ì—¬ì•¼ í•œë‹¤. ê·¸ë˜ì„œ, primary cacheì—ì„œëŠ” block sizeë¥¼ ì¤„ì´ê³ , associativeì˜ í¬ê¸°ë¥¼ ì¤„ì´ì§€ë§Œ, secondary cacheì—ì„œëŠ” block sizeë¥¼ í‚¤ìš¸ ë¿ë§Œ ì•„ë‹ˆë¼ associativeì˜ í¬ê¸° ì—­ì‹œ í‚¤ìš°ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n## Virtual Memory\n\nMain Memoryë¥¼ ì•ˆì •ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•´ì„œ, Virtual Memoryë¼ëŠ” ê°œë…ì„ ë„ì…í•œë‹¤. ì´ëŠ” ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” Main Memoryì™€ Secondary Storageì˜ ì£¼ì†Œ(**Physical Address**)ë¥¼ ê°€ìƒì˜ ì£¼ì†Œ(**Virtual Address**)ë¡œ ë°”ê¾¸ê³ , í•„ìš”ì— ë”°ë¼ ì´ë¥¼ ë²ˆì—­í•˜ì—¬ ì‚¬ìš©í•¨ìœ¼ë¡œì¨, í•˜ë‚˜ì˜ processê°€ ë§ˆì¹˜ Main Memory í•˜ë‚˜ë¥¼ ì¥ì•…í•˜ê³  ìˆëŠ” ê±° ê°™ì€ ëŠë‚Œì„ ëŠë¼ë„ë¡ í•  ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´, ë‹¹ì¥ì— ì“°ì§€ ì•ŠëŠ” processì˜ dataëŠ” Secondary Storageë¡œ ë¹¼ë†“ê³ , Virtual Addressë¡œ ë²ˆì—­ ì‹œì—ëŠ” í•´ë‹¹ ìœ„ì¹˜ë¥¼ ê°€ë¥´í‚¤ë„ë¡ í•˜ë©´ ëœë‹¤. ê·¸ëŸ¬ë©´, ë§ˆì¹˜ ê° processëŠ” Main Memory ì´ìƒì˜ dataë¥¼ ê°–ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤ê³  ëŠë‚„ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ Virtual Memoryë¥¼ ì´ìš©í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ ì‰½ê²Œí•  ìˆ˜ ìˆë‹¤.\n\n1. **ë™ì¼í•œ ì¥ì¹˜ì—ì„œ program ê°„ì˜ Memory ì˜ì—­ì„ êµ¬ë¶„í•  ë•Œ**, ì¼ë°˜ì ìœ¼ë¡œ Main Memoryì— ìˆëŠ” ë°ì´í„° ì—­ì‹œ **locality**ì— ë”°ë¼ ê³„ì†í•´ì„œ ë°”ë€Œê²Œ ë˜ëŠ”ë°, íŠ¹ì • process ì „ì²´ í¬ê¸°ë¥¼ ì‹¤í–‰ ì¤‘ì¼ ë™ì•ˆ ê³„ì†í•´ì„œ ì œê³µí•œë‹¤ë©´, ìœ ì—°í•œ ë™ì‘ì´ ì–´ë µë‹¤. ë”°ë¼ì„œ, Virtual MemoryëŠ” ì´ë¥¼ ë” ì‰½ê²Œ í•˜ë„ë¡ ë•ëŠ”ë‹¤.\n2. **ë™ì¼í•œ ì¥ì¹˜ ë‚´ì—ì„œ ëŒì•„ê°€ëŠ” Virtual Machineê°„ì˜ Main Memory ì˜ì—­ì„ êµ¬ë¶„í•  ë•Œ**, ê° Virtual MemoryëŠ” Physical Memoryë¡œ ë²ˆì—­ë˜ì—ˆì„ ë•Œ, ì„œë¡œ ì¶©ëŒí•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³´ì¥í•˜ê¸° ë•Œë¬¸ì— ì„œë¡œ ë‹¤ë¥¸ processê°„ì— ê°„ì„­ì´ ì—†ìŒì„ ë³´ì¥í•  ìˆ˜ ìˆë‹¤.\n3. **Main Memory ë³´ë‹¤ í° í¬ê¸°ì˜ Programì„ ëŒë¦¬ê³ ì í•  ë•Œ**, Main Memory ì´ìƒì˜ processë¥¼ ëŒë¦¬ê¸° ìœ„í•´ì„œëŠ” Secondary Storageì— ì§ì ‘ì ì¸ ì ‘ê·¼ì„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ë°, ì´ë¥¼ ìˆ˜í–‰í•˜ì§€ ì•Šê³ , ì‹¤ì œë¡œ í˜„ì¬ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Memory ê³µê°„ì˜ ë°ì´í„°ëŠ” Secondary Storageë¡œ ì˜®ê¸°ê³  ì´ë¥¼ ê°€ë¥´í‚¤ëŠ” Virtual Addressë§Œ ë°”ê¾¸ì–´ì£¼ë©´ ë˜ê¸° ë•Œë¬¸ì—, ì‰½ê²Œ Main Memory ë³´ë‹¤ í° í¬ê¸°ì˜ Programì„ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n\nVirtual Memory ë°©ì‹ì€ ê° program, Virtual Machineë§ˆë‹¤ ê³ ìœ í•œ address spaceë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì— ê°ì ë…ë¦½ë˜ì—ˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸°ì— ê°ìê°€ ì„œë¡œì˜ ë™ì‘ìœ¼ë¡œ ì¸í•œ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, ë‹¤ë¥¸ processì—ì„œ ì‚¬ìš© ì¤‘ì¸ Memoryì— ì ‘ê·¼í•  ìˆ˜ ì—†ì„ ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë“¤ì— ì˜í•´ì„œ ë°œìƒí•˜ëŠ” Memoryì˜ ë³€í™”ê°€ ìì‹ ì´ ì§„í–‰ ì¤‘ì¸ processì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. ì¦‰, protectionë¥¼ ì œê³µí•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.\n\në˜í•œ, programì„ ìƒí˜¸ê°„ì˜ ì˜í–¥ì´ ì—†ëŠ” ì¡°ê°ìœ¼ë¡œ ë‚˜ëˆˆ Overlay ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ì–´ ì´ˆê³¼ë˜ëŠ” ìš©ëŸ‰ì€ Secondary Storageì— ìƒì£¼ì‹œí‚¤ê³ , í•„ìš”ì— ë”°ë¼ Main Memoryë¡œ ì˜¬ë ¤ì„œ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìš©ëŸ‰ì´ ë¶€ì¡±í•œ Main Memoryì—ì„œë„ ì´ë³´ë‹¤ í° í¬ê¸°ì˜ Programì„ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\n\nCacheì˜ ë°©ì‹ê³¼ ë§¤ìš° ìœ ì‚¬í•˜ì§€ë§Œ, ì–¸ì–´ì˜ ê¸°ì›ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œëŠ” Blockì„ **Page**ë¼ê³  ë¶€ë¥¸ë‹¤. ê·¸ë¦¬ê³ , ì´ Pageì˜ í¬ê¸°ëŠ” Page Offsetì´ë¼ê³  í‘œê¸°í•œë‹¤. ë”°ë¼ì„œ, **Virtual Address**ëŠ” ì‚¬ì‹¤ìƒ ë‘ ê°œì˜ Partë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. ì²« ë²ˆì§¸ëŠ” **Virtual Page Number**ì´ê³ , í•˜ë‚˜ì˜ **Page offset**ì´ë‹¤. ë˜í•œ, MissëŠ” **Page Fault**ë¼ëŠ” ë§ë¡œ ë°”ë€Œì–´ì§„ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, Virtual Addressì— Mapping ë˜ëŠ” Physical Addressë¥¼ Physical Page Numberì™€ Page offsetìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤.\n\nìœ„ì—ì„œ ë§í•œ ê²ƒì²˜ëŸ¼ Virtual Addressë¥¼ Physical Addressë¡œ ë°”ê¾¸ëŠ” ê³¼ì •ì„ **Address Translation**ì´ë¼ê³  í•œë‹¤.\n\n### Page ê´€ë¦¬\n\n> **Virtual Page Numberë¥¼ í†µí•´ì„œ ì‹¤ì œ Physical Page Numberë¡œ ë³€í™˜í•˜ê¸°**\n\nê¸°ì¡´ì˜ Cacheì—ì„œë„ Missë¡œ ì¸í•œ ë¹„ìš©ë„ ì»¸ì§€ë§Œ, **Page Fault**ì˜ ë¹„ìš©ì€ ì´ë³´ë‹¤ë„ í›¨ì”¬ í¬ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ, Cacheì—ì„œëŠ” Full Associativeí•œ êµ¬ì¡°ë¥¼ ê°€ì ¸ê°”ì§€ë§Œ, Main MemoryëŠ” Cacheë³´ë‹¤ í›¨ì”¬ í¬ê¸° ë•Œë¬¸ì— ì´ë¥¼ ìœ„í•œ ì¶”ê°€ì ì¸ Hardwareë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ê²½ì œì ìœ¼ë¡œ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, Main Memoryì— ì¡´ì¬í•˜ëŠ” Pageì˜ Addressë¥¼ Mappingí•˜ê¸° ìœ„í•´ì„œ tableì„ ì´ìš©í•œë‹¤. ì´ë¥¼ **Page Table**ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ì´ëŠ” Main Memoryì— ìƒì¤‘í•˜ê³  ìˆë‹¤. ê° ê°ì˜ programì€ ê³ ìœ ì˜ Page Tableì„ í•˜ë‚˜ì”© ê°€ì§€ê²Œ ë˜ë©°, Page Table ìì²´ì˜ ì²˜ìŒê³¼ ëì„ ê°€ë¥´í‚¤ëŠ” registerë¥¼ ê°€ì§€ê³  ìˆë‹¤(**Page Table Register**). ê·¸ë¦¬ê³  Page Tableì—ëŠ” Virtual Pageê°€ ì§€ê¸ˆ ì–´ëŠ Physical Addressì— ì¡´ì¬í•˜ëŠ”ì§€ì— ëŒ€í•œ ì •ë³´ì™€ ì´ê²ƒì´ Main Memoryì— ìˆëŠ”ì§€ë¥¼ í‘œê¸°í•˜ëŠ” Valid Bitê°€ ì¡´ì¬í•œë‹¤. ë§Œì•½, Valid Bitê°€ 0ì´ë¼ë©´, ì´ëŠ” í•´ë‹¹ Pageê°€ ì§€ê¸ˆ Main Memoryê°€ ì•„ë‹Œ Secondary Storageì— ì¡´ì¬í•œë‹¤ëŠ” ëœ»ì´ë‹¤.\n\në”°ë¼ì„œ, Pageë¥¼ ì°¾ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. Page Table Registerë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ Main Memoryì—ì„œ **Page Tableì„ ì°¾ëŠ”ë‹¤**.\n2. Virtual Addressì˜ Virtual Page Numberë¥¼ ì´ìš©í•´ì„œ Page Tableì—ì„œ Pageë¥¼ ì¡°íšŒí•œë‹¤.\n3. Valid Bitë¥¼ í™•ì¸í•˜ì—¬ í•´ë‹¹ Pageê°€ í˜„ì¬ Main Memoryì— ì¡´ì¬í•˜ëŠ”ì§€ ì•„ë‹ˆë©´ Secondary Storageì— ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.\n4. ì´ì œ ì‹¤ì œ Physical Page Numberë¥¼ ì–»ì–´ì™€ì„œ, ê¸°ì¡´ì˜ Page Offsetì„ í•©ì¹˜ë©´, ì´ê²ƒì´ Physical Addressê°€ ëœë‹¤.\n\n```plaintext\n  \n  ğŸ¤” Page Tableì˜ í¬ê¸°ê°€ ë„ˆë¬´ í¬ë©´ ì–´ë–»ê²Œ ë ê¹Œ?\n\n  Pageê°€ ë„ˆë¬´ ë§ì•„ì§€ë©´, Page Tableì˜ í¬ê¸°ê°€ ë„ˆë¬´ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤.\n  ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ê³„ì¸µ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ì •ë¦¬í•œë‹¤. \n  ì¦‰, Page Tableì˜ Tableì´ ìƒê¸°ëŠ” í˜•íƒœë¼ê³  ë³´ë©´ ë˜ê² ë‹¤.\n\n```\n\n> **Page Fault**\n\nìœ„ì—ì„œ ë§í•œëŒ€ë¡œ Page Faultê°€ ë°œìƒí•œë‹¤ë©´, ì¦‰ Valid Bitê°€ 0ì¸ ê²½ìš°, í•´ë‹¹ Pageë¥¼ Secondary Storageì—ì„œ ì°¾ê³ , ì´ë¥¼ Main Memoryì˜ ì–´ëŠ ìœ„ì¹˜ì— ë†“ì„ì§€ë¥¼ ê²°ì •í•´ì•¼ í•œë‹¤.\n\nìš°ë¦¬ê°€ ë²ˆì—­í•œ Physical AddressëŠ” Secondary Storageì˜ ì§ì ‘ì ì¸ ì£¼ì†Œë¥¼ ì˜ë¯¸í•˜ê¸°ë„ í•˜ì§€ë§Œ ëŒ€ê²ŒëŠ” ì´ë¥¼ ì´ìš©í•´ì„œ ì‹¤ì œ Secondary Storageì˜ ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ìë£Œêµ¬ì¡°ë¥¼ ê°€ë¥´í‚¤ë„ë¡ ë˜ì–´ìˆë‹¤. ê·¸ë˜ì„œ, ìš°ë¦¬ì˜ Operating Systemì€ Processê°€ ìƒì„±ë  ë•Œ, Processì˜ ëª¨ë“  Pageë¥¼ Secondary Storageì— ì €ì¥í•  ê³µê°„ì„ ìƒì„±í•œë‹¤. ì´ë¥¼ `Swap Space`ë¼ê³  ë¶€ë¥´ë©°, í•´ë‹¹ Virtual Pageê°€ ì‹¤ì œ diskì˜ ì–´ë””ì— ì €ì¥ë ì§€ë¥¼ ê¸°ë¡í•œ ìë£Œêµ¬ì¡°ì´ë‹¤.\n\në§Œì•½, ì´ì œ ëª¨ë“  Main Memoryê°€ Pageë¡œ ê°€ë“ ì°¨ ìˆë‹¤ë©´, OSëŠ” ì–´ë–¤ Pageë¥¼ ëŒ€ì²´í•  ê²ƒì¸ì§€ë¥¼ ì„ íƒí•œë‹¤. ì´ë•ŒëŠ” LRU(Least Recently Used) Algorithmì„ ì‚¬ìš©í•œë‹¤. ì§€ê¸ˆê¹Œì§€ ê°€ì¥ ì‚¬ìš©í•˜ì§€ ì•Šì€ Pageë¥¼ ì‚­ì œí•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ êµ¬í˜„í•  ë•ŒëŠ” Reference bitë¥¼ ì„¤ì •í•˜ê³ , ì£¼ê¸°ì ìœ¼ë¡œ 0ìœ¼ë¡œ ë³€ê²½í•˜ê¸°ë¥¼ ë°˜ë³µí•˜ë©´ì„œ, í•´ë‹¹ Pageë¥¼ ì‚¬ìš©í•  ë•Œë§ˆë‹¤ 1ë¡œ ë³€ê²½ì£¼ëŠ” ê²ƒì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë¦¬ê³ , Page Faultê°€ ë°œìƒí•  ì‹œì— Reference Bitê°€ 0ì¸ ëŒ€ìƒì´ ìˆë‹¤ë©´, ì´ë¥¼ ìš°ì„ ìœ¼ë¡œ ì œê±°í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n> **Write**\n\nWriteí•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ë§ì€ ì‹œê°„ì„ ì†Œìš”í•œë‹¤. ë”°ë¼ì„œ, Virtual Memory Systemì—ì„œëŠ” ì´ë¥¼ ìµœì†Œí™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ê¸° ë•Œë¬¸ì— ì´ì „ì— ì†Œê°œí•œ Write Backì´ defaultì´ë‹¤.\n\n> **TLBë¥¼ ì´ìš©í•œ ë³€í™˜ì‘ì—… ì†ë„ í–¥ìƒ**\n\nPage Tableì´ ì‹¤ì œë¡œ Main Memoryì— ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” Pageë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•´ì„œ ê²°êµ­ ë¬´ì¡°ê±´ Main Memoryì— í•œ ë²ˆ ì ‘ê·¼í•´ì•¼ í•œë‹¤. ì´ëŠ” ë§ì€ ì‹œê°„ì„ ì†Œìš”í•˜ëŠ” ë™ì‘ì´ê¸°ì— ì´ë¥¼ ìµœì†Œí™”í•  ë°©ë²•ì´ í•„ìš”í–ˆë‹¤. ë˜í•œ, Temporarl / Spatial Localityì— ë”°ë¼ ì‚¬ìš©í•œ PageëŠ” ë‹¤ì‹œ ì‚¬ìš©í•  í™•ë£°ì´ ë§ë‹¤. ë”°ë¼ì„œ, ëŒ€ê²Œì˜ processorì—ì„œëŠ” ì´ë¥¼ ìœ„í•œ íŠ¹ë³„í•œ cacheë¥¼ ì¶”ê°€ë¡œ ê°€ì§€ê³  ìˆë‹¤. ì´ê²ƒì´ TLB(Translate Lookaside Buffer)ì´ë‹¤. (ì•„ë§ˆ Translation cacheë¼ê³  ë¶€ë¥´ëŠ” ê²ƒì´ ë” ìì—°ìŠ¤ëŸ½ê¸´ í•  ê²ƒì´ë‹¤.) ë”°ë¼ì„œ, TLBëŠ” Virtual Page Numberì™€ Dirty Bit, ê·¸ë¦¬ê³  Reference Bitë¥¼ ê°€ì§„ë‹¤. TLBë¥¼ ì„¤ê³„í•  ë•Œì—ëŠ” fully associativeí•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ ê¸°ë³¸ì´ë‹¤. ì™œëƒí•˜ë©´, TLB ìì²´ê°€ ë§¤ìš° ì‘ê³ , hit rateê°€ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ê¸° ë•Œë¬¸ì´ë‹¤. ì´ë ‡ê²Œ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ì„±ëŠ¥ì— í° ë„ì›€ì´ ëœë‹¤. ë˜í•œ, replacingì„ í•  ë•Œì—ë„ LRUë¥¼ êµ¬í˜„í•  ìˆ˜ë„ ìˆì§€ë§Œ ëŒ€ê²Œ ì´ë¥¼ êµ¬í˜„í•˜ê¸°ê°€ ë„ˆë¬´ ê²½ì œì ìœ¼ë¡œ ì–´ë µê¸° ë•Œë¬¸ì—, ëŒ€ë¶€ë¶„ì˜ systemì€ ëœë¤í•˜ê²Œ ê³ ë¥´ëŠ” ê²ƒì„ ì„ íƒí•œë‹¤ê³  í•œë‹¤.\n\në”°ë¼ì„œ, Pageë¥¼ ì–»ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤ê³  ë‹¤ì‹œ ìš”ì•½í•  ìˆ˜ ìˆë‹¤.\n\n1. Page Table Registerë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ TLBì—ì„œ **Page Tableì„ ì°¾ëŠ”ë‹¤**. ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, Main Memoryì—ì„œ ì¡°íšŒí•´ì•¼ í•œë‹¤.(TLB miss)\n2. Virtual Addressì˜ Virtual Page Numberë¥¼ ì´ìš©í•´ì„œ Page Tableì—ì„œ Pageë¥¼ ì¡°íšŒí•œë‹¤.\n3. Valid Bitë¥¼ í™•ì¸í•˜ì—¬ í•´ë‹¹ Pageê°€ í˜„ì¬ Main Memoryì— ì¡´ì¬í•˜ëŠ”ì§€ ì•„ë‹ˆë©´ Secondary Storageì— ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤.\n4. ì´ì œ ì‹¤ì œ Physical Page Numberë¥¼ ì–»ì–´ì™€ì„œ, ê¸°ì¡´ì˜ Page Offsetì„ í•©ì¹˜ë©´, ì´ê²ƒì´ Physical Addressê°€ ëœë‹¤.\n5. ì´ë¥¼ í†µí•´ì„œ, ì¡°íšŒë¥¼ ìˆ˜í–‰í•˜ëŠ”ë° ë§Œì•½, Secondary Storageì— ìˆì—ˆë‹¤ë©´, LRUë¥¼ ì´ìš©í•´ì„œ Page Swapì„ ìˆ˜í–‰í•˜ì—¬ Pageë¥¼ Main Memoryë¡œ ì˜¬ë¦°ë‹¤.\n6. ë§Œì•½, TLB missê°€ ë°œìƒí–ˆì—ˆë‹¤ë©´, í•´ë‹¹ Page ì •ë³´ë¥¼ ì—…ë°ì´íŠ¸í•œë‹¤.\n\nìì£¼ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ” TLB missê°€ Page Faultê°€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ê¼­ ëª…ì‹¬í•˜ì.\n\n![Virtual Memory](/images/virtual-memory.png)\n\n## Reference\n\n- David A. Patterson, John L. Hennessy,Â Computer Organization and Design\n","slug":"architecture-memory","date":"2022-04-29 19:25","title":"5. Memory Hierarchy","category":"Computer Architecture","tags":["Computer Organization And Design","Memory","Memory Hierarchy","Cache","Directed Mapping","Virtual Memory","Page"],"desc":"ì»´í“¨í„°ë¥¼ ì‚¬ìš©í•  ë•Œ, ìš°ë¦¬ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ Memoryê°€ ë¬´í•œí•œ í¬ê¸°ë¥¼ ê°€ì§€ê³  ìˆê¸°ë¥¼ ë°”ë€ë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ì‹¤ì œë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë¹„ìš©ì ìœ¼ë¡œë„, ê¸°ìˆ ì ìœ¼ë¡œë„ ë¶ˆê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë§ˆì¹˜ ì¡´ì¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ ëŠë¼ë„ë¡ í•˜ëŠ” Virtual Memoryë¼ëŠ” ê¸°ìˆ ì„ ì‚¬ìš©í•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/default.jpg"},{"content":"\n## Intro\n\nìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì€ ê°•í•œ performanceë¥¼ ë°œíœ˜í•˜ë©´ì„œë„, ê°€ìš©ì„±(availability, ëŠê¹€ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì˜ ì •ë„)ê°€ ë†’ì€ computerë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ, ìš°ë¦¬ëŠ” ë‹¨ìˆœíˆ í•˜ë‚˜ì˜ processorë¥¼ ì •êµí•˜ê²Œ ë§Œë“¤ê¸°ë³´ë‹¤ëŠ” ë™ë“±í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ì—¬ëŸ¬ ê°œì˜ processorë¥¼ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì´ë¼ëŠ” ê²ƒì´ë¼ëŠ” ê²ƒì„ ì•Œì•„ëƒˆë‹¤. (ì´ë¥¼ softwareê°€ ì˜ í™œìš©í•  ìˆ˜ë§Œ ìˆë‹¤ë©´, ì„±ëŠ¥ì´ í¬ê²Œ í–¥ìƒë  ê²ƒì´ë‹¤.)\n\n- í•˜ë‚˜ì˜ ì¥ì¹˜ë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ë°©ì‹ë³´ë‹¤ ì ì€ ì—ë„ˆì§€ë¡œ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. (ë™ì‹œì— ì‹¤í–‰ì‹œí‚¤ê¸° ë•Œë¬¸ì— ë” ì§§ì€ ì‹œê°„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.)\n- nê°œì˜ processorì—ì„œ í•˜ë‚˜ê°€ ì‹¤íŒ¨í•˜ì—¬ë„ n-1ê°œëŠ” ì •ìƒ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— ì „ì²´ ì‹œìŠ¤í…œì€ ë¬¸ì œ ì—†ì´ ë™ì‘í•œë‹¤. (Redundant, ì¶”ê°€ìì›ì„ í†µí•´ì„œ ê°€ìš©ì„±ì„ í–¥ìƒì‹œí‚´)\n\nì´ì— ë”°ë¼ ìš°ë¦¬ëŠ” multi-processorë¥¼ ì‚¬ìš©í•œë‹¤.\nì´ëŠ” multi-processorê°€ ì–´ë–»ê²Œ ì¡´ì¬í•˜ëŠëƒì— ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ë‚˜ëˆˆë‹¤.\n\n1. **Multicore Microprocessor** : í•˜ë‚˜ì˜ IC(ì§‘ì  íšŒë¡œ) ì¹©ì— ì—¬ëŸ¬ ê°œì˜ processor(core)ê°€ ì¡´ì¬í•œë‹¤.\n2. **Multiple Processor** : ICì¹©ì˜ ê°¯ìˆ˜ë¥¼ ëŠ˜ë¦°ë‹¤.\n3. **Cluster System** : Machine(Computer) ìì²´ì˜ ê°¯ìˆ˜ë¥¼ ëŠ˜ë¦°ë‹¤.\n\në”°ë¼ì„œ, ê°œì¸ PCì—ì„œëŠ” Multiple Multicore Microprocessorë¥¼ ì§€ì›í•˜ê³ , ìˆëŠ” ìƒí™©ì´ê³ , Datacenterì™€ ê°™ì€ í™˜ê²½ì—ì„œëŠ” ì´ëŸ¬í•œ Machineë“¤ì´ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•˜ëŠ” Cluster Systemì´ë¼ê³  ìƒê°í•˜ë©´ ë˜ê² ë‹¤.\n\në˜í•œ, ì´ìš©í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.\n\n1. Task Level Parallelism(=Process Level Parallelism) : ë™ì‹œì— ë…ë¦½ëœ ì—¬ëŸ¬ programì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ì‹\n2. Parallel Processing Program : ë™ì‹œì— ì—¬ëŸ¬ ê°œì˜ processorë¥¼ ì´ìš©í•˜ì—¬ í•˜ë‚˜ì˜ programì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ì‹\n\n## Parallel Processing Programì˜ êµ¬í˜„\n\ní•˜ë‚˜ì˜ ì‘ì—…ì„ ë” ë¹ ë¥´ê²Œ ì²˜ë¦¬í•˜ê¸° ìœ„í•˜ì—¬ multiple processorë¥¼ ì‚¬ìš©í•˜ëŠ” softwareë¥¼ ì‘ì„±í•˜ëŠ” ê²ƒì€ ì–´ë µë‹¤. ì´ëŠ” processorì˜ ìˆ˜ê°€ ëŠ˜ì–´ë‚  ìˆ˜ë¡ ì‹¬í•´ì§„ë‹¤. multiprocessor programì„ ì´ìš©í•  ê²½ìš°ì—, ìˆ˜ê°€ ëŠ˜ì–´ë‚  ìˆ˜ë¡ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì— ëŒ€í•œ ë¶€ë‹´ì„ ê°€ì§ˆ ìˆ˜ ë°–ì— ì—†ë‹¤.\n\n1. **Scheduling** : process ë˜ëŠ” threadë¥¼ schedulingí•˜ì—¬ ì–´ë–¤ ê²ƒì„ ë¨¼ì € ì‹¤í–‰ì‹œí‚¬ì§€ì— ëŒ€í•œ scheduling ì—­ì‹œ í° ë¶€ë‹´ì´ë‹¤.\n2. **Partitioning** : Memoryì˜ êµ¬ê°„ì„ ê° processorì—ê²Œ ì–´ë–»ê²Œ ë‚˜ëˆ„ê³  ì„œë¡œ ë…ë¦½ë˜ê²Œ ì¡´ì¬í•˜ê¸° ìœ„í•œ ê´€ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒ ì—­ì‹œ í° ë¶€ë‹´ì´ ëœë‹¤.\n3. **Balancing the Load** : ì‘ì—…ì„ ê° processorì—ê²Œ ê· ë“±íˆ ë¶„ë°°í•˜ëŠ” ê²ƒ ì—­ì‹œ ì–´ë µë‹¤.\n4. **Time to Synchronize** : ì—¬ëŸ¬ ê°œê°€ ë™ì‹œì— í•˜ë‚˜ì˜ processë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´, ì½ê³  ì“°ê¸°ì—ì„œ ì¶©ëŒì´ ë°œìƒí•˜ëŠ” ê²ƒì— ì˜í•œ ë¬¸ì œê°€ ë°œìƒí•˜ê³  ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì‹œê°„ì„ ì‚¬ìš©í•  ìˆ˜ ë°–ì— ì—†ë‹¤.\n5. **Overhead for Communication** : ê° processorê°„ì˜ ì˜ì‚¬ì†Œí†µì— ë„ˆë¬´ í° ë¹„ìš©ì´ ë°œìƒí•˜ëŠ” ê²½ìš° ì˜¤íˆë ¤ í•˜ë‚˜ì˜ processorê°€ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒë³´ë‹¤ ë” ë§ì€ ì‹œê°„ì„ ìš”êµ¬í•  ìˆ˜ë„ ìˆë‹¤.\n\nì´ ëª¨ë“  ê²ƒì„ softwareì—ì„œ ì œëŒ€ë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆì„ ë•Œ, ê·¸ì œì„œì•¼ ìš°ë¦¬ëŠ” multi processor ì‹œìŠ¤í…œì„ ì œëŒ€ë¡œ í™œìš©í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\nìš°ë¦¬ê°€ processorì˜ ê°¯ìˆ˜ë¥¼ ëŠ˜ë¦¼ìœ¼ë¡œì¨ ì–»ì„ ìˆ˜ ìˆëŠ” í˜œíƒì€ ê° processorì— ì „ë‹¬ë˜ëŠ” ì‘ì—…ì˜ ìˆ˜ë¥¼ ê· ë“±í•˜ê²Œ ë‚˜ëˆ„ì–´, ê¸°ì¡´ì— í•˜ë‚˜ì˜ processorê°€ í•  ìˆ˜ ì—†ë˜ ì¼ì„ ì²˜ë¦¬(weak scaling)í•˜ê±°ë‚˜, ê¸°ì¡´ì˜ ë¬¸ì œë¥¼ ë” ë¹ ë¥´ê²Œ ì²˜ë¦¬(strong scaling)í•  ìˆ˜ ìˆë‹¤.\n\n## Data Stream, Instruction Stream\n\nprocessorë“¤ë¡œ ë“¤ì–´ì˜¤ëŠ” dataì˜ ì–‘ì„ ì˜ë¯¸í•˜ëŠ” **Data Stream**ê³¼ instructionì˜ ì–‘ì„ ì˜ë¯¸í•˜ëŠ” **Instruction Stream**ì— ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ê° processorë“¤ì„ ë‹¤ì–‘í•œ ì´ë¦„ìœ¼ë¡œ ë¶€ë¥¸ë‹¤.\n\n1. **SISD**(Single Instruction Stream, Single Data Stream) : ëŒ€ê²Œ single processorì¼ ê²½ìš° ì´ì™€ ê°™ì€ í˜•íƒœë¥¼ ì±„íƒí•œë‹¤.\n2. **MIMD**(Multiple Instrunction Stream, Multiple Data Stream) : Multiple Processor Systemì—ì„œëŠ” ë‹¹ì—°íˆ ì´ì™€ ê°™ì€ ì‹œìŠ¤í…œì„ ì±„íƒí•œë‹¤.\n3. **MISD**(Multiple Instrunction Stream, Single Data Stream) : ì˜ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í˜•íƒœì´ë‹¤. ëŒ€ê²ŒëŠ” Dataì˜ ì²˜ë¦¬ê°€ ë” ë§ì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤.\n4. **SIMD**(Single Instruction Stream, Multiple Data Stream) : í•˜ë‚˜ì˜ Instructionì„ ì´ìš©í•˜ì—¬ ë³µí•©ì ì¸ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì²˜ë¦¬í•˜ëŠ” vector ì—°ì‚° ë“±ì„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.\n   1. vector ì—°ì‚° í•˜ë‚˜ê°€ for loop í•˜ë‚˜ë¥¼ ì˜ë¯¸í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” processor partì˜ ê° pipeline ë‹¨ê³„ì—ì„œ fetchì™€ decodeì— ì˜í•œ ë¹„ìš©ì„ í¬ê²Œ ê°ì†Œì‹œí‚¬ ìˆ˜ ìˆë‹¤.\n   2. í•˜ë‚˜ì˜ vector ì—°ì‚°ì€ ë‚´ë¶€ì—ì„œ ê°ê°ì´ ë…ë¦½ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ê¸° ë•Œë¬¸ì—, data hazardë¥¼ checkí•˜ëŠ” ë¹„ìš©ì´ ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤. ğŸ‘‰ ë”°ë¼ì„œ, vectorì˜ ê° ìš”ì†Œë¥¼ ëª¨ë‘ ê²€ì‚¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ vector ì™¸ë¶€ ê°„ì˜ data hazard ìœ ë¬´ë§Œ í™•ì¸í•˜ë©´ ëœë‹¤.\n   3. Main Memoryì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ê²½ìš°ì—ë„ ê° ìš”ì†Œë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì´ ì•„ë‹Œ í•œ ë²ˆì— ê°€ì ¸ì˜¬ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§¤ìš° ë¹ ë¥´ë‹¤.\n   4. Loopë¥¼ í‘œí˜„ì´ vector ì—°ì‚°ìœ¼ë¡œ ëŒ€ì²´ë˜ê¸° ë•Œë¬¸ì—, Loop Branchê°€ ì¤„ì–´ë“ ë‹¤.\n\n## Hardware Multithreading\n\nprogrammerì˜ ì…ì¥ì—ì„œ MIMDëŠ” hardware multithreadingì²˜ëŸ¼ ë™ì‘í•œë‹¤ê³  ìƒê°í•˜ê²Œ í•œë‹¤. ì´ëŠ” processorì˜ ì‚¬ìš©ì„±ì„ ìµœëŒ€í™”í•˜ê¸° ìœ„í•´ì„œ, íŠ¹ì • threadê°€ stall ë˜ì—ˆì„ ë•Œ, ë‹¤ë¥¸ threadë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì¦‰, í•˜ë‚˜ì˜ processorì—ì„œ ì—¬ëŸ¬ ê°œì˜ threadë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ ì‚¬ì‹¤ìƒ ì—¬ëŸ¬ processorê°€ ì¡´ì¬í•˜ëŠ” multiprocessor í™˜ê²½ì—ì„œ ì„œë¡œê°„ ì‹¤í–‰ í™˜ê²½ì„ ì„œë¡œ ê³µìœ í•´ì•¼ í•œë‹¤. ì´ë¥¼ ì‹¤í˜„í•˜ë ¤ë©´, ê° threadì˜ ë…ë¦½ëœ ìƒíƒœë¥¼ ë³µì‚¬í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì¦‰, ê° ê°ì˜ register fileê³¼ PCê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤. ì´ë“¤ ê°„ì˜ Memory ê³µìœ  ê°™ì€ ê²½ìš°ëŠ” ì´ì „ì— ë³´ì•˜ë˜ Virtual Memory ì •ë³´ë¥¼ ê³µìœ í•˜ì—¬ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤. ê·¸ë¦¬ê³  ë¬´ì—‡ë³´ë‹¤ ì¤‘ìš”í•œ ê²ƒì€ ì´ ì‹¤í–‰í•˜ëŠ” threadë¥¼ ë°”ê¾¸ëŠ” ì‹œê°„ì  ë¹„ìš©ì´ ì‘ì•„ì•¼ í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œ, processê°€ ì•„ë‹Œ threadë¥¼ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤. processë¥¼ ë°”ê¾¸ëŠ” ê²ƒë³´ë‹¤ëŠ” ë¹„ìš©ì´ í›¨ì”¬ ì ê¸° ë•Œë¬¸ì´ë‹¤.\n\nthreadë¥¼ ë³€ê²½ ì‹œì— ì–´ë–¤ ë°©ë²•ì„ íƒí•  ê²ƒì¸ê°€ ì—­ì‹œ ì¤‘ìš”í•œë°, ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ë¡ ì´ ì¡´ì¬í•œë‹¤.\n\n> **1. Fine Grained Multithreading**\n\nthreadì˜ ëª…ë ¹ì–´ë¥¼ round robine ë°©ì‹ì„ ì´ìš©í•˜ì—¬ ë§¤ë²ˆ ë°”ê¾¸ë©´ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ì‹ì´ë‹¤. ë³€ê²½í•œ thread ì—­ì‹œ stallì´ ëœ threadë¼ë©´, ê±´ë„ˆë›°ê³  ë‹¤ìŒ threadë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n\n- ì¥ì  : stall ê¸°ê°„ì´ ì§§ë˜ ê¸¸ë˜ ì´ë¡œ ì¸í•œ ì†ì‹¤ì„ ê°ì¶”ê³ , ê·¸ ë™ì•ˆ ë‹¤ë¥¸ threadë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤.\n- ë‹¨ì  : ì‹¤í–‰ ì¤€ë¹„ê°€ ëœ ìƒíƒœ(stallì´ ì•„ë‹Œ ìƒíƒœ)ì—ì„œë„ ë‹¤ìŒ ì°¨ë¡€ê°€ ì˜¬ ë•Œê¹Œì§€ ë°˜ë“œì‹œ ê¸°ë‹¤ë ¤ì•¼ í•˜ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ threadì— ëŒ€í•œ ì²˜ë¦¬ ì†ë„ê°€ dramaticí•˜ê²Œ ì¤„ì–´ë“ ë‹¤.\n\n> **2. Coarse Grained Multithreading**\n\ní•˜ë‚˜ì˜ threadì— ëŒ€í•œ Instructionë§Œ ì²˜ë¦¬í•˜ë‹¤ê°€ stallì´ ë°œìƒí–ˆì„ ë•Œì—ë§Œ threadë¥¼ ë³€ê²½í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n- ì¥ì  : í•˜ë‚˜ì˜ threadì— ëŒ€í•œ ì²˜ë¦¬ ì†ë„ì˜ ì†ì‹¤ì´ ì ê³ , switchingì„ ë¹¨ë¦¬ í•˜ëŠ” ê²ƒì— ëŒ€í•œ ë¶€ë‹´ì´ ì ë‹¤.\n- ë‹¨ì  : í•˜ë‚˜ì˜ threadì— ëŒ€í•œ Instructionë§Œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì—, threadë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì— ëŒ€í•œ ë¹„ìš©ì´ í¬ë‹¤. (long pipeline setup time) ë”°ë¼ì„œ, ì§§ì€ ê¸°ê°„ì˜ stallì¸ ê²½ìš°ì—ëŠ” í•´ë‹¹ stallì´ ëë‚˜ê¸¸ ê¸°ë‹¤ë¦°ë‹¤.\n\n> **3. Simultaneous Multithreading(SMT)**\n\nThread Levelì—ì„œ Parallelismê³¼ Instruction Levelì—ì„œì˜ Parallelismì„ ë™ì‹œì— ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì´ë‹¤. Multiple Instruction ì‹œìŠ¤í…œì—ì„œëŠ” ë” ë§ì€ functional unit(register, pc, etc)ì´ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ Multi Threadingì—ì„œë„ ì ì ˆíˆ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ‘ê·¼ë²•ì—ì„œ ë‚˜ì™”ë‹¤. ì—¬ê¸°ì„œëŠ” register renamingê³¼ dynamic schedulingì„ ì´ìš©í•˜ì—¬ multiple threadì—ì„œ ì—¬ëŸ¬ ê°œì˜ Instructionì„ ë¹ˆí‹ˆì—†ì´ ë°°ì¹˜í•  ìˆ˜ ìˆë‹¤. ì˜ì¡´ì„±ì€ dynamic schedulingì´ í•´ê²°í•˜ê³ , register renamingì„ í†µí•´ í•„ìš”ì— ë”°ë¼ ì—¬ë¶„ì˜ registerë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì¡Œë‹¤. ì´ë¥¼ í†µí•´ì„œ ìœ„ì˜ ë‘ ë°©ì‹ìœ¼ë¡œ í•  ìˆ˜ ì—†ì—ˆë˜, multi processorë¥¼ ìµœëŒ€í•œìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.\n\n![multi-threading](/images/multi-threading.png)\n\n## GPU(Graphic Processing Unit)\n\ngame ì‚°ì—… ë° ê·¸ë˜í”½ ë¶„ì•¼ì˜ í° ì„±ì¥ì— í˜ì—…ì–´ graphic ì²˜ë¦¬ì— ëŒ€í•œ processorì˜ ì„±ëŠ¥ í–¥ìƒì´ í•„ìš”í–ˆë‹¤. ì¦‰, ê¸°ì¡´ micro processorì™€ ê²‰ì•„ ë‹¤ìš©ë„ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ graphic ì—°ì‚°ë§Œì„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” processorë¥¼ ë¶„ë¦¬í•  í•„ìš”ê°€ ìƒê¸´ ê²ƒì´ë‹¤. ì´ê²ƒë§Œì„ ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ ê²ƒì´ GPUì´ë‹¤.\n\nGPUëŠ” ì• ì„œ ì„¤ëª…í•œ Multi Threading ê¸°ìˆ ì„ ì ê·¹ ë„ì…í–ˆê¸° ë•Œë¬¸ì— Memory ì ‘ê·¼ì— ë”°ë¥¸ Latencyê°€ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ëŸ° ë§Œí¼ ë°˜ëŒ€ë¡œ ë†’ì€ Bandwidthë¥¼ ê°€ì§„ ì €ì¥ ì¥ì¹˜ë¥¼ í•„ìš”ë¡œ í•œë‹¤.\n\ní›„ì—ëŠ” ì´ ì¥ì¹˜ê°€ ìˆ˜í–‰í•˜ëŠ” vector ì—°ì‚°ì´ ì—¬ëŸ¬ ìš©ë„ë¡œ ì‚¬ìš©ë¨ì— ë”°ë¼ ì´ë¥¼ ìœ„í•œ programming languageë“¤ë„ ë§Œë“¤ì–´ì¡Œë‹¤. ëŒ€í‘œì ì¸ ê²ƒì´ NVidiaê°€ Cë¥¼ í†µí•´ì„œ ë§Œë“  CUDAì´ë‹¤.\n\n## Reference\n\n- David A. Patterson, John L. Hennessy,Â Computer Organization and Design\n","slug":"architecture-parallel-processors","date":"2022-05-02 20:22","title":"6. Parallel Processors","category":"Computer Architecture","tags":["Computer Organization And Design","Multi Processors","Multi Threading","MTU"],"desc":"ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì€ ê°•í•œ performanceë¥¼ ë°œíœ˜í•˜ë©´ì„œë„, ê°€ìš©ì„±(availability, ëŠê¹€ ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì˜ ì •ë„)ê°€ ë†’ì€ computerë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ, ìš°ë¦¬ëŠ” ë‹¨ìˆœíˆ í•˜ë‚˜ì˜ processorë¥¼ ì •êµí•˜ê²Œ ë§Œë“¤ê¸°ë³´ë‹¤ëŠ” ë™ë“±í•œ ê¸°ëŠ¥ì„ í•˜ëŠ” ì—¬ëŸ¬ ê°œì˜ processorë¥¼ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” íš¨ìœ¨ì ì´ë¼ëŠ” ê²ƒì´ë¼ëŠ” ê²ƒì„ ì•Œì•„ëƒˆë‹¤. (ì´ë¥¼ softwareê°€ ì˜ í™œìš©í•  ìˆ˜ë§Œ ìˆë‹¤ë©´, ì„±ëŠ¥ì´ í¬ê²Œ í–¥ìƒë  ê²ƒì´ë‹¤.)- í•˜ë‚˜ì˜ ì¥ì¹˜ë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ë°©ì‹ë³´ë‹¤ ì ì€ ì—ë„ˆì§€ë¡œ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. (ë™ì‹œì— ì‹¤í–‰ì‹œí‚¤ê¸° ë•Œë¬¸ì— ë” ì§§ì€ ì‹œê°„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.)- nê°œì˜ processorì—ì„œ í•˜ë‚˜ê°€ ì‹¤íŒ¨í•˜ì—¬ë„ n-1ê°œëŠ” ì •ìƒ ì‘ë™í•˜ê¸° ë•Œë¬¸ì— ì „ì²´ ì‹œìŠ¤í…œì€ ë¬¸ì œ ì—†ì´ ë™ì‘í•œë‹¤. (Redundant, ì¶”ê°€ìì›ì„ í†µí•´ì„œ ê°€ìš©ì„±ì„ í–¥ìƒì‹œí‚´)ì´ì— ë”°ë¼ ìš°ë¦¬ëŠ” multi-processorë¥¼ ì‚¬ìš©í•œë‹¤.ì´ëŠ” multi-processorê°€ ì–´ë–»ê²Œ ì¡´ì¬í•˜ëŠëƒì— ë”°ë¼ì„œ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ë‚˜ëˆˆë‹¤.1. Multicore Microprocessor : í•˜ë‚˜ì˜ IC(ì§‘ì  íšŒë¡œ) ì¹©ì— ì—¬ëŸ¬ ê°œì˜ processor(core)ê°€ ì¡´ì¬í•œë‹¤.2. Multiple Processor : ICì¹©ì˜ ê°¯ìˆ˜ë¥¼ ëŠ˜ë¦°ë‹¤.3. Cluster System : Machine(Computer) ìì²´ì˜ ê°¯ìˆ˜ë¥¼ ëŠ˜ë¦°ë‹¤.ë”°ë¼ì„œ, ê°œì¸ PCì—ì„œëŠ” Multiple Multicore Microprocessorë¥¼ ì§€ì›í•˜ê³ , ìˆëŠ” ìƒí™©ì´ê³ , Datacenterì™€ ê°™ì€ í™˜ê²½ì—ì„œëŠ” ì´ëŸ¬í•œ Machineë“¤ì´ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•˜ëŠ” Cluster Systemì´ë¼ê³  ìƒê°í•˜ë©´ ë˜ê² ë‹¤.ë˜í•œ, ì´ìš©í•˜ëŠ” ë°©ì‹ì— ë”°ë¼ í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.1. Task Level Parallelism(=Process Level Parallelism) : ë™ì‹œì— ë…ë¦½ëœ ì—¬ëŸ¬ programì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ì‹2. Parallel Processing Program : ë™ì‹œì— ì—¬ëŸ¬ ê°œì˜ processorë¥¼ ì´ìš©í•˜ì—¬ í•˜ë‚˜ì˜ programì„ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ì‹","thumbnailSrc":"https://euidong.github.io/images/default.jpg"}],"Tech":[{"content":"\n## Intro\n\në¬¸ìì—´ ë°ì´í„°ì˜ ì „ì²˜ë¦¬ ì‹œì— ë§ì´ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ë¡œ ëŒ€ê²Œ ë¬¸ìì—´ì—ì„œ íŠ¹ì • patternì„ ì¶”ì¶œí•˜ê±°ë‚˜ ê²€ìƒ‰, í•„í„°ë§í•  ë•Œ ë§ì´ ì‚¬ìš©ë˜ì–´ì§„ë‹¤.\n\n## regex\n\nRegular Expressionì˜ ì•½ìë¡œ í•œêµ­ì–´ë¡œ **ì •ê·œí‘œí˜„ì‹**ì´ë¼ê³  ë¶€ë¥¸ë‹¤. ëŒ€ê²Œ ëª¨ë“  ì–¸ì–´ì—ì„œ ì´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì œê³µí•˜ê±°ë‚˜ ê¸°ë³¸ìœ¼ë¡œ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì€ ë¬¸ìì—´ì„ ë‹¤ë£¨ëŠ” ëŠ¥ë ¥ì¹˜ë¥¼ í•œ ì¸µ ë” ëŒì–´ì˜¬ë ¤ì¤€ë‹¤.\n\nìš°ì„  ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  characterë¥¼ ì´ìš©í•´ì„œ patternìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒë§Œìœ¼ë¡œëŠ” ë³µì¡í•œ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ”ë° ë¶€ì¡±í•˜ë‹¤. ë”°ë¼ì„œ, íŠ¹ë³„í•œ characterë¥¼ í™œìš©í•˜ì—¬ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n> **Special Character**  \n\nê¸°ë³¸ì ìœ¼ë¡œ íŠ¹ìˆ˜ ë¬¸ìëŠ” regexì—ì„œ í‘œí˜„í•  ë•Œ, \\ë¥¼ ì´ìš©í•´ì„œ êµ¬ë¶„í•´ì£¼ì–´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ë°”ë¡œ ì‚¬ìš©í•  ê²½ìš°ì—ëŠ” ëŒ€ê²Œ íŠ¹ë³„í•œ ì˜ë¯¸ë¥¼ ê°–ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ë°˜ëŒ€ë¡œ, ì¼ë°˜ ë¬¸ìì˜ ê²½ìš°ì—ëŠ” \\ì— ì˜ì–´ characterë¥¼ ë”í•˜ëŠ” ê²½ìš° íŠ¹ë³„í•œ ì˜ë¯¸ë¥¼ ê°–ëŠ” ê²½ìš°ê°€ ìˆë‹¤. í•˜ì§€ë§Œ, í•µì‹¬ì ì¸ ê¸°ëŠ¥ì€ ì•„ë˜ ë¬¸ìë“¤ì´ë‹¤.\n\n| Character | Mean | Example. pattern | Example. matched string |\n| :-- | :-- | :-- | :-- |\n| ? | ì´ì „ ë¬¸ìê°€ ìˆëŠ” ê²½ìš°ì™€ ì—†ëŠ” ê²½ìš°ë¥¼ ëª¨ë‘ í¬í•¨í•œë‹¤. | colou?r | <u>color</u> <u>colour</u> |\n| + | ì´ì „ ë¬¸ìê°€ í•˜ë‚˜ ì´ìƒ ìˆëŠ” ê²½ìš°ë¥¼ ëª¨ë‘ í¬í•¨í•œë‹¤. | o+h | <u>oh</u> <u>ooh</u> <u>ooooooooh</u> |\n| * | ì´ì „ ë¬¸ìê°€ 0ê°œ ì´ìƒ ì¡´ì¬í•˜ëŠ” ê²½ìš°ë¥¼ ëª¨ë‘ í¬í•¨í•œë‹¤. | oo*h | <u>oh</u> <u>ooh</u> <u>oooooooh</u> |\n| . | ëª¨ë“  ë¬¸ìë¼ëŠ” ì˜ë¯¸ë¥¼ ê°–ëŠ”ë‹¤. | beg.n | <u>begin</u> <u>begun</u> <u>begUn</u> |\n| ^ | ë¬¸ìì—´ì˜ ì‹œì‘ ë¶€ë¶„ì„ íŠ¹ì • ì§“ëŠ”ë‹¤. | ^a | <u>a</u>aaaa <u>a</u>lto |\n| $ | ë¬¸ìì—´ì˜ ë ë¶€ë¶„ì„ íŠ¹ì • ì§“ëŠ”ë‹¤.  | a$ | aaaa<u>a</u> se<u>a</u> |\n| \\| | \\|ë¥¼ ì¢Œìš°ë¡œ ìˆëŠ” ë‘ wordë¥¼ ëª¨ë‘ í¬í•¨í•œë‹¤. | hello\\|world | <u>hello</u> <u>world</u> <u>hello</u>,<u>world</u> |\n\n> **Square Bracket**\n\në˜í•œ, square bracket([])ì´ ê°€ì§€ëŠ” ê¸°ëŠ¥ì´ ë‹¤ì–‘í•˜ë‹¤. ì´ ë‚´ë¶€ì— ìˆëŠ” ëª¨ë“  ë¬¸ìë¥¼ í•˜ë‚˜ì˜ ë¬¸ìë¡œ ì·¨ê¸‰í•œë‹¤ëŠ” ê²ƒì´ íŠ¹ì§•ì´ë©°, ì•ì—ì„œ ì‚´í´ë³¸ \\|ì˜ í™•ì¥ ë²„ì „ì´ë¼ê³  ë³¼ ìˆ˜ ìˆê² ë‹¤. ë˜í•œ, ì´ ì•ˆì—ì„œëŠ” ì¼ë¶€ íŠ¹ìˆ˜ ê¸°í˜¸ê°€ ë˜ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°€ì§€ê²Œ ëœë‹¤.\n\n| Character | Mean | Example. pattern | Example. matched string |\n| :-- | :-- | :-- | :-- |\n| [] | []ë‚´ë¶€ì— ìˆëŠ” ëª¨ë“  ë¬¸ìë¥¼ í¬í•¨í•˜ëŠ” ê¸€ìê°€ í•˜ë‚˜ë¼ë„ ìˆëŠ”ì§€ë¥¼ í™•ì¸ | [wW]ood | <u>wood</u> <u>Wood</u> |\n| [a-z] | alphabetì˜ ëŒ€ì†Œë¬¸ìì™€ ìˆ«ìì—ë§Œ ì œí•œëœ ê¸°ëŠ¥ìœ¼ë¡œ, ê·¸ ì‚¬ì´ì˜ ëª¨ë“  ë¬¸ìë¥¼ í¬í•¨í•œë‹¤ëŠ” ì˜ë¯¸ë¥¼ ë‚´í¬í•œë‹¤. | [a-zA-Z0-9]+ | <u>1234</u> <u>hello</u> <u>Hel10</u> <u>Hell</u>ã…‡ <u>Happy</u> |\n| [^] | ^ ì´í›„ë¡œ ì˜¤ëŠ” ë¬¸ìë¥¼ í¬í•¨í•˜ì§€ ì•ŠëŠ”ì§€ í™•ì¸ | ^[^a-z] | <u>A</u> a <u>1</u>234 | \n\në” ë§ì€ ê¸°ëŠ¥ ì˜ˆë¥¼ ë“¤ë©´, Groupingì´ë¼ëŠ” ê¸°ëŠ¥ë„ ì¡´ì¬í•˜ì§€ë§Œ ìœ„ì˜ ë‚´ìš©ë§Œ ìˆ™ì§€í•´ë„ ë¬¸ìì—´ ì²˜ë¦¬ì˜ ê¸°ë³¸ì€ ê°€ëŠ¥í•˜ë‹¤.\n\nì‚¬ì‹¤ ì´ê²ƒë§Œìœ¼ë¡œëŠ” ë‚´ìš©ì´ ë¶€ì¡±í•  ìˆ˜ ìˆëŠ”ë° playground ë° regex ìš©ë²•ì— ëŒ€í•œ ì„¤ëª…ì´ ì˜ ì •ë¦¬ëœ ì‚¬ì´íŠ¸ë¥¼ í•´ë‹¹ ì‚¬ì´íŠ¸ë¥¼ ì°¸ê³ í•˜ê¸° ë°”ë€ë‹¤. [ğŸ”— Regexr](https://regexr.com/)\n\n## Reference\n- Thumbnail : Photo by [Mingwei Lim](https://unsplash.com/es/@cmzw?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/word-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- https://regexr.com/","slug":"regex","date":"2022-10-19 21:48","title":"REGEX","category":"Tech","tags":["String","TextProcessing"],"desc":"ë¬¸ìì—´ ë°ì´í„°ì˜ ì „ì²˜ë¦¬ ì‹œì— ë§ì´ ì‚¬ìš©ë˜ëŠ” ê¸°ìˆ ë¡œ ëŒ€ê²Œ ë¬¸ìì—´ì—ì„œ íŠ¹ì • patternì„ ì¶”ì¶œí•˜ê±°ë‚˜ ê²€ìƒ‰, í•„í„°ë§í•  ë•Œ ë§ì´ ì‚¬ìš©ë˜ì–´ì§„ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/regex-thumbnail.jpg"},{"content":"\n## Intro\n\ndockerì— ê¸°ë³¸ ì´ë…ì€ í•˜ë‚˜ì˜ containerì—ëŠ” í•˜ë‚˜ì˜ processë§Œ ë‘ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì´ì— ëŒ€í•´ì„œ ë°˜ëŒ€ë¥¼ í•˜ê³ , í•˜ë‚˜ì˜ containerì— ì—¬ëŸ¬ ê°œì˜ processë¥¼ ì‹¬ê³  ì´ë¥¼ ì´ìš©í•˜ê² ë‹¤ëŠ” ìƒê°ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ open sourceì´ë‹¤. ì‚¬ìš© ì˜ˆì‹œëŠ” main process ë‚´ë¶€ì— cronjobì„ ë¼ì›Œë„£ëŠ” ê²ƒê³¼ ê°™ì€ ê²½ìš°ê°€ ìˆì„ ê²ƒì´ë‹¤.\n\nì´ëŠ” ê²°ë¡ ì ìœ¼ë¡œ Dockerfileì˜ í™•ì¥ ë²„ì „ì´ë¼ê³  ë³¼ ìˆ˜ë„ ìˆì„ ê±° ê°™ë‹¤. ì¢€ ë” ë³µì¡í•œ ì‘ì—…ì„ ë” ì²´ê³„ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” í‹€ì„ ì œê³µí•œë‹¤. ì•„ì´ë””ì–´ ìì²´ëŠ” ì°¸ì‹ í•˜ë‚˜ ë‚¨ë°œí•˜ê²Œ ë˜ë©´, statelessí•˜ë˜ containerê°€ ì ì  statefulí•˜ê²Œ ë˜ë©´ì„œ ì‹œìŠ¤í…œì´ ì˜¤ì—¼ë  ìˆ˜ë„ ìˆìŒì„ ìœ ì˜í•˜ì.\n\nì•„ë˜ ë‚´ìš©ì€ í•´ë‹¹ opensourceì˜ READMEë¥¼ ì§ì ‘ ë²ˆì—­í•œ ë‚´ìš©ì´ë‹ˆ ì˜ì—­ë„ ë§ì´ í¬í•¨ëœë‹¤. ì£¼ì˜í•´ì„œ ì½ë„ë¡ í•˜ì. ë˜í•œ, ëª¨ë¥´ëŠ” ìš©ì–´ëŠ” ì•„ë˜ Terminologyë¥¼ í™•ì¸í•´ë³´ë„ë¡ í•˜ì.\n\n## Goals\n\n- ì´ë¯¸ì§€ ì œì‘ìê°€ ì‰½ê²Œ s6(s6ëŠ” processë¥¼ ê°ë…, ê´€ë¦¬, logging, ì´ˆê¸°í™”í•˜ëŠ” ê¸°ëŠ¥ë“¤ì˜ ì§‘í•©)ë¥¼ í™œìš©í•  ìˆ˜ ìˆë„ë¡ ì§€ì›\n- ë‹¤ë¥¸ docker imageë“¤ì²˜ëŸ¼ ë™ì¼í•˜ê²Œ ì‘ë™\n\n## Features\n\n- cont-init.d â†’ì´ˆê¸°í™” ì‘ì—…ê³¼ ê°™ì€ end-user ì‹¤í–‰ ì‘ì—…ì„ í—ˆìš©í•˜ëŠ” ê°„ë‹¨í•œ ì´ˆê¸° ì‘ì—…\n- cont-finish.d â†’ ë§ˆë¬´ë¦¬ ì‘ì—…\n- fix-attrs.d â†’ ownership ê¶Œí•œì„ ìˆ˜ì •\n- s6-overlayëŠ” ì ë‹¹í•œ PID 1 ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.\n  - containerì— ê±¸ë¦¬ëŠ” zombie processë¥¼ ê°€ì§€ì§€ ì•Šê³ , ì ë‹¹í•œ ì ˆì°¨ì— ë”°ë¼ ì œê±°ë  ê²ƒì´ë‹¤.\n- **ì—¬ëŸ¬ ê°œì˜ processë¥¼ í•˜ë‚˜ì˜ containerì—ì„œ ì‘ë™ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.**\n- **\"The Docker Way\"(ì•„ë˜ì—ì„œ ì„¤ëª…)ì— ë”°ë¼ ì‘ë™ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.**\n- ëª¨ë“  ê¸°ë°˜ ì´ë¯¸ì§€(Ubuntu, CentOS, Fedora, ì‹¬ì§€ì–´ëŠ” Busybox)ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n- ì´ë¯¸ì§€ì˜ layerì˜ ìˆ˜ë¥¼ ì‘ê²Œ ìœ ì§€í•˜ê¸° ìœ„í•˜ì—¬ í•˜ë‚˜ì˜ tar, gz íŒŒì¼ë¡œ ë°°í¬í•œë‹¤.\n- s6Â ì™€Â s6-portable-utils ëŠ” ì†ì‰½ê³  ì‘ì„±ì´ ì‰¬ìš´ ìœ í‹¸ë¦¬í‹° ì „ì²´ë¥¼ í¬í•¨í•œë‹¤.\n- ë¹„ë°€ë¦¬ì— s6-log ë¥¼ ì‚¬ìš©í•˜ëŠ” logutil-serviceëŠ” ì˜¤ë˜ëœ ë¡œê·¸ì˜ ìˆœí™˜ì„ ìˆ˜í–‰í•œë‹¤.\n- íŠ¹ì • ìœ ì €ë¡œ ì „ì²´ process treeë¥¼ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•˜ì—¬, Dockerì˜ USER ì§€ì¹¨ì— ëŒ€í•˜ì—¬ ì§€ì›í•œë‹¤. ëª¨ë“  featureì— ëŒ€í•˜ì—¬ ì§€ì›í•˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤. ìì„¸í•œ ì‚¬í•­ì€ ì—¬ê¸°ì„œ í™•ì¸ê°€ëŠ¥í•˜ë‹¤.([ğŸ”— notes](https://github.com/just-containers/s6-overlay#notes))\n\n## The Docker Way\n\nìì£¼ ê°•ì¡°ë˜ì–´ì§€ëŠ” Dockerì˜ ì‹ ë…ì€ \"í•˜ë‚˜ì˜ containerì— í•˜ë‚˜ì˜ processë§Œ ë‘ì–´ì•¼ í•œë‹¤.\"ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜, S6 overlay íŒ€ì€ ì´ì— ëŒ€í•˜ì—¬ ë™ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤. í•˜ë‚˜ì˜ containerì— ì—¬ëŸ¬ processë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì— ëŒ€í•œ ë³¸ì§ˆì  ë¬¸ì œëŠ” ì—†ë‹¤. ë” ì¶”ìƒì ìœ¼ë¡œ \"í•˜ë‚˜ì˜ containerì— í•˜ë‚˜ì˜ thingë§Œ ë‘ì–´ì•¼ í•œë‹¤.\"ëŠ” ê²ƒì´ í•´ë‹¹ í”„ë¡œì íŠ¸ì˜ ëª©ì ì´ë‹¤. â†’ í•˜ë‚˜ì˜ containerëŠ” í•˜ë‚˜ì˜ ê²ƒë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¡œì¨, chatting service ë˜ëŠ” gitlabì˜ ë™ì‘ì„ ë“¤ ìˆ˜ ìˆë‹¤. ì´ê²ƒë“¤ì€ ì—¬ëŸ¬ ê°œì˜ processë¥¼ í¬í•¨í•˜ì§€ë§Œ, í•˜ë‚˜ì˜ thingì´ë‹¤. ë”°ë¼ì„œ, ì˜¬ë°”ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nì´ë¯¸ì§€ ì œì‘ìê°€ process supervisorë¥¼ í”¼í•˜ëŠ” ì´ìœ ëŠ” í•˜ë‚˜ì˜ process supervisorê°€ ì‹¤íŒ¨í•œ ì„œë¹„ìŠ¤ë¥¼ ë‹¤ì‹œ ì‹œì‘í•´ì•¼ í•œë‹¤ê³  ìƒê°í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ë¡œ ì¸í•´ì„œ ê²°êµ­ Docker containerëŠ” ì ˆëŒ€ ì£½ì§€ ì•Šì„ ê²ƒì´ë‹¤. ì´ëŸ¬í•œ containerê°€ ì£½ì§€ ì•ŠëŠ” í˜„ìƒì€ docker ìƒíƒœê³„ë¥¼ íŒŒê´´í•  ê²ƒì´ë‹¤. ëŒ€ë¶€ë¶„ì˜ ì´ë¯¸ì§€ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ, ì¤‘ë‹¨ì„ ìš”ì²­í•˜ëŠ” í•˜ë‚˜ì˜ processë¥¼ ë™ì‘ì‹œí‚¨ë‹¤. ì—ëŸ¬ì— ëŒ€í•´ì„œ ì¢…ë£Œë¥¼ ìˆ˜í–‰í•¨ìœ¼ë¡œì¨, ì‹œìŠ¤í…œ ê´€ë¦¬ìëŠ” ì‹¤íŒ¨ë¥¼ ì›í•˜ëŠ”ëŒ€ë¡œ ë‹¤ë£¨ëŠ” ê²ƒì„ í—ˆë½ë°›ëŠ”ë‹¤. ë§Œì•½ ì´ë¯¸ì§€ë¥¼ ì ˆëŒ€ ì¢…ë£Œì‹œí‚¤ì§€ ì•ŠëŠ”ë‹¤ë©´, ì—ëŸ¬ íšŒë³µê³¼ ì‹¤íŒ¨ ì•Œë¦¼ì— ëŒ€í•œ ëŒ€ì•ˆì±…ì´ í•„ìš”í•˜ë‹¤. ì¦‰, containerë¥¼ ì‹¤íŒ¨ì—ë„, ì¢…ë£Œí•˜ì§€ ì•ŠëŠ” ê²ƒì€ ë§¤ìš° ìœ„í—˜í•˜ë‹¤.\n\nS6 overlay íŒ€ì˜ ì •ì±…ì€ ë§Œì•½ thingì´ ì‹¤íŒ¨í•œë‹¤ë©´, ê·¸ë•Œ containerê°€ ë°˜ë“œì‹œ ì‹¤íŒ¨í–ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ì–´ë–¤ processë“¤ì„ ë‹¤ì‹œ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆì„ì§€ì™€ ì–´ë–¤ containerë¥¼ ëŒì–´ë‚´ë¦´ì§€ë¥¼ ê²°ì •í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, cron ì´ë‚˜ syslogì—ì„œ ì‹¤íŒ¨ê°€ ë°œìƒí–ˆì„ ë•Œ, containerëŠ” ë¶€ì •ì  ì˜í–¥ ì—†ì´ ì´ê²ƒì„ ì¬ì‹œì‘í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•  ê²ƒì´ë‹¤. ê·¸ëŸ¬ë‚˜ ë§Œì•½, ejabberd ê°€ ì‹¤íŒ¨í–ˆì„ ê²½ìš°ì—ëŠ” containerëŠ” ì¢…ë£Œë  ê²ƒì´ê³ , ì´ë¥¼ í†µí•´ì„œ ì‹œìŠ¤í…œ ê´€ë¦¬ìëŠ” ì´ì— ëŒ€í•œ ëŒ€ì±…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\në”°ë¼ì„œ, S6 teamì—ì„œ ìƒê°í•˜ëŠ” \"The Docker Way\"ë€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- ContainerëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ thingë§Œ ìˆ˜í–‰í•´ì•¼ í•œë‹¤.\n- ContainerëŠ” thingì´ ë©ˆì¶˜ë‹¤ë©´, ë°˜ë“œì‹œ ë©ˆì¶°ì•¼ í•œë‹¤.\n\nê·¸ë¦¬ê³ , ìš°ë¦¬ì˜ ì´ˆê¸° ì‹œìŠ¤í…œì€ ì´ë¥¼ ìœ„í•´ì„œ ì„¤ê³„ë˜ì—ˆë‹¤. ì´ë¯¸ì§€ëŠ” ì—¬ì „íˆ ë‹¤ë¥¸ Docker ì´ë¯¸ì§€ì²˜ëŸ¼ ë™ì‘í•  ê²ƒì´ê³ , ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë¯¸ì§€ë“¤ì˜ ìƒíƒœê³„ì™€ í•¨ê»˜ ì–´ìš°ëŸ¬ì§ˆ ê²ƒì´ë‹¤.\n\n---\n\n## Init stages\n\nS6 overlay initì€ containerí™”ëœ í™˜ê²½ì— ì ë‹¹í•˜ê²Œ ë™ì‘í•˜ê¸° ìœ„í•´ ì ë‹¹í•˜ê²Œ ë§ì¶¤í™”í•œ í”„ë¡œê·¸ë¨ì´ë‹¤. í•´ë‹¹ sectionì—ì„œëŠ” ì–´ë–»ê²Œ stageë“¤ì´ ë™ì‘í•˜ëŠ”ì§€ ê°„ë‹¨íˆ ì„¤ëª…í•œë‹¤. ë§Œì•½ ë” ìì„¸í•œ ì‚¬í•­ì´ ê¶ê¸ˆí•˜ë‹¤ë©´, ë‹¤ìŒ articleì„ ì½ê¸°ë¥¼ ì¶”ì²œí•œë‹¤. ([How to run s6-svscan as process 1](http://skarnet.org/software/s6/s6-svscan-1.html))\n\n- **stage 1 :** í•´ë‹¹ ë‹¨ê³„ì˜ ëª©ì ì€ ë‘ ë²ˆì§¸ ë‹¨ê³„ì— ì§„ì…í•˜ê¸° ìœ„í•´ì„œ ì´ë¯¸ì§€ë¥¼ ì¤€ë¹„í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¤ë¥¸ ê²ƒë“¤ ì‚¬ì´ì—ì„œ, ì´ê²ƒì€ container í™˜ê²½ë³€ìˆ˜ë“¤ì„ ì¤€ë¹„í•˜ëŠ” ê²ƒê³¼ s6 ê°€ íš¨ê³¼ì ìœ¼ë¡œ ì‹œì‘ë  ë•Œê¹Œì§€ ë‘ ë²ˆì§¸ stageì˜ ì‹œì‘ì„ ë§‰ëŠ” ê²ƒì— ëŒ€í•œ ì±…ì„ì´ ìˆë‹¤.\n- **stage 2 :** end-userê°€ ì œê³µí•œ ëŒ€ë¶€ë¶„ì˜ íŒŒì¼ë“¤ì´ ìˆ˜í–‰ë˜ì–´ì§€ëŠ” ë‹¨ê³„ì´ë‹¤.\n  1. /etc/fix-attrs.dë¥¼ ì‚¬ìš©í•˜ì—¬, ì†Œìœ ê¶Œê³¼ ê¶Œí•œì„ ê³ ì •í•œë‹¤.\n  2. /etc/cont-init.dì— ê¸°ìˆ ëœ ì´ˆê¸°í™” scriptë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n  3. /etc/services.dì— ì íŒ user serviceë“¤ì„ s6ê°€ supervisionì„ ë™ì‘ ì¤‘ì¸ í´ë”ì— ë³µì‚¬í•˜ê³ , signalì„ ë³´ëƒ„ìœ¼ë¡œì¨ ì ì ˆí•˜ê²Œ supervisingì„ ì‹œì‘í•  ìˆ˜ ìˆë‹¤.\n- **stage 3 :** í•´ë‹¹ ë‹¨ê³„ëŠ” ì¢…ë£Œ ë‹¨ê³„ì´ë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë™ì‘ì„ ìˆ˜í–‰í•œë‹¤.\n  1. TERM signalì„ ëª¨ë“  ê´€ë¦¬ ì¤‘ì¸ serviceì—ê²Œ ì „ì†¡í•œë‹¤.\n  2. /etc/cont-init.dì— í¬í•¨ëœ ì¢…ë£Œ scriptsë¥¼ ìˆ˜í–‰í•œë‹¤. ì´ëŠ” ì„œë¹„ìŠ¤ê°€ ì—¬ì „íˆ ì¢…ë£Œë˜ì–´ì§€ëŠ” ì¤‘ì—ë„ ì¢…ë£Œë˜ì–´ì§ˆ ìˆ˜ ìˆë‹¤.\n  3. ëª¨ë“  serviceê°€ ì¢…ë£Œë˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤.(S6\\_SERVICES\\_GRACETIME millisecondsë¥¼ ë„˜ì§€ ì•ŠëŠ” ì„ ì—ì„œ - default 3000)\n  4. ëª¨ë“  processì—ê²Œ TERM signalì„ ë³´ë‚¸ë‹¤.\n  5. S6\\_KILL\\_GRACETIME milliseconds(default 3000)ë§Œí¼ sleepì„ ìˆ˜í–‰í•œë‹¤.\n  6. ëª¨ë“  processì—ê²Œ KILL signalì„ ì „ì†¡í•œë‹¤.\n\n## Usage\n\ní•´ë‹¹ projectëŠ” í‘œì¤€ tar, gzìœ¼ë¡œ ë°°í¬ë˜ì–´ì¡Œë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” imageì˜ rootì— ì´ë¥¼ ì¶”ì¶œí•˜ê³ , ENTRYPOINTì— /init ì„ ê¸°ì…í•´ì£¼ë©´ ëœë‹¤. (ë§Œì•½, ê¸°ì¡´ ENTRYPOINTê°€ ìˆë‹¤ë©´, ì´ë¥¼ cont-initìœ¼ë¡œ ì˜®ê²¨ì£¼ì–´ì•¼ í•  ê²ƒì´ë‹¤. ë˜ëŠ” S6\\_CMD\\_ARG0ë¥¼ ì´ìš©í•˜ë©´ ëœë‹¤.)\n\nì—¬ê¸°ì„œ, í•´ë‹¹ projectëŠ” wget ë˜ëŠ” curlì„ ìˆ˜í–‰í•  ë•Œ, Dockerì˜ RUNë³´ë‹¤ ADD ì§€ì‹œì–´ë¥¼ ì‚¬ìš©í•  ê²ƒì„ ì¶”ì²œí•œë‹¤. (ì™œëƒí•˜ë©´, ì´ë¥¼ ì´ìš©í•˜ë©´, Dockerê°€ https URLì„ ë‹¤ë£° ìˆ˜ ìˆë‹¤.)\n\nì—¬ê¸°ì„œë¶€í„°, ì„œë¹„ìŠ¤ë¥¼ ì‘ì„±í•  ë•Œì—ëŠ” ë‘ ìŒì˜ ì„ íƒì§€ë¥¼ ê°–ê²Œ ëœë‹¤.\n\n> **1. imageì˜ CMD ë¥¼ ì´ìš©í•˜ì—¬ service/programì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.**\n\n```Dockerfile\nFROM busybox\nADD https://github.com/just-containers/s6-overlay/releases/download/v1.21.8.0/s6-overlay-amd64.tar.gz /tmp/\nRUN gunzip -c /tmp/s6-overlay-amd64.tar.gz | tar -xf - -C /\nENTRYPOINT [\"/init\"]\n```\n\n```bash\n# run\ndocker-host $ docker build -t s6demo .\ndocker-host $ docker run -ti s6demo /bin/sh\n[fix-attrs.d] applying owners & permissions fixes...\n[fix-attrs.d] 00-runscripts: applying... \n[fix-attrs.d] 00-runscripts: exited 0.\n[fix-attrs.d] done.\n[cont-init.d] executing container initialization scripts...\n[cont-init.d] done.\n[services.d] starting services\n[services.d] done.\n\n# ps\ndocker-host $ docker ps\nPID   USER     COMMAND\n    1 root     s6-svscan -t0 /var/run/s6/services\n    21 root     foreground  if   /etc/s6/init/init-stage2-redirfd   foreground    if     s6-echo     [fix-attrs.d] applying owners & permissions fixes.\n    22 root     s6-supervise s6-fdholderd\n    23 root     s6-supervise s6-svscan-log\n    24 nobody   s6-log -bp -- t /var/log/s6-uncaught-logs\n    28 root     foreground  s6-setsid  -gq  --  with-contenv  /bin/sh  import -u ? if  s6-echo  --  /bin/sh exited ${?}  foreground  s6-svscanctl  -t\n    73 root     /bin/sh\n    76 root     ps\n\n# exit\n/bin/sh exited 0\ndocker-host $\n```\n\n> **2. s6-overlayë¥¼ í™œìš©í•˜ëŠ” ì‰¬ìš´ ë°©ë²•ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.**\n\nDockerfileì´ buildí•  ë•Œ, ì‘ì„±í•˜ê±°ë‚˜ runtimeì— command lineìœ¼ë¡œ ì…ë ¥ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ê²ƒì€ s6 supervisorì— ì˜í•´ì„œ ì‹¤í–‰ë˜ì–´ì§ˆ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì‹¤íŒ¨ë‚˜ ì¢…ë£Œ ì‹œì— í•´ë‹¹ containerëŠ” ì¢…ë£Œë˜ì–´ì§ˆ ê²ƒì´ë‹¤. interactive programë„ s6 supervisor í•˜ìœ„ì—ì„œë„ ë™ì‘ì‹œí‚¬ ìˆ˜ ìˆë‹¤. service scriptë¥¼ ì‘ì„±í•˜ì—¬ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n\n`/etc/services.d/myapp/run`\n\n```shell\n  !/usr/bin/execlineb -P\n  nginx -g \"daemon off;\"\n```\n\nê´€ë¦¬ë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œì‘í•˜ëŠ” ê²ƒì€ ë‹¨ì§€ /etc/services.dì— service directoryë¥¼ ë§Œë“¤ê³ , ì¥ê¸°ê°„ ì¡´ì¬í•  process ì‹¤í–‰ì— ëŒ€í•œ ë‚´ìš©ì„ ì ì€ run íŒŒì¼ì„ ì´ ì•ˆì— ë§Œë“œëŠ” ê²ƒë³´ë‹¤ ë” ì‰¬ì›Œì§ˆ ìˆ˜ ì—†ë‹¤. ì´ê±°ë©´ ë‹¤ë‹¤. ë§Œì•½ s6 supervisionì— ëŒ€í•œ ë” ë§ì€ ë‚´ìš©ì„ ì•Œê¸°ë¥¼ ì›í•œë‹¤ë©´ ë‹¤ìŒ ë¬¸ì„œë¥¼ ì‚´í´ë³´ì•„ë¼. (\\[servicedir\\](<[http://skarnet.org/software/s6/servicedir.html](http://skarnet.org/software/s6/servicedir.html)\\>))\n\n## ì†Œìœ ê¶Œ ë° ê¶Œí•œ ê³ ì •\n\në•Œë•Œë¡œ, ì§„í–‰ ì „ì— ì†Œìœ ê¶Œê³¼ ê¶Œí•œì„ ê³ ì •í•˜ëŠ” ê²ƒì´ í•„ìš”í•  ë•Œê°€ ìˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ container ë‚´ë¶€ì— host folderì™€ mountëœ folderê°€ ìˆì„ ë•Œì´ë‹¤. overlayëŠ” /etc/fix-attrs.dì˜ íŒŒì¼ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¥¼ í—¤ì³ë‚˜ê°ˆ ë°©ë²•ì„ ì œê³µí•œë‹¤.\n\n- Format\n  - path : File ë˜ëŠ” Directoryì˜ ê²½ë¡œ\n  - recurse : folderê°€ ë°œê²¬ë˜ì—ˆë‹¤ë©´, í•´ë‹¹ folder ë‚´ë¶€ì˜ ë‚´ìš©ë„ í¬í•¨í• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. (true or false)\n  - account : targetì˜ accountì´ë‹¤. accountë¥¼ ì°¾ì„ ìˆ˜ ì—†ì„ ê²½ìš° defaultë¡œ ì˜ˆë¹„ uid:gid(user id, group id)ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì˜ˆë¥¼ë“¤ì–´, nobody, 32768:32768 ì´ë¼ê³  ì…ë ¥í•  ê²½ìš°, nobody accountë¥¼ ì²«ë²ˆì§¸ë¡œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì‹œë„ë¥¼ í•˜ê³ , ì˜ˆë¹„ë¡œ uidê°€ 32768ì¸ ëŒ€ìƒì„ ì˜ˆë¹„ë¡œ ì°¾ëŠ”ë‹¤. ì˜ˆë¥¼ë“¤ì–´, daemon ì˜ ê³„ì •ì´ UID=2ì´ê³ , GID=2ì¸ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ account ë„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n    - daemon: UID=2 GID=2\n    - daemon,3:4: UID=2 GID=2\n    - 2:2,3:4: UID=2 GID=2\n    - daemon:11111,3:4: UID=2 GID=11111\n    - 11111:daemon,3:4: UID=11111 GID=2\n    - daemon:daemon,3:4: UID=2 GID=2\n    - daemon:unexisting,3:4: UID=2 GID=4\n    - unexisting:daemon,3:4: UID=3 GID=2\n    - 11111:11111,3:4: UID=11111 GID=11111\n  - fmode : target fileì˜ mode â†’ example 0644\n  - dmode : target directoryì˜ mode â†’ example 0755\n- path recurse account fmode dmode\n\n> **Example**\n\n`/etc/fix-attrs.d/01-mysql-data-dir`\n\n```shell\n/var/lib/mysql true mysql 0600 0700\n```\n\n`/etc/fix-attrs.d/02-mysql-log-dirs`\n\n```shell\n/var/log/mysql-error-logs true nobody,32768:32768 0644 2700\n/var/log/mysql-general-logs true nobody,32768:32768 0644 2700\n/var/log/mysql-slow-query-logs true nobody,32768:32768 0644 2700\n```\n\n## ì´ˆê¸°í™” ì‘ì—… ì‹¤í–‰í•˜ê¸°\n\n`/etc/fix-attrs.d`ì— ë”°ë¼ ì†ì„±ì„ ê³ ì •í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•œ í›„, `/etc/services.d`ì— ì íŒ userì—ê²Œ ì œê³µë˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì‹œì‘í•˜ê¸° ì „ì—, overlayëŠ” /etc/cont-init.d ì—ì„œ ë°œê²¬ëœ ëª¨ë“  scriptë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n\n`/etc/cont-init.d/02-confd-onetime`\n\n```shell\n#!/usr/bin/execlineb -P\n\nwith-contenv\ns6-envuidgid nginx\nmultisubstitute\n{\n  import -u -D0 UID\n  import -u -D0 GID\n  import -u CONFD_PREFIX\n  define CONFD_CHECK_CMD \"/usr/sbin/nginx -t -c {{ .src }}\"\n}\nconfd --onetime --prefix=\"${CONFD_PREFIX}\" --tmpl-uid=\"${UID}\" --tmpl-gid=\"${GID}\" --tmpl-src=\"/etc/nginx/nginx.conf.tmpl\" --tmpl-dest=\"/etc/nginx/nginx.conf\" --tmpl-check-cmd=\"${CONFD_CHECK_CMD}\" etcd\n```\n\n## ë¶€ê°€ì ì¸ ì¢…ë£Œ ì‘ì—… ì‘ì„±í•˜ê¸°\n\nê¸°ë³¸ì ìœ¼ë¡œ, /etc/services.d ì— ì˜í•´ ìƒì„±ëœ ì„œë¹„ìŠ¤ëŠ” ìë™ì ìœ¼ë¡œ ì¬ì‹œì‘ëœë‹¤. ë§Œì•½, ì„œë¹„ìŠ¤ê°€ containerë¥¼ down ì‹œì¼œì•¼í•œë‹¤ë©´, finish scriptë¥¼ í†µí•´ì„œ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n`/etc/services.d/myapp/finish`\n\n```shell\n#!/usr/bin/execlineb -S0\n\ns6-svscanctl -t /var/run/s6/services\n```\n\në” ë°œì „ëœ ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.\n\n`/etc/services.d/myapp/finish`\n\n```shell\n#!/usr/bin/execlineb -S1\nif { s6-test ${1} -ne 0 }\nif { s6-test ${1} -ne 256 }\n\ns6-svscanctl -t /var/run/s6/services\n```\n\n## Logging\n\nS6 overlayëŠ” ì¦‰ì‹œ \\[s6-log\\](<[http://skarnet.org/software/s6/s6-log.html](http://skarnet.org/software/s6/s6-log.html)\\>)ë¥¼ í†µí•œ logging mechnismìœ¼ë¡œ ì‰½ê²Œ loggingì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•œë‹¤.\n\në˜í•œ, loggingì„ í•˜ë‚˜ì˜ ë°”ì´ë„ˆë¦¬ í˜¸ì¶œë¡œ ë§Œë“¤ ìˆ˜ ìˆë„ë¡ logutil-serviceë¼ëŠ” ë„ì›€ ì¥ì¹˜ë¥¼ ì œê³µí•œë‹¤.\n\nì´ëŠ” ë‹¤ìŒ ìˆœì„œì— ë”°ë¼ ì§„í–‰ëœë‹¤.\n\n- s6-logê°€ ì–´ë–»ê²Œ S6\\_LOGGING\\_SCRIPTì— ì íŒ logging scriptë¥¼ ì½ì„ì§€ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.\n- nobody userì˜ root ê¶Œí•œì„ ì‚­ì œí•œë‹¤.(ë§Œì•½, ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ 32768:32768 ì—ê²Œ ë„˜ê²¨ì§‘ë‹ˆë‹¤.)\n- ëª¨ë“  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì§€ì›ë‹ˆë‹¤.\n- s6-logë¥¼ ì‹¤í–‰í•¨ìœ¼ë¡œì¨ loggingì„ ì‹œì‘í•©ë‹ˆë‹¤.\n\n> **ì£¼ì˜ì‚¬í•­**\n\n- ê¶Œí•œì´ ìë™ì ìœ¼ë¡œ ì‚­ì œëœ ì´í›„ë¡œ, s6-setuidgidë¡œ userë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ë‹¤.\n- ë‘˜ ì¤‘ í•˜ë‚˜ì˜ ë‚´ìš©ì„ log folderì—ì„œ ë³´ì¥í•´ì•¼ í•œë‹¤.\n  1. ì¡´ì¬í•œë‹¤ë©´, nobody userì— ì˜í•´ ì‘ì„±ì´ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.\n  2. ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ìƒìœ„ í´ë”ê°€ nobody userì— ì˜í•´ ì‘ì„±ì´ ê°€ëŠ¥í•´ì•¼ í•œë‹¤.\n\nlog foderëŠ” cont-init.d scriptì—ì„œ ë˜ëŠ” run script ì•ˆì—ì„œ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Example\n\n> **1. cont-inid.dë¥¼ í™œìš©í•œ ë°©ë²•**\n\n`/etc/cont-init.d/myapp-logfolder`\n\n```shell\n#!/bin/sh\nmkdir -p /var/log/myapp\nchown nobody:nogroup /var/log/myapp\n```\n\n> **2.  run scriptë¥¼ í™œìš©í•œ ë°©ë²•**\n\n`/etc/services.d/myapp/log/run`\n\n```shell\n#!/bin/sh\n# input stdinì„ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” logging\nexec logutil-service /var/log/myapp\n\n#!/bin/sh\n# fifoì— ë”°ë¥¸ logë¥¼ ìŒ“ê¸°ë¥¼ ì›í•œë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜í–‰í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\nexec logutil-service -f /var/run/myfifo /var/log/myapp\n```\n\n## ê¶Œí•œ ì‚­ì œ\n\nì„œë¹„ìŠ¤ ì‹¤í–‰ì´ ë‹¤ê°€ì˜¤ë©´, ì‹¤í–‰ ì „ì— ê¶Œí•œì„ ë¶€ì—¬í•˜ëŠ” ê²ƒì€ ì„œë¹„ìŠ¤ì´ê±´ logging ì„œë¹„ìŠ¤ì´ê±´ ë§¤ìš° ì¤‘ìš”í•œ ì‘ì—…ì´ë‹¤. s6ëŠ” ì´ë¯¸ ì´ëŸ¬í•œ ì‘ì—…ì„ ìœ„í•œ ê¸°ëŠ¥ì„ í¬í•¨í•˜ê³  ìˆë‹¤.\n\n> **InÂ execline**\n\n```shell\n#!/usr/bin/execlineb -P\ns6-setuidgid daemon\nmyservice\n```\n\n> **InÂ sh**\n\n```shell\n#!/bin/sh\nexec s6-setuidgid daemon myservice\n```\n\në§Œì•½ ì´ëŸ¬í•œ ê¸°ëŠ¥ì— ëŒ€í•˜ì—¬ ë” ì•Œê³  ì‹¶ë‹¤ë©´, ë‹¤ìŒ ë¬¸ì„œë“¤ì„ ì‚´í´ ë³´ì•„ë¼. [s6-setuidgid](http://skarnet.org/software/s6/s6-setuidgid.html),Â  [s6-envuidgid](http://skarnet.org/software/s6/s6-envuidgid.html), [s6-applyuidgid](http://skarnet.org/software/s6/s6-applyuidgid.html)\n\n## Container í™˜ê²½\n\në§Œì•½ container í™˜ê²½ì„ ì œê³µí•˜ê¸° ìœ„í•´ì„œ ì§ì ‘ ë§Œë“  scriptë¥¼ ì›í•œë‹¤ë©´, with-contenvë¥¼ í†µí•´ì„œ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> **/etc/cont-init.d/01-contenv-example**\n\n```shell\n#!/usr/bin/with-contenv sh\necho $MYENV\n```\n\n## Read-Only Root íŒŒì¼ ì‹œìŠ¤í…œ\n\nìµœê·¼ dokcerì˜ ë²„ì „ì—ì„œ read-only íŒŒì¼ ì‹œìŠ¤í…œìœ¼ë¡œ containerë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì„ í—ˆìš©í•˜ì˜€ë‹¤. 2ë‹¨ê³„ ê³¼ì •ì—ì„œ, overlayëŠ” ì‚¬ìš©ìê°€ ì œê³µí•˜ëŠ” cont-init.d ì˜ ê¶Œí•œì„ ë³€ê²½í•˜ëŠ” ë¶€ê°€ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. ë§Œì•½, root íŒŒì¼ ì‹œìŠ¤í…œì´ read-onlyë¼ë©´, S6\\_READ\\_ONLY\\_ROOT=1 ë¼ëŠ” ì„¤ì •ì„ í•´ì£¼ì–´ stage 2ì—ì„œ ì´ë¥¼ ì•Œ ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ permissionì„ ë³€ê²½í•˜ê¸° ì´ì „ì—, /var/run/s6 ì— ì‚¬ìš©ìì˜ íŒŒì¼ì„ ë³µì‚¬í•˜ê²Œ ëœë‹¤.\n\nì´ëŠ” /var ê°€ ìˆ˜ì •ì´ ê°€ëŠ¥í•œ ê¶Œí•œì„ ê°–ê²Œëœë‹¤ëŠ” ê²ƒì´ê³ , ì´ëŠ” tmpfs ë¼ëŠ” íŒŒì¼ì‹œìŠ¤í…œì— ì˜í•´ì„œ ê°€ëŠ¥í•˜ë‹¤.\n\nâ†’ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•˜ë©´, ìˆ˜í–‰ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ docker run -e S6_READ_ONLY_ROOT=1 --read-only --tmpfs /var:rw,exec [image name]\n```\n\n> **ì£¼ì˜ì‚¬í•­**\n\në§Œì•½ S6\\_READ\\_ONLY\\_ROOT=1 ë¥¼ ì‚¬ìš©í•  ë•Œ, fix-attrs.d,Â cont-init.d,Â cont-finish.d, services.dì˜ symbol linkë¥¼ ìœ ì˜í•´ì•¼ í•œë‹¤. s6ì˜ ì œí•œì‚¬í•­ ë•Œë¬¸ì—, ì• ì„  ë””ë ‰í† ë¦¬ê°€ /var/run/s6ì— ë³µì‚¬ë˜ë©° symbol linkê°€ ì‹¤í–‰ë˜ì–´ ì˜ˆê¸°ì¹˜ ì•Šì€ ì¤‘ë³µì´ ë°œìƒí•œë‹¤.\n\n### s6 ë™ì‘ ì‚¬ìš©ìí™”\n\ns6ì˜ ë™ì‘ì„ ì´ë¯¸ ì •ì˜ëœ í™˜ê²½ ë³€ìˆ˜ë¥¼ ì„¤ì •í•¨ìœ¼ë¡œì¨ ì‹¤í–‰ë‹¨ê³„ì—ì„œ ì¡°ì •í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n- S6\\_KEEP\\_ENVÂ (default = 0): ë§Œì•½ ì„¤ì •ì´ ë˜ë©´, í™˜ê²½ê³¼ ì „ì²´ ê´€ë¦¬ ê³¼ì •ì´ ë°”ë¼ë³´ëŠ” ì›ë³¸ í™˜ê²½ë³€ìˆ˜ëŠ” resetë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ëŠ” with-contenvë¥¼ ë¬´ì˜ë¯¸í•˜ê²Œ ë°”ê¿”ë²„ë¦°ë‹¤.\n- S6\\_LOGGINGÂ (default = 0):\n  - **0**: ëª¨ë“  Outputì´ stdout/stderrë¡œ ì „ë‹¬ëœë‹¤.\n  - **1**: ë‚´ë¶€ì˜ catch-all loggerë¥¼ ì‚¬ìš©í•˜ì—¬, ì§€ì†ì ìœ¼ë¡œ ì´ê²ƒì— ì „ì†¡í•œë‹¤. ì´ëŠ” /var/log/s6-uncaught-logsì— ìœ„ì¹˜í•œë‹¤. ê·¸ë˜ë„ CMDì—ì„œëŠ” stdout/stderrë¥¼ í†µí•´ ì „ë‹¬í•œë‹¤.\n  - **2**: ë‚´ë¶€ì˜ catch-all loggerë¥¼ ì‚¬ìš©í•˜ì—¬, ì§€ì†ì ìœ¼ë¡œ ì´ê²ƒì— ì „ì†¡í•œë‹¤. ì´ ê³¼ì •ì— CMDë„ í¬í•¨ëœë‹¤. ë”°ë¼ì„œ, stdout/stderrë¡œ ì“°ì—¬ì§€ëŠ” ê²ƒì€ ì•„ë¬´ê²ƒë„ ì—†ë‹¤.\n- S6\\_BEHAVIOUR\\_IF\\_STAGE2\\_FAILSÂ (default = 0):\n  - **0**: script(fix-attrsÂ orÂ cont-init)ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë”ë¼ë„ ì¡°ìš©í•˜ê²Œ ì§€ì†í•œë‹¤.\n  - **1**: ì—ëŸ¬ ë©”ì„¸ì§€ì— ëŒ€í•œ ê²½ê³ ë¥¼ ì œê³µí•œ í›„ì— ì§€ì†í•œë‹¤.\n  - **2**: ê´€ë¦¬ ì‹œìŠ¤í…œì— ì¢…ë£Œ signalì„ ì „ì†¡í•˜ë©´ì„œ ì¢…ë£Œí•œë‹¤.\n- S6\\_KILL\\_FINISH\\_MAXTIMEÂ (default = 5000): /etc/cont-finish.d ì˜ scriptê°€ ì¢…ë£Œ signalì„ ë°›ì„ ë•Œê¹Œì§€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ìµœëŒ€ ëŒ€ê¸° ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤. ê° scriptê°€ ìˆ˜í–‰ë  ë•Œë§ˆë‹¤ ìˆ˜í–‰ëœë‹¤.\n- S6\\_SERVICES\\_GRACETIMEÂ (default = 3000): ì–¼ë§ˆë‚˜ s6 ê°€ ì„œë¹„ìŠ¤ê°€ TERM signalì„ ë³´ë‚¼ ë•Œê¹Œì§€ ê¸°ë‹¬ë¦´ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.\n- S6\\_KILL\\_GRACETIMEÂ (default = 3000): ì–¼ë§ˆë‚˜ s6 ê°€ zombieë¥¼ ê±°ë‘ëŠ”ë° ê¸°ë‹¤ë¦´ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì‹œê°„ì´ ì§€ë‚˜ë©´ KILL signalì„ ì „ì†¡í•©ë‹ˆë‹¤.\n- S6\\_LOGGING\\_SCRIPTÂ (default = \"n20 s1000000 T\"): í•´ë‹¹ ë³€ìˆ˜ëŠ” ì–´ë–»ê²Œ ë¬´ì—‡ì„ loggingí• ì§€ë¥¼ ê²°ì •í•œë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ ISO8601ë¥¼ ëª¨ë“  lineì— ë§ë¶™ì´ê³ , 1mbì— ë„ë‹¬í•˜ê±°ë‚˜ 20ê°œ ì´ìƒì˜ íŒŒì¼ì´ ìƒì„±ë˜ë©´ rotationì„ ìˆ˜í–‰í•œë‹¤.\n- S6\\_CMD\\_ARG0Â (default = not set): í•´ë‹¹ í™˜ê²½ ë³€ìˆ˜ì˜ ê°’ì€ dockerì— ì˜í•´ ì „ë‹¬ëœ CMD ì¸ìì— ë§ë¶™ì—¬ì§„ë‹¤. ì¡´ì¬í•˜ëŠ” ì´ë¯¸ì§€ë¥¼ s6-overlayë¡œ ë³€ê²½í•  ë•Œ, ì´ì „ì— ì‚¬ìš©í–ˆë˜ ENTRYPOINTì˜ ê°’ì„ ì´ê³³ì— ì „ë‹¬í•¨ìœ¼ë¡œì¨ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n- S6\\_FIX\\_ATTRS\\_HIDDENÂ (default = 0): ì–´ë–»ê²Œ fix-attrs.d scriptê°€ íŒŒì¼ê³¼ directoryë¥¼ ì²˜ë¦¬í• ì§€ë¥¼ ì œì–´í•œë‹¤.\n  - **0**: ìˆ¨ê²¨ì§„ íŒŒì¼ê³¼ directoryë¥¼ ì œì™¸í•œë‹¤.\n  - **1**: ëª¨ë“  íŒŒì¼ê³¼ directoryë¥¼ í¬í•¨í•œë‹¤.\n- S6\\_CMD\\_WAIT\\_FOR\\_SERVICES\\_MAXTIMEÂ (default = 5000): CMD ì‹¤í–‰ì„ ì§€ì†í•˜ê¸° ì „ì— ê¸°ë‹¤ë¦¬ëŠ” ìµœëŒ€ ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤.\n- S6\\_READ\\_ONLY\\_ROOTÂ (default = 0): read-only íŒŒì¼ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ëŠ” container ë‚´ë¶€ì—ì„œ ë™ì‘í•  ë•Œ, 1ë¡œ ì„¤ì •í•˜ì—¬ ì´ˆê¸°í™” scriptsë¥¼ ê¶Œí•œ ì„¤ì •ì´ì „ì— /etcì—ì„œ /var/run/s6/etc ë¡œ ë³µì‚¬í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìì„¸í•œ ì‚¬í•­ì€ ë‹¤ìŒì„ ì°¸ì¡°([Read-Only Root Filesystem](https://github.com/just-containers/s6-overlay#read-only-root-filesystem))\n- S6\\_SYNC\\_DISKSÂ (default = 0): 1ë¡œ ì„¤ì •í•˜ì—¬ stage 3ì—ì„œ container ì¢…ë£Œ ì´ì „ì— file ì‹œìŠ¤í…œì˜ syncë¥¼ ë§ì¶”ì–´ì•¼ í•¨ì„ ì•Œë¦°ë‹¤.\n\n### Terminology\n\n- PID 1 : linux kernelì—ì„œ ì²«ë²ˆì§¸ë¡œ ì‹œì‘ë˜ì–´ì§„ processì—ê²Œ PID 1ì´ ë¶€ì—¬ëœë‹¤. PID 1ì€ ë‹¤ë¥¸ processë“¤ê³¼ëŠ” ë‹¬ë¦¬ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì¼ ê°–ëŠ”ë‹¤.\n  - PID 1 processê°€ ì¢…ë£Œëœë‹¤ë©´, ëª¨ë“  ë‹¤ë¥¸ processëŠ” KILL signalë¡œ ì¢…ë£Œëœë‹¤.\n  - ìì‹ processë¥¼ ê°€ì§„ ì–´ë–¤ processë¼ë„ ë¬´ìŠ¨ ì´ìœ ì—ì„œê±´ ì£½ëŠ”ë‹¤ë©´, ìì‹ë“¤ì€ PID 1 processì˜ ìì‹ìœ¼ë¡œ ë‹¤ì‹œ íƒœì–´ë‚œë‹¤.\n- Zombie process : ì‹¤í–‰ì´ ì¢…ë£Œë˜ì—ˆì§€ë§Œ, ì•„ì§ ì‚­ì œë˜ì§€ ì•Šì€ processë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ë¥¼ ì‹¤ì œë¡œ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ë°, ê·¸ ì´ìœ ëŠ” ë¶€ëª¨ processê°€ ìì‹ processì˜ ì¢…ë£Œ ìƒíƒœë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. ì´ëŸ¬í•œ ë°ì´í„°ëŠ” ì‹¤í–‰í•œ ëª…ë ¹ì˜ ê²°ê³¼ì— ë”°ë¼ì„œ ë¶„ê¸°ë¥¼ í•˜ê³  ì‹¶ì„ ë•Œ, ì¢…ë£Œ ê°’ì€ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ëœë‹¤. ì´ë ‡ê²Œ zombie ìƒíƒœë¡œ ì§„ì…í•œ processëŠ” ë¶€ëª¨ processê°€ ì¢…ë£Œë˜ê±°ë‚˜ wait() ê³„ì—´ì˜ í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ processê°€ ì •ë¦¬ë  ëŒ€ê¹Œì§€ ë‚¨ì•„ìˆê²Œ ëœë‹¤. ë§Œì•½, ì´ëŸ¬í•œ zombie processê°€ ë‹¤ìˆ˜ ë‚¨ì•„ ìˆê²Œ ëœë‹¤ë©´ ì‹œìŠ¤í…œì—ë„ ì•…ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤.\n- process supervisor : ì—¬ëŸ¬ processë¥¼ ëª¨ë‹ˆí„°ë§í•˜ê³ , ì œì–´í•˜ëŠ” programì„ ì˜ë¯¸í•œë‹¤.\n- ejabberd : Robust, Scalable and Extensible Realtime PlatformXMPP Server + MQTT Broker + SIP Service\n- symbol link : soft linkë¼ê³  ë¶ˆë¦¬ê¸°ë„ í•˜ë©°, ë‹¤ë¥¸ íŒŒì¼ì„ ê°€ë¥´í‚¤ëŠ” íŠ¹ë³„í•œ íŒŒì¼ë¡œ ì—¬ê¸¸ ìˆ˜ ìˆë‹¤. target íŒŒì¼ì˜ ë°ì´í„°ë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ë‹¨ìˆœíˆ íŒŒì¼ ì‹œìŠ¤í…œì˜ ë‹¤ë¥¸ íŒŒì¼ì„ ê°€ë¥´í‚¤ê³ , ì´ë¥¼ í†µí•´ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•œ ë°©ë²•ì´ë‹¤.\n- nobody user: ëŒ€ë‹¤ìˆ˜ì˜ Unix ì‹œìŠ¤í…œì—ì„œ, \"nobody\"ëŠ” ì „í†µì ìœ¼ë¡œ íŒŒì¼ì„ ê°€ì§€ì§€ ì•Šê³ , ì–´ëŠ ê¶Œí•œ ê·¸ë£¹ì—ë„ ì†í•˜ì§€ ì•Šìœ¼ë©°, ë‹¤ë¥¸ ëª¨ë“  ìœ ì €ë“¤ì´ ê°€ì§€ëŠ” ê¸°ëŠ¥ì„ ì œì™¸í•˜ë©´ ê¸°ëŠ¥ì´ ì—†ëŠ” ìœ ì €ë¥¼ ì˜ë¯¸í•œë‹¤.\n\n## ì¶œì²˜\n\n- [ğŸ”— just-containers/s6-overlay](https://github.com/just-containers/s6-overlay)\n","slug":"s6-overlay","date":"2021-07-11 12:13","title":"S6 Overlay","category":"Tech","tags":["Docker"],"desc":"dockerì— ê¸°ë³¸ ì´ë…ì€ í•˜ë‚˜ì˜ containerì—ëŠ” í•˜ë‚˜ì˜ processë§Œ ë‘ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì´ì— ëŒ€í•´ì„œ ë°˜ëŒ€ë¥¼ í•˜ê³ , í•˜ë‚˜ì˜ containerì— ì—¬ëŸ¬ ê°œì˜ processë¥¼ ì‹¬ê³  ì´ë¥¼ ì´ìš©í•˜ê² ë‹¤ëŠ” ìƒê°ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ open sourceì´ë‹¤. ì‚¬ìš© ì˜ˆì‹œëŠ” main process ë‚´ë¶€ì— cronjobì„ ë¼ì›Œë„£ëŠ” ê²ƒê³¼ ê°™ì€ ê²½ìš°ê°€ ìˆì„ ê²ƒì´ë‹¤.ì´ëŠ” ê²°ë¡ ì ìœ¼ë¡œ Dockerfileì˜ í™•ì¥ ë²„ì „ì´ë¼ê³  ë³¼ ìˆ˜ë„ ìˆì„ ê±° ê°™ë‹¤. ì¢€ ë” ë³µì¡í•œ ì‘ì—…ì„ ë” ì²´ê³„ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” í‹€ì„ ì œê³µí•œë‹¤. ì•„ì´ë””ì–´ ìì²´ëŠ” ì°¸ì‹ í•˜ë‚˜ ë‚¨ë°œí•˜ê²Œ ë˜ë©´, statelessí•˜ë˜ containerê°€ ì ì  statefulí•˜ê²Œ ë˜ë©´ì„œ ì‹œìŠ¤í…œì´ ì˜¤ì—¼ë  ìˆ˜ë„ ìˆìŒì„ ìœ ì˜í•˜ì.ì•„ë˜ ë‚´ìš©ì€ í•´ë‹¹ opensourceì˜ READMEë¥¼ ì§ì ‘ ë²ˆì—­í•œ ë‚´ìš©ì´ë‹ˆ ì˜ì—­ë„ ë§ì´ í¬í•¨ëœë‹¤. ì£¼ì˜í•´ì„œ ì½ë„ë¡ í•˜ì. ë˜í•œ, ëª¨ë¥´ëŠ” ìš©ì–´ëŠ” ì•„ë˜ Terminologyë¥¼ í™•ì¸í•´ë³´ë„ë¡ í•˜ì.","thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Intro\n\nVirtual Machineê³¼ ContainerëŠ” í˜„ì¬ì˜ ì—¬ëŸ¬ Computing ì˜ì—­ì—ì„œ ë¹¼ë†“ì„ ìˆ˜ ì—†ëŠ” ë‚´ìš©ì´ ë˜ì—ˆë‹¤. ê·¸ë ‡ê¸°ì— ì´ë“¤ì˜ ë°œì „ ì—­ì‚¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ ì´ë“¤ì„ ë¹„êµí•˜ê³  ì •ë¦¬í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n## History\n\nVirtual Machineê³¼ Containerì˜ ì°¨ì´ì ì„ ì´í•´í•˜ê¸° ë³´ë‹¤ëŠ” ì„œì‚¬ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ í¸í•  ê²ƒì´ë‹¤.\n\nì‹œì‘ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\në‹¹ì‹ ì€ í˜„ì¬ ë‹¤ì–‘í•œ serviceë¥¼ ìš´ì˜í•˜ê³  ìˆë‹¤. ê·¸ë¦¬ê³ , ì´ë¥¼ ìš´ì˜í•˜ëŠ” ê³¼ì •ì—ì„œ ê°€ì¥ í° ë¬¸ì œë¥¼ ê²ªê²Œ ëœë‹¤.\n\nì—¬ëŸ¬ serviceëŠ” ë§¤ ë²ˆ ë‹¤ì–‘í•œ ìš”êµ¬ì— ì˜í•´ì„œ ìƒí™©ì´ ë°”ë€ë‹¤. ì–´ëŠ ë‚ ì€ ì£¼ë¬¸ì´ í­ì£¼í•´ì„œ ì„œë²„ë¥¼ ì¦ì„¤í•´ì•¼í•˜ê³ , ì–´ëŠ ìˆœê°„ì—ëŠ” ìœ ì§€ ë¹„ìš©ì´ ì•„ê¹Œì›Œì„œ ì„œë²„ë¥¼ ë‹¤ì‹œ ì¶•ì†Œì‹œí‚¨ë‹¤.\n\në˜í•œ, Hardwareê°€ ì„±ëŠ¥ì˜ ë…¸í›„ì™€ ìƒˆë¡œìš´ ê¸°ê¸° ë° ì‹œìŠ¤í…œì„ ë„ì…í•˜ê³ ì í•˜ëŠ” ìš•êµ¬ë„ ë”°ë¥¸ë‹¤.\n\n> **Service 1, Service 3ì˜ ë¹„ìš©ì´ ì¦ê°€í•˜ë©´ Service 3ì´ ì˜í–¥ì„ ë°›ëŠ”ë‹¤.**\n\n![vm-container-1](/images/vm-container-1.jpeg)\n\nì´ ê³¼ì •ì—ì„œ ìš°ë¦¬ëŠ” ê²°êµ­ í•˜ë‚˜ì˜ machineì— í•˜ë‚˜ì˜ service ë§Œì„ ë°°í¬í•˜ê²Œ ëœë‹¤. ë‹¤ë¥¸ serviceê°€ ê³¼ë¶€í™”ê°€ ê±¸ë ¤ì„œ ë‹¤ë¥¸ serviceë„ ê°™ì´ ì—ëŸ¬ê°€ ë°œìƒí•œë‹¤ë©´, ì–¼ë§ˆë‚˜ ë¨¸ë¦¬ê°€ ì•„í”„ê² ëŠ”ê°€? ê·¸ëŸ°ë°, ì—¬ê¸°ì„œ ê³µí•™ìë“¤ì´ ì°¸ì„ ìˆ˜ ì—†ëŠ” ì¼ì´ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤.\n\n> **\"ë¹„íš¨ìœ¨ì \" ìì› ì‚¬ìš©**\n\nê·¸ë˜ì„œ ì‚¬ëŒë“¤ì€ ì„ íƒì— ê¸°ë¡œì— ë¹ ì§„ë‹¤. ë¨¸ë¦¬ê°€ ì•„í”Œì •ë„ë¡œ ê³ ë¯¼í•´ì„œ, ìµœì ì˜ ìƒí™©ì„ ë§Œë“¤ì–´ì„œ ìš°ë¦¬ì˜ serverë¥¼ ì˜ˆì˜ê²Œ ë§Œë“¤ê³ , ìƒˆë¡œìš´ serviceê°€ ë‚˜ì˜¤ê³  ê¸°ê¸°ê°€ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ì´ ê³ ë¯¼ì„ ë°˜ë³µí•˜ëŠ”ê°€ ì•„ë‹ˆë©´ ê·¸ëƒ¥ í•˜ë‚˜ì˜ machineì—ëŠ” í•˜ë‚˜ì˜ serviceë§Œ ë„£ëŠ”ê°€?\n\nì´ë•Œ, ì‚¬ëŒë“¤ì€ í•˜ë‚˜ì˜ ë¬¼ë¦¬ì  ê¸°ê¸°ë¥¼ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ ê¸°ê¸°ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì— ëˆˆì„ ëŒë¦¬ê²Œ ëœë‹¤.\n\nê·¸ë•Œ, ë– ì˜¤ë¥¸ ë°œìƒì´ Virtual Machineì´ë‹¤. ë¬¼ë¦¬ì ìœ¼ë¡œ ì¡´ì¬í•˜ëŠ” Machineì„ ì´ìš©í•´ì„œ ê°€ìƒì˜ Machineì„ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ì¦‰, í•˜ë‚˜ì˜ Machineì´ ì´ì œ ì—¬ëŸ¬ ê°œì˜ Virtual Machineì´ ë  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\nì´ ë°œê²¬ì„ í†µí•´ì„œ ì‚¬ëŒë“¤ì€ í•˜ë‚˜ì˜ serverë¥¼ ì—¬ëŸ¬ ê°œì˜ virtual Machineìœ¼ë¡œ ë‚˜ëˆ„ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì— ìµìˆ™í•´ì§€ë©°, Virtual Machineì„ ì£¼ë¥˜ë¡œ í•˜ëŠ” VMwareì™€ ê°™ì€ ì—…ì²´ê°€ í° ì„±ì¥ì„ ì´ë£¨ê²Œ ëœë‹¤.\n\nê·¸ëŸ¬ë‚˜, ì—¬ê¸°ì„œ Virtual Machineì˜ ì‚¬ìš©ìë“¤ì€ í° ê³ ë¯¼ì„ ê°–ê²Œ ëœë‹¤. ë°”ë¡œ ì„±ëŠ¥ì ì¸ Issueì´ë‹¤.\n\nê¸°ì¡´ì—ëŠ” Virtual Machineì„ ì™„ë²½í•˜ê²Œ ë™ì‘í•˜ëŠ” OS ìœ„ì—ì„œ ë™ì‘í•˜ë„ë¡ í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ì‹œê°„ì´ ê°ˆ ìˆ˜ë¡ ì´ëŸ¬í•œ êµ¬ì¡°ëŠ” ì˜¤íˆë ¤ í° ë¹„ìš©ì„ ìœ ë°œí–ˆë‹¤.\n\nì´ì— ë”°ë¼ì„œ ë‹¤ì–‘í•œ ê°€ìƒí™” ë°©ë²•ë“¤ì´ ì—°êµ¬ë˜ê²Œ ëœë‹¤. ê·¸ë ‡ê²Œ ë‚˜ì˜¨ ê²ƒì´ ì§€ê¸ˆê¹Œì§€ëŠ” 3ê°€ì§€ì˜ í° íë¦„ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.\n\n![vm-container-2](/images/vm-container-2.jpeg)\n\n> **1. Host ê¸°ë°˜ì˜ ê°€ìƒí™”**\n\nìš°ë¦¬ê°€ ì•ì„œ ë´¤ë˜ ì‚¬ë¡€ë“¤ê³¼ ê°™ì´ ê¸°ì¡´ì— Hostê°€ ì¡´ì¬í•˜ê³ , ê±°ê¸°ì—ì„œ Virutalize SWë¥¼ ì´ìš©í•˜ì—¬, ê°€ìƒí™”ëœ ì¥ì¹˜ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n> **2. Hypervisor ê¸°ë°˜ì˜ ê°€ìƒí™”**\n\nHost Machineì„ ë°°ì œí•˜ê³ , Hostì˜ OSë¥¼ ì—†ì• ê³ , Hypervisorë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—¬ëŸ¬ OSë¥¼ ëŠ¥ë™ì ìœ¼ë¡œ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ êµ¬ì„±í•œ ê²ƒì´ë‹¤.\n\n- ì¢…ë¥˜\n  - ì „ê°€ìƒí™” : ì „ê°€ìƒí™”ë€ ì „ì²´ Hardwareë¥¼ ëª¨ë‘ ê°€ìƒí™”í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ Hypervisorê°€ ê° OSë¡œ ë¶€í„° ì˜¤ëŠ” ìš”ì²­ì„ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” Hardwareì— ë§ê²Œ ë²ˆì—­í•˜ëŠ” ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.\n  - ë°˜ê°€ìƒí™” : OSì—ì„œ ìì‹ ì˜ ëª…ë ¹ì–´ë¥¼ í‘œì¤€í™”ëœ í˜•íƒœë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ì´ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë˜ë©´, Hypervisorì—ì„œ ìˆ˜í–‰í•˜ëŠ” ë™ì‘ì˜ ë¹„ìš©ì„ í¬ê²Œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ê²½ìš°ì—ëŠ” OS ìì²´ë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— í° ë¹„ìš©ì´ ë°œìƒí•©ë‹ˆë‹¤.\n\n> **3. Container ê¸°ë°˜ì˜ ê°€ìƒí™”**\n\nContainer ëŠ” guest OSë¥¼ êµ¬í˜„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê° Containerì—ì„œ ë°œìƒí•˜ëŠ” OS ìš”ì²­ì„ Host OSë¥¼ ê³µìœ í•¨ìœ¼ë¡œì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¶”ê°€ì ì¸ ê¸°ëŠ¥ì€ Container ë‚´ë¶€ë¡œ ìœ„ì„í•˜ì—¬ í›¨ì”¬ ë” ê°€ë³ê³  ì´ì‹ì„±ì´ ì¢‹ì€ í˜•íƒœì˜ ê°€ìƒí™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n## Simulator vs Emulator\n\nì—¬ëŸ¬ê°€ì§€ ì´ì•¼ê¸°ê°€ simulatorì™€ emulator ì‚¬ì´ì—ì„œ ì¡´ì¬í•œë‹¤. ì˜ˆë¥¼ë“¤ì–´, high levelë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ simulatorê³  low levelë¡œ ì‘ì„±í•˜ëŠ” ê²ƒì´ emulatorë¼ëŠ” ì´ëŸ° ë§ì´ë‹¤. í•˜ì§€ë§Œ, ì´ëŠ” ê° ê²½ìš°ë¥¼ êµ¬í˜„í•˜ëŠ” ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” íŠ¹ì§•ì´ì§€ ì •ì˜ê°€ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n\nSimulatorëŠ” íŠ¹ì • ëª©ì ì— ë”°ë¼ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ ì„ì˜ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¦‰, ì™„ë²½í•˜ê²Œ ë™ì¼í•  í•„ìš”ëŠ” ì—†ì´ ì›í•˜ëŠ” íŠ¹ì§•ì„ ë½‘ì•„ë‚´ëŠ” ê²ƒì´ ì¤‘ìš”í•œ ê²ƒì´ë‹¤. ë°˜ë©´ì—, EmulatorëŠ” ì™„ì „ ë™ì¼í•œ ê¸°ê¸°ë¥¼ softwareë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë§í•œë‹¤. ê·¸ ê³¼ì •ì—ì„œ EmulatorëŠ” Smulatorë³´ë‹¤ ë¬´ê±°ì›Œì§ˆ ìˆ˜ ë°–ì— ì—†ê³ , ê·¸ë ‡ê¸°ì— low level languageì— ì†ì´ ê°€ê²Œ ë˜ê³ , ëŠë ¤ì§€ê²Œ ëœë‹¤.\n\nì´í•´ê°€ ì–´ë µë‹¤ë©´, ì˜¤ë½ì‹¤ ê²Œì„ì„ PCì—ì„œ í•˜ê³ , ë™ë¬¼ì˜ ìˆ² ë‹Œí…ë„ ê²Œì„ì„ í•¸ë“œí°ìœ¼ë¡œ í•˜ëŠ” ë¶ˆë²•ì ì¸ ì¼ë„ í•´ë³¸ ì ì´ ìˆì„ ìˆ˜ ìˆë‹¤. ì´ëŠ” ê°€ìƒìœ¼ë¡œ í•´ë‹¹ ê¸°ê¸°ë¥¼ êµ¬í˜„í•˜ê³ , ì´ë¥¼ ë‹¤ë¥¸ ê¸°ê¸°ì—ì„œ êµ¬ë™í•˜ëŠ” ê²ƒì˜ ì˜ˆì´ë‹¤.\n\n## Reference\n\n- [ğŸ”— ê°€ìƒí™” ê° ê°ì„ ë¹„êµ](https://tech.cloud.nongshim.co.kr/2018/09/18/%EA%B0%80%EC%83%81%ED%99%94%EC%9D%98-%EC%A2%85%EB%A5%983%EA%B0%80%EC%A7%80/)\n- Thumbnail: Photo by [william william](https://unsplash.com/@william07?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/cargo-ship?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"vm-container","date":"2021-05-23 14:31","title":"VM & Container","category":"Tech","tags":["VirtualMachine","Container"],"desc":"Virtual Machineê³¼ ContainerëŠ” í˜„ì¬ì˜ ì—¬ëŸ¬ Computing ì˜ì—­ì—ì„œ ë¹¼ë†“ì„ ìˆ˜ ì—†ëŠ” ë‚´ìš©ì´ ë˜ì—ˆë‹¤. ê·¸ë ‡ê¸°ì— ì´ë“¤ì˜ ë°œì „ ì—­ì‚¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ ì´ë“¤ì„ ë¹„êµí•˜ê³  ì •ë¦¬í•´ë³´ë„ë¡ í•˜ê² ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/cargo-ship.jpg"},{"content":"\n## Intro\n\n**Vagrant**(ë² ì´ê·¸ëŸ°íŠ¸)ëŠ” Virtual Machineì˜ ì‹¤í–‰í™˜ê²½ì„ í•˜ë‚˜ì˜ workflow ë‚´ì— êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë„êµ¬ì´ë‹¤. ì‰¬ìš´ workflow ì‚¬ìš©ë²•ê³¼ ìë™í™”ì— ì´ˆì ì„ ë§ì¶”ì–´ **Vagrant**ëŠ” setup timeì´ êµ‰ì¥íˆ ì§§ë‹¤. ë˜í•œ, productionê³¼ì •ê³¼ì˜ ë™ë“±í•¨ì„ ì œê³µí•˜ê³ , ê³¼ê±°ì˜ ì‹œìŠ¤í…œì„ \"ë‚˜ì˜ machine ë‚´ë¶€ì—ì„œ\" ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n## Why Vagrant?\n\n**Vagrant**ëŠ” `configuration`ì´ ì‰½ê³ , ë™ì¼í•œ ì¡°ê±´ìœ¼ë¡œ ì¬ì‹¤í–‰ì„ ë³´ì¥(reproducible)í•˜ë©°, ì–´ëŠ ì¥ë¹„ì—ì„œë“ ì§€ ë™ì‘ê°€ëŠ¥(í˜¸í™˜ì„±ì´ ë†’ì€, portable)í•œ ì‘ì—… í™˜ê²½ì„ ì œê³µí•œë‹¤. ì´ëŸ¬í•œ ì‘ì—… í™˜ê²½ì€ ì‚°ì—… í‘œì¤€ ê¸°ìˆ ì— ê¸°ë°˜í•˜ë©°, í•˜ë‚˜ì˜ ì¼ê´€ì„±ìˆëŠ” workflowì— ì˜í•´ì„œ ì œì–´ë˜ì–´ ìƒì‚°ì„±ê³¼ ìœ ì—°ì„±ì„ ìµœëŒ€í™”í•œë‹¤.\n\nì´ëŸ¬í•œ ë§ˆë²•ê°™ì€ ì¼ì„ ì„±ì·¨í•˜ê¸° ìœ„í•´ì„œ, **Vagrant**ëŠ” `VirtualBox`, `VMware`, `AWS`, ë˜ëŠ” ë‹¤ë¥¸ `Virtual Machine` ì œê³µìì— ê¸°ë°˜ ìœ„ì—ì„œ ë™ì‘í•˜ë©°, ì´ë“¤ì„ í™œìš©í•˜ì—¬ ê°€ìƒ í™˜ê²½ì„ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.\n\n### For Developers\n\në§Œì•½ ë‹¹ì‹ ì´ ê°œë°œìë¼ë©´, **Vagrant**ëŠ” ì˜ì¡´ì„±ê³¼ ê·¸ë“¤ì˜ ì„¤ì •ì„ ê²©ë¦¬ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ë•Œì— ì¼íšŒìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ë“ , ì§€ì†ì ì¸ í™˜ê²½ìœ¼ë¡œ ì‚¬ìš©í•˜ë“  ìƒê´€ì—†ì´ ê·¸ ì–´ë–¤ toolë“¤(browser, editor, debugger ë“±)ë„ ë¹ ì§ì—†ì´ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì¼ë‹¨ í•˜ë‚˜ì˜ `Vagrantfile`ì„ ìƒì„±í•˜ë©´, ë‹¨ì§€ `vagrant up`ë§Œ ì‹¤í–‰ì‹œì¼œì£¼ë©´ ëª¨ë“  ê²ƒì´ ì„¤ì¹˜ë˜ê³  ì„¤ì •ë  ê²ƒì´ë‹¤. ì´ëŠ” ê°œë°œíŒ€ì˜ ëˆ„êµ¬ì—ê²Œë“ ì§€ ê³µìœ ë  ìˆ˜ ìˆê³ , ì–´ëŠ í™˜ê²½(Linux, MAC OS X, Window)ì— ìˆë“  ëª¨ë“  íŒ€ êµ¬ì„±ì›ì€ ë™ì¼í•œ í™˜ê²½(ë™ì¼í•œ ì˜ì¡´ì„±, ë™ì¼í•œ ì„¤ì •)ì—ì„œ codeë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ `ë‚´ ë¨¸ì‹ ì—ì„œëŠ” ì˜ ë™ì‘í•˜ëŠ”ë°...`ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n\n### For Operators\n\në§Œì•½ ë‹¹ì‹ ì´ System operation/DevOps engineerë¼ë©´, **Vagrant**ëŠ” ê°œë°œ ë˜ëŠ” í…ŒìŠ¤íŒ…ì„ ìœ„í•œ infrastructure(ê¸°ë°˜ í™˜ê²½)ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ì¼íšŒìš© ë˜ëŠ” ì¼ê´€ì ì¸ workflowë¥¼ ì œê³µí•œë‹¤. ì´ë•Œì—ëŠ” `sh`, `Chef`, `Puppet` ê³¼ ê°™ì€ ë°©ë²•ì„ í†µí•´ ì œì–´í•  ìˆ˜ ìˆìœ¼ë©°, ì‹¤í–‰ í™˜ê²½ì€ `VirtualBox`, `VMware`, `AWS` ë“± ë‹¤ì–‘í•œ í™˜ê²½ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤. ì—¬ëŸ¬ machineì„ `ssh`ë¥¼ í†µí•´ì„œ ì ‘ì†í•˜ì§€ ì•Šê³ , **Vagrant**ë¥¼ í†µí•´ì„œ ëª¨ë“  ê²ƒì„ ì‰½ê²Œ ì œì–´í•  ìˆ˜ ìˆë‹¤.\n\n### For Designers\n\në§Œì•½ ë””ìì´ë„ˆ ì§êµ°ì´ë¼ë©´, **Vagrant**ëŠ” ìë™ì ìœ¼ë¡œ web appì„ êµ¬ë™ì‹œí‚¬ ìˆ˜ ìˆëŠ” ëª¨ë“  í™˜ê²½ì„ ìë™ì ìœ¼ë¡œ ì œê³µí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, design ì‘ì—… ì™¸ì—ëŠ” ë” ì•Œì•„ì•¼ í•  ê²ƒì´ ì—†ë‹¤. ì¼ë‹¨ ê°œë°œìê°€ **Vagrant**ë¥¼ ì„¤ì •í•˜ê³  ë‚˜ë©´, ë‹¹ì‹ ì€ ì´ë¥¼ ë‹¤ì‹œ ì‹¤í–‰ì‹œí‚¤ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ê³ ë¯¼í•  í•„ìš”ê°€ ì—†ë‹¤. ë” ì´ìƒ ê°œë°œìë“¤ì„ ê´´ë¡­íˆì§€ ì•Šê³ ë„ ë‹¹ì‹ ì˜ í™˜ê²½ì„ ì‰½ê²Œ ë³€ê²½í•  ìˆ˜ ìˆìœ¼ë©°, version controlë§Œ ì‰½ê²Œí•  ìˆ˜ ìˆë‹¤ë©´, ë‹¨ìˆœíˆ `vagrant up`ìœ¼ë¡œ ì‰½ê²Œ ì ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n## What is Vagrant?\n\ní•´ë‹¹ tutorialì—ì„œëŠ” **Vagrant**ë¥¼ í†µí•´ ë„ˆì˜ ì²«ë²ˆì§¸ ê°œë°œ í™˜ê²½ì„ ìƒì„±í•  ê²ƒì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, **Vagrant**ì˜ ê°„ëµí•œ ì†Œê°œì™€ ì‚¬ì „ ì¤€ë¹„ì‚¬í•­ê³¼ ê°€ì¥ ê¸°ë³¸ì ì´ê³  ì¤‘ìš”í•œ **Vagrant** í™œìš©ì„ ë°°ìš¸ ê²ƒì´ë‹¤.\n\ní•´ë‹¹ tutorialì—ì„œëŠ” `VirtualBox`ë¥¼ í™œìš©í•˜ì—¬ **Vagrant**í™˜ê²½ì„ êµ¬ì„±í•´ë³¼ ê²ƒì´ë‹¤. ì™œëƒí•˜ë©´ ì´ê²ƒì´ ì—¬ëŸ¬ platformì—ì„œ ì‚¬ìš©ë˜ëŠ” ë¬´ë£Œ softwareì´ê¸° ë•Œë¬¸ì´ë‹¤.\n\n### ì‚¬ì „ ì¤€ë¹„ì‚¬í•­\n\n1. **Vagrant** ì„¤ì¹˜  \n  [ğŸ”— link](https://www.vagrantup.com/docs/installation)\n2. `VirtualBox` ì„¤ì¹˜  \n  [ğŸ”— link](https://www.virtualbox.org/wiki/Downloads)\n\në‹¨ ë‘ ê°œì˜ ëª…ë ¹ì–´ë¡œ ì›í•˜ëŠ” í™˜ê²½ì˜ VM(Virtual Machine)ì„ ìƒì„±í•  ìˆ˜ ìˆê³ , í•˜ë‚˜ì˜ ëª…ë ¹ì–´ë¡œ ì‚­ì œê°€ ê°€ëŠ¥í•˜ë‹¤. ì—¬ê¸°ì„œëŠ” Ubuntu 18.04 ì´ë¯¸ì§€ë¥¼ ì´ìš©í•  ê²ƒì´ë‹¤.\n\n### ì‹¤í–‰ í…ŒìŠ¤íŠ¸\n\n> **1. Vagrant ì´ˆê¸°í™”**\n\n```bash\n$ vagrant init hashicorp/bionic64\nA `Vagrantfile` has been placed in this directory. You are now\nready to `vagrant up` your first virtual environment! Please read\nthe comments in the Vagrantfile as well as documentation on\n`vagrantup.com` for more information on using Vagrant.\n```\n\nì´ë¥¼ í†µí•´ì„œ, í˜„ì¬ directoryì— `Vagrantfile`ì„ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> **2. (Optional) Box ì„¤ì •**\n\nVirtual Machineì„ êµ¬ì„±í•  ë•Œ, scratch(ë°‘ë°”íƒ•, ëŒ€ê²Œ OSë§Œ í¬í•¨í•œ ìƒíƒœ)ì—ì„œ ì‹œì‘í•˜ëŠ” ê²ƒì€ ë§¤ìš° ëŠë¦¬ë‹¤. ë”°ë¼ì„œ, **Vagrant**ì—ì„œëŠ” setup timeì„ ìµœì í™”í•˜ê¸° ìœ„í•´ì„œ, `box`ë¼ëŠ” ê²ƒì„ ì´ìš©í•œë‹¤. ì´ëŠ” ê¸°ì¡´ì˜ VM êµ¬ì„± ì‹œì— ì‚¬ìš©í•˜ëŠ” imageì™€ ë¹„ìŠ·í•œ ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤. ë”°ë¼ì„œ, `Vagrantfile`ì„ ìƒì„±í•œ í›„ì— í•´ì•¼í•  ê°€ì¥ ì²«ë²ˆì§¸ë¡œ ìˆ˜í–‰í•  ê²ƒì´ í•´ë‹¹ `box`ë¥¼ êµ¬ì²´í™”í•˜ê³  ê¸°ìˆ í•˜ëŠ” ê²ƒì´ë‹¤.\n\n`box`ëŠ” [Vagarnt Cloud](https://app.vagrantup.com/boxes/search)ì™€ ê°™ì€ registryì— uploadê°€ ê°€ëŠ¥í•˜ë‹¤. ë˜ëŠ” local filesystemì—ì„œë„ ì°¸ì¡°ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\nìš°ë¦¬ê°€ ì´ì „ì— í–ˆë˜ ê²ƒì²˜ëŸ¼ `vagrant init`ì„ ìˆ˜í–‰í•  ë•Œ, `box` ëª…ì„ ì¨ì£¼ë©´, `Vagrantfile`ì„ ë§Œë“¤ ë•Œ í˜„ì¬ ë‚˜ì˜ machineì— í•´ë‹¹ `box`ê°€ ì¡´ì¬í•œë‹¤ë©´ ë¶ˆëŸ¬ì˜¤ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ downloadí•œë‹¤. ê·¸ë ‡ì§€ ì•Šê³  downloadë§Œ í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ëª…ë ¹ì–´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.\n\n```bash\n$ vagrant box add hashicorp/bionic64\n==> box: Loading metadata for box 'hashicorp/bionic64'\n...\n```\n\nì´ë¥¼ ìˆ˜í–‰í•œ í›„ì— `Vagrantfile` ë‚´ë¶€ì—ì„œ VMì˜ boxë¥¼ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.\n\n```Vagrantfile\n# \"2\"ëŠ” Vagrant versionì„ ì˜ë¯¸\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\nend\n```\n\nì´ë ‡ê²Œ ì„¤ì •í•˜ê²Œ ë˜ë©´, í•´ë‹¹ `box`ì˜ latest ë²„ì „ì„ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°, íŠ¹ì • ë²„ì „ì„ ì›í•œë‹¤ë©´ ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•  ìˆ˜ë„ ìˆë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\n  config.vm.box_version = \"1.0.282\"\nend\n```\n\ní˜„ì¬ ë‚´ machineì—ì„œ `box`ë¥¼ ì¡°íšŒí•˜ê±°ë‚˜ ì‚­ì œí•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´, ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n```bash\n$ vagrant box list\nhashicorp/bionic64 (virtualbox, 1.0.282)\n\n$ vagrant box remove hashicorp/bionic64\nRemoving box 'hashicorp/bionict64' (v1.0.282) with provider 'virtualbox' ...\n```\n\n> **3. VM ì‹¤í–‰**\n\nê¸°ë³¸ì ìœ¼ë¡œ í˜„ì¬ directoryì—ì„œ `Vagrantfile`ì„ ì°¾ì•„ì„œ Virtual Environmentë¥¼ êµ¬ì„±í•œë‹¤.\n\n```bash\n$ vagrant up\nBringing machine 'default' up with 'virtualbox' provider...\n...\n```\n\nì‹¤í–‰ì´ ì™„ë£Œë˜ë©´, ë‹¤ìŒê³¼ ê°™ì´ ssh ì ‘ê·¼ ë° ì¢…ë£Œê°€ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ vagrant ssh\nWelcome to Ubuntu 18.04.3 LTS (GNU/Linux 4.15.0-58-generic x86_64)\n\nvagrant@vagrant:~$ logout\nConnection to 127.0.0.1 closed.\n```\n\n> **4. VM ì‚­ì œ**\n\n```bash\n$ vagrant destroy\n    default: Are you sure you want to destroy the 'default' VM? [y/N] y\n==> default: Forcing shutdown of VM...\n==> default: Destroying VM and associated drives...\n```\n\n### ë°˜ë“œì‹œ ì•Œì•„ì•¼í•  ì‚¬í•­\n\n> **1. Synchronize Local and Guest Files**\n\nVMì„ ì´ìš©í•˜ì—¬ ê°œë°œí•˜ëŠ” ê²ƒì€ í¸ë¦¬í•˜ì§€ë§Œ, ëŒ€ë¶€ë¶„ì˜ ì‚¬ëŒë“¤ì€ sshë¥¼ ì´ìš©í•´ì„œ í•´ë‹¹ ì‹œìŠ¤í…œì— ì ‘ì†í•˜ì—¬ ì‘ì„±í•˜ëŠ” ê²ƒì€ ë¶ˆí¸í•˜ë‹¤ê³  ëŠë‚„ ê²ƒì´ë‹¤. í”„ë¡œì íŠ¸ê°€ ë‘ ê°œë§Œ ë˜ì–´ë„ ìƒë‹¹íˆ ê·€ì°®ì€ ì‘ì—…ì´ë‹¤. ë”°ë¼ì„œ, **Vagrant**ëŠ” ìë™ìœ¼ë¡œ VMê³¼ í˜„ì¬ ë‚˜ì˜ machine(host)ì˜ fileì„ ìë™ìœ¼ë¡œ syncí•œë‹¤.(ë™ì¼í•œ fileì´ ë˜ë„ë¡ í•œë‹¤.) ì¦‰, ë‚´ê°€ hostì—ì„œ fileì„ ì‘ì„±í•¨ìœ¼ë¡œì¨ VMì— ì´ë¥¼ ì ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ **Vagrant**ëŠ” VMì— Vagrantfileì„ í¬í•¨í•œ project directoryë¥¼ `/vagrant` directoryì™€ ë™ê¸°í™”í•œë‹¤.\n\n> **2. VMìœ¼ë¡œ project ë°°í¬**\n\nì•„ì£¼ ê°„ë‹¨í•œ ì˜ˆì œë¡œ apcacheë¥¼ ì´ìš©í•˜ì—¬ project ë°°í¬ë¥¼ ìˆ˜í–‰í•´ë³´ì.\n\në¨¼ì €, `Vagrantfile`ì´ ì¡´ì¬í•˜ëŠ” directoryì— `html`ì´ë¼ëŠ” í´ë”ë¥¼ ë§Œë“ ë‹¤.\n\n```bash\n$ mkdir html\n...\n```\n\nì•„ì£¼ ê¸°ë³¸ì ì¸ HTMLì„ ì‘ì„±í•˜ì.(index.html)\n\n```html\n<!DOCTYPE html>\n<html>\n  <body>\n    <h1>Hello, My First Vagrant Deploy!</h1>\n  </body>\n</html>\n```\n\nì´ì œ ì‹¤ì œë¡œ apacheë¥¼ ì„¤ì¹˜í•˜ê³ , ì§€ê¸ˆ ë§Œë“  íŒŒì¼ì„ apache processê°€ ë°”ë¼ë³´ëŠ” folderë¡œ ì „ë‹¬í•´ì£¼ëŠ” shell scriptë¥¼ ì‘ì„±í•˜ì.(`bootstrap.sh`ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ project directoryì— ì‘ì„±)\n\n```shell\n#!/usr/bin/env bash\n\napt-get update\napt-get install -y apache2\n\nif ! [ -L /var/www ]; then\n  rm -rf /var/www\n  ln -fs /vagrant /var/www\nfi\n```\n\nì´ì œ ì´ë¥¼ **Vagrant**ì—ì„œ ì‹¤í–‰ ì‹œì— ì‹œì‘í•˜ë„ë¡ ì„¤ì •ë§Œí•´ì£¼ë©´ ëì´ë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\n  config.vm.provision :shell, path: \"bootstrap.sh\"\nend\n```\n\nì´ì œ ë‹¤ìŒì„ í†µí•´ì„œ ì‹¤ì œë¡œ htmlì´ ë°°í¬ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n```bash\n$ vagrant up\n\n$ vagrant ssh\n\nvagrant@vagrant:~$ wget -qO- 127.0.0.1\n<!DOCTYPE html>\n<html>\n  <body>\n    <h1>Hello, My First Vagrant Deploy!</h1>\n  </body>\n</html>\n\nvagrant@vagrant:~$ logout\nConnection to 127.0.0.1 closed.\n```\n\n> **3. Port Forwarding**\n\nê°€ì¥ ê¸°ë³¸ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” Network ê¸°ìˆ ë¡œ VMì˜ portë¥¼ hostì˜ portì™€ mappingí•˜ì—¬ hostì˜ portë¥¼ í†µí•´ VMì˜ portì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì´ë‹¤.\n\n2ë²ˆì—ì„œ ì‘ì„±í–ˆë˜ `Vagrantfile`ì„ ë‹¤ìŒê³¼ ê°™ì´ ë³€ê²½í•´ì£¼ë©´ ëœë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.box = \"hashicorp/bionic64\"\n  config.vm.provision :shell, path: \"bootstrap.sh\"\n  config.vm.network :forwarded_port, guest: 80, host: 4567\nend\n```\n\nì´ë¥¼ ì ìš©í•˜ì—¬ **Vagrant**ë¥¼ ì¬ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì„ ì‹¤í–‰í•´ì£¼ë©´ ëœë‹¤.\n\n```bash\n$ vagrant reload\n==> default: Attempting graceful shutdown of VM...\n...\n```\n\nbrowserë¥¼ í†µí•´ í™•ì¸í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n![vagrant-forwarding-test](/images/vagrant-forwarding-test.png)\n\n> **4. WebApp ê³µìœ **\n\n`ngrok`ë¥¼ ì´ìš©í•´ì„œ WebAppì„ ê³µìœ í•˜ëŠ” ê¸°ëŠ¥ì„ **Vagrant**ê°€ í¬í•¨í•˜ê³  ìˆë‹¤. ì´ë¥¼ `vagrant share`ë¼ê³  ë¶€ë¥¸ë‹¤. ì‹¤í–‰ì„ ì›í•œë‹¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ `ngrok`ì„ [ğŸ”— ì„¤ì¹˜](https://ngrok.com/download)í•œ í›„ì— ë‹¤ìŒ commandë“¤ì„ ì‹¤í–‰ì‹œí‚¤ë©´ webpageë¥¼ ë‚¨ë“¤ì—ê²Œ shareí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n# vagrant shareë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ plugì¸ì„ ì„¤ì¹˜í•œë‹¤.\n$ vagrant plugin install vagrant-share\n\n# (MAC OS) development toolsê°€ ì—†ë‹¤ëŠ” ì—ëŸ¬ ë°œìƒì‹œ ì•„ë˜ ëª…ë ¹ì–´ ì‹¤í–‰\n# xcode-select --install\n\n$ vagrant share\n...\n==> default: Creating Vagrant Share session...\n==> default: HTTP URL: http://b1fb1f3f.ngrok.io\n...\n```\n\n`ngrok`ì€ ë¬´ë£Œë¡œ server domainì„ ìƒì„±í•˜ê³ , web serviceë¥¼ hosting í•´ì£¼ëŠ” toolì´ë‹¤. ì‚¬ìš©ë²•ë„ êµ‰ì¥íˆ ê°„ë‹¨í•´ì„œ ì•Œì•„ë‘ë©´ ì¢‹ë‹¤.\n\n> **5. ì—¬ëŸ¬ Machine ë°°í¬**\n\në‹¤ìŒê³¼ ê°™ì´ `vm.define`ì„ í†µí•´ì„œ ì—¬ëŸ¬ ê°œì˜ machineì„ í•œ ë²ˆì— ì •ì˜í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, **Vagrant**ê°€ VMì„ configurationí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Virtual Environmentë¥¼ configurationí•˜ëŠ” ê²ƒì´ë¼ê³  ë¶€ë¥´ëŠ” ê²ƒì´ë‹¤.\n\n```Vagrantfile\nVagrant.configure(\"2\") do |config|\n  config.vm.provision \"shell\", inline: \"echo A\"\n\n  config.vm.define \"web\" do |web|\n    test.vm.provision :shell, inline: \"echo B\"\n    web.vm.box = \"apache\"\n  end\n\n  config.vm.define \"db\" do |db|\n  config.vm.provision :shell, inline: \"echo C\"\n    db.vm.box = \"mysql\"\n  end\nend\n```\n\n## Reference\n\n- [ğŸ”— Why Vagrant?, Vagrant ê³µì‹ ì‚¬ì´íŠ¸](https://www.vagrantup.com/intro)\n- [ğŸ”— Getting Started, Vagrant ê³µì‹ ì‚¬ì´íŠ¸](https://learn.hashicorp.com/collections/vagrant/getting-started)\n","slug":"vagrant","date":"2022-06-01 12:39","title":"Vagrant","category":"Tech","tags":["Vagrant","VirtualEnvironment","VirtualBox"],"desc":"Vagrant(ë² ì´ê·¸ëŸ°íŠ¸)ëŠ” Virtual Machineì˜ ì‹¤í–‰í™˜ê²½ì„ í•˜ë‚˜ì˜ workflow ë‚´ì— êµ¬ì¶•í•˜ê³  ê´€ë¦¬í•˜ëŠ” ë„êµ¬ì´ë‹¤. ì‰¬ìš´ workflow ì‚¬ìš©ë²•ê³¼ ìë™í™”ì— ì´ˆì ì„ ë§ì¶”ì–´ VagrantëŠ” setup timeì´ êµ‰ì¥íˆ ì§§ë‹¤. ë˜í•œ, productionê³¼ì •ê³¼ì˜ ë™ë“±í•¨ì„ ì œê³µí•˜ê³ , ê³¼ê±°ì˜ ì‹œìŠ¤í…œì„ \"ë‚˜ì˜ machine ë‚´ë¶€ì—ì„œ\" ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/vagrant.png"},{"content":"## Intro\n\nBlockchainì„ ê³µë¶€í•˜ê²Œ ë˜ì—ˆëŠ”ë°, ì´ë²ˆ ê¸°íšŒì— ì œëŒ€ë¡œ í•˜ìëŠ” ìƒê°ì—ì„œ Bitcoin êµ¬í˜„ì„ ì§ì ‘ ìˆ˜í–‰í•´ë³¼ ìƒê°ì…ë‹ˆë‹¤. í•™ìŠµì— ì‚¬ìš©í•œ ì±…ì€ ìœ„ì— ë‚˜ì™€ìˆëŠ” ì±…ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.** ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” ë°ì´í„°ì˜ ì¸ì¦ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ì„¸ë¶€ì ì¸ ë‚´ìš©ì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.**\n\n> **(+) ë“¤ì–´ê°€ê¸°ì— ì• ì„œ...**\n\nBitcoinì—ì„œëŠ” ê²°ì œê°€ ë°œìƒí•  ë•Œ, ì´ì „ ê±°ë˜ì—ì„œ ì–»ì€ Bitcoinì„ í†µí•´ì„œë§Œ ê²°ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ê±°ë˜ë¥¼ í†µí•´ Bitcoinì„ ë°›ì€ ì ì´ ì—†ë‹¤ë©´, Bitcoinì´ ì—†ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.)\n\në˜í•œ, ìš°ë¦¬ëŠ” ì´ ê±°ë˜ ë‚´ì—­ì„ ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆë„ë¡ ê³µê°œí•©ë‹ˆë‹¤. ì´ ìƒí™©ì—ì„œ ìš°ë¦¬ê°€ íŠ¹ì • ê±°ë˜ ë‚´ì—­ì—ì„œ ëˆì„ ë°›ì€ ì‚¬ëŒì´ ìì‹ ì´ê³ , ê·¸ ê±°ë˜ì—ì„œ ì–»ì€ Bitcoinì„ í˜„ì¬ ê±°ë˜ì— ì‚¬ìš©í•  ê²ƒì„ì„ ì¦ëª…í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?\n\n---\n\nì¼ë°˜ì ìœ¼ë¡œ ì¸ì¦ì´ë¼ëŠ” ê²ƒì€ ëˆ„êµ°ê°€ê°€ íŠ¹ì • ì‚¬ì‹¤ì„ ì¦ëª…í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ”, ë°ì´í„°ì˜ ì‘ì„±ìê°€ ì§„ì§œ ì‘ì„±ìê°€ ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ëŒ€ê²Œ ë¯¿ì„ ë§Œí•œ ì œ3 ìì—ê²Œ ë§¡ê¸°ê±°ë‚˜ ì§ì ‘ ëˆˆìœ¼ë¡œ í™•ì¸í•˜ëŠ” ë°©ì‹ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ë§¤ë²ˆ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ì–´ë µê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” ì›ë³¸ ë°ì´í„°ì— ì„œëª…ì„ í•˜ëŠ” ê²ƒì„ íƒí•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ìì‹ ì´ í•´ë‹¹ ë°ì´í„°ì˜ ì‘ì„±ìì„ì„ ë¶„ëª…í•˜ê²Œ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ°ë°, ì´ê²ƒì„ programming ì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì‰¬ìš´ ì¼ì´ ì•„ë‹™ë‹ˆë‹¤.\n\nëŒ€ê²Œ ì´ë¥¼ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ê³µê°œí‚¤ ë°©ì‹ì´ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê³µê°œí‚¤ ë°©ì‹ì´ë€, ì•”í˜¸í™”í•˜ëŠ” ë„êµ¬ì™€ í•´ë…í•˜ëŠ” ë„êµ¬ê°€ ì„œë¡œ ë‹¤ë¥¸ ê²½ìš°ë¥¼ ë§í•©ë‹ˆë‹¤.\n\nì¦‰, í•´ë…í•˜ëŠ” ë„êµ¬ëŠ” ëˆ„êµ¬ë‚˜ì—ê²Œë‚˜ ì œê³µì„ í•˜ê³ , ì•”í˜¸í™”í•˜ëŠ” ë„êµ¬ëŠ” ìì‹ ë§Œì´ ê°€ì§€ê³  ìˆë„ë¡ í•˜ì—¬, ì›ë³¸ ë°ì´í„°ì™€ ì›ë³¸ ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•œ ë°ì´í„°ë¥¼ ê°™ì´ ë³´ë‚´ë©´, ì´ë¥¼ ë°›ì€ ì‚¬ìš©ìë“¤ì´ í•´ë…í•˜ëŠ” ë„êµ¬ë¥¼ í†µí•´ ì•”í˜¸í™”í•œ ë°ì´í„°ë¥¼ ë³µêµ¬í•˜ê³ , ì›ë³¸ë°ì´í„°ì™€ ëŒ€ì¡°í•´ë³´ë©´, ì›ë³¸ë°ì´í„°ì˜ ì‘ì„±ìê°€ ì „ì†¡ìì„ì„ ëª…í™•í•˜ê²Œ í™•ì‹ í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ì¦‰, ì›ë³¸ë°ì´í„°ë¥¼ ì•”í˜¸í™”í•œ ë°ì´í„°ê°€ ë°”ë¡œ í•˜ë‚˜ì˜ ì„œëª…ì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì´ë¥¼ ì•”í˜¸í™”í•˜ëŠ” í‚¤ëŠ” ì „ì†¡í•œ ì‚¬ëŒë§Œ ê°–ê³  ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\n**programmingì ìœ¼ë¡œ ì´ëŸ¬í•œ ê³µê°œí‚¤ ë°©ì‹ì„ êµ¬í˜„í•˜ëŠ” ê²ƒì€ one way function (í•œ ë°©í–¥ í•¨ìˆ˜, ì•”í˜¸í™”ëŠ” ì‰½ì§€ë§Œ inversionì´ ì–´ë ¤ìš´ í•¨ìˆ˜, ì•”í˜¸í™” ë„êµ¬)ì´ë©´ì„œ, trap door(ì†ì„ìˆ˜, í•´ë…í•˜ëŠ” ë„êµ¬)ë¥¼ ê°€ì§€ëŠ” algorithmì„ ì°¾ì•„ë‚´ëŠ” ê²ƒì…ë‹ˆë‹¤.** ì¦‰, keyë¥¼ ê°–ê³  ìˆìœ¼ë©´ ì‰½ê²Œ ì•”í˜¸ë¥¼ ìƒì„±í•  ìˆ˜ ìˆì§€ë§Œ, keyê°€ ì—†ë‹¤ë©´, ì´ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ RSAë¼ëŠ” ì†Œì¸ìˆ˜ ë¶„í•´ì˜ ë‚œí•´í•¨ì„ ì´ìš©í•˜ëŠ” algorithmì´ ìˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, Bitcoinì—ì„œëŠ” ì„œëª…ì„ í•˜ê¸° ìœ„í•´ì„œ, ECDSA(Elliptic Curve Digital Signature Algorithm)ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì—¬ê¸°ì„œëŠ” ì´ ê¸°ìˆ ì— ëŒ€í•´ì„œ ìì„¸íˆ ì•Œì•„ë³¼ ê²ƒì…ë‹ˆë‹¤.\n\nì¼ë‹¨ ì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ì´ë¥¼ ì´ë£¨ëŠ” ê¸°ë°˜ ìˆ˜í•™ì  ìš©ì–´ë¥¼ ë¨¼ì € ë°°ì›Œì•¼ í•©ë‹ˆë‹¤.\n\n1. ìœ í•œ ê³µê°„ Finite Field\n2. íƒ€ì› ê³¡ì„  Elliptic Curve\n\në”°ë¼ì„œ, ì´ì— ëŒ€í•œ ë‚´ìš©ì„ ì´ì œë¶€í„° í•˜ë‚˜í•˜ë‚˜ì”© ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n## 1. ìœ í•œ ê³µê°„ Finite Field\n\në“¤ì–´ê°€ê¸°ì— ì• ì„œ ë‘ ê°€ì§€ ê°œë…ì„ ì •ë¦¬í•˜ê³  ê°€ì•¼ í•©ë‹ˆë‹¤.\n\në¨¼ì €, ì†Œìˆ˜ì…ë‹ˆë‹¤. **ì†Œìˆ˜**(**Prime Number**)ëŠ” 1ê³¼ ìì‹  ì´ì™¸ì˜ ìì—°ìˆ˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ì—†ëŠ”, 1ë³´ë‹¤ í° ìì—°ìˆ˜ì…ë‹ˆë‹¤. ë˜í•œ, í•´ë‹¹ ìˆ«ìë“¤ì€ ê·œì¹™ì„±ì„ ê°–ê³  ìˆì§€ ì•Šê¸° ë•Œë¬¸ì—, í•˜ë‚˜ì˜ ì†Œìˆ˜ê°€ ì£¼ì–´ì§„ ë’¤ì— ì´ë³´ë‹¤ í° ë°”ë¡œ ë‹¤ìŒ ì†Œìˆ˜ë¥¼ ì°¾ëŠ” ê²ƒì€ ì§ì ‘ í•´ë³´ì§€ ì•Šìœ¼ë©´ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\në‹¤ìŒì€ **modulo(ë‚˜ë¨¸ì§€ ì—°ì‚°ì, %)ì…ë‹ˆë‹¤.** íŠ¹ì • ê°’ì„ ë‚˜ëˆ„ê³ , ë‚¨ì€ ë‚˜ë¨¸ì§€ë¥¼ ë°˜í™˜í•˜ëŠ” ì—°ì‚°ìë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n$$10 \\% 3 = 1, 10 \\% 2 = 0$$\n\ní•´ë‹¹ ì—°ì‚°ì€ ì¼ë°˜ì ì¸ ëŒ€ìˆ˜í•™ì˜ ì—°ì‚°ê³¼ëŠ” ë‹¤ë¥´ê²Œ ë™ì‘í•˜ê²Œ í•˜ê¸° ë•Œë¬¸ì—, ì´ì— ëŒ€í•˜ì—¬, ì•ìœ¼ë¡œ ì‚¬ìš©í•  íŠ¹ì§• ëª‡ ê°€ì§€ë¥¼ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n1. $ a \\% b \\lt b $\n2. $ (a \\times b) \\% c = \\{(a \\% c) \\times (b \\% c)\\} \\% c $\n3. $ a^{b} \\% (b-1) = 1 $\n\nìœ„ì˜ 3ê°€ì§€ íŠ¹ì§•ì— ëŒ€í•œ ìì„¸í•œ ì¦ëª…ì€ ì—¬ê¸°ì„œ ë‹¤ë£¨ê¸°ë³´ë‹¤, ê¶ê¸ˆí•˜ì‹œë‹¤ë©´, ì§ì ‘ ì°¾ì•„ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.\n\nì´ë¥¼ í†µí•´ì„œ Finite Fieldì—ì„œì˜ ì—°ì‚°ì„ í‘œí˜„í•  ìˆ˜ ìˆìœ¼ë‹ˆ ì´ë¥¼ ê¸°ì–µí•´ë‘¡ì‹œë‹¤.\n\n**Finite Field**ë€ íŠ¹ì • ì†Œìˆ˜ë³´ë‹¤ ì‘ì€, 0ì„ í¬í•¨í•œ ìì—°ìˆ˜ ì§‘í•©ìœ¼ë¡œ, ì´ë£¨ì–´ì§€ê³ ,\n\n$$ F\\_3 = \\{ 0, 1, 2 \\} $$\n\n$$ F\\_{11} = \\{ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 \\} $$\n\në‹¤ìŒ 6ê°€ì§€ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì§‘í•©ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\n- Additive closed, ë§ì…ˆì— ëŒ€í•˜ì—¬ ë‹«í˜€ìˆë‹¤.\n- Multiplicative closed, ê³±ì…ˆì— ëŒ€í•˜ì—¬ ë‹«í˜€ìˆë‹¤.\n- Additive identity, ë§ì…ˆì— ëŒ€í•œ í•­ë“±ì›($0$) ì„ ê°–ëŠ”ë‹¤.\n- Multicative identity, ê³±ì…ˆì— ëŒ€í•œ í•­ë“±ì›($1$) ì„ ê°–ëŠ”ë‹¤.\n- Additive inverse, ë§ì…ˆì— ëŒ€í•œ ì—­ì›($-a$)ì„ ê°–ëŠ”ë‹¤.\n- Multicative inverse, ê³±ì…ˆì— ëŒ€í•œ ì—­ì›($a^{-1}$)ì„ ê°–ëŠ”ë‹¤.\n\nê° ì¡°ê±´ì„ ì‚´í´ë³´ê¸°ì— ì•ì„œì„œ Finite Fieldë¥¼ ì •ì˜í•˜ëŠ” ì†Œìˆ˜ë³´ë‹¤ í° ê°’ì€ í•´ë‹¹ ì†Œìˆ˜ë¥¼ í†µí•´ì„œ modulo ì—°ì‚°ë˜ì–´, Finite Fieldì— ì†í•˜ê²Œ ë©ë‹ˆë‹¤. (ì´ëŠ” modulo ì—°ì‚°ì˜ ì²« ë²ˆì§¸ íŠ¹ì§•($a \\% b \\lt b $)ì„ í†µí•´ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.) ë§ˆì¹˜ ì‹œê³„ì™€ ê°™ì´ ìˆœí™˜í•˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ë¥¼ í†µí•´ì„œ, Finite Fieldì˜ ì²« ë²ˆì§¸ì™€ ë‘ ë²ˆì§¸ ì¡°ê±´ì€ ë§Œì¡±í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ë§ì…ˆê³¼ ê³±ì…ˆìœ¼ë¡œ ìƒì„±ëœ ê²°ê´ê°’ì€ ë°˜ë“œì‹œ ë‹¤ì‹œ Finite Fieldì— ì†í•˜ê²Œ ë˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\n\nì„¸ ë²ˆì§¸, ë„¤ ë²ˆì§¸ ì¡°ê±´ì€ ì†Œìˆ˜ëŠ” í•­ìƒ 2ë³´ë‹¤ í¬ê¸° ë•Œë¬¸ì—, 0ê³¼ 1ì„ í¬í•¨í•  ìˆ˜ë°–ì— ì—†ìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, Finite FieldëŠ” ë§ì…ˆê³¼ ê³±ì…ˆì— ëŒ€í•œ í•­ë“±ì›ì„ ê°€ì§„ë‹¤ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në‹¤ì„¯ ë²ˆì§¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n$F\\_{p} = \\{0,1,2,3,..., p - 2, p - 1\\}$ì´ê³ , $ a \\in F\\_{p} $ì¸ ê²½ìš°\n\n$$ -a = p - a $$\n\në¼ê³  ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì—¬ì„¯ ë²ˆì§¸ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n$F\\_{p} = \\{0,1,2,3,..., p - 2, p - 1\\}$ ì´ê³ , $ a \\in F\\_{p} $ì¸ ê²½ìš°\n\n$$ a^{-1} = a^{-1} \\times 1 = a^{-1} \\times a^{p-1} $$\n\n$$ a^{-1} = a^{p - 2} $$\n\nmoduloì˜ ì„¸ ë²ˆì§¸ íŠ¹ì§•ì„ í™œìš©í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ëŸ¬í•œ modulo ì—°ì‚°ì„ í™œìš©í•˜ëŠ” Finite Fieldì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\nìœ„ì—ì„œ ë³´ì•˜ë“¯ì´ ë§ì…ˆê³¼ ê³±ì…ˆ ì—°ì‚°ì€ ì—­ì›ì´ ì¡´ì¬í•˜ì—¬, ê²°ê´ê°’ì„ ê°–ê³  ì—­ìœ¼ë¡œ ì›ë˜ ê°’ì„ ì°¾ì•„ë‚´ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ê³µê°„ì— ì—­ì´ ì—†ëŠ” ì—°ì‚°ìë¥¼ ì¶”ê°€í•œë‹¤ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”? ì´ë¥¼ ê¸°ì–µí•˜ê³  ë„˜ì–´ê°‘ì‹œë‹¤.\n\n## 2. íƒ€ì› ê³¡ì„  Elliptic Curve\n\në‹¤ìŒ ì‹ì„ ë§Œì¡±í•˜ëŠ” ì ë“¤ì´ ê·¸ë¦¬ëŠ” ê³¡ì„ ì„ ìš°ë¦¬ëŠ” íƒ€ì› ê³¡ì„ ì´ë¼ê³  í•©ë‹ˆë‹¤.\n\n$$ y^2 = x^3 + ax + b$$\n\n![elliptic-curve](/images/elliptic-curve.jpeg)\n\níƒ€ì› ê³¡ì„  ìƒì—ì„œ ìš°ë¦¬ëŠ” ë§ì…ˆ ì—°ì‚°ê³¼ êµ‰ì¥íˆ ìœ ì‚¬í•œ ì—°ì‚°ì„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ ë™ì‘ì€ ì¼ë°˜ì ì¸ ìˆ˜í•™ì—ì„œì˜ ë§ì…ˆì€ ì•„ë‹ˆì§€ë§Œ, ë§ì…ˆì˜ íŠ¹ì§•ì„ ê°–ê¸° ë•Œë¬¸ì— $+$ ê¸°í˜¸ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n\në°”ë¡œ, ê° íƒ€ì› ê³¡ì„ ê³¼ 3ê°œì˜ ì ì„ ê°€ì§€ëŠ” ì„ ì„ ê·¸ì—ˆì„ ë•Œ, í•­ìƒ ë‹¤ìŒ ì‹ì„ ë§Œì¡±í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. (Rì€ íƒ€ì›ê³¡ì„ ê³¼ ë§Œë‚˜ëŠ” ì„¸ ë²ˆì§¸ ì ì„ Xì¶• ëŒ€ì¹­ì´ë™í•œ ì ì„ ë§í•©ë‹ˆë‹¤.)\n\n$$ P + Q = R $$\n\n![elliptic-curve-addition-1](/images/elliptic-curve-addition-1.jpeg)\n\n$P(x\\_1, x\\_2)$, $Q(x\\_2, y\\_2)$ê°€ íƒ€ì› ê³¡ì„  $y^2=x^3 + ax + b$ ìœ„ì˜ ì ì´ë¼ê³  í•  ë•Œ, $R(x\\_3, y\\_3)$ì˜ ì¢Œí‘œëŠ” ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n- $ s = {dx \\over dy} = { 3x^2 \\overÂ  2y } = { {y\\_2 - y\\_1} \\overÂ  {x\\_2 - x\\_1}} $\n- $ x\\_3 = s^2 - x\\_1 -x\\_2 $\n- $ y\\_3 = s(x\\_1 - x\\_3) - y\\_1 $\n\nì´ ì—°ì‚° ì—­ì‹œ ë‹¤ìŒê³¼ ê°™ì€ ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚µë‹ˆë‹¤.\n\n- Identity, í•­ë“±ì›ì´ ì¡´ì¬í•œë‹¤. => $ A + I = A $\n- Invertibility, ì—­ì›ì´ ì¡´ì¬í•œë‹¤. => $ A = (a\\_1, a\\_2)ì´ë©´, -A= (a\\_1, -a\\_2) $\n- Commutativity, êµí™˜ ë²•ì¹™ => $ A + B = B + A $\n- Associativity, ê²°í•© ë²•ì¹™ => $ A + (B + C) = (A + B) + C $\n\nì—¬ê¸°ì„œì˜ ì—­ì›ì€ xì¶• ëŒ€ì¹­ ì´ë™ì„ í†µí•´ ì–»ì€ ê°’ì´ë¼ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, êµì ì´ ì„¸ ê°œì¸ ì‹œì ì—ì„œ ì§ì„ ì˜ ê¸°ìš¸ê¸°ë¥¼ ë¬´í•œëŒ€ë¡œ ê³„ì† ì˜¬ë¦¬ë‹¤ ë³´ë©´ ê²°êµ­ì€ yì¶•ì— ëŒ€ì¹­ì¸ í˜•íƒœë¡œ ì§ì„ ì´ ë§Œë“¤ì–´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì•„ë˜ ê·¸ë¦¼ì—ì„œ ë‘ ë²ˆì§¸) ì´ ê²½ìš°ì— ìš°ë¦¬ëŠ” ì‹¤ì œë¡œëŠ” êµì ì´ ë‘ ê°œì§€ë§Œ, ë¬´í•œëŒ€ ì§€ì ì—ì„œ êµì ì´ í•˜ë‚˜ ë” ìˆë‹¤ê³  ë§í•˜ê³  ì´ë¥¼ I(Infinity)ë¼ê³  ì •ì˜í•©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´, í•­ë“±ì›ì´ ë°”ë¡œ Iê°€ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë‘ ë²ˆì§¸ ê·¸ë¦¼ì—ì„œ $P + I = P$ê°€ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.) ì´ë¥¼ í†µí•´ì„œ ë‘ ë²ˆì§¸ì— ì¡´ì¬í•˜ëŠ” ì—­ì›ê¹Œì§€ë„ ì¦ëª…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.($P + (-P) = I$)\n\n![elliptic-curve-addtion-2](/images/elliptic-curve-addition-2.png)\n\n![elliptic-curve-addition-3](/images/elliptic-curve-addition-3.jpeg)\n\nì„¸ ë²ˆì§¸ëŠ” ë„ˆë¬´ë‚˜ ìëª…í•˜ê¸° ë•Œë¬¸ì— ë„˜ì–´ê°€ê³ , ë„¤ ë²ˆì§¸ëŠ” ì•„ë˜ ê·¸ë¦¼ì„ í†µí•´ì„œ ì„¤ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì£¼í™©ìƒ‰ : $ (P + Q) + S = R\\_1 + S = T $\n\nì´ˆë¡ìƒ‰ : $ (P + S) + Q = R\\_2 + Q = T $\n\n![elliptic-curve-addition-4](/images/elliptic-curve-addition-4.jpeg)\n\nì¶”ê°€ì ìœ¼ë¡œ ì‚´í´ë³¼ ìˆ˜ ìˆëŠ” í•˜ë‚˜ì˜ ì—°ì‚°ì„ í•˜ë‚˜ ë” ì•Œì•„ë³´ê³  ê°‘ì‹œë‹¤.\n\në°”ë¡œ ì ‘ì„ ì—ì„œ ì—°ì‚°ì…ë‹ˆë‹¤. ì´ ê²½ìš°ëŠ” Pì™€ Qê°€ ê°™ë‹¤ê³  ì—¬ê¹ë‹ˆë‹¤. ì¦‰, ìê¸° ìì‹ ì„ ë‘ ë²ˆ ë” í•˜ëŠ” ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ë¥¼ $ P + P = R = 2P $ë¼ê³  í‘œí˜„í•©ë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ë°˜ë³µí•˜ë©´ì„œ, ê²°ê³¼ ê°’ì„ ë„ì¶œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ë„ ì‘ì„±ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ì´ë¥¼ ìš°ë¦¬ëŠ” Elliptic Curveì—ì„œì˜Â **Scalar Multiplication**ì´ë¼ê³  í•©ë‹ˆë‹¤.)\n\n$$ kP = R $$\n\nì´ë¥¼ ê³„ì‚°í•˜ê¸° ìœ„í•´ì„œëŠ”, ì¼ë°˜ì ìœ¼ë¡œ k ë²ˆì˜ Elliptic Curve Additionì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ë” ê°„ëµí™”í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\n\n$$ R = 63P = (1 + 2 + 4 + 8 + 16 + 32) P = (1 + (1+1) + (2+2) + (4+4) + (8+8) + (16+16)) P $$\n\nì¦‰, ì´ì „ ê³„ì‚°ì˜ ê²°ê³¼ë¥¼ í˜„ì¬ ê³„ì‚°ì— í™œìš©í•˜ì—¬ ê³„ì‚°ì„ ë” ë¹ ë¥´ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ ì˜ˆì‹œì—ì„œëŠ” 62(63 - 1) ë²ˆì˜ ë”í•˜ê¸° ì—°ì‚°ì„ 10ë²ˆìœ¼ë¡œ ì¤„ì¸ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ë¬¼ë¡  ì´ì™¸ì—ë„ ë§ì€ ë°©ì‹ìœ¼ë¡œ ìµœì í™”ë¥¼ í•  ìˆ˜ ìˆì§€ë§Œ, ì´ ì •ë„ë©´ ëŒ€ê²Œ ì¶©ë¶„í•©ë‹ˆë‹¤.)\n\n![elliptic-curve-addition-5](/images/elliptic-curve-addition-5.jpeg)\n\nì—¬ê¸°ì„œ ì£¼ëª©í•  í¬ì¸íŠ¸ë¥¼ í•˜ë‚˜ ì§šì–´ë³´ê³  ê°€ì•¼í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ $R$ê³¼, $P$ë¥¼ ì•Œê³  ìˆì„ ë•Œ, $k$ êµ¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í• ê¹Œìš”?\n\nì´ëŠ” ì‰½ì§€ ì•Šì€ ë¬¸ì œê°€ ë©ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì´ëŸ¬í•œ scalar multiplcationë¬¸ì œì—ì„œëŠ” ì—­ì›ì´ ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, kì— ê°’ì„ 1ë¶€í„° ëŒ€ì…í•´ë³´ë©´ì„œ í™•ì¸í•´ ë³¼ ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\n---\n\nì´ì œ ê¸°ë³¸ì´ ë˜ëŠ” ë‘ ì´ë¡ ì„ ì„¸íŒ…í•˜ì˜€ìŠµë‹ˆë‹¤.\n\nì¼ë‹¨ì€ ìœ ì˜í•´ì•¼ í•  ì ì€ ë°”ë¡œ Finite Fieldë¡œ Elliptic Curveë¥¼ ê°€ì ¸ì˜¤ê²Œ ë˜ë©´, ì´ëŠ” discrete(ë¶ˆì—°ì†) í•´ì§„ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ë˜í•œ, Scalar Multiplicationì—ë„ ë³€í™”ê°€ ë°œìƒí•©ë‹ˆë‹¤. **ë°”ë¡œ ìˆœí™˜ì´ë¼ëŠ” ê²ƒì´ ìƒê¸´ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.** $nP = R = 0$ ì´ ë˜ëŠ” $n$ê°’ì´ ì¡´ì¬í•˜ê²Œ ëœë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜í•œ, ì—­ì›ì´ ì—†ëŠ” ì„±ì§ˆ ë˜í•œ ìœ ì§€ë˜ê¸° ë•Œë¬¸ì—, $kP$ë¥¼ í†µí•´ì„œ ìƒì„±ëœ ê°’($R$)ê³¼ Pë¥¼ ëª¨ë‘ ê³µê°œí•˜ë”ë¼ë„, $k$ê°€ ë°í˜€ì§ˆ ê°€ëŠ¥ì„±ì€ $n$ê°’ì´ ì»¤ì§ˆìˆ˜ë¡ ë¶ˆê°€ëŠ¥ì— ê°€ê¹ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì‹¤ì œë¡œ Bitcoinì—ì„œëŠ” ì´ Nì„ ë§¤ìš° í¬ê²Œ ì„¤ì •í•˜ì˜€ê¸° ë•Œë¬¸ì— ë¬¸ì œê°€ ì—†ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•œ ë²ˆ Bitcoinì—ì„œ, Finite Field ìƒì˜ Elliptic Curveì˜ ëª¨ë“  ë³€ìˆ˜ë¥¼ ì •ë¦¬í•´ë´…ì‹œë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ, í•´ë‹¹ ì•”í˜¸í™”ì— ì‚¬ìš©ë˜ëŠ” ëª¨ë“  ê°’ì˜ ë‹¨ìœ„ëŠ” 256 bits ì¦‰, 32 bytesë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n1. Elliptic Curveì˜ í˜•íƒœ : $a=0$, $b=7$ì„ ì‚¬ìš©í•˜ëŠ” secp256k 1ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ í˜•íƒœëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $$y^2 = x^3 + 7$$\n2. Finite Fieldì˜ ì†Œìˆ˜ : ìœ„ì—ì„œ ë§í•œ ëŒ€ë¡œ $n$ì˜ ê°’ì„ í¬ê²Œ í•˜ê¸° ìœ„í•´ì„œ finite field ìì²´ì˜ í¬ê¸°ë„ ë§¤ìš° ì»¤ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì—, $p$ ì—­ì‹œ ë§¤ìš° í½ë‹ˆë‹¤. $$p = 2^{256} - 2^{32} - 977 $$\n3. Scalar Multiplicationì— ì‚¬ìš©ë˜ëŠ” Elliptic Curve ìœ„ì˜ í•œ ì ($G$) : ì´ ë˜í•œ ë§¤ìš° í¬ê¸° ë•Œë¬¸ì— ê° ì¢Œí‘œë³„ë¡œ ë”°ë¡œ ì ê² ìŠµë‹ˆë‹¤. $G\\_x = $ 0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798  \n    $G\\_y = $ 0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8\n4. Scalar Mutiplicationì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” $k$ì˜ ë²”ìœ„ ($n$)Â : ìœ„ì—ì„œë„ ë³´ì•˜ê² ì§€ë§Œ, 0xëŠ” 16ì§„ìˆ˜ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.  \n    $n = $ 0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141  \n\nìœ„ì˜ ë°ì´í„°ë¥¼ ë³´ë‹¤ì‹œí”¼ ë§¤ìš° í° ë²”ìœ„ì˜ ê°’ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ í•œ ë²ˆ ìš°ë¦¬ê°€ ì•”í˜¸í™” í‚¤ì™€ í•´ë… í‚¤(ê³µê°œí‚¤)ë¥¼ ê° ê° ë§Œë“¤ì–´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\në¨¼ì €, ì•”í˜¸í™” í‚¤($e$)ë¥¼ ë§Œë“œëŠ” ê²ƒì€ ë§¤ìš° ì‰½ìŠµë‹ˆë‹¤.\n\në°”ë¡œ $n$ë³´ë‹¤ ì‘ì€ ì„ì˜ì˜ ìˆ˜ë¥¼ ê³ ë¥´ë©´ ë©ë‹ˆë‹¤.\n\nê·¸ë¦¬ê³ , ì´ë¥¼ ì´ìš©í•´ì„œ, ìš°ë¦¬ëŠ” ë°”ë¡œ í•´ë… í‚¤ì¸ ê³µê°œí‚¤ë¥¼($P$) ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n$$ P = eG $$\n\nì´ë ‡ê²Œ í•˜ë©´ ëì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” $e$ë¥¼ ëª¨ë¥´ê¸° ë•Œë¬¸ì—, $P$ì™€ $G$ê°€ ëª¨ë‘ê°€ ì•„ëŠ” ê°’ì´ë¼ê³  í• ì§€ë¼ë„ $e$ë¥¼ ì•Œì•„ë‚¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\nê·¸ë ‡ê¸°ì— ìš°ë¦¬ëŠ” ì•ˆì‹¬í•˜ê³ , Pë¥¼ ê³µê°œí•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ì œ ìš°ë¦¬ëŠ” ì´ê²ƒì„ ì´ìš©í•´ì„œ í•œ ë²ˆ ì„œëª…ì„ í†µí•œ ì¸ì¦ì„ ìˆ˜í–‰í•´ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\në¨¼ì €, ìš°ë¦¬ê°€ ë³´ë‚´ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ $m$ì´ë¼ê³  í•˜ê² ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ë¥¼ ë°”ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì€ ì‰½ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ë³´ë‚´ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ í¬ê¸°ê°€ 32 bytesë¥¼ í•­ìƒ ë§Œì¡±í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ë¥¼ 32 bytesë¡œ ë³€í™˜í•´ì¤„ ë°©ë²•ì´ í•„ìš”í•  ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ, ìš°ë¦¬ëŠ” hashingì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë˜í•œ, ì›ë³¸ë°ì´í„° ìì²´ë¥¼ ì•Œì•„ë³¼ ìˆ˜ ì—†ê²Œ ë°”ê¿”ë²„ë¦¬ëŠ” ì—­í• ë„ í•´ì„œ ì•”í˜¸í™”ì˜ ì—­í• ë„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§„ ë°ì´í„°ë¥¼ ìš°ë¦¬ëŠ” $z$ë¼ê³  í•˜ê² ìŠµë‹ˆë‹¤.\n\nì´ì œ ì—¬ê¸°ì„œ, ìš°ë¦¬ëŠ” ë¹„ë°€í‚¤ê°€ ì•„ë‹Œ ë˜ í•˜ë‚˜ì˜ ê°’ì„ í•˜ë‚˜ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤. ë°”ë¡œ $k$ì…ë‹ˆë‹¤. ì´ëŠ” ë¹„ë°€í‚¤ì™€ ë§ˆì°¬ê°€ì§€ë¡œ $n$ë³´ë‹¤ ì‘ì€ 32bytesë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\n$$ kG = R $$\n\nì„ ì „ì†¡ì ì¸¡ì—ì„œ ê³„ì‚°ì„ í•˜ê³ , $R$ì˜ $x$ ì¢Œí‘œë¥¼ $r$ì´ë¼ê³  ì •ì˜í•˜ë©´ ê±°ì˜ ëª¨ë“  ì„¤ì •ì€ ëë‚¬ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ì œ ì§„ì§œë¡œ ì„œëª…ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në°”ë¡œ $ uG + vP = kP = R $ë¼ê³  í•  ë•Œ,\n\n$$ u + ve = k $$\n\n$$ u = z / s $$\n\n$$ v = r / s $$\n\nê°€ ë˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ë ‡ê²Œ ë˜ë©´, $u$ë¼ëŠ” ê°’ì€ $z$ë¥¼ ê°€ì§€ë¯€ë¡œ, ì›ë³¸ ë°ì´í„°ë¥¼ í¬í•¨í•œë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, $v$ëŠ” $r$ì„ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ ê°’ ìì²´ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ëŠ” í•´ë‹¹ ë°©ì •ì‹ì„ í’€ì–´ì„œ ë³´ë©´, $$ s = ( z + re ) / k $$ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ $e$ì™€ $k$ë¼ëŠ” ê°ì¶°ì ¸ì•¼ë§Œ í•˜ëŠ” ê°’ì´ ë‘ ê°œ í¬í•¨ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•´ë‹¹ ë°©ì •ì‹ì€ ì•ˆì „í•˜ê²Œë„ $e$, $k$ê°€ ëª¨ë‘ ë³€ìˆ˜ë¡œ ë‚¨ê¸° ë•Œë¬¸ì— $s$, $z$, $r$ì„ ì•ˆë‹¤ê³  í•´ë„ $e$ì™€ $k$ë¥¼ êµ¬í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, $s$ì™€ $r$ì„ í•˜ë‚˜ë¡œ í•©ì³ì„œ í•˜ë‚˜ì˜ ì„œëª…(Signature)ì„ ì´ë£¨ê²Œ ë©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ì „ì†¡ìëŠ” $z$(ë³´ë‚¼ ë°ì´í„°)ì™€ $r$, $s$(ì„œëª…)ë¥¼ ì „ì†¡í•¨ìœ¼ë¡œì¨, ë°ì´í„°ì˜ ìˆ˜ì‹ ìê°€ ì§ì ‘ ì„œëª…ì˜ ì ì ˆí•¨ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nìˆ˜ì‹ ìëŠ” ì´ì œ ë°›ì€ ë°ì´í„°ë¥¼ í†µí•´ì„œ ë‹¤ìŒ ê³¼ì •ì„ ì§„í–‰í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n1. $u$ì™€ $v$ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ($u = z / s $, $v = r / s$)\n2. $uG + vP$ì˜ ì—°ì‚°ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n3. ìœ„ì˜ ê²°ê´ê°’ì„ í†µí•´ì„œ ì–»ì€ ì¢Œí‘œê°’ì˜ x ì¢Œí‘œì™€ r ê°’ì„ ë¹„êµí•˜ì—¬ ë™ì¼í•œì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.  \n    $$ uG + vP = R $$\n4. ì´ê²ƒì´ ë™ì¼í•˜ë‹¤ë©´, í•´ë‹¹ ë°ì´í„°ëŠ” ì¸ì¦ëœ ë°ì´í„°ì…ë‹ˆë‹¤.\n\nì´ê²ƒì´ BitCoinì—ì„œ ì‚¬ìš©í•˜ëŠ” ì„œëª… ë°©ì‹ì¸ ECDSAì…ë‹ˆë‹¤. ì´ì— ëŒ€í•œ êµ¬í˜„ì€ githubì— ì˜¬ë ¤ ë‘ì—ˆìœ¼ë‹ˆ, í™•ì¸ì„ ì›í•˜ì‹œë©´ ì²´í¬í•´ë³´ì‹œê¸¸ ë°”ëë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"bitcoin-1","date":"2022-03-16 18:15","title":"[Bitcoin] 1. ECDSAë¥¼ ì´ìš©í•œ ì„œëª…","category":"Tech","tags":["BlockChain","Bitcoin"],"desc":"Blockchainì„ ê³µë¶€í•˜ê²Œ ë˜ì—ˆëŠ”ë°, ì´ë²ˆ ê¸°íšŒì— ì œëŒ€ë¡œ í•˜ìëŠ” ìƒê°ì—ì„œ Bitcoin êµ¬í˜„ì„ ì§ì ‘ ìˆ˜í–‰í•´ë³¼ ìƒê°ì…ë‹ˆë‹¤. í•™ìŠµì— ì‚¬ìš©í•œ ì±…ì€ ìœ„ì— ë‚˜ì™€ìˆëŠ” ì±…ì„ í™œìš©í•˜ì˜€ìŠµë‹ˆë‹¤.í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤. ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.í•´ë‹¹ chapterì—ì„œëŠ” ë°ì´í„°ì˜ ì¸ì¦ì„ ì–´ë–»ê²Œ ìˆ˜í–‰í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ì„¸ë¶€ì ì¸ ë‚´ìš©ì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤. (+) ë“¤ì–´ê°€ê¸°ì— ì• ì„œ...Bitcoinì—ì„œëŠ” ê²°ì œê°€ ë°œìƒí•  ë•Œ, ì´ì „ ê±°ë˜ì—ì„œ ì–»ì€ Bitcoinì„ í†µí•´ì„œë§Œ ê²°ì œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. (ê±°ë˜ë¥¼ í†µí•´ Bitcoinì„ ë°›ì€ ì ì´ ì—†ë‹¤ë©´, Bitcoinì´ ì—†ëŠ” ê²ƒìœ¼ë¡œ ê°„ì£¼í•©ë‹ˆë‹¤.)ë˜í•œ, ìš°ë¦¬ëŠ” ì´ ê±°ë˜ ë‚´ì—­ì„ ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆë„ë¡ ê³µê°œí•©ë‹ˆë‹¤. ì´ ìƒí™©ì—ì„œ ìš°ë¦¬ê°€ íŠ¹ì • ê±°ë˜ ë‚´ì—­ì—ì„œ ëˆì„ ë°›ì€ ì‚¬ëŒì´ ìì‹ ì´ê³ , ê·¸ ê±°ë˜ì—ì„œ ì–»ì€ Bitcoinì„ í˜„ì¬ ê±°ë˜ì— ì‚¬ìš©í•  ê²ƒì„ì„ ì¦ëª…í•˜ê¸° ìœ„í•´ì„œëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œìš”?","thumbnailSrc":"https://euidong.github.io/images/bitcoin.jpg"},{"content":"\n## Intro\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.**Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” Bitcoinì—ì„œ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ Serialization í•˜ê³ , Parsing í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤.**\n\n---\n\në¨¼ì €, Serializationì´ ë¬´ì—‡ì¸ì§€ë¶€í„° ì•Œì•„ë³´ì•„ì•¼ í•©ë‹ˆë‹¤. Serializationì´ë€ í˜„ì¬ programmerê°€ ë§Œë“¤ì–´ë†“ì€ data(Class Instance, ë“±)ë¥¼ networkë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ computerë¡œ ì˜®ê¸°ê±°ë‚˜, ì €ì¥ ì¥ì¹˜ file ë“±ìœ¼ë¡œ ì˜®ê²¨ ë‹´ì„ ë•Œ, **ì—°ì†ì ìœ¼ë¡œ í‘œí˜„ë˜ëŠ” í˜•íƒœ**ë¡œ êµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•ì„ ë§í•©ë‹ˆë‹¤. ëŒ€ê²Œ, ì´ëŸ¬í•œ ì²˜ë¦¬ëŠ” ì›ë³¸ ë°ì´í„°ë¥¼ ë³€í™˜í•˜ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì›ë˜ dataë¡œ ë³€í™˜í•˜ëŠ” Parsingê³¼ ì§ì„ ì´ë£¹ë‹ˆë‹¤.\n\në°ì´í„°ë§ˆë‹¤, ê·¸ë¦¬ê³  ì‚¬ëŒë§ˆë‹¤ ë” ì¢‹ë‹¤ê³  ìƒê°í•˜ëŠ” serialization ë°©ì‹ì€ ë§¤ìš° ë§ìŠµë‹ˆë‹¤.\n\nëŒ€ê²Œ ê³ ë ¤í•˜ê²Œ ë˜ëŠ” ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n1. **íš¨ìœ¨ì„±** : ë³€í™˜í•˜ëŠ” ë°ì´í„°ê°€ ì§§ê²Œ í‘œí˜„ë  ìˆ˜ë¡ ë” íš¨ìœ¨ì ìœ¼ë¡œ ì „ë‹¬ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì€ ìëª…í•˜ê¸°ì— ì´ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.\n2. **ë³´ì•ˆì„±** : networkë¡œ ì „ë‹¬ì´ ë  ê°€ëŠ¥ì„±ì´ ë†’ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ì „ë‹¬ë°›ì€ ëˆ„êµ¬ë‚˜ ì´ë¥¼ ë³€í™˜í•  ìˆ˜ ìˆë‹¤ë©´, ìœ„í—˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë³´ì•ˆì„±ì„ ìœ„í•´ì„œ, ì•”í˜¸í™” ë˜ëŠ” hashingì„ ìˆ˜í–‰í•˜ê¸°ë„ í•©ë‹ˆë‹¤.\n3. **ì•ˆì •ì„±** : ëŒ€ê²Œ ë³´ì•ˆì„±ê³¼ ë¬¶ì–´ì„œ ì„¤ëª…í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤. ì¦‰, ë°ì´í„°ê°€ ì¤‘ê°„ì— ì†ì‹¤ë˜ì§€ ì•Šê³ , ì•ˆì •ì ìœ¼ë¡œ ì œëŒ€ë¡œ ë„ì°©í–ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒë„ ì¤‘ìš”í•©ë‹ˆë‹¤.\n4. **í‘œì¤€** : ê²°êµ­ Serializationì„ í•˜ë”ë¼ë„, ì´ë¥¼ ìˆ˜ì‹ ë°›ì€ ì…ì¥ì—ì„œëŠ” ì´ë¥¼ ë²ˆì—­í•œ ë‚´ìš©ì— ê´€ì‹¬ì´ ìˆê¸°ì—, ì´ë¥¼ ë²ˆì—­í•  ë°©ë²•ì´ ì„œë¡œ ê³µìœ ê°€ ë˜ì–´ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ë§ì€ ê²½ìš°ì—, Serializationì„ í‘œì¤€ìœ¼ë¡œ ì •í•´ì§„ ë°©ì‹ì„ í†µí•´ì„œ ìˆ˜í–‰ë©ë‹ˆë‹¤. ë˜ëŠ”, ìƒˆë¡œìš´ í‘œì¤€ì„ ë§Œë“¤ì–´ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n5. **ê°€ë…ì„±** : ëŒ€ê²Œ, serializationëœ ë°ì´í„° ìì²´ë¥¼ ì‚¬ëŒ ê°„ì— êµ¬ë‘ë¡œ ì „ë‹¬í•´ì•¼ í•  ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œ, ì¸ê°„ ì¹œí™”ì ì¸ í˜•íƒœë¡œ ë°ì´í„°ë¥¼ ë³€ì¡°í•˜ëŠ” ê²½ìš°ë„ ë§ìŠµë‹ˆë‹¤.\n\n---\n\në¨¼ì €, Bitcoinì—ì„œ êµ¬ì²´ì ìœ¼ë¡œ ì–´ë–¤ ì‹ìœ¼ë¡œ Serializationì„ ì‚´í´ë³´ê¸° ì „ì— ê¸°ë°˜ ê¸°ìˆ ì„ ì•Œì•„ë³¼ ê²ƒì…ë‹ˆë‹¤. ê° ê¸°ìˆ ì— ëŒ€í•´ì„œ ì´ë¯¸ ì•Œê³  ìˆë‹¤ë©´, ë°”ë¡œ ë‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ë„ ì¢‹ìŠµë‹ˆë‹¤.\n\n### 1. Byteí™”\n\nì¼ë°˜ì ìœ¼ë¡œ, Serializationì„ ìˆ˜í–‰í•œ ê²°ê³¼ë¬¼ì€ bytes(8bit) í˜•íƒœë¡œ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ë‹¹ì—°íˆ ì¼ë°˜ì ì¸ programmingì—ì„œ ì‚¬ìš©ë˜ëŠ” integer(4 bytes) í˜•íƒœë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë˜í•œ, ì»´í“¨í„° ìì²´ê°€ byte ë‹¨ìœ„ë¡œ ë°ì´í„°ë¥¼ ì•Œì•„ë¨¹ê¸° ë•Œë¬¸ì—, ì»´í“¨í„° ì¹œí™”ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë³€í™˜í•œë‹¤ê³  ìƒê°í•˜ë©´ ë  ê±° ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ë°ì´í„°ë¥¼ ë³€í™˜í•˜ì—¬ ê²°ê³¼ë¬¼ì´ byte ë‹¨ìœ„ë¡œ ë¬¶ì´ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. (+ ë‹¨ìˆœíˆ ì¢€ ë” íš¨ìœ¨ì ì¸ í˜•íƒœë¡œ ë³€í™˜í–ˆë‹¤ê³  ìƒê°í•´ë„ ë©ë‹ˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ, ì‚¬ëŒì´ í•´ë‹¹ ë¬¸ìë¥¼ ë³´ê³ , í•œ ë²ˆì— ë¬´ìŠ¨ ìˆ«ìì¸ì§€ ì°¾ì•„ë‚´ê¸°ëŠ” ì¢€ í˜ë“¤ì–´ì§‘ë‹ˆë‹¤.)\n\n```c++\n// c++ì„ ì•ˆë‹¤ë©´ ë„ì›€ì´ ë˜ê² ì§€ë§Œ, cë¥¼ ì˜ ëª¨ë¥´ì‹ ë‹¤ë©´, ì´í•´í• ë ¤ê³  í•˜ì§€ë§ê³  ë„˜ì–´ê°€ì…”ë„ ë©ë‹ˆë‹¤.\nint a = 255 // 4 bytes\nchar a = 255 // 1 byte\n```\n\nì—¬ê¸°ì„œ, byte typeì„ ë‹¤ë£° ë•Œ, í•­ìƒ ë°œìƒí•˜ëŠ” ë¬¸ì œì¸ **í˜¸í™˜ì„±**ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤. ì‚¬ëŒì€ ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜ë¥¼ ì“¸ ë•Œ, ì™¼ìª½ì—ì„œë¶€í„° í°ìˆ˜ê°€ ë‚˜ì˜¤ë©°, ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì“°ëŠ” ê²ƒì´ í‘œì¤€ì²˜ëŸ¼ ì •í•´ì ¸ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, computer ì„¸ê³„ì—ì„œëŠ” ê·¸ë ‡ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì™¼ìª½ì´ í° ìˆ˜ ì¸ì§€, ì˜¤ë¥¸ìª½ì´ í° ìˆ˜ ì¸ì§€ë¥¼ ì •í•´ì¤„ í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í‘œì¤€ìœ¼ë¡œ ì •í•´ì„œ ì–´ë–¤ ë°ì´í„°ë¥¼ serialization í•  ë•Œ ì™¼ìª½ì´ í° ìˆ˜ê°€ ë˜ëŠ” (Big endian)ì„ ì‚¬ìš©í• ì§€, ì˜¤ë¥¸ìª½ì´ í° ìˆ˜ê°€ ë˜ëŠ” (Little endian)ì„ ì‚¬ìš©í• ì§€ë¥¼ ë°˜ë“œì‹œ ì •í•´ì•¼ í•©ë‹ˆë‹¤.\n\n### 2. Base58\n\nì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” Base64ë¥¼ ë¨¼ì € ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì´ëŠ” íŠ¹ì • ë°ì´í„°ë¥¼ ì´ 64ê°œì˜ ë¬¸ì (10(ìˆ«ì) + 26(ì•ŒíŒŒë²³ ì†Œë¬¸ì) + 26(ì•ŒíŒŒë²³ ëŒ€ë¬¸ì) + 2(ê¸°í˜¸ +, /))ë¡œ ì´ë£¨ì–´ì§„ ë¬¸ì ì²´ê³„ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ í•˜ë‚˜ì˜ byte(8 bits)ë¡œ 256ê°œì˜ ë°ì´í„°ë¥¼ í‘œí˜„í•  ìˆ˜ ìˆì§€ë§Œ, ë‹¤ìŒê³¼ ê°™ì´ Base64ë¡œ ë³€í™˜í•˜ê²Œ ë˜ë©´ 6bitì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê²°ê³¼ì ìœ¼ë¡œ ë°ì´í„°ì˜ í¬ê¸°ê°€ ì»¤ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤.(ê²°êµ­ì—ëŠ” byteë‹¨ìœ„ë¡œ ì „ì†¡í•˜ëŠ”ë°, ê·¸ì¤‘ì— 6bitë§Œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.) ê·¸ëŸ¼ì—ë„ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” **í˜¸í™˜ì„±**ì„ ë†’ì´ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. êµ­ì œì ì¸ í‘œì¤€ì´ê¸° ë•Œë¬¸ì—, Base64ë¥¼ ì´ìš©í•œë‹¤ë©´, ì–´ë–¤ ì‹œìŠ¤í…œì—ì„œë„ ì´ë¥¼ í•´ì„í•˜ëŠ” ë°ëŠ” ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ í˜•íƒœë¡œì˜ ë³€í™˜ì€ êµ‰ì¥íˆ ë¹ˆë²ˆíˆ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, Base58ì€ ë¬´ì—‡ì¸ê°€ì— ëŒ€í•´ì„œ ê³ ë¯¼ì„ í•´ë³´ì•„ì•¼ í•©ë‹ˆë‹¤. Base58ì´ë€, Base64ì— **ê°€ë…ì„±**ì„ ë†’ì´ê¸° ìœ„í•œ versionì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ì‚¬ëŒì´ ì½ì—ˆì„ ë•Œ, í—·ê°ˆë¦´ ìˆ˜ ìˆê² ë‹¤ê³  íŒë‹¨ë˜ëŠ” ë°ì´í„°ë¥¼ ê³¼ê°í•˜ê²Œ ì œê±°í•´ë²„ë¦¬ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ê¸°ì¡´ì˜ Base64ì—ì„œ 0(ìˆ«ì 0), O(ëŒ€ë¬¸ì o), l(ì†Œë¬¸ì L), I(ëŒ€ë¬¸ì i), +, /ë¥¼ ì œê±°í•˜ì—¬ í‘œí˜„í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ê²°ë¡ ìƒ 58ê°œì˜ ë¬¸ì (9(ìˆ«ì) + 25(ì†Œë¬¸ì) + 24(ëŒ€ë¬¸ì))ë¡œ í‘œí˜„í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë˜í•œ, ë¶€ê°€ì ìœ¼ë¡œ **ì•ˆì •ì„±**ì„ ë†’ì´ê¸° ìœ„í•´ì„œ, base58ì—ì„œëŠ” hash256ì„ ì´ìš©í•´ì„œ ë§Œë“¤ì–´ì§„ ë°ì´í„°ë¥¼ ì¶”ê°€ë¡œ ì „ì†¡í•˜ì—¬, checksumìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” êµ¬í˜„ë„ ì¡´ì¬í•©ë‹ˆë‹¤. (checksumì´ë€, ìˆ˜ì‹ ì„ ë°›ì€ ì¸¡ì—ì„œ ë°ì´í„°ì˜ ì†ì‹¤ ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œ, ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ë§í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ìì„¸íˆ ë‹¤ë£¨ì§€ ì•ŠìŠµë‹ˆë‹¤.)\n\n### 3. DER(Distinguished Encoding Rule)\n\nserialization ê¸°ë²• ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ì´ë¦„ì—ì„œë¶€í„° ëŠê»´ì§€ë‹¤ì‹œí”¼ serializationì„ ìˆ˜í–‰í•  ë•Œ, ì •í™•í•œ êµ¬ë¶„ìì™€ ê¸¸ì´ë¥¼ data ì•ì— ë°°ì¹˜ì‹œì¼œì„œ ë³€í™˜ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•œ ë°©ë²• ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ”, Bitcoinì—ì„œ ì‚¬ìš©í•˜ëŠ” DER ë°©ì‹ë§Œ ë‹¤ë£¨ê¸°ì— í•´ë‹¹ ë°©ì‹ì´ ì–´ë–»ê²Œ ëŒì•„ê°€ëŠ”ì§€ë§Œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\nBitCoinì—ì„œëŠ” Signature(ì„œëª…)ì„ ì „ë‹¬í•  ë•Œ, í•´ë‹¹ ë°©ì‹ì„ ì‚¬ìš©í•˜ëŠ”ë°, ì´ëŠ” ì´ ì „ chapterì—ì„œ ì‚´í´ë´¤ë“¯ì´ ë‘ê°œì˜ integerë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì—¬ëŸ¬ ê°œë¥¼ ë³´ë‚¼ ë•Œ, ì´ë¥¼ ê°ì‹¸ ì¤„ ìˆ˜ ìˆëŠ” Sequenceì™€ Integer í˜•ì„ ë³´ë‚¼ ë•Œ, ì‚¬ìš©í•˜ëŠ” êµ¬ë¶„ìë¥¼ data ì•ì— ë„£ì–´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. (Sequence = 0x30, Integer = 0x02) ë˜í•œ, dataì˜ ì‚¬ì´ì¦ˆ ì—­ì‹œ ê°™ì´ ë¶™ì—¬ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. (ë‹¨ìœ„ê°€ byteë¼ëŠ” ê²ƒì„ ìœ ì˜í•©ì‹œë‹¤.)\n\në”°ë¼ì„œ, í˜•íƒœê°€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n0x30 + {ì „ì²´ ì „ì†¡ dataì˜ ì‚¬ì´ì¦ˆ} + 0x02 + {ë³´ë‚¼ integer dataì˜ ì‚¬ì´ì¦ˆ} + {ì „ì†¡í•  data(bytes)} + 0x02 + {ë³´ë‚¼ integer dataì˜ ì‚¬ì´ì¦ˆ} + {ì „ì†¡í•  data(bytes)}\n\nì˜ˆì‹œë¡œ ë‹¤ìŒì„ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ì— 1ê³¼ 2ë¼ëŠ” ìˆ˜ë¥¼ ë™ì‹œì— ë³´ë‚´ê³  ì‹¶ì„ ë•Œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì „ë‹¬ëœë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n0x30\\0x06\\0x02\\0x01\\0x01\\0x02\\0x01\\0x02\n\nì•„ë˜ ë§í¬ë¥¼ í™•ì¸í•˜ë©´ ë” ìì„¸í•œ ë°©ì‹ë“¤ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— ASN í˜•ì‹ì˜ DER ì¸ì½”ë”©](https://docs.microsoft.com/ko-kr/windows/win32/seccertenroll/about-der-encoding-of-asn-1-types)\n\n### 4. SEC(Standards for Efficient Cryptography)\n\nserialization ê¸°ë²• ì¤‘ì— í•˜ë‚˜ì´ë©°, íŠ¹íˆ ì•”í˜¸í™” ê³¼ì •ì—ì„œ ì‚¬ìš©ë˜ëŠ” í‘œì¤€ ì •ë„ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ê²Œ ECC(Elliptic Curve Cryptography)ì˜ ì•”í˜¸í™” ì‹œì— ìƒì„±ëœ public key ë“±ì— ëŒ€í•œ í‘œì¤€í™” ë‚´ìš©ì„ í¬í•¨í•©ë‹ˆë‹¤. Bitcoinì—ì„œëŠ” Public key ì „ì†¡ ì‹œì— SECë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œ ì´ì— ëŒ€í•œ ë‚´ìš©ë§Œì„ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\në¨¼ì €, ì—¬ê¸°ì„œëŠ” Public keyë¥¼ ë‘ ê°€ì§€ modeë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n\nì²« ë²ˆì§¸ë¡œ, ì••ì¶•(compression)ì„ ì‚¬ìš©í•˜ì§€ ì•Šì€ í‘œí˜„ë²•ìœ¼ë¡œ ì´ëŠ” ë§¤ìš° ë‹¨ìˆœí•©ë‹ˆë‹¤.\n\nìš°ì„ ì€, 0x04ë¥¼ ë°ì´í„° ë§¨ ì•ì— ë¶™ì´ê³ , ìˆœì„œëŒ€ë¡œ Public keyì˜ Xì¢Œí‘œ, Yì¢Œí‘œë¥¼ ë¶™ì—¬ì£¼ë©´ ë©ë‹ˆë‹¤.\n\n0x04 + {public key's x (bytes)} + {public key's y (bytes)}\n\nì´ëŠ” í•­ìƒ ì‚¬ì´ì¦ˆê°€ 65(1 + 32 + 32)bytesë¡œ ê³ ì •ëœë‹¤ëŠ” ì ì„ ì•Œ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. (ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ìœ„ì—ì„œ ì„¤ëª…í•œ DER ë°©ì‹ì—†ì´ë„ ì „ì†¡ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.)\n\në‘ ë²ˆì§¸ë¡œ, ì••ì¶•(compression)ì„ ì‚¬ìš©í•˜ëŠ” í‘œí˜„ë²•ì…ë‹ˆë‹¤. ì „ì†¡í•˜ëŠ” ë‘ ê°œì˜ ë°ì´í„° $x$,$y$ê°€ Elliptic Curve ìœ„ì— ì¡´ì¬í•œë‹¤ëŠ” ì—°ê´€ì ì„ í™œìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ($y^2 = x^3 + ax + b$)\n\n$x$ë§Œ ë³´ë‚´ê³ , $y$ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ë‘ ê°€ì§€ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n\n1. ì œê³±ê·¼ ì—°ì‚°($\\sqrt{y^2}$)ì´ ê°€ëŠ¥í•œê°€?\n2. ì œê³±ê·¼ìœ¼ë¡œ ë‚˜ì˜¨ ê²°ê³¼ê°’ ì¤‘ ì–´ë–¤ ê²ƒì´ ê·¼ì¸ì§€ í™•ì‹ í•  ìˆ˜ ìˆëŠ”ê°€?\n\nì¼ë‹¨ ì œê³±ê·¼ ì—°ì‚°ì€ ë‹¤ìŒê³¼ ê°™ì€ ìƒí™©ì—ì„œëŠ” ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ($p+1$ì´ 4ì˜ ë°°ìˆ˜ì¸ ê²½ìš°)\n\n$$ p \\% 4 = 3$$\n\n$$(p + 1) \\% 4 = 0$$\n\në‹¤í–‰íˆë„, Bitcoinê°€ ì‚¬ìš©í•˜ëŠ” ECDSAì—ì„œëŠ” ì´ë¥¼ ë§Œì¡±í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì•„ë˜ì˜ ì‹ì„ ë§Œì¡±í•˜ì—¬ ì‰½ê²Œ ì œê³±ê·¼ì„ êµ¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì¤‘ê°„ì— $(p+1)/2$ ì´ ê°€ëŠ¥í•œ ì´ìœ ëŠ” Prime numberëŠ” 2ë¥¼ ì œì™¸í•˜ê³ ëŠ” ëª¨ë‘ í™€ìˆ˜ ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.)\n\n$$w^2 = v$$\n\n$$w^{p-1} \\% p = 1$$\n\n$$w=w^{(p+1)/2}=w^{2(p+1)/4} = (w^2)^{(p+1)4} = v^{(p+1)/4} $$\n\në˜ í•˜ë‚˜ì˜ ì œê³±ê·¼ì„ êµ¬í•  ë•Œì—ëŠ” ê°„ë‹¨í•˜ê²Œ ë‹¤ìŒì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n\n$$-w = p - w$$\n\në‹¤ìŒìœ¼ë¡œ, ì œê³±ê·¼ìœ¼ë¡œ ë‚˜ì˜¨ ê°’ ì¤‘ íŠ¹ì •í•˜ëŠ” ë°©ë²•ì€ ë°”ë¡œ í™€ìˆ˜ì¸ì§€ ì§ìˆ˜ì¸ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” 1byteë§Œì„ ì „ì†¡í•´ì£¼ë©´ ë©ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ìœ„ì— ì‹ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ $w$ê°€ ì§ìˆ˜ì´ë©´, ë˜ ë‹¤ë¥¸ ê·¼ì¸ $-w$ëŠ” í™€ìˆ˜ì¼ ìˆ˜ ë°–ì— ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ($p$ = í™€ìˆ˜)\n\në”°ë¼ì„œ, ì „ì†¡ ì‹œì—ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë”ìš± ê°„ì†Œí•´ì§‘ë‹ˆë‹¤.\n\nìš°ì„ ì€, 0x02 ë˜ëŠ” 0x03 ë°ì´í„°ë¥¼ ë§¨ ì•ì— ë¶™ì´ê³ , ìˆœì„œëŒ€ë¡œ Public keyì˜ Xì¢Œí‘œë¥¼ ë¶™ì—¬ì£¼ë©´ ë©ë‹ˆë‹¤.\n\nì§ìˆ˜ : 0x02 + {public key's x (bytes)}\n\ní™€ìˆ˜ : 0x03 + {public key's x (bytes)}\n\nì´ëŠ” í•­ìƒ ì‚¬ì´ì¦ˆê°€ 33(1 + 32)bytesë¡œ ê³ ì •ëœë‹¤ëŠ” ì ì„ ì•Œ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\n\nì•„ë˜ ë§í¬ë¥¼ í†µí•´ì„œ ë” ìì„¸í•œ ì‚¬í•­ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— Standards for Efficient Cryptography Group](https://www.secg.org/)\n\n### 5. Hash160, Hash256\n\nhashë¼ëŠ” ê²ƒ ì—­ì‹œ serialization partì—ì„œ ë¹ˆë²ˆí•˜ê²Œ ë“±ì¥í•  ìˆ˜ ë°–ì— ì—†ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. hashë€ ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§€ëŠ” í•¨ìˆ˜ë¥¼ ë§í•©ë‹ˆë‹¤.\n\n1. one way function : ì—­ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥ì—°ì‚°ì…ë‹ˆë‹¤.\n2. return fixed length : ë°˜í™˜ëœ ê²°ê³¼ê°’ì´ í•­ìƒ ì¼ì •í•œ ê¸¸ì´ë¥¼ ê°€ì§‘ë‹ˆë‹¤.\n3. collision with very low probability : ë°˜í™˜ëœ ê²°ê³¼ê°’ì´ ì¶©ëŒë  ê°€ëŠ¥ì„±ì´ ì‚¬ì‹¤ìƒ ì—†ë‹¤. ì¦‰, ì™„ë²½í•œ 1:1 ëŒ€ì¹­ì€ ì•„ë‹ˆì§€ë§Œ, ì´ì— ë§¤ìš° ê·¼ì‚¬í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nhashì˜ ì „ë°˜ì ì¸ ì„¤ëª…ì€ ì—¬ê¸°ì„œ ë‹¤ë£¨ì§€ ì•Šê¸° ë•Œë¬¸ì—, ì´ì •ë„ë§Œ ê¸°ì–µí•´ë‘ì‹œë©´ ë©ë‹ˆë‹¤. ì—­ì—°ì‚°ì´ ë¶ˆê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì—, ëŒ€ê²Œ ë°ì´í„°ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” í˜•íƒœë¡œ ì €ì¥í•˜ê³ ì í•˜ëŠ” ê²½ìš°ì— ë§ì´ ì‚¬ìš©í•©ë‹ˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ MD-5, SHA-1, SHA-2(SHA-256, SHA-512, ...)ê°€ ìˆìŠµë‹ˆë‹¤.\n\nhashëŠ” ëŒ€ê²Œì˜ ê²½ìš° ë§¤ìš° ì œëŒ€ë¡œ ì˜ ë™ì‘í•˜ì§€ë§Œ, collisionì— ì˜í•´ì„œ ë§ê°€ì§€ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë³´ì•ˆí•˜ê¸° ìœ„í•´ì„œ ê³„ì†í•´ì„œ ìƒˆë¡œìš´ ë°©ë²•ë“¤ì´ ê³ ì•ˆ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, Bitcoinì—ì„œëŠ” SHA256 ì´í›„ì— ì´ë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ripemd160ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ Hash160ì´ë¼ê³  í•˜ê³ , SHA256ì„ ì—°ë‹¬ì•„ì„œ ë‘ ë²ˆ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ Hash256ì´ë¼ê³  í•©ë‹ˆë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë‹¤ì‹œí”¼, Hash160ì€ ê²°ê³¼ê°’ì´ 160bits(20bytes), SHA256ì€ 256bits(32bytes)ì…ë‹ˆë‹¤.\n\n### 6. Varint\n\nVariable + intì˜ í•©ì„±ì–´ë¡œ variable lengthë¡œ integer dataë¥¼ serializationí•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•©ë‹ˆë‹¤. ìµœëŒ€ ìˆ˜ì˜ ë²”ìœ„ëŠ” $2^{64} - 1$ê¹Œì§€ í‘œí˜„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë§¤ìš° ìœ ìš©í•˜ë©°, ë¶ˆí•„ìš”í•œ ë°ì´í„°ì˜ ì „ì†¡ì„ ìµœì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‚´ìš© ìì²´ëŠ” ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤.\n\n1. í•´ë‹¹ ìˆ˜ê°€ 253ë³´ë‹¤ ì‘ë‹¤ë©´ 1 byteë§Œ ì´ìš©í•´ì„œ ë°”ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\n2. ê·¸ë ‡ì§€ ì•Šê³ , í•´ë‹¹ ìˆ˜ê°€ 2^16 - 1 ë³´ë‹¤ ì‘ë‹¤ë©´, 253(0xfd)ë¥¼ prefixë¡œ ë§¨ ì•ì— ë¶™ì´ê³ , 2 byteë¥¼ ì´ìš©í•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n3. ê·¸ë ‡ì§€ ì•Šê³ , í•´ë‹¹ ìˆ˜ê°€ 2^32 - 1 ë³´ë‹¤ ì‘ë‹¤ë©´, 254(0xfe)ë¥¼ prefixë¡œ ë§¨ ì•ì— ë¶™ì´ê³ , 4 byteë¥¼ ì´ìš©í•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n4. ê·¸ë ‡ì§€ ì•Šê³ , í•´ë‹¹ ìˆ˜ê°€ 2^64 - 1 ë³´ë‹¤ ì‘ë‹¤ë©´, 255(0xff)ë¥¼ prefixë¡œ ë§¨ ì•ì— ë¶™ì´ê³ , 8 byteë¥¼ ì´ìš©í•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n\nì¦‰, 0ìœ¼ë¡œ ì•ì— ë‚¨ëŠ” byteë¥¼ ë³´ë‚´ëŠ” ì–‘ì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, ë³€ìˆ˜ ìƒíƒœì˜ integerë¥¼ ì „ì†¡í•  ë•Œ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ Bitcoinì—ì„œ Serializationë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n### 1. Public Key\n\nê¸°ë³¸ì ìœ¼ë¡œ Public keyëŠ” ëª¨ë‘ì—ê²Œ ê³µê°œë˜ì–´ì•¼ í•˜ëŠ” ì •ë³´ ì¤‘ì— í•˜ë‚˜ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ë¶„ë°°í•˜ëŠ” ë¬¸ì œ ì—­ì‹œ ì¤‘ìš”í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Bitcoinì—ì„œëŠ” ì• ì„œ ì‚´í´ë³´ì•˜ë˜, SEC, Base58ë¥¼ ì´ìš©í•˜ë©°, í•„ìš”ì— ë”°ë¼ì„œÂ hash160ì„ ì´ìš©í•´ì„œ ë‚´ìš©ì„ ê°ì¶”ê¸°ë„ í•©ë‹ˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ, SECì™€ Base58ì„ ì´ìš©í•˜ì—¬, ë°ì´í„°ë¥¼ ì „ì†¡í•˜ëŠ” ì´ìœ ëŠ” í›„ì— Public Key ì—­ì‹œ ì‚¬ëŒë“¤ì—ê²Œ ì‰½ê²Œ ë…¸ì¶œì´ ë˜ëŠ”ë°, ì´ë¥¼ ì‰½ê²Œ ì‚¬ëŒë“¤ì´ ì•Œì•„ë³¼ ìˆ˜ ìˆê²Œ í•˜ê¸° ìœ„í•¨ì´ë©°, hash160ì„ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” Public Keyë¥¼ ê°ì¶”ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. ì´ ë§ì´ ì´ìƒí•˜ê²Œ ë“¤ë¦´ ìˆ˜ ìˆëŠ”ë°, Public keyê°€ Open ë˜ê³  ë°”ë¡œ ì‚¬ìš©ëœë‹¤ë©´, ë¬¸ì œê°€ ë˜ì§€ ì•Šì§€ë§Œ, Public Keyê°€ ê³µê°œë˜ê³  ì˜¤ëœ ì‹œê°„ì´ ì§€ë‚œë‹¤ë©´, ë¬¸ì œê°€ ë°œìƒí•  ê°€ëŠ¥ì„±ì´ ìƒê¸°ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. (ë„ˆë¬´ë‚˜ ì˜¤ë«ë™ì•ˆ ë…¸ì¶œëœë‹¤ë©´, private keyê°€ ê²°êµ­ì€ í•´ë…ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.) ì´ëŠ” ë°”ë¡œ ë‹¤ìŒ chapterì—ì„œ ë” ì•Œì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 2. Signature\n\nSignature ë°©ì‹ ê°™ì€ ê²½ìš°ëŠ” í‘œì¤€ì²˜ëŸ¼ ë„“ê²Œ ì‚¬ìš©ë˜ëŠ” DERì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n### 3. Private Key\n\nPrivate keyë¥¼ ì „ì†¡í•œë‹¤ëŠ” ê²ƒì€ êµ‰ì¥í•œ ìœ„í—˜ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì´ë¥¼ ì „ì†¡í•´ì•¼í•  ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. usbì— ì €ì¥í•˜ê³  ì‹¶ë‹¤ê±°ë‚˜ ë³„ë„ì˜ softwareë¡œ ì˜®ê¸°ê³  ì‹¶ì€ ê²½ìš°ë„ ì¡´ì¬í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ìœ„í•œ Serialization Formatë„ ì¡´ì¬í•©ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì´ë¥¼ WIF(Wallet Import Format)ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.\n\nì´ëŠ” ì´ë¦„ì—ì„œë¶€í„° ëŠê»´ì§€ë“¯ì´ Bitcoinì—ì„œ íŒŒìƒëœ standardë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ëŠ” Base58ë¡œ encodingëœë‹¤ëŠ” ì  ì •ë„ë§Œ ê¸°ì–µí•˜ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤.\n\në˜í•œ, ìœ„ì—ì„œëŠ” ë‹¤ë£¨ì§€ ì•Šì•˜ì§€ë§Œ, Bitcoin networkëŠ” ê°œë°œìš©(testnet)ê³¼ ì‹¤ì œ ì„œë¹„ìŠ¤ìš©(mainnet)ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì—, ì´ë¥¼ êµ¬ë¶„í•˜ëŠ” êµ¬ë¶„ìë¥¼ ê° serialization ì•ì— í‘œì‹œí•˜ëŠ” ê²ƒì„ ì›ì¹™ìœ¼ë¡œ í•©ë‹ˆë‹¤.\n\n- mainnet = 0x80\n- testnet = 0xef\n\n### 4. Number of data\n\nbitcoin ìƒì—ì„œë„ ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ ì „ì†¡í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë°, ë§Œì•½ í•´ë‹¹ ë°ì´í„°ì˜ ê°¯ìˆ˜ê°€ ì •í•´ì ¸ìˆëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë•Œì— ë”°ë¼ì„œ ë³€ê²½ë˜ëŠ” ê²½ìš°ì—ëŠ” ìœ„ì—ì„œ ì œì‹œí•œ Varintë¥¼ ì‚¬ìš©í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ë°”ë¡œ ë‹¤ìŒ Chapterì—ì„œ ì•Œì•„ë³¼ Transaction ë‚´ë¶€ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ì „ ê¸€ê³¼ ë™ì¼í•˜ê²Œ êµ¬í˜„ ì‚¬í•­ì€ githubì— ì •ì˜í•´ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"bitcoin-2","date":"2022-03-18 14:51","title":"[Bitcoin] 2. Serialization","category":"Tech","tags":["BlockChain","Bitcoin"],"desc":"í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.í•´ë‹¹ chapterì—ì„œëŠ” Bitcoinì—ì„œ ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ Serialization í•˜ê³ , Parsing í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ë‹¤ë£¹ë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/bitcoin.jpg"},{"content":"\n## Intro\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.**Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” Bitcoinì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì „ë‹¬ë˜ë©°, Bitcoinì„ ì´ìš©í•œ ê±°ë˜ëŠ” ì–´ë–»ê²Œ ìˆ˜í–‰ë˜ëŠ”ì§€ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ìœ„í•´ Bitcoinì—ì„œ êµ¬ì¶•í•œ Scriptë¼ëŠ” languageë¥¼ ì†Œê°œí•˜ê³  ì—¬ëŸ¬ ì¸ì¦ ë°©ì‹ì„ ì†Œê°œí•©ë‹ˆë‹¤.**\n\n---\n\n### 1. Transaction\n\nTransactionì€ Bitcoinì˜ ê½ƒì´ë¼ê³  í‘œí˜„í•  ìˆ˜ ìˆì„ ì •ë„ë¡œ ê°€ì¥ ì¤‘ìš”í•œ ìœ„ì¹˜ë¥¼ ì°¨ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•ì„œ ë³´ì•˜ë˜, Signature, Serialization ì—­ì‹œ ì´ë¥¼ ìœ„í•œ í† ëŒ€ë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤. ìš°ì„  Transactionì´ ë¬´ì—‡ì¸ì§€ì— ëŒ€í•´ì„œë¶€í„° ì•Œì•„ë´…ì‹œë‹¤.\n\nTransactionì˜ ëœ»ì„ í•œêµ­ì–´ë¡œ ë²ˆì—­í•˜ë©´, ê±°ë˜ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **Bitcoin system ìƒì—ì„œëŠ”, Bitcoinì„ ëˆ„êµ°ê°€ì—ê²Œ ì „ì†¡í•˜ëŠ” í–‰ìœ„ë¥¼ Transactionì´ë¼ê³  ì •ì˜í•©ë‹ˆë‹¤.** Bitcoin ìƒì—ì„œ Transactionì€ ì—¬ëŸ¬ **íŠ¹ì´í•œ ì†ì„±**ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ Bitcoinì„ ì´í•´í•˜ëŠ” ê¸°ë°˜ì´ ë  ê²ƒì…ë‹ˆë‹¤. (ì•„ë˜ íŠ¹ì§•ì€ ì €ì˜ ì£¼ê´€ì ì¸ ìƒê°ì„ ë‹´ì€ ê²ƒì…ë‹ˆë‹¤. ë” ë§ì€ íŠ¹ì§•ì´ ìˆì§€ë§Œ, í•´ë‹¹ chapterì—ì„œ ì„¤ëª…í•  ë‚´ìš©ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒ ë‚´ìš©ì„ ì¼ë‹¨ ë¨¸ë¦¿ì†ì— ìƒˆê¸°ê³  ê°€ë„ë¡ í•©ì‹œë‹¤.)\n\n#### 1-1. íŠ¹ì§•\n\n1. **ê³µê°œì„± (Public)** : ëª¨ë“  Transactionì€ ê³µìœ ë©ë‹ˆë‹¤. ëˆ„êµ¬ë‚˜ ì›í•œë‹¤ë©´, ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n2. **ì—°ì†ì„± (Continuity)** : coinbaseì—ì„œ ì§ì ‘ ìƒì„±í•œ Transactionì„ ì œì™¸í•˜ê³ ëŠ” ëª¨ë“  Transactionì€ ì´ì „ Transactionì— ì˜ì¡´í•˜ì—¬ ì •ì˜ë©ë‹ˆë‹¤. ë˜í•œ, í•´ë‹¹ chapterì—ì„œëŠ” coinbaseì—ì„œ ìƒì„±ëœ Transactionì—ì„œëŠ” ê³ ë ¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ì‹¤ìƒí™œì—ì„œ ìƒê°í•´ë³´ë©´, ê±°ë˜ë¼ëŠ” ê²ƒë„ ì€í–‰ì—ì„œ ì§ì ‘ ì „ë‹¬ë°›ì€ ëˆì´ ì•„ë‹ˆë¼ë©´, ëª¨ë‘ ë‹¤ë¥¸ ì‚¬ëŒê³¼ì˜ ê±°ë˜ë¥¼ í†µí•´ì„œ ìƒì„±ë˜ëŠ” ê²ƒì´ë¯€ë¡œ ë‹¹ì—°í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.)\n3. **ì¼íšŒì„± (One time)** : í•˜ë‚˜ì˜ Transactionì´ ì—¬ëŸ¬ ë²ˆ ì‚¬ìš©ë  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¨ í•œ ë²ˆë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. (Transactionì€ outputì„ ì—¬ëŸ¬ ê°œ ê°€ì§€ë¯€ë¡œ, ì´ë“¤ì´ ê° ê° ì‚¬ìš©ë  ìˆ˜ëŠ” ìˆì–´ë„, ê°™ì€ Transactionì˜ ê°™ì€ outputì€ ë‹¨ í•œ ë²ˆë§Œ ì‚¬ìš©ë˜ì–´ì•¼ í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì”ëˆì´ ë°œìƒí•œë‹¤ë©´, Transactionì— ë‹¤ì‹œ ìì‹ ì—ê²Œ ë³´ë‚´ëŠ” outputì„ ìƒì„±í•©ë‹ˆë‹¤.)\n4. **ìµëª…ì„± (Anonymous)** : í•´ë‹¹ Transactionì˜ outputì„ ì‚¬ìš©í•  ì‚¬ëŒì„ ëª…ì‹œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì¦‰, ëˆ„êµ¬ë‚˜ í•´ë‹¹ Transaction outputì˜ ì†Œìœ ê¶Œì„ ì£¼ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì‹¤ì œ ì„¸ìƒì—ì„œ ëˆ„ê°€ ëˆ„êµ¬ì—ê²Œ ë³´ë‚´ëŠ” ê²ƒì¸ì§€ëŠ” ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì›í•œë‹¤ë©´, ê±°ë˜ addressë¥¼ ê³„ì† ë°”ê¿€ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ë ‡ê²Œ ê³„ì† ë°”ê¾¸ëŠ” ê²ƒì„ ê¶Œì¥í•˜ê¸°ë„ í•©ë‹ˆë‹¤.)\n\nTransactionì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” Bitcoinì„ ë°›ì„ ìˆ˜ë„ ìˆê³ , ì „ë‹¬í•  ìˆ˜ë„ ìˆìœ¼ë©°, í•´ë‹¹ Bitcoinì´ ìì‹ ì˜ ì†Œìœ ë¼ëŠ” ê²ƒì„ ì¦ëª…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në˜í•œ, ê¸°ì–µí•´ë‘ì–´ì•¼ í•  ì ì€ Transactionì˜ Outputì€ Bitcoinì„ í¬í•¨í•œë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¸°ì–µí•©ì‹œë‹¤. ê·¸ë¦¬ê³ , ëª¨ë“  Bitcoinì€ Transactionì— ì˜í•´ì„œ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì„ ê¸°ì–µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ê²ƒì´ ì–´ë–»ê²Œ ê°€ëŠ¥í•œì§€ Transactionì˜ **êµ¬ì„± ìš”ì†Œ**ë¥¼ ë¨¼ì € ì‚´í´ë³´ê³  ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤.\n\n#### 1-2. êµ¬ì„±ìš”ì†Œ\n\n1. **Version**Â : Transactionì˜ versionì´ ì¡´ì¬í•©ë‹ˆë‹¤. Bitcoin ìì²´ê°€ ê³„ì†í•´ì„œ ë°œì „í•´ì™”ê¸° ë•Œë¬¸ì—, í•˜ë‚˜ì˜ versionìœ¼ë¡œ ê³ ì •ë˜ì–´ ìˆì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ëŒ€ê²ŒëŠ” 1ì´ì§€ë§Œ, í•„ìš”ì— ë”°ë¼ ë‹¤ë¥¸ versionì„ ì¨ì•¼ í•˜ëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.\n2. **Outputs**Â : ì—¬ëŸ¬ ê°œì˜ outputì„ ê°€ì§ˆ ìˆ˜ ìˆìœ¼ë©°, ê° outputì€ ë‹¤ìŒê³¼ ê°™ì€ ê°’ì„ í¬í•¨í•©ë‹ˆë‹¤.\n   1. **amount** : í•´ë‹¹ outputì´ ê°€ì§ˆ bitcoinì˜ ì–‘ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n   2. **ScriptPubKey** : í•´ë‹¹ outputì´ í›„ì— ì‚¬ìš©ë  ë•Œ, ì •ë‹¹í•œ ê¶Œí•œì´ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ë‹¨ì´ ë©ë‹ˆë‹¤. ë§ˆì¹˜ ê¸ˆê³ ì˜ ì ê¸ˆ ì¥ì¹˜ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì–´ë–»ê²Œ ì ê·¸ëŠ”ì§€ì— ëŒ€í•´ì„œëŠ” ë°‘ì—ì„œ Script partì—ì„œ ì„¤ëª…í•©ë‹ˆë‹¤.\n3. **Inputs**Â : í•˜ë‚˜ì˜ inputì€ ì´ì „ Transaction ì¤‘ í•˜ë‚˜ì˜ outputì„ ê°€ë¥´í‚¤ê³  ìˆìœ¼ë©°, ì´ë¥¼ ì—¬ëŸ¬ ê°œ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ê° inputì€ ë‘ ê°€ì§€ ê¸°ëŠ¥ì„ í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì²«ì§¸ë¡œ, **íŠ¹ì • Transactionì˜ í•˜ë‚˜ì˜ outputì„ ì‹ë³„**í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” **Transactionì´ ìì‹ ì˜ ê²ƒì„ì„ ì¦ëª…**í•  ìˆ˜ ìˆì–´ì•¼ í•©ë‹ˆë‹¤.\n   1. **PrevTxId** : ì´ì „ Transactionì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•  ìˆ˜ ìˆëŠ” ê°’ì…ë‹ˆë‹¤.\n   2. **PrevTxIndex** : ì´ì „ Transactionì˜ output ì¤‘ í•˜ë‚˜ë¥¼ ì‹ë³„í•˜ê¸° ìœ„í•œ ê°’ì…ë‹ˆë‹¤.\n   3. **ScriptSig**Â : í•´ë‹¹ outputì´ ìì‹ ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ì„ì„ ì¦ëª…í•  ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ì…ë‹ˆë‹¤. ë§ˆì¹˜ ê¸ˆê³ ì˜ ì—´ì‡ ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n   4. **Sequence** : ì´ˆê¸°ì— Bitcoin ì„¤ê³„ ì‹œì—ëŠ” ë™ì‹œì— ì„œë¡œ ê°„ì— ë„ˆë¬´ ë§ì€ Transactionì´ ìƒê¸°ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œ, ì—¬ëŸ¬ Transactionì„ í•˜ë‚˜ì˜ Transactionìœ¼ë¡œ í†µí•©ì‹œí‚¤ê¸°ë¥¼ ì›í–ˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê·¸ë•Œ í•´ë‹¹ ê±°ë˜ê°€ ëª‡ ë²ˆì§¸ ì¸ì§€ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©ë˜ì—ˆìœ¼ë‚˜ í˜„ì¬ì—ëŠ” ë³´ì•ˆìƒì˜ ì·¨ì•½ì ì´ ë°œê²¬ë˜ì–´ ì‚¬ìš©ë˜ê³  ìˆì§€ ì•Šê¸°ì—, 4 bytes little endianìœ¼ë¡œ ìµœëŒ“ê°’(0xffffffff)ìœ¼ë¡œ í‘œê¸°í•©ë‹ˆë‹¤.\n4. **Locktime**Â : ìœ„ì—ì„œ ì„¤ëª…í•œ Sequence ì²˜ëŸ¼, Transactionì„ ì–´ëŠ ì •ë„ ì‹œê°„ì´ ë  ë•Œê¹Œì§€ Transactionì˜ inputìœ¼ë¡œì¨ ì‚¬ìš©ë˜ëŠ” ê²ƒì„ ë§‰ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ë‹¤ìŒ chapterì—ì„œ ì„¤ëª…í•  Blockì˜ heightê°€ ë  ìˆ˜ë„ ìˆê³ , Unix timestampë¥¼ í†µí•´ì„œ ì‹œê°„ì„ ì§€ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ ë˜í•œ, 4 bytesë¥¼ í†µí•´ì„œ í‘œí˜„í•©ë‹ˆë‹¤.\n\n![transaction](/images/transaction.jpeg)\n\n#### 1-3. ì¶”ê°€ ê°œë…\n\n1. **Fee**  \n  **ì¼ëª… ê±°ë˜ ìˆ˜ìˆ˜ë£Œ**ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ê²Œ, ì´ ê±°ë˜ë¥¼ í™•ì¸í•´ì£¼ëŠ” minerë“¤ì—ê²Œ ì£¼ì–´ì§€ëŠ” ë³´ìƒìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì†¡ì‹ ìëŠ” ê±°ë˜ë¥¼ í•  ë•Œ, ì´ë¥¼ ì¸ì¦ë°›ê¸° ìœ„í•´ì„œ ì´ë¥¼ í™•ì¸í•´ì¤„ ì—¬ëŸ¬ ì œ3ìë“¤ì—ê²Œ ì¼ì • ìˆ˜ìˆ˜ë£Œë¥¼ ì œì‹œí•©ë‹ˆë‹¤. ë¹ ë¥¸ ê±°ë˜ë¥¼ ì›í•œë‹¤ë©´, ë” ë§ì€ ë¹„ìš©ì„, ì²œì²œíˆ í•´ë„ ìƒê´€ì´ ì—†ë‹¤ë©´, ì ì€ ë¹„ìš©ì„ íˆ¬ìí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n2. **UTXO(Unspent Transaction Output) Set**  \n  ì‚¬ìš©í•˜ì§€ ì•Šì€ Transaction Outputì˜ ì§‘í•©ì…ë‹ˆë‹¤. ì´ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆì–´ì•¼ì§€ë§Œ, ì™œëƒí•˜ë©´, ë‘ ë²ˆ ì´ìƒ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒ ìì²´ë¥¼ ë§‰ì•„ì•¼ë§Œ í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ëª¨ë“  UTXOë¥¼ í¬í•¨í•˜ê³  ìˆìœ¼ë©°, ì´ë¥¼ ê³„ì†í•´ì„œ ì¶”ì í•˜ëŠ” ë…¸ë“œë¥¼ Full nodesë¼ê³  ë¶€ë¥´ë©°, ì´ê²ƒì´ ìˆì–´ì•¼ì§€ë§Œ Bitcoin ê±°ë˜ë¥¼ ë¹ ë¥´ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nTransactionì´ë¼ëŠ” ê²ƒì€ ê²°êµ­ Bitcoinì„ ì „ë‹¬í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì´ê²ƒì´ ìˆì–´ì•¼ë§Œ ìš°ë¦¬ëŠ” ì‹¤ì„¸ê³„ì— ìˆëŠ” ë¬¼ê±´ì„ ì‚¬ëŠ” ëª…ë¶„ì„ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ°ë° ì—¬ê¸°ì„œ, ì˜ë¬¸ì ì´ ê°€ì¥ í¬ê²Œ ìƒê¸¸ ìˆ˜ ìˆëŠ” ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ë­”ê°€ ê±°ë˜ë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” Transactionì„ í†µí•´ì„œ Bitcoinì„ ë³´ë‚´ì•¼ í•˜ëŠ” ê²ƒì€ ì´í•´í–ˆëŠ”ë°, ë‚´ê°€ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” Transactionì´ ëª¨ë‘ì—ê²Œ ê³µê°œëœë‹¤ê³  í–ˆëŠ”ë°, ì´ê²Œ ìì‹ ì˜ ê²ƒì´ë¼ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ì¦ëª…í•  ìˆ˜ ìˆì„ê¹Œìš”? ì´ ë°©ë²•ìœ¼ë¡œ ê³ ì•ˆëœ ê²ƒì´ Scriptì…ë‹ˆë‹¤. ì´ì— ëŒ€í•´ì„œ ì‚´í´ë´…ì‹œë‹¤.\n\n![transaction-relation](/images/transaction-relation.jpeg)\n\n### 2. Script\n\nBitcoin(Transactionì˜ Output)ì„ ì „ë‹¬í•  ë•Œ, ì´ë¥¼ ëˆ„êµ¬ë‚˜ ì“¸ ìˆ˜ ì—†ê²Œ **ì ê·¸ëŠ” ê³¼ì •(lock)**ì´ í•„ìš”í•˜ê³ , í›„ì—ëŠ” ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²ŒÂ **í•´ì œ ê³¼ì •(unlock)**ì´ í•„ìš”í•©ë‹ˆë‹¤. Bitcoinì—ì„œëŠ” ì´ë¥¼ ìœ„í•´ì„œ Scriptë¼ëŠ” ê²ƒì„ ê³ ì•ˆí•´ëƒˆìŠµë‹ˆë‹¤. ScriptëŠ” ì™„ì„±ëœ í˜•íƒœë¡œ ì¡´ì¬í•  ë•Œ, í•´ë‹¹ outputì˜ ì†Œìœ ê°€ ìì‹ ì´ë¼ëŠ” ê²ƒì„ **ëˆ„êµ¬ë‚˜ ì¸ì •í•  ìˆ˜ ìˆëŠ” ë¬¸ì„œ**ê°€ ë©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ë¥¼ ë°˜ìœ¼ë¡œ ì˜ë¼ì„œ, í•˜ë‚˜ëŠ” output ìª½ì— ë¶™ì—¬ë‘ê³ (**ScriptPubkey**), ë‚˜ë¨¸ì§€ í•˜ë‚˜(**ScriptSig**)ëŠ” ìì‹ ì´ ì†Œìœ í•˜ê³  ìˆë‹¤ê°€ ì‚¬ìš©í•  ë•Œ, ì´ ì¡°ê°ì„ ë“¤ì´ ë°€ì–´ì„œ ìì‹ ì„ì„ ì¸ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nÂ ê·¸ë ‡ë‹¤ë©´, Scriptë¼ëŠ” ê²ƒì´ ë„ëŒ€ì²´ ë¬´ì—‡ì´ê¸¸ë˜ **ëˆ„êµ¬ë‚˜ ì¸ì •í•  ìˆ˜ ìˆëŠ” ë¬¸ì„œ**ê°€ ë  ìˆ˜ ìˆëŠ” ê²ƒì¼ê¹Œìš”? ì´ëŠ” Scriptì˜ í•´ì„ë²•ì„ ì•Œë©´, ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n#### 2-1. Script (language)\n\nScriptë¼ê³  ì“°ê¸°ë„ í•˜ê³ , Script languageë¼ê³ ë„ ë¶€ë¥´ëŠ” í•´ë‹¹ ì–¸ì–´ëŠ”Â ì˜ì–´ ê°™ì€ ì‚¬ëŒì˜ ì–¸ì–´ë¡œ ì‘ì„±ë˜ì§€ë„ ì•Šê³ , pythonì´ë‚˜ cì™€ ê°™ì€ **turning complete(=ëª¨ë“  ê³„ì‚° ê°€ëŠ¥í•œ ë¬¸ì œë¥¼ í‘œí˜„í•  ìˆ˜ ìˆëŠ”**, ëŒ€ê²ŒëŠ” loop, condition, memory ì œì–´ ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ”ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.**)**í•œ programming language ë¡œ ì‘ì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì´ëŸ¬í•œ ScriptëŠ” **íš¨ìœ¨**ì„ ìœ„í•´ì„œ ë„ˆë¬´ ë³µì¡í•œ ë¡œì§ì„ ê°€ì ¸ì„œë„ ì•ˆë˜ê³ , ë³´ì•ˆìƒì˜ **ì·¨ì•½ì **ì„ ë§Œë“¤ ìˆ˜ ìˆëŠ” ìˆ˜ë‹¨ ìì²´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, Bitcoinì˜ Scriptì—ì„œëŠ” loopë¬¸ì„ í—ˆìš©í•˜ì§€ ì•ŠëŠ” í˜•íƒœë¥¼ ê°€ì§‘ë‹ˆë‹¤.\n\n#### 2-2. êµ¬ì„±ìš”ì†Œ\n\nScriptë¥¼ í•´ì„í•˜ê¸° ìœ„í•´ì„œëŠ”, êµ¬ì„±ìš”ì†Œë¥¼ ë¨¼ì € ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ê° êµ¬ì„±ìš”ì†Œì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n1. **Element** : ì¼ë°˜ programming languageì—ì„œ variableì´ í•˜ëŠ” ì—­í• ì„ ë§¡ìŠµë‹ˆë‹¤.\n2. **Operation** : ì¼ë°˜ programming languageì—ì„œ functionì˜ ì—­í• ì„ ë§¡ìŠµë‹ˆë‹¤. ì´ëŠ” elementë¥¼ ë°›ì•„ì„œ ë™ì‘ì„ ìˆ˜í–‰í•˜ì—¬, Stackì˜ ë³€í™”ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤. ë§Œì•½, ì¤‘ê°„ì˜ Operationì˜ ë™ì‘ì´ ì‹¤íŒ¨í•œë‹¤ë©´, í•´ë‹¹ Scriptì˜ ì‹¤í–‰ì€ ì¢…ë£Œë˜ê³ , íƒ€ë‹¹í•˜ì§€ ì•Šì€ Scriptë¼ëŠ” ê²°ë¡ ì„ ë‚´ë†“ìŠµë‹ˆë‹¤.\n3. **Stack** : ì¼ë°˜ programming languageì™€ëŠ” ë‹¤ë¥´ì§€ë§Œ, í›„ìœ„ í‘œí˜„ë²•ì— ê¸°ë°˜í•œ languageì—ì„œëŠ” í”íˆ ë³¼ ìˆ˜ ìˆëŠ” íŠ¹ì§•ì…ë‹ˆë‹¤. elementê°€ ì¡´ì¬í•  ìˆ˜ ìˆëŠ” ê³µê°„ìœ¼ë¡œ operationì€ stack ì•ˆì— ìˆëŠ” elementë§Œì„ ì†Œë¹„í•˜ì—¬ ë™ì‘í•©ë‹ˆë‹¤.\n\nì „ì²´ ì½”ë“œëŠ” ìœ„ì—ì„œë¶€í„° ì‹¤í–‰ë˜ë©´ì„œ, ë§ˆì¹˜ í•˜ë‚˜ì˜ stackì²˜ëŸ¼ êµ¬ì„±ë˜ë©°, í›„ìœ„ í‘œê¸°ì‹ì²˜ëŸ¼ ë™ì‘í•œë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. í›„ìœ„ í‘œê¸°ì‹ì—ì„œëŠ” elementê°€ ë¨¼ì € ë‚˜ì˜¤ê³  ì´ë¥¼ ê¸°ì–µí•´ë‘ê³  ìˆë‹¤ê°€ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. (ë”°ë¼ì„œ, stackì´ í•„ìš”í•œ ê²ƒì…ë‹ˆë‹¤.) ë”°ë¼ì„œ, ìœ„ì—ì„œ ë¶€í„° ì‹¤í–‰í•˜ë©´ì„œ elementê°€ ë‚˜ì˜¨ë‹¤ë©´, stackì— ìŒ“ì•„ë‘ê³ , operationì´ ë‚˜ì˜¨ë‹¤ë©´ stackì— ìˆëŠ” ë°ì´í„°ë¥¼ ìµœì‹ ìˆœìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n#### 2-3. Operationì˜ ì¢…ë¥˜\n\nì• ì„œ ScriptëŠ” turning completeí•œ ì–¸ì–´ê°€ ì•„ë‹ˆë¼ê³  í–ˆìœ¼ë¯€ë¡œ, operationì—ëŠ” loopë¥¼ í¬í•¨í•˜ì§€ ì•Šê±°ë‚˜ í˜„ì¬ëŠ” ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë˜í•œ, ë³´ì•ˆìƒ ì·¨ì•½ì ì´ ë°í˜€ì§„ Operation ì—­ì‹œ ì‚¬ìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” Scriptì˜ íŠ¹ì„±ì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” ëª‡ ê°€ì§€ì˜ Operationì„ ì„¤ëª…í•˜ê³  ë™ì‘ ë°©ì‹ì„ ì„¤ëª…í•©ë‹ˆë‹¤.\n\n- **OP\\_DUP** : stackì— ìˆëŠ” element ì¤‘ ê°€ì¥ ì•ì— ìˆëŠ” elementë¥¼ ë³µì‚¬í•´ì„œ stackì— ì¶”ê°€í•©ë‹ˆë‹¤.\n- **OP\\_x**(number) : stackì— x elementë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. ì´ë•Œ, xëŠ” 0 ~ 16ê¹Œì§€ì˜ ìˆ˜ë¥¼ ëœ»í•©ë‹ˆë‹¤.\n- **OP\\_PUSHDATAx** : ë¨¼ì € x byteì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ë°›ìŠµë‹ˆë‹¤. ì´ëŠ” ì´ì œ stackì— ì…ë ¥í•  ë°ì´í„°ì˜ í¬ê¸°ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ í›„ ì…ë ¥ë°›ì€ ê¸¸ì´ë§Œí¼ì„ ì½ì–´ ë“¤ì¸ í›„ì— ì´ë¥¼ stackì— ì¶”ê°€í•©ë‹ˆë‹¤. xëŠ” 1, 2,4ê°€ ì¡´ì¬í•˜ì§€ë§Œ, stackì— ì…ë ¥í•˜ëŠ” ë°ì´í„°ëŠ” ìµœëŒ€ 520 bytes ê¹Œì§€ë§Œ í—ˆìš©í•©ë‹ˆë‹¤.\n- **OP\\_VERIFY** : stackì—ì„œ í•˜ë‚˜ì˜ ê°’ì„ êº¼ë‚¸ í›„, 1ì¸ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n- **OP\\_EQUAL** : stackì—ì„œ ë‘ ê°œì˜ ê°’ì„ êº¼ë‚¸ í›„, ì„œë¡œ ê°™ì€ì§€ë¥¼ í™•ì¸í•˜ê³ , ê°™ë‹¤ë©´ 1 ë‹¤ë¥´ë‹¤ë©´, 0ì„ ì¶”ê°€í•©ë‹ˆë‹¤.\n- **OP\\_CHECKSIG** : stackì—ì„œ ë‘ ê°œì˜ ê°’ì„ êº¼ë‚¸ í›„, ì²« ë²ˆì§¸ elementëŠ” PubKey ê·¸ë¦¬ê³ , ë‘ ë²ˆì§¸ elementëŠ” Signatureë¡œ í•˜ì—¬ ECDSAë¥¼ ë§Œì¡±ì‹œí‚¤ëŠ”ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\n- **OP\\_MULTI\\_CHECK\\_SIG** : ì´ëŠ” stackì— PubKeyì™€ Signatureê°€ í•˜ë‚˜ ì´ìƒì¼ ë•Œ, ì´ë¥¼ ëª¨ë‘ í™•ì¸í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.\n- **OP\\_HASH160, OP\\_SHA1, OP\\_SHA256, OP\\_HASH256** : stackì˜ í•˜ë‚˜ì˜ elementë¥¼ êº¼ë‚¸ í›„, hashí•˜ì—¬ ë‹¤ì‹œ stackì— ì¶”ê°€í•©ë‹ˆë‹¤.\n\nì¶”ê°€ì ì¸ Operationì— ëŒ€í•´ì„œë„ ê¶ê¸ˆí•˜ë‹¤ë©´, ì•„ë˜ linkë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\n\n[ğŸ”— Script - Bitcoin Wiki](https://en.bitcoin.it/wiki/Script)\n\n#### 2-3. Goal\n\nScriptì˜ ìµœì¢… ëª©ì ì€Â **Scriptì˜ ëª¨ë“  êµ¬ì„±ìš”ì†Œë¥¼ ì‹¤í–‰ì‹œì¼œì„œ, ì¤‘ê°„ì— operationì˜ ì—ëŸ¬ ì—†ì´ stackì— 1ì´ë¼ëŠ” ìˆ«ìë¥¼ ë‚¨ê¸°ëŠ” ê²ƒì…ë‹ˆë‹¤.**Â ë”°ë¼ì„œ, í•´ì„ì´ ì‹¤íŒ¨í•˜ëŠ” ê²½ìš°ëŠ” ë‘ ê°€ì§€ ì…ë‹ˆë‹¤. Scriptì˜ í•´ì„ ë„ì¤‘ì— operationì´ ì—ëŸ¬ë¥¼ ë°œìƒì‹œì¼°ê±°ë‚˜, ëª¨ë“  Scriptë¥¼ í•´ì„í–ˆìŒì—ë„ stackì— 1ì´ ì•„ë‹Œ ê°’ì´ ìˆê±°ë‚˜ ì•„ë¬´ ê°’ë„ ì—†ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.\n\nì•„ê¹Œ ë§í–ˆë“¯ì´ ìš°ë¦¬ëŠ” ì´ Scriptë¥¼ ë‘ ê°œì˜ ì¡°ê°(ScriptPubKey, ScriptSig)ìœ¼ë¡œ ë‚˜ëˆ•ë‹ˆë‹¤. ì¦‰, ì½”ë“œë¥¼ ì¤‘ê°„ì— íˆ­ ì˜ë¼ë²„ë¦°ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë˜ì„œ, í›„ë°˜ë¶€ì— í•´ë‹¹í•˜ëŠ” ë‚´ìš©(ScriptPubKey)ì„ Transactionì˜ Outputì— ë„£ì–´ì„œ ë³´ê´€í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ, ScriptPubKeyì— ì „ë°˜ë¶€ì— í•´ë‹¹í•˜ëŠ” ScriptSigë¥¼ ê°€ì§„ ì‚¬ëŒì´ ìˆë‹¤ë©´, ê·¸ ì‚¬ëŒì´ Transactionì˜ Outputì— ìˆëŠ” Bitcoinì„ í•´ë‹¹í•˜ëŠ” amountë§Œí¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n![transaction-script](/images/transaction-script.jpeg)\n\n#### 2-4. Example\n\nì´ì œ ScriptPubKeyê°€ ì£¼ì–´ì¡Œë‹¤ê³  ê°€ì •í•©ì‹œë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŠ” ë§ˆì¹˜ í•˜ë‚˜ì˜ ë¬¸ì œì²˜ëŸ¼ ëŠê»´ì§ˆ ìˆ˜ ìˆê³ , ìš°ë¦¬ëŠ” ì´ë¥¼ ë§Œì¡±í•˜ëŠ” ê°’ì„ ScriptSigì— ë„£ì–´ì„œ ë§Œë“¤ì–´ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤.\n\n> **2-4-1. $x^2 + x = 6$ì„ ë§Œì¡±í•˜ëŠ” x ê°’ ë„£ê¸°**\n\nì™„ì„±ëœ Scriptì—ì„œ xì— ë¬´ì—‡ì´ ë“¤ì–´ê°€ë©´ ë ì§€ë¥¼ ì¶”ì¸¡í•´ë´…ì‹œë‹¤.\n\n![transaction-example-2-4-1](/images/transaction-example-2-4-1.png)\n\nê²°ë¡ ìƒ $x^2 + x = 6$ì„ ë§Œì¡±í•˜ëŠ” xê°’ì´ í•„ìš”í•˜ë¯€ë¡œ $ x = 2$ì—¬ì•¼ í•©ë‹ˆë‹¤.\n\n> **2-4-2. SHA-1ì˜ collisionì„ ë°œìƒì‹œí‚¤ëŠ” ë‘ ê°œì˜ ê°’**\n\nì´ë²ˆì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ScriptPubKeyê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ScriptSigë¡œ ë­ê°€ ë“¤ì–´ê°€ì•¼ í• ì§€ë¥¼ ì¶”ì¸¡í•´ë´…ì‹œë‹¤.\n\n`ScriptPubKey`\n\n![transaction-example-2-4-2-goal](/images/transaction-example-2-4-2-goal.jpeg)\n\në‹¤ìŒê³¼ ê°™ì€ í˜•íƒœê°€ ì£¼ì–´ì§ˆ ë•Œ, ì´ë¥¼ ì—­ì—°ì‚°í•˜ì—¬ í•„ìš”ë¡œ í•˜ëŠ” ê°’ì´ ë¬´ì—‡ì¸ì§€ ì°¾ì•„ë‚˜ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![transaction-example-2-4-2](/images/transaction-example-2-4-2.png)\n\nê²°ë¡ ìƒ ë‹¤ìŒì˜ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” h, kë¥¼ **ScriptSig**ë¡œ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤.\n\n1. $h \\ne k$\n2. $sha1(h) = sha1(k)$\n\nì´ëŠ” SHA-1ì´ collisionì„ ë°œìƒí•˜ê²Œ í•˜ëŠ” ë‘ ê°œì˜ ê°’ì„ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. (ì´ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ”ì§€ ì—†ëŠ”ì§€ê°€ hashí•¨ìˆ˜ì˜ ì„±ëŠ¥ì„ í‘œì‹œí•˜ëŠ”ë° ê°€ì¥ í° ì§€í‘œê°€ ë©ë‹ˆë‹¤.)\n\nì´ì™€ ê°™ì€ í˜•íƒœë¡œ íŠ¹ì • ìˆ˜í•™ ë¬¸ì œ, ë˜ëŠ” hash collision ì˜ˆì‹œì— ëŒ€í•´ì„œ Bitcoinì„ í†µí•´ì„œ í˜„ìƒê¸ˆì„ ê±¸ê¸°ë„ í•œë‹¤ê³  í•©ë‹ˆë‹¤.\n\n#### 2-5. ì£¼ìš” Script\n\nìœ„ì˜ ì˜ˆì‹œë¥¼ ì‚´í´ë³´ì•˜ì§€ë§Œ, ì‚¬ì‹¤ ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ Scriptë¥¼ í‘œí˜„í•œë‹¤ë©´, ëˆ„êµ¬ë‚˜ í•´ë‹¹ Transactionì˜ Outputì•ˆì— ìˆëŠ” Bitcoinì„ ì‚¬ìš©í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì´ì œ ë‚˜ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Transaction Outputì„ ë§Œë“¤ê¸° ìœ„í•œ ì£¼ìš” Script í˜•íƒœë¥¼ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\n\n> **2-5-1. p2pk(Pay to PubKey)**\n\n**ScriptPubKey**ì—ëŠ” PubKeyì™€ OP\\_CHECKSIG ë‘ ê°œë¥¼ ë„£ì–´ë‘ê³ , **ScriptSig**ì— Signatureë§Œ ë„£ì–´ë‘ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì´ ë°©ì‹ ë•Œë¬¸ì—, Transaction Outputì— ìˆëŠ” ScriptPubKeyì˜ ì´ë¦„ì´ ì´ë ‡ê²Œ ë¶ˆë ¤ì§€ê³ , Transaction Inputì˜ ScriptSigì˜ ì´ë¦„ì´ ì •í•´ì§€ê²Œ ëœ ê²ƒì…ë‹ˆë‹¤.\n\n![transaction-p2pk](/images/transaction-p2pk.png)\n\n> **2-5-2. p2pkh(Pay to PubKey Hash)**\n\np2pkì—ì„œ ë¬¸ì œê°€ í•˜ë‚˜ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ ê³µê°œí‚¤ê°€ ëª¨ë“  ì´ë“¤ì—ê²Œ ë³´ì¸ë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì´ê²ƒì´ ì™œ ë¬¸ì œì¼ ìˆ˜ ìˆëƒê³  í•  ìˆ˜ ìˆì§€ë§Œ, í•´ë‹¹ ê±°ë˜ ìì²´ê°€ ëª¨ë‘ ê³µê°œë˜ê¸° ë•Œë¬¸ì— ê³µê°œí‚¤ë¥¼ ì—´ì–´ë‘ê³ , ê¸´ ì‹œê°„ ë™ì•ˆ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì–¸ì œ ê°€ëŠ” ë¬´ì‹í•˜ê²Œ í’€ì–´ë‚˜ê°€ëŠ” ê³¼ì •ì—ì„œ ë‹µì„ ì°¾ì•„ë‚¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ëŒ€ê²ŒëŠ” ê³µê°œí‚¤ì˜ ìœ íš¨ì‹œê°„ì„ ë‘ê³  í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, Transactionì˜ ìœ íš¨ê¸°ê°„ì„ ë‘˜ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ, PubKeyë¥¼ ë°”ë¡œ ê³µê°œí•˜ì§€ ì•ŠëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¦„ì—ì„œë¶€í„° ëŠê»´ì§€ê² ì§€ë§Œ, **PubKeyì˜ hashë¥¼ ìˆ˜í–‰**í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ê²°ë¡ ì ìœ¼ë¡œ ê±°ë˜ë¥¼ ì‚¬ìš©í•  ë•Œ, outputì„ ì‚¬ìš©í•˜ëŠ” ì…ì¥ì—ì„œ, pubkeyì™€ signatureë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. (ì—¬ê¸°ì„œ PubKeyì— hash160ì„ ìˆ˜í–‰í•˜ê³ , Base58ë¡œ encoding í•œ ê²ƒì„ addressë¼ê³  í•©ë‹ˆë‹¤.)\n\n`ScriptPubKey ì™€ ScriptSig`\n\n![transaction-p2pkh](/images/transaction-p2pkh.jpeg)\n\n`Scriptì˜ ì„±ê³µì ì¸ ë™ì‘ì˜ˆì‹œ 1`\n\n![transaction-p2pkh-2](/images/transaction-p2pkh-2.jpeg)\n\n`Scriptì˜ ì„±ê³µì ì¸ ë™ì‘ì˜ˆì‹œ 2`\n\n![transaction-p2pkh-3](/images/transaction-p2pkh-3.jpeg)\n\n> **2-5-3. p2psh (Pay to Script Hash)**\n\np2pshëŠ” ì—¬ëŸ¬ ê°œì˜ keyì™€ signatureë¥¼ ê°€ì§€ëŠ” ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ ê°œì˜ PubKeyë¥¼ í¬í•¨í•˜ê³  ìˆëŠ” RedeemScriptë¼ëŠ” ê²ƒì„ Hash í•˜ì—¬ ScriptPubKeyì— ì¶”ê°€ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤. RedeemScriptë¼ê³  ë¶ˆë¦¬ëŠ” ì´ìœ ëŠ” ì´ê²ƒì´ í›„ì— ë‹¤ì‹œ í•˜ë‚˜ì˜ Scriptë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë‚´ë¶€ì— ë“¤ì–´ê°€ëŠ” RedeemScriptëŠ” Serialization í•´ì„œ elementë¡œ ë„£ìŠµë‹ˆë‹¤.\n\n`ScriptPubKey, ScriptSig ê³¼ RedeemScript`\n\n![transaction-p2psh-1](/images/transaction-p2psh-1.jpeg)\n\n`Scriptì˜ ë™ì‘ ì˜ˆì‹œ - 1`\n\n![transaction-p2psh-2](/images/transaction-p2psh-2.jpeg)\n\n`Scriptì˜ ë™ì‘ ì˜ˆì‹œ - 2`\n\n![transaction-p2psh-3](/images/transaction-p2psh-3.jpeg)\n\n`Scriptì˜ ë™ì‘ ì˜ˆì‹œ - 3`\n\n![transaction-p2psh-4](/images/transaction-p2psh-4.jpeg)\n\n> **2-5-0. Signature ìƒì„±**\n\nì£¼ìš” Scriptë¥¼ ì•Œì•„ë³´ê¸° ì „ì— ë¹ íŠ¸ë¦° ë¶€ë¶„ì„ ë¨¼ì € ì±„ìš°ê³  ê°€ì•¼ í•©ë‹ˆë‹¤. ë°”ë¡œ, ì´ì „ì— ECDSAì—ì„œ ì‚¬ìš©í•˜ë˜ ë³€ìˆ˜ ì¤‘ í˜„ì¬ ëˆ„ë½ëœ ë³€ìˆ˜ë¥¼ ì±„ìš°ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ì „ì— ì‚´í´ë´¤ë“¯ì´ íŠ¹ì • dataì˜ ì†Œìœ ê°€ ìì‹ ì´ë¼ëŠ” ê²ƒì„ ì¸ì¦í•˜ê¸° ìœ„í•´ì„œ, ECDSAì—ì„œëŠ” ê³µê°œí•˜ëŠ” ë°ì´í„°ë¡œ Signatureì™€ dataì˜ hash ê°’ ê·¸ë¦¬ê³  Public Keyë¥¼ ì´ìš©í–ˆê³ , ê³µê°œí•˜ì§€ ì•Šê³ , ìì‹ ë§Œ ê°€ì§€ëŠ” ë°ì´í„°ë¡œ Private Keyë¼ëŠ” ê²ƒì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ëˆ„ë½ëœ ê²ƒì€ ë°”ë¡œ **dataì˜ hash ê°’**ê³¼ **Signatureì˜ ìƒì„±** ë°©ë²•ì…ë‹ˆë‹¤.(ì™œëƒí•˜ë©´, SignatureëŠ” dataì˜ hashê°’ì´ ì¡´ì¬í•´ì•¼ë§Œ ìˆ˜í–‰í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.) ì´ëŠ” ì–´ë–»ê²Œ ë§Œë“¤ì–´ì§€ëŠ” ì•Œì•„ë´…ì‹œë‹¤.\n\n1. í˜„ì¬ì˜ Transactionì—ì„œ ëª¨ë“  inputì˜ ScriptSigë¥¼ ë¹ˆ ê°’ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.\n2. ê·¸ë¦¬ê³ , ScriptSigë¥¼ ìƒì„±í•´ì•¼ í•˜ëŠ” inputì— ScriptSig ë¶€ë¶„ì—ë§Œ ì´ì „ Transactionì˜ ScriptPubKeyë¥¼ ëŒ€ì…í•©ë‹ˆë‹¤. (ì´í•´ë¥¼ ë•ê¸° ìœ„í•´ì„œ ì´ë ‡ê²Œ ì¼ì§€ë§Œ, ì´ ë°©ë²•ë§Œ ìˆëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤. ì´ëŸ° ë°©ë²•ì´ ëª‡ ê°œ ë” ìˆìœ¼ë©´, ì´ ë°©ë²•ì— ëŒ€í•œ ì‹ë³„ ê°’ì´ 4ë²ˆì—ì„œ í‘œì‹œë©ë‹ˆë‹¤.)\n3. ì´ë¥¼ ì´ì œ Serialization í•©ë‹ˆë‹¤.\n4. Hash ë°©ë²•ì— í•´ë‹¹í•˜ëŠ” dataì˜ ë§¨ ë’¤ì— 4 bytesë¡œ ì‚½ì…í•©ë‹ˆë‹¤.\n5. ê·¸ë¦¬ê³ , ì´ë¥¼ Hash í•©ë‹ˆë‹¤.\n6. ì´ë ‡ê²Œ ìƒì„±ëœ hash ê°’ì„ ì´ìš©í•´ì„œ Signatureë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n\nì´ì œ, ìš°ë¦¬ëŠ” zì™€ signatureë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤. ì´ì œ Transactionì˜ ìƒì„±ìëŠ” signatureë¥¼ í¬í•¨ì‹œí‚¬ ìˆ˜ ìˆê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, Transactionì„ ë³¼ ìˆ˜ ìˆëŠ” ë‹¤ë¥¸ ëª¨ë“  ì‚¬ëŒë“¤ë„ í•´ë‹¹ Transactionì´ íƒ€ë‹¹í•œì§€ í™•ì¸í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¨ì§€ Transactionì„ ìœ„ì™€ ê°™ì´ ë³€ê²½í•˜ì—¬ì„œ, zë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 3. Transaction Validation\n\nê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ëŠ” Transactionì´ ì–¸ì œ íƒ€ë‹¹í•˜ë‹¤ê³  ë§í•  ìˆ˜ ìˆì„ê¹Œìš”? ë°”ë¡œ ë‹¤ìŒ ì„¸ ê°€ì§€ë¥¼ ë§Œì¡±ì‹œì¼œì•¼ì§€ ìš°ë¦¬ëŠ” í•´ë‹¹ Transactionì´ íƒ€ë‹¹í•˜ë‹¤ê³  í•©ë‹ˆë‹¤.\n\n- ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” Transactionì˜ outputì´ ì§„ì§œ ì‚¬ìš©ëœ ì ì´ ì—†ëŠ”ì§€ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n  ì´ëŠ” ìœ„ì—ì„œ ì œì‹œí–ˆë˜ UTXOë¥¼ ì¡°íšŒí•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì§€ê¸ˆì€ ì´ ì •ë„ë¡œ ë°–ì— ì„¤ëª…í•  ìˆ˜ ì—†ì§€ë§Œ, ì´ëŠ” í›„ì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.\n- Transactionì˜ inputë“¤ë³´ë‹¤ outputë“¤ì´ ë” í° ê°’ì„ ë‚´ë³´ë‚´ì§€ëŠ” ì•Šì•˜ëŠ”ì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n  ì´ëŠ” ì´ì „ Transaction Outputì„ ëª¨ë‘ ë”í•œ ê°’ì´ í˜¹ì—¬ í˜„ì¬ Transactionì˜ Outputì˜ ì´í•©ë³´ë‹¤ í°ì§€ë¥¼ í™•ì¸í•˜ë„ë¡ í•´ì•¼ í•©ë‹ˆë‹¤. ìœ„ì˜ ì§„ì§œ ì‚¬ìš© ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê³¼ì •ì—ì„œ ì´ì „ Transaction outputì˜ amountë„ ì•Œ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì´ëŠ” ì‰½ê²Œ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ScriptSig + ScriptPubKeyë¡œ ë§Œë“¤ì–´ì§„ ìµœì¢… Scriptê°€ íƒ€ë‹¹í•œì§€ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤.\n  ì´ëŠ” ìœ„ì—ì„œ ì§„í–‰í–ˆë˜ Scriptì˜ Checkë¥¼ í†µí•´ì„œ ìˆ˜í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\nì´ ëª¨ë“  ê³¼ì •ì„ í†µê³¼í–ˆì„ ë•Œ, ìš°ë¦¬ëŠ” í•´ë‹¹ Transactionì´ íƒ€ë‹¹í•˜ë‹¤ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 4. Transaction Creation\n\nì´ì œê¹Œì§€ì˜ ëª¨ë“  ê²ƒì„ ì •ë¦¬í•˜ì—¬, Transactionì˜ ìƒì„± ê³¼ì •ì„ ëª¨ë‘ ì •ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤.\n\n1. Transactionì„ í†µí•´ Bitcoinì„ ë³´ë‚¼ ëŒ€ìƒì˜ PubKey ë˜ëŠ” address(PubKeyë¥¼ hash + Base58)ë¥¼ ë°›ì•„ì˜¤ê³ , ì–¼ë§ˆë‚˜ Bitcoinì„Â  ë³´ë‚¼ì§€(amount)ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.\n2. Transactionì˜ feeë¡œ ì–¼ë§ˆë‚˜ ì§€ì¶œí• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.\n3. Inputsê°€ ì‚¬ìš©í•˜ëŠ” ì´ì „ Transaction Outputsì˜ í•©ì´ (fee + ì§€ì¶œí•  Bitcoin) Outputsì˜ ì´í•©ë³´ë‹¤ í¬ë„ë¡ CTXOë¥¼ í•˜ë‚˜ ì´ìƒ ì„ íƒí•©ë‹ˆë‹¤. (ì´ ê³¼ì •ì—ì„œ CTXOê°€ ì •ë§ ì‚¬ìš©ëœ ê²ƒì´ ì•„ë‹Œ ê²ƒì¸ì§€ì— ëŒ€í•œ í™•ì¸ë„ ìˆ˜í–‰í•©ë‹ˆë‹¤.)\n4. CTXOê°€ ìì‹ ì˜ ê°’ì„ì„ ì¦ëª…í•  ìˆ˜ ìˆë„ë¡ Signatureë¥¼ ìƒì„±í•˜ê³ , (ì´ ê³¼ì •ì—ì„œ ë‹¹ì—°íˆ 2-5-0ì—ì„œ ì„¤ëª…ëœ ê³¼ì •ì´ ìˆ˜í–‰ë©ë‹ˆë‹¤.) ì´ì „ Transaction Outputì—ì„œ ì œì‹œí•œ **ScriptPubKey**ì™€ ê²°í•©í–ˆì„ ë•Œ, íƒ€ë‹¹í•œ Scriptê°€ ë  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” **ScriptSig**ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n5. ìœ„ì—ì„œ ìƒì„±í•œ ScriptSigì™€ ì´ì „ Transaction Outputì„ íŠ¹ì •í•  ìˆ˜ ìˆëŠ” ê°’ì„ ë¬¶ì–´ì„œ Transaction Inputë“¤ì„ ì‘ì„±í•©ë‹ˆë‹¤.\n6. Bitcoinì„ ë³´ë‚¼ ëŒ€ìƒì˜ addressë¥¼ ì´ìš©í•´ì„œ, ì ì ˆí•œ **ScriptPubKey**ë¥¼ ìƒì„±í•˜ì—¬, amountì™€ í•¨ê»˜ Transaction Outputë“¤ì„ ë§Œë“­ë‹ˆë‹¤. ì´ë•Œ ì”ëˆì´ ë°œìƒí•œë‹¤ë©´, ìì‹ ì—ê²Œ ë‹¤ì‹œ ë³´ë‚´ëŠ” Transaction Outputë„ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\n7. Transactionì— version, locktime ë“±ì„ ì¶”ê°€í•˜ì—¬, Transactionì„ ìµœì¢…ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.\n\nì´ì „ ê¸€ê³¼ ë™ì¼í•˜ê²Œ êµ¬í˜„ ì‚¬í•­ì€ githubì— ì •ì˜í•´ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"bitcoin-3","date":"2022-03-22 11:22","title":"[Bitcoin] 3. Transaction","category":"Tech","tags":["BlockChain","Bitcoin","ECC","ecdsa"],"desc":"í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.í•´ë‹¹ chapterì—ì„œëŠ” Bitcoinì´ ì‹¤ì œë¡œ ì–´ë–»ê²Œ ì „ë‹¬ë˜ë©°, Bitcoinì„ ì´ìš©í•œ ê±°ë˜ëŠ” ì–´ë–»ê²Œ ìˆ˜í–‰ë˜ëŠ”ì§€ë¥¼ ë‹¤ë£¹ë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ìœ„í•´ Bitcoinì—ì„œ êµ¬ì¶•í•œ Scriptë¼ëŠ” languageë¥¼ ì†Œê°œí•˜ê³  ì—¬ëŸ¬ ì¸ì¦ ë°©ì‹ì„ ì†Œê°œí•©ë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/bitcoin.jpg"},{"content":"\n## Intro\n\n**í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.**Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.\n\n**í•´ë‹¹ chapterì—ì„œëŠ” Blockchain Network êµ¬ì¡°ì— ëŒ€í•œ ì´í•´ì™€ ì‹¤ìš©ì„±ì„ í–¥ìƒí•˜ê¸° ìœ„í•œ MerkleTree, Bloom Filter, SigWitì— ëŒ€í•´ì„œ ì •ë¦¬í•©ë‹ˆë‹¤.**\n\nì´ì „ Chapterì—ì„œëŠ” Transactionì˜ ì†Œìœ  ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ìì„¸íˆ ë‹¤ë£¨ì—ˆìŠµë‹ˆë‹¤. ê±°ê¸°ì„œ Transactionì˜ ì‚¬ìš© ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œì—ëŠ” UTXO(Unspent Transaction Output) setì´ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŠ” ì–´ë–»ê²Œ ìƒì„±ë˜ê³ , ì–´ë–»ê²Œ ê´€ë¦¬ë˜ëŠ”ì§€ë¥¼ í•´ë‹¹ partì—ì„œ í•œ ë²ˆ ë‹¤ë£¨ì–´ë³´ê² ìŠµë‹ˆë‹¤.\n\n---\n\n### 1. Blockchain\n\nìš°ë¦¬ì˜ Transactionì„ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì„ ê°•êµ¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ëª¨ë“  Transactionì„ í‘œì˜ í˜•íƒœë¡œ ì €ì¥í•´ë‘ëŠ” ê²ƒë„ ë°©ë²•ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, Bitcoinì—ì„œëŠ” ì´ë¥¼ Blockì´ë¼ëŠ” ë‹¨ìœ„ë¡œ ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n#### 1-1. Block\n\n##### 1-1-1. ì •ì˜\n\nBlockì´ë€ Transactionì„ ì €ì¥í•˜ëŠ” í•˜ë‚˜ì˜ ë‹¨ìœ„ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ Blockì˜ í¬ê¸°ëŠ” 1MBë¡œ ì œí•œë˜ì–´ìˆìŠµë‹ˆë‹¤. (ë¬¼ë¡  ì§€ê¸ˆì€ ì—¬ëŸ¬ ë‹¤ë¥¸ ë³€ì¢…ì—ì„œëŠ” ì´ ì œí•œì´ ë‹¤ë¥´ê¸°ë„ í•©ë‹ˆë‹¤.)\n\n##### 1-1-2. êµ¬ì¡°\n\në”°ë¼ì„œ, Blockì—ëŠ” ì´ë¥¼ ë§Œì¡±í•˜ëŠ” Transactionì˜ ê°¯ìˆ˜ë§Œí¼ë§Œì„ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì´ë£¨ëŠ” êµ¬ì¡°ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n1. Header : í•´ë‹¹ Blockì— ëŒ€í•œ ì„¤ëª…ì„ ìœ„í•œ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. íŠ¹íˆ, í•´ë‹¹ Blockì˜ ì •ë‹¹ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•œ ë‚´ìš©ì„ í¬í•¨í•©ë‹ˆë‹¤.\n2. Coinbase Transaction : Blockì— ì¡´ì¬í•˜ëŠ” ì²«ë²ˆì§¸ Transactionì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n3. Transactions : ì—¬ëŸ¬ userë“¤ì˜ ê±°ë˜ ë‚´ìš©ì„ í¬í•¨í•˜ëŠ” ë‚´ìš©ì…ë‹ˆë‹¤. ì´ ì•ˆì—ë„ Block ìƒì„±ìë¥¼ ìœ„í•œ ë³´ìƒì´ í¬í•¨ë©ë‹ˆë‹¤. ë³´ìƒì´ ì—†ë‹¤ë©´, í•´ë‹¹ transactionì˜ ìš°ì„ ìˆœìœ„ëŠ” ë‚®ì„ ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\n![blockchain](/images/blockchain.jpeg)\n\n##### 1-1-3. Coinbase Transaction\n\nê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  Transactionì€ ì´ì „ Transactionì˜ Outputì„ ê°€ë¥´í‚¤ê³  ìˆì–´ì•¼ í•˜ë©°, ì´ê²ƒì´ ìì‹ ì˜ ê²ƒì´ë¼ëŠ” ì¦ëª…ì„ í¬í•¨í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì˜ë¬¸ì´ ìƒê¸°ëŠ” ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  Transactionì˜ ëìœ¼ë¡œ ê°”ì„ ë•Œ, ê³¼ì—° ê¸°ë°˜ Transactionì€ ì–´ë””ì„œ ì˜¤ëŠ”ê°€ì— ëŒ€í•œ ê³ ë¯¼ì„ í•˜ê²Œ ë©ë‹ˆë‹¤. ê·¸ê²ƒì´ ë˜ëŠ” ê²ƒì´ ë°”ë¡œ ì´ Coinbase Transactionì…ë‹ˆë‹¤. ì´ëŠ” ì´ì „ Transactionì˜ Output ì—†ì´ë„ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” í•´ë‹¹ Blockì„ ë§Œë“¤ì–´ë‚¸ ìƒì„±ìì—ê²Œ ë³´ìƒì„ ì œê³µí•˜ëŠ” ì˜ë¯¸ì—ì„œ Bitcoinì„ ì œê³µí•©ë‹ˆë‹¤. í•´ë‹¹ Transactionì€ ì´ì „ Transactionì„ ê°€ë¦¬í‚¤ëŠ” ê°’ì´ ëª¨ë‘ 0ìœ¼ë¡œ ì´ˆê¸°í™”ë˜ì–´ìˆì–´ ì‰½ê²Œ ì‹ë³„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ, íŠ¹ì´í•˜ê²Œë„, Coinbase Transactionì˜ ì •ë‹¹ì„±ì€ Block ìì²´ê°€ ì¦ëª…í•˜ê¸° ë•Œë¬¸ì—, inputì˜ ScriptSig ë¶€ë¶„ì€ ë¬´ì˜ë¯¸í•œ ë°ì´í„°ê°€ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì—¬ê¸°ì—ëŠ” ìì‹ ë§Œì˜ ì² í•™ì„ ë‹´ì€ ë¬¸êµ¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì—ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì‹œê°„ì´ ì¢€ íë¥¸ í›„ì—ëŠ” ì—¬ê¸°ì— Blockì˜ height(ì œì¼ ì²« ë²ˆì§¸ Blockê³¼ì˜ ê±°ë¦¬)ë¥¼ í‘œì‹œí•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n\nì™œ Blockì„ ìƒì„±í•œ ì‚¬ëŒì—ê²Œ Bitcoinì„ ì œê³µí•˜ëŠ” ê²ƒì¼ê¹Œìš”? ì´ëŠ” ì´ì œ ì•ìœ¼ë¡œ ì‚´í´ë³¼ PoWì—ì„œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.\n\n##### 1-1-4. Header\n\nHeaderëŠ” ì´ 6ê°œì˜ ì •ë³´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.\n\n1. Version : BIP(Bitcoin Improvement Proposal)ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ Bitcoin ì‹œìŠ¤í…œì˜ í–¥ìƒì„ ìœ„í•œ ì œì•ˆë“¤ì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ì‹¤ì œë¡œ Blockì˜ Versionì´ ë°”ë€Œê¸°ë„ í•©ë‹ˆë‹¤. ê·¸ëŸ°ë°, ì´ê²ƒì´ ì´ì „ Versionì˜ Blockê³¼ í˜¸í™˜ì´ ëœë‹¤ë©´, ì´ë¥¼ Soft Forkë¼ê³  í•˜ê³ , ì´ì „ Versionê³¼ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ë…ë¦½ì ì¸ Chainìœ¼ë¡œ ë¶„ë¦¬ë˜ëŠ” ê²ƒì„ Hard Forkë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.\n2. Previous Block : Blockchainì´ë¼ê³  ë¶ˆë¦¬ëŠ” ì´ìœ ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ì— ë³´ì•˜ë˜ Transaction ì²˜ëŸ¼ Block ì—­ì‹œ ì´ì „ Blockê³¼ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ëª¨ë“  ê±°ë˜ ì¥ë¶€ì˜ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n3. Merkle root : í•´ë‹¹ Blockì´ ì†Œìœ í•˜ê³  ìˆëŠ” Transactionì˜ hashê°’ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  íŠ¸ë¦¬ êµ¬ì¡°ì—ì„œ rootì— í•´ë‹¹í•˜ëŠ” ê°’ì…ë‹ˆë‹¤. ì´ëŠ” í›„ì— Block ë‚´ë¶€ì— Transaction ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ë„êµ¬ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤.\n4. Timestamp : í•´ë‹¹ Blockì˜ ìƒì„± ì‹œì ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n5. Bits : ì•ìœ¼ë¡œ ë‚˜ì˜¬ PoW partì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ìœ¼ë¡œ, ì´ëŠ” íŠ¹ì • ì‘ì—…ì˜ ë‚œì´ë„ë¥¼ í‘œí˜„í•©ë‹ˆë‹¤.\n6. Nonce : ì•ìœ¼ë¡œ ë‚˜ì˜¬ PoW partì—ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ìœ¼ë¡œ, ì´ëŠ” íŠ¹ì • ì‘ì—…ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë³€ìˆ˜ê°’ì— í•´ë‹¹í•©ë‹ˆë‹¤.\n\n##### 1-1-5. Proof of Work(PoW)\n\nì´ëŠ” Blockchainì—ì„œ ìµœì´ˆë¡œ ë§Œë“¤ì–´ì§„ ê°œë…ì€ ì•„ë‹™ë‹ˆë‹¤. ê¸°ì¡´ì— Spam mailì„ ë§‰ê¸° ìœ„í•œ ìˆ˜ë‹¨ìœ¼ë¡œ ì‚¬ìš©ëœ ì ì´ ìˆëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ ê¸°ìˆ ì˜ ëª©ì ì€ ë¬´ë¶„ë³„í•œ ê°€ì§œ, ì‚¬ê¸°, ë¬´ì˜ë¯¸í•œ ë°ì´í„°ê°€ ë¹ˆë²ˆí•˜ê²Œ ë„¤íŠ¸ì›Œí¬ ìƒì—ì„œ ê³µìœ ë˜ëŠ” ê±¸ ë§‰ëŠ” ê²ƒì…ë‹ˆë‹¤. ì¦‰, ëˆ„êµ°ê°€ ì•…ì˜ì ìœ¼ë¡œ Bitcoin ì‹œìŠ¤í…œì„ ë§ˆë¹„ì‹œí‚¤ê¸° ìœ„í•´ì„œ, ì•…ì˜ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¬´ì°¨ë³„ì ìœ¼ë¡œ ë³´ë‚´ë©´, Blockì˜ Transactionì„ ì¦ëª…í•˜ëŠ” ë°ì—ë§Œ ë„ˆë¬´ ë§ì€ ìì›ì„ ì†Œëª¨í•˜ê²Œ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë§‰ê¸° ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ ê²ƒì´ PoWì…ë‹ˆë‹¤.\n\ní•˜ë‚˜ì˜ Blockì„ ë§Œë“¤ê³ , ê³µìœ í•˜ê³ , ê²€ì¦ë°›ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ì–´ë–¤ íŠ¹ì • ëª©í‘œê°’ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ ì°¾ë„ë¡ í•˜ì—¬ ì´ëŸ¬í•œ ë¬´ë¶„ë³„í•œ Blockì˜ ìƒì„±ì„ ë§‰ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. Bitcoinì—ì„œëŠ” í•˜ë‚˜ì˜ Blockì„ ë§Œë“œëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ í‰ê·  10ë¶„ì´ ë  ìˆ˜ ìˆë„ë¡ ê³„ì†í•´ì„œ, ë‚œì´ë„ë¥¼ ìˆ˜ì •í•˜ëŠ” Algorithmì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. (2016 Block ë‹¨ìœ„ë¡œ ë‚œì´ë„ëŠ” ê°±ì‹ ë©ë‹ˆë‹¤.)\n\nì´ì œ ì—¬ê¸°ì„œ ê¶ê¸ˆí•  ìˆ˜ ìˆëŠ” ì‚¬í•­ì´ ëª‡ ê°œ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì— ëŒ€í•´ì„œ í•œ ë²ˆ ì¤€ë¹„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\n\n1. ì–´ë–»ê²Œ í‰ê·  10ë¶„ì´ ê±¸ë¦¬ëŠ” ë¬¸ì œë¥¼ ë‚¼ ìˆ˜ ìˆëŠ”ê°€?  \n    hash í•¨ìˆ˜ ì¤‘ hash256(sha-1 ë¼ëŠ” hash í•¨ìˆ˜ë¥¼ ë‘ ë²ˆ ì—°ì†ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•)ì„ ì‚¬ìš©í•˜ë©´, ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. sha í•¨ìˆ˜ëŠ” ê²°ê³¼ ê°’ìœ¼ë¡œ ë‚˜ì˜¨ ë°ì´í„°ì˜ ê° ìë¦¬ê°€ 1ì„ ê°€ì§ˆ í™•ë¥ ì´ 1/2ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì—­ì—°ì‚°ì„ í†µí•´ì„œ ì°¾ì„ ìˆ˜ë„ ì—†ê¸° ë•Œë¬¸ì—, ì—°ì†í•´ì„œ 0ì´ nê°œ ë‚˜ì˜¤ëŠ” ê°’ì„ ì°¾ìœ¼ë¼ê³  í–ˆì„ ë•Œ, ë¬´ì‘ì • ìˆ˜í–‰ì„ ë°˜ë³µí•˜ë©´ì„œ ì°¾ì„ ìˆ˜ë°–ì— ì—†ìŠµë‹ˆë‹¤. ì´ë¥¼ í•œ ë²ˆ ìˆ˜í–‰í•˜ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ Blockì— ë‹´ê¸´ timestampë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°í•˜ì—¬ í‰ê· ìƒ 10ë¶„ì´ ë‚˜ì˜¤ë„ë¡ ê°’ì„ ì¡°ì •í•´ì¤€ë‹¤ë©´, ì´ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë•Œ ìš°ë¦¬ê°€ Block headerì—ì„œ nonceë¼ëŠ” ê°’ì„ ê³„ì†í•´ì„œ ë°”ê¿”ì£¼ê³ , ì´ë¥¼ í¬í•¨í•œ Block headerë¥¼ hash í•˜ì—¬ ì—°ì†í•´ì„œ 0ì´ nê°œ ë‚˜ì˜¤ë„ë¡ í•˜ëŠ” nonceê°’ì„ ì°¾ê²Œ ëœë‹¤ë©´, ì´ê²ƒì´ ë°”ë¡œ í•˜ë‚˜ì˜ Blockì´ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.Â Â \n2. ë‚œì´ë„ë¼ëŠ” ê²ƒì€ ì–´ë–»ê²Œ ë³€ê²½ë˜ëŠ” ê²ƒì¼ê¹Œ?  \n    Computerì˜ ì„±ëŠ¥ì€ ì‹¤ì‹œê°„ìœ¼ë¡œ ê³„ì†í•´ì„œ ë°œì „í•˜ê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— Blockì„ í•˜ë‚˜ ì±„êµ´í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì€ ê³„ì†í•´ì„œ ì§§ì•„ì§ˆ ê²ƒì´ë¼ê³  ì¶”ì¸¡í•  ìˆ˜ ìˆì§€ë§Œ, Bitcoin ì‹œìŠ¤í…œì—ì„œëŠ” ì´ ë‚œì´ë„ ê°’ì„ bitsë¼ëŠ” Blockì˜ headerë¥¼ í†µí•´ì„œ í†µì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n3. Blockì— ë‹´ê¸´ Transactionì€ ì–´ë””ì—ì„œ ì˜¤ëŠ”ê°€?  \n    Blockì— ë‹´ê¸°ëŠ” Transactionì€ ëª¨ë‘ ì±„êµ´ì(Blockì„ ìƒì„±í•˜ê³ ì í•˜ëŠ” ì)ê°€ ì†¡ê¸ˆí•œ ê¸°ë¡ì´ ì•„ë‹Œ ì£¼ë³€ nodeë“¤ë¡œë¶€í„° ì „ë‹¬ë°›ì€ Transactionì´ ëŒ€ë¶€ë¶„ì…ë‹ˆë‹¤. ì±„êµ´ìëŠ” ì´ë¥¼ Blockì— ë‹´ì„ ìˆ˜ ìˆëŠ” ì–‘ë§Œí¼ ëª¨ì•„ì„œ Block Headerë¥¼ ì‘ì„±í•œ í›„, nonceë¼ëŠ” ê°’ì„ ì°¾ì•„ ë– ë‚˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë•Œ Blockì— ë‹´ê¸°ëŠ” Transactionì˜ ìš°ì„ ìˆœìœ„ëŠ” Blockì„ ë§Œë“œëŠ” ì´ì—ê²Œ ë‹¬ë ¤ ìˆìŠµë‹ˆë‹¤.\n4. Blockì„ ì™œ ë§Œë“¤ì–´ì£¼ëŠ”ê°€?  \n    ì•„ê¹Œë„ ë§í–ˆë“¯ì´ Coinbase Transactionì€ ì±„êµ´ì(Blockì„ ìƒì„±í•˜ê³ ì í•˜ëŠ” ì)ì—ê²Œ í–¥í•˜ëŠ” outputì„ ê°€ì§‘ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì±„êµ´ìëŠ” ì´ë¥¼ í†µí•´ì„œ Bitcoinì„ ë²Œ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ë˜í•œ, Transactionì„ Blockì— ì˜¬ë¦¬ê¸° ìœ„í•´ì„œ, ì£¼ë³€ nodeë“¤ì—ê²Œ Bitcoin ì†¡ê¸ˆìë“¤ì´ ì´ë¥¼ ìš”ì²­í•˜ë©´ì„œ, ìˆ˜ìˆ˜ë£Œ ì¼ë¶€ë¥¼ í•´ë‹¹ nodeì—ê²Œ ê°€ëŠ” outputìœ¼ë¡œ ì§€ì •í•˜ê¸° ë•Œë¬¸ì—, Blockì„ ë§Œë“ ë‹¤ëŠ” ê²ƒì€ Bitcoinì„ ë²„ëŠ” ê²ƒê³¼ ê°™ì€ í–‰ìœ„ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì˜¬ë¼ê°ˆ Transactionì˜ ìš°ì„ ìˆœìœ„ëŠ” ì´ ìˆ˜ìˆ˜ë£Œì— ê¸°ë°˜í•˜ì—¬ ìƒì„±ë©ë‹ˆë‹¤.\n5. Blockì„ ì¤‘ê°„ì— ëˆ„ê°€ ë°”ê¿”ì„œ ìì‹ ì˜ ê²ƒì´ë¼ê³ , ë°”ê¾¸ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ê°€?  \n    ìµœì´ˆë¡œ ë°œê²¬í•œ Blockì— ëŒ€í•´ì„œ ëˆ„êµ°ê°€ ì´ê²ƒì„ ìì‹ ì´ ë°œê²¬í–ˆë‹¤ê³ , ì†ì´ëŠ” ê²ƒì€ ì˜ë¯¸ê°€ ì—†ìŠµë‹ˆë‹¤. ì• ì´ˆì— Blockì„ ë„ìš©í•˜ëŠ” ê²ƒì€ ì´ê²ƒì„ í†µí•´ì„œ ë°œìƒí•˜ëŠ” ìˆ˜ìˆ˜ë£Œë¥¼ ì¼ë¶€ ì·¨í•˜ê² ë‹¤ëŠ” ê²ƒì¸ë°, ì´ëŠ” Block ë‚´ë¶€ì˜ Transactionì„ ë°”ê¾¸ì–´ì•¼ í•˜ê³ , ì´ë¥¼ ë°”ê¾¼ë‹¤ëŠ” ê²ƒì€ headerì˜ merkle root ê°’ì„ ë°”ê¾¸ëŠ” ê²°ê³¼ë¥¼ ì´ˆë˜í•©ë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ë©´ ë‹¹ì—°íˆ ì´ì „ì˜ nonceê°’ì´ ê°€ì§€ëŠ” íš¨ê³¼ëŠ” ëª¨ë‘ ì‚¬ë¼ì§€ê¸° ë•Œë¬¸ì—, ë„ìš©í•œë‹¤ëŠ” ê²ƒ ìì²´ê°€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.\n6. Blockì˜ ê²€ì¦ì€ ì–´ë–»ê²Œ ì´ë£¨ì–´ì§€ëŠ”ê°€?  \n    ìœ„ì—ì„œ ë³´ì•˜ë“¯ì´ Blockì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì•ì—ì„œë¶€í„° ì—°ì†í•´ì„œ 0ì´ nê°œ ë‚˜ì˜¤ê²Œ í•˜ëŠ” Blockì˜ hashê°’ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ í•´ë‹¹ Blockì„ ë°›ê³ , ì´ë¥¼ hash í•œ í›„ì— ë¹„êµë¥¼ í†µí•´ì„œ, ì´ Blockì´ ì ì ˆí•œì§€ íŒŒì•…í•˜ëŠ” ê²ƒì€ ë‹¨ í•œ ë²ˆì˜ hashë¡œ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì—, ê²€ì¦ì€ ë§¤ìš° ì‰½ì§€ë§Œ, ìƒì„±ì€ êµ‰ì¥íˆ ì–´ë µê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n7. nonce fieldì˜ í¬ê¸°ê°€ ì •í•´ì ¸ìˆë˜ë° ëª¨ë“  nonceë¥¼ ëª¨ë‘ ì‚¬ìš©í–ˆëŠ”ë°ë„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ë©´ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?  \n    ì´ë•Œì—ëŠ” coinbase transactionì˜ ê°’ì„ ì‚´ì§ ì¡°ì •í•©ë‹ˆë‹¤. ì´ë¥¼ ì¡°ì •í•˜ê²Œ ë˜ë©´, merkle rootì˜ ê°’ë„ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì—, hashë¥¼ ë‹¤ì‹œ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n8. BlockChainì— ë™ì‹œì— ì—¬ëŸ¬ Nodeê°€ ë“±ë¡ì„ í•˜ê²Œ ë˜ë©´ ì–´ë–»ê²Œ ë˜ëŠ”ê°€?  \n    ì¼ë‹¨ Blockì„ ë§Œë“¤ê²Œ ë˜ë©´, í•´ë‹¹ ì±„êµ´ìëŠ” ì´ë¥¼ ì „íŒŒí•©ë‹ˆë‹¤. ì´ê²ƒì´ ì˜¬ë°”ë¥¸ì§€ë¥¼ íŒŒì•…í•œ ë‹¤ë¥¸ Nodeë“¤ì€ ì´ë¥¼ ìì‹ ì˜ Blockchainì— ì—°ê²°í•˜ê²Œ ë˜ê³ , ë˜‘ê°™ì´ ì „íŒŒí•˜ê¸°ë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë‹¤ë¥¸ ëª¨ë“  Nodeë“¤ì´ í•´ë‹¹ Blockì„ í¬í•¨í•˜ëŠ” Blockchainì„ ê°–ê²Œ ë˜ë©´, í•´ë‹¹ Blockì€ ì´ì œ íƒ€ë‹¹í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ë§Œ ë™ì‹œì— ì—¬ëŸ¬ Blockì„ ë°›ì€ ê²½ìš°ì—ëŠ” í•´ë‹¹ Blockì„ ì—¬ëŸ¬ ê°œ ëª¨ë‘ ë³‘ë ¬ë¡œ ì—°ê²°í•´ë‘ê³  ìˆë‹¤ê°€, ê°€ì¥ ë¨¼ì € ìƒˆë¡œìš´ Blockì´ ì—°ê²°ëœ Blockì„ ì±„íƒí•˜ê³ , ë‚˜ë¨¸ì§€ ê¸°ì¡´ Blockì€ ë²„ë¦¬ê²Œ ë©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— Blockì„ ì±„êµ´í–ˆë‹¤ê³  ëì¸ ê²Œ ì•„ë‹ˆë¼ ì™„ì „íˆ ì„ íƒë˜ê¸°ê¹Œì§€ëŠ” ì™„ë²½í•˜ê²Œ Bitcoinì„ íšë“í–ˆë‹¤ê³ ëŠ” ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ëŒ€ê°œì˜ ê²½ìš°ì—ëŠ” ìì‹ ì„ í¬í•¨í•œ Blockì´ 6ê°œ ì—°ê²°ë˜ì—ˆì„ ë•Œ, ë¹„ë¡œì†Œ í•´ë‹¹ Blockì´ Blockchainì— ì™„ë²½í•˜ê²Œ ë“±ë¡ë˜ì—ˆë‹¤ê³  ë³´ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.\n\n##### 1-1-6. Genesis Block\n\nBlock ë‚´ì—ì„œë„ ìµœì´ˆì˜ Transactionì´ ì¡´ì¬í•˜ë“¯ì´, Block ë˜í•œ, ìµœì´ˆì˜ Blockì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ë¥¼ ìš°ë¦¬ëŠ” Genesis Blockì´ë¼ê³  ë¶€ë¥´ê³ , ëª¨ë“  Blockì˜ ìµœìƒë‹¨ì€ í•´ë‹¹ Blockì´ ë©ë‹ˆë‹¤. í•´ë‹¹ Blockì˜ Coinbase Transactionì˜ ScriptSigì—ëŠ” Bitcoinì˜ ì°½ì‹œì Satoshiì˜ ë™ê¸°ê°€ ë‹´ê¸´ ë¬¸êµ¬ë¥¼ í¬í•¨ì‹œì¼°ë‹¤.  \n(chancellor on brink of second bailout for banks)\n\n#### 1-2. P2P network\n\nìš°ë¦¬ê°€ ìƒê°í•˜ëŠ” Internetê³¼ ê²Œì„ ì‚°ì—…ê³¼ ê°ì¢… ì„œë¹„ìŠ¤ë“¤ì€ ëŒ€ê²Œ í° ê·œëª¨ì˜ Serverë¥¼ ê°€ì§€ê³  ìˆëŠ” ì—…ì²´ê°€ ìì‹ ë“¤ì˜ ì„œë¹„ìŠ¤ë¥¼ í•´ë‹¹ Serverë¥¼ í†µí•´ì„œ ëª¨ë“  Client(ì‚¬ìš©ì)ë“¤ì—ê²Œ ì œê³µí•˜ëŠ” í˜•íƒœë¥¼ ë„ê³  ìˆìŠµë‹ˆë‹¤. ì¦‰, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìê°€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ì œê³µí•¨ê³¼ ë™ì‹œì— ì†Œí”„íŠ¸ì›¨ì–´ ì‚¬ìš©ìê°€ í†µì‹ í•˜ì—¬ ì–»ì„ ë°ì´í„°ë“¤ë„ ëª¨ë‘ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œìê°€ ê´€ë¦¬í•œë‹¤ëŠ” íŠ¹ì§•ì´ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì´ ëŒ€ê²Œ ì¼ë°˜ì ì¸ í˜•íƒœì˜ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ì™€ ì „í˜€ ë‹¤ë¥¸ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆëŠ” ê²ƒì´ P2P networkì…ë‹ˆë‹¤. ì´ëŠ” Peer to Peerì˜ ì¤„ì„ë§ë¡œ, ê° Client(ì‚¬ìš©ì) ê°„ì˜ ì—°ê²°ì„ í†µí•´ì„œ Serviceë¥¼ ì œê³µí•œë‹¤ëŠ” ì ì´ ë§¤ìš° íŠ¹ì´í•œ ì ì…ë‹ˆë‹¤. ì¦‰, ê°œë°œìëŠ” Softwareë¥¼ ë§Œë“¤ê³ , ì´ë¥¼ ë°°í¬í•˜ëŠ” ì—­í• ë§Œì„ í•˜ê³ , Software ë¼ë¦¬ì˜ í†µì‹ ì€ Serverë¥¼ í†µí•´ì„œ ìˆ˜í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ ê° Softwareë¼ë¦¬ ì—°ê²°ë˜ì–´ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ í†µì‹  networkë¥¼ ë§Œë“œëŠ” í˜•ì‹ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ ë§Œë“  ë„¤íŠ¸ì›Œí¬ëŠ” Softwareë§Œ ë¬´ê²°í•˜ê²Œ ë§Œë“¤ì—ˆë‹¤ë©´, ì„œë¡œê°€ ì„œë¡œë¥¼ ê²€ì¦í•˜ê³ , ì£¼ì²´ì ìœ¼ë¡œ íŒë‹¨í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ë§Œë“¤ì–´ì„œ ë” ê±´ì „í•œ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ ë§Œë“¤ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì˜ Server êµ¬ì¡°ì—ì„œëŠ” ëª¨ë“  Clientì˜ ìš”ì²­ì„ Serverì—ì„œ í•´ê²°í•˜ê¸° ë•Œë¬¸ì—, ë¶€ë‹´ì´ ë§¤ìš° í¬ê³ , í•´í‚¹ì˜ íƒ€ê¹ƒì´ ë˜ëŠ” ë“± í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì— ëŒ€í•œ ë¶€í•˜ê°€ êµ‰ì¥íˆ í¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, P2P êµ¬ì¡°ì—ì„œëŠ” ì´ëŸ¬í•œ ë¶€ë‹´ì„ ë‚˜ëˆ ê°€ì§€ê¸° ë•Œë¬¸ì— ì˜¤íˆë ¤ ì•ˆì „í•´ì§ˆ ìˆ˜ ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë˜ì„œ, Bitcoinì—ì„œëŠ” Blockì„ ê³µê°œí•˜ê¸° ìœ„í•œ P2P networkë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ì¤‘ì•™ì— ìˆëŠ” ì‹œìŠ¤í…œ ì—†ì´ ê°œì¸ì´ ì–¸ì œë“ ì§€ ëª¨ë“  Blockchainì„ ë³´ê´€í•˜ê³  ìˆì„ ìˆ˜ ìˆê³ , ì´ë¥¼ ì´ìš©í•´ì„œ íŠ¹ì • ê±°ë˜ì— ëŒ€í•˜ì—¬ ê²€ì¦ì„ í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ì„œë¡œê°€ ì„œë¡œë¥¼ ê°ì‹œí•˜ë©°, ì„œë¡œê°€ ë³´ë‚´ëŠ” ë°ì´í„°ì— ëŒ€í•œ 100%ì˜ ì‹ ë¢°ë¥¼ ê°–ì§€ ì•Šê³ , ì§ì ‘ ê²€ì¦ì„ í†µí•´ì„œ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ê²ƒì´ Bitcoinì—ì„œ ì¶”êµ¬í•˜ëŠ” íƒˆì¤‘ì•™í™” ëœ ê±°ë˜ ê´€ë¦¬ ë°©ì‹ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-client-server-arch](/images/blockchain-client-server-arch.jpeg)\n\n![blockchain-p2p-arch](/images/blockchain-p2p-arch.jpeg)\n\n#### 1-3. Blockchain Data Types\n\nP2P networkë¥¼ í†µí•´ì„œ Blockê³¼ Transactionì´ ê³µìœ ê°€ ë˜ê¸° ë•Œë¬¸ì—, Bitcoin ì‹œìŠ¤í…œ ë‚´ì—ì„œëŠ” ë°ì´í„°ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ 3ê°€ì§€ë¡œ ë‚˜ëˆ„ì–´ ë³´ê´€í•©ë‹ˆë‹¤.\n\n1. mempool : ìŠ¹ì¸ë˜ì§€ ì•Šì€ Transactionì„ ë³´ê´€í•˜ëŠ” poolì…ë‹ˆë‹¤. minerë“¤ì€ ì´ë¥¼ Blockì— ë‹´ì•„ì„œ P2P networkë¡œ ë‹¤ì‹œ ê³µìœ í•˜ê³ , ì´ë¥¼ ë°›ì€ nodeëŠ” ì´ë¥¼ Blockchainì— ì—°ê²°ì‹œì¼œì„œ Blockì„ ë§Œë“¤ì–´ëƒ…ë‹ˆë‹¤.\n2. Blockchain : Blockì„ í•˜ë‚˜ì˜ ê¸´ chainì˜ í˜•íƒœë¡œ ë³´ê´€í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ëŠ” ëª¨ë“  Bitcoin ê±°ë˜ì— í•´ë‹¹í•˜ëŠ” ê°€ê³„ë¶€(ì›ì¥)ì´ë¼ê³  í•  ìˆ˜Â  ìˆìŠµë‹ˆë‹¤.\n3. UTXO set : ì´ì „ì—ë„ ì‚´í´ë³´ì•˜ì§€ë§Œ, ìš°ë¦¬ëŠ” Transactionì˜ ê²€ì¦ì„ ìˆ˜í–‰í•  ë•Œ ë°˜ë“œì‹œ í•´ë‹¹ Transactionì˜ ì‚¬ìš©ì—¬ë¶€ë¥¼ í™•ì¸í•  í•„ìš”ê°€ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ Transaction ì¤‘ì—ì„œ ì‚¬ìš©ë˜ì§€ ì•Šì€ Transaction Outputì„ Blockchainì—ì„œë¶€í„° ì¶”ì¶œí•˜ì—¬ ë³„ë„ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ì „ì²´ Blockchainì„ ì¡°íšŒí•˜ëŠ” ê²ƒë³´ë‹¤ ë¹ ë¥´ê²Œ ì‚¬ìš©í•˜ì§€ ì•Šì€ Transaction outputì„ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-data-type](/images/blockchain-data-type.jpeg)\n\n#### 1-4. Blockchain Node Types\n\nP2P networkì—ì„œëŠ” ì—¬ëŸ¬ ê°œì˜ nodeê°€ ì¡´ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë–¤ Nodeì—ì„œëŠ” Block ìì²´ë¥¼ ìƒì„±í•´ë‚´ëŠ” ì—­í• ì„ í•  ìˆ˜ë„ ìˆê³ , ì–´ë–¤ Nodeì—ì„œëŠ” ìµœì†Œí•œì˜ Transaction ë§Œì„ ê°€ì§€ëŠ” ê²½ìš°ë„ ì¡´ì¬í•©ë‹ˆë‹¤. ì´ì— ëŒ€í•´ì„œ, ì•Œì•„ë³´ë„ë¡ í•©ì‹œë‹¤.\n\n1. Full Node\n2. Miner Node\n3. Light Node\n\n#### 1-5. Block ë‚´ì˜ Transactionì˜ ì¡´ì¬ ì—¬ë¶€\n\nBlock ë‚´ì˜ Transactionì˜ ì—¬ë¶€ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œëŠ” ê°„ë‹¨íˆ Blockì—ì„œ Transactionì„ ì°¾ì•„ì„œ ì¡°íšŒí•˜ëŠ” ê²ƒì´ ê°€ì¥ ê°„í¸í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ, ëª¨ë“  Blockchainì„ ë‹´ì„ ìˆ˜ê°€ ì—†ëŠ” ê²½ìš°ì…ë‹ˆë‹¤. 2022ë…„ í˜„ì¬ë¥¼ ê¸°ì ìœ¼ë¡œ Blockchainì˜ ë°ì´í„° ì‚¬ì´ì¦ˆëŠ” 400GBë¥¼ ë„˜ì–´ì„°ìŠµë‹ˆë‹¤. ì´ë¥¼ Smartphoneê³¼ ê°™ì€ ì¥ì¹˜ì—ì„œ ëª¨ë‘ ë³´ê´€í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ì¢€ ë” ê°„ì†Œí™”í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ëŠ” ê³¼ì •ì—ì„œ ë§Œë“¤ì–´ì§„ ê²ƒì´ Headerì˜ Merkle Rootì…ë‹ˆë‹¤. ì´ê²ƒì˜ ì›ë¦¬ë¥¼ ì•Œê¸° ìœ„í•´ì„œ Merkle Treeì—ì„œë¶€í„° ì•Œì•„ë³´ì•„ì•¼ í•©ë‹ˆë‹¤.\n\n### 2. Merkle Tree\n\n#### 2-1.Â  ë°°ê²½\n\nBlockchainì˜ ë­ë“  Blockì„ ê°–ê³  ìˆëŠ” ê²ƒì€ ì–´ë–¤ Nodeì—ê²ŒëŠ” êµ‰ì¥íˆ í° ë¶€ë‹´ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ì´ë¥¼ ë³´ê´€í•¨ìœ¼ë¡œì¨ í•˜ê³ ì í–ˆë˜ í–‰ë™ìœ¼ë¡œ ê´€ì‹¬ì„ ëŒë¦° ê²ƒì…ë‹ˆë‹¤. ì›ë˜ ëª©ì ì¸ Block ë‚´ì˜ Transactionì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ ëª©í‘œì˜€ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ëª¨ë‘ ìœ ì§€í•  í•„ìš”ëŠ” ì—†ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ, ì´ì— ëŒ€í•œ ìš”ì•½ë³¸ì„ ê°€ì§€ëŠ” ê²ƒì´ ë°”ë¡œ Merkle Treeì…ë‹ˆë‹¤.\n\n#### 2-2.Â  ì •ì˜\n\nMerkleTreeëŠ” Proof of Inclusion(í¬í•¨ ì—¬ë¶€ë¥¼ ì¦ëª…)í•˜ê¸° ìœ„í•´ ê³ ì•ˆëœ data structure(ìë£Œêµ¬ì¡°)ì…ë‹ˆë‹¤. ì´ë¦„ì—ì„œë¶€í„° ëŠë‚„ ìˆ˜ ìˆê² ì§€ë§Œ, êµ¬ì¡°ëŠ” Tree í˜•íƒœë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ëŠ” ë‘ ê°œì˜ í•µì‹¬ ê°œë…ì— ì˜í•´ì„œ êµ¬í˜„ë©ë‹ˆë‹¤.\n\n1. Ordered List\n2. Hash Function\n\nêµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•ì€ ë§¤ìš° ê°„ë‹¨í•©ë‹ˆë‹¤.\n\n1. Ordered Listë¥¼ leaf ë…¸ë“œ ê°¯ìˆ˜ë¡œ ê°–ëŠ” complete binary tree(leaf nodeë¥¼ ì œì™¸í•˜ê³ ëŠ” ëª¨ë“  nodeê°€ ì±„ì›Œì ¸ ìˆìœ¼ë©°, ì™¼ìª½ì—ì„œë¶€í„° ë°ì´í„°ê°€ ì±„ì›Œì§€ëŠ” í˜•íƒœì…ë‹ˆë‹¤.)ë¥¼ ë§Œë“œëŠ” ê²ƒì´ ëª©í‘œì´ë¯€ë¡œ, ëª¨ë“  Ordered Listë¥¼ í¬í•¨í•  ìˆ˜ ìˆëŠ” leaf nodeë¥¼ ê°€ì§€ëŠ” complete binary treeë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\n2. ì´ì œ leafë…¸ë“œì— ê° ordered listì˜ elementë“¤ì„ hash functionì„ ì ìš©í•˜ì—¬, ì±„ì›Œë„£ìŠµë‹ˆë‹¤.\n3. ì´ì œ ê° leaf ë…¸ë“œì—ì„œë¶€í„° ì°¨ê·¼ì°¨ê·¼ ìœ„ë¡œ ì˜¬ë¼ê°€ë©´ì„œ, tree êµ¬ì¡°ì˜ ëª¨ë“  nodeì˜ ê°’ì„ ì±„ìš¸ ê²ƒì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ parentì˜ ê°’ì€ left nodeì˜ hash ê°’ê³¼ right nodeì˜ hashê°’ì„ ì´ì–´ ë¶™ì—¬ì„œ(ë”í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ì–´ì„œ ë¶™ì…ë‹ˆë‹¤.) ë‹¤ì‹œ í•œë²ˆ hash functionì„ ì ìš©í•˜ëŠ” ì‹ìœ¼ë¡œ êµ¬í•©ë‹ˆë‹¤.\n4. ì—¬ê¸°ì„œ, ë§Œì•½ ì™¼ìª½ nodeëŠ” ìˆì§€ë§Œ, ì˜¤ë¥¸ìª½ nodeê°€ ì—†ëŠ” ê²½ìš°, ì™¼ìª½ nodeë¥¼ ë³µì‚¬í•˜ì—¬ ì˜¤ë¥¸ìª½ nodeì— ë¶™ì—¬ ë„£ìŠµë‹ˆë‹¤.\n5. ì´ ê³¼ì •ì„ ë°˜ë³µí•˜ë©´ì„œ, root ë…¸ë“œì— ìˆëŠ” ê°’ê¹Œì§€ êµ¬í•´ëƒ…ë‹ˆë‹¤.\n\nì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ê²ƒì´ merkle treeì…ë‹ˆë‹¤. ì´ êµ¬ì¡°ê°€ ì™œ í¬í•¨ ì¦ëª…ì„ í•˜ê¸°ì— ì í•©í•œì§€ë¥¼ ì•Œì•„ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤.\n\n![blockchain-merkle-tree-1](/images/blockchain-merkle-tree-1.jpeg)\n\n#### 2-3. **ë™ì‘ì›ë¦¬**\n\n$H\\_6$ ë¼ëŠ” Transactionì´ Merkle Treeì˜ í¬í•¨ë˜ì–´ìˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë°©ì‹ìœ¼ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Light Nodeê°€ Blockchainì—ì„œ Transactionì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³ ì í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¨¼ì €, ê·¼ì²˜ì˜ Full Nodeì—ê²Œ Flag Bitì™€ Hash ê°’ì„ ìš”ì²­í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ì´ë¥¼ ì´ìš©í•´ì„œ, ì •ë§ $H\\_6$ê°€ í¬í•¨ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Flag Bitì™€ ë³´ë‚¼ Hash ë°ì´í„°ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì„ ì •ë©ë‹ˆë‹¤.\n\n1. ë¨¼ì € Merkle Treeë¥¼ ìœ„í•´ì„œ ì„¤ëª…í•œ ëŒ€ë¡œ ì œì‘í•˜ê³  ì´ë¥¼ ë³´ê´€í•©ë‹ˆë‹¤.\n2. ê·¸ë¦¬ê³  í•´ë‹¹ Transaction Hash ê°’ì— í•´ë‹¹í•˜ëŠ” Blockì—ì„œ í•´ë‹¹ Transaction Hashë¥¼ ì°¾ìŠµë‹ˆë‹¤. ì•„ë˜ì—ì„œëŠ” ë…¸ë€ìƒ‰ì…ë‹ˆë‹¤.\n3. ê·¸ë ‡ë‹¤ë©´, ë§Œì•½ ìš°ë¦¬ê°€ íŒŒë€ìƒ‰ìœ¼ë¡œ í‘œì‹œëœ ë°ì´í„°ë§Œ ìˆë‹¤ë©´, ë³´ë¼ìƒ‰ ê°’ì„ ìœ ì¶”í•  ìˆ˜ ìˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n4. ë˜í•œ, ìš°ë¦¬ëŠ” Merkle Root ê°’ì„ ê°–ê³  ìˆê¸° ë•Œë¬¸ì—, ì´ë¥¼ í†µí•´ ìœ ì¶”í•´ë‚¸ Merkle Rootê°’ê³¼ Merkle Rootì´ ê°™ë‹¤ë©´, í•´ë‹¹ Transactionì´ í•´ë‹¹ Blockì— ìˆë‹¤ëŠ” ê²ƒì€ ì¦ëª…ë˜ì—ˆë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-merkle-tree-2](/images/blockchain-merkle-tree-2.jpeg)\n\në”°ë¼ì„œ, ìš°ë¦¬ê°€ ê°€ì§€ê³  ìˆì–´ì•¼ í•  ë°ì´í„°ëŠ” ìš°ë¦¬ê°€ ë³´ë‚¸ íŒŒë€ìƒ‰ hashì˜ ê°’ê³¼ ìœ„ì¹˜ë¥¼ ìœ ì¶”í•  ìˆ˜ ìˆëŠ” ê°’ë§Œ ìˆìœ¼ë©´ ë©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ì´ ê³¼ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.\n\n![blockchain-merkle-tree-3](/images/blockchain-merkle-tree-3.jpeg)\n\nì´ì œ Flag Bitsì™€ Hashesë§Œì„ ê°–ê³  ìˆìœ¼ë©´, ì´ì œ ìš°ë¦¬ëŠ” ì´ë¥¼ ì—­ì—° ì‚°í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n### 3. BloomFilter\n\n#### 3-1. ë°°ê²½\n\nBlockchainì˜ ê¸°ë°˜ì€ ë¿Œë¦¬ ê¹Šì€ ë¶ˆì‹ ì—ì„œë¶€í„° ì‹œì‘ë©ë‹ˆë‹¤. ì—¬ê¸°ì„œ, ì´ì „ì—, ë‚´ê°€ ê°€ì§€ê³  ìˆëŠ” Transactionì— ëŒ€í•´ì„œ ì¡°íšŒí•˜ëŠ” ê²ƒì€ ìì‹ ì˜ ìì‚°ì„ ë…¸ì¶œí•˜ëŠ” ê²ƒì´ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìì‹ ì˜ ìì‹ ì„ ê°ì¶”ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ Bloom Filterì…ë‹ˆë‹¤. Bloom FilterëŠ” ì™„ë²½í•˜ê²Œ ê°ì¶”ëŠ” ê²ƒì€ ì•„ë‹ˆì§€ë§Œ, ë‹¤ë¥¸ ë°ì´í„°ì™€ ì¤‘ì²©ë˜ë„ë¡ í•˜ì—¬ ì‰½ê²Œ ì¶”ì¸¡í•  ìˆ˜ ì—†ë„ë¡ í•˜ëŠ” ë° ìˆìŠµë‹ˆë‹¤.\n\n#### 3-2. ì •ì˜\n\nBloom Filterë€ ë°ì´í„°ë¥¼ hash í•˜ê³ , ì´ë¥¼ Bit fieldë¼ëŠ” ì˜ì—­ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë‹´ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‚˜ëˆ„ì–´ ë‹´ì€ ë°ì´í„°ëŠ” 1ê°œì˜ Bucketì´ë¼ëŠ” ì˜ì—­ì— ë‹´ê¸°ê²Œ ë©ë‹ˆë‹¤. ì´ë•Œ Bucketì€ í•˜ë‚˜ì˜ Bitê°€ ë  ìˆ˜ë„ ìˆê³ , ì—¬ëŸ¬ ê°œì˜ Bitsê°€ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë˜í•œ, ë™ì¼í•œ Bucketì— ë‹´ê¸°ëŠ” ë°ì´í„°ì˜ ì–‘ì€ í‰ê· ì ìœ¼ë¡œ \"$ \\text{# of data} \\div \\text{# of bucket} $\"ê°€ ë©ë‹ˆë‹¤.\n\nì—¬ëŸ¬ ê°œì˜ Bitsë¥¼ í•˜ë‚˜ì˜ Bucketìœ¼ë¡œ ì“°ëŠ” ê²½ìš°ì—ëŠ”, ë‹¤ìŒê³¼ ê°™ì´ ë§ì€ ì–‘ì˜ Bucketì´ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![blockchain-bloom-filter-1](/images/blockchain-bloom-filter-1.jpeg)\n\n![blockchain-bloom-filter-2](/images/blockchain-bloom-filter-2.jpeg)\n\n#### 3-3. ë™ì‘ì›ë¦¬\n\në¨¼ì €, ë°ì´í„°ë¥¼ hash í•˜ì—¬ ì„ì˜ì˜ ê°’ì„ ìƒì„±í•´ëƒ…ë‹ˆë‹¤. ê·¸ë¦¬ê³  í•´ë‹¹ ê°’ì„ Bit Fieldì˜ í¬ê¸°ë¡œ modulo ì—°ì‚°(%)ì„ ìˆ˜í–‰í•´ì£¼ì–´ ë‚˜ì˜¨ ê²°ê³¼ë¥¼ ë„£ì–´ì£¼ë©´ ë©ë‹ˆë‹¤. ë§Œì•½, Bucketì˜ í¬ê¸°ë¥¼ 1 ì´ìƒìœ¼ë¡œ í•˜ê³  ì‹¶ë‹¤ë©´, ë‹¤ë¥¸ hash í•¨ìˆ˜ë¥¼ ìˆ˜í–‰í•˜ê±°ë‚˜ ë‹¤ì‹œ í•œë²ˆ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ì—¬ ë§Œë“¤ë„ë¡ í•©ë‹ˆë‹¤.\n\n### 4. SegWit\n\n#### 4-1. ë°°ê²½\n\në¨¼ì € ê±°ë˜ì˜ ì–‘ì´ ê¸‰ê²©íˆ ì¦ê°€í•˜ë©´, Blockì— ë‹´ì„ ìˆ˜ ìˆëŠ” Transactionì˜ ì–‘ì„ ëŠ˜ë¦¬ëŠ” ê²ƒì— ëŒ€í•œ í† ì˜ê°€ ë¹ˆë²ˆí–ˆìŠµë‹ˆë‹¤. ì´ ìƒí™©ì—ì„œ ì–´ë–»ê²Œ í•˜ë©´ ë” íš¨ìœ¨ì ì¸ Transactionì˜ ì €ì¥ì„ í• ì§€ì— ëŒ€í•œ ê³ ë¯¼ì´ ê¹Šì–´ì¡ŒìŠµë‹ˆë‹¤. ë˜í•œ, Transactionì˜ ScriptSig PartëŠ” ScriptPubKeyì™€ ê²°í•©í•˜ì—¬ ì•ˆì •ì ì¸ ê²°ê³¼ë§Œ ë‚´ë†“ì„ ìˆ˜ ìˆìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì—, Transactionì˜ ScriptSigëŠ” í•˜ë‚˜ì˜ ê³ ì •ëœ ë°ì´í„°ê°€ ì•„ë‹Œ ì—¬ëŸ¬ ë‹¤ë¥¸ í˜•íƒœë¥¼ ê°€ì§ˆ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ë˜í•œ, ì´ë¥¼ ë°”ê¾¸ê²Œ ë˜ë©´, Transactionì˜ ê°’ì„ Hash í•˜ì—¬ ì–»ëŠ” Transactionì˜ IDê°€ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì—, ë‹¤ë¥¸ Transactionìœ¼ë¡œ ì—¬ê¸°ê³  Bugê°€ ë°œìƒí•˜ê¸°ë„ í•˜ì˜€ìŠµë‹ˆë‹¤.\n\n#### 4-2. ì •ì˜\n\nSegrete Witnessì˜ ì¤„ì„ë§ë¡œ, Blockì—ì„œ ë¶€í„° ì„œëª… ë¶€ë¶„ì„ ë¶„ë¦¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, ë‘ ê°€ì§€ ì¥ì ì„ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ, í•˜ë‚˜ì˜ Blockì— ë” ë§ì€ Transactionì„ í¬í•¨í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ì„œëª… ë¶€ë¶„ì˜ ì½”ë“œê°€ ì¡°ê¸ˆì”©ë§Œ ë°”ë€Œì–´ë„ Transaction IDê°€ ë°”ë€Œì–´ í˜¼ë€ì´ ë°œìƒí•˜ëŠ” Transaction Malleability ìœ„í˜‘ì„ ì°¨ë‹¨í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n#### 4-3. ë™ì‘ì›ë¦¬*\n\në°”ë¡œ ê¸°ì¡´ ScriptSig ë¶€ë¶„ì„ ë¹„ì›Œë‘ëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ë³€í™”í•˜ì§€ ì•ŠëŠ” í˜•íƒœë¡œ ë‘ê³ , ì´ì „ì— ë³´ì•˜ë˜ p2pshì˜ redeemScriptì²˜ëŸ¼ í›„ì— ë³€í™˜í•  ìˆ˜ ìˆëŠ” ScriptSigë¥¼ ë³„ë„ë¡œ ì €ì¥í•˜ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì›ë¦¬ëŠ” Simple í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ê¸°ì–µí•´ì•¼ ë  ê²ƒì€ SegWitê°€ Soft-forkë¥¼ í†µí•´ì„œ êµ¬í˜„ë  ìˆ˜ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. ì¦‰, ì´ì „ì— SegWitë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Nodeë“¤ê³¼ë„ í˜¸í™˜ì´ ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤. Soft-forkë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ì„œ, êµ¬ì¡°ëŠ” ë” ë³µì¡í•´ì§€ê³ , ì´í•´í•  ìˆ˜ ì—†ëŠ” í˜•íƒœê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒì´ Bitcoin ì‹œìŠ¤í…œì—ì„œ í˜¸í™˜ì„±ì´ í° ë¬¸ì œê°€ ë  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ë³´ì—¬ì£¼ëŠ” ì•„ì£¼ ëŒ€í‘œì ì¸ ì˜ˆì‹œì´ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì•Œì•„ë‘ë©´ ì¢‹ìŠµë‹ˆë‹¤.\n\nì´ì „ ê¸€ê³¼ ë™ì¼í•˜ê²Œ êµ¬í˜„ ì‚¬í•­ì€ githubì— ì •ì˜í•´ë‘ì—ˆìŠµë‹ˆë‹¤.\n\n[ğŸ”— GitHub - euidong/bitcoin](https://github.com/euidong/bitcoin)\n\n## Reference\n\n- [ğŸ”— Programming Bitcoin](https://learning.oreilly.com/library/view/programming-bitcoin/9781492031482/)\n- Tumbnail : Photo by [Icons8 Team](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@icons8?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"bitcoin-4","date":"2022-03-25 17:59","title":"[Bitcoin] 4. Blockchain","category":"Tech","tags":["BlockChain","Bitcoin"],"desc":"í•´ë‹¹ Postingì€ Bitcoinì´ ë¬´ì—‡ì´ê³ , ì´ê²ƒìœ¼ë¡œ ë¬´ì—‡ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•´ì„œ ì„¤ëª…í•˜ì§€ ì•Šê³  Bitcoinì„ êµ¬í˜„í•˜ëŠ” ê¸°ìˆ ì— ëŒ€í•˜ì—¬ ë‹¤ë£¹ë‹ˆë‹¤.Â ë˜í•œ, ì±…ì˜ ëª¨ë“  ë‚´ìš©ì„ ì¶©ì‹¤íˆ ë²ˆì—­í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‘ì„±ìì˜ ìƒê°ì´ ë§ì´ ë‹´ê²¨ ìˆìœ¼ë‹ˆ ìœ ì˜ ë°”ëë‹ˆë‹¤.í•´ë‹¹ chapterì—ì„œëŠ” Blockchain Network êµ¬ì¡°ì— ëŒ€í•œ ì´í•´ì™€ ì‹¤ìš©ì„±ì„ í–¥ìƒí•˜ê¸° ìœ„í•œ MerkleTree, Bloom Filter, SigWitì— ëŒ€í•´ì„œ ì •ë¦¬í•©ë‹ˆë‹¤.ì´ì „ Chapterì—ì„œëŠ” Transactionì˜ ì†Œìœ  ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ìì„¸íˆ ë‹¤ë£¨ì—ˆìŠµë‹ˆë‹¤. ê±°ê¸°ì„œ Transactionì˜ ì‚¬ìš© ì—¬ë¶€ë¥¼ í™•ì¸í•  ë•Œì—ëŠ” UTXO(Unspent Transaction Output) setì´ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•œë‹¤ê³  í•˜ì˜€ìŠµë‹ˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŠ” ì–´ë–»ê²Œ ìƒì„±ë˜ê³ , ì–´ë–»ê²Œ ê´€ë¦¬ë˜ëŠ”ì§€ë¥¼ í•´ë‹¹ partì—ì„œ í•œ ë²ˆ ë‹¤ë£¨ì–´ë³´ê² ìŠµë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/bitcoin.jpg"},{"content":"\n## Intro\n\nì ì  ë‹¤ì–‘í•œ ì–¸ì–´ë“¤ì´ ìƒê²¨ë‚˜ê³ , ê°ì²´ ì§€í–¥ì— ëŒ€í•œ ê´€ì‹¬ì´ ì‹œë“¤í•´ì§€ê³  ìˆëŠ” í™˜ê²½ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì—¬ëŸ¬ ì‹œìŠ¤í…œì—ì„œë„ ê±°ì˜ ê³ ìœ  ëª…ì‚¬ë¡œ ì“°ì´ê³  ìˆê¸°ì— ê°ì²´ ì§€í–¥ì˜ ëŒ€í‘œì ì¸ ë””ìì¸ íŒ¨í„´ì„ ìµí˜€ë‘ëŠ” ê²ƒì€ í•„ìˆ˜ì ì´ë¼ê³  ìƒê°í•´ì„œ ì œê°€ ë´¤ì„ ë•Œ ê°€ì¥ ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©ë˜ëŠ” ìš©ì–´ì— ëŒ€í•´ì„œ ì •ë¦¬ë¥¼ ì¢€ í•´ë³´ê³ ì í•©ë‹ˆë‹¤.\n\ní•´ë‹¹ ê¸€ì—ì„œëŠ” ì¼ë‹¨ introductionì— ëŒ€í•œ ë‚´ìš©ì„ ì •ë¦¬í•©ë‹ˆë‹¤.\n\n## Design Pattern\n\nsoftwareì ìœ¼ë¡œ íŠ¹ì • ìƒí™©ì—ì„œ ì¼ë°˜ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë°˜ë³µë˜ì–´ ì‚¬ìš©ë˜ëŠ” patternì„ ë§í•©ë‹ˆë‹¤. ì´ëŠ” íŠ¹ì • ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ algorithmì´ ì•„ë‹Œ ì´ëŸ° êµ¬ì¡°ê°€ ë” ê²½í—˜ìƒ ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ì´ë£° ìˆ˜ ìˆë‹¤ëŠ” templateë¥¼ ì œê³µí•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\nì´ëŸ¬í•œ patternë“¤ì€ 4ê°œì˜ ìš”ì†Œë¥¼ ê°€ì§‘ë‹ˆë‹¤.\n\n1. **Pattern name** : patternì˜ ì‹¤ì œ ì´ë¦„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n2. **Problem** : ì–¸ì œ í•´ë‹¹ patternì„ ì ìš©í•˜ëŠ”ì§€ë¥¼ í‘œê¸°í•©ë‹ˆë‹¤. í•˜ë‚˜ì˜ patternìœ¼ë¡œ ì—¬ëŸ¬ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤ë©´, ë‹¹ì—°íˆ list í˜•íƒœë¡œë„ í‘œê¸°í•©ë‹ˆë‹¤.\n3. **Solution** : designì„ ì´ë£¨ëŠ” ìš”ì†Œë“¤ê³¼ ê´€ê³„, ì—­í• (ì±…ì„)ì„ ëª…ì‹œí•œë‹¤. í•˜ë‚˜ì˜ ë¬¸ì œì— ì •í™•í•˜ê²Œ ëŒ€ì¹˜ë˜ëŠ” í•´ê²°ì±…ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ êµ¬ì¡°ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆëŠ” templateë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n4. **Consequences** : í•´ë‹¹ patternì„ ì ìš©í•˜ê²Œ ë˜ì—ˆì„ ë•Œ ì–»ê²Œ ë˜ëŠ” ê²°ê³¼ë¡œ, ëŒ€ê²Œ ìœ ì—°í•˜ê²Œ í™•ì¥ì´ë‚˜ ì¬ì‚¬ìš©ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ê´€ì ì—ì„œ ì¥ì ê³¼ ë‹¨ì ì„ í‘œê¸°í•©ë‹ˆë‹¤.\n\nì´ ì±…ì—ì„œ ë§í•˜ëŠ” design patternë“¤ì´ ì¶”ê°€í•˜ëŠ” ê°€ì¥ í° ëª©í‘œëŠ”\n\nObject Oriented Programmingì„ 100% í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n<mark>**ì´ëŠ” Maintainable í•˜ê¸° ìœ„í•´ì„œ, ê°€ë…ì„±ì´ ë†’ê³  ìœ ì—°í•˜ë©°, ì¬ì‚¬ìš©ì´ ì¢‹ì€ systemì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ì°¾ëŠ” ê²ƒì´ë¼ëŠ” ë§ê³¼ ê°™ìŠµë‹ˆë‹¤.**</mark>\n\nì´ë¥¼ í•­ìƒ ë¨¸ë¦¿ì†ì— ë‘ê³ , ì´ì–´ ë‚˜ê°‘ì‹œë‹¤.\n\n### Example) MVC\n\ndesign patternì— ëŒ€í•˜ì—¬ ì´í•´ë¥¼ ë•ê¸° ìœ„í•œ ì˜ˆì‹œì…ë‹ˆë‹¤. ë§Œì•½, MVC ìì²´ê°€ ìƒì†Œí•˜ë‹¤ë©´, ë„˜ì–´ê°€ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\nê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ UI ì‘ì—…ì„ í•˜ê²Œ ë  ë•Œ ë§ì´ ì‚¬ìš©ë˜ëŠ” design patternì…ë‹ˆë‹¤. ì´ë¥¼ êµ¬ì„±í•˜ëŠ” Model / View / Controllerì˜ ì• ê¸€ìë¥¼ í•˜ë‚˜ì”© ê°€ì ¸ì™€ì„œ ì´ë¥¼ ì§€ì€ ê²ƒì…ë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ, Modelì€ applicationì˜ dataë¥¼ í‘œí˜„í•˜ëŠ” ê°ì²´ì…ë‹ˆë‹¤.  \nViewëŠ” modelì„ userë“¤ì—ê²Œ ë³´ì—¬ì£¼ëŠ” ë°©ë²•ì„ ì •ì˜í•œ ê°ì²´ì…ë‹ˆë‹¤.  \nControllerëŠ” user inputì— ëŒ€í•˜ì—¬ model ë˜ëŠ” viewë¥¼ ì–´ë–»ê²Œ ë³€ê²½í• ì§€ë¥¼ ì •ì˜í•œ ê°ì²´ì…ë‹ˆë‹¤.\n\nì—¬ê¸°ì„œ, í”íˆ ì‚¬ìš©ë˜ëŠ” design pattern 3ê°€ì§€ë¥¼ ë°œê²¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n> **1. Observer pattern**\n\nì´ëŠ” modelê³¼ viewë¥¼ ë¶„ë¦¬í•˜ê³ , subscribe/notify í˜•íƒœë¥¼ ê°–ê²Œ í•œ êµ¬ì¡°ì…ë‹ˆë‹¤.(viewëŠ” modelì˜ ë³€ê²½ì´ë¼ëŠ” eventë¥¼ êµ¬ë…í•˜ê³  ìˆê³ , modelì€ ìì‹ ì´ ë³€ê²½ë˜ë©´, viewì—ê²Œ ì´ë¥¼ ì•Œë ¤ì„œ, viewê°€ ë³€ê²½ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤.)\n\nì´ë ‡ê²Œ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ì–»ëŠ” íš¨ê³¼ëŠ” ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ modelì— ëŒ€í•´ì„œ ì—¬ëŸ¬ ê°œì˜ viewë¥¼ ê°€ì§ˆ ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ë˜í•œ, ìƒˆë¡œìš´ viewë¥¼ ì¶”ê°€í•  ë•Œì—ë„ modelì„ ë³€ê²½í•˜ì§€ ì•Šì•„ë„ ë¨ìœ¼ë¡œ ì‰½ê²Œ í™•ì¥ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n> **2. Composite pattern**\n\nViewëŠ” ì¤‘ì²©í•´ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, Viewì•ˆì— Viewë¥¼ ì¤‘ì²©í•´ì„œ ìŒ“ìŒìœ¼ë¡œì¨ ì¬ì‚¬ìš©ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.\n\n> **3. Strategy pattern**\n\nViewëŠ” user inputì„ ë°›ëŠ” ì¥ì¹˜(button) ë“±ì„ í¬í•¨í•˜ê³  ìˆê³ , Controller instanceë¥¼ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì—, í•´ë‹¹ instanceë¥¼ êµì²´í•¨ìœ¼ë¡œì¨ ì‰½ê²Œ ë™ì‘ì„ ë³€ê²½í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n\n### Type\n\ní•´ë‹¹ ì±…ì—ì„œëŠ” ì´ 23ê°€ì§€ì˜ design patternì„ ì œì‹œí•©ë‹ˆë‹¤. ê·¸ë“¤ì„ ë¶„ë¥˜í•˜ëŠ” ì²´ê³„ë¥¼ ì–´ëŠ ì •ë„ ë‚˜ëˆˆë‹¤ë©´ ì‰½ê²Œ ì´í•´ê°€ ê°€ëŠ¥í•  ê²ë‹ˆë‹¤.\n\n> **1. Purpose**\n\nì‹¤ì œë¡œ í•´ë‹¹ patternì´ í•˜ê³ ì í•˜ëŠ” ë°”ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. ì´ 3 ê°€ì§€ì˜ ëª©ì ìœ¼ë¡œ design patternì„ ë‚˜ëˆˆ ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n1. **Creational** :Â objectì˜ ìƒì„± ì‹œì— íŠ¹ì • ë¶€ë¶„ì„ ìì‹ class ë˜ëŠ” ë‹¤ë¥¸ objectë¡œ ì˜®ê¸°ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\n2. **Structural**Â : class ë˜ëŠ” objectë¥¼ êµ¬ì¡°í™”í•˜ëŠ” ë°©ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.\n3. **Behavioral**Â : class ë˜ëŠ” objectê°€ íŠ¹ì • í–‰ë™ì„ êµ¬í˜„í•˜ê¸° ìœ„í•œ ê° ìš”ì†Œì˜ ê´€ê³„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.\n\n> **2. Scope**Â : êµ¬í˜„ì´ ê¸°ë³¸ì ìœ¼ë¡œ class ë‹¨ìœ„ì¸ì§€, object ë‹¨ìœ„ ì¸ì§€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.\n\n1. **Class**Â : classë“¤ê³¼ subclassë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ë‹¤ë£¨ê¸° ë•Œë¬¸ì—, ìƒì†ì— ì˜í•´ì„œ ì •ì˜ë˜ë©°, compile timeì— ê³ ì •ë˜ì–´ì„œ ë°”ë€Œì§€ ì•ŠìŠµë‹ˆë‹¤.\n2. **Object** :Â objectë“¤ ê°„ì˜ ê´€ê³„ë¥¼ ì˜ë¯¸í•˜ë©°, run timeì— ìœ ë™ì ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n![design-pattern-category](/images/design-pattern-category.jpeg)\n\n### Basic Skill\n\ndesign patternì´ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì¼ë°˜ì ì¸ ê¸°ìˆ ë“¤ì„ ë¨¼ì € ì´í•´í•˜ë©´, ì´ë¥¼ ì¡°í•©í•´ì„œ ìš°ë¦¬ëŠ” design patternì„ êµ¬ì„±í•  ê²ƒì´ë¯€ë¡œ, ì´ ì¼ë°˜ì ì¸ ê¸°ìˆ ë¶€í„° ì•Œì•„ë³´ê³  ê°€ë„ë¡ í•©ì‹œë‹¤.\n\n#### <mark>Object Oriented Programming</mark>\n\nì´ ì±…ì˜ ê°€ì¥ ê¸°ë³¸ì´ ë˜ëŠ” ê°ì²´ ì§€í–¥ì— ëŒ€í•œÂ  ë‚´ìš©ì…ë‹ˆë‹¤. ì´ë¥¼ ì½ê³  ì•„ë˜ë¥¼ ì½ìœ¼ì‹œëŠ” ê²ƒì´ ì´í•´ê°€ ë” ì‰¬ìš¸ ê²ƒì…ë‹ˆë‹¤. ì´ë¯¸ ì•Œê³  ìˆë‹¤ë©´, ë°”ë¡œ ë‹¤ìŒë¶€í„° ì½ìœ¼ì‹œë©´ ë  ê±° ê°™ìŠµë‹ˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ object oriented programì—ì„œ <mark>object</mark>ë€ dataì™€ í•´ë‹¹ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ëŠ” ì—¬ëŸ¬ operationë¥¼ ë¬¶ì€ ê²ƒì„ ë§í•©ë‹ˆë‹¤. ì´ë•Œ, ìš°ë¦¬ëŠ” í•´ë‹¹ object ì•ˆì˜ dataë¥¼ ì§ì ‘ì ìœ¼ë¡œëŠ” ì ‘ê·¼í•  ìˆ˜ ì—†ê³ , objectì—ê²Œ operationì˜ ë™ì‘ì„ ìš”ì²­í•¨ìœ¼ë¡œì¨ outputìœ¼ë¡œì¨ dataë¥¼ ì–»ê±°ë‚˜ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ìš°ë¦¬ëŠ” encapsulated ë˜ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤.\n\nobjectì— ì˜í•´ì„œ ì„ ì–¸ëœ ëª¨ë“  operationì€ ì´ë¦„ê³¼ input parameter, output valueë¥¼ ëª…ì‹œí•œ signatureë¥¼ ê°€ì§‘ë‹ˆë‹¤. ì´ëŸ¬í•œ signatureë¥¼ ëª¨ì•„ë†“ì€ ê²ƒì„ í•´ë‹¹ objectì˜ <mark>interface</mark>ë¼ê³  í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, interfaceì— ìˆëŠ” ë‚´ìš©ì„ ë§Œì¡±í•˜ëŠ” requestë§Œì´ objectë¡œ ë³´ë‚´ì§„ ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ interfaceëŠ” ì ˆëŒ€ë¡œ êµ¬í˜„ì„ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¨ì§€ í•´ë‹¹ operationì— ëŒ€í•œ ì´ë¦„ê³¼ input, outputì„ ì•Œë ¤ì¤„ ë¿ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ê°™ì€ ì´ë¦„ì´ë©°, ë“¤ì–´ê°€ëŠ” ë°ì´í„°, ë‚˜ì˜¤ëŠ” ë°ì´í„°ëŠ” ê°™ì§€ë§Œ ì „í˜€ ë‹¤ë¥¸ êµ¬í˜„ì„ ê°€ì§€ë„ë¡ ë§Œë“¤ ìˆ˜ë„ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ì´ì²˜ëŸ¼ run timeì— interfaceë¥¼ implementation í•œ object ì¤‘ì—ì„œ ë¬´ì—‡ì„ ì‹¤í–‰ì‹œí‚¬ì§€ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì„ dynamic bindingì´ë¼ê³  í•©ë‹ˆë‹¤. interfaceê°€ runtimeì— ì •í™•í•˜ê²Œ ì–´ë–»ê²Œ ë™ì‘í• ì§€ ì—¬ëŸ¬ í˜•íƒœë¥¼ ê°€ì§€ëŠ” ê²ƒì„ ìš°ë¦¬ëŠ” polymorphismì´ë¼ê³  í•©ë‹ˆë‹¤.\n\nì´ êµ¬ì¡°ê°€ ê°€ì§€ëŠ” ì¥ì ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n> **1. ëŒ€ì²´ ê°€ëŠ¥í•˜ë‹¤.**\n\n\"ìš°ë¦¬ê°€ ê¸€ì„ ì“°ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ì—°í•„ì´ í•„ìš”í•˜ë‹¤.\"ëŠ” ê·œì¹™ì„ ì •í–ˆë‹¤ë©´,\n\nìš°ë¦¬ëŠ” ìƒ¤í”„ë‚˜ ë‹¤ë¥¸ ë³¼íœì´ ìˆë”ë¼ë„ ì´ ê·œì¹™ì— ì–´ê¸‹ë‚˜ë¯€ë¡œ ìš°ë¦¬ëŠ” ê¸°ì¡´ ê·œì¹™ì„ ë‹¤ì‹œ ë°”ê¾¸ê±°ë‚˜ ì—°í•„ì„ ê°€ì ¸ì™€ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ì• ì´ˆì— ê·œì¹™ì„ \"ìš°ë¦¬ê°€ ê¸€ì„ ì“°ê¸° ìœ„í•´ì„œëŠ” ë°˜ë“œì‹œ ê²€ì€ìƒ‰ì„ í‘œì‹œí•  ìˆ˜ ìˆëŠ” ë„êµ¬ê°€ í•„ìš”í•˜ë‹¤.\"ëŠ” ê·œì¹™ì„ ì •í–ˆë‹¤ë©´, ë” ìœ ì—°í•œ ê·œì¹™ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nìš°ë¦¬ì˜ ì½”ë“œë„ ë§ˆì°¬ê°€ì§€ë¡œ interfaceë¥¼ í†µí•´ì„œ ê²€ì€ìƒ‰ ê¸€ìë¥¼ ì“°ëŠ” í•¨ìˆ˜ë¥¼ ì •ì˜í•œ interfaceë¡œ ì„ ì–¸í•˜ê³  ì´ë¥¼ typeìœ¼ë¡œ ì§€ì •í•´ë‘”ë‹¤ë©´, ì´ë¥¼ ì‹¤í–‰í•˜ëŠ” objectê°€ ì—°í•„, ìƒ¤í”„, ë³¼íœ ë¬´ì—‡ì´ ë˜ì–´ë„ ë˜ê¸° ë•Œë¬¸ì— ëŒ€ì²´ ê°€ëŠ¥í•œ êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n> **2. ìœ ì—°í•˜ë‹¤.**\n\nìœ„ì˜ ì²˜ëŸ¼ ê·œí˜„ í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” ìœ ì—°í•˜ê²Œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª¨ë“  ê´€ê³„ê°€ ëŠìŠ¨í•˜ê²Œ ì—°ê²°ëœë‹¤ê³  SW ì—…ê³„ì—ì„œëŠ” ìì£¼ í‘œí˜„í•©ë‹ˆë‹¤.\n\nê°€ëŠ¥í•œ í•œ ìµœì†Œí•œì˜ ê¸°ëŠ¥ë§Œì„ í†µí•´ì„œë§Œ ëŒ€ìƒì„ ì •ì˜í•œë‹¤ë©´, ë”ìš±ë” ìœ ì—°í•œ êµ¬ì¡°ê°€ ëœë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n> **3. ê°€ë…ì„±ì´ ì¢‹ë‹¤.**\n\nìš°ë¦¬ëŠ” í•´ë‹¹ objectë¥¼ ì‚¬ìš©í•  ë•Œ ì´ê²ƒì´ ì–´ë–»ê²Œ ëŒì•„ê°€ëŠ”ì§€ ëª¨ë¥´ë”ë¼ë„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤. ìŠ¤ë§ˆíŠ¸í°ì„ ê°€ë™ì‹œí‚¤ê¸° ìœ„í•´ì„œ ì´ê²ƒì˜ ë¶€íŒ… ì ˆì°¨ì™€ ì—¬ëŸ¬ algorithmì„ ì´í•´í•˜ëŠ” ê²ƒì€ ìš°ë¦¬ê°€ ë¬¸ìë¥¼ ë³´ë‚´ëŠ” ê³¼ì •ì—ì„œ ë¶ˆí•„ìš”í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ìµœëŒ€í•œ ìµœì†Œí•œì˜ ë‚´ìš©ë§Œì„ ì•Œë©´ ë©ë‹ˆë‹¤. ê°€ë ¹ \"ì˜¤ë¥¸ìª½Â  ì „ì› ë²„íŠ¼ì„ ëˆ„ë¥´ë©´(input) í™”ë©´ì´ ì¼œì§„ë‹¤(output)\"ëŠ” ì´ëŸ¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì´ëŠ” ìš°ë¦¬ê°€ ë” ë³µì¡í•œ ë¬¸ì ë©”ì‹œì§€ ë³´ë‚´ê¸°ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆëŠ” í† ëŒ€ë¥¼ ì œê³µí•©ë‹ˆë‹¤.\n\n> **4. ë¬¸ì„œí™”ê°€ ìš©ì´í•˜ë‹¤.**\n\nì´ì œ ìš°ë¦¬ê°€ ì‹œìŠ¤í…œì„ íŒë§¤í•˜ê±°ë‚˜ ì´ë¥¼ í†µí•´ì„œ ê°™ì´ ì¼í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìƒê¸´ë‹¤ë©´, ì´ì— ëŒ€í•œ ì„¤ëª…ì„œê°€ í•„ìš”í•©ë‹ˆë‹¤. ë§Œì•½, ì—¬ëŸ¬ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ì„ í•´ë‘ì—ˆë‹¤ë©´, í†µì¼ì„± ìˆëŠ” ë¬¸ì„œë¥¼ ê¸°ëŒ€í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, interfaceë¥¼ í†µí•´ì„œ êµ¬í˜„í–ˆë‹¤ë©´, ì´ interfaceê°€ ìš”êµ¬í•˜ëŠ” ë™ì‘ë§Œì„ ì •í™•í•˜ê²Œ ì ì–´ë‘”ë‹¤ë©´, ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆê³  êµ¬ì¡°í™”ëœ ë¬¸ì„œë¥¼ ë§Œë“¤ê¸°ê°€ ìš©ì´í•©ë‹ˆë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, ì‹¤ì œë¡œ programmingì—ì„œ ì´ interfaceì™€ objectë¥¼ êµ¬í˜„í•˜ëŠ”ì§€ë¥¼ ì‚´í´ë³´ì•„ì•¼ í•©ë‹ˆë‹¤.\n\nëŒ€ê²Œì˜ ì–¸ì–´ì—ì„œëŠ” interface, abstract classë¼ëŠ” ê²ƒì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ë“¤ì„ ê° ê° ì´ë“¤ì„ êµ¬í˜„ ë˜ëŠ” ìƒì†í•  ëŒ€ìƒë“¤ì´ ë°˜ë“œì‹œ ê°€ì ¸ì•¼ í•  ìš”ì†Œ(name, input parameter, return value)ì— ëŒ€í•œ ë‚´ìš©ì„ ê¸°ìˆ í•©ë‹ˆë‹¤.\n\nê·¸ëŸ¬ë©´ ìš°ë¦¬ëŠ” classë¥¼ í†µí•´ì„œ ì´ì— ëŒ€í•œ êµ¬í˜„ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ interfaceì— ëŒ€í•˜ì—¬ ì—¬ëŸ¬ ê°œì˜ êµ¬í˜„ì„ ê°€ì§€ê²Œ ë©ë‹ˆë‹¤. (ì´ë¥¼ êµ¬í˜„ì„ defer(ë¯¸ë£¨ì—ˆë‹¤)ê³  í‘œí˜„í•©ë‹ˆë‹¤.) ê·¸ë¦¬ê³ , ì´ì œ ì‹¤ì œë¡œ ë§Œë“¤ì–´ì§€ëŠ” objectë“¤ì„ ìš°ë¦¬ëŠ” classë¥¼ <mark>instantiating</mark>(í‹€ì„ ê¸°ë°˜ìœ¼ë¡œ ë³µì‚¬)í•˜ì—¬ ìƒì„±í•˜ëŠ”ë° ì´ë•Œ ë§Œë“¤ì–´ì§„ ëŒ€ìƒì„ ìš°ë¦¬ëŠ” íŠ¹ë³„íˆ <mark>instance</mark>ë¼ê³  í•©ë‹ˆë‹¤.\n\në˜í•œ, classë¥¼ ì„ ì–¸í•œë‹¤ëŠ” ê²ƒì€ ìš°ë¦¬ì—ê²Œ ë‘ ê°€ì§€ íš¨ê³¼ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. classë¼ëŠ” instantiating í•˜ê¸° ìœ„í•œ í‹€ì„ ë§Œë“¤ ë¿ë§Œ ì•„ë‹ˆë¼ <mark>type</mark>ì„ ìƒì„±í•©ë‹ˆë‹¤. ì¦‰ ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ instanceë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë  ë•Œ ì•ì— ìˆëŠ” ClassëŠ” classì˜ typeì„ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ê³ , ë’¤ì— ìˆëŠ” ê²ƒì€ instanceë¥¼ ë§Œë“¤ê¸° ìœ„í•œ í‹€ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\n```c++\nSimpleClass sc = new SimpleClass();\n```\n\nê·¸ë ‡ìŠµë‹ˆë‹¤. ë§Œì•½ ìš°ë¦¬ê°€ classë¥¼ interfaceì˜ êµ¬í˜„ìœ¼ë¡œ ë§Œë“  ê²ƒì´ ì•„ë‹ˆë¼ë©´, interface typeì„ ë§Œë“¤ë©´ì„œ, class í‹€ê¹Œì§€ ê°™ì´ ë§Œë“  ê²ƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, interfaceì™€ ë‹¤ë¥¸ ì ì´ë¼ë©´, ì´ë¥¼ ìƒì†í•˜ê²Œ ë˜ë©´, ì´ ì•ˆì˜ êµ¬í˜„ë„ ê°™ì´ subclassë¡œ ì „ë‹¬ëœë‹¤ëŠ” ì ì´ ìˆê² ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ë” ìœ ì—°í•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ê³ ì í•œë‹¤ë©´, ë‹¹ì—°íˆ ì¼ë°˜ classë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” typeë¥¼ ì‚¬ìš©í•˜ê¸°ë³´ë‹¤ëŠ” abstract class ë˜ëŠ” interfaceë¥¼ í†µí•´ì„œ ë§Œë“¤ì–´ì§€ëŠ” typeì„ í™œìš©í•˜ëŠ” ê²ƒì´ ë” ìœ ì—°í•˜ê³ , reusable í•œ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ” í•µì‹¬ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ ë‹¤ë£° ë‚´ìš©ì€ classì˜ êµ¬ì„± ë°©ì‹ì…ë‹ˆë‹¤.\n\në§Œì•½, íŠ¹ì • ì‹œìŠ¤í…œì´ ë¬´ì–¸ê°€ë¥¼ êµ¬í˜„í•œë‹¤ê³  í–ˆì„ ë•Œ, \"AëŠ” Bë‹¤\"ë¥¼ í†µí•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¢‹ì„ê¹Œ ì•„ë‹ˆë©´, \"AëŠ” Bë¥¼ ê°–ê³  ìˆë‹¤\"ë¥¼ í†µí•´ì„œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê°€ì…ë‹ˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ìƒì†ì„ í†µí•´ì„œ í‘œí˜„ë˜ëŠ” ê´€ê³„ë¥¼ \"inheritance\" ë˜ëŠ” \"is a\" ê´€ê³„ë¼ê³  í•©ë‹ˆë‹¤. ì¦‰, Aê°€ Bë¼ëŠ” í´ë˜ìŠ¤ë¥¼ ìƒì†í•œë‹¤ë©´, AëŠ” Bì´ë‹¤.ë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™œëƒí•˜ë©´, Bë¥¼ ìƒì†í•˜ëŠ” AëŠ” ë‹¹ì—°íˆ Bì˜ í•˜ìœ„ ê´€ê³„ì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. (ex. ì½”ë¼ë¦¬ëŠ” ë™ë¬¼ì´ë‹¤.) í•˜ì§€ë§Œ, ìƒì†ì´ ì•„ë‹Œ ë³€ìˆ˜ë¡œì„œ ì´ë¥¼ í¬í•¨í•  ë•Œ ìš°ë¦¬ëŠ” ì´ë¥¼ \"composition\" ë˜ëŠ” (\"has\" or \"use\") ê´€ê³„ë¼ê³  í•©ë‹ˆë‹¤. ì¦‰, Aê°€ Bë¥¼ ê°–ê³  ìˆë‹¤ë¡œ ë³´ëŠ” ê²ƒì…ë‹ˆë‹¤. (ex. ì½”ë¼ë¦¬ëŠ” ë™ë¬¼ì˜ ì†ì„±ì„ ê°€ì§„ë‹¤.)\n\nì´ ì¤‘ì—ì„œ ì–´ë–¤ ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ì§€ëŠ” ìëª…í•©ë‹ˆë‹¤. ë‹¹ì—°íˆ compositionì…ë‹ˆë‹¤.\n\nì´ë¥¼ ì•Œì•„ë³´ê¸° ìœ„í•´ì„œ êµ¬í˜„ì´ ë°”ë€ŒëŠ” ì˜ˆì‹œë¥¼ ë“¤ì–´ë´…ì‹œë‹¤.\n\n- ë§Œì•½, ì½”ë¼ë¦¬ ì¤‘ì—ì„œ ì½”ê°€ ì§§ì€ ê°œì²´ê°€ ë°œê²¬ë˜ì–´ ë” ì´ìƒ ì½”ë¼ë¦¬ëŠ” ì½”ê°€ í¬ë‹¤ëŠ” ì†ì„±ì„ ì“¸ ìˆ˜ ì—†ëŠ” ê²½ìš°\n  - inheritance, composition : ë‘˜ ë‹¤ êµ¬í˜„ë¶€ì—ì„œ ì‰½ê²Œ ë³€ê²½ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ì½”ë¼ë¦¬ ì¤‘ì—ì„œ ì™¸ê³„ì— ì¡´ì¬í•˜ëŠ” ì¢…ì´ ë°œê²¬ë˜ì–´ ì™¸ê³„ì¢…ì˜ íŠ¹ì§•ì„ ì¶”ê°€í•´ì•¼ í•˜ëŠ” ê²½ìš°\n  - inheritance : ì™¸ê³„ ìƒëª…ì²´ë¼ëŠ” interfaceë¥¼ ì¶”ê°€ë¡œ ìƒì†í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ ê³¼ì •ì—ì„œ ì¶©ëŒë˜ëŠ” ì†ì„±ë“¤(ex. ê²¹ì¹˜ëŠ” operation ì´ë¦„, ì„œë¡œ ë°˜ëŒ€ë˜ëŠ” ì„±ì§ˆ) ë“±ì— ì˜í•´ì„œ ìµœì•…ì˜ ê²½ìš° interfaceë¥¼ ìˆ˜ì •í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê²Œ ë˜ëŠ” ê²½ìš° ì´ interfaceë¥¼ êµ¬í˜„í•œ ëª¨ë“  classë“¤ ì—­ì‹œ ë³€ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤\n  - composition: í•´ë‹¹ ì™¸ê³„ ìƒëª…ì²´ë¼ëŠ” ì†ì„±ì„ ê°€ì ¸ì™€ì„œ í•„ìš”ë¡œ í•˜ëŠ” ì†ì„±ë§Œì„ í™•ì¸í•˜ê³  êµ¬í˜„í•©ë‹ˆë‹¤.\n- ì½”ë¼ë¦¬ë¼ëŠ” ì‹ë¬¼ì´ ìƒˆë¡œ ë°œê²¬ëœ ê²½ìš° => ëª¨ë‘ í¬ê²Œ ë³€ê²½í•´ì•¼ í•¨.\n  - inheritance : ìƒì†ì„ ì‹ë¬¼ë¡œ ë³€ê²½í•˜ê³ , ì‹ë¬¼ì˜ ì†ì„±ì— êµ¬í˜„ëœ ê²ƒì„ ìƒˆë¡œ ì •ì˜í•©ë‹ˆë‹¤.\n  - composition : ê°€ì§€ê³  ìˆë˜ ë³€ìˆ˜ë¥¼ ì‹ë¬¼ë¡œ ë³€ê²½í•˜ê³ , ë³€ìˆ˜ì— ì˜ì¡´ì„±ì´ ìˆë˜ ë¶€ë¶„ì„ ì§ì ‘ ë°”ê¾¸ì–´ êµ¬í˜„í•©ë‹ˆë‹¤.\n\në”°ë¼ì„œ, ëŒ€ê°œì˜ ê²½ìš° ìƒì†ì€ interfaceë¥¼ ì§ì ‘ì ìœ¼ë¡œ êµ¬í˜„í•  ë•Œì—ë§Œ ì‚¬ìš©í•˜ê³ , ê·¸ ì™¸ì— ê²½ìš°ì— compositionì„ í†µí•´ì„œ ì˜ì¡´ì„±ì„ í˜•ì„±í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•©ë‹ˆë‹¤.\n\ncompositionì€ í•´ë‹¹ ê´€ê³„ê°€ run-timeì— ìƒì„±ë˜ëŠ”ê°€ ì•„ë‹ˆë©´, compile-timeì— ìƒì„±ë˜ëŠ”ê°€ì— ë”°ë¼ì„œ ë‘ ê°œë¡œ ë‚˜ë‰  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§Œì•½, class ë‚´ë¶€ì—ì„œ í•´ë‹¹ ë³€ìˆ˜ë¥¼ ìƒì„± ì‹œë¶€í„° ì†Œë©¸ ì‹œê¹Œì§€ ê°–ê³  ìˆëŠ”ë‹¤ë©´, ì´ëŠ” <mark>aggregation</mark>(have)ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ì¦‰, compile timeì— ê´€ê³„ê°€ í˜•ì„±ë©ë‹ˆë‹¤.) ê·¸ë ‡ì§€ ì•Šê³ , run timeì— ìƒì„±ë˜ì–´ ì ê¹ ì‚¬ìš©ë˜ëŠ” ì •ë„ì˜ ê´€ê³„ë¼ë©´, ì´ëŠ” <mark>acquaintance</mark>(use) ê´€ê³„ë¡œ ë´…ë‹ˆë‹¤.\n\n#### Finding Appropriate Objects\n\nìš°ë¦¬ê°€ í•´ê²°í•˜ê³ ì í•˜ëŠ” ë¬¸ì œë¥¼ ìœ„í•´ì„œ ì–´ëŠ ì •ë„ê¹Œì§€ì˜ objectë“¤ì´ í•„ìš”í•˜ê³ , ì´ë¥¼ ì–´ë–»ê²Œ ì •ì˜í•  ê²ƒì¸ì§€ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì„ ë„ì™€ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.(Composite, Strategy,...)\n\n#### Determining Object Granuality\n\nObjectë¥¼ ë¬´ì—‡ìœ¼ë¡œ ê²°ì •í–ˆë‹¤ë©´, ë‹¹ì—°íˆ ì´ Objectì˜ í¬ê¸°ë¥¼ ì–´ëŠ ì •ë„ë¡œ í• ì§€ì— ëŒ€í•œ ë‚´ìš©ë„ í•„ìš”í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ì •ì˜í•˜ëŠ” design pattern(Facade, FlyWeight,...)ë„ ì¡´ì¬í•©ë‹ˆë‹¤.\n\n#### Specifying Object Interfaces\n\në¬´ì—‡ì„ interfaceì— ì¶”ê°€í•´ì•¼ í•˜ëŠ”ì§€ ì•„ë‹ˆë©´ í¬í•¨ì‹œì¼œì„œëŠ” ì•ˆ ë˜ëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì„ ì„œìˆ í•œ design pattern(Memento), interface ê°„ì˜ ê´€ê³„ë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒ(Decorator, Proxy)ë„ ìˆìŠµë‹ˆë‹¤.\n\n#### Delegation\n\ndelegationì€ ìì‹ ì˜ operationì˜ êµ¬í˜„ì„ composition í•œ instanceì—ê²Œ ë§¡ê¸°ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n![delegation](/images/delegation.jpeg)\n\në³´ëŠ” ë°”ì™€ ê°™ì´ ìì‹ ì˜ Areaë¼ëŠ” í•¨ìˆ˜ì˜ ì‹¤í–‰ì„ Rectangleì˜ Area í•¨ìˆ˜ë¡œ ëŒ€ì²´í•¨ìœ¼ë¡œì¨ ë” ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ì— Windowê°€ Circleë¡œ ë°”ë€ë‹¤ë©´ ê°„ë‹¨íˆ Circleì˜ instanceë¥¼ ìƒì„±í•´ì„œ ì´ instanceì˜ Areaë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•˜ë©´ ë  ê²ƒì…ë‹ˆë‹¤.\n\nì´ëŠ” êµ‰ì¥íˆ ìœ ìš©í•˜ê³ , ìœ ì—°í•œ ê°œë°œì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ë‹¤ë¥¸ instanceì˜ ìš”ì†Œë¥¼ ì‹¤í–‰ì‹œí‚¤ë‹ˆ ë§Œí¼ run-time ì¤‘ì— ë¹„íš¨ìœ¨ì ì¸ ë™ì‘ì„ ë§‰ì„ ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ìœ ì˜í•˜ê³  ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\nì‹¤ì œë¡œë„ State, Strategy patternì—ì„œë„ ì‚¬ìš©ë©ë‹ˆë‹¤.\n\n## Reference\n\n- Design Patterns: Elements of reusable object oriented software.\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"design-pattern-1","date":"2022-02-20 16:48","title":"[Design Pattern] 1. Intro","category":"Tech","tags":["DesignPattern","OOP"],"desc":"ì ì  ë‹¤ì–‘í•œ ì–¸ì–´ë“¤ì´ ìƒê²¨ë‚˜ê³ , ê°ì²´ ì§€í–¥ì— ëŒ€í•œ ê´€ì‹¬ì´ ì‹œë“¤í•´ì§€ê³  ìˆëŠ” í™˜ê²½ì´ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³ , ì—¬ëŸ¬ ì‹œìŠ¤í…œì—ì„œë„ ê±°ì˜ ê³ ìœ  ëª…ì‚¬ë¡œ ì“°ì´ê³  ìˆê¸°ì— ê°ì²´ ì§€í–¥ì˜ ëŒ€í‘œì ì¸ ë””ìì¸ íŒ¨í„´ì„ ìµí˜€ë‘ëŠ” ê²ƒì€ í•„ìˆ˜ì ì´ë¼ê³  ìƒê°í•´ì„œ ì œê°€ ë´¤ì„ ë•Œ ê°€ì¥ ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©ë˜ëŠ” ìš©ì–´ì— ëŒ€í•´ì„œ ì •ë¦¬ë¥¼ ì¢€ í•´ë³´ê³ ì í•©ë‹ˆë‹¤.í•´ë‹¹ ê¸€ì—ì„œëŠ” ì¼ë‹¨ introductionì— ëŒ€í•œ ë‚´ìš©ì„ ì •ë¦¬í•©ë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\n## Intro\n\nobjectì˜ instantiationì„ ì¶”ìƒí™”í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.\n\nì¦‰, instanceë¥¼ ë§Œë“¤ ë•Œ, ì–´ë–»ê²Œ í•˜ë©´ ì¬ì‚¬ìš©ê³¼ ë³€ê²½ì— ìœ ìš©í•œ êµ¬ì¡°ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œì— ëŒ€í•œ ê³ ë¯¼ì˜ ê²°ê³¼ë¡œ ë‚˜ì˜¨ patternì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì¼ë°˜ì ì¸ ìˆœì„œë¡œëŠ” Abstract Factory, Builder, Factory Method, Prototype, Singletonì´ì§€ë§Œ, ì œê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ìˆœì„œëŒ€ë¡œ ì •ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.\n\nëª¨ë“  ê°€ì •ì€ Appì´ë¼ëŠ” main classì—ì„œ product1ê³¼ product2ë¼ëŠ” objectê°€ í•„ìš”í•˜ë‹¤ëŠ” ê°€ì •í•˜ì—ì„œ ì´ë¥¼ ì–´ë–»ê²Œ ì–»ì–´ì˜¤ëŠ”ì§€ì— ëŒ€í•´ì„œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n\n## Creational Pattern\n\n### <mark>1. Singleton<mark>\n\n![singleton](/images/singleton.jpeg)\n\nê°€ì¥ ë¨¼ì € ì•Œì•„ë³¼ ê²ƒì€ Singleton ì…ë‹ˆë‹¤. ê°€ì¥ ê¸°ë³¸ì´ê¸°ì— ê°€ì¥ ì¤‘ìš”í•œ design pattern ì¤‘ì— í•˜ë‚˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤.\n\nìš°ë¦¬ê°€ íŠ¹ì • objectê°€ í•„ìš”í•  ë•Œ, í•´ë‹¹ ëŒ€ìƒì„ ë‹¨ í•˜ë‚˜ë§Œ ë§Œë“¤ì–´ì„œ ì´ë¥¼ ì „ì—­ì—ì„œ ì ‘ê·¼í•˜ë„ë¡ í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ë°©ì‹ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\në‹¹ì—°íˆ ì´ ë°©ì‹ì„ ì´ìš©í•˜ê²Œ ë˜ë©´, zero copyë¼ëŠ” ì¸¡ë©´ì—ì„œ íš¨ìœ¨ì´ êµ‰ì¥íˆ ì¢‹ì„ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì´ëŸ¬í•œ patternì„ ë‚¨ìš©í•˜ê²Œ ëœë‹¤ë©´, ëˆ„ê°€ ì´ productì— ì ‘ê·¼í•˜ê³  ìˆëŠ”ì§€ ê·¸ë¦¬ê³  ëˆ„ê°€ ë³€ê²½í–ˆëŠ”ì§€ ì•Œê¸° ì–´ë ¤ì›Œì§‘ë‹ˆë‹¤. ë”°ë¼ì„œ, **í•´ë‹¹ Singletonì—ì„œ ì¤‘ìš”í•œ ì ì´ë¼ë©´, ë³€í•˜ì§€ ì•ŠëŠ” ê°’ë§Œ ê°€ì§€ë„ë¡ í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.**\n\nì´ë¥¼ í†µí•´ì„œ, ëˆ„ê°€ ì´ë¥¼ ì‚¬ìš©í•˜ë”ë¼ë„ ì‹œìŠ¤í…œì—ëŠ” ì˜í–¥ì„ ì•ˆ ì£¼ë©´, zero copyë¡œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ íš¨ìœ¨ìƒìœ¼ë¡œë„ í›Œë¥­í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, maintainableì˜ ì…ì¥ì—ì„œëŠ” í° ì•½ì ì´ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ë‚˜ì˜ êµ¬í˜„ì„ ë°”ê¾¸ê²Œ ëœë‹¤ë©´, ì „ì²´ ì‹œìŠ¤í…œì´ ì–´ë””ì„œ ì–´ë–»ê²Œ ì˜í–¥ì„ ë°›ëŠ”ì§€ ì•Œ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ì´ ì ì—ì„œëŠ” ì•½ì ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” objectì— ë³€í™”ê°€ í•„ìš”í•˜ê³ , ëŠ¥ë™ì ì¸ ì¡°ì‘ì´ í•„ìš”í•œ ê²½ìš°ì— object ìì²´ë¡œ singletonìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì—ëŠ” ì œí•œì´ ìƒê¹ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” objectì˜ instanceë¥¼ ëŒ€ì‹ í•´ì„œ ìƒì„±í•´ì£¼ëŠ” factoryë¼ëŠ” ê°œë…ì„ ì‚¬ìš©í•˜ê²Œ ë©ë‹ˆë‹¤. (ì´ë“¤ì„ singletonìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.)\n\nì´ëŠ” ì €ë²ˆ ì±•í„° 1ì—ì„œ ë³´ì•˜ë˜ delegationì„ í™œìš©í•œ ê²ƒì…ë‹ˆë‹¤. ìì‹ ì´ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” objectì˜ instantiationì„ ë‹¤ë¥¸ objectì—ê²Œ ë§¡ê¸°ëŠ” í˜•ì‹ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ë³¸ì—°ì— í•˜ê³ ì í•˜ë˜ í–‰ë™ì— ì¢€ ë” ì§‘ì¤‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\në‹¤ìŒìœ¼ë¡œ ë„˜ì–´ê°€ê¸° ì „ì—, í•œ ë²ˆ ë” ë¨¸ë¦¿ì†ì— ì •ë¦¬í•©ì‹œë‹¤. ì§€ê¸ˆì˜ Appì´ ì•Œê³  ìˆëŠ” ì‚¬í•­ì€ ë¬´ì—‡ì¼ê¹Œìš”?\n\nì–´ë–¤ ë‚´ìš©ë„ ì¶”ìƒí™”ë¥¼ í†µí•´ì„œ ê°ì¶”ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—, ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ ì•Œê³  ìˆê³ , ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ê¹Œì§€ë„ ì™„ë²½í•˜ê²Œ ì•Œê³  ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 2. Builder\n\n![builder](/images/builder.jpeg)\n\nê°€ì¥ ì‰½ê²Œ objectì˜ ìƒì„±ì„ ë§¡ê¸´ë‹¤ê³  í–ˆì„ ë•Œ, ìƒìƒí•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. IBuilderë¼ëŠ” interfaceë¥¼ í†µí•´ì„œ builderë¥¼ ë¬¶ì–´ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ, ë‹¨ìˆœíˆ ê° object(product)ì— ëŒ€í•œ builderë¥¼ ìƒì„±í•´ì¤„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n**ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê°œë…ì€ ê° productì— ëŒ€í•œ ì „ë¬¸ ìƒì„±ìë¥¼ êµ¬ì¶•í•œë‹¤ëŠ” ì ì…ë‹ˆë‹¤.** ë‚´ê°€ ë§Œë“¤ê³ ì í•˜ëŠ” objectì— ëŒ€í•´ì„œ ì´ê²ƒë§Œì„ ì „ë¬¸ì ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆëŠ” classë¥¼ singletonìœ¼ë¡œ ìƒì„±í•¨ìœ¼ë¡œì¨, ì‰½ê²Œ ë¬´ì–¸ê°€ì˜ ì œí’ˆì„ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´, ì´ builderì—ê²Œ ë§¡ê¸°ë©´ ë˜ê² ë‹¤ëŠ” ì‹ì˜ ë°œìƒìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nbuilderëŠ” ì–»ê³ ì í•˜ëŠ” productì— ëŒ€í•œ ëª¨ë“  ë‚´ìš©ì„ ì¶”ìƒí™”í•´ë²„ë¦¬ê¸° ë•Œë¬¸ì—, ë‚´ë¶€ì˜ ì½”ë“œê°€ ì •êµí•˜ê²Œ ë§Œë“¤ì–´ì§€ê³  ë³€í™”ê°€ ì—†ë‹¤ë©´, ë§¤ìš° ì¢‹ê²Œ ì‘ë™í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, product í•˜ë‚˜ë¥¼ ì—¬ëŸ¬ objectë“¤ì´ ì‚¬ìš©í•œë‹¤ë©´, í›„ì— ë³€ê²½ì´ ë§¤ìš° ì–´ë ¤ì›Œì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\nì ì´ë²ˆì—ë„ ë„˜ì–´ê°€ê¸° ì „ì—, í•œ ë²ˆ ë” ë¨¸ë¦¿ì†ì— ì •ë¦¬í•©ì‹œë‹¤. ì§€ê¸ˆì˜ Appì´ ì•Œê³  ìˆëŠ” ì‚¬í•­ì€ ë¬´ì—‡ì¼ê¹Œìš”?\n\nìš°ë¦¬ëŠ” í˜„ì¬ builderë¼ëŠ” ëŒ€ìƒì—ê²Œ objectì˜ ìƒì„±ì„ ë„˜ê²¼ìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ ì•Œê³  ìˆì§€ë§Œ, ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì€ ëª¨ë¥´ëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 3. Abstract Factory\n\n![abstractFactory](/images/abstractFactory.jpeg)\n\nì´ì œ ê·¸ë¦¼ì´ ì¡°ê¸ˆ ë³µì¡í•´ì§‘ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì¢€ ë” ë³µì¡í•œ ìƒí™©ì„ ê³ ë ¤í•œë‹¤ëŠ” ê²ƒì„ ì§ê°ì ìœ¼ë¡œ ë°›ì•„ë“¤ì´ì‹œë©´ ë©ë‹ˆë‹¤.\n\nì´ì œ ìš°ë¦¬ëŠ” ë§Œë“¤ê³ ì í•˜ëŠ” objectë„ ì–´ë–¤ ë¶€ë¥˜ ì¤‘ì— í•˜ë‚˜ë‹¤ ì •ë„ë¡œë§Œ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ ìƒí™©ì—ì„œ ìš°ë¦¬ëŠ” ì´ë¥¼ ë§Œë“¤ê³ ì í•˜ëŠ” object ë§ˆì € ì¶”ìƒí™”ë¥¼ í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në˜í•œ, ìš°ë¦¬ëŠ” Factoryë¥¼ Singletonìœ¼ë¡œ ë§Œë“¤ì–´ì•¼ í•œë‹¤ëŠ” ì ì—ë„ ì£¼ëª©í•´ì•¼ í•©ë‹ˆë‹¤.\n\nê²°êµ­ ëª¨ë“  ìƒì„±ì˜ ëŒ€í•œ ê¶Œí•œì€ factoryì—ê²Œ ë„˜ì–´ê°”ê³ , í•„ìš”ì— ë”°ë¼ì„œ ìš°ë¦¬ëŠ” íŠ¹ì •í•œ factoryë¥¼ ê³¨ë¼ì„œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ product ì—­ì‹œ í•„ìš”ì— ë”°ë¼ ê³¨ë¼ì„œ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.\n\ní•˜ì§€ë§Œ, ì´ patternì€ êµ‰ì¥íˆ ë¹„ì‹¼ patternì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í›„ì— ì§€ì›í•˜ê³ ì í•˜ëŠ” product ìì²´ë¥¼ í•˜ë‚˜ ë” ë§Œë“ ë‹¤ë©´, (ProductC) ì´ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ ëª¨ë“  FactoryëŠ” ì´ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ë³€ê²½ì´ ë˜ì–´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.\n\n---\n\nê·¸ëŸ¼ ì´ë²ˆì—ëŠ” ì–´ë–¨ê¹Œìš”?\n\nìš°ë¦¬ëŠ” í˜„ì¬ factoryë¼ëŠ” ëŒ€ìƒì—ê²Œ objectì˜ ìƒì„±ì„ ë„˜ê²¼ìŠµë‹ˆë‹¤. ë˜í•œ, product ë˜í•œ ì¶”ìƒí™”ë¥¼ í†µí•´ì„œ ì´ê²ƒì´ ë¬´ìŠ¨ ê¸°ëŠ¥ì„ í•˜ëŠ”ì§€ëŠ” ì–´ë ´í’‹í•˜ê²Œ ì•Œê³  ìˆì§€ë§Œ, ì´ê²ƒì´ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ëŠ” ëª¨ë¦…ë‹ˆë‹¤.(ì˜ˆì „ì—ëŠ” ì •í™•í•˜ê²Œ êµ¬ë‘ë¼ê³  ì§€ì •í–ˆë‹¤ë©´, ì´ë²ˆì—ëŠ” ë‘ë£¨ ë­‰ìˆ í•˜ê²Œ ì‹ ë°œì´ë¼ê³  ì“°ê³  ì´ë¥¼ ì‚¬ìš©í•˜ê³  ìˆë‹¤ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.) ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ë„ ëª¨ë¥´ê³ , ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²• ë˜í•œ ëª¨ë¥´ëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 4. Prototype\n\n![prototype](/images/prototype.jpeg)\n\nPrototypeì˜ ëœ»ë¶€í„° ì•Œê³  ê°€ë©´ ì¢‹ìŠµë‹ˆë‹¤. ì´ëŠ” í•˜ë‚˜ì˜ typeì„ ëŒ€í‘œí•  ìˆ˜ ìˆëŠ” ì „í˜•ì ì¸ ì˜ˆ, ì›ë˜ì˜ í˜•íƒœ ì •ë„ë¡œ í•´ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, íŠ¹ì • ë¶€ë¥˜ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆëŠ” ì „í˜•ì ì¸ ì˜ˆì—ì„œ ë¶€í„° í™•ì¥ì„ ì‹œì‘í•œë‹¤ëŠ” ê°œë…ìœ¼ë¡œ ë°›ì•„ë“¤ì´ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\nê¸°ì¡´ì˜ Interfaceë¥¼ ì´ìš©í•˜ëŠ” ë°©ì‹ì€ ëŒ€ìƒì´ ì •í™•í•˜ê²Œ ë¬´ìŠ¨ ê¸°ëŠ¥ì„ í•  ìˆ˜ ìˆëŠ”ì§€ì— ëŒ€í•œ ì—„ê²©í•œ ì„ ì–¸ì´ ìˆì—ˆë‹¤ë©´, í•´ë‹¹ ë°©ì‹ì—ì„œëŠ” ë‹¤ì†Œ ëŠìŠ¨í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „í˜•ì ì¸ ì˜ˆì¸ prototypeì—ì„œë¶€í„° ì‹œì‘í•˜ì—¬ ì´ë¥¼ í™•ì¥í•˜ì—¬ í‘œí˜„í•œë‹¤ëŠ” ê²ƒì´ ì¼ë°˜ì ì¸ ê²¬í•´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, êµ¬í˜„ë„ Factoryì—ì„œ Prototypeì„ ê°€ì§€ê³  ì´ë¥¼ Clone í•˜ì—¬ì„œ instantiatingì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ì´ë¥¼ í™•ì¥í•˜ì—¬ì„œ ë˜ ë‹¤ë¥¸ objectë¥¼ ìƒì„±í•˜ëŠ” Factoryë¥¼ êµ¬í˜„í•˜ëŠ” ì‹ìœ¼ë¡œ í™•ì¥í•´ë‚˜ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê·¸ë ‡ê¸°ì— Prototype ë°©ì‹ì—ì„œëŠ” cloneì´ë¼ëŠ” methodê°€ êµ‰ì¥íˆ ì¤‘ìš”í•©ë‹ˆë‹¤. (ë˜í•œ, ì´ Prototypeì€ Singletonì´ë¼ëŠ” ê²ƒë„ ì•„ì‹œê² ì§€ìš”?) ê¸°ì¡´ì˜ abstract factory ë°©ì‹ê³¼ëŠ” ë‹¤ë¥´ê²Œ Factory ìì²´ì—ì„œ Prototypeì„ ê°€ì§€ê³  ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³ , ì´ë¥¼ ì´ìš©í•´ì„œ objectë¥¼ ìƒì„±í•œë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë°©ì‹ì€ ê³¼ê±° í•´ë‹¹ ì±…ì´ ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ë§Œ í•´ë„ ë‹¤ì†Œ ë¹„ì£¼ë¥˜ë¡œ (ë¬¼ë¡  ì§€ê¸ˆë„ ì£¼ë¥˜ëŠ” ì•„ë‹™ë‹ˆë‹¤.) ì—¬ê²¨ì¡Œì—ˆì§€ë§Œ, ì´ì œëŠ” immutableì´ë¼ëŠ” ë§ë„ ê³„ì†í•´ì„œ ì‚¬ìš©ë˜ê³  ìˆê³ , Modern Java, javascript ë“± ì—¬ëŸ¬ ì–¸ì–´ì—ì„œë„ ì´ patternì„ ê¸°ë³¸ìœ¼ë¡œ ë°›ì•„ë“¤ì˜€ìŠµë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œëŠ” ì–´ë–¨ê¹Œìš”?\n\nì´ ë˜í•œ factoryì—ê²Œ ìƒì„±ì„ ë§¡ê²¼ê³ , product ë˜í•œ ì´ë¥¼ ëŒ€í‘œí•  ìˆ˜ ìˆëŠ” ì „í˜•ì ì¸ ì˜ˆ ì •ë„ë¥¼ ì•Œê³  ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìš°ë¦¬ëŠ” productA, productBë¼ëŠ” objectê°€ ì •í™•í•˜ê²Œ ë¬´ì—‡ì¸ì§€ë„ ëª¨ë¥´ê³ , ì´ë¥¼ ë§Œë“œëŠ” ë°©ë²• ë˜í•œ ëª¨ë¥´ëŠ” ìƒíƒœì…ë‹ˆë‹¤.\n\n### 5. Factory Method\n\n![factoryMethod](/images/factoryMethod.jpeg)\n\nì´ë²ˆì—ëŠ” ì¡°ê¸ˆ ë‹¤ë¥¸ êµ¬í˜„ì…ë‹ˆë‹¤. ì´ë²ˆì—ëŠ” ìƒì„±ì„ ìœ„í•œ ëŒ€ë¦¬ìë¥¼ ë‘ì§€ ì•Šê³ , ë‹¤ë¥¸ Productë¥¼ ì“°ê³  ì‹¶ë‹¤ë©´, App ìì²´ë¥¼ ìƒˆë¡œ ì‘ì„±í•˜ìëŠ” íë¦„ì…ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ê²Œ ë˜ë©´, App ìì²´ê°€ íŠ¹ì • Productì™€ ì˜ì¡´ì„±ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì •í™•í•˜ê²Œ Productë¥¼ ì•Œê³  ìˆë‹¤ëŠ” ê²ƒì€ type ê²€ì‚¬ì— ì‹œê°„ì„ ë‚­ë¹„í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ê³ , ê·¸ë¡œ ì¸í•´ ë” ë¹ ë¥¸ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ëœ»ìœ¼ë¡œ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì´ ë°©ë²•ë¡ ì€ ëŒ€ê²Œ ê°œë°œ ì´ˆê¸°ì— ë§¤ìš° ë§ì´ ì“°ì¸ë‹¤ê³  í•©ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ì•„ì§ ì–´ë–¤ Productê¹Œì§€ ì§€ì›í• ì§€ ëª¨ë¥´ì§€ë§Œ ì–´ëŠì •ë„ì˜ ì¶”ìƒí™”ë¥¼ í†µí•´ì„œ í•´ë‹¹ objectê°€ ê°€ì ¸ì•¼ í•  ìµœì†Œí•œì˜ ê¸°ëŠ¥ì„ ì§€ì •í•´ë†“ê³ , ë°”ë¡œ íŠ¹ì • objectì— ëŒ€í•œ ê°œë°œì„ ì‹œì‘í•¨ìœ¼ë¡œì¨ í•´ë‹¹ ì‹œìŠ¤í…œì˜ ê²€ì¦ì„ ë¹ ë¥´ê²Œ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤. ê·¸ë¦¬ê³ , í›„ì— maintainì˜ ì‹œê°„ì´ ì˜¤ë©´, codeë¥¼ refactoring í•˜ê³  ìœ„ì—ì„œ ë³´ì•˜ë˜ ë‹¤ë¥¸ design patternì„ ê²€í† í•˜ë©° ì„ íƒí•˜ëŠ” ì‹œê°„ì„ ê°€ì§„ë‹¤ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\ní•´ë‹¹ ì‹œìŠ¤í…œì— ëŒ€í•œ êµ¬í˜„ì€ ì œ Githubì— ë³„ë„ì˜ Branchë¥¼ í†µí•´ì„œ êµ¬í˜„í•´ë‘ì—ˆìŠµë‹ˆë‹¤. ì–¸ì–´ëŠ” typescriptë¡œ ì‘ì„±í•˜ì˜€ê³ , ì°¸ê³ í•  ìˆ˜ ìˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤. :)\n\n[ğŸ”— GitHub](https://github.com/euidong/oop-design-pattern/tree/creational-pattern)\n\n## Reference\n\n- Design Patterns: Elements of reusable object oriented software.\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"design-pattern-2","date":"2022-02-22 16:54","title":"[Design Pattern] 2. Creational Pattern","category":"Tech","tags":["DesignPattern","AbstractFactoryPattern","BuilderPattern","Creationalpattern","FactoryMethodPattern","PrototypePattern","SingletonPattern"],"desc":"objectì˜ instantiationì„ ì¶”ìƒí™”í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.ì¦‰, instanceë¥¼ ë§Œë“¤ ë•Œ, ì–´ë–»ê²Œ í•˜ë©´ ì¬ì‚¬ìš©ê³¼ ë³€ê²½ì— ìœ ìš©í•œ êµ¬ì¡°ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ê¹Œì— ëŒ€í•œ ê³ ë¯¼ì˜ ê²°ê³¼ë¡œ ë‚˜ì˜¨ patternì´ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.ì¼ë°˜ì ì¸ ìˆœì„œë¡œëŠ” Abstract Factory, Builder, Factory Method, Prototype, Singletonì´ì§€ë§Œ, ì œê°€ ì´í•´í•˜ê¸° ì‰¬ìš´ ìˆœì„œëŒ€ë¡œ ì •ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.ëª¨ë“  ê°€ì •ì€ Appì´ë¼ëŠ” main classì—ì„œ product1ê³¼ product2ë¼ëŠ” objectê°€ í•„ìš”í•˜ë‹¤ëŠ” ê°€ì •í•˜ì—ì„œ ì´ë¥¼ ì–´ë–»ê²Œ ì–»ì–´ì˜¤ëŠ”ì§€ì— ëŒ€í•´ì„œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\n## Intro\n\nì• ì„œ ì‚´í´ë³¸ creational patternì´ objectì˜ ìƒì„±ì— ëŒ€í•œ ë°©ë²•ë“¤ì„ ì œê³µí•˜ì˜€ë‹¤ë©´, í•´ë‹¹ objectë“¤ì˜ ê´€ê³„ë¥¼ ì–´ë–»ê²Œ ì—°ê²°í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ê³ ë¯¼ì—ì„œ ë§Œë“¤ì–´ì§„ patternì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ì–´ì„œ, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë‚´ë¶€ ëª¨ë“ˆ ê°„ì˜ ìƒí˜¸ì‘ìš©ì´ë‚˜ ì´ë“¤ì„ ì—°ê²°í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Structural Pattern\n\n### 1. Adapter\n\n![adapter](/images/adapter.jpeg)\n\nobjectì™€ objectê°„ì˜ ìƒí˜¸ì‘ìš©ì„ ë•ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ì…ë‹ˆë‹¤. ì œ ìƒê°ì—ëŠ” **Converterë¡œ** í‘œí˜„í•  ìˆ˜ ìˆì„ ê±° ê°™ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, pdfë¥¼ í•„ìš”ë¡œ í•˜ëŠ” moduleì´ ìˆë‹¤ê³  í–ˆì„ ë•Œ, ìš°ë¦¬ê°€ ê°€ì§„ ê²ƒì´ ì´ë¯¸ì§€ë°–ì— ì—†ë‹¤ë©´, ìš°ë¦¬ëŠ” ì´ë¥¼ ë³€í™˜í•´ì¤„ ìˆ˜ ìˆëŠ” converterë¥¼ ì¤‘ê°„ì— ì„¤ì¹˜í•¨ìœ¼ë¡œì¨ ì´ë“¤ì„ ìˆ˜ì •í•´ì£¼ì§€ ì•Šê³ , í•©ì¹  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ë°©ì‹ì´ ë°”ë¡œ Adapter patternì˜ í•µì‹¬ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì¼ë°˜ì ì¸ êµ¬í˜„ì€ adapterë¼ëŠ” classë¥¼ ë³€í™˜ ê²°ê³¼ë¬¼ì˜ classì˜ í™•ì¥(ìƒì†)ìœ¼ë¡œ ë‘¡ë‹ˆë‹¤. ì´ë ‡ê²Œ í•˜ë©´, í•´ë‹¹ classì˜ ì†ì„±ì„ ëª¨ë‘ ê°€ì§‘ë‹ˆë‹¤. ì—¬ê¸°ì„œ adapterì˜ ìƒì„± ì‹œì— ë³€í™˜ ì „ì˜ classë¥¼ ì „ë‹¬í•˜ì—¬, ë‚´ë¶€ êµ¬í˜„ì„ overriding í•˜ëŠ” ë°©ì‹ì„ ì·¨í•˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. **ì¦‰, adapter ìì²´ê°€ ì›í•˜ëŠ” ì œí’ˆì˜ ë³€í™˜ ì™„ë£Œ ìƒíƒœë¼ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.**\n\nrefactoring.guru ì‚¬ì´íŠ¸ì—ì„œ ì˜ˆì‹œë¥¼ ë“  ìƒí™©ì„ ë´…ì‹œë‹¤.\n\nì›í˜• êµ¬ë©ì— ì›ê¸°ë‘¥ì„ ë„£ìœ¼ë©´ì„œ, ì›í˜• êµ¬ë©ë³´ë‹¤ ë°˜ì§€ë¦„ì´ í° ì›ê¸°ë‘¥ì€ filteringí•˜ëŠ” ì½”ë“œê°€ ìˆì—ˆë‹¤ê³  í•©ì‹œë‹¤. ì´ë•Œ, ì›ê¸°ë‘¥ì´ ì•„ë‹Œ ì§ìœ¡ë©´ì²´ë¥¼ ë„£ê³  ì‹¶ë‹¤ë©´, ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ì§ìœ¡ë©´ì²´ë¥¼ ë§ˆì¹˜ ì›ê¸°ë‘¥ì²˜ëŸ¼ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆë„ë¡ ì§ìœ¡ë©´ì²´ì˜ ë°‘ë³€ì˜ ë³€ì˜ ê¸¸ì´ë¥¼ í†µí•´ì„œ ë°˜ì§€ë¦„ì„ ìƒì„±í•´ë‚´ëŠ” ë¡œì§ì„ ê°€ì§„ adapterë¥¼ ë§Œë“¤ì–´ë‚´ë©´ ë  ê²ƒì…ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ê¸°ì¡´ì˜ ë³€í™˜ ê²°ê³¼ë¬¼ë¡œ ëŒì•„ê°€ëŠ” ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ëŒ€ê²Œ dataì˜ ë³€í™˜ ì‹œì— ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤. (ex. XML -> JSON)\n- ì‚¬ì‹¤ ì„ì‹œ ë°©í¸ì´ë¼ê³  ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ìœ„ì— ì›í˜• êµ¬ë©ì— ë„£ì„ ìˆ˜ ìˆëŠ” ê²ƒì„ ì›í˜•ê¸°ë‘¥ìœ¼ë¡œ ì œí•œí•œ ìƒí™©ì—ì„œ ì§ìœ¡ë©´ì²´ë¥¼ ë„£ì—ˆë‹¤ëŠ” ê²ƒì—ì„œë¶€í„° ê°€ë…ì„±ì´ ë–¨ì–´ì§€ê³ , ë³µì¡ë„ê°€ ë†’ì•„ì§ˆ ìˆ˜ ìˆëŠ” ê²ƒì…ë‹ˆë‹¤.\n\n### 2. Bridge\n\n> before\n\n![bridge-1](/images/bridge-1.jpeg)\n\n> after\n\n![bridge-2](/images/bridge-1.jpeg)\n\ní•˜ë‚˜ì˜ classì˜ í¬ê¸°ê°€ ë„ˆë¬´ ë¹„ëŒ€í•´ì§€ê±°ë‚˜ ê° classë“¤ ê°„ì˜ ì˜ì¡´ì„±ì´ ë†’ì•„ì§€ëŠ” ê²½ìš°ì— ì´ë¥¼ ë‘ ê°œì˜ ê³„ì¸µ êµ¬ì¡°ë¡œ ë‚˜ëˆ„ì–´ ì˜ì¡´ì„±ì„ ì œê±°í•˜ë©´ì„œ ê°œë³„ì ìœ¼ë¡œ ê°œë°œí•˜ëŠ” í™˜ê²½ì„ ë§Œë“œëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\nê°œë°œì„ ì§„í–‰í•˜ë‹¤ ë³´ë©´, í•˜ë‚˜ì˜ classì˜ í¬ê¸°ê°€ êµ‰ì¥íˆ ë¹„ëŒ€í•´ì§€ëŠ”Â  ê²½í—˜ì„ í•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ì²˜ìŒì—ëŠ” ë‹¨ìˆœíˆ ë²„íŠ¼ì´ë¼ëŠ” classë¥¼ ë§Œë“¤ì—ˆì—ˆëŠ”ë°, ë””ìì¸ì˜ detailì„ ìœ„í•œ ë‚´ìš©ì— ì˜í•´ì„œ ì½”ë“œê°€ êµ‰ì¥íˆ ë¹„ëŒ€í•´ì§€ê³ , ì´ë¥¼ click í–ˆì„ ë•Œ, hover í–ˆì„ ë•Œì™€ ê°™ì€ ë¡œì§ë„ ê³„ì†í•´ì„œ ì¶”ê°€ë˜ë©´ì„œ classê°€ ë¹„ëŒ€í•´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì—¬ê¸°ì„œ design ë¶€ë¶„ì„ ë³„ë„ì˜ classë¡œ ë¶„ë¦¬ì‹œí‚¤ê³  ì´ë¥¼ ê¸°ì¡´ button classê°€ ë³€ìˆ˜ë¡œ í¬í•¨í•˜ëŠ” ë°©ì‹ì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**ì¦‰, ì—¬ëŸ¬ êµ¬í˜„ method, attributeë¥¼ í•˜ë‚˜ì˜ attribute typeìœ¼ë¡œ í†µí•©í•˜ê³ , ì´ë¥¼ interfaceë¡œ ë§Œë“¤ì–´ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.** ì´ë ‡ê²Œ í•¨ìœ¼ë¡œì¨ ì¢€ ë” ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‚¬ì‹¤ ìš°ë¦¬ì˜ main applicationì´ moduleì„ ì§ì ‘ êµ¬í˜„í•˜ì§€ ì•Šê³ , ì—¬íƒ€ moduleì„ installí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ì´ì™€ ìœ ì‚¬í•˜ë‹¤ê³  í•  ìˆ˜ ìˆê² ìŠµë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ bridgeì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ëŒ€ê²Œ design(css style)/platform(ios, android, web)ê³¼ logicì„ ë¶„ë¦¬í•˜ì—¬ ì„œë¡œê°„ ì˜ì¡´ì„±ì„ ë¶„ë¦¬í•  ë•Œ, ìœ ìš©í•©ë‹ˆë‹¤.\n\n### 3. Composite\n\n![composite](/images/composite.jpeg)\n\n**objectë“¤ì„ tree êµ¬ì¡°ë¡œ ë§Œë“¤ì–´**ì„œ ë§ˆì¹˜ í•˜ë‚˜ì˜ object ì¸ ê²ƒì²˜ëŸ¼ ë™ì‘ì‹œí‚¤ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ê·¸ë ‡ê¸°ì— ë§Œë“¤ê³ ì í•˜ëŠ” êµ¬í˜„ ëª©í‘œ ìì²´ê°€ tree êµ¬ì¡°ë¡œ í‘œí˜„ ê°€ëŠ¥í•  ë•Œì—ë§Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. treeëŠ” ìì‹ ì˜ ê¸°ëŠ¥ì„ ë‹´ëŠ” rootì™€ ë‹¤ë¥¸ subtreeë“¤ë¡œ ì´ë£¨ì–´ì§€ë©°, ì´ë“¤ì„ ê°€ë¦¬í‚¤ëŠ” pointerë¥¼ ê°€ì§„ë‹¤.(subtreeëŠ” ì—†ì„ ìˆ˜ë„ ìˆë‹¤.)\n\nëŒ€ê²Œ êµ¬í˜„ì„ ìœ„í•´ì„œ, ê°€ì¥ ê¸°ë°˜ì´ ë˜ëŠ” ê¸°ëŠ¥ì„ interface typeìœ¼ë¡œ ìƒì„±í•˜ë©´, leafì²˜ëŸ¼ ì‚¬ìš©ë  classì™€ ì´ë¥¼ ë‹´ì„ ìˆ˜ ìˆëŠ” í˜•íƒœì˜ classë¡œ ë‚˜ëˆ„ì–´ êµ¬í˜„í•©ë‹ˆë‹¤.\n\nì˜ˆë¥¼ ë“¤ë©´, file systemì„ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. file systemì€ í¬ê²Œ fileê³¼ folderë¡œ ë‚˜ë‰˜ì–´ì§‘ë‹ˆë‹¤. folderëŠ” ë§ˆì¹˜ í•˜ë‚˜ì˜ subtreeê°€ ë˜ëŠ” ê²ƒì´ê³ , fileì€ í•˜ë‚˜ì˜ leafê°€ ë˜ëŠ” ê²ƒì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê° leafë§ˆë‹¤ ì•Œë§ì€ êµ¬í˜„ì„ í•  ìˆ˜ ìˆê³ , folderì—ë„ ì•Œë§ì€ êµ¬í˜„ì„ ì‰½ê²Œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ compositeì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ê³„ì¸µìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ” ë³µì¡í•œ êµ¬ì¡°ë¥¼ ì‰½ê²Œ êµ¬ì¡°í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ìƒˆë¡œìš´ ìš”ì†Œë¥¼ ì¶”ê°€í•  ë•Œì—ë„, ê¸°ì¡´ ì½”ë“œì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, ì–µì§€ë¡œ ë„ì…í•˜ê¸° ìœ„í•´ì„œ, ê³¼ë„í•˜ê²Œ ì¼ë°˜í™”í•œ êµ¬ì¡°ë¥¼ ê°€ì§€ê²Œ ë˜ë©´, ì´í•´í•˜ê¸° ì–´ë ¤ìš´ êµ¬ì¡°ê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰, treeë¥¼ êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤ëŠ” ê²ƒì´ ëª…í™•í•  ë•Œì—ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n### <mark>4. Decorator</mark>\n\n![decorator](/images/decorator.jpeg)\n\n**ìƒˆë¡œìš´ ê¸°ëŠ¥ë“¤ì„ objectì— ì¶”ê°€í•˜ê¸° ìœ„í•´ì„œ ê¸°ì¡´ objectëŠ” ê·¸ëŒ€ë¡œ ë‘ê³ , ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ í¬í•¨í•˜ëŠ” wrapperë¡œ ê°ì‹¸ì£¼ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.**\n\në§Œì•½, í•¸ë“œí° push ì•Œë¦¼ ê¸°ëŠ¥ì„ êµ¬í˜„í•´ë†“ì•˜ê³ , ì´ë¥¼ ì—¬ëŸ¬ ì—…ì²´ì—ê²Œ ë°°í¬í•˜ì˜€ë‹¤ê³  ê°€ì •í•©ì‹œë‹¤. ê·¸ëŸ°ë°, ì–´ë–¤ ì—…ì²´ì—ì„œëŠ” Facebook ì•Œë¦¼, ë˜ ë‹¤ë¥¸ ì—…ì²´ì—ì„œëŠ” Slack ì•Œë¦¼ì„ ì¶”ê°€ë¡œ ì „ì†¡í•˜ê¸°ë¥¼ ì›í•œë‹¤ë©´, ì–´ë–»ê²Œ í•´ì•¼ í• ê¹Œìš”? ê°€ì¥ ì‰½ê²Œ ìƒê° ë‚˜ëŠ” ë°©ë²•ì€ ê° notification ê¸°ëŠ¥ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” classë¥¼ ìƒì„±í•˜ê³ , appì—ì„œ ì—¬ëŸ¬ ê°œë¥¼ ìƒì„±í•´ì„œ ë³´ë‚´ëŠ” ë°©ë²•ì¼ ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ, ë‹¨ í•˜ë‚˜ì˜ objectë§Œ ë°›ì„ ìˆ˜ ìˆë„ë¡ êµ¬í˜„ì´ ë˜ì–´ ìˆê³ , ì´ë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” app codeë¥¼ ë³€ê²½í•  ìˆ˜ ì—†ë‹¤ë©´, ìš°ë¦¬ëŠ” ê²°êµ­ 3 ê°€ì§€ì˜ ì•Œë¦¼ì„ í•˜ë‚˜ì˜ classë¡œ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ, 7ê°œì˜ classê°€ í•„ìš”í•©ë‹ˆë‹¤.\n\n1. push ì•Œë¦¼ë§Œ ìˆëŠ” class\n2. facebook ì•Œë¦¼ë§Œ ìˆëŠ” class\n3. slack ì•Œë¦¼ë§Œ ìˆëŠ” class\n4. push + facebook ì•Œë¦¼ class\n5. push + slack ì•Œë¦¼ class\n6. slack + facebook ì•Œë¦¼ class\n7. push + slack + facebook ì•Œë¦¼ class\n\nì´ëŸ¬í•œ êµ¬ì¡°ë¥¼ ê°€ì§€ëŠ” ê±°ëŠ” êµ‰ì¥í•œ ì¤‘ë³µ ì½”ë“œë¥¼ ë§Œë“¤ì–´ë‚¼ ê°€ëŠ¥ì„±ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ë‚˜ì˜¨ patternì´ decoratorì…ë‹ˆë‹¤. ê¸°ì¡´ objectì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ í•˜ëŠ” objectë¥¼ ê°ì‹¸ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì‹¤í–‰ ì‹œì—ëŠ” ë°– or ì•ˆë¶€í„° ì‹¤í–‰ì„ ì‹œí‚¤ë©´ì„œ ì§„í–‰í•©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œëŠ” decoratorì˜ íŠ¹ì§•ì„ ì‚´í´ë´…ì‹œë‹¤.\n\n- ì´ ì—­ì‹œ ê¸°ì¡´ ì½”ë“œì˜ ìˆ˜ì •ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤.\n- runtimeì— ì‰½ê²Œ ìƒˆë¡œìš´ êµ¬í˜„ì„ ì¶”ê°€í•˜ê±°ë‚˜ ì‚­ì œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê° wrapperê°€ í•˜ë‚˜ì˜ ê¸°ëŠ¥ë§Œ í•˜ë„ë¡ êµ¬í˜„í•˜ì—¬, responsibilityë¥¼ í•˜ë‚˜ë§Œ ê°–ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, ë•Œë¡œëŠ” wrapperê°„ ì˜ì¡´ì„±ìœ¼ë¡œ ì¸í•´ íŠ¹ì • wrapperë¥¼ ì œê±°í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ìƒê¸¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\n\n### 5. Facade\n\n![facade](/images/facade.jpeg)\n\n**ê°„ì†Œí™”ëœ interfaceë¥¼ ë³µì¡í•œ class êµ¬ì¡°(library, framework)ì— ê°„ë‹¨í•œ interfaceë¥¼ ì œê³µí•˜ëŠ” patternì…ë‹ˆë‹¤.** ì¦‰, third partyë¥¼ ì‚¬ìš©í•  ë•Œ, ì§ì ‘ì ìœ¼ë¡œ í˜¸ì¶œí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ facadeë¼ëŠ” objectë¥¼ í†µí•´ì„œ ì¶”ìƒí™”í•œ methodë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨ ì‹¤ì œ ì‹œìŠ¤í…œê³¼ third partyì™€ì˜ ì˜ì¡´ì„±ì„ ì¤„ì´ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n---\n\nfacadeì˜ íŠ¹ì§•ì€ ìœ„ì—ì„œ ë§í•œ ë°”ì™€ ê°™ê³ , ì£¼ì˜ì‚¬í•­ì´ í•˜ë‚˜ ì¡´ì¬í•©ë‹ˆë‹¤.\n\n- facadeê°€ ëª¨ë“  objectë“¤ì˜ êµ¬í˜„ì„ ì•„ëŠ” a god objectê°€ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ë ‡ê²Œ ë˜ë©´, ì‚¬ì‹¤ìƒ ì´ë¥¼ ì´ìš©í•˜ëŠ” applicationë„ ê²°ì½” systemì— ë…ë¦½ì ì¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n\n### 6. Flyweight\n\n> before\n\n![flyweight-before](/images/flyweight-before.jpeg)\n\n> after\n\n![flyweight-after](/images/flyweight-after.jpeg)\n\nobjectë¥¼ ìœ ì§€í•˜ëŠ”ë° ë¹„ìš©ì„ ë„ˆë¬´ ë§ì´ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, **ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë™ì¼í•œ ë¶€ë¶„ì„ ë³„ë„ë¡œ objectì— í¬í•¨ì‹œí‚¤ì§€ ì•Šê³  ê³µìœ í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨ objectë¥¼ ê²½ëŸ‰í™”í•˜ê¸° ìœ„í•´ì„œ ë‚˜ì˜¨ patternì…ë‹ˆë‹¤.**\n\n---\n\nFlyweightì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- RAMì˜ ì‚¬ìš©ëŸ‰ì„ ì¤„ì¸ë‹¤ëŠ” ê²ƒì€ ê·¸ë§Œí¼ CPU ì‚¬ìš©ëŸ‰ì´ ëŠ˜ì–´ë‚œë‹¤ëŠ” ê²ƒì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n- ë˜í•œ, Computerë¥¼ ìœ„í•œ ì„¤ê³„ì´ë‹ˆ ë§Œí¼ ì‚¬ëŒì´ ì´í•´í•˜ê¸°ì— ê°€ë…ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### <mark>7. Proxy</mark>\n\n![proxy](/images/proxy.jpeg)\n\nëŒ€ì²´ objectë¥¼ ì œê³µí•˜ê±°ë‚˜ ë˜ ë‹¤ë¥¸ objectë¥¼ ìœ„í•œ placeholderë¥¼ ì œê³µí•˜ëŠ” patternì´ë‹¤. original objectì— ì ‘ê·¼ì„ ì œì–´í•˜ë©´ì„œ, ìš”ì²­ì˜ ì²˜ë¦¬ ì „ í›„ë¡œ, íŠ¹ì • ë™ì‘ì„ ìˆ˜í–‰í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì‚¬ë¡€ëŠ” ë‹¹ì—°í•˜ê²Œë„ Databaseì— ì ‘ê·¼í•˜ëŠ” ë¡œì§ì„ ì •ì˜í•˜ëŠ” APIë¥¼ ë§Œë“œëŠ” ê²½ìš°ë¥¼ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. API serverëŠ” ì‚¬ì‹¤ìƒ databaseì— ì ‘ê·¼í•˜ê¸° ì´ì „ì— ìˆ˜í–‰í•´ì•¼ í•  ë™ì‘ë“¤ì„ ë¯¸ë¦¬ ì •ì˜í•˜ê³ , ìš”ì²­ì´ ë“¤ì–´ì˜¤ë©´ ì´ë¥¼ ì²˜ë¦¬í•˜ì—¬ clientì—ê²Œ ì „ì†¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ê²ƒì´ í•„ìš”í•œ ì´ìœ ëŠ” ë¯¼ê°ì •ë³´ì˜ ë³´í˜¸ì™€ ì„œë¹„ìŠ¤ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ì¥í•˜ê¸° ìœ„í•¨ì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në”°ë¼ì„œ, í•´ë‹¹ objectë§Œìœ¼ë¡œë„ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ìš”êµ¬ì— ë”°ë¼ì„œ, object ì ‘ê·¼ ì „í›„ë¡œ ì²˜ë¦¬ê°€ í•„ìš”í•œ ê²½ìš° proxy patternì„ í†µí•´ì„œ êµ¬í˜„í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.\n\n---\n\nProxyì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- serviceì™€ ì´ë¥¼ ì´ìš©í•˜ëŠ” clientì™€ ë…ë¦½ì ìœ¼ë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ì¼ë°˜ì ìœ¼ë¡œ serviceì— ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒë³´ë‹¤ delayê°€ ë°œìƒí•  ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\n## Reference\n\nì¤‘ê°„ì— ì¢‹ì€ referenceë¥¼ ì°¾ì•˜ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œë¶€í„°ëŠ” ì¶œì²˜ê°€ ë°”ë€ë‹ˆë‹¤. ì €ë„ í•´ë‹¹ ì‚¬ì´íŠ¸ì˜ ë„ì›€ì„ ë§ì´ ë°›ì•˜ê¸° ë•Œë¬¸ì— í•´ë‹¹ ì‚¬ì´íŠ¸ í•œ ë²ˆ ì§ì ‘ ê°€ë³´ëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\n\n- Design Patterns: Elements of reusable object oriented software.\n- Refactoring GURU :Â [https://refactoring.guru/design-patterns/structural-patterns](https://refactoring.guru/design-patterns/structural-patterns)\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"design-pattern-3","date":"2022-03-09 15:12","title":"[Design Pattern] 3. Structural Pattern","category":"Tech","tags":["DesignPattern","AdapterPattern","BridgePattern","CompositePattern","DecoratorPattern","FacadePattern","FlyweightPattern","ProxyPattern"],"desc":"ì• ì„œ ì‚´í´ë³¸ creational patternì´ objectì˜ ìƒì„±ì— ëŒ€í•œ ë°©ë²•ë“¤ì„ ì œê³µí•˜ì˜€ë‹¤ë©´, í•´ë‹¹ objectë“¤ì˜ ê´€ê³„ë¥¼ ì–´ë–»ê²Œ ì—°ê²°í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ê³ ë¯¼ì—ì„œ ë§Œë“¤ì–´ì§„ patternì´ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´ì„œ, ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì™€ ë‚´ë¶€ ëª¨ë“ˆ ê°„ì˜ ìƒí˜¸ì‘ìš©ì´ë‚˜ ì´ë“¤ì„ ì—°ê²°í•˜ëŠ” ë°©ì‹ì„ ì •ì˜í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ê²½ìš°ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\n## Intro\n\nAlgorithmê³¼ object ê°„ì˜ ì±…ì„ ë¶„ë°°ì— ê´€í•œ patternì…ë‹ˆë‹¤.\n\nì¦‰, objectì˜ ì‚¬ìš© ëª©ì ì— ë”°ë¼ì„œ methodë¥¼ ì •ì˜í•  ë•Œ, ë§ì´ ì‚¬ìš©ë˜ëŠ” êµ¬í˜„ patternì„ ì˜ë¯¸í•©ë‹ˆë‹¤.\n\n## Behavioral Pattern\n\n### 1. Chain of Responsibility(CoR)\n\n![cor](/images/cor.jpeg)\n\n**requestë¥¼ ì—¬ëŸ¬ handlerë“¤ì„ í•˜ë‚˜ì˜ chainìœ¼ë¡œ ì—°ê²°í•œ objectì— ì „ë‹¬í•˜ì—¬ requestë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.** ì—¬ê¸°ì„œ ê° ê°ì˜ handlerëŠ” ìŠ¤ìŠ¤ë¡œ ì‘ì—…ì„ ëë‚´ê³  responseë¥¼ ë³´ë‚¼ ìˆ˜ë„ ìˆê³ , ì´ë¥¼ ë‹¤ìŒ handlerë¡œ ì „ë‹¬í•  ìˆ˜ë„ ìˆìœ¼ë©°, í•´ë‹¹ requestë¥¼ ì´ìš©í•´ì„œ side effectë¥¼ ë§Œë“¤ ìˆ˜ë„ ìˆë‹¤.\n\nì´ëŠ” ëŒ€ê²Œ requestë¥¼ ì²˜ë¦¬í•˜ëŠ” moduleì„ ì„¤ê³„í•˜ëŠ” ê³¼ì •ì—ì„œ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, REST API ë¥¼ êµ¬í˜„í•˜ê³ ì í•  ë•Œ, ì—¬ëŸ¬ requestì—ì„œ ê³µí†µì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” logicì„ ë³„ë„ì˜ middlewareë¼ëŠ” ê²ƒìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ êµ¬í˜„í•˜ê³  ì¬í™œìš©í•˜ëŠ” ê²ƒì„ ë§ì´ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (ex. nodeJS express, Go http.Handler, etc...)\n\n---\n\nì—¬ê¸°ì„œ CoRì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- Requestì˜ ì²˜ë¦¬ ìˆœì„œë„ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê° handlerê°€ í•˜ë‚˜ì˜ ì—­í• ë§Œ í•˜ë„ë¡ í•˜ì—¬, ìœ ì—°ì„±ê³¼ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.(Single Responsibility)\n- ìƒˆë¡œìš´ handlerì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì˜ ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n\n### <mark>2. Command</mark>\n\n![command](/images/command.jpeg)\n\n**ëª¨ë“  requestë¥¼ í•˜ë‚˜ì˜ queueì— ì €ì¥í•˜ê³ , ì²˜ë¦¬ìëŠ” queueì˜ ìˆœì„œì— ë”°ë¼ì„œ, requestë¥¼ ì²˜ë¦¬í•˜ëŠ” patternì…ë‹ˆë‹¤.** ì´ëŸ¬í•œ ë°©ì‹ì€ requestë¥¼ ë§ˆì¹˜ í•˜ë‚˜ì˜ method paratemerë¡œ ë°›ì•„ë“¤ì´ë„ë¡ í•˜ê³ , requestì˜ ì‹¤í–‰ì„ queueë¡œ ê´€ë¦¬í•¨ìœ¼ë¡œì¨, ì‰½ê²Œ ë˜ëŒë¦¬ê¸° ê¸°ëŠ¥ë„ ì§€ì›í•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì‰½ê²Œ ì˜ˆë¥¼ ë“¤ë©´, ì‹ë‹¹ì—ì„œ ì›¨ì´í„°ëŠ” ì£¼ë¬¸ì„ ë°›ì•„ì„œ, ì˜ìˆ˜ì¦ì„ ìˆœì„œì— ë”°ë¼ì„œ order boardì— ë¶™ì´ë©´, ì£¼ë°©ì¥ì€ ì´ë¥¼ ë³´ê³ , ìˆœì„œì— ë”°ë¼ì„œ ìš”ë¦¬ë¥¼ ë‚´ë³´ë‚´ëŠ” í˜•ì‹ì´ë¼ê³  ë³´ë©´ ë˜ê² ìŠµë‹ˆë‹¤.\n\nêµ¬í˜„ ì‹œì—ëŠ” Commandë¼ëŠ” Interfaceë¥¼ êµ¬í˜„í•˜ëŠ” ê°ê°ì˜ Command classë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œ ê° CommandëŠ” ìƒì„± ì‹œì— receiverë¥¼ ì „ë‹¬ë°›ì•„ì„œ, í˜¸ì¶œ ì‹œì— ì´ë¥¼ Receiverì—ê²Œ ì „ë‹¬í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³ , Command Interfaceë¥¼ í˜¸ì¶œí•˜ëŠ” Invokerë¥¼ ì„ ì–¸í•´ì¤ë‹ˆë‹¤.\n\n---\n\nCommandì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- Command ë‹¨ìœ„ë¡œ classë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ì—°ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ Commandì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n- ë˜ëŒë¦¬ê¸°ì™€ ë‹¤ì‹œ ì¬ìƒ ë“±ì˜ ë™ì‘ì˜ êµ¬í˜„ì´ ì‰½ìŠµë‹ˆë‹¤.\n\n### 3. Iterator\n\n![iterator](/images/iterator.jpeg)\n**ë‚´ë¶€ì˜ êµ¬í˜„ë¬¼ì„ ë“¤ì–´ë‚´ì§€ ì•Šì€ ìƒíƒœì—ì„œ êµ¬ì„±ìš”ì†Œë¥¼ ìˆœí™˜í•˜ê¸° ìœ„í•´ ê³ ì•ˆëœ patternì…ë‹ˆë‹¤.**\n\nê¸°ë³¸ì ìœ¼ë¡œëŠ” iteratorëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìš”ì†Œë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.\n\n1. í˜„ì¬ ìì‹ ì˜ êµ¬ì„±ìš”ì†Œë¥¼ retuerní•˜ëŠ” method\n2. ë‹¤ìŒ iteratorë¥¼ ë°˜í™˜í•˜ëŠ” method\n3. ë‹¤ìŒ iteratorê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ ì²´í¬í•˜ëŠ” method\n\ní•´ë‹¹ objectë¥¼ í†µí•´ì„œ ì „ì²´ êµ¬ì¡°ë¥¼ ìˆœí™˜í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ì£¼ìš” ì˜ˆì‹œëŠ” file ì…ì¶œë ¥ì„ ì˜ˆë¥¼ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€ê²Œ while ë¬¸ì„ í†µí•´ì„œ ë” ì´ìƒ ì½ì„ ë¬¸ìê°€ ì—†ì„ ë•Œê¹Œì§€ line ë‹¨ìœ„ë¡œ ë°›ì•„ì˜¤ë©°, nextë¥¼ í˜¸ì¶œí•˜ëŠ” ì‹ì˜ êµ¬í˜„ì„ ë§ì´ ë³´ì•˜ì„ ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ëŠ” ë‘ ê°€ì§€ë¡œ ë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n1. object ë‚´ì˜ ìì„¸í•œ êµ¬í˜„ì„ ê°ì¶”ê¸° ìœ„í•´ì„œ\n2. í•„ìš”ì— ë”°ë¼ ì—¬ëŸ¬ iteratorë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ\n\nëŒ€ê²Œ objectê°€ í•˜ë‚˜ ì´ìƒì˜ ë™ì¼ objectë¥¼ í¬í•¨í•˜ê²Œ ëœë‹¤ë©´, ì´ objectë¥¼ ìˆœí™˜í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ì¡´ì¬í•˜ê²Œ ë©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ treeë¥¼ êµ¬í˜„í–ˆë‹¤ê³  í–ˆì„ ë•Œ, ê¸°ë³¸ì ìœ¼ë¡œ depth first search, breadth first searchì„ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ì„œ íš¨ìœ¨ì ì¸ ë°©ì‹ì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ê°ê¸° ë‹¤ë¥¸ ìˆœí™˜ ë°©ì‹ì„ ì§€ì›í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\n\n---\n\niteratorì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- Iterator ê° ê°ì— í•„ìš”ë¡œ í•˜ëŠ” algorithmì„ êµ¬í˜„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ iteratorì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n- objectë¡œë¶€í„° ìƒì„±ëœ ê° iteratorëŠ” ì„œë¡œ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- í•˜ì§€ë§Œ, í•´ë‹¹ êµ¬í˜„ì€ ë‹¤ë£¨ê³ ì í•˜ëŠ” ë°ì´í„°ì˜ ì–‘ì´ ì ì€ ê²½ìš° ì§€ë‚˜ì¹  ìˆ˜ë„ ìˆê³ , ì§ì ‘ ì ‘ê·¼í•˜ëŠ” ê²ƒë³´ë‹¤ ì†ë„ê°€ ëŠë¦´ ìˆ˜ ë°–ì— ì—†ìŠµë‹ˆë‹¤.\n\n### 4. Mediator\n\n![mediator](/images/mediator.jpeg)\n\nobject ê°„ì˜ í˜¼ë€ìŠ¤ëŸ¬ìš´ ì˜ì¡´ì„±ì„ ì¤„ì´ê¸° ìœ„í•´ì„œ ê³ ì•ˆëœ patternìœ¼ë¡œ, **object ê°„ì˜ ì§ì ‘ì ì¸ ì‚¬ìš©ì„ ì œí•œí•˜ê³ , mediatorë¼ëŠ” ì¤‘ê³„ìë¥¼ í†µí•´ì„œë§Œ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” pattern**ì…ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ë””ì–‘í•œ object ê°„ì˜ communicationì„ ì¶”ì¶œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì—, object ë³¸ì—°ì˜ ì‘ì—…ì— ì§‘ì¤‘í•˜ì—¬ í¸ë¦¬í•˜ê³  ìœ ì§€í•˜ê¸° ì‰½ê²Œ ë§Œë“­ë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ mediatorë¥¼ ì¶”ê°€í•  ë•Œ, ê¸°ì¡´ codeì˜ ë³€ê²½ì´ í•„ìš” ì—†ìŠµë‹ˆë‹¤. (Open/Close)\n- ê° Object ê°„ì˜ ì˜ì¡´ì„±ì„ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê°œë°œì´ ì§„í–‰ë ìˆ˜ë¡ mediatorê°€ ì „ì²´ ì‹œìŠ¤í…œì„ ê´€ë¦¬í•˜ëŠ” a God Objectê°€ ë˜ê³ , mediatorë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  objectê°€ ì´ì— ì˜ì¡´ì„±ì´ ìƒê¸°ê²Œ ë©ë‹ˆë‹¤.\n\n### 5. Memento\n\n![memento](/images/memento.jpeg)\n\nobjectì˜ ìƒíƒœ ë³€ê²½ì— ì´ì „ ìƒíƒœê°€ í° ì˜í–¥ì„ ë¯¸ì¹˜ê±°ë‚˜ historyì— ëŒ€í•œ êµ¬í˜„ì´ í•„ìš”í•œ ê²½ìš° êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. **objectì˜ êµ¬ì²´ì ì¸ êµ¬í˜„ì— ëŒ€í•œ ë‚´ìš©ì„ ì œì™¸í•˜ê³ , ì´ì „ ìƒíƒœë¥¼ ì €ì¥í•˜ê³ , í•„ìš”ì— ë”°ë¼ ì´ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ëŠ” pattern**ì…ë‹ˆë‹¤.\n\nêµ¬í˜„ì„ í•˜ê¸° ìœ„í•´ì„œëŠ”, ë³¸ë˜ì˜ objectë¥¼ ê·¸ëŒ€ë¡œ ë‘ê³ , í•„ìš”ë¡œ í•˜ëŠ” private variablesë¥¼ í¬í•¨í•˜ëŠ” mementoë¥¼ êµ¬í˜„í•˜ì—¬ stateë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” methodë¥¼ í¬í•¨í•˜ê²Œ í•´ì„œ, ì´ mementoë“¤ë§Œ caretakerë¼ëŠ” objectì—ì„œ listí˜•íƒœì˜ historyë¡œ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n\n---\n\nmementoì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- ê¸°ì¡´ objectì˜ encapsulationì„ ìœ ì§€í•˜ë©´ì„œ, ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê¸°ì¡´ codeë¥¼ ê·¸ëŒ€ë¡œ ìœ ì§€í•œ ì±„ë¡œ caretakerë¥¼ í†µí•´ì„œ, history logicì„ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, mementoë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•œ ì¶”ê°€ì ì¸ ê³µê°„ì´ í•„ìš”í•˜ë©°, ì˜¤ë˜ëœ ë°ì´í„° ì‚­ì œë¥¼ ìœ„í•œ ì›ë³¸ì„ í–¥í•œ ì¶”ì ì´ í•„ìš”ë¡œ ë©ë‹ˆë‹¤.\n\n### <mark>6. Observer</mark>\n\n![observer](/images/observer.jpeg)\n\nê°€ì¥ ë§ì´ ì“°ì´ë©´ì„œ, ì¤‘ìš”í•œ pattern ì¤‘ì— í•˜ë‚˜ë¼ê³  ìƒê°í•©ë‹ˆë‹¤. **subscription ë¡œì§ì„ ì •ì˜í•˜ê³ , subscriptionì„ ìˆ˜í–‰í•œ ëª¨ë“  objectì—ê²Œ íŠ¹ì • eventì˜ ë°œìƒì„ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.**\n\nì¦‰, objectì—ì„œ íŠ¹ì • eventê°€ ë°œìƒí•˜ë©´, ì´ë¥¼ ê³„ì†í•´ì„œ broadcasting í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ êµ¬ë…í•˜ê³  ìˆëŠ” ê° objectê°€ ì´ì— ë”°ë¥¸ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\nêµ¬í˜„ì„ í•˜ê¸° ìœ„í•´ì„œëŠ”,\n\nCommand Patternê³¼ êµ‰ì¥íˆ ìœ ì‚¬í•˜ë‹¤ê³ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Command Patternì€ Queueì— Commandë¥¼ ì°¨ê³¡ì°¨ê³¡ ìŒ“ì•„ë‘ê³ , ì´ë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ì›í•˜ëŠ” Objectê°€ ì´ë¥¼ ì°¾ì•„ê°€ëŠ” ë°©ì‹ì´ë¼ë©´, Observer Patternì€ ì €ì¥í•˜ê¸°ë³´ë‹¤ëŠ” ì´ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” Objectì—ê²Œ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ìƒˆë¡œìš´ Subscriber, Publisherê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n- ì‹¤í–‰ ì¤‘ì— objectê°„ì˜ ê´€ê³„ë¥¼ ìƒì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, Subscriber ê°„ì˜ ìˆœì„œë¥¼ ì •ì˜í•˜ê±°ë‚˜ ê° eventì˜ ìˆœì„œë¥¼ ì—„ë°€íˆ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ë³„ë„ì˜ êµ¬í˜„ì²´ë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.\n\n### 7. State\n\n![state](/images/state.jpeg)\n\n**objectì˜ ë‚´ë¶€ ìƒíƒœê°€ ë³€í™”í•  ë•Œë§ˆë‹¤ ë™ì‘ì„ ë°”ê¾¸ë„ë¡ í•˜ëŠ” patternì…ë‹ˆë‹¤.** ë§ˆì¹˜ objectê°€ ì´ê²ƒì˜ classë¥¼ ë°”ê¾¸ëŠ” ê²ƒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆëŠ” ì˜ˆì‹œê°€ ê²Œì‹œê¸€ ì‘ì„±ì´ë‹¤. ì—„ê²©í•œ ì ˆì°¨ë¥¼ ë”°ë¥´ëŠ” ê¸€ ì‘ì„±ì—ëŠ” ë‹¤ìŒ ì„¸ ê°€ì§€ì˜ ê³¼ì •ì„ ê±°ì¹˜ê²Œ ë©ë‹ˆë‹¤.\n\n1. ì œì¶œ ì „\n2. ì œì¶œ ì™„ë£Œ (ê²€í†  ì¤‘)\n3. ë°°í¬ (ì—…ë¡œë“œ ì™„ë£Œ)\n\nê° ë‹¨ê³„ë§ˆë‹¤ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” methodì™€ ê° methodì˜ ë™ì‘ì´ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ë³„ë„ì˜ classë¡œ ë‚˜ëˆ„ì§€ ì•Šê³ , í•˜ë‚˜ì˜ classë¡œ ë§Œë“¤ë©´ì„œ stateë¥¼ í¬í•¨í•˜ë„ë¡ í•¨ìœ¼ë¡œì¨, ì´ë¥¼ ë‚´ë¶€ì—ì„œ control í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” patternì…ë‹ˆë‹¤.\n\nêµ¬í˜„ ì‹œì—ëŠ” ê° Stateë¥¼ ë³„ë„ì˜ Classë¡œ ë¶„ë¦¬í•˜ê³ , ê·¸ ë‚´ë¶€ì—ì„œ ë³€ê²½ë˜ëŠ” methodë¥¼ ì§ì ‘ êµ¬í˜„í•˜ë„ë¡ í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, ì‹¤ì œ stateë¥¼ í¬í•¨í•œ ì›ë³¸ classëŠ” ì´ stateì— ì •ì˜ëœ methodë¥¼ í˜¸ì¶œí•˜ë„ë¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n---\n\nstateì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ë³„ë„ì˜ stateë¥¼ classë¡œ ë¶„ë¦¬í•˜ê¸° ë•Œë¬¸ì—, ìœ ì—°í•œ êµ¬ì¡°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (Single Responsibility)\n- ìƒˆë¡œìš´ stateì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ì£¼ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n\n### 8. Strategy\n\n![strategy](/images/strategy.jpeg)\n\në™ì¼í•œ methodì— ëŒ€í•´ì„œ ì—¬ëŸ¬ algorithmì„ ì •ì˜í•˜ê³ , ê°ê°ì„ ë³„ë„ì˜ classë¡œ ë‚˜ëˆ„ì–´ ìƒí˜¸ í˜¸í™˜ì´ ê°€ëŠ¥í•˜ë„ë¡ í•˜ëŠ” patternì…ë‹ˆë‹¤.\n\n**ì¦‰, objectì˜ method ìì²´ë¥¼ ë³„ë„ì˜ interfaceë¡œ ë¶„ë¦¬í•˜ëŠ” ë°©ì‹ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.**Â ì•ì„œ ë³´ì•˜ë˜ stateëŠ” context(ë¬¸ë§¥)ì— ë”°ë¼ì„œ, ìƒíƒœê°€ ë°”ë€Œì§€ë§Œ Strategy Patternì—ì„œëŠ” í–‰ìœ„ ìì²´ê°€ ë°”ë€ë‹¤ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤.\n\nëŒ€ê²Œ ê²Œì„ì—ì„œ ì‰½ê²Œ ì˜ˆì‹œë¥¼ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. playerì˜ skillì„ interfaceí™” ì‹œí‚¤ê³ , í•´ë‹¹ ë™ì‘ì— ë”°ë¥¸ damageì™€ mp ë³€í™” ë“±ì„ ê° skillë§ˆë‹¤ ì§ì ‘ ê³„ì‚°í•˜ì—¬ player objectë¡œ ì „ë‹¬í•  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ë©´ ì‰½ìŠµë‹ˆë‹¤.\n\n---\n\nstrategyì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ì‹¤í–‰ ì¤‘ì˜ íŠ¹ì • strategyë¥¼ ì„ íƒí•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ê° strategyì— ëŒ€í•œ ìì„¸í•œ êµ¬í˜„ì„ ê°ì¶œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ëŒ€ê²Œ ìƒì† í˜•íƒœë¥¼ ëŒ€ì²´í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n- ìƒˆë¡œìš´ strategyì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì— ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Open/Close)\n\n### 9. Template Method\n\n![templateMethod](/images/templateMethod.jpeg)\n\n**algorithmì˜ skeletonì„ ìƒìœ„ classì— ì •ì˜í•˜ê³ , ì „ì²´ì ì¸ êµ¬ì¡°ëŠ” ë°”ê¾¸ì§€ ì•Šìœ¼ë©´ì„œ ê° ë‹¨ê³„ì— ëŒ€í•œ êµ¬í˜„ì„ override í•˜ëŠ” patternì…ë‹ˆë‹¤.**\n\në”°ë¼ì„œ, ì „ê³µê³¼ëª© ê³¼ì œë¥¼ í•˜ë‹¤ ë³´ë©´ êµìˆ˜ë‹˜ë“¤ì´ skeleton ì½”ë“œë¥¼ ì¤€ë‹¤ê³  í–ˆì„ ë•Œ, ëŒ€ê²Œ êµ¬ì¡°ë§Œ ìˆê³ , ê° í•¨ìˆ˜ì˜ ë‚´ë¶€ê°€ ë¹„ì–´ ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë˜ ê±° ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ classë¥¼ inherit í•˜ì—¬ êµ¬ì²´ì ì¸ êµ¬í˜„ì„ í•˜ëŠ” ì‹ìœ¼ë¡œ classë¥¼ ë§Œë“¤ë©´ ë©ë‹ˆë‹¤.\n\n---\n\ntemplate methodì˜ íŠ¹ì§•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n\n- êµ¬í˜„ì˜ ë‚´ìš©ì„ ì¤„ì´ê³ , ì¤‘ë³µë˜ëŠ” ì½”ë“œì˜ ì‚¬ìš©ì„ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n- ê·¸ëŸ¬ë‚˜, skeletonì— ì˜í•œ ì œí•œìœ¼ë¡œ ë¶ˆê°€í”¼í•˜ê²Œ codeì˜ ë³€ê²½ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### 10. Visitor\n\n![visitor](/images/visitor.jpeg)\n\n**íŠ¹ì • objectì— ì ‘ê·¼í•˜ë ¤ëŠ” objectì— ë”°ë¼ ë³„ë„ì˜ algorithmì„ ì ìš©í•˜ëŠ” patternì…ë‹ˆë‹¤.**\n\nì¦‰, ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” objectë¥¼ í•˜ë‚˜ì˜ interfaceë¡œ ì¶”ìƒí™”í•˜ê³ , ê° objectëŠ” ì´ë¥¼ ì‚¬ìš©í•  client(visitor)ë¥¼ í—ˆìš©í•  ê²ƒì¸ì§€ ê·¸ë¦¬ê³  ì–´ë–¤ algorithmì„ ìˆ˜í–‰í•  ê²ƒì¸ì§€ë¥¼ ì •ì˜í•´ë‘¡ë‹ˆë‹¤. ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜ˆì‹œëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Elementì˜ ì¢…ë¥˜ê°€ ë§¤ìš° ë‹¤ì–‘í•˜ë©° ê³„ì†í•´ì„œ ì¶”ê°€ë  ê°€ëŠ¥ì„±ì´ ë†’ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ë ‡ì§€ë§Œ, Visitorì˜ ì¶”ê°€ëŠ” ë§¤ìš° ì–´ë µê¸° ë•Œë¬¸ì— ì´ì— ìœ ì˜í•´ì•¼ í•©ë‹ˆë‹¤.\n\n---\n\nì—¬ê¸°ì„œ adapterì˜ íŠ¹ì§•ì„ ì‚´í´ë³´ê³  ê°‘ì‹œë‹¤.\n\n- ìƒˆë¡œìš´ algorithmì˜ ì¶”ê°€ê°€ ê¸°ì¡´ codeì˜ ë³€ê²½ì—†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. (Open/Close)\n- ë™ì¼í•œ class ë‚´ë¶€ì—ì„œ ë™ì¼í•œ ë™ì‘ì„ ì—¬ëŸ¬ versionìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆì–´ ìœ ì—°í•©ë‹ˆë‹¤. (Single Responsibility)\n- ê·¸ëŸ¬ë‚˜, visitorì˜ ì¶”ê°€ëŠ” ê¸°ì¡´ algorithmì˜ ìˆ˜ì •ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n## Reference\n\n- Design Patterns: Elements of reusable object oriented software.\n- Refactoring GURU :Â [https://refactoring.guru/design-patterns/structural-patterns](https://refactoring.guru/design-patterns/structural-patterns)\n- Thumbnail : Photo by [MagicPattern](https://unsplash.com/es/@magicpattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/design-pattern?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"design-pattern-4","date":"2022-03-10 11:22","title":"[Design Pattern] 4. Behavioral Pattern","category":"Tech","tags":["DesignPattern","CommandPattern","CoRPattern","MediatorPattern","MementoPattern","ObserverPattern","StatePattern","StrategyPattern","Template\"MethodPattern\"","VisitorPattern"],"desc":"Algorithmê³¼ object ê°„ì˜ ì±…ì„ ë¶„ë°°ì— ê´€í•œ patternì…ë‹ˆë‹¤.ì¦‰, objectì˜ ì‚¬ìš© ëª©ì ì— ë”°ë¼ì„œ methodë¥¼ ì •ì˜í•  ë•Œ, ë§ì´ ì‚¬ìš©ë˜ëŠ” êµ¬í˜„ patternì„ ì˜ë¯¸í•©ë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/design-pattern.jpg"},{"content":"\n## Intro\n\nDocker Swarmì„ docker stackì„ ì´ìš©í•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ê²Œ ëœë‹¤ë©´, ë¬´ì—‡ì´ ìƒì„±ë˜ëŠ”ê°€? ìš°ë¦¬ëŠ” ì„œë¹„ìŠ¤ê°€ ìƒì„±ë˜ê¸°ë„ ì „ì— networkê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ê°€ ìˆë‹¤. containerì™€ containerê°„ ê·¸ë¦¬ê³ , hostë¥¼ í†µí•´ ì™¸ë¶€ internetí™˜ê²½ì— containerë¥¼ ì—°ê²° ì‹œí‚¤ëŠ” ëª¨ë“  ê³¼ì •ì„ ì•Œì•„ë³´ì.\n\nDockerë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´, hostì™€ í†µì‹ ì„ ìœ„í•´ ì™¸ë¶€ë¡œ portë¥¼ ì—´ì–´ì£¼ëŠ” ê²ƒê³¼ container ê°„ì˜ í†µì‹ ì„ í—·ê°ˆë ¤ í•˜ëŠ” ì‚¬ëŒë“¤ì´ ìƒê°ë³´ë‹¤ ë§ì€ ê²ƒ ê°™ë‹¤. ì‹¬ì§€ì–´ëŠ” containerê°„ í†µì‹ ì„ ìœ„í•´ì„œ localhostë¡œ ì •ë³´ë¥¼ ì£¼ê³ ë°›ì„ë ¤ê³  í•˜ëŠ” ëª¹ì“¸ ì‹œë„ë¥¼ í•˜ëŠ” ê´€ê²½ë„ ëª‡ëª‡ ë´ì™”ë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•œ ë²ˆ Dockerì˜ networkì— ëŒ€í•´ì„œ í•œ ë²ˆ ê³µë¶€í•´ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.\n\ní•´ë‹¹ ì°¨ì‹œì—ì„œëŠ” ìš°ì„  ì „ì²´ì ì¸ docker networkë¥¼ ì„¤ëª…í•˜ëŠ” ê¸°ë³¸ì ì¸ í‚¤ì›Œë“œë¥¼ ì•Œì•„ë³¼ ê²ƒì´ê³ ,\n\n2 ì°¨ì‹œì—ì„œëŠ” ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” docker network driverë¥¼ ì•Œì•„ë³¼ ê²ƒì´ê³ ,\n\n3 ì°¨ì‹œì—ì„œëŠ” libnetworkì˜ í•µì‹¬ ê¸°ëŠ¥ ì¤‘ service discovery, load balancingì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ë‹¤.\n\n## Docker Networking Base\n\nìš°ë¦¬ê°€ ê¸°ì–µí•´ì•¼ í•  ê²ƒì€ CNM, libnetwork, Driver ì´ë ‡ê²Œ 3ê°€ì§€ë‹¤. ê° ê°ì´ ë¬´ì—‡ì¸ì§€ëŠ” ì°¨ë¡€ì°¨ë¡€ ì•Œì•„ë³´ì.\n\n### Container Network Model (CNM)\n\ncontainerê°„ì˜ networkë¥¼ êµ¬í˜„í•˜ê¸° ìœ„í•œ designì„ ì œì‹œí•œ ë‚´ìš©ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ideaì¼ ë¿ì…ë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ í•˜ìœ„ ë§í¬ë¥¼ í†µí•´ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n[ğŸ”— Github - moby/libnetwork](https://github.com/moby/libnetwork/blob/master/docs/design.md)\n\ní•˜ì§€ë§Œ, ì´ë¥¼ ì¢€ ë” ìš”ì•½í•´ë´…ì‹œë‹¤. ì¼ë‹¨ í•µì‹¬ ìš”ì†Œ 3ê°€ì§€ë¥¼ ë¨¼ì € ì´í•´í•´ë´…ì‹œë‹¤.\n\n- **Sandbox** : ê³ ë¦½ëœ í•˜ë‚˜ì˜ Network ê³µê°„ì„ ì˜ë¯¸í•©ë‹ˆë‹¤. í•´ë‹¹ ê³µê°„ì—ëŠ” ehternet interfaceë‚˜ port ê·¸ë¦¬ê³  routing tableê°™ì€ êµ¬í˜„ì´ í¬í•¨ë©ë‹ˆë‹¤.\n- **Endpoints**Â : Virtual Networkë¥¼ ì„œë¡œ ì—°ê²°í•˜ëŠ” interfaceì˜ ì—­í• ì…ë‹ˆë‹¤. (vethë¼ê³ ë„ ë¶ˆë¦½ë‹ˆë‹¤.) CNMì—ì„œëŠ” Sandbox ë‚´ë¶€ì—ì„œ ì´ì™€ Networkë¥¼ ì—°ê²°í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.\n- **Networks**Â : Virtual Switchë¡œ ì—¬ê¸°ë©´ ë©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ì—¬ëŸ¬ ê°œì˜ endpointsë¥¼ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì ì´ì œ ì´ë ‡ê²Œ 3ê°œì˜ ë„¤íŠ¸ì›Œí¬ë¥¼ ì •ë¦¬í•˜ë©´, ì´ì œ Container ë‚´ë¶€ì— Sandboxê°€ ì¡´ì¬í•˜ê³ , ê·¸ Sandbox ë‚´ë¶€ì˜ endpointsë¥¼ ì—°ê²°í•˜ëŠ” Networkë¥¼ í†µí•´ì„œ ê²°ë¡ ì ìœ¼ë¡œ Container ê°„ì˜ ì—°ê²°ì„ ìˆ˜í–‰í•˜ê²Œ ë©ë‹ˆë‹¤.\n\n![cnm](/images/cnm.jpeg)\n\n### libnetwork\n\nìœ„ì—ì„œ ì´ì•¼ê¸°í•œ ê²ƒì²˜ëŸ¼ CNMì€ ë‹¨ìˆœíˆ ideaì¼ ë¿ì…ë‹ˆë‹¤. ì´ë¥¼ êµ¬í˜„í—ˆì—¬ í‘œì¤€í™”ëœ ê²ƒì´ ë°”ë¡œ libnetworkë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. ì´ëŠ” Goë¥¼ ì´ìš©í•˜ì—¬ ì‘ì„±ëœ open sourceë¡œ ìœ„ì—ì„œ ì œì‹œí•œ ë§í¬ë¥¼ í†µí•´ì„œ í•´ë‹¹ open sourceì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìœ„ì—ì„œ ì–¸ê¸‰í•œ CNMì„ êµ¬í˜„í•˜ì˜€ê³ , ì¶”ê°€ì ìœ¼ë¡œ service discovery, ingress-based container load balancing, network control plane ë° management plane ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ë‹¤. í˜„ì¬ì—ëŠ” dockerì—ì„œ network êµ¬í˜„ì— ì‚¬ìš©ëœë‹¤.\n\n\\* control & management plane : ì§ì ‘ì ìœ¼ë¡œ networkì˜ íë¦„ì„ ì œì–´í•˜ëŠ” ë‹¨ê³„ë¡œ, routingê³¼ ê°™ì€ ì œì–´ë¥¼ ìˆ˜í–‰í•œë‹¤.\n\n### Drivers\n\nì¦‰, libnetworkê°€ ì „ì²´ì ì¸ networkì˜ control planeê³¼ management plane ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ì˜€ë‹¤ë©´, driverëŠ” data planeì„ êµ¬í˜„í•œë‹¤. ì¦‰, ì§ì ‘ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤. ì´ëŸ¬í•œ ê¸°ëŠ¥ë“¤ì€ dockerì—ì„œ ì—¬ëŸ¬ ê°œì˜ driverë¼ëŠ” submoduleì„ í†µí•´ì„œ êµ¬í˜„í•˜ì˜€ë‹¤. docker pubë¥¼ í†µí•´ì„œ defaultë³´ë‹¤ ë‚˜ì•„ê°„ driver ì—­ì‹œ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ ê¸°ë³¸ì ìœ¼ë¡œ, host, bridge, overlay, ipvlan, macvlan ë“±ì„ í¬í•¨í•˜ê³  ìˆë‹¤.\n\nì—¬ê¸°ê¹Œì§€ê°€ docker networkì— ëŒ€í•œ overviewì´ë‹¤. ë‹¤ìŒ ì°¨ì‹œì— ê³„ì†...\n\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n- Tumbnail : Photo by [Michael](https://unsplash.com/@michael75?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/cargo-ships?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"docker-network-1","date":"2021-07-10 21:21","title":"[Docker] Network(1)","category":"Tech","tags":["Docker","Container","Network"],"desc":"Docker Swarmì„ docker stackì„ ì´ìš©í•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ê²Œ ëœë‹¤ë©´, ë¬´ì—‡ì´ ìƒì„±ë˜ëŠ”ê°€? ìš°ë¦¬ëŠ” ì„œë¹„ìŠ¤ê°€ ìƒì„±ë˜ê¸°ë„ ì „ì— networkê°€ ìƒì„±ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ê°€ ìˆë‹¤. containerì™€ containerê°„ ê·¸ë¦¬ê³ , hostë¥¼ í†µí•´ ì™¸ë¶€ internetí™˜ê²½ì— containerë¥¼ ì—°ê²° ì‹œí‚¤ëŠ” ëª¨ë“  ê³¼ì •ì„ ì•Œì•„ë³´ì.Dockerë¥¼ ì‚¬ìš©í•˜ë‹¤ë³´ë©´, hostì™€ í†µì‹ ì„ ìœ„í•´ ì™¸ë¶€ë¡œ portë¥¼ ì—´ì–´ì£¼ëŠ” ê²ƒê³¼ container ê°„ì˜ í†µì‹ ì„ í—·ê°ˆë ¤ í•˜ëŠ” ì‚¬ëŒë“¤ì´ ìƒê°ë³´ë‹¤ ë§ì€ ê²ƒ ê°™ë‹¤. ì‹¬ì§€ì–´ëŠ” containerê°„ í†µì‹ ì„ ìœ„í•´ì„œ localhostë¡œ ì •ë³´ë¥¼ ì£¼ê³ ë°›ì„ë ¤ê³  í•˜ëŠ” ëª¹ì“¸ ì‹œë„ë¥¼ í•˜ëŠ” ê´€ê²½ë„ ëª‡ëª‡ ë´ì™”ë‹¤.ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•œ ë²ˆ Dockerì˜ networkì— ëŒ€í•´ì„œ í•œ ë²ˆ ê³µë¶€í•´ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.í•´ë‹¹ ì°¨ì‹œì—ì„œëŠ” ìš°ì„  ì „ì²´ì ì¸ docker networkë¥¼ ì„¤ëª…í•˜ëŠ” ê¸°ë³¸ì ì¸ í‚¤ì›Œë“œë¥¼ ì•Œì•„ë³¼ ê²ƒì´ê³ ,2 ì°¨ì‹œì—ì„œëŠ” ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” docker network driverë¥¼ ì•Œì•„ë³¼ ê²ƒì´ê³ ,3 ì°¨ì‹œì—ì„œëŠ” libnetworkì˜ í•µì‹¬ ê¸°ëŠ¥ ì¤‘ service discovery, load balancingì— ëŒ€í•´ì„œ ì•Œì•„ë³´ê² ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Intro\n\nì €ë²ˆ ê¸€ì— ì´ì–´ì„œ ì´ë²ˆì—ëŠ” docker networkì˜ driverë“¤ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì„ ë‹¤ë£¨ê² ë‹¤.\n\n- bridge networks\n- overlay networks\n- host networking\n- IPVlan networks\n- MacVlan networks\n\n## Bridge Network\n\ncontainerê°„ì˜ í†µì‹ ì„ ìœ„í•´ì„œ í•„ìš”í•œ ê²ƒì´ bridge ë„¤íŠ¸ì›Œí¬ì´ë‹¤. í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ì£¼ì˜í•´ì•¼í•  ê²ƒì€ ì˜¤ì§, single hostì—ì„œë§Œ ë™ì‘í•œë‹¤ëŠ” ì ì´ë‹¤. ì¦‰, ë‹¤ë¥¸ docker hostì— ì¡´ì¬í•˜ëŠ” containerì™€ëŠ” ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, bridgeê°€ ë¬´ì—‡ì¸ê°€? ì´ëŠ” ë‘ ê°œì˜ network ì¥ì¹˜ë¥¼ ì—°ê²°í•˜ëŠ” L2 switchë¥¼ ë§í•œë‹¤. ì¦‰, containerë¥¼ ì—°ê²°í•˜ëŠ” ë„êµ¬ë¼ê³  ë³´ë©´ ë˜ê² ë‹¤. ì´ë¥¼ í†µí•´ì„œ ì—°ê²°ëœ containerëŠ” í•´ë‹¹ containerì˜ ëª¨ë“  portì— ì ‘ê·¼ì´ ê°€ëŠ¥í•´ì§„ë‹¤.\n\n![docker-bridge-network](/images/docker-bridge-network.png)\n\nìœ„ëŠ” `$ docker network ls`ë¥¼ ì…ë ¥í•˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆëŠ” ë‚´ìš©ì´ë‹¤. ìœ„ì— ì„¸ê°œëŠ” ì²˜ìŒë¶€í„° ëê¹Œì§€ dockerì— ì¡´ì¬í•˜ëŠ” default networkì…ë‹ˆë‹¤. hostëŠ” ì§ì ‘ì ìœ¼ë¡œ hostì— ì—°ê²°í•˜ëŠ” ê²½ìš°ì˜ networkì´ê³ ,(í›„ì— ì„¤ëª…í•©ë‹ˆë‹¤.) noneì€ ì•„ë¬´ ë„¤íŠ¸ì›Œí¬ì—ë„ ì—°ê²°ë˜ì§€ ì•Šì•„ ì™¸ë¶€ë¡œ ì–´ë–¤ trafficë„ ë³´ë‚´ì§€ ì•Šì„ containerë“¤ì´ ì†í•˜ê²Œ ëœë‹¤. ì—¬ê¸°ì„œ bridgeëŠ” default bridgeë¼ê³  ë¶ˆë¦¬ë©°, networkë¥¼ ì„¤ì •í•˜ì§€ ì•Šê³ , containerë¥¼ ìƒì„±í•˜ê²Œ ë˜ë©´ ê¸°ë³¸ì ìœ¼ë¡œ í•´ë‹¹ bridgeë¡œ ì—°ê²°ë˜ê²Œ ëœë‹¤. ì´ë¥¼ í†µí•´ì„œ container ê°„ì˜ ì—°ê²°ë„ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\ní•˜ì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œ ë‹¨ì¼ ê¸°ê¸°ì—ì„œ container ê°„ì˜ ì—°ê²°ì„ ìˆ˜í–‰í•  ë•Œì—ëŠ” bridgeë¥¼ ì§ì ‘ ìƒì„±í•˜ì—¬ ì—°ê²°í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. (ê·¸ ì´ìœ ëŠ” ë„ë©”ì¸ ë„¤ì„ ì„¤ì •ì„ ìë™ìœ¼ë¡œ í•´ì¤€ë‹¤ëŠ” ì ì—ì„œ ì´ì ì´ ìˆê¸° ë•Œë¬¸ -> [ğŸ”— ì°¸ê³ ](https://docs.docker.com/network/bridge/#differences-between-user-defined-bridges-and-the-default-bridge))\n\nì•„ë˜ëŠ” ì´ë¥¼ ì´ìš©í•œ ê°„ë‹¨í•œ ì˜ˆì‹œì´ë‹¤.\n\n```bash\n# bridge ìƒì„±\n$ docker network create -d bridge eui_bridge\n\n# container ìƒì„±\n$ docker container run -d --name c1 \\\n  -network eui_bridge \\\n  alpine sleep 1d\n  \n# container2 ìƒì„±\n$ docker container run -it --name c2 \\\n  -network eui_bridge \\\n  alpine sh\n   \n# pingì„ í†µí•´ c1ê³¼ ì—°ê²° ì—¬ë¶€ í™•ì¸\n$ ping c1\n```\n\nìœ„ì˜ ê³¼ì •ì„ ì²˜ìŒë¶€í„° ì„¤ëª…í•˜ìë©´,\n\n1. eui\\_bridgeë¼ëŠ” networkë¥¼ bridgeë¡œ ìƒì„±í•œë‹¤.\n2. containerì— eui\\_bridgeë¥¼ ì—°ê²°í•˜ê³ , alpine ì´ë¯¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìƒì„±í•œë‹¤. ì´ë•Œ ì‹œì‘ ì‹œì— sleepì„ í•˜ë£¨ ë™ì•ˆ ì‹œí–‰í•œë‹¤.(sleep í•˜ëŠ” ì´ìœ ëŠ” êº¼ì§€ì§€ ì•Šê²Œ í•˜ê¸° ìœ„í•¨)\n3. ë§ˆì°¬ê°€ì§€ë¡œ eui\\_bridgeì— ì—°ê²°í•˜ê³ , alpine ì´ë¯¸ì§€ë¡œ containerë¥¼ ìƒì„±í•œ í›„ì— shellì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n4. c2ì—ì„œ ì‹¤í–‰ëœ shellì—ì„œ c1ìœ¼ë¡œ pingì„ ì „ì†¡í•œë‹¤. (ì´ë•Œ ê°™ì€ network bridgeë¼ë¦¬ëŠ” container nameìœ¼ë¡œ domainì´ ìƒì„±ëœë‹¤.)\n\nì°¸ê³ ë¡œ ì—¬ê¸°ì„œ ê¸°ì–µí•´ì•¼í•  ê²ƒì´ ìˆë‹¤ë©´, bridgeëŠ” containerê°„ì˜ ì—°ê²°ì„ ìœ„í•œ ê²ƒì´ê³ , containerì˜ íŠ¹ì • portë¥¼ hostì™€ mappingí•˜ê³ ì í•  ë•Œì—ëŠ”Â `--publish`Â ë¥¼ í™œìš©í•´ì•¼ í•œë‹¤.\n\n```bash\n$ docker run -p 5000:80 nginx\n```\n\nì´ë¥¼ í†µí•´ì„œ hostì˜ 5000ë²ˆê³¼ containerì˜ 80ë²ˆ portë¥¼ ì—°ê²°í•  ìˆ˜ ìˆë‹¤.\n\n## Overlay Network\n\nìœ„ì—ì„œ ì„¤ëª…í•œ ê²ƒì´ ë‹¨ì¼ í˜¸ìŠ¤íŠ¸ ë‚´ë¶€ì—ì„œ container ê°„ì˜ ì—°ê²°ì´ì—ˆë‹¤ë©´, ì—¬ëŸ¬ hostê°€ ì¡´ì¬í•˜ëŠ” cluster í™˜ê²½ì—ì„œ dockerì˜ containerê°„ í†µì‹ ì„ ìœ„í•œ driverê°€ overlayì´ë‹¤. í˜„ì¬ì—ëŠ” docker swarmì„ í†µí•´ì„œ applicationì„ ì—¬ëŸ¬ hostì—ì„œ ì œê³µí•˜ëŠ” ê²½ìš°ì— ì‚¬ìš©í•˜ê²Œ ëœë‹¤.\n\në¨¼ì € ì›ë¦¬ë¥¼ ì•Œì•„ë³´ìë©´, VXLANì„ í™œìš©í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” L3 network ìƒìœ„ì—ì„œ ë‹¤ë¥¸ ë‘ ê¸°ê¸° ê°„ì— L2 í†µì‹ ì„ ì§€ì›í•˜ëŠ” ê²ƒì¸ë°, ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ë¥¸ nodeê°„ì— ì¡´ì¬í•˜ëŠ” container ë¼ë¦¬ë„ í†µì‹ í•  ìˆ˜ ìˆë„ë¡ í•  ìˆ˜ ìˆë‹¤. docker swarmì— ì˜í•´ì„œ ê´€ë¦¬ë˜ì–´ L3ë¡œ ì—°ê²°ëœ ë‘ nodeì˜ ìœ„ì—ì„œëŠ” VXLAN Tunnel EndPoint(VTEP)ì´ ê° ê° ì¡´ì¬í•œë‹¤. ì´ë“¤ì„ í†µí•´ì„œ, tunnelì´ í˜•ì„±ë˜ê³  í†µì‹ ì´ ê°€ëŠ¥í•´ì§€ëŠ”ë°, ê¸°ì¡´ì— containerì— ì¡´ì¬í•˜ê³  ìˆë˜ CNMì—ì„œ ì •ì˜í•œ Sandbox ì†ì— virtual switchê°€ ìƒì„±ë˜ê³  ì´ì™€ VTEPì´ ì—°ê²°ë˜ì–´ ë‹¤ë¥¸ ê¸°ê¸°ì— ìˆëŠ” containerê°„ì—ë„ í†µì‹ ì´ ê°€ëŠ¥í•´ì§€ëŠ” ê²ƒì´ë‹¤.\n\nì˜ˆì‹œë¥¼ ë“ ë‹¤ë©´, docker stackì„ í†µí•´ì„œ ì‹œìŠ¤í…œì„ êµ¬ì„±í•´ë³¸ ì ì´ ìˆë‹¤ë©´, containerë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œ networkê°€ ë¨¼ì € ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì´ë•Œ ìƒì„±ë˜ëŠ” ê²ƒì´ overlay ë„¤íŠ¸ì›Œí¬ë¡œ ì´ë¥¼ í†µí•´ì„œ ì—¬ëŸ¬ containerê°€ replicaê°€ ì–´ëŠ nodeì— ìƒê¸¸ì§€ í™•ì •í•  ìˆ˜ ì—†ìŒì—ë„ í†µì‹ ì„ ììœ ë¡­ê²Œ í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n## Host Networking\n\ní•´ë‹¹ ë°©ì‹ì€ dockerë¥¼ í•œ ë²ˆì´ë¼ë„ ì¨ë³¸ ì‚¬ëŒì´ë¼ë©´ ë‹¤ìŒ ëª…ë ¹ì–´ëŠ” ìµìˆ™í•  ê²ƒì´ë‹¤.\n\n```bash\n$ docker run -p 80:80 nginx\n```\n\nnginx imageë¥¼ ê¸°ë°˜ìœ¼ë¡œ containerë¥¼ ì‹¤í–‰ì‹œí‚¤ê³ , container ë‚´ë¶€ì˜ 80ë²ˆê³¼ hostì˜ 80ë²ˆ portë¥¼ mappingí•˜ê² ë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ containerëŠ” hostì˜ networkì— ê´€ì—¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\ní•˜ì§€ë§Œ, host networkingì„ ì´ìš©í•˜ê²Œ ë˜ë©´ container ë‚´ë¶€ì— network stackì´ ìƒì„±ë˜ì§€ ì•Šê³ , í•´ë‹¹ containerì˜ ëª¨ë“  network ì„¤ì •ì´ í•´ë‹¹ hostì˜ ì„¤ì •ì— ê·¸ëŒ€ë¡œ mappingë˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´ ì„±ëŠ¥ìƒì˜ ì´ì ì€ ìˆê² ì§€ë§Œ, ìƒë‹¹íˆ ì„¤ì •ì´ ë‚œì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.\n\n## IPVlan Network\n\nMAC addressì™€ IP adressë¥¼ ë¶€ì—¬í•˜ì—¬, ì‹¤ì œ ë„¤íŠ¸ì›Œí¬ì— containerë¥¼ ì§ì ‘ ì—°ê²°í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\nì¥ì ì€ ë³„ë„ì˜ port forwardingì´ë‚˜ bridgeë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ ë‹¹ì—°íˆ ë¹ ë¥´ì§€ë§Œ, NICë¥¼ ì´ìš©í•˜ê¸°ì— promiscuous modeë¥¼ opení•´ì•¼ í•œë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì´ëŠ” switchê°€ ë°ì´í„°ë¥¼ ì „ì†¡í•  ëŒ€ìƒì„ ì°¾ì§€ ì•Šê³ , ì—°ê²°ëœ ëª¨ë“  ëŒ€ìƒì—ê²Œ ë³´ë‚´ëŠ” ëª¨ë“œë¡œ, sniffingì— ì·¨ì•½í•˜ê³  ì´ ë•Œë¬¸ì— public cloud systemì—ì„œëŠ” ì´ë¥¼ ë§‰ì•„ ë†“ê¸°ì— ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤.\n\n![docker-ip-vlan](/images/docker-ip-vlan.png)\nì—¬ê¸°ê¹Œì§€ ë§í–ˆì„ ë•Œ, ì´í•´í–ˆë‹¤ë©´, ì´ë¯¸ ì„¤ì •í•˜ëŠ” ê²ƒì„ ì•Œì•„ë³´ëŸ¬ ë– ë‚˜ë©´ ë  ê²ƒì´ê³ , ì´í•´í•˜ì§€ ëª»í–ˆë‹¤ë©´, ì•„ë§ˆ ì“¸ ì¼ì´ ì—†ì„ ê²ƒì´ë‹ˆ ë„˜ì–´ê°€ì‹œë©´ ë  ê²ƒì´ë‹¤.\n\nìì„¸í•œ ì‚¬í•­ì€ ê³µì‹ í˜ì´ì§€ë¥¼ ì°¸ê³ í•˜ì.\n\n[ğŸ”— IPvlan networks](https://docs.docker.com/network/ipvlan/)\n\n## MacVlan Network\n\nipvlanê³¼ ë™ì¼í•˜ì§€ë§Œ ì°¨ì´ì ì€ MAC ì£¼ì†Œë¥¼ í• ë‹¹í•œë‹¤ëŠ” ì ì´ë‹¤. ê·¸ ì™¸ì—ëŠ” ë‹¤ë¥¼ ê²ƒì´ ì—†ë‹¤.\n\n[ğŸ”— macvlan networks](https://docs.docker.com/network/macvlan/)\n\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n","slug":"docker-network-2","date":"2021-07-11 00:04","title":"[Docker] Network(2)","category":"Tech","tags":["Docker","Container","Network"],"desc":"ì €ë²ˆ ê¸€ì— ì´ì–´ì„œ ì´ë²ˆì—ëŠ” docker networkì˜ driverë“¤ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì„ ë‹¤ë£¨ê² ë‹¤.- bridge networks- overlay networks- host networking- IPVlan networks- MacVlan networks","thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Intro\n\nì—¬íƒœê¹Œì§€ dockerì˜ driverë¥¼ í†µí•œ networking ê¸°ìˆ ì„ ì•Œì•„ë³´ì•˜ê³ , ì´ì œ libnetworkë¡œ 1/3ì—ì„œ ì œì‹œí–ˆë˜ ê¸°ë³¸ routingê³¼ ê°™ì€ ê¸°ëŠ¥ ì™¸ì— êµ¬í˜„ë˜ì–´ ìˆëŠ” ê¸°ëŠ¥ë“¤ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤.\n\n- service discovery\n- load balancing\n\n## Service discovery\n\nëª¨ë“  containerë“¤ê³¼ swarmì˜ ì„œë¹„ìŠ¤ë“¤ì´ ì´ë¦„ì„ í†µí•´ì„œ ê° ê°ì„ ì°¾ì„ ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤. DockerëŠ” ìì²´ì ìœ¼ë¡œ ë‚´ë¶€ì˜ DNS ì„œë²„ë¥¼ ì´ìš©í•˜ì—¬ ì´ë¥¼ ìˆ˜í–‰í•œë‹¤. ê³¼ì •ì„ ìš”ì•½í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. containerê°€ ì´ë¦„ì„ í†µí•´ì„œ íŠ¹ì • containerë¥¼ ì°¾ì•„ì•¼ í•¨ì„ ì¸ì‹í•œë‹¤.\n2. ë¨¼ì € Local ë‚´ë¶€ì—ì„œ ì´ì— ëŒ€í•œ ì •ë³´ë¥¼ ê°–ê³  ìˆëŠ”ì§€ë¥¼ íƒìƒ‰í•œë‹¤. -> ìˆë‹¤ë©´, ì¢…ë£Œ\n3. Docker DNS serverì— ì´ë¥¼ ìš”ì²­í•˜ëŠ” queryë¥¼ ì „ì†¡í•œë‹¤.\n4. Docker DNS serverëŠ” ëª¨ë“  containerì˜ nameê³¼ network alias(ë³„ì¹­)ë¥¼ ì•Œê¸° ë•Œë¬¸ì— ì´ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤.\n5. ì´ë•Œ, DNS serverëŠ” ë¨¼ì € ë™ì¼í•œ networkì— í•´ë‹¹ containerê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•œë‹¤. -> ì—†ë‹¤ë©´, ì™¸ë¶€ DNS serverë¡œ\n6. ì¡´ì¬í•œë‹¤ë©´, ì´ë¥¼ ìš”ì²­ì„ ë³´ë‚¸ resolverì—ê²Œ ì „ë‹¬í•˜ê³ , ì´ê²Œ ë‹¤ì‹œ containerë¡œ ì „ë‹¬ëœë‹¤.\n\n## Load balancing\n\ndocker swarmì€ ê¸°ë³¸ì ì¸ load balancerë¥¼ ì§€ì›í•˜ì—¬, ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ êµ¬í˜„ë˜ì–´ì§„ë‹¤.\n\n```bash\n$ docker service create \\\n  --name my-web \\\n  --publish published=8080,target=80 \\\n  --replicas 2 \\\n  nginx\n```\n\n![docker-ingress-network](/images/docker-ingress-network.png)\n\nì¦‰, ì–´ë””ë¡œ ìš”ì²­ì„ ë³´ë‚¸ë‹¤ê³ , í• ì§€ë¼ë„ load balancerëŠ” ì–´ë””ì— í•´ë‹¹ ì„œë¹„ìŠ¤ê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ íŒŒì•…í•˜ê³ , ì´ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§„ë‹¤. ë”°ë¼ì„œ, ì–´ëŠ ë…¸ë“œë¡œ ìš”ì²­ì„ ë³´ë‚´ë”ë¼ë„ ì •ìƒì ìœ¼ë¡œ ìš”ì²­ì´ ì „ë‹¬ë  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ Ingress load balancingì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n\në§Œì•½, íŠ¹ì • nodeë¡œ ì „ë‹¬ëœ ìš”ì²­ì€ í•´ë‹¹ nodeì— ìˆëŠ” containerë¡œ ì „ë‹¬ë˜ê¸°ë¥¼ ë°”ë€ë‹¤ë©´, hostëª¨ë“œë¥¼ ì´ìš©í•˜ì—¬ ì§„í–‰í•  ìˆ˜ë„ ìˆë‹¤.\n\nì—¬ê¸°ê¹Œì§€ê°€ networkì— ëŒ€í•œ ì „ë°˜ì ì´ ë‚´ìš©ì…ë‹ˆë‹¤.\n\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n","slug":"docker-network-3","date":"2021-07-11 00:40","title":"[Docker] Network(3)","category":"Tech","tags":["Docker","Container","Network"],"desc":"ì—¬íƒœê¹Œì§€ dockerì˜ driverë¥¼ í†µí•œ networking ê¸°ìˆ ì„ ì•Œì•„ë³´ì•˜ê³ , ì´ì œ libnetworkë¡œ 1/3ì—ì„œ ì œì‹œí–ˆë˜ ê¸°ë³¸ routingê³¼ ê°™ì€ ê¸°ëŠ¥ ì™¸ì— êµ¬í˜„ë˜ì–´ ìˆëŠ” ê¸°ëŠ¥ë“¤ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤.- service discovery- load balancing","thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Intro\n\ní•´ë‹¹ ê¸€ì€ Linuxì—ì„œ dockerë¥¼ ë™ì‘ì‹œí‚¨ë‹¤ëŠ” ê°€ì •í•˜ì— ì‘ì„±í•˜ì˜€ë‹¤. (Windowë„ ëŒ€ë¶€ë¶„ ë™ì¼í•˜ë‹¤ê³  í•œë‹¤.)\n\ndockerëŠ” ì—¬ëŸ¬ ê°œì˜ ë³´ì•ˆ ì •ì±…ì„ í¬í•¨í•œë‹¤.\n\nì´ë¥¼ í¬ê²Œ ëˆ„ê°€ ê´€ë¦¬í•˜ëŠëƒì— ë”°ë¼ì„œ ë‘ ê°œì˜ ë¶€ë¥˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.\n\n1. OS system (Linux)\n2. Docker\n\nì´ì „ ê°€ìƒí™”ì™€ ë°˜ê°€ìƒí™”ë¥¼ ë¹„êµí•œ ê¸€ì—ì„œ ë³´ì•˜ë“¯ì´ Container ê¸°ìˆ ì„ ê²°ê³¼ì ìœ¼ë¡œ ë°˜ê°€ìƒí™”ì— í•´ë‹¹í•˜ë©°, ì´ë¥¼ ìœ„í•´ì„œ OSì˜ ì§€ì›ì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ Linux ìì²´ì—ì„œ êµ¬í˜„í•´ì£¼ëŠ” ê²ƒì´ ì¡´ì¬í•˜ê³ , Dockerì—ì„œ Application ë‹¨ì—ì„œ êµ¬í˜„í•œ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì§€ëŠ” ê²ƒì´ë‹¤.\n\në¨¼ì €, Linuxì—ì„œ ì§€ì›í•˜ëŠ” ê°ì¢… securityì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤.\n\n## Linux's Security for Docker\n\nì „ì²´ì ì¸ ë””í…Œì¼ ì‚¬í•­ì€ ì •ë¦¬í•˜ì§€ ì•ŠëŠ”ë‹¤. í•´ë‹¹ ë‚´ìš©ì€ ê°„ë‹¨íˆ ì‚´í´ë³´ëŠ” ì •ë„ì´ë‹¤.\n\n### Namespaces\n\nnamespaceëŠ” container ê¸°ìˆ ì—ì„œ ë§¤ìš° í•µì‹¬ì ì¸ ìœ„ì¹˜ì— ì¡´ì¬í•œë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, OSë¥¼ ì—¬ëŸ¬ ê°œë¡œ ë‚˜ëˆ„ê³ , ë§ˆì¹˜ ì™„ì „íˆ ê³ ë¦½ëœ í˜•íƒœì˜ OSì²˜ëŸ¼ ëŠë¼ë„ë¡ ë§Œë“ ë‹¤. (í‚¤ì›Œë“œëŠ” isolation) ê·¸ë ‡ë‹¤ë©´ í•˜ë‚˜ì˜ host ë‚´ì—ì„œ ì–´ë–»ê²Œ ì—¬ëŸ¬ ê°œì˜ containerê°€ ì™„ë²½í•˜ê²Œ ë…ë¦½ë˜ì–´ ìˆë‹¤ê³  ëŠë‚„ ìˆ˜ ìˆê²Œ í•  ìˆ˜ ìˆì„ê¹Œ? ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì¢…ë¥˜ì˜ namespaceë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì„œ ê°€ëŠ¥í•˜ë‹¤.\n\n- **process ID (pid)** : processëŠ” tree í˜•íƒœë¡œ ì´ë£¨ì–´ì§€ê²Œ ëœë‹¤. ë”°ë¼ì„œ, í•˜ë‚˜ì˜ process (ì¦‰, PID 1)ì— ì˜í•´ì„œ ì—¬ëŸ¬ ê°œì˜ processê°€ ë™ì‘ì„ ì‹œì‘í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ëŸ°ë°, namespaceë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ì—¬ëŸ¬ ê°œì˜ ì™„ë²½í•˜ê²Œ ë…ë¦½ì ì¸ process treeë¥¼ êµ¬ì¶•í•˜ê²Œ ëœë‹¤.\n- **Network (net)** :Â ê° ê°ì˜ containerë§ˆë‹¤ network stackì„ êµ¬í˜„í•œë‹¤. ì¦‰, network interface ë¶€í„° ì‹œì‘í•´ì„œ, IP Address, port, routing table ë“±ì„ êµ¬ì¶•í•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.\n- **Filesystem / mount (mnt)** :ëª¨ë“  containerê°€ ê°ìì˜ root filesystemì„ ê°€ì§€ê³ , ë‹¤ë¥¸ ëª¨ë“  containerë“¤ì€ ì´ê²ƒì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.\n- **Inter process Communication(ipc)** : processê°„ì˜ í†µì‹ ì„ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” shared memoryë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë° ì´ ë˜í•œ ê³ ë¦½ì ìœ¼ë¡œ êµ¬í˜„ë˜ë„ë¡ í•œë‹¤.\n- **User** : ê° containerë§ˆë‹¤ ë‹¤ë¥¸ user groupì„ êµ¬ì¶•í•˜ê³  ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.\n- **Unix Time sharing (uts)** : hostnameì„ containerë§ˆë‹¤ ì œê³µí•˜ëŠ” ê²ƒìœ¼ë¡œ, ì´ë¥¼ í†µí•´ì„œ network ìƒì—ì„œ ipê°€ ì•„ë‹Œ hostnameìœ¼ë¡œ ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§„ë‹¤.\n\nì¦‰, í•´ë‹¹ ì ˆì—ì„œëŠ” ì´ í•œ ë§ˆë””ë¥¼ ê¸°ì–µí•˜ë©´ í¸í•´ì§‘ë‹ˆë‹¤. \"í•˜ë‚˜ì˜ Dockerì˜ containerëŠ” namespaceë“¤ì˜ ì§‘í•©ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ìˆë‹¤.\"\n\n### Control Groups(C group)\n\nnamespaceê°€ ê° containerê°„ì˜ isolationì„ ë³´ì¥í•œë‹¤ë©´, cgroupì€ í•œê³„ë¥¼ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì—­í• ì´ë‹¤. containerë“¤ì´ í•˜ë‚˜ì˜ machineì—ì„œ ë™ì‘í•œë‹¤ë©´ ì–´ì©” ìˆ˜ ì—†ì´ ê·¸ë“¤ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì´ ìì›ì˜ ì–‘ì€ í•œì •ë  ìˆ˜ ë°–ì— ì—†ë‹¤. ê·¸ë¦¬ê³ , ìì¹« ì˜ëª»í•˜ë©´ í•˜ë‚˜ì˜ containerê°€ ë„ˆë¬´ ë§ì€ ìì›(CPU, Memory, Storage, ...)ì„ ì†Œëª¨í•˜ì—¬ ë‹¤ë¥¸ containerì˜ ë™ì‘ì„ ë°©í•´í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•œ ê²ƒì´ ë°”ë¡œ cgroupì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ê° containerì—ê²Œ ìì›ì„ ë‚˜ëˆ„ì–´ í• ë‹¹í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Capabilities\n\nì–´ë–¤ ì‘ì—…ì„ í•˜ë”ë¼ë„, Machineì„ root ê¶Œí•œìœ¼ë¡œ ì‘ì—…ì„ í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ìœ„í—˜í•˜ë‹¤. ë”°ë¼ì„œ, containerì—ì„œ applicationì„ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•œ ìµœì†Œí•œì˜ ê¶Œí•œë§Œì„ ë¶€ì—¬í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì˜¬ë°”ë¥´ë‹¤. ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡, ê¶Œí•œì„ ì§€ì •í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Mandatory Access Control(MAC) system\n\nMACì€ íŒŒì¼ì´ë‚˜ íŠ¹ì • ë°ì´í„°ì— ëŒ€í•œ ì ‘ê·¼ ì œì–´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë°, ì´ëŠ” AppArmorë‚˜ SELinux ë“±ì— ì˜í•´ì„œ êµ¬í˜„ë˜ì–´ì§€ëŠ”ë°, ê¸°ë³¸ì ìœ¼ë¡œ DockerëŠ” containerì— AppArmorë¥¼ ê° containerì— ì ìš©í•˜ì—¬ ì´ë¥¼ êµ¬í˜„í•œë‹¤. customizingì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì´ì— ëŒ€í•œ ì´í•´ë¥¼ ì¶©ë¶„íˆ í•˜ê¸°ë¥¼ ê¶Œí•œë‹¤.\n\n### seccomp\n\nseccompì˜ filter modeë¥¼ í™œìš©í•˜ë©´, containerì—ì„œ ë°œìƒí•˜ëŠ” syscallì„ ì œí•œí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ì´ëŠ” MAC ì²˜ëŸ¼ ì§ì ‘ customizingë„ ê°€ëŠ¥í•˜ì§€ë§Œ ì´ì— ëŒ€í•œ ê¹Šì€ ì´í•´ê°€ ë’·ë°›ì¹¨ë˜ì–´ì•¼ í•œë‹¤.\n\n## Docker Engine's Security for Docker\n\n### Secure Swarm Mode\n\nê¸°ë³¸ì ìœ¼ë¡œ Docker Swarmì€ managerì™€ workerë¡œ êµ¬ë¶„ë˜ì–´ ë™ì‘í•œë‹¤. managerëŠ” ê¸°ë³¸ì ìœ¼ë¡œ control planeì„ ì œì–´í•˜ê³ , ì „ì²´ ì ì¸ cluster í™˜ê²½ì„ êµ¬ì„±í•˜ë©°, ì‘ì—…ì„ ì ì ˆí•˜ê²Œ ì „ë‹¬í•œë‹¤. ê·¸ë¦¬ê³ , ì „ì²´ì ì¸ application codeë¥¼ ë™ì‘ì‹œí‚¤ëŠ” ê²ƒì´ workerë“¤ì´ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ managerì™€ workerë“¤ì€ ëª¨ë‘ ë‹¤ë¥¸ Nodeì´ë‹¤. ë”°ë¼ì„œ, ì´ë“¤ê°„ì˜ í†µì‹ ì„ ìˆ˜í–‰í•  ë•Œì— ì¸ì¦ê³¼ ê°™ì€ ì‘ì—…ì„ í•„ìˆ˜ì ì´ë‹¤. ë”°ë¼ì„œ, Docker Swarmì—ì„œëŠ” ì´ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ì„œ managerë¡œ ì„ëª…ëœ nodeë¥¼ CAë¡œ í•˜ì—¬ TLS ì¸ì¦ì„ ìˆ˜í–‰í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ, ì„œë¡œë¥¼ ì¸ì¦í•˜ê³ , ì „ì†¡ ë°ì´í„° ì•”í˜¸í™”ë¥¼ ìˆ˜í–‰í•œë‹¤.  \n  \n\\* control plane vs data plane : í†µì‹ ì„ ì¼ìƒì—ì„œì˜ êµí†µíë¦„ì´ë¼ê³  ë³¸ë‹¤ë©´, control planeì€ ì‹ í˜¸ë“±ê³¼ ê°™ì€ ê·œì¹™ì„ ì˜ë¯¸í•˜ê³ , data planeì€ ì‹¤ì œë¡œ ì´ë™í•˜ëŠ” ì°¨ëŸ‰ë“¤ë¡œ ë¹„ìœ í•  ìˆ˜ ìˆë‹¤. ì¦‰, control planeì€ cluster í™˜ê²½ì—ì„œì˜ ì œì–´ë¥¼ ìœ„í•œ ë°ì´í„°ì´ê³ , data planeì€ ì‹¤ì œë¡œ ì£¼ê³  ë°›ëŠ” ë°ì´í„°ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\n\n### Image Scanning\n\nDockerëŠ” ì´ë¯¸ì§€ì—ì„œ ë³´ì•ˆìƒì˜ ì·¨ì•½ì  ì—¬ë¶€ë¥¼ scaní•˜ëŠ” ê¸°ëŠ¥ì„ ê¸°ë³¸ì ìœ¼ë¡œ íƒ‘ì¬í•˜ê³  ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ, ì´ë¯¸ì§€ê°€ ê°€ì§„ ì·¨ì•½ì  ë“±ì„ íŒŒì•…í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Docker Content Trust\n\nDockerëŠ” download ë˜ëŠ” ì‹¤í–‰í•  ì´ë¯¸ì§€ì˜ ì œê³µìë¥¼ ì‹ë³„í•˜ê³  ë¬´ê²°ì„±ì„ ì‰½ê²Œ ì²´í¬í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œ Docker Content Trustë¥¼ ì œê³µí•œë‹¤. registryì— ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•  ë•Œ, ì§ì ‘ ì„œëª…ì´ ê°€ëŠ¥í•˜ê³ , ì´ë¥¼ í†µí•´ì„œ íŠ¹ì • ì‚¬ìš©ìì— ì˜í•´ì„œ ìƒì„±ë˜ì—ˆìŒì„ í™•ì •í•  ìˆ˜ ìˆë‹¤. ì´ë ‡ê²Œ ì„œëª…ì´ ì¡´ì¬í•´ì•¼ë§Œ pullì´ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒ ì—­ì‹œ ê°€ëŠ¥í•˜ë‹¤.\n\n### Docker Secrets\n\nDockerì—ì„œ ë³´ì•ˆ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ê¸° ìœ„í•´ì„œ ê³ ì•ˆëœ ê²ƒìœ¼ë¡œ, íŠ¹ì • íƒ€ê²Ÿì—ì„œ ì•ˆì „í•˜ê²Œ SSH keyì™€ ê°™ì€ ì •ë³´ë¥¼ ì•ˆì „í•˜ê²Œ ì „ë‹¬í•˜ëŠ” ê²ƒ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n## Reference\n\n- [ğŸ”— Docker Deep Dive](https://www.oreilly.com/library/view/docker-deep-dive/9781800565135/), Nigel Poulton\n","slug":"docker-security","date":"2021-07-10 19:52","title":"[Docker] Security","category":"Tech","tags":["Docker","Container","Security"],"desc":"í•´ë‹¹ ê¸€ì€ Linuxì—ì„œ dockerë¥¼ ë™ì‘ì‹œí‚¨ë‹¤ëŠ” ê°€ì •í•˜ì— ì‘ì„±í•˜ì˜€ë‹¤. (Windowë„ ëŒ€ë¶€ë¶„ ë™ì¼í•˜ë‹¤ê³  í•œë‹¤.)dockerëŠ” ì—¬ëŸ¬ ê°œì˜ ë³´ì•ˆ ì •ì±…ì„ í¬í•¨í•œë‹¤.ì´ë¥¼ í¬ê²Œ ëˆ„ê°€ ê´€ë¦¬í•˜ëŠëƒì— ë”°ë¼ì„œ ë‘ ê°œì˜ ë¶€ë¥˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.1. OS system (Linux)2. Dockerì´ì „ ê°€ìƒí™”ì™€ ë°˜ê°€ìƒí™”ë¥¼ ë¹„êµí•œ ê¸€ì—ì„œ ë³´ì•˜ë“¯ì´ Container ê¸°ìˆ ì„ ê²°ê³¼ì ìœ¼ë¡œ ë°˜ê°€ìƒí™”ì— í•´ë‹¹í•˜ë©°, ì´ë¥¼ ìœ„í•´ì„œ OSì˜ ì§€ì›ì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ Linux ìì²´ì—ì„œ êµ¬í˜„í•´ì£¼ëŠ” ê²ƒì´ ì¡´ì¬í•˜ê³ , Dockerì—ì„œ Application ë‹¨ì—ì„œ êµ¬í˜„í•œ ë¶€ë¶„ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì§€ëŠ” ê²ƒì´ë‹¤.ë¨¼ì €, Linuxì—ì„œ ì§€ì›í•˜ëŠ” ê°ì¢… securityì— ëŒ€í•´ì„œ ì•Œì•„ë´…ì‹œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/docker-picture.jpg"},{"content":"\n## Intro\n\n`gRPC`ì™€ `Protocol Buffer`ë¼ëŠ” ê²ƒì— ëŒ€í•´ì„œ ì„¤ëª…í•œë‹¤. `gRPC`ëŠ” `Protocol Buffer`ë¥¼ êµí™˜ ê°€ëŠ¥í•œ í˜•íƒœì˜ IDL(Interface Definition Language)ê³¼ messageë¥¼ ê¸°ìˆ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•œë‹¤.\n\n## gRPC\n\n`gRPC`ì—ì„œ client applicationì€ ì „í˜€ ë‹¤ë¥¸ machineì˜ server applicationì— ì¡´ì¬í•˜ëŠ” methodë¥¼ ë§ˆì¹˜ local objectë¡œ ì¡´ì¬í•˜ëŠ” ê²ƒì²˜ëŸ¼ ì§ì ‘ì ìœ¼ë¡œ í˜¸ì¶œí•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ì‹¤ì œë¡œ distributed application(ex. Web ê°œë°œì—ì„œì˜ BackEnd, FrontEnd | Micro Service Architecture)ê³¼ serviceë“¤ì„ ì œì‘í•  ë•Œ êµ‰ì¥íˆ ìœ ìš©í•˜ë‹¤. ë‹¤ë¥¸ RPC Systemê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, `gRPC`ëŠ” ì›ê²©ìœ¼ë¡œ parameterë¥¼ ì œê³µí•˜ì—¬ í˜¸ì¶œí•  ìˆ˜ ìˆëŠ” methodì™€ return typeì„ ê¸°ìˆ í•˜ì—¬ serviceë¥¼ ì •ì˜í•œë‹¤. Server ì¸¡ì—ì„œëŠ” interfaceë¥¼ êµ¬í˜„í•˜ê³ , ì‹¤ì œë¡œ clientì˜ í˜¸ì¶œì„ ì²˜ë¦¬í•  `gRPC` serverë¥¼ ì‹¤í–‰ì‹œí‚¨ë‹¤. Client ì¸¡ì—ì„œëŠ”, serverì˜ methodì™€ ë™ì¼í•œ methodë¥¼ ì œê³µí•˜ëŠ” `stub`(`gRPC` client)ë¥¼ ê°€ì§„ë‹¤.\n\n![gRPC overview](/images/grpc-overview.jpeg)\n\n`gRPC` clientì™€ serverëŠ” ë‹¤ì–‘í•œ í™˜ê²½(Cloud, Server, Desktop, etc...)ì—ì„œë„ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë©°, ì„œë¡œ ì˜ì‚¬ì†Œí†µì´ ê°€ëŠ¥í•˜ê³ , `gRPC`ë¥¼ ì§€ì›í•˜ëŠ” ì–´ë–¤ ì–¸ì–´ë¡œë„ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. ì¦‰, Serverì™€ Clientì—ì„œ ì–´ë– í•œ ì–¸ì–´ë¥¼ ì‚¬ìš©í•´ë„ ìƒê´€ì´ ì—†ë‹¤. ë˜í•œ, ìµœì‹  Google APIë“¤ì„ `gRPC`ë¡œë„ ì œê³µí•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì‰½ê²Œ ì´ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ, `gRPC`ëŠ” êµ¬ì¡°í™”ëœ ë°ì´í„°ì˜ Serializationì„ ìœ„í•œ Googleì˜ Open Sourceì¸ `Protocol Buffer`ë¥¼ ì‚¬ìš©í•œë‹¤.\n\n`Protocol Buffer`ì˜ ë°ì´í„°ì˜ êµ¬ì¡°ëŠ” `.proto` ë¡œ ëë‚˜ëŠ” ì¼ë°˜ì ì¸ í…ìŠ¤íŠ¸ íŒŒì¼(proto file)ì— ì •ì˜í•œë‹¤. `Protocol Buffer` dataëŠ” `message`ë¼ëŠ” í˜•íƒœë¡œ ì‘ì„±ë˜ë©°, ê° `message`ëŠ” ì—¬ëŸ¬ name-value ìŒìœ¼ë¡œ êµ¬ì„±ëœ `field`ë“¤ë¡œ êµ¬ì„±ëœ ì‘ì€ ì •ë³´ recordì´ë‹¤. ì•„ë˜ëŠ” messageì˜ ê°„ë‹¨í•œ ì˜ˆì œì´ë‹¤.\n\n```proto\nmessage Person {\n  string name = 1;\n  int32 id = 2;\n  bool has_ponycopter = 3;\n}\n```\n\nì¼ë‹¨ data êµ¬ì¡°ë¥¼ ì •ì˜í•˜ë©´, ì„ í˜¸í•˜ëŠ” languageë¥¼ í†µí•´ `Protocol Buffer Compiler`(protoc)ë¥¼ ì‚¬ìš©í•´ì„œ data access classë“¤ì„ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ê° fieldì— ëŒ€í•œ ê°„ë‹¨í•œ ì ‘ê·¼ì(`name()`, `set_name()`)ì™€ ì „ì²´ êµ¬ì¡°ë¥¼ raw bytesë¡œ serialization/parsingí•  ìˆ˜ ìˆëŠ” methodë¥¼ ì œê³µí•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ C++ë¥¼ ì„ íƒí•˜ì˜€ë‹¤ë©´, `protoc`ì€ `Person`ì´ë¼ëŠ” classë¥¼ ìƒì„±í•  ê²ƒì´ê³ , ì´ë¥¼ ì´ìš©í•´ì„œ `Person`ì— ëŒ€í•œ messageë¥¼ ì–»ê±°ë‚˜, serialization, ë˜ëŠ” parsingì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\në˜í•œ, `gRPC` serviceë¥¼ `proto file`ì— paramter, return typeì™€ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n```proto\n// The greeter service definition\nservice Greeter {\n  // Sends a greeting\n  rpc SayHello (HelloRequest) returns (HelloReply) {}\n}\n\n// The request message containing the user's name.\nmessage HelloRequest {\n  string name = 1;\n}\n\n// The response message containing the greetings\nmessage HelloReply {\n  string message = 1;\n}\n```\n\n`gRPC`ëŠ” `protoc`ì™€ íŠ¹ë³„í•œ `gRPC` pluginì„ ì‚¬ìš©í•˜ì—¬ `proto file`ì—ì„œ codeë¥¼ ìƒì„±í•œë‹¤. ì´ë¥¼ í†µí•´, message typeë“¤ì„ ì–»ê³ , serializationí•  ìˆ˜ ìˆëŠ” ì¼ë°˜ì ì¸ `Protocol Buffer` codeì™€ `gRPC` client ì™€ server codeë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n## Protocol Buffer\n\n`gRPC`ë¥¼ ì œëŒ€ë¡œ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” `Protocol Buffer`ì— ëŒ€í•´ì„œ ìì„¸íˆ ì•Œì•„ë‘ì–´ì•¼ í•˜ê¸°ì— ë³„ë„ì˜ ì„¹ì…˜ìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ì„¤ëª…í•œë‹¤. `Protocol Buffer`ëŠ” êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ Serialization(êµ¬ì¡°í™”ëœ ë°ì´í„°ë¥¼ byteí˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì • ë˜ëŠ” ì´ë¥¼ í†µí•´ì„œ ìƒì„±ëœ ê²°ê³¼ë¬¼)í•˜ê³ , ë‹¤ì‹œ Parsing(Serializationì„ í†µí•´ì„œ ìƒì„±ëœ ë°ì´í„°ë¥¼ ì›ë˜ì˜ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •)í•˜ëŠ” ê³¼ì •ì„ ì–¸ì–´ ì¤‘ë¦½ì (ì–´ë–¤ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•œ), í”Œë«í¼ ì¤‘ë¦½ì (ì–´ë–¤ í”Œë«í¼ì—ì„œë„ ì‚¬ìš©ê°€ëŠ¥í•œ)ìœ¼ë¡œ í™•ì¥í•œ ë©”ì¹´ë‹ˆì¦˜ì´ë‹¤. **ì´ëŠ” JSONê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, ë” ì‘ê³  ë” ë¹ ë¥´ë©°, ì‹¤ì œ ì–¸ì–´ì™€ì˜ ì—°ê²°ì„ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤.**\n\n`Protocol Buffer`ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë„êµ¬ì˜ ì§‘í•©ì´ë‹¤.\n\n1. Definition Language(.proto fileì„ ì‘ì„±í•˜ëŠ” ì–¸ì–´ì´ë‹¤.)\n2. dataì˜ interface, languageì— ë”°ë¥¸ runtime libraryë“¤, dataë¥¼ ìœ„í•œ serialization format `Proto Compiler`ì— ì˜í•´ ìƒì„±ëœ code\n\n### í•µì‹¬ Idea\n\n**`Protocol Buffer`ëŠ” megabyte ì •ë„ í¬ê¸°ì˜ êµ¬ì¡°í™”ëœ dataë¥¼ ìœ„í•œ Serialization formatì„ ì œê³µí•œë‹¤. ì´ëŠ” ë‹¨ê¸°ê°„ì˜ Network Trafficì—ì„œë¶€í„° ì¥ê¸°ê°„ data ì €ì¥ì— ëª¨ë‘ ìœ ë¦¬í•˜ë‹¤. `Protocol Buffer`ëŠ” ê¸°ì¡´ dataë¥¼ ë¬´íš¨í™”ê±°ë‚˜ updateí•˜ëŠ” ì¶”ê°€ì ì¸ code ì‘ì—…ì—†ì´ ìƒˆë¡œìš´ ì •ë³´ë¡œ í™•ì¥ë˜ì–´ì§ˆ ìˆ˜ ìˆë‹¤.** ë¿ë§Œ ì•„ë‹ˆë¼ **í•˜ìœ„ í˜¸í™˜ì„±(ì´ì „ versionì˜ dataì˜ ìš”ì²­ì—ë„ ëŒ€ì‘í•˜ëŠ” ê²ƒ)ì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— ì´ë“¤ì„ ì¥ê¸°ê°„ ìœ ì§€í•œë‹¤. `Protocol Buffer`ëŠ” ìƒˆë¡œìš´ fieldì˜ ì¶”ê°€/ì‚­ì œì—ë„ ì„œë¹„ìŠ¤ì˜ ì¤‘ë‹¨ ì—†ëŠ” í™˜ê²½ì„ ì œê³µí•œë‹¤.**\n\n`Protocol Buffer`ë“¤ì€ êµ¬ê¸€ì—ì„œëŠ” êµ‰ì¥íˆ ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” formatì´ë‹¤. ì´ëŠ” ëŒ€ê²Œ ê´‘ë²”ìœ„í•œ serverê°„ í†µì‹ ì— ì‚¬ìš©ë  ë¿ë§Œ ì•„ë‹ˆë¼ diskì— dataë¥¼ ê¸°ë¡í•˜ëŠ”ë°ì—ë„ ì‚¬ìš©ë˜ì–´ì§„ë‹¤. `Protocol Buffer` messageì™€ serviceë“¤ì€ `.proto` íŒŒì¼ì— ê¸°ìˆ ìì— ì˜í•´ ì •ì˜ë˜ì–´ì§„ë‹¤.\n\n`Proto Compiler`ëŠ” build timeì— `.proto` fileì— ê¸°ë°˜í•˜ì—¬ ì´ì— ì íŒ `Protocol Buffer`ë¥¼ ì¡°ì‘í•˜ê¸° ìœ„í•œ ë‹¤ì–‘í•œ languageì˜ ì½”ë“œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œ ì‹¤í–‰ë˜ì–´ì§„ë‹¤. ê°ê°ì— ìƒì„±ëœ classë“¤ì€ ê° fieldì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ ì ‘ê·¼ìë“¤ì„ í¬í•¨í•˜ë©°, serializationê³¼ parsingì„ ìœ„í•œ methodë¥¼ ì œê³µí•œë‹¤.\n\n### ì¥ì \n\n`Protocol Buffer`ëŠ” êµ¬ì¡°í™”ëœ dataë¥¼ ì–´ë–¤ ì–¸ì–´ì—ì„œë“ , ì–´ë–¤ platformì—ì„œë“  ê´‘ë²”ìœ„í•œ ìƒí™©ì—ì„œ serialization/parsingí•  í•„ìš”ê°€ ìˆì„ ë•Œ êµ‰ì¥íˆ ìœ ìš©í•˜ë‹¤. gRPCë¡œ í†µì‹ ë„ ê°€ëŠ¥í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë¥¼ ìœ„í•œ data storageë„ ì œê³µí•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë˜í•œ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì„ í¬í•¨í•œë‹¤.\n\n1. ì ì€ data ì €ì¥ê³µê°„\n2. ë¹ ë¥¸ parsing\n3. ë§ì€ programming ì–¸ì–´ì™€ì˜ í˜¸í™˜ì„±  \n   - C++, C#, Java, Kotlin, Go, Dart, Python, Ruby, Javascript(Node), PHP\n4. ìë™ìœ¼ë¡œ ìƒì„±ëœ classë¥¼ í†µí•œ ìµœì í™”ëœ ê¸°ëŠ¥ì„±\n\n### í•œê³„ì \n\n`Protocol Buffer`ê°€ í•­ìƒ ëª¨ë“  ë°ì´í„°ì— ëŒ€í•´ì„œ ì ì ˆí•œ ê²ƒì€ ì•„ë‹ˆë‹¤.\n\n- `Protocol Buffer`ëŠ” ì „ì²´ messageë“¤ì´ memoryì— ëª¨ë‘ loadë  ìˆ˜ ìˆê³ , object graphë³´ë‹¤ëŠ” í¬ê¸°ê°€ ì‘ë‹¤ê³  ê°€ì •í•œë‹¤. ë”°ë¼ì„œ, 1~2 megabyte ë‚´ì™¸ì˜ í¬ê¸°ë¥¼ ë„˜ì–´ì„ ë‹¤ë©´, ì—¬ëŸ¬ ê°œì˜ copyë¥¼ ë§Œë“¤ê²Œ ë  ê²ƒì´ê³ , ì´ëŠ” memory ì‚¬ìš©ì˜ ë¹„íš¨ìœ¨ì„ ì´ˆë˜í•  ê²ƒì´ë‹¤.\n- `Protocol Buffer`ê°€ serializationë˜ì—ˆì„ ë•Œ, ë™ì¼í•œ dataëŠ” ë‹¤ì–‘í•œ í˜•íƒœì˜ binary serialization í˜•íƒœë¥¼ ê°–ëŠ”ë‹¤. ê·¸ë ‡ê¸°ì— ì´ë“¤ì„ ì§ì ‘ì ìœ¼ë¡œ parsingí•˜ê¸° ì „ê¹Œì§€ëŠ” ì´ê²ƒì´ ì„œë¡œ ë™ì¼í•œì§€ ì•Œ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ì—†ë‹¤.\n- MessageëŠ” JPEG, PNGì™€ ê°™ì€ ì „ìš© ì••ì¶• ì•Œê³ ë¦¬ì¦˜ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. (í•˜ì§€ë§Œ, zip, gzip ë“±ì€ ê°€ëŠ¥í•˜ë‹¤.)\n- `Protocol Buffer` messageë“¤ì€ float ë° ë‹¤ì°¨ì› ë°°ì—´ì„ ë§ì´ í¬í•¨í•˜ëŠ” ê³¼í•™ ë° ê³µí•™ ìš©ë„ì—ì„œ í¬ê¸°ì™€ ì†ë„ ë©´ì—ì„œëŠ” ìµœëŒ€ íš¨ìœ¨ë³´ë‹¤ ë‚®ì€ ì„±ëŠ¥ì„ ë³´ì¸ë‹¤. ì´ëŸ¬í•œ ìš”êµ¬ê°€ ë§ì€ ê²½ìš°ì—ëŠ” overheadë¥¼ ì¤„ì´ê¸° ìœ„í•´ì„œ `FITS` ë˜ëŠ” ì´ì™€ ìœ ì‚¬í•œ ë°©ì‹ì„ í™œìš©í•´ì•¼í•œë‹¤.\n- `Protocol Buffer` Object Oriented Languageê°€ ì•„ë‹Œ ê²½ìš°(Fortran, IDL) ì§€ì›ì´ ì–´ë µë‹¤.\n- `Protocol Buffer` messageë“¤ì€ ìì²´ì ìœ¼ë¡œ dataë¥¼ ì •ì˜í•  ìˆ˜ëŠ” ì—†ê³ , ì‚¬ìš©ìì— ì˜í•´ì„œ ì •ì˜ëœ schemaì— ê¸°ë°˜í•œë‹¤. ë”°ë¼ì„œ, dataì— ìƒì‘í•˜ëŠ” `.proto` fileì´ ì—†ë‹¤ë©´, ì´ë¥¼ ì™„ë²½í•˜ê²Œ í•´ì„í•˜ëŠ” ê²ƒì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n- `Protocol Buffer`ëŠ” ì—¬ëŸ¬ organizationì˜ í‘œì¤€ì€ ì•„ë‹ˆë‹¤. ë”°ë¼ì„œ, ì¼ë°˜ì ì¸ ì‚¬ìš© í™˜ê²½ì—ì„œëŠ” ì ì ˆí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.\n\n### ì‘ë™ ë°©ì‹\n\n1. data êµ¬ì¡°ë¥¼ ì •ì˜í•˜ê¸° ìœ„í•´ì„œ `.proto` fileì„ ìƒì„±í•œë‹¤.\n2. `.proto` fileì„ ê¸°ë°˜ìœ¼ë¡œ `protoc`ëŠ” codeë¥¼ ìƒì„±í•œë‹¤.\n3. ìƒì„±ëœ codeì™€ project codeë¥¼ ê°™ì´ compileí•œë‹¤.\n4. ì´ë¥¼ í†µí•´ì„œ ìƒì„±ë˜ëŠ” `Procotol Buffer` classë“¤ì„ í™œìš©í•˜ì—¬ serialization, ê³µìœ  ë° parsingì´ ê°€ëŠ¥í•˜ë‹¤.\n\n`Protocol Buffer` classë“¤ì€ ë‹¤ì–‘í•œ methodë¥¼ í¬í•¨í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, íŠ¹ì • ë°ì´í„°ë¥¼ stream, fileë¡œ ë¶€í„° ë°›ì•„ì˜¤ê±°ë‚˜ ê°œë³„ì ìœ¼ë¡œ valueë¥¼ ì¶”ì¶œí•˜ê±°ë‚˜ í•´ë‹¹ ë°ì´í„°ê°€ ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•˜ê±°ë‚˜ ë‹¤ì‹œ serializationí•˜ì—¬ stream ë˜ëŠ” fileë¡œ ë§Œë“œëŠ” ê³¼ì •ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Definition Syntax\n\n`.proto` fileì„ ì •ì˜í•  ë•Œ, ë¨¼ì € optionalityë¥¼ ì„¤ì •í•œë‹¤. ì´ëŠ” `optional` ë˜ëŠ” `repeated` ë˜ëŠ” `singular` ì¤‘ì— í•˜ë‚˜ë¥¼ ì„ íƒí•  ìˆ˜ ìˆë‹¤. (v2ì—ëŠ” `required`ë„ ì¡´ì¬í•˜ì§€ë§Œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ì¢‹ì§€ ì•Šì€ patternìœ¼ë¡œ ì—¬ê¸´ë‹¤.)\n\nìœ„ì˜ ì‚¬í•­ì„ ì •í•œ í›„ì—ëŠ” data typeì„ ê¸°ìˆ í•´ì•¼ í•œë‹¤. `Protocol Buffer`ëŠ” ë³´í¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì–´ì§€ëŠ” data type(Integer, Boolean, Float)ì„ ì œê³µí•œë‹¤.\n\nfieldëŠ” ì•„ë˜ì™€ ê°™ì€ ê²ƒë„ í¬í•¨í•œë‹¤.\n\n- `message` : dataì˜ ì„¤ì •ì„ ë°˜ë³µí•˜ëŠ” ê²½ìš° ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n- `enum` : í•´ë‹¹ typeì˜ ì¢…ë¥˜ë¥¼ valueë“¤ì˜ ì§‘í•©ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.\n- `oneof` : messageê°€ ì—¬ëŸ¬ optional fieldë¥¼ í¬í•¨í•  ë•Œ, ë‹¨ í•˜ë‚˜ì˜ fieldë§Œ ê°€ì§€ë„ë¡ í•  ìˆ˜ ìˆë‹¤.\n- `map` : key-value í˜•íƒœë¡œ ê¸°ìˆ í•  ìˆ˜ ìˆë‹¤.\n\noptionalityì™€ field typeì„ ì„¤ì •í•œ í›„ì—, field numberë¥¼ í• ë‹¹í•´ì•¼ í•œë‹¤. ì´ëŠ” ë‹¤ë¥¸ ëª©ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê±°ë‚˜ ì¬ì‚¬ìš©ë˜ì–´ì„œëŠ” ì•ˆëœë‹¤. íŠ¹ì • fieldë¥¼ ì œê±°í–ˆë‹¤ë©´, ì´ ìˆ«ìë¥¼ ì¬ì‚¬ìš©í•˜ì§€ ì•Šë„ë¡ ë°˜ë“œì‹œ ìœ ì˜í•´ì•¼ í•œë‹¤.\n\n### ì¶”ê°€ì ì¸ Data Type\n\n`Protocol Buffer`ëŠ” ë‹¤ì–‘í•œ scalar value typeì„ ì œê³µí•œë‹¤. ë˜í•œ, ìì‹ ë§Œì˜ í•©ì„± data typeì„ messageë¥¼ ì •ì˜í•¨ìœ¼ë¡œì¨ ìƒì„±í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ë³´í¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ì–´ì§€ëŠ” ë‹¤ìŒê³¼ ê°™ì€ typeë“¤ë„ ì¶”ê°€ì ìœ¼ë¡œ ì •ì˜ë˜ì–´ìˆë‹¤.\n\n- `Duration` : ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤. (ex. 42s)\n- `Timestamp` : ì‹œê°ì„ ì˜ë¯¸í•œë‹¤. (ex. 2017-01-15T01:30:15.01Z)\n- `Interval` : ì‹œê°„ ì‚¬ì´ ê±°ë¦¬ë¥¼ ì˜ë¯¸í•œë‹¤. (ex. 2017-01-15T01:30:15.01Z - 2017-01-16T02:30:15.01Z)\n- `Date` : ë‹¬ë ¥ì—ì„œì˜ ì „ì²´ ë‚ ì§œë¥¼ ì˜ë¯¸í•œë‹¤. (ex. 2025-09-19)\n- `DayOfWeek` : ì¼ì£¼ì¼ì— ìš”ì¼ì„ ì˜ë¯¸í•œë‹¤. (ex. Monday)\n- `TimeOfDay` : í•˜ë£¨ì—ì„œ ì‹œê°„ì„ ì˜ë¯¸í•œë‹¤. (ex. 10:42:23)\n- `LatLng` : ìœ„ë„ì™€ ê²½ë„ë¥¼ ì˜ë¯¸í•œë‹¤.\n- `Money` : í™”í ë‹¨ìœ„ë¥¼ ì˜ë¯¸í•œë‹¤.\n- `PostalAddress` : ìš°í¸ì£¼ì†Œë¥¼ ì˜ë¯¸í•œë‹¤.\n- `Color` : RGBA color ê°’ì„ ì˜ë¯¸í•œë‹¤.\n- `Month` : ë…„ì— ë”°ë¥¸ ì›”ì„ ì˜ë¯¸í•œë‹¤. (ex. April)\n\n## Outro\n\ní˜„ì¬ê¹Œì§€ ì‚¬ìš©í•´ë³¸ RPCëŠ” ReST API, GraphQLì´ ìˆì—ˆë‹¤. ReSTëŠ” ì›Œë‚™ ìœ ëª…í•˜ê³ , JSON, xmlê¸°ë°˜ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ëˆ„êµ¬ë‚˜ ì•Œë²•í•˜ë‹¤. ê·¸ë¦¬ê³ , graphQLì€ ë” ìœ ë™ì ì¸ êµ¬í˜„ ë°©ì‹ì„ ì œê³µí–ˆê¸° ë•Œë¬¸ì— Gatsbyì™€ ê°™ì€ platformì´ë‚˜ Githubì—ì„œë„ ì‚¬ìš©í•  ì •ë„ë¡œ ìœ ëª…í•´ì¡Œë‹¤. ì• ì„œ ì–˜ê¸°í•œ ë‘ ê°œëŠ” BackEndì—ì„œ FrontEndë¡œ ì œê³µí•˜ëŠ” ì‹œìŠ¤í…œì—ì„œ ì£¼ë¡œ ì´ìš©ëœë‹¤ëŠ” ê²ƒì„ ì´ë²ˆ ê¸°íšŒë¡œ ê¹¨ë‹¬ì€ ê²ƒ ê°™ë‹¤. ê·¸ë ‡ê¸°ì— ì¢€ ë” ì‚¬ëŒì´ ì´í•´í•˜ê¸° ì‰¬ìš´ êµ¬ì¡°ë¡œ ë˜ì–´ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ êµ‰ì¥íˆ ì¹œìˆ™í•˜ë‹¤. í•˜ì§€ë§Œ, `gRPC`ëŠ” ì„±ëŠ¥ í–¥ìƒì— ì¢€ ë” ì´ˆì ì„ ë‘ì—ˆê³ , `Server`ê°„ í†µì‹ ì— ë” ë°©ì ì„ ë‘” ê²ƒì´ë¼ëŠ” ê²ƒì´ ì™€ë‹¿ì•˜ë‹¤. ì—¬ëŸ¬ Virtual Machineì´ ë§ì•„ì§€ëŠ” ê°€ìš´ë°ì— ì´ë“¤ê°„ì— ë¹ ë¥¸ í†µì‹ ê³¼ ê° Machineê°„ì˜ í˜¸í™˜ì„ ìœ„í•œ ì—¬ëŸ¬ ê¸°ëŠ¥ë“¤ì— ì¢€ ë” ì´ˆì ì„ ë§ì¶”ê³  ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤. ì•„ë§ˆ ì•ìœ¼ë¡œ `gRPC`ë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì´ëŸ¬í•œ ìš©ë„ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©í•  ê²ƒ ê°™ë‹¤. ì•„ë§ˆ ì´ë˜ì„œ ì£¼ìš” ì‚¬ìš©ì²˜ê°€ Network Vender(CISCO, Juniper), CNCF, Netflix ë“±ì¸ ê²ƒì¼ ìˆ˜ë„ ìˆê² ë‹¤. ëìœ¼ë¡œ ì´ë¥¼ ì´ìš©í•œ êµ¬í˜„ì„ ì§ì ‘í•´ë³´ì•„ì•¼ ë” ë‚˜ì€ ì„¤ëª…ì´ ê°€ëŠ¥í•  ê²ƒ ê°™ìœ¼ë¯€ë¡œ í›„ì— ì´ì— ëŒ€í•´ì„œ ë” ìì„¸íˆ ë‹¤ë£¨ê² ë‹¤.\n\n## Reference\n\n- <https://grpc.io/docs/what-is-grpc/introduction/>\n- <https://grpc.io/docs/what-is-grpc/core-concepts/>\n- <https://developers.google.com/protocol-buffers/docs/overview>\n","slug":"grpc","date":"2022-06-12 14:11","title":"gRPC","category":"Tech","tags":["API","RemotePrecedure","gRPC","ProtocolBuffer"],"desc":"gRPCì™€ Protocol Bufferë¼ëŠ” ê²ƒì— ëŒ€í•´ì„œ ì„¤ëª…í•œë‹¤. gRPCëŠ” Protocol Bufferë¥¼ êµí™˜ ê°€ëŠ¥í•œ í˜•íƒœì˜ IDL(Interface Definition Language)ê³¼ messageë¥¼ ê¸°ìˆ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/grpc-hero.png"}],"Web":[{"content":"\n## Intro\n\ní•´ë‹¹ ê¸€ì€ manifest version 3ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ëœ ê¸€ì…ë‹ˆë‹¤. í˜¹ì—¬ version 2ë¥¼ ì´ìš©í•˜ì…¨ë‹¤ë©´, version 2ì—ì„œ version 3ë¡œ migration í•˜ë©´ì„œ ì œê°€ ì ì–´ë†“ì€ ê¸€ì´ ìˆìœ¼ë‹ˆ ê·¸ê²ƒì„ ì°¸ê³  í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.\n\n[Chrome Extension version migration from V2 to V3](/posts/chrome-extension-migration-v2-to-v3)\n\n## 1. chrome í™•ì¥ ì•±ì˜ êµ¬ì„±\n\nchrome extensionì—ì„œ manifest versionì´ 3ì´ ë˜ì–´ ì´ë¥¼ í•œ ë²ˆ ì •ë¦¬í•  ê²¸,  \nchrome í™•ì¥ì•±ì„ êµ¬ì„±í•˜ëŠ” componentëŠ” í¬ê²Œ 5ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n1. Background scripts => ëŒ€ê²Œ eventë¥¼ ë“±ë¡í•˜ëŠ”ë° ì‚¬ìš©í•©ë‹ˆë‹¤. (bookmark ë“±ë¡, message ë“±ê³¼ ê°™ì€ ê¸°ëŠ¥)\n2. Content scripts => í˜„ì¬ ì—´ë ¤ ìˆëŠ” í˜ì´ì§€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì´ë“¤ì„ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n3. an options page => options pageì— ì˜í•´ ì œê³µë˜ëŠ” ì„¸ë¶€ ë™ì‘ì„ usesrê°€ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.\n4. UI elements => ë¸Œë¼ìš°ì € ìš°ìƒë‹¨ì— ì¡´ì¬í•˜ëŠ” ì•„ì´ì½˜ or í´ë¦­ ì‹œ ì—´ë¦¬ëŠ” popup, ê²€ìƒ‰ì°½, contextmenu ë“±ê³¼ ê´€ë ¨ëœ ìš”ì†Œë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.\n5. various logic files => ì¶”ê°€ì ìœ¼ë¡œ ì‚¬ìš©í•  logic ë“±ì„ í¬í•¨í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  ìš”ì†ŒëŠ” HTML, CSS, Javascriptë¥¼ ì´ìš©í•´ì„œ êµ¬ì„±ë©ë‹ˆë‹¤. ëª¨ë“  í™•ì¥ componentê°€ í•„ìš”ë¡œ ë˜ëŠ” ê²ƒì€ ì•„ë‹™ë‹ˆë‹¤.\n\n## 2. Manifest ë§Œë“¤ê¸°\n\nëª¨ë“  extensionì€ ë°˜ë“œì‹œ í•˜ë‚˜ì˜ manifest íŒŒì¼ì„ í¬í•¨í•©ë‹ˆë‹¤. ì´ëŠ” JSON í˜•ì‹ìœ¼ë¡œ ë˜ì–´ìˆê³ , manifest.jsonì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.  \nê¸°ë³¸ í˜•íƒœëŠ” ë‹¤ìŒ ì œì‹œí•œ ë‚´ìš©ì²˜ëŸ¼ êµ¬ì„±ë©ë‹ˆë‹¤. required ë¶€ë¶„ì—ëŠ” ë°˜ë“œì‹œ ë“¤ì–´ê°€ì•¼ í•˜ëŠ” ë‚´ìš©ì„ í¬í•¨í•©ë‹ˆë‹¤.  \në˜í•œ, appì„ êµ¬ì„±í•¨ì— ìˆì–´ ê±°ì˜ í•„ìˆ˜ì ìœ¼ë¡œ ë“¤ì–´ê°€ì•¼ í•˜ëŠ” actionê³¼ iconê³¼ ê°™ì€ ë‚´ìš©ê³¼ ì„¤ëª… ë“±ì´ í¬í•¨ë©ë‹ˆë‹¤.\n\n```json\n{\n  // required\n  \"manifest_version\": 3,\n  \"name\": \"app test\",\n  \"version\": \"0.0.1\",\n\n  // recommended\n  \"action\": {},\n  \"default_locale\": \"ko\",\n  \"description\": \"chrome extension test\",\n  \"icons\": {}\n}\n```\n\nìì„¸í•œ ì‚¬í•­ì€ í•˜ë‹¨ ë§í¬ë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”.\n\n[Chrome extension Manifest](https://developer.chrome.com/docs/extensions/mv3/manifest/)\n\n## 3. Background script êµ¬ì„±í•˜ê¸°\n\ní™•ì¥ì•±ì€ eventì— ê¸°ë°˜ì„ ë‘” í¬ë¡¬ ë¸Œë¼ìš°ì € í™˜ê²½ì„ í–¥ìƒ ë˜ëŠ” ë³€ê²½ ì‹œí‚¤ê¸° ìœ„í•œ í”„ë¡œê·¸ë¨ì´ë‹¤. event(ìƒˆë¡œìš´ pageë¡œì˜ ì´ë™, ë¶ë§ˆí¬ ì‚­ì œ, íƒ­ ë‹«ê¸°, ë“±)ëŠ” browserì— ì˜í•´ì„œ ë“±ë¡ë˜ì–´ì§‘ë‹ˆë‹¤. í™•ì¥ì•±ì€ background (service worker) scriptsë¥¼ ì´ìš©í•˜ì—¬ ì´ëŸ¬í•œ eventë¥¼ ëª¨ë‹ˆí„°ë§í•˜ë©°, íŠ¹ì • ì§€ì‹œì‚¬í•­ì„ ëª…ì‹œí•©ë‹ˆë‹¤.  \nbackground service workerëŠ” í•„ìš”ì— ì˜í•´ ì–¸ì œë“ ì§€ loadë˜ê³ , ì‚¬ìš©ë˜ì§€ ì•Šìœ¼ë©´ unloadë©ë‹ˆë‹¤.\n\n- í™•ì¥ì•±ì´ ìµœì´ˆë¡œ ì„¤ì¹˜ë˜ê±°ë‚˜ ì—…ë°ì´íŠ¸ ë˜ì—ˆì„ ê²½ìš°\n- background pageê°€ ì „ì†¡ëœ eventë¥¼ ë“¤ì—ˆì„ ê²½ìš°\n- ë‹¤ë¥¸ script ë˜ëŠ” extensionì—ì„œ messageë¥¼ ì „ì†¡í–ˆì„ ê²½ìš°\n- í™•ì¥ì•±ì˜ ë‹¤ë¥¸ viewì—ì„œ runtime.getBackgroundPageë¥¼ í˜¸ì¶œí•œ ê²½ìš°\n\ní•œë²ˆ loadë˜ë©´, service workerëŠ” ì´ê²ƒì´ actionì„ ìˆ˜í–‰í•˜ëŠ” ë™ì•ˆì€ ì¢…ë£Œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, service workerëŠ” ëª¨ë“  view ê·¸ë¦¬ê³  message portê°€ ë‹«í ë•Œê¹Œì§€ unloadë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n`viewë¥¼ ì—¬ëŠ” ê²ƒì€ service workerë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ëŠ” ì•Šì§€ë§Œ, ì¢…ë£Œë˜ëŠ” ê²ƒì„ ë§‰ì„ ìˆ˜ëŠ” ìˆìŠµë‹ˆë‹¤.`\n\níš¨ìœ¨ì ì¸ background scriptsëŠ” eventê°€ ë°œë™ë˜ê¸° ê¹Œì§€ëŠ” ì •ì§€ìƒíƒœë¡œ ì¡´ì¬í•˜ê³ , ì´ì— ì‘í•œë’¤ì— ì¢…ë£Œëœë‹¤.\n\n### ë“±ë¡\n\nservice workerë¥¼ ë“±ë¡í•˜ê¸° ìœ„í•´ì„œëŠ” manifestì— ì´ë¥¼ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.  \nì•„ë˜ ì˜ˆì œì—ì„œëŠ” ëª…ì‹œëœ background.js íŒŒì¼ì´ service_workerë“¤ì˜ mainì´ ë©ë‹ˆë‹¤.\n\n```json\n{\n    \"manifest_version\": 3,\n    ...,\n    \"background\": {\n          \"service_worker\": \"background.js\"\n    }\n}\n```\n\n### êµ¬ì„±í•˜ê¸°\n\nruntime.onInstalled eventë¥¼ listení•œë‹¤ë©´, í™•ì¥ì•± ì„¤ì¹˜ ì‹œì— ì´ˆê¸°í™”ê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ˆê¸° ìƒíƒœë¥¼ ì •ì˜í•  ë•Œ ì´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  \nì•„ë˜ ì˜ˆì‹œì—ì„œëŠ” eventë¥¼ ë“±ë¡í•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ìœ ì˜í•´ì•¼ í•  ê²ƒì€ eventì˜ ë“±ë¡ì€ pageì˜ ì‹œì‘ ì‹œì— ë™ê¸°ì ìœ¼ë¡œ ëª¨ë‘ ì„¤ì¹˜í•´ì£¼ì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ë§Œì•½, eventê°€ ë°œìƒí–ˆì„ ë•Œ, eventë¥¼ ë“±ë¡í•˜ëŠ” ê²ƒê³¼ ê°™ì€ ë™ì‘ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ë¥¸ ë°©ì‹ì„ ì´ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\n\n```javascript\nchrome.runtime.onInstalled.addListener(function() {\n  chrome.contextMenus.create({\n    \"id\": \"sampleContextMenu\",\n    \"title\": \"Sample Context Menu\",\n    \"contexts\": [\"selection\"]\n  });\n});\n\n// This will run when a bookmark is created.\nchrome.bookmarks.onCreated.addListener(function() {\n  // do something\n});\n```\n\nì¶”ê°€ì ìœ¼ë¡œ ìš”ì²­ì„ filtering í•˜ê±°ë‚˜, triggerë¥¼ ì¬ë“±ë¡í•˜ëŠ” ê³¼ì •ê³¼ ê°™ì€ ë‚´ìš©ì€ í•˜ë‹¨ ë§í¬ë¥¼ ì¶”ê°€ë¡œ ì°¸ê³ í•˜ê¸° ë°”ëë‹ˆë‹¤.\n\n[Background pages](https://developer.chrome.com/docs/extensions/mv3/background_pages/)\n\n## 4. Content scripts ë§Œë“¤ê¸°\n\ncontents scriptsëŠ” web pageì—ì„œ ë™ì‘í•  ë‚´ìš©ì— ëŒ€í•œ ë‚´ìš©ì„ ë‹´ìŠµë‹ˆë‹¤. DOMì„ ì‚¬ìš©í•˜ì—¬, scriptsëŠ” í˜„ì¬ ì›¹ í˜ì´ì§€ì˜ ì„¸ë¶€ì‚¬í•­ì„ ì¡°íšŒ, ë³€ê²½ ë˜ëŠ” ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  \ncontens scriptsëŠ” í™•ì¥ì•±ì˜ message êµí™˜ì„ í†µí•´ì„œ ë¶€ëª¨ í™•ì¥ì•±ì— ì˜í•´ ì‚¬ìš©ë˜ëŠ” chrome APIì— ì ‘ê·¼í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë˜í•œ, URLì„ í†µí•´ì„œ í™•ì¥ì•±ì˜ íŒŒì¼ì— ì ‘ê·¼í•˜ì—¬, ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ê¸°ë³¸ì ìœ¼ë¡œ i18n, storage, runtime(connect, getURL, id, onMessage, sendMessage, etc...) ê³¼ ê°™ì€ APIì— ë°”ë¡œ ì ‘ê·¼í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n```javascript\n// Code for displaying <extensionDir>/images/myimage.png:\nvar imgURL = chrome.runtime.getURL(\"images/myimage.png\");\ndocument.getElementById(\"someImage\").src = imgURL;\n```\n\n### ê³ ë¦½\n\në‹¤ë¥¸ í™•ì¥ì•±, ë˜ëŠ” pageì™€ ì¶©ëŒì„ ë§‰ê¸° ìœ„í•´ì„œ ê¸°ë³¸ì ìœ¼ë¡œ content scriptëŠ” ê³ ë¦½ë©ë‹ˆë‹¤. (browserì˜ tabê°„ì— ì„œë¡œ ë…ë¦½ì ì¸ ê²ƒì²˜ëŸ¼)  \nì˜ˆë¥¼ ë“¤ì–´, ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œê°€ ìˆë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤.\n\n```html\n<html>\n  <button id=\"mybutton\">click me</button>\n  <script>\n    var greeting = \"hello, \";\n    var button = document.getElementById(\"mybutton\");\n    button.person_name = \"Bob\";\n    button.addEventListener(\"click\", () =>\n      alert(greeting + button.person_name + \".\")\n    , false);\n  </script>\n</html>\n```\n\nì—¬ê¸°ì— content scriptsë¥¼ ì´ìš©í•´ì„œ ì•„ë˜ ì½”ë“œë¥¼ injectí•œë‹¤ë©´,\n\n```javascript\nvar greeting = \"hola, \";\nvar button = document.getElementById(\"mybutton\");\nbutton.person_name = \"Roberto\";\nbutton.addEventListener(\"click\", () =>\n  alert(greeting + button.person_name + \".\")\n, false);\n```\n\nbuttonì„ í´ë¦­í–ˆì„ ë•Œ, ë‘ ê°œì˜ alert ì°½ì„ ë§Œë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n### Inject scripts\n\ncontent scriptsëŠ” 3ê°€ì§€ì˜ ë°©ë²•ìœ¼ë¡œ ì‚½ì…ë˜ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n> **1. statically**\n\nmanifest.json íŒŒì¼ì— ì •ì ìœ¼ë¡œ ì„ ì–¸í•˜ë©´, ìë™ì ìœ¼ë¡œ pageê°€ settingë  ë•Œ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ëŠ” \"content\\_scripts\"ë¼ëŠ” ë¶€ë¶„ì— ì •ì˜ë©ë‹ˆë‹¤. ì—¬ê¸°ì—ëŠ” javascript, css ë“±ì„ í¬í•¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```json\n{\n\"manifest_version\": 3,\n...\n\"content_scripts\": [\n  {\n    \"matches\": [\"http://*.nytimes.com/*\"], // í•´ë‹¹ injectionì„ ìˆ˜í–‰í•  URLì„ ëª…ì‹œí•©ë‹ˆë‹¤. í•„ìˆ˜ì…ë ¥ì…ë‹ˆë‹¤.\n    \"css\": [\"myStyles.css\"], // ì¶”ê°€í•  cssíŒŒì¼ ì…ë‹ˆë‹¤.\n    \"js\": [\"contentScript.js\"] // ì¶”ê°€í•  jsíŒŒì¼ ì…ë‹ˆë‹¤.\n  }\n]\n}\n```\n\n> **2. dynamically**\n\n2021.04.01 ì‹œì ì—ì„œëŠ” ì•„ì§ ì™„ì „ ì œê³µí•˜ì§€ëŠ” ì•ŠëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.  \nhostë¥¼ ì•Œì§€ ëª»í•˜ê±°ë‚˜ ì•„ëŠ” hostë¡œ ë¶€í„° scriptê°€ ì¶”ê°€ ë˜ëŠ” ì‚­ì œë  í•„ìš”ê°€ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©í•©ë‹ˆë‹¤.\n\n`chrome.scripting.registerContentScript(optionsObject, callback);`\n\nor\n\n`chrome.scripting.unregisterContentScript(idArray, callback);`\n\n> **3. programmatically**\n\nêµ¬ì²´ì ì¸ ìƒí™© ë˜ëŠ” eventì— ëŒ€í•œ ë°˜ì‘ìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° ì›í•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.  \nì´ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ”, í•´ë‹¹ í˜ì´ì§€ì— ëŒ€í•œ hostì˜ permissionì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ëŠ” í™•ì¥ì•±ì˜ host\\_permissions ë¶€ë¶„ or ì¼ì‹œì ìœ¼ë¡œ activeTabì„ ì´ìš©í•´ì„œ ìŠ¹ì¸ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n```json\n{\n  \"manifest_version\": 3,\n  ...\n  \"permissions\": [\n    \"activeTab\"\n  ]\n}\n```\n\n```javascript\n// 1. íŒŒì¼ ì „ì²´ë¥¼ ì‹¤í–‰ ì£¼ì… ì‹œí‚¤ëŠ” ë°©ë²•\nchrome.runtime.onMessage.addListener((message, callback) => {\n  if (message == \"runContentScript\"){\n    chrome.scripting.executeScript({\n      file: 'contentScript.js'\n    });\n  }\n});\n\n// 2. íŠ¹ì • í•¨ìˆ˜ë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•\nfunction injectedFunction(color) {\n  document.body.style.backgroundColor = color;\n}\n\nchrome.runtime.onMessage.addListener((message, callback) => {\n  if (message == \"changeColor\"){\n    chrome.scripting.executeScript({\n      function: injectedFunction,\n      arguments: ['orange']\n    });\n  }\n});\n```\n\nì¶”ê°€ì ìœ¼ë¡œ matck ë²”ìœ„ë¥¼ ì„¸ë¶€ ì •ì˜í•˜ëŠ” ë¶€ë¶„ê³¼ frame ë° rum time ì‹œì  ê´€ë ¨ ì‚¬í•­ì€ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°í•´ì£¼ì„¸ìš”.\n\n[Content scripts](https://developer.chrome.com/docs/extensions/mv3/content_scripts/)\n\n## 5. option Page ë§Œë“¤ê¸°\n\nì‚¬ìš©ìì—ê²Œ optionì„ ì„ íƒí•  ìˆ˜ ìˆëŠ” pageë¥¼ customiseí•˜ì—¬ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” chrome í™•ì¥ì•±ì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” chrome://extensionsì—ì„œ Detailì„ ëˆŒë €ì„ ë•Œ ë³´ì´ëŠ” optionê³¼ ê´€ë ¨ëœ pageì…ë‹ˆë‹¤.  \nì´ëŠ” í•„ìš”ì— ë”°ë¼ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì•Œë§ê¸° ë•Œë¬¸ì— ë§í¬ë§Œ ë‹¬ì•„ë‘ê² ìŠµë‹ˆë‹¤.\n\n[Options](https://developer.chrome.com/docs/extensions/mv3/options/)\n\n## 6. UI elements ë§Œë“¤ê¸°\n\ní™•ì¥ì•±ì€ UI ìš”ì†Œë¥¼ ëª‡ ê°€ì§€ ì œê³µí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ì¼ë¶€ë§Œ ì†Œê°œí•©ë‹ˆë‹¤.\n\n### 1. Badge\n\ní™•ì¥ì•±ì˜ iconì„ ê²°ì •í•˜ê±°ë‚˜, í™œì„±í™” / ë¹„í™œì„±í™” ë“±ì„ êµ¬ë¶„í•  ë•Œ ì‚¬ìš©ë©ë‹ˆë‹¤. => ìƒì„¸ ë‚´ìš©ì€ í•˜ë‹¨ ë§í¬ ì°¸ê³   \nì—¬ê¸°ì„œëŠ” iconì„ ì„¤ì •í•˜ëŠ” ë°©ë²•ë§Œ ì ìŠµë‹ˆë‹¤.\n\n```json\n{\n  \"manifest_version\": 3,\n  ...\n  \"icons\": {\n    \"16\": \"extension_icon16.png\", // favicon\n    \"32\": \"extension_icon32.png\", // ê´€ë¦¬ì°½ Icon(windowì—ì„œ ê°€ë” ìš”êµ¬í•¨)\n    \"48\": \"extension_icon48.png\", // ê´€ë¦¬ì°½ Icon\n    \"128\": \"extension_icon128.png\" // chrome webstore Icon\n  }\n}\n```\n\n### 2. Popup\n\nbrowser ì°½ì˜ tooltipì„ í´ë¦­ ì‹œì— ë³´ì—¬ì£¼ê³  ì‹¶ì€ ë‚´ìš©ì„ ëª…ì‹œí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n```json\n{\n  \"manifest_version\": 3,\n  ...\n  \"browser_action\": {\n    \"default_popup\": \"popup.html\"\n  }\n  ...\n}\n```\n\npopup.html\n\n```html\n<html>\n  <head>\n    <title>Water Popup</title>\n  </head>\n  <body>\n      <img src='./stay_hydrated.png' id='hydrateImage'>\n      <button id='sampleSecond' value='0.1'>Sample Second</button>\n      <button id='15min' value='15'>15 Minutes</button>\n      <button id='30min' value='30'>30 Minutes</button>\n      <button id='cancelAlarm'>Cancel Alarm</button>\n    <script src=\"popup.js\"></script>\n  </body>\n</html>\n```\n\n### 3. Contextmenu\n\nìš°í´ë¦­ ì‹œì— ë‚˜ì˜¤ëŠ” ìƒìì— ì¶”ê°€ ë‚´ìš©ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\n\n```json\n{\n  \"manifest_version\": 3,\n  ...\n  \"permissions\": [\n    \"contextMenus\"\n  ],\n  \"background\": {\n    \"service_worker\": \"background.js\"\n  }\n}\n```\n\n`background.js`\n\n```javascript\nconst kLocales = {\n  'com.au': 'Australia',\n  'com.br': 'Brazil',\n  'ca': 'Canada',\n  'cn': 'China',\n  'fr': 'France',\n  'it': 'Italy',\n  'co.in': 'India',\n  'co.jp': 'Japan',\n  'com.ms': 'Mexico',\n  'ru': 'Russia',\n  'co.za': 'South Africa',\n  'co.uk': 'United Kingdom'\n};\n\nchrome.runtime.onInstalled.addListener(function() {\n  for (let key of Object.keys(kLocales)) {\n    chrome.contextMenus.create({\n      id: key,\n      title: kLocales[key],\n      type: 'normal',\n      contexts: ['selection'],\n    });\n  }\n});\n```\n\nì¶”ê°€ì ìœ¼ë¡œ, override page, command, ê²€ìƒ‰ì°½ ë””ìì¸ ë“± ì¶”ê°€ì ì¸ ìš”ì†Œë¥¼ ë³´ë ¤ë©´ ì•„ë˜ ë§í¬ë¥¼ ì°¸ì¡°í•´ì£¼ì„¸ìš”.\n\n[Design the user interface](https://developer.chrome.com/docs/extensions/mv3/user_interface/)\n\n## 7. Boilerplate\n\në§Œì•½, react, typescriptì— ìµìˆ™í•˜ë‹¤ë©´, í•„ìê°€ ë§Œë“¤ì–´ë†“ì€ boilerplateë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.\n\n[euidong/chrome-extension-boilerplate](https://github.com/euidong/chrome-extension-boilerplate)\n","slug":"chrome-extension","date":"2021-04-01 17:27","title":"Chrome Extension","category":"Web","tags":["ChromeExtension"],"desc":"í•´ë‹¹ ê¸€ì€ manifest version 3ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ëœ ê¸€ì…ë‹ˆë‹¤. í˜¹ì—¬ version 2ë¥¼ ì´ìš©í•˜ì…¨ë‹¤ë©´, version 2ì—ì„œ version 3ë¡œ migration í•˜ë©´ì„œ ì œê°€ ì ì–´ë†“ì€ ê¸€ì´ ìˆìœ¼ë‹ˆ ê·¸ê²ƒì„ ì°¸ê³  í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.[Chrome Extension version migration from V2 to V3](/posts/chrome-extension-migration-v2-to-v3)","thumbnailSrc":"https://euidong.github.io/images/chrome-extension.jpeg"},{"content":"\n## Intro\n\nìµœê·¼ 3ì¼ ì •ë„ë¥¼ chrome extension version 2ì—ì„œ version3ë¡œ migrationí•˜ë©´ì„œ ë³´ë‚¸ ê±° ê°™ìŠµë‹ˆë‹¤. ã… ã… \n\ní˜„ì¬ side projectë¡œ ì§„í–‰í•˜ê³  ìˆëŠ” ë‚´ìš©ì„ chrome extension storeì— ë°°í¬í• ë ¤ê³  í•˜ëŠ” ìˆœê°„ì— ê²½ê³ ì°½ì´ ëœ¨ë©°, ì´ì œë¶€í„°ëŠ” version 3ë§Œ ì—…ë¡œë“œë¥¼ ì§€ì›í•œë‹¤ëŠ” ê²½ê³ ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.ã… ã… ã… ã… ã… \n\nê·¸ë˜ì„œ ì´ì „ ì…‹ì—…ì„ ì™„ì „íˆ ëœ¯ì–´ê³ ì³ì•¼ ëœë‹¤ëŠ” ê²°ë¡ ì— ë„ë‹¬í–ˆê³ , ì´ì „ì— ì—´ì‹¬íˆ íˆ¬ë‹¥íˆ¬ë‹¥ ë§Œë“¤ì—ˆë˜ ê²°ê³¼ë¬¼ì„ ë‹¤ì‹œ ëœ¯ì–´ê³ ì³ì•¼í–ˆìŠµë‹ˆë‹¤.\n\nì´ ë‚´ìš©ì€ ì œê°€ ì§„í–‰í•˜ë©´ì„œ ë°”ê¾¼ ë‚´ìš©ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì €ì™€ ê°™ì´ version migrationì„ ì§„í–‰í•˜ì‹œëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.\n\n## 1. manifestì—ì„œ ë°”ë€Œì–´ì•¼ í•˜ëŠ” ë¶€ë¶„\n\nìœ„ì—ê°€ ê¸°ì¡´ version 2ë¼ë©´ ì•„ë˜ê°€ version 3ë¡œ ë°”ë€Œì—ˆì„ ë•Œì˜ ë‚´ìš©ì…ë‹ˆë‹¤. ì¼ë‹¨ ìš©ì–´ì ì¸ ë¶€ë¶„ì—ì„œ ì—„ì²­ ë³€ê²½ëœ ê²ƒì€ ì—†ìŠµë‹ˆë‹¤. (í•˜ì§€ë§Œ, API callì´ë¼ë“ ì§€ ê¸°íƒ€ ì—¬ëŸ¬ ë¶€ë¶„ì— ê´€í•´ì„œëŠ” ì •ì±…ì´ ë§¤ìš° ê°•ë ¥í•´ì§„ í¸ì…ë‹ˆë‹¤. ì´ëŠ” ë°”ë¡œ ë‹¤ìŒì— ì‚´í´ë´…ë‹ˆë‹¤.)\n\n```json\n// manifest.json\n{\n  \"manifest_version\": 2,\n  \"name\": \"chrome-ext-boiler-plate\",\n  \"version\": \"0.0.1\",\n  \"description\": \"This project is chrome extension boiler plate\",\n  \"icons\": {\n    \"16\": \"icon/16.png\",\n    \"32\": \"icon/32.png\",\n    \"48\": \"icon/48.png\",\n    \"128\": \"icon/128.png\"\n  },\n  \"background\": { \"scripts\": [\"background.js\"] },\n  \"content_scripts\": [{ \"matches\": [\"<all_urls>\"], \"js\": [\"content.js\"] }],\n  \"options_page\": \"option.html\",\n  \"browser_action\": { \"default_popup\": \"popup.html\" },\n  \"permissions\": [\"storage\", \"tabs\"],\n  \"content_security_policy\": \" script-src 'self' 'unsafe-eval'; object-src 'self'\"\n}\n```\n\n```json\n// manifest.json\n{\n  \"manifest_version\": 3,\n  \"name\": \"chrome-ext-boiler-plate\",\n  \"version\": \"0.0.1\",\n  \"description\": \"This project is chrome extension boiler plate\",\n  \"icons\": {\n    \"16\": \"icon/16.png\",\n    \"32\": \"icon/32.png\",\n    \"48\": \"icon/48.png\",\n    \"128\": \"icon/128.png\"\n  },\n  \"background\": { \"service_worker\": \"background.js\" },\n  \"content_scripts\": [{ \"matches\": [\"<all_urls>\"], \"js\": [\"content.js\"] }],\n  \"options_page\": \"option.html\",\n  \"permissions\": [\"storage\", \"tabs\"],\n  \"action\": { \"default_popup\": \"popup.html\" }\n}\n```\n\n> **ìš”ì•½**\n\n- manifest\\_version : 2 => 3\n- background.scripts => background.service\\_worker  \n  ë°°ì—´ì—ì„œ í•˜ë‚˜ì˜ ë‹¨ì¼ service\\_workerë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ê¸°ì¡´ì— permanentê´€ë ¨ ì„¤ì •ì„ í•˜ì‹  ë¶„ë“¤ì€ ì´ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\n-Â browser_action => action  \n  ê¸°ì¡´ì— ìˆë˜ ë‹¤ë¥¸ actionê³¼ í†µí•©ë˜ì–´ í•˜ë‚˜ì˜ actionì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ëª…ì¹­ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. ì‚¬ì‹¤ ì—¬ê¸°ê¹Œì§€ëŠ” í™”ê°€ë‚˜ì§€ ì•ŠìŠµë‹ˆë‹¤.\n\n## 2. ë³´ì•ˆ ì„¤ì •\n\nversion 3ë¡œ ì˜¬ë¼ì˜¤ë©´ì„œ ë³´ì•ˆì •ì±…ì´ ì •ë§ ê°•í™”ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.\n\níŠ¹íˆ CORS ë¶€ë¶„ì—ì„œ 1ì°¨ ë©˜ë¶•ì„ ê²ªì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\në§Œì•½, serverì—ì„œ ê¸°ì¡´ì˜ CORS acceptë¥¼ ë‹¨ìˆœíˆ \"\\*\"ë¡œ ì„¤ì •í•˜ì˜€ë‹¤ë©´, ì €ì²˜ëŸ¼ ê°œê³ ìƒì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¼ë‹¨, popupì—ì„œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²½ìš°ì— ì €ëŠ” \"chrome-extension://\\*\" ë¡œ ì„¤ì •ì„ ì§ì ‘ì ìœ¼ë¡œ í•´ì£¼ì–´ì•¼ ì œëŒ€ë¡œ í†µì‹ ì„ í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ê±° ì§„ì§œ ë„ˆë¬´ í˜ë“¤ê²Œ ì°¾ì•˜ìŠµë‹ˆë‹¤. ã… ã…  (ì„œë²„ ë‹¨ì—ì„œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¬¸ì œì¸ì§€ ì•„ë‹ˆë©´, ë‹¤ë¥¸ ì„¤ì • ë¬¸ì œì¸ì§€ëŠ” ì²´í¬ëŠ” ì•ˆí–ˆìŠµë‹ˆë‹¤. ã… ì—¬ëŸ¬ë¶„ë„ ì¡°ì‹¬í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.)\n\në˜í•œ, websocket ì„¤ì •ë„ êµ‰ì¥íˆ ë¹¡ì„¸ì¡ŒìŠµë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” wss ìš”ì²­ì„ ë³´ë‚¼ ë•Œ, INVALID CERTIFICATEë¥¼ í™•ì¸í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ì¸ì¦ì„œ ëŒ€ì¶© ì„¤ì •í•˜ê³  ì§„í–‰í–ˆì—ˆëŠ”ë°, ì´ì œëŠ” backgroundì—ì„œ connection ìƒì„± ì‹œì— ì´ë¥¼ ë°˜ë“œì‹œ í™•ì¸í•©ë‹ˆë‹¤. ë”°ë¼ì„œ, https ìƒì„± í•˜ì‹¤ ë•Œ ì„œëª… í™•ì‹¤í•˜ê²Œ í•˜ì‹œê³ , ì„¤ì •í•˜ì‹œëŠ”ê²Œ ì¢‹ì„ ê²ë‹ˆë‹¤. (ì €ëŠ” traefikì„ ì´ìš©í•˜ëŠ”ë° ì•Œì•„ì„œ ì¸ì¦ì„œ ë°œê¸‰ í•´ì£¼ëŠ” ê²Œ ë„ˆë¬´ í¸ë¦¬í•©ë‹ˆë‹¤.)\n\n![chrome-ext-mig-01](/images/chrome-ext-mig-01.png)\n\n## 3. Webpack ì„¤ì •\n\nìš”ì¦˜ ê°™ì€ ì‹œëŒ€ì— ìƒ javascript, jQueryë¡œ frontë¥¼ ê°œë°œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì—, webpackì„ í†µí•´ì„œ vueë‚˜ reactë¥¼ ì‚¬ìš©í•˜ì‹¤ ê°€ëŠ¥ì„±ì´ ë†’ìœ¼ì‹¤ ê²ë‹ˆë‹¤. ë†€ë¼ìš´ ì‚¬ì‹¤ì€ ìš°ë¦¬ì˜ webpackì´ ì•„ë¬´ ì„¤ì •ì„ í•´ì£¼ì§€ ì•Šìœ¼ë©´ development modeì—ì„œëŠ” build fileë¡œ evalì´ ì”ëœ© ë•ì¹ ë˜ì–´ ìˆëŠ” ì½”ë“œë¥¼ return í•©ë‹ˆë‹¤.\n\n![chrome-ext-mig-02](/images/chrome-ext-mig-02.png)\n\nê·¸ëŸ°ë°, ì´ë²ˆ v3ì—ì„œëŠ” evalì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ë³´ì•ˆìƒì˜ ìœ„í˜‘ìœ¼ë¡œ ì²´í¬í•˜ê³ , ê°œë°œìƒí™©ì—ì„œë„ í—ˆìš©í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (ë¬¼ë¡  sandboxë¡œ ì„¤ì •í•´ì„œ í•  ìˆ˜ ìˆì§€ë§Œ, ì´ë ‡ê²Œ ë˜ë©´ manifest.json fileì„ development, production êµ¬ë¶„í•´ì•¼í•˜ê³ , ì¼ë‹¨ ì´ì— ëŒ€í•œ ì˜ˆì œë¥¼ ì œê°€ ì°¾ì§€ ëª»í–ˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í†µí•œ ì„¤ì •ì€ ì €ëŠ” í¬ê¸°í–ˆìŠµë‹ˆë‹¤. ã… ) ê¸°ì¡´ì—ëŠ”Â  manifestì—ì„œ content\\_security\\_policyì—ì„œ evalì„ í—ˆìš©í•´ì£¼ë©´ ëì´ì˜€ëŠ”ë°, version 3ë¡œ ë°”ë€Œë©´ì„œ sandboxë¼ëŠ” ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë©´ì„œ, ì €í¬ë¥¼ ê³¤í˜¹ìŠ¤ëŸ½ê²Œ í•©ë‹ˆë‹¤. ì¼ë‹¨ ì°¾ê¸° ì‰¬ìš´ ì˜ˆì œë¡œ sandboxì— ì ìš©í•˜ë‹ˆ chrome APIê°€ ë§‰íˆê±°ë‚˜, http API callì´ ë§‰íˆëŠ” ë“± ì €ë¥¼ ë„ˆë¬´ë‚˜ í˜ë“¤ê²Œ í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì €ëŠ” webpack ì„¤ì •ì„ ë§Œì ¸ì„œ ë‹¤ì‹œ ê³ ì³ì“°ìëŠ” ê²°ë¡ ì„ ë‚´ë ¸ê³ , ê²€ìƒ‰ê³¼ ê²€ìƒ‰ê³¼ ë” ê²€ìƒ‰ì„ ê±°ì¹œ ê²°ê³¼ë¡œ webpack.config.jsì—ì„œ evalì„ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” modeë¥¼ ì°¾ì•„ëƒˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì ìš©í•œ ê²°ê³¼ ì§„ì§œë¡œ evalì´ ì‚¬ë¼ì¡Œê³ , build ì†ë„ë„ êµ‰ì¥íˆ ë¹¨ëê¸°ì— ì•„ì£¼ ê¸°ë¶„ ì¢‹ê²Œ ì„¤ì •ì„ ë§ˆì³¤ìŠµë‹ˆë‹¤. ê»„ê»„..\n\nì•„ë˜ëŠ” devtoolsë¥¼ cheap-module-source-mapìœ¼ë¡œ ì„¤ì •í–ˆì„ ë•Œ ë‚˜ì˜¤ëŠ” ê²°ê³¼ë¬¼ì…ë‹ˆë‹¤. ì •ë§ ë‹¤í–‰íˆë„ evalì´ ì—†ìŠµë‹ˆë‹¤.\n\n![chrome-ext-mig-03](/images/chrome-ext-mig-03.png)\n\në§ˆë¬´ë¦¬í•˜ë©´ì„œ, ë‹¤ ë‚˜ìœì ë§Œ ìˆì—ˆë˜ ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ì ì„ ì§šì–´ë³´ê³  ë„˜ì–´ê°‘ë‹ˆë‹¤. ê¸°ì¡´ì—ëŠ” webpack pluginì¸ webpack-chrome-extension-reloader ë¥¼ ì´ìš©í•´ì„œ hot reloadingì„ êµ¬í˜„í–ˆì—ˆëŠ”ë°, version3ë¡œ ë„˜ì–´ê°€ë©´ì„œ codeê°€ ë°”ë€Œë©´ ìë™ìœ¼ë¡œ í•´ì¤€ë‹¤ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, webpack --watch ë§Œ ì„¤ì •í•´ì¤˜ë„ ì‰½ê²Œ reloadingì´ ë©ë‹ˆë‹¤. ì•„ë§ˆ chromeì—ì„œ íŒŒì¼ ë³€í™˜ì´ ìƒê¸°ë©´ ìë™ìœ¼ë¡œ reloading í•˜ëŠ” ê±° ê°™ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í•´ë‹¹ ì„¤ì •ì€ ì§€ì›Œì£¼ì—ˆìŠµë‹ˆë‹¤.\n\nì´ë ‡ê²Œ í•´ì„œ ê±°ì˜ í•œ 3ì¼ ì •ë„ ê³¨ë¨¸ë¦¬ë¥¼ ì•“ìœ¼ë©´ì„œ migrationí•œ ë‚´ìš©ì„ ì •ë¦¬í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë¶„ë“¤ì—ê²Œë„ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ë„¤ìš”.\n\në§ˆì§€ë§‰ìœ¼ë¡œ github linkì…ë‹ˆë‹¤. ì´ê±° ë³´ê³  ì°¸ê³  í•˜ì‹œëŠ”ê²Œ ê°€ì¥ ë¹ ë¥¼ ê±° ê°™ìŠµë‹ˆë‹¤.\n\n[ğŸ”— GitHub](https://github.com/euidong/chrome-extension-boilerplate)\n","slug":"chrome-extension-migration-v2-to-v3","date":"2022-02-14 21:25","title":"Chrome Extension Migrantion V2ì—ì„œ V3","category":"Web","tags":["ChromeExtension"],"desc":"ìµœê·¼ 3ì¼ ì •ë„ë¥¼ chrome extension version 2ì—ì„œ version3ë¡œ migrationí•˜ë©´ì„œ ë³´ë‚¸ ê±° ê°™ìŠµë‹ˆë‹¤. ã… ã… í˜„ì¬ side projectë¡œ ì§„í–‰í•˜ê³  ìˆëŠ” ë‚´ìš©ì„ chrome extension storeì— ë°°í¬í• ë ¤ê³  í•˜ëŠ” ìˆœê°„ì— ê²½ê³ ì°½ì´ ëœ¨ë©°, ì´ì œë¶€í„°ëŠ” version 3ë§Œ ì—…ë¡œë“œë¥¼ ì§€ì›í•œë‹¤ëŠ” ê²½ê³ ë¥¼ ë°›ì•˜ìŠµë‹ˆë‹¤.ã… ã… ã… ã… ã… ê·¸ë˜ì„œ ì´ì „ ì…‹ì—…ì„ ì™„ì „íˆ ëœ¯ì–´ê³ ì³ì•¼ ëœë‹¤ëŠ” ê²°ë¡ ì— ë„ë‹¬í–ˆê³ , ì´ì „ì— ì—´ì‹¬íˆ íˆ¬ë‹¥íˆ¬ë‹¥ ë§Œë“¤ì—ˆë˜ ê²°ê³¼ë¬¼ì„ ë‹¤ì‹œ ëœ¯ì–´ê³ ì³ì•¼í–ˆìŠµë‹ˆë‹¤.ì´ ë‚´ìš©ì€ ì œê°€ ì§„í–‰í•˜ë©´ì„œ ë°”ê¾¼ ë‚´ìš©ì„ ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤. ì €ì™€ ê°™ì´ version migrationì„ ì§„í–‰í•˜ì‹œëŠ” ë¶„ë“¤ì—ê²Œ ë„ì›€ì´ ë˜ì—ˆìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/chrome-extension.jpeg"},{"content":"\n## Intro\n\nBlogë¥¼ ê²€ìƒ‰ ì—”ì§„ë“¤ì— ë…¸ì¶œí•˜ê¸° ìœ„í•œ ì¼ì§€ë¥¼ ê¸°ë¡í•œë‹¤.\n\në¨¼ì € ë‚´ê°€ ì›í•˜ëŠ” ê²ƒì€ êµ¬ê¸€, ë„¤ì´ë²„, ë‹¤ìŒì— ë‚˜ì˜ ë¸”ë¡œê·¸ì˜ íƒœê·¸, ì¹´í…Œê³ ë¦¬, íƒ€ì´í‹€ë¡œ ê²€ìƒ‰ì–´ê°€ ë…¸ì¶œì´ ë˜ëŠ” ê²ƒì´ë‹¤.\nì´ë¥¼ ìœ„í•´ì„œ ë¬´ì—‡ì„ í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì •ë¦¬í•œë‹¤.\n\n## robots.txt\n\nrobots.txtëŠ” CRAë¡œ React Projectë¥¼ ìƒì„±í–ˆì„ ë•Œë„, ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤„ë§Œí¼ ê°€ì¥ ê¸°ë³¸ì ì¸ ìš”ì†Œì´ë‹¤. ì´ëŠ” ê°€ì¢… ê²€ìƒ‰ ì—”ì§„ì˜ Postingì„ Crawlingí•˜ëŠ” ì¥ì¹˜ë“¤ì—ê²Œ í•´ë‹¹ Postingì— ëŒ€í•œ ì ‘ê·¼ ê¶Œí•œì„ ëª…ì‹œí•´ë†“ëŠ” ê³³ì´ë‹¤. ë”°ë¼ì„œ, ì‘ì„± ì‹œì—ëŠ” ê°„ëµí•˜ê²Œ ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n```text\nUser-agent: *\nDisallow:\n```\n\nì´ëŠ” ì–´ë– í•œ ê²€ìƒ‰ ì—”ì§„ ë´‡ì˜ ì ‘ê·¼ì„ í—ˆë½í•˜ë©°, ëª¨ë“  í•˜ìœ„ uriì— ëŒ€í•œ ì ‘ê·¼ì„ í—ˆë½í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\në” ì•Œê³  ì‹¶ë‹¤ë©´ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì. <https://www.robotstxt.org/robotstxt.html>\n\n## sitemap.xml\n\nì›¹ í˜ì´ì§€ ë‚´ì˜ ëª¨ë“  í˜ì´ì§€ ëª©ë¡ì„ ë‚˜ì—´í•œ íŒŒì¼ì´ë‹¤. ì´ëŠ” siteì— í•´ë‹¹í•˜ëŠ” ëª¨ë“  urlì„ ë“±ë¡í•˜ê³ , ì–´ëŠê³³ì— ì–´ëŠ ì»¨í…ì¸ ê°€ ì¡´ì¬í•˜ëŠ”ì§€ë¥¼ ì•Œë ¤ì£¼ëŠ” mapping tableì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ë¥¼ ëª…ì‹œí•´ë‘ì–´ì•¼ë§Œ í›„ì— botë“¤ì´ ì‘ì—…ì„ í•  ë•Œ, ì¡°íšŒë¥¼ í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \n\n`next-sitemap`ì´ë¼ëŠ” ë„êµ¬ë¥¼ ì´ìš©í•´ì„œ ìë™ ìƒì„±í•˜ë„ë¡ ì„¤ì •ì„ í•´ë‘ì—ˆë‹¤.\n\nì´ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ìŒ ìë£Œë“¤ì„ í™•ì¸í•´ë³´ë„ë¡ í•˜ì.\n\n1. [ğŸ”— next-sitemap](https://www.npmjs.com/package/next-sitemap)\n2. [ğŸ”— í˜„ì¬ ë¸”ë¡œê·¸ ì„¤ì •](https://github.com/euidong/euidong.github.io/blob/dev/next-sitemap.config.js)\n3. [ğŸ”— í˜„ì¬ ë¸”ë¡œê·¸ì˜ ì‚¬ì´íŠ¸ë§µ](/sitemap.xml)\n\nNaverì—ì„œëŠ” sitemapì„ ë“±ë¡í•´ì£¼ì–´ì•¼ë§Œ ì •ìƒì ìœ¼ë¡œ ìˆ˜ì§‘í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆëŠ”ë° êµ¬ê¸€ì—ì„œëŠ” ë°”ë¡œë°”ë¡œ Crawlingí•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.\n\n> **Google Search Console**\n\n![google-search-console-indexing](/images/google-search-console-indexing.png)\n\n> **Naver Search Advisor**\n\n![naver-search-advisor-indexing](/images/naver-search-advisor-indexing.png)\n\n---\n\n## Metadata\n\nê²°ë¡ ì ìœ¼ë¡œ ë§í•˜ë©´, SEOì—ì„œ ê°€ì¥ í•„ìš”í•œ ê²ƒì´ Metadataì˜ ì •ë¦¬ì´ë‹¤. ê·¸ ì¤‘ì—ì„œë„ ê°€ì¥ í•µì‹¬ì´ ë˜ëŠ” ê²ƒì´ ë‘ ê°€ì§€ì´ë‹¤.\n\n1. **title** : ë§ ê·¸ëŒ€ë¡œ Postingì˜ ì œëª©ì´ë‹¤.\n2. **description** : ë§ ê·¸ëŒ€ë¡œ Postingì— ëŒ€í•œ ìš”ì•½ ë˜ëŠ” ì†Œê°œ ì •ë„ë¼ê³  ë³´ë©´ ë˜ê² ë‹¤.\n\nì´ë¥¼ ì ì ˆíˆ ì„¤ì •í•´ì£¼ë©´ ì´ë¥¼ ìˆ˜ì§‘í•´ê°€ëŠ” botì´ ì‰½ê²Œ ì´ë¥¼ ì¸ì‹í•  ìˆ˜ ìˆê³ , ê²€ìƒ‰ì´ ì•ˆì •ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì–´ì§„ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ í•´ë‹¹ Blogì—ì„œëŠ” NextJSë¥¼ í†µí•´ì„œ **title**ë¥¼ Posting ì œëª©ìœ¼ë¡œ ì§€ì •í•˜ê³ , **description**ì€ ë³¸ë¬¸ì˜ Intro partë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•˜ë„ë¡ ì„¤ì •í•´ë‘ì—ˆë‹¤.\n\n### Open Graph\n\nMetadataì˜ í•­ëª©ì— í¬í•¨ë˜ëŠ” OGë¥¼ ì œëŒ€ë¡œ ì„¤ì •í•˜ì§€ ì•Šìœ¼ë©´ Naverì—ì„œëŠ” ì´ë¥¼ ì œëŒ€ë¡œ ì¸ì‹í•˜ì§€ ì•ŠëŠ”ë‹¤ê³ í•˜ë‹ˆ ì´ ë˜í•œ ì œëŒ€ë¡œ ì…ë ¥í•´ì£¼ë„ë¡ í•˜ì. í…ŒìŠ¤íŠ¸ í•  ë•Œì—ëŠ” ê°„ë‹¨í•˜ê²Œ Kakaotalk, Facebook ë“±ìœ¼ë¡œ ë³´ë‚´ë³´ë©° ì œëŒ€ë¡œ ë…¸ì¶œì´ ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ë©´ ëœë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [NASA](https://unsplash.com/@nasa?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/website?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"seo","date":"2022-04-20 09:00","title":"SEO","category":"Web","tags":["SEO","GoogleSearchEngine","ê²€ìƒ‰ì–´ ë…¸ì¶œ","êµ¬ê¸€ ê²€ìƒ‰ì–´ ë…¸ì¶œ"],"desc":"Blogë¥¼ ê²€ìƒ‰ ì—”ì§„ë“¤ì— ë…¸ì¶œí•˜ê¸° ìœ„í•œ ì¼ì§€ë¥¼ ê¸°ë¡í•œë‹¤.ë¨¼ì € ë‚´ê°€ ì›í•˜ëŠ” ê²ƒì€ êµ¬ê¸€, ë„¤ì´ë²„, ë‹¤ìŒì— ë‚˜ì˜ ë¸”ë¡œê·¸ì˜ íƒœê·¸, ì¹´í…Œê³ ë¦¬, íƒ€ì´í‹€ë¡œ ê²€ìƒ‰ì–´ê°€ ë…¸ì¶œì´ ë˜ëŠ” ê²ƒì´ë‹¤.ì´ë¥¼ ìœ„í•´ì„œ ë¬´ì—‡ì„ í•´ì•¼ í•˜ëŠ”ì§€ë¥¼ ì •ë¦¬í•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/web.jpg"},{"content":"\n## Intro\n\ní•´ë‹¹ í¬ìŠ¤íŒ…ì€ ë¸”ë¡œê·¸ë¥¼ ì§ì ‘ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ ê²ªì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ì •ë¦¬í•œ ë‚´ìš©ì´ë‹¤.\n\në‚˜ì˜ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ í–¥í•œ ì¼ëŒ€ê¸°ëŠ” 2019ë…„ë„ì—ì„œ ë¶€í„° ì‹œì‘ëœë‹¤.\n\n## JSP / Servlet\n\n2019ë…„ë„ì— êµ°ëŒ€ë¥¼ ë§‰ ì „ì—­í•˜ê³ , í•™ì ì„ ì˜ ì±™ê¸°ë©´ì„œ ì—¬ëŸ¬ê°€ì§€ í–‰ì‚¬ì— ì°¸ì—¬í–ˆë‹¤. ê·¸ ê³¼ì •ì—ì„œ ê¸°ìˆ  ë¸”ë¡œê·¸ë¥¼ ì œì‘í•˜ê² ë‹¤ëŠ” ê¿ˆì„ ê¾¸ê³  ì‘ì—…ì— ì°©ìˆ˜í•œë‹¤.\nê·¸ ë‹¹ì‹œì—ëŠ” JSPì™€ Servletì„ ì´ìš©í•œ ë°©ë²•ì„ í†µí•´ì„œ Postingí•˜ëŠ” ê²ƒì„ ì‹œë„í–ˆë‹¤.\n\ngithub : [euidong/blog](https://github.com/euidong/blog)\n\ní•´ë‹¹ ë°©ì‹ì€ markdown fileì„ ê·¸ëŒ€ë¡œ ê°€ì ¸ì™€ì„œ renderingí•˜ì—¬ ë§Œë“¤ì—ˆë‹¤. í•˜ì§€ë§Œ, jar fileì„ ì‹¤í–‰í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ, JAVA Virtual Machineì´ í•„ìš”í•˜ê¸°ì— ê²°ë¡ ì ìœ¼ë¡œ ì´ë¥¼ í˜¸ìŠ¤íŒ…í•  machineì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ, AWS free tierë¥¼ ì´ìš©í•´ì„œ ë°°í¬í–ˆì§€ë§Œ, ë‹¤ì†Œ ë°°í¬ ê´€ë¦¬ê°€ ê·€ì°®ê³ , ë‹¹ì‹œì—ëŠ” frontend & backend ë“± ì•„ì§ ê°œë…ì´ ì œëŒ€ë¡œ ìŠ¤ì§€ ì•Šì•˜ê¸° ëŒ€ë¬¸ì— ì¤‘ê°„ì— í¬ìŠ¤íŒ…ì„ ì¡°ê¸° ì¢…ë£Œí–ˆë‹¤.\n\nê²°êµ­ JSP + Servletì„ ì´ìš©í•œ ì‹œë„ëŠ” ì¢…ë£Œëœë‹¤.\n\n## Gatsby\n\ní›„ì— 2021ë…„ë„ 1ì›”ì— ë‹¤ì‹œ ìƒˆë¡­ê²Œ ë¸”ë¡œê·¸ë¥¼ ì“°ê² ë‹¤ëŠ” í¬ë¶€ë¥¼ ê°–ê³ , ë¸”ë¡œê·¸ ì‘ì„± ë°©ë²•ì„ ì°¾ëŠ”ë‹¤. ë‹¹ì‹œì—ëŠ” Reactë¥¼ ì´ìš©í•´ì„œ ë‹¤ìˆ˜ì˜ Applicationì„ ì œì‘í•´ë³¸ ê²½í—˜ì´ ìˆì—ˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ì´ìš©í•œ Blogë¥¼ ë§Œë“¤ë ¤ê³  í–ˆë‹¤. ìì„¸íˆ ê¸°ì–µì€ ì•ˆë‚˜ëŠ”ë° Gatsby Showcaseì— ìˆëŠ” source codeë¥¼ ì´ìš©í•´ì„œ Blogë¥¼ ì œì‘í–ˆë‹¤. í•˜ì§€ë§Œ, Gatsbyì— ëŒ€í•´ ì•„ëŠ”ê²Œ ì—†ê³ , ì‹œê°„ì„ ì“¸ ì—¬ìœ ê°€ ì—†ì–´ì„œ ê²°êµ­ì—ëŠ” ì¤‘ë„ì— ë©ˆì¶˜ë‹¤. ì¶”ê°€ì ìœ¼ë¡œ Github actionìœ¼ë¡œ CI/CD êµ¬í˜„ì„ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ê¹Œì§€ë„ ì§„í–‰í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ê²°êµ­ ì œëŒ€ë¡œ ì§„í–‰ëœ ê²ƒ ì—†ì´ ì¢…ë£Œë˜ì—ˆë‹¤.\n\ngithub : [euidong/euidong.github.io/dev@deprecated](https://github.com/euidong/euidong.github.io/tree/dev%40deprecated)\n\n## Tistory\n\n2021ë…„ë„ 3ì›”ì— ê²°êµ­ ì§ì ‘ ì œì‘ì„ í•˜ëŠ” ê²ƒì„ í¬ê¸°í•˜ê³ , Tistoryë¥¼ ì´ìš©í•´ì„œ ë¸”ë¡œê·¸ì— í¬ìŠ¤íŒ…ì„ ì‹œì‘í•œë‹¤. í•´ë‹¹ ì‹œê¸°ë¶€í„° ì‹œì‘í•´ì„œ ëª‡ ê°œì˜ í¬ìŠ¤íŒ…ì„ ì‘ì„±í•˜ì˜€ë‹¤. ëŒ€ëµ 35ê°œ ì •ë„ì˜ í¬ìŠ¤íŒ…ì„ ì‘ì„±í–ˆê³ , ìµœê·¼ì— ì´ë¥´ëŸ¬ì„œ ì‘ì„±ì˜ í•œê³„ë¥¼ ëŠë¼ë©° ê°ˆì•„íƒ€ì•¼ê² ë‹¤ê³  ìƒê°í–ˆë‹¤.\n\në‹¤ìŒì€ ì§ì ‘ ì»¤ìŠ¤í…€ì„ í•´ì•¼ê² ë‹¤ê³  ìƒê°í–ˆë˜ ì´ìœ ì´ë‹¤.\n\n1. í˜¸í™˜ì„±ì´ ë–¨ì–´ì§„ë‹¤. => Markdownìœ¼ë¡œ ë³€í™˜ë„ ê°€ëŠ¥í•˜ì§€ë§Œ, Githubì™€ ì™„ë²½í•œ í˜¸í™˜ì´ ì•ˆëœë‹¤.\n2. ê°€ë” ëª¨ë°”ì¼ì—ì„œ ë¬¸ìê°€ ê¹¨ì§„ë‹¤. => ì•„ë§ˆ MACìœ¼ë¡œ ì‘ì„±í•˜ëŠ” ê²½ìš° ë¬¸ìê°€ ê¹¨ì§€ëŠ” ê²ƒ ê°™ë‹¤. ê·¼ë°, ì´ë¥¼ ë§¤ë²ˆ ëª¨ë°”ì¼ë¡œ ì¼œì„œ í™•ì¸í•˜ê¸°ì—ëŠ” ë„ˆë¬´ ë²ˆê±°ë¡­ë‹¤.\n3. ì»¤ìŠ¤í…€ì„ í•  ë•Œ ë‹¤ë¥¸ Libraryë¥¼ ë§˜ëŒ€ë¡œ ê°€ì ¸ì™€ì„œ ì“¸ ìˆ˜ ìˆì§€ë§Œ, pure js, jquery ê¸°ë°˜ìœ¼ë¡œë§Œ ê°€ëŠ¥í•˜ê³ , ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ì§€ ì•Šë‹¤.\n4. ê°€ë” ì‘ì„± ê²°ê³¼ê°€ ë„ˆë¬´ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n5. tag ê´€ë¦¬ê°€ ë¶ˆí¸í•˜ë‹¤.\n6. ê¸°ë³¸ UIê°€ ì•ˆì´ì˜ë‹¤.\n\nëª‡ ê°€ì§€ ì´ìœ ê°€ ë” ìˆì—ˆë˜ ê±° ê°™ì€ë°, ì•„ë§ˆ ì´ì •ë„ê°€ ë¬¸ì œì˜€ë˜ ê±° ê°™ë‹¤. ì•”íŠ¼ ë‚´ê°€ ê´€ë¦¬í•˜ì§€ ëª»í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¸í•œ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ìˆì—ˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì™„ì „ ì»¤ìŠ¤í…€ì„ ë‹¤ì‹œ ê²°ì •í•˜ì˜€ë‹¤.\n\ntistory: [justlog](https://justlog.tistory.com)\n\n## ì™„ì „ ì»¤ìŠ¤í…€\n\n### ìƒ React\n\nì²˜ìŒì—ëŠ” ìƒ Reactë¥¼ í†µí•´ì„œ Blogë¥¼ ë§Œë“¤ì–´ì•¼ê² ë‹¤ê³  ìƒê°í–ˆë‹¤. ê°€ì¥ ì¼ë°˜ì ìœ¼ë¡œ í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì´ê³ , ë‹¤ë¥¸ static page generating ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ëŠ” react frameworkë¥¼ ë‹¤ì‹œ ê³µë¶€í•˜ëŠ” workloadë¥¼ ì§€ê³  ì‹¶ì§€ ì•Šì•˜ê³ , êµ³ì´ í•„ìš”í•˜ì§€ ì•Šì€ ì˜ì¡´ì„±ì„ ë§Œë“¤ê³  ì‹¶ì§€ ì•Šì•„ì„œ ê²°êµ­ ìƒ Reactë¡œ ë°”ë¡œ ì‘ì—…ì„ ì‹œì‘í•œë‹¤.\n\në‹¹ì‹œì—ëŠ” Tistoryì—ì„œ í•œê³„ë¥¼ ëŠê¼ˆë˜ ë¶€ë¶„ì„ ê³ ì¹˜ë©´ì„œ, Tistoryì—ì„œ ê°–ê³  ì‹¶ì—ˆë˜ ì¥ì ì„ ê°€ì ¸ê°€ê³ ì í–ˆë‹¤.\n\n1. í˜¸í™˜ì„±ì´ ë–¨ì–´ì§€ë˜ ì ì€ Markdownì„ ì´ìš©í•´ì„œ ì‘ì„±í•˜ê³ , Github viewer style(GFM, Github Flavor Markdown)ì„ ì‚¬ìš©í•˜ê¸°ë¡œ í•œë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ ë¸”ë¡œê·¸ì˜ ëª¨ë“  ê¸€ì„ Githubì— ì˜¬ë ¤ë„ ì´ë¯¸ì§€ ê²½ë¡œ ë¹¼ê³ ëŠ” ë§¤ìš° ì˜ ì‘ë™í•  ê²ƒì´ë‹¤. (ì´ëŠ” í›„ì— ì´ë¯¸ì§€ í˜¸ìŠ¤íŒ… CDNì„ ë”°ë¡œ ì„¤ì •í•˜ë©´ í•´ê²°ë¨.)\n2. Tistoryì—ì„œ ì¥ì ì´ë¼ê³  ìƒê°í–ˆë˜, Categoryë¡œ ì‘ì„±ê¸€ì„ ë¬¶ê³ , Tagë“¤ë¡œ ë‹¤ì‹œ í•œ ë²ˆ ë” ë¶„ë¥˜í•œë‹¤.\n3. Postingì„ ë³´ê¸° ì‰½ê²Œ ì •ë¦¬ë˜ì–´ìˆì–´ì•¼ í•œë‹¤.\n4. Dark Modeë¥¼ ì§€ì›í•´ì•¼ í•œë‹¤.\n5. ì¡°íšŒìˆ˜ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œ Google Analytics ì„¤ì •ì„ í•´ì•¼í•œë‹¤.\n6. êµ¬ê¸€ / ë„¤ì´ë²„ ê²€ìƒ‰ì— ë…¸ì¶œë˜ì–´ì•¼ í•œë‹¤.\n7. ê´‘ê³ ë¥¼ ê²Œì‹œí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\n8. Githubì— Pushí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ Postingì´ ê²Œì‹œë  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. (Github Action)\n9. Categoryì™€ Tagë“¤ì€ Markdownì•ˆì— ì‘ì„±í•˜ì§€ë§Œ, ì´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ë”°ë¼ì„œ, codeë¥¼ buildí•  ë•Œ jsonìœ¼ë¡œ generating í•  ìˆ˜ ìˆëŠ” ë¡œì§ì„ ì„¤ê³„í•œë‹¤.\n10. UIëŠ” ìµœëŒ€í•œ Simple í•˜ê³  ê¹”ë”í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ì˜€ë‹¤.\n\në”°ë¼ì„œ, ëª¨ë“  Button ë¶€í„° ëª¨ë“  UIë¥¼ ì§ì ‘ ì œì‘(ì—¬íƒ€ ë””ìì¸ ì‚¬ìš© x - material, ant ë“±)í•˜ê³ , Routing ì„¤ì •í•˜ê³ , ì‘ì—…ì„ ëª¨ë‘ ë§ˆë¬´ë¦¬í•œë‹¤.\n\nì—¬ê¸°ê¹Œì§€ëŠ” ëª¨ë“  ì‘ì—…ì´ ìˆœì¡°ë¡­ê²Œ ì§„í–‰ë˜ê³ , ë§ˆë¬´ë¦¬ê°€ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, SEO(ê²€ìƒ‰ ì—”ì§„ ìµœì í™”) ì‘ì—…ì„ ì§„í–‰í•˜ë©´ì„œ, ê²°êµ­ static pageê°€ í•„ìš”í•¨ì„ ê¹¨ë‹«ëŠ”ë‹¤. ì™œëƒí•˜ë©´, ê¸°ì¡´ì˜ React Routerë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´, <https://euidong.github.io/posts/dfs1> ë¥¼ ì°¾ì„ ìˆ˜ê°€ ì—†ë‹¤. ì™œëƒí•˜ë©´, githubì—ì„œëŠ” pageë¥¼ ì§ì ‘ ì ‘ê·¼í•  ë•Œì—ëŠ” ë°°í¬ branchì—ì„œ í•´ë‹¹ íŒŒì¼ì„ ì°¾ê²Œ ë˜ëŠ”ë° í•´ë‹¹ íŒŒì¼ì´ ì—†ìœ¼ë©´ ê²°êµ­ 404 Not Foundë¥¼ ë…¸ì¶œí•˜ê²Œ ëœë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, dummy redirectë¡œ rootë¡œ ëŒë ¤ë³´ë‚´ì¤„ ìˆ˜ë„ ìˆì§€ë§Œ, ê²°ì½” ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹ˆë‹¤. ê²€ìƒ‰ì—”ì§„ ìµœì í™”ì—ë„ ì¢‹ì§€ ëª»í•˜ë‹¤. ë”°ë¼ì„œ, static fileì„ ê° ê°ì˜ urlë§ˆë‹¤ ìƒì„±í•´ì£¼ëŠ” Static Page Generatingì´ í•„ìš”í•˜ë‹¤ê³  ëŠë‚€ë‹¤. ë”°ë¼ì„œ, Gatsbyì™€ NextJS ì¤‘ì—ì„œ ì„ íƒì„ í•˜ê¸°ë¡œ í•œë‹¤.\n\nì´ì œ ì¶”ê°€ëœ ìš”êµ¬ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. ê¸°ì¡´ ì½”ë“œë¥¼ ê·¸ëŒ€ë¡œ í™œìš©í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\n2. Static Page Generatingì„ ì§€ì›í•´ì•¼ í•œë‹¤.\n\ngithub : [euidong/euidong.github.io/dev@pure-react](https://github.com/euidong/euidong.github.io/tree/dev%40pure-react)\n\n### ë‹¤ì‹œ Gatsby\n\në‹¤ì‹œ ëŒì•„ì™€ Gatsbyë¥¼ ì‹œë„í•˜ê¸°ë¡œ í•œë‹¤. ì• ì´ˆì— GraphQLê³¼ React ëª¨ë‘ ê²½í—˜ì´ ìˆê¸° ë•Œë¬¸ì— ì‰½ê²Œ í•  ìˆ˜ ìˆì„ ê±°ë¼ê³  ìƒê°í–ˆë‹¤. í•˜ì§€ë§Œ, ìƒê°ë³´ë‹¤ GraphQL Queryì˜ ì œí•œì ì´ ë§ì•„ì„œ ê²°êµ­ GatsbyëŠ” í¬ê¸°í•˜ê¸°ë¡œ í•œë‹¤. ë¬¼ë¡  Gatsbyì˜ í™•ì¥ ë„êµ¬ë“¤ì€ ìœ ìš©í–ˆì§€ë§Œ ìœ„ì—ì„œ ì œì‹œí•œ 9ë²ˆì„ êµ¬í˜„í•˜ê¸°ì— í•œê³„ë¥¼ ëŠê¼ˆë‹¤. (ë‚´ ë”´ì—ëŠ” GraphQLë¡œ ë§Œë“¤ê³  ì‹¶ì—ˆëŠ”ë° ì‚¬ì‹¤ í¬ê¸°í•˜ê³  JSONìœ¼ë¡œ ë§Œë“¤ì—ˆìœ¼ë©´ ê°€ëŠ¥í–ˆì„ ë“¯í•˜ë‹¤.)\n\n### NextJS\n\nê·¸ë˜ì„œ ë‹¤ìŒìœ¼ë¡œ ì‹œë„í•œ ê²ƒì´ NextJSì´ë‹¤. NextJSëŠ” ìƒì„± ì‹œì— ë‚´ë¶€ APIë¥¼ ì •ì˜í•˜ì—¬ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë¯¸ë¦¬ compileì„ ì™„ë£Œí•œ html íŒŒì¼ë“¤ì„ ìƒì„±í•´ë‘ê³ , ì œê³µí•˜ë©´ì„œë„, ê·¸ ë‚´ë¶€ì—ì„œëŠ” SPA ì²˜ëŸ¼ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ë°©ì‹ì´ë‹¤. Reactë¥¼ ì´ìš©í•œ Frameworkì¸ ë§Œí¼ ê¸°ì¡´ì˜ codeë¥¼ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ì„œ ì‰½ê²Œ ì‚¬ìš©ì´ ê°€ëŠ¥í–ˆë‹¤. í•˜ì§€ë§Œ, Gatsbyì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì–´ëŠì •ë„ì˜ í•œê³„ëŠ” ì¡´ì¬í–ˆê¸° ë•Œë¬¸ì— ê²°êµ­ì€ reactë§Œ ìƒì„±í•˜ë˜ ë°©ì‹ì²˜ëŸ¼ JSON fileì„ generatingí•˜ì—¬ categoryì™€ tagë“¤ì„ ìˆ˜ì§‘í•˜ì˜€ë‹¤.\n\nê·¸ ê²°ê³¼ ì§€ê¸ˆê³¼ ê°™ì€ í˜•íƒœì˜ ë¸”ë¡œê·¸ë¥¼ ì™„ì„±í•˜ì˜€ë‹¤. í˜„ì¬ í¬ìŠ¤íŒ…ì„ ê³„ì†í•´ì„œ ì§„í–‰í•  ì˜ˆì •ì´ë©°, ê´‘ê³  ë° ì—¬íƒ€ ì„¤ì •ë“¤ë„ ì¶”ê°€ë¡œ ì§„í–‰í•  ì˜ˆì •ì´ë‹¤.\n\n![blog-view](/images/blog.png)\n\ngithub : [euidong/euidong.github.io/dev](https://github.com/euidong/euidong.github.io/tree/dev)\n\nìµœì¢…ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ BlogëŠ” ë‹¤ìŒê³¼ ê°™ì€ ìš”êµ¬ì‚¬í•­ì„ ë§Œì¡±í•œë‹¤.\n\n- [x] Markdownì„ í†µí•´ì„œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ê³ , ì´ëŠ” DB ì¦‰, BackEndë¥¼ í•„ìš”ë¡œ í•˜ì§€ ì•ŠëŠ”ë‹¤.\n- [x] Categoryë¡œ ì‘ì„±ê¸€ì„ ë¬¶ê³ , Tagë“¤ë¡œ ë‹¤ì‹œ í•œ ë²ˆ ë” ë¶„ë¥˜í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n- [x] Dark Modeë¥¼ ì§€ì›í•œë‹¤.\n- [x] ì¡°íšŒìˆ˜ ê´€ë¦¬ë¥¼ ìœ„í•´ì„œ Google Analyticsë¥¼ ì‚¬ìš©í•œë‹¤.\n- [x] êµ¬ê¸€ / ë„¤ì´ë²„ ê²€ìƒ‰ì— ë…¸ì¶œë˜ì–´ìˆë‹¤.\n- [x] ê´‘ê³ ë¥¼ ê²Œì‹œí•˜ì˜€ë‹¤.\n- [x] Githubì— Pushí•˜ëŠ” ê²ƒë§Œìœ¼ë¡œ Postingì´ ê²Œì‹œëœë‹¤. (Github Action)\n- [x] Build ì‹œì— SEOì— í•„ìš”í•œ sitemapì„ ìë™ ìƒì„±í•œë‹¤.\n- [x] ThemeëŠ” Githubì˜ color paletteì— ê¸°ë°˜í•˜ì—¬ ì„¤ì •í•˜ì—¬, ì¹œìˆ™í•˜ë‹¤.\n- [x] ëª¨ë°”ì¼ì„ ì§€ì›í•œë‹¤.\n- [x] ì´ë¯¸ì§€ í¬ê¸°ë¥¼ ì¬ì„¤ì •í•  ìˆ˜ ìˆëŠ” commandë¥¼ í¬í•¨í•œë‹¤.\n","slug":"making-blog","date":"2022-05-05 21:54","title":"ë¸”ë¡œê·¸ ì œì‘ê¸°","category":"Web","tags":["frontend","react","gatsby","nextjs","github"],"desc":"í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ë¸”ë¡œê·¸ë¥¼ ì§ì ‘ ë§Œë“œëŠ” ê³¼ì •ì—ì„œ ê²ªì€ ì‹œí–‰ì°©ì˜¤ë¥¼ ì •ë¦¬í•œ ë‚´ìš©ì´ë‹¤.ë‚˜ì˜ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ í–¥í•œ ì¼ëŒ€ê¸°ëŠ” 2019ë…„ë„ì—ì„œ ë¶€í„° ì‹œì‘ëœë‹¤.","thumbnailSrc":"https://euidong.github.io/images/blog.png"}],"Paper":[{"content":"\n## Intro\n\nEthereumì˜ TPSë¥¼ Client ë‹¨ì—ì„œ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë…¸ë ¥ìœ¼ë¡œ, LMPTëŠ” Layered Merkle Partical Trieì˜ ì•½ìì´ë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì—ì„œ ì‚¬ìš©í•˜ë˜ MPTì˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•˜ì—¬ ì œê¸°ëœ ì•„ì´ë””ì–´ë¡œ Computer Architectureì—ì„œ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” cacheë¥¼ ì ‘ëª©í•œ ë°©ë²•ì´ë‹¤. (í•´ë‹¹ ë…¼ë¬¸ ICBC 2022ì˜ ë…¼ë¬¸ ì¤‘ LMPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìš”ì•½ê¸€ì´ë‹¤.)\n\n## Terms\n\n- **ERC-20**  \n  Ethereumê³¼ í˜¸í™˜ì´ ê°€ëŠ¥í•œ tokenì— ëŒ€í•œ í‘œì¤€ì„ ì œì‹œí•œ ë¬¸ì„œì´ë‹¤. ì¦‰, ì´ í‘œì¤€ì„ ë§Œì¡±í•˜ëŠ” tokenì€ Ethereumì„ í†µí•´ì„œ êµí™˜ì´ ê°€ëŠ¥í•˜ë©° ê·¸ ë°˜ëŒ€ë„ ê°€ëŠ¥í•˜ë‹¤.\n- **Tether token**  \n  Tether tokenì€ ERC-20ì— ê¸°ë°˜í•œ ëŒ€í‘œì ì¸ tokenìœ¼ë¡œ, ë¯¸êµ­ ë‹¬ëŸ¬ì™€ 1:1ë¡œ ëŒ€ì‘í•˜ëŠ” USDTë¡œ ìœ ëª…í•˜ë‹¤. ì‹¤ì œ ê±°ë˜ì—ì„œë„ ë¹ˆë²ˆíˆ ì‚¬ìš©ë˜ëŠ” ERC-20 tokenì´ë‹¤.\n- **Trie**  \n  TrieëŠ” sequenceë¡œ ì´ë£¨ì–´ì§„ ë°ì´í„°ì˜ ë¹ ë¥¸ ê²€ìƒ‰ì„ ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ treeì˜ ì¼ì¢…ì´ë‹¤. ë°ì´í„°ë¥¼ ì €ì¥í•  ë•Œ sequence ë°ì´í„°ì˜ ê²€ìƒ‰ì„ ìµœì í™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. ì›ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. sequenceì˜ ê²€ìƒ‰ ì‹œì— sequenceì˜ ì•ì—ì„œë¶€í„° ë§ëŠ” nodeë¥¼ rootì—ì„œë¶€í„° ê²€ìƒ‰í•˜ë©° ì°¾ì•„ë‚˜ê°„ë‹¤. ì´ ë•ë¶„ì— ê²€ìƒ‰ ì‹œì—ëŠ” sequenceì˜ ê¸¸ì´ë§Œí¼ì˜ ì‹œê°„ì´ë©´ ì¶©ë¶„íˆ ë°ì´í„°ë¥¼ ì°¾ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ, ì €ì¥ sequenceë¥¼ í’€ì–´ì„œ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— ê²½ìš°ì˜ ìˆ˜ê°€ ì—„ì²­ ë§ì•„ì§„ë‹¤. ì´ëŠ” sequenceë¥¼ í•˜ë‚˜ì˜ ë°ì´í„°ë¡œ ë³´ëŠ” ê²ƒë³´ë‹¤ ì €ì¥ ê³µê°„ì„ ë§ì´ ì°¨ì§€í•œë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤.\n- **Patricia Trie**  \n  Trieì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  sequenceë¥¼ ìš”ì†Œ í•˜ë‚˜ë¥¼ nodeë¡œ ë³´ì•˜ë‹¤ë©´, Patricia Trieì—ì„œëŠ” ê° nnodeê°€ ë‘ ê°œë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. branch node, leaf nodeì´ë‹¤. leaf nodeëŠ” ê° sequenceì˜ ëì„ ì˜ë¯¸í•˜ë©° ê° sequenceëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ leaf nodeë¡œ ì¢…ê²°ë˜ì–´ì§€ê³ , branch nodeëŠ” ì €ì¥í•œ ë°ì´í„° ì¤‘ì—ì„œ ì¤‘ë³µì´ ë°œìƒí•˜ëŠ” ê²½ìš° ì¤‘ê°„ ì§€ì ìœ¼ë¡œ ì €ì¥í•´ë‘ëŠ” ë°©ì‹ì´ë‹¤. ë”°ë¼ì„œ, Trieì—ì„œëŠ” ê° ë…¸ë“œê°€ sequenceì˜ í•˜ë‚˜ì˜ ê°’ì„ ì˜ë¯¸í–ˆë‹¤ë©´, Patricia Trieì—ì„œëŠ” pathê°€ sequenceì˜ ìš”ì†Œë“¤ì„ ì˜ë¯¸í•œë‹¤. ì´ì— ëŒ€í•œ ì´í•´ë¥¼ ìœ„í•´ì„œëŠ” ì•„ë˜ì— ì œì‹œëœ ê·¸ë¦¼ì„ ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.(ì¢Œ. trie, ìš°. patricia trie)  \n  ![patricia-trie](/images/patricia-trie.png)\n- **Merkle Tree**  \n  Bitcoinì—ì„œ ì‚¬ìš©ëœ ìë£Œêµ¬ì¡°ë¡œ Blockchainì˜ ëª¨ë“  Blockì„ ì €ì¥í•˜ëŠ” ê²ƒì€ íŠ¹ì • nodeì—ê²ŒëŠ” ë¶€ë‹´ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ì— ëŒ€í•œ ì¸ì¦ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•´ì„œ ìš”ì•½ë³¸ë§Œì„ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ğŸ”— bitcoin-4](/posts/bitcoin-4)ì˜ 2. Merkle Tree ë¶€ë¶„ì—ì„œ ìì„¸íˆ ë‹¤ë£¨ì—ˆë‹¤. ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´, Blockì„ serializationí•˜ê³  hashí•˜ì—¬ ê²°ê³¼ê°’ì„ ì €ì¥í•œ í›„ ì´ë¥¼ leaf nodeë¡œ í•˜ëŠ” í˜•íƒœì˜ binary treeë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ê¸°ì— ìš°ë¦¬ëŠ” Merkle Treeì˜ hashê°’ ëª‡ê°œë§Œ ê°–ê³ ë„ í•´ë‹¹ transactionì„ í¬í•¨í•˜ëŠ” blockì´ ìœ íš¨í•œì§€ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.  \n- **MPT**  \n  Merkle Patricia Trieì˜ ì¤„ì„ë§ë¡œ ê¸°ì¡´ Bitcoinì—ì„œ ì‚¬ìš©í•˜ë˜ Merkle Treeì™€ Patricia Trieì˜ ê²°í•©ì„ í†µí•´ ë§Œë“¤ì–´ë‚¸ ìë£Œêµ¬ì¡°ì´ë‹¤. ì´ì— ëŒ€í•œ ì„¤ëª…ì€ ì•„ë˜ì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¬ë‹¤.\n- **Latency bound issue**  \n  Memoryì—ì„œ ë„ˆë¬´ ë§ì€ ë°ì´í„°ë¥¼ ì–»ì–´ì˜¤ë ¤ê³  í•  ë•Œë¥¼ ì˜ë¯¸í•˜ëŠ” Memory Bound ì¤‘ì˜ í•˜ë‚˜ë¡œ dataë¥¼ Memory ë§Œìœ¼ë¡œëŠ” ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì„ ë•Œ, secondary storageì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ë°œìƒí•˜ëŠ” latencyë¥¼ ì˜ë¯¸í•œë‹¤.\n\n## Problem\n\nBitcoinì—ì„œ ì‹œì‘ëœ Blockchainì— ëŒ€í•œ ì‘ìš©ì€ ì˜ë£Œ, ê³µê¸‰ë§ ê´€ë¦¬ ë“±ìœ¼ë¡œ í™•ì¥ë˜ë©° ê³„ì†í•´ì„œ ë°œì „ë˜ê³  ìˆë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì•„ì§ê¹Œì§€ **transactionì˜ ë¹ ë¥¸ ì²˜ë¦¬**ëŠ” challengeí•œ ë¶€ë¶„ìœ¼ë¡œ ë‚¨ì•„ìˆë‹¤. ì´ëŠ” P2P í™˜ê²½ì—ì„œ ì•ˆì „í•œ transactionì˜ ìƒì„± ë° ì¡°íšŒ ê·¸ë¦¬ê³  ê²€ì¦ì„ ìœ„í•´ì„œ ì–´ì©” ìˆ˜ ì—†ëŠ” trade offë¡œ ë°›ì•„ë“¤ì—¬ì¡Œë‹¤. ê·¸ ê²°ê³¼ 7~30 tps(transaction per second)ì •ë„ì— ê·¸ì¹˜ëŠ” ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ì£¼ë¥˜ì¸ ì¤‘ì•™ ì²˜ë¦¬ ë°©ì‹ì€ ìˆ˜ ì²œê°œì˜ transactionì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒê³¼ ë¹„êµí–ˆì„ ë•Œì—ëŠ” êµ‰ì¥íˆ ë‚®ì€ ìˆ˜ì¤€ì´ë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë‹¤ë…„ê°„ ì—¬ëŸ¬ê°€ì§€ ì ‘ê·¼ ë°©ì‹ê³¼ í•´ê²°ì±…ì´ ì œì‹œë˜ì—ˆë‹¤(AI-gorand, Conflux, Prism, OHIE, etc). ì´ë¥¼ í†µí•´ì„œ ìˆ˜ ì²œê°œì˜ transactionì„ blockchainì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ì‘ìš©í•˜ëŠ”ë°ì—ëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ê·¸ê²ƒì€ stateë¥¼ ë³´ê´€í•˜ëŠ” ledger ë‹¨ì—ì„œ ë°œìƒí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‹¤ì œë¡œ transactionì„ ì²˜ë¦¬í•˜ëŠ” client ë‹¨ì—ì„œì˜ ë¬¸ì œì´ë‹¤. ì´ëŠ” ë°”ë¡œ **blockchain stateë¥¼ ë³€ê²½í•˜ëŠ” transactionì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ëŠ” ê²½ìš° client ë‹¨ì—ì„œ ìƒˆë¡œìš´ bottleneckì´ ë°œìƒí•œë‹¤ëŠ” ì ì´ë‹¤.** ì‹¤ì œë¡œ ê°€ì¥ ìœ ëª…í•œ Ethereum Clientì¸ GoEthereumê³¼ OpenEtereumì—ì„œëŠ” 700 tpsë¡œ ê¸°ì¡´ ì œì‹œëœ ìˆ˜ ì²œ transactionë³´ë‹¤ëŠ” í•œì°¸ ëª» ë¯¸ì¹˜ëŠ” ì„±ëŠ¥ì„ ë³´ì—¬ì¤€ë‹¤.\n\nê·¸ ì›ì¸ì€ ì‚¬ì‹¤ìƒ state machineì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” Ethereumê³¼ ì´ê²ƒì˜ ê²€ì¦ì„ ìœ„í•´ ì œì•ˆëœ MPTì˜ êµ¬ì¡°ì ì¸ í•œê³„ë¡œ ì¸í•´ ë°œìƒí•œë‹¤(ì´ëŠ” Backgroundì—ì„œ ì œëŒ€ë¡œ ë‹¤ë£° ê²ƒì´ë‹¤). ì´ êµ¬ì¡°ì ì¸ í•œê³„ì— ì˜í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ í˜„ìƒë“¤ì´ ë°œìƒí•œë‹¤.\n\n1. key-value ì§ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ” ë°ì´í„°ì˜ read/write ì—°ì‚°ì´ ì¦í­í•´ì„œ ë°œìƒí•œë‹¤.\n2. íŠ¹íˆ write operationì€ ëª¨ë“  nodeì— ëŒ€í•œ hashë¥¼ ì¬ê³„ì‚°í•˜ë„ë¡ í•œë‹¤.\n3. ì´ëŸ¬í•œ ë™ì‘ì´ ì™„ë£Œë˜ê¸° ì „ê¹Œì§€ ë°˜ë“œì‹œ transactionì„ ì²˜ë¦¬í•˜ëŠ” threadëŠ” ëŒ€ê¸°í•´ì•¼ í•œë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, í•´ë‹¹ ë…¼ë¬¸ì€ LMPTë¼ëŠ” ìƒˆë¡œìš´ ìë£Œêµ¬ì¡°ë¥¼ ì œì‹œí•œë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì˜ MPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œë³´ë‹¤ 6ë°° ì •ë„ ìƒìŠ¹ëœ tps ì„±ëŠ¥ ì§€í‘œë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ì´ê²ƒì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” MPTë¥¼ ê³„ì¸µí™”(layer)í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, ìµœê·¼ updateëœ ë‚´ìš©ì„ ë³„ë„ì˜ ì €ì¥ê³µê°„ì„ í™œìš©í•˜ì—¬ ì €ì¥í•´ë‘ê³  ì´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ë” ë¹ ë¥¸ ì²˜ë¦¬ ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.\n\n## Background\n\n> <mark>**1. Ethereum**</mark>\n\nEthereumì€ ê¸°ì¡´ Bitcoin Blockchain Systemê³¼ í™•ì—°íˆ ë‹¤ë¥¸ì ì´ ìˆë‹¤. ë°”ë¡œ State Machineì´ë¼ëŠ” ì ì´ë‹¤. ê¸°ì¡´ì˜ Bitcoinì—ì„œëŠ” ê±°ë˜ ë‚´ì—­ì„ ëª¨ë‘ ê³µê°œí•˜ê³ , ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ìµœì´ˆ Blockì—ì„œë¶€í„° ì´ ê±°ë˜ ë‚´ì—­ì„ ì½ì–´ë“¤ì´ë©´ì„œ ê°€ì§„ ìì‚°ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¦‰, ê±°ë˜ historyë¥¼ ì¢…í•©í•´ì„œ ê²°ê³¼ê°’ì„ ì–»ëŠ” ê²ƒì´ë‹¤. Transactionì˜ ìˆ˜ì •ê³¼ ì‚­ì œ ì—†ì´ ê³„ì†í•´ì„œ ì¶”ê°€ë§Œ ì´ë£¨ì–´ì§€ëŠ” í˜•íƒœë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, Ethereumì—ì„œëŠ” Transactionì„ State Machineì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ëŠ” í•˜ë‚˜ì˜ actionìœ¼ë¡œ ë°›ì•„ë“¤ì¸ë‹¤. ë”°ë¼ì„œ, Transactionì— ì˜í•´ì„œ ìš°ë¦¬ëŠ” ìƒíƒœê°€ ë³€í™”í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì¸ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•´ë‹¹ Stateë§Œ ë³´ê³  ìì‹ ì˜ ìì‚°ì„ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n> <mark>**2. MPT**</mark>\n\nê²°êµ­ Ethereum ì‹œìŠ¤í…œì„ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“  ê²ƒì´ ê³µê°œë˜ëŠ” Network ìƒì—ì„œ ì•ˆì „í•˜ê²Œ Stateì™€ ì´ë¥¼ ë³€ê²½í•˜ëŠ” Transactionì„ ë³´ê´€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì´ëŸ¬í•œ dataë¥¼ ë¬´ê²°í•˜ê²Œ ê·¸ëŸ¬ë©´ì„œë„ ìˆ˜ì •, ì‚­ì œ, ê²€ìƒ‰ ë“±ì´ ìš©ì´í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œ Ethereumì—ì„œëŠ” MPT(Merkle Patricia Trie)ë¥¼ í™œìš©í•œë‹¤. ì´ëŠ” ê²°êµ­ ìœ„ì—ì„œ ì„¤ëª…í•œ Merkle Treeì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•˜ìœ„ Nodeì˜ Hashê°’ì„ ìƒìœ„ Nodeì—ì„œ ê°€ì§€ê¸° ë•Œë¬¸ì— Root Hashë§Œì„ ë¹„êµí•˜ì—¬ ê²€ì¦ì„ í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ê°•ì ì„ ê°€ì§€ê³  ìˆë‹¤.\n\nMPTëŠ” 3ê°€ì§€ì˜ Nodeë¡œ ì´ë£¨ì–´ì§„ë‹¤.\n\n1. **Leaf Node**  \n   ì‹¤ì œë¡œ valueë¥¼ ì €ì¥í•˜ëŠ” ë§ë‹¨ nodeì´ë‹¤. ë§Œì•½, pathë¡œ keyê°€ ëª¨ë‘ í‘œì‹œë˜ì§€ ì•Šì•˜ë‹¤ë©´, key-endì— ë‚¨ì€ keyë¥¼ ëª¨ë‘ ë‹´ëŠ”ë‹¤.\n2. **Extension Node**  \n   Leaf Node ì´ì™¸ì— ê²½ë¡œì˜ í™•ì¥ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©ë˜ì–´ì§€ëŠ” Nodeë¡œ Branch Nodeì˜ hash dataë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ëŠ” ë“±ì˜ ì—­í• ì„ í•œë‹¤.\n3. **Branch Node**  \n   16ê°œì˜ pointerë¥¼ í¬í•¨í•˜ëŠ” Nodeë¡œ ì´ë¥¼ í†µí•´ì„œ Leaf, Extension, Branch Nodeë¥¼ ê°€ë¥´í‚¤ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ, ì¼ë°˜ì ì¸ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n\n![mpt](/images/mpt.png)\n\nì´ êµ¬ì¡°ê°€ ê°€ì§€ëŠ” ì˜ì˜ëŠ” ê²°êµ­ ìš°ë¦¬ëŠ” í•˜ìœ„ nodeë“¤ì„ hashí•œ ë°ì´í„°ë¥¼ ìƒìœ„ nodeì—ì„œ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í•„ìš”ì— ë”°ë¼ trieì— ì¼ë¶€ë¶„ë§Œì„ ì €ì¥í•´ë„ dataì˜ ê²€ì¦ì€ ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì´ë‹¤. ë”°ë¼ì„œ, ëª¨ë“  dataë¥¼ ê°€ì§€ëŠ” full nodeì™€ ë‹¬ë¦¬ light clientëŠ” ë” ì ì€ ë°ì´í„°ë§Œ ê°–ê³ ë„ ê²€ì¦ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, light clientì—ì„œ authenticated read(full nodeì˜ ë„ì›€ì´ í•„ìš”í•œ read)ë¥¼ ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ê²½ìš° full nodeì—ì„œëŠ” readë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ pathë¥¼ ë”°ë¼ì„œ ì½ê¸°ë¥¼ ë°˜ë³µí•´ë‚˜ê°€ë©°, leaf nodeì— ìˆëŠ” ìµœì¢… valueë¥¼ ì–»ì–´ì™€ì•¼ í•œë‹¤.\n\n> <mark>**3. Futher Observation**</mark>\n\ní•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” OpenEthereum Clientë¥¼ ê´€ì¸¡í•˜ê³ , ê¸°ì¡´ ë…¼ë¬¸ë“¤ì—ì„œ ì—¬ëŸ¬ ì˜ê°ì„ ì–»ì—ˆë‹¤. ë‹¤ìŒì€ ì´ ë…¼ë¬¸ì—ì„œ insightë¥¼ ì–»ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•œ ê´€ì¸¡ ì •ë³´ì´ë‹¤.\n\n1. Transactionì´ Blockchain Stateì— ë¹ˆë²ˆí•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ë¡ Transactionì˜ ì²˜ë¦¬ ì„±ëŠ¥ì€ ë‚®ì•„ì§„ë‹¤.\n2. ì‹¤ì œ Transactionì˜ ì‹¤í–‰ ì‹œê°„ ì¤‘ì—ì„œ ê°€ì¥ ë§ì€ ì‹œê°„ì„ ì°¨ì§€í•˜ëŠ” ê²ƒì€ Blockchain Stateì— ì ‘ê·¼í•˜ëŠ” ë™ì‘(SLOAD, SSTORE)ì´ë‹¤.  \n   [ğŸ”— ê¸°ë°˜ ë…¼ë¬¸(Securing Smart Contract with Runtime Validation)](https://aoli.al/papers/solythesis-pldi20.pdf)\n3. í•œ ë²ˆì˜ Transactionì€ ì—¬ëŸ¬ ë²ˆì˜ IOì„ ìœ ë°œí•œë‹¤.(IO amplication)  \n   MPT êµ¬ì¡°ì—ì„œ í•˜ë‚˜ì˜ key ì¡°íšŒë¥¼ ìœ„í•´ì„œ í•œ ë²ˆì— ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ê²°êµ­ keyë¥¼ í†µí•´ì„œ Trieë¥¼ ìˆœíšŒí•˜ì—¬ì•¼ í•œë‹¤.  \n   ì´ëŠ” keyì— ëŒ€ì‘ë˜ëŠ” Nodeê°€ ë§ì„ ìˆ˜ë¡ ë§ì€ IOë¥¼ ìš”êµ¬í•œë‹¤.\n4. Transaction ì‹¤í–‰ threadëŠ” ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šê³ , ìœ„ì—ì„œ ì œì‹œëœ operationì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.  \n   ì¦‰, Transactionì„ ì²˜ë¦¬í•˜ëŠ” ThreadëŠ” critical path(section)ë¥¼ ì§€í‚¤ê¸° ìœ„í•´ì„œ ë‹¨ í•˜ë‚˜ë§Œ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n5. memory cache sizeë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒì€ ì„±ëŠ¥í–¥ìƒì— í° ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.  \n   | Memory Cache size(MB) | Hit Rate | TPS  |\n   | :-------------------- | :------- | :--- |\n   | 50                    | 0.635    | 1238 |\n   | 100                   | 0.758    | 1256 |\n   | 500                   | 0.862    | 1278 |\n   | 1000                  | 0.879    | 1292 |\n\n   ìœ„ì˜ í‘œë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆì§€ë§Œ, Cache Sizeë¥¼ ëŠ˜ë ¸ì„ ë•Œ Hit RateëŠ” ëŠ˜ë¦´ ìˆ˜ ìˆì§€ë§Œ TPSì˜ ì„±ëŠ¥ í–¥ìƒ í­ì€ 5% ìˆ˜ì¤€ì— ê·¸ì¹œë‹¤. ì´ëŠ” memory cacheë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³  ìˆìŒì„ ì˜ë¯¸í•œë‹¤.\n\nì¦‰, í•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” í•˜ë‚˜ì˜ Transactionì— ì˜í•´ì„œ IOê°€ ë¹ˆë²ˆíˆ ë°œìƒí•˜ëŠ”ë° ì´ë¥¼ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ ê¸°ì¡´ MPTë§Œìœ¼ë¡œëŠ” í•œê³„ê°€ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤.\n\n## LMPT\n\nLayered Merkle Patricia Trieì˜ ì•½ìë¡œ ê¸°ì¡´ Ethereum MPTì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ ì œì•ˆí•˜ëŠ” ìë£Œêµ¬ì¡°ì´ë‹¤. ì´ì˜ í•µì‹¬ì ì¸ ëª©í‘œëŠ” Authenticated Ethereum Stateë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ë°”ë¡œ ê¸°ì¡´ Computer Architectureì—ì„œ ì‚¬ìš©í–ˆë˜ Hierarchical Memoryì˜ êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ì°¨ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, cacheë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” MPTë¥¼ ë” êµ¬í˜„í•´ë‘ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ê²°ë¡ ìƒìœ¼ë¡œ MPTì˜ readì‹œì— IO amplicationì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\nìš°ì„  êµ¬ì„± ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. **Delta MPT**  \n   Read accessê°€ ìš”ì²­ë˜ë©´ ê°€ì¥ ë¨¼ì € ì¡°íšŒë˜ëŠ” MPTì´ë‹¤.\n2. **Intermediate MPT**  \n   Delta MPT ì´í›„ì— ì¡°íšŒë˜ëŠ” MPTì´ë‹¤.\n3. **Snapshot MPT**  \n   ì›ë³¸ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” MPTì´ë‹¤. ì „ì²´ blockchain dataë¥¼ ì €ì¥í•˜ë©°, diskì— ì¡´ì¬í•œë‹¤.\n4. **Flat KV Store**  \n   readì‹œì— ê°€ì¥ ë§ˆì§€ë§‰ì— ì¡°íšŒëœë‹¤. ì´ ì—­ì‹œë„ ì „ì²´ blockchain dataë¥¼ ì €ì¥í•˜ì§€ë§Œ, ì°¨ì´ì ì´ë¼ë©´ keyë¥¼ pathë¡œ í•˜ì—¬ ì¡°íšŒí•˜ëŠ” MPTì™€ ë‹¤ë¥´ê²Œ key, value storeí˜•íƒœì´ë‹¤.  \n   ê·¸ë ‡ê¸°ì— snapshot MPTì™€ ë™ì¼í•˜ê²Œ diskì— ì¡´ì¬í•˜ì§€ë§Œ, ë” ë¹ ë¥´ë‹¤ê²Œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.  \n   snapshot MPTë¥¼ ì¡°íšŒí•˜ëŠ” ëŒ€ì‹ ì— ì´ë¥¼ í†µí•´ì„œ ì¡°íšŒë¥¼ í•œë‹¤ë©´, keyë¥¼ í†µí•´ì„œ ë°”ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— read IO amplicationì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\nìœ„ì˜ ê¹Œì§€ëŠ” readì‹œì— ìµœì í™”ë¥¼ ìˆ˜í–‰í•˜ì˜€ë‹¤ë©´, write ì‹œì—ëŠ” ì´ë ‡ê²Œ ê³„ì¸µí™”ë¥¼ í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— diskì— writeí•˜ëŠ” ë™ì•ˆì˜ ì—¬ìœ ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. LMPTì—ì„œëŠ” MPTì˜ ì ì€ ë³€í™”ì¼ ê²½ìš°ì—ëŠ” delta MPTì— ì €ì¥í•˜ê³  ìˆë‹¤ê°€ periodic checkpointë¥¼ ë‘ê³ , í•´ë‹¹ ì‹œì ë§ˆë‹¤ delta MPTì˜ ë³€ê²½ì‚¬í•­ì€ intermediate MPT, intermediate MPTì˜ ë³€ê²½ ë‚´ìš©ì€ snapshot MPTì— í•©ì¹œë‹¤. ë”°ë¼ì„œ, write ë™ì‘ì€ ì‹œê°„ì°¨ë¥¼ ë‘ê³  **batch ë‹¨ìœ„**ë¡œ **verificationê³¼ëŠ” ë…ë¦½ì **ìœ¼ë¡œ ì§„í–‰ëœë‹¤. ì´ëŠ” ê²°êµ­ ë³‘ë ¬ì ìœ¼ë¡œ IO ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì—¬ì§€ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.\n\n> <mark>**[Design] Structure**</mark>\n\nì–´ë–»ê²Œ ì‹¤ì œë¡œ ì´ë¥¼ êµ¬í˜„í–ˆëŠ”ì§€ì— ëŒ€í•œ outlineì„ ì œì‹œí•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. (OpenEthereumì€ Rustë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— LMPTë„ Rustì— ê¸°ë°˜í•œ codeì´ë‹¤. psuedo codeì´ê¸° ë•Œë¬¸ì— ë¬¸ë²•ì€ ë‹¤ì†Œ)\n\n```rust\nstruct Trie {\n  root: uint256,\n  kv:   Map\n}\nstruct LMPT {\n  delta, interm:  Trie, // In memory\n  snapshot:       Trie, // In Disk\n  flat:           Map   // In Disk\n}\n```\n\nìœ„ì—ì„œ ì œì‹œí•œ ì „ì²´ êµ¬ì„±ìš”ì†Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ delta, intermedidate, snapshot mptë¥¼ ì •ì˜í•˜ê³  flatë¥¼ ì •ì˜í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n> <mark>**[Design] Read/Write**</mark>\n\nì‹¤ì œë¡œ Writeì™€ ReadëŠ” ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰ë˜ì–´ì§„ë‹¤. ì½”ë“œëŠ” ë…¼ë¬¸ì„ ì°¸ì¡°í•˜ì˜€ì§€ë§Œ, ì„¤ëª…ì€ ì§ì ‘ ì‘ì„±í•˜ì˜€ë‹¤.\n\n```rust\nT := LMPT()\n\nfn write_LMPT(k, v) {\n  root := T.delta.put(T.delta.root, k, v) // put new k, v data and get recomputed root hash\n  T.delta.root := root                    // set new root\n}\n\nfn read_LMPT(k, auth_proof) -> <v, p> {\n  // get value and path from delta mpt with key\n  <v, p1> := T.delta.get(T.delta.root, k)\n  // check whether value is exist or not\n  // if exist, then return value and path\n  // if not exist, then we get a adjacent path from delta MPT and store it in p1.\n  if v is present\n    return <v, p1>\n  // get value and path from intermediate mpt with key\n  <v, p2> := T.interm.get(T.interm.root, k)\n  // check whether value is exist or not\n  // if exist, then return value and path(p1 is adjacent path in delta, p2 is real path in intermediate MPT)\n  // if not exist, then we get a adjacent path from intermediate MPT and store it in p2.\n  if v is present\n    return <v, p1 + p2>\n  // if client want authneticated read(when they can't have authenticity), \n  // then request to snapshot MPT and return result\n  // else then request to flat kv store and return result without path.\n  if auth_proof\n    <v, p3> := T.snapshot.get(T.snapshot.root, k)\n    return <v, p1 + p2 + p3>\n  else\n    v := T.flat.get(k)\n    return <v, dummy>\n}\n```\n\nê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´, ê²°êµ­ writeì˜ ê²½ìš°ì—ëŠ” ë‹¤ìŒ ì ˆì°¨ê°€ ëì¸ ê²ƒì´ë©°,\n\n1. key, valueë¥¼ ë°›ì•„ì„œ delta MPTì— ì €ì¥í•œë‹¤.\n2. ë³€ê²½ëœ root hashë¥¼ delta MPTì— ì ìš©í•œë‹¤.\n\nreadì˜ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ê°€ ëì¸ ê²ƒì´ë‹¤.\n\n1. delta MPTë¥¼ ìš°ì„  ì¡°íšŒí•œë‹¤.\n2. intermediate MPTë¥¼ ë‹¤ìŒìœ¼ë¡œ ì¡°íšŒí•œë‹¤.\n3. ë§Œì•½, ì¶œì²˜ê°€ í™•ì‹¤í•œ ìš”ì²­ì¸ ê²½ìš° auth_proofê°€ í•„ìš”ì—†ìœ¼ë¯€ë¡œ, flat KV storeë¥¼ ì¡°íšŒí•œë‹¤.\n4. auth_proofê°€ í•„ìš”í•˜ë‹¤ë©´, snapshot MPTë¥¼ ì¡°íšŒí•œë‹¤.\n\n> <mark>**[Design] Merge**</mark>\n\nwrite ê³¼ì •ì—ì„œëŠ” delta MPTì—ë§Œ ì¶”ê°€ë¥¼ ìˆ˜í–‰í–ˆì—ˆë‹¤. ì•„ë˜ì—ì„œëŠ” ì‹¤ì œë¡œ ë³€ê²½ì‚¬í•­ì„ snapshot MPTì™€ flat KV storeì— ì ìš©í•œ ê²ƒì´ë‹¤.\n\n```rust\n// merge intermediate MPT to snapshot MPT and flat KV store\nfn merge_compute(T) -> (root, flat) {\n  flat := T.flat            \n  root := T.snapshot.root   \n  for <k, v> in T.interm.kv(T.interm.root)\n    root := T.snapshot.append(root, k, v)\n    flat := flat.set(k, v)\n  return (root, flat) \n}\n\n// reconfigure flat, snapshot root, intermediate MPT, delta MPT\nfn merge_update(T, root, flat) {\n  T.flat := flat\n  T.snapshot.root := root\n  T.interm := T.delta\n  T.interm.root := T.delta.root\n  T.delta := Trie()\n  T.delta.root := None\n}\n```\n\nì´ ê³¼ì •ë„ ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. merge_compute, merge_updateê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•œë‹¤.\n2. merge_computeì—ì„œëŠ” intermediate MPTì˜ dataë¥¼ ëª¨ë‘ snapshot MPTì™€ flat KV storeì— ì¶”ê°€í•œë‹¤.\n3. merge_updateì—ì„œëŠ” intermediate MPTëŠ” ì´ë¯¸ ì ìš©ì´ ì™„ë£Œë˜ì—ˆê¸° ë•Œë¬¸ì— delta MPTë¥¼ intermediate MPTë¡œ ë³€ê²½í•œ í›„, delta MPTë¥¼ ë¹„ì–´ ìˆëŠ” MPTë¡œ ë³€ê²½í•œë‹¤.\n4. ë§¤ ì£¼ê¸°ê°€ ë  ë•Œë§ˆë‹¤ merge_computeì™€ merge_updateê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.\n\nìœ„ methodê°€ ì¤‘ìš”í•œ ì ì€ ë°”ë¡œ transactionì˜ write/readì™€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ì¦‰, diskì— dataë¥¼ write í•˜ê¸° ìœ„í•´ì„œ ì‹¤ì œ transaction ì²˜ë¦¬ì— waitingì´ í•„ìš”ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n> <mark>**[Design] Flush**</mark>\n\nìœ„ì—ì„œ ì œì‹œí•œ Methodë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì ìš©í•¨ìœ¼ë¡œì„œ ë‹¤ìŒê³¼ ê°™ì´ Ethereum stateë¥¼ updateí•˜ê³ , ë¬´ê²°í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.\n\n```rust\nblock_cnt := 0\nmerge_interval := 100     // you can set this constant\n\nT := LMPT(genesis_state)  // setup initial state\n\nwhile Block is processing\n  for transaction in Block\n    T.update_trie(transaction)                  // apply transaction to LMPT\n  block_cnt += 1\n  if block_cnt % merge_interval == 0\n    Wait for last spawned thread to end         // wait until previous thread finished.\n    merge_update(T, root, flat)               \n    spawn_thread(root, flat=merge_compute(T))   // make new thread for merging\n```\n\nì´ ê³¼ì •ì˜ ìš”ì•½ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. merge_intervalë¥¼ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤. (ì´ ê°’ì— ëŒ€í•´ì„œ ë…¼ë¬¸ì—ì„œëŠ” ì œì‹œí•˜ì§€ ì•ŠìŒ)\n2. ì´ˆê¸° genesis_stateë¥¼ í†µí•´ LMPTë¥¼ ì´ˆê¸°í™”í•œë‹¤.\n3. blockchainì˜ blockì„ ì²˜ë¦¬í•˜ë„ë¡ í•œë‹¤. ìƒˆë¡œìš´ blockì— ëŒ€í•œ ì²˜ë¦¬ë„ ì´ì— í¬í•¨ëœë‹¤.\n4. ê·¸ ê³¼ì •ì—ì„œ íŠ¹ì • intervalì´ ë˜ë©´, ê¸°ì¡´ merge_computeë¥¼ ìˆ˜í–‰í•˜ëŠ” threadê°€ ìˆëŠ”ì§€ë¥¼ í™•ì¸í–ˆë‹¤ê°€ backgroundë¡œ merge_computeë¥¼ ì‹¤í–‰í•˜ëŠ” threadë¥¼ ìƒì„±í•œë‹¤.\n\n## Evaluation\n\në³¸ ë…¼ë¬¸ì—ì„œëŠ” í‰ê°€ë¥¼ ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‹¤í—˜ì„ ìˆ˜í–‰í•œë‹¤.\n\n|       | data structure | workload              |\n| :---- | :------------- | :-------------------- |\n| Test1 | MPT vs LMPT    | simple payment        |\n| Test2 | MPT vs LMPT    | ETC-20 token (Tether) |\n\nì—¬ê¸°ì„œ ì‹¤í—˜ ì‹œì— ê³ ë ¤í•œ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. ì‹¤ì œì™€ ê°™ì€ ìƒí™©ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì‹¤ì œ Ethereum transaction 500,000ê°œë¥¼ í™œìš©í•œ benchmarkë¥¼ ë§Œë“¤ì—ˆë‹¤.\n2. ë˜í•œ, ë˜ ë‹¤ë¥¸ insightë¥¼ ì–»ê¸° ìœ„í•´ì„œ ê° addressê°„ì˜ ê³ ë¥´ë©´ì„œë„ randomí•˜ê²Œ transactionì„ ë³´ë‚´ë„ë¡ í•˜ëŠ” Random senders traces benchmarkë„ ë§Œë“¤ì—ˆë‹¤.\n3. ë˜í•œ, ê°„ë‹¨í•œ paymentì˜ ê²½ìš°ì™€ ë³µì¡í•œ smart contractì— ì˜í•´ ë™ì‘í•˜ëŠ” ETC-20 token ì¤‘ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” Tether tokenì„ í™œìš©í•œ ë¹„êµë„ ìˆ˜í–‰í•˜ì˜€ë‹¤.\n\nê²°ê³¼ì ìœ¼ë¡œ stateë¡œ ë³´ê´€í•´ì•¼í•  accountì˜ ìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ LMPTì™€ MPT ì‚¬ì´ì˜ ì°¨ì´ë¥¼ ëª…í™•í•˜ê²Œ ë³¼ ìˆ˜ ìˆëŠ” í˜•íƒœë¥¼ ë³´ì—¬ì¤€ë‹¤. ì´ ì°¨ì´ëŠ” ë” ë³µì¡í•œ ETC-20 tokenì—ì„œ ë” ëª…í™•í•˜ê²Œ ë“¤ì–´ë‚˜ê³  ì„±ëŠ¥ ì°¨ì´ëŠ” ì ê²ŒëŠ” 1.2ë°°ì—ì„œ 6ë°° ì´ìƒê¹Œì§€ë„ ë²Œì–´ì§€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ê²°ê³¼ì ìœ¼ë¡œ cacheë¥¼ í™œìš©í•˜ì—¬ ë” íš¨ìœ¨ì ì¸ Transaction ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n## Related Work\n\ní•´ë‹¹ ë…¼ë¬¸ì€ ê²°êµ­ Blockchainì˜ MPT êµ¬í˜„ì„ ë³€í˜•í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì œì‹œí•˜ì˜€ë‹¤. ì´ì™¸ì—ë„ TPSë¥¼ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—¬ëŸ¬ ë°©ë²•ì´ ì œì‹œë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, LMPTëŠ” ì´ëŸ¬í•œ ì—°êµ¬ë“¤ë³´ë‹¤ ì• ì„  ê²°ê³¼ë¥¼ ë³´ì—¬ì¤€ë‹¤. ê·¸ ì´ìœ ë¥¼ ë“¤ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì „ ì—°êµ¬ì™€ ë¹„êµí–ˆì„ ë•Œ ì–´ëŠ ì ì´ ì¢‹ì€ì§€ë¥¼ ë°íŒë‹¤.\n\n1. **Distributed MPTs**  \n   LMPTì™€ ê°€ì¥ ìœ ì‚¬í•œ ì—°êµ¬ ì‚¬ë¡€ë“¤ë¡œ MPTì˜ êµ¬í˜„ì„ ë³€ê²½í•˜ì—¬ ìµœì í™”ë¥¼ í•˜ê³ ì í•œ ì‚¬ë¡€ì´ë‹¤. í•˜ì§€ë§Œ, ì´ë“¤ ì¤‘ì—ì„œë„ LMPTê°€ ë” ìš°ìˆ˜í•˜ë‹¤ëŠ” ê²ƒì„ ë‹¤ìŒì„ í†µí•´ì„œ ì•Œ ìˆ˜ ìˆë‹¤.\n   - [ğŸ”— mLSM](https://www.usenix.org/conference/hotstorage18/presentation/raju)  \n     MPT ìì²´ë¥¼ ì—¬ëŸ¬ ê°œì˜ MPTë¡œ ë‚˜ëˆ„ì–´ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ íƒí•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ì„œ read, write ì‹œì— IO amplicationì„ ë§‰ì„ ìˆ˜ **ìˆì—ˆì§€ë§Œ**, ì˜¤íˆë ¤ write ì‹œì—ëŠ” ì—¬ëŸ¬ ë²ˆì˜ ì¤‘ë³µ writingìœ¼ë¡œ ì¸í•´ì„œ ë” ë§ì€ ë¹„ìš©ì´ ë°œìƒí•˜ì˜€ë‹¤.\n   - [ğŸ”— RainBlock](https://www.usenix.org/conference/atc21/presentation/ponnapalli)  \n     MPTë¥¼ shardingí•˜ì—¬ ë¶„ë°°í•˜ì—¬ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ ì„ íƒí•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ì„œ ì„±ëŠ¥ì„ ì˜¬ë¦¬ëŠ” ê²ƒì´ ê°€ëŠ¥í–ˆì§€ë§Œ, ì´ëŠ” ì „ì²´ì ì¸ Ethereum êµ¬í˜„ì„ ë°”ê¾¸ì–´ì•¼ í•œë‹¤. **í•˜ì§€ë§Œ**, LMPTëŠ” ì´ëŸ¬í•œ ë³€ê²½ì—†ì´ë„ clientë‹¨ì—ì„œ ì‰½ê²Œ êµ¬í˜„ ë° ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.\n2. **Consensus protocols**  \n   consensus protocolì„ ë³€ê²½í•˜ì—¬ ìµœì í™”ë¥¼ í•˜ë ¤ëŠ” ì‹œë„ ì—­ì‹œ ë§ì•˜ë‹¤(HyperLedger Fabric, Prism, etc). **í•˜ì§€ë§Œ**, ì´ë¥¼ í†µí•´ì„œ storage bottleneckì„ í•´ê²°í•  ìˆ˜ëŠ” ì—†ë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ ì—°êµ¬ì™€ consensus protocol ê´€ë ¨ ì—°êµ¬ëŠ” ìƒí˜¸ ë³´ì™„ì ì¸ ê´€ê³„ë¡œ, ê°™ì´ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë” ì¢‹ì€ ì„±ëŠ¥ì„ ë³´ì¼ ê²ƒì´ë¼ê³  ê¸°ëŒ€í•˜ê³  ìˆë‹¤.\n3. **Sharding in Blockchains**  \n   shardingì€ Ethereum v2ì˜ architecture ì¤‘ í•˜ë‚˜ë¡œ ì œì‹œëœ ë‚´ìš© ì¤‘ í•˜ë‚˜ë¡œ ì´ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´ transaction ì‹¤í–‰ì„ ë¶„ì‚°í•˜ëŠ” íš¨ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, shardê°„ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•œ protocolê³¼ shardê°„ cross-shard í†µì‹ ìœ¼ë¡œ ì¸í•œ overheadë„ ê³ ë ¤í•´ì•¼ í•œë‹¤. ì´ëŸ¬í•œ ë‚´ìš©ì„ ì œì³ë‘ê³ ë„ ê²°êµ­ì€ shardingê³¼ LMPTëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— consensus protocolê³¼ ê°™ì´ ë…ë¦½ì ìœ¼ë¡œ ë³´ì•„ë„ ë¬´ê´€í•˜ë‹¤.\n\n## Opinion\n\nTPSë¥¼ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë°©ë²•ì€ Bitcoinì´ ì²˜ìŒ ìƒê¸°ê³  ë‚˜ì„œë¶€í„° ê³„ì†í•´ì„œ ê³ ë ¤ë˜ê³  ìˆëŠ” ë¬¸ì œë¼ê³  ìƒê°í•œë‹¤. í•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” ê¸°ì¡´ ë…¼ë¬¸ì´ ì˜€ë˜ mLSMì—ì„œ ì˜ê°ì„ ì–»ì–´ì„œ ì´ë¥¼ ë” ë°œì „ì‹œí‚¨ ë°©ë²•ì„ ì°¾ì•˜ë‹¤ê³  ìƒê°í•œë‹¤. ë‹¨ìˆœíˆ ì—¬ëŸ¬ ê°œì˜ MPTë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œ ì‹¤ì œ ë¬¸ì œë¥¼ ëª…í™•í•˜ê²Œ ì •ì˜í•´ì„œ ì—¬ëŸ¬ ê°œì˜ MPTë¡œ ì–´ë–»ê²Œ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ëª…í™•í•˜ê²Œ ì œì‹œí•œ ê²ƒ ê°™ë‹¤. ì—¬ëŸ¬ ê°œì˜ MPTë¥¼ í†µí•´ì„œ read ê³¼ì •ì—ì„œ localityë¥¼ í™•ë³´í–ˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ merge ê³¼ì •ì„ write ê³¼ì •ì—ì„œ ë¶„ë¦¬í•¨ìœ¼ë¡œì„œ ê¸°ì¡´ transactionì´ ê°€ì§€ë˜ bottleneckì„ í•´ì†Œí•œ ê²ƒì´ë‹¤. ì´ ì ì´ ëª…í™•í•˜ê²Œ ë°›ì•„ë“¤ì—¬ì ¸ì„œ í•´ë‹¹ ë¶„ì•¼ ì „ê³µì´ ì•„ë‹˜ì—ë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ, ì•„ì‰½ê²Œë„ ì‹¤ì œ êµ¬í˜„ codeë¥¼ ì°¾ì„ ìˆ˜ëŠ” ì—†ì—ˆê¸°ì— flushë‹¨ê³„ì—ì„œ ì‚¬ìš©ëœ merge_intervalì˜ ì •í™•í•œ ê°’ì´ ê¶ê¸ˆí–ˆì§€ë§Œ ì°¾ì§€ëŠ” ëª»í–ˆë‹¤. ë˜, ì´ ì„ê³„ê°’ì´ ìƒí™©ì— ë”°ë¼ì„œ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìš”ì†Œë¼ê³  íŒŒì•…ì„ í•˜ê³  ìˆì—ˆëŠ”ë° ì´ë¥¼ ì•Œ ìˆ˜ ì—†ì–´ì„œ ì•„ì‰¬ì› ë‹¤.\n\nì•„ë§ˆ ì—¬ê¸°ì„œ í›„ì† ì—°êµ¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤ë©´, í•´ë‹¹ ì„ê³„ê°’ì„ ML, DL, RLì„ ì´ìš©í•´ì„œ ì¢€ ë” íš¨ê³¼ì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ì—°êµ¬ ë°©í–¥ì´ ë  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\nì´ëŸ¬í•œ ì£¼ì œë¥¼ ì²˜ìŒ ì ‘í–ˆê³ , Ethereumì˜ êµ¬í˜„ì— ëŒ€í•´ì„œë„ ì „í˜€ ì•„ëŠ”ê²Œ ì—†ì—ˆê¸° ë•Œë¬¸ì— ë‹¤ì–‘í•œ ì‚¬ì „ ì¡°ì‚¬ë¥¼ ìš”êµ¬í–ˆë˜ ë…¼ë¬¸ì´ì˜€ë‹¤. í•˜ì§€ë§Œ, Backgroundì— ëŒ€í•œ ì„¤ëª…ë„ ìì„¸íˆ ë‚˜ì™€ìˆê³ , Idea ìì²´ê°€ ëª…í™•í–ˆê¸°ì— í›Œë¥­í•˜ê³  ê°€ë…ì„±ì´ ë†’ì€ ë…¼ë¬¸ì´ ëœ ê±° ê°™ë‹¤.\n\n## Reference\n\n- Jemin Andrew Choi, Sidi Mohamed Beillahi, Peilun Li, Andreas Veneris, Fan Long [`\"LMPTs: Eliminating Storage Bottlenecks for Processing Blockchain Transactions\"`](https://ieeexplore.ieee.org/document/9805484/), May 2022\n- Ao Li, Jemin Andrew Choi, Fan Long [`\"Securing Smart Contract with Runtime Validation\"`](https://aoli.al/papers/solythesis-pldi20.pdf), June 2020\n- Tumbnail : Photo by [Shubham Dhage](https://unsplash.com/@theshubhamdhage?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/blockchain?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- Merkle Patricia Image : <https://ethereum.stackexchange.com/questions/268/ethereum-block-architecture>\n- Pandian Raju, Soujanya Ponnapalli, Evan Kaminsky, Gilad Oved, and Zachary Keener, University of Texas at Austin; Vijay Chidambaram, University of Texas at Austin and VMware Research; Ittai Abraham, VMware Research, [`mLSM: Making Authenticated Storage Faster in Ethereum`](https://www.usenix.org/conference/hotstorage18/presentation/raju), July 2018\n- Soujanya Ponnapalli, Aashaka Shah, and Souvik Banerjee, University of Texas at Austin; Dahlia Malkhi, Diem Association and Novi Financial; Amy Tai, VMware Research; Vijay Chidambaram, University of Texas at Austin and VMware Research; Michael Wei, VMware Research, [`RainBlock: Faster Transaction Processing in Public Blockchains`](https://www.usenix.org/conference/atc21/presentation/ponnapalli), July 2021\n","slug":"lmpt","date":"2022-10-28 17:17","title":"LMPT","category":"Paper","tags":["Blockchain","Ehtereum","MPT"],"desc":"Ethereumì˜ TPSë¥¼ Client ë‹¨ì—ì„œ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë…¸ë ¥ìœ¼ë¡œ, LMPTëŠ” Layered Merkle Partical Trieì˜ ì•½ìì´ë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì—ì„œ ì‚¬ìš©í•˜ë˜ MPTì˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•˜ì—¬ ì œê¸°ëœ ì•„ì´ë””ì–´ë¡œ Computer Architectureì—ì„œ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” cacheë¥¼ ì ‘ëª©í•œ ë°©ë²•ì´ë‹¤. (í•´ë‹¹ ë…¼ë¬¸ ICBC 2022ì˜ ë…¼ë¬¸ ì¤‘ LMPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìš”ì•½ê¸€ì´ë‹¤.)","thumbnailSrc":"https://euidong.github.io/images/blockchain-thumbnail.jpg"},{"content":"\n## Intro\n\n<https://ieeexplore.ieee.org/document/6838228>ì— ê¸°ì¬ëœ `OpenNetMon: Network Monitoring in OpenFlow Software-Defined Networks`ì˜ ë‚´ìš©ì— ëŒ€í•œ ë¦¬ë·°ì´ë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ OpenNetMonì€ POX OpenFlow Controllerë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ë§ì€ network componentë¡œ ì´ë£¨ì–´ì§„ fine-grained Networkì—ì„œ Traffic Engineeringì„ ìœ„í•œ QoS Metricì„ flow ë‹¨ìœ„ë¡œ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. ìˆ˜ì§‘í•˜ëŠ” ë°ì´í„°ëŠ” **Throughput**, **Packet Loss**, **Delay**ë¥¼ ì¸¡ì •í•œë‹¤.\n\n## Monitoring\n\nMonitoringì˜ ì¢…ë¥˜ ê·¸ë¦¬ê³  OpenNetMon ì´ì „ì˜ Monitoring ë°©ë²•ë¡ ì— ëŒ€í•œ ì†Œê°œë¥¼ ë¨¼ì €í•œë‹¤.\n\n> **Type of Monitoring**\n\nì„¸ ê°€ì§€ ê¸°ì¤€ì—ì„œ Monitoring ë°©ë²•ë“¤ì„ êµ¬ë¶„í•œë‹¤. ê·¸ ì¤‘ì—ì„œ ì²« ë²ˆì§¸ë¡œ ì œì‹œëœ ê²ƒì´ **Active**, **Passive**ì´ë‹¤.\n\n- **Active** : ì¶”ê°€ì ì¸ packetì„ Network ìƒì— ì‚½ì…í•˜ì—¬, í•´ë‹¹ packetì˜ ë™ì‘ì„ í†µí•´ì„œ ì¸¡ì •ì„ í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ê³¼ë„í•œ ì¶”ê°€ packetì€ Networkì— ì˜í–¥ì„ ì£¼ê¸° ë•Œë¬¸ì— ì´ì— ìœ ì˜í•´ì•¼ í•œë‹¤. ë°˜ëŒ€ë¡œ ë„ˆë¬´ ì ì€ packetì„ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì—ë„ ì •í™•ì„±ê³¼ ì‹¤ì‹œê°„ì„±ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤.\n- **Passiv** : ì¶”ê°€ì ì¸ packetì˜ ì‚½ì…ì—†ì´ ê¸°ì¡´ trafficì— ëŒ€í•œ ê´€ì¸¡ë§Œìœ¼ë¡œ ì¸¡ì •í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ì— ì ìš©í•  ìˆ˜ ì‡ëŠ” ë²”ìš©ì ì¸ ë°©ë²•ì€ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  í•  ìˆ˜ ìˆìœ¼ë©° ê° Networkë¥¼ ìœ„í•œ ì „ìš© Hardware ì¥ë¹„ê°€ í•„ìš”í•  ìˆ˜ë„ ìˆë‹¤. ë˜í•œ, Synchronizationì„ ìœ„í•œ ë³„ë„ì˜ ë°©ë²• ë˜í•œ í•„ìš”í•˜ë‹¤.(ê° Network ì¥ë¹„ì—ì„œ ê´€ì¸¡í•œ Trafficì´ ì„œë¡œ ëŒ€ì‘ë˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆì–´ì•¼ í•˜ê¸° ë•Œë¬¸)\n\në‘ ë²ˆì§¸ëŠ” ì–´ë–¤ Layerì—ì„œ Monitoringì„ ìˆ˜í–‰í•˜ëŠ”ê°€ì´ë‹¤. Application Layerì—ì„œ ì¸¡ì •ì„ í•˜ê²Œ ëœë‹¤ë©´, í™œìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ê°€ ë§ì•„ì§€ê³ , ì‹¤ì œ user ì…ì¥ì—ì„œì˜ ìµœì¢… ë°ì´í„°ë¥¼ ì–»ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ì„œë¹„ìŠ¤ ì œê³µì ì…ì¥ì—ì„œ ëª¨ë“  End Deviceì— ëŒ€í•œ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•œ ê²½ìš°ê°€ ë§ë‹¤. ë°˜ëŒ€ë¡œ Network Layerì—ì„œ ì¸¡ì •ì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì—ëŠ” ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ê°€ ê° Switch ì™€ ê°™ì€ Network ì¥ë¹„ì—ì„œ packetì´ ì–´ëŠ portë¡œ ë‚˜ê°”ëŠ”ì§€ì™€ ê°™ì€ ê°„ë‹¨í•œ ì •ë³´ë°–ì— ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ë‹¨ì ì´ ìˆì—ˆë‹¤.\n\nì„¸ ë²ˆì§¸ë¡œ ì œì‹œë˜ëŠ” ê²ƒì´ `OpenFlow`ë¥¼ ì´ìš©í•˜ì˜€ëŠ”ê°€ ì•„ë‹ˆë©´ ì´ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ëŠ”ê°€ì´ë‹¤. `OpenFlow`ê°€ ë“±ì¥í•˜ë©´ì„œ ê²°êµ­ Network Layerì—ì„œì˜ ì¸¡ì •ì´ ë” í° ì˜ë¯¸ë¥¼ ê°€ì§€ê²Œ ëœë‹¤. ì™œëƒí•˜ë©´, **Switchì— ì„¤ì •ì„ ë¯¸ë¦¬ ì£¼ì…í•˜ê±°ë‚˜ ìƒˆë¡œìš´ trafficì— ëŒ€í•œ ì •ë³´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì¶”ê°€í•  ìˆ˜ ìˆìœ¼ë©° Flow ë‹¨ìœ„ë¡œ í†µê³„ì¹˜ë¥¼ ì–»ê±°ë‚˜ ì„ì˜ì˜ packetì„ ì¶”ê°€í•˜ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆì—ˆê¸° ë•Œë¬¸ì— Network Layerì—ì„œì˜ ë” ë§ì€ Monitoringì´ ê°€ëŠ¥í•´ì¡Œë‹¤.** ì´ê²ƒì´ í•´ë‹¹ ë…¼ë¬¸ì´ OpenFlowë¥¼ í†µí•´ì„œ êµ¬í˜„í•˜ê³ ì í•˜ëŠ” ë°”ì´ë‹¤. Network Layerì—ì„œ ë³µì¡í•œ ë„¤íŠ¸ì›Œí¬ì—ì„œë„ ë³´ë‹¤ ì •í™•í•˜ê³ , ì‹¤ì‹œê°„ì˜ í†µê³„ ë°ì´í„°ë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nì•„ë˜ëŠ” í•´ë‹¹ ë…¼ë¬¸ì—ì„œ ì¶”ê°€ë¡œ ì œì‹œí•˜ëŠ” OpenNetMon ì´ì „ì— ì¡´ì¬í–ˆë˜ Monitoring ë°©ë²•ì— ëŒ€í•œ ì •ë¦¬ì´ë‹¤.\n\n|                 | Active/Passive | Layer   | OpenFlow ì—¬ë¶€ | ì„¤ëª…                                                                                                                                                                                                            |\n| :-------------- | :------------- | :------ | :------------ | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| SNMP            | Active         | Network | X             | port ë‹¨ìœ„ì˜ packet counter ê¸°ëŠ¥ ì œê³µ <br/> switchì˜ í†µê³„ì •ë³´ ì œê³µ(CPU, RAM)                                                                                                                                     |\n| NetFlow / cSamp | Passive        | Network | X             | switchë¥¼ í†µê³¼í•˜ëŠ” nê°œì˜ packetë§ˆë‹¤ ì„ì˜ì˜ 1ê°œì˜ packetì„ ì„ ë³„í•˜ì—¬ ì´ë¥¼ ëŒ€í‘œê°’ìœ¼ë¡œ í•˜ì—¬ Network ìƒíƒœë¥¼ ì¸¡ì •í•˜ì§€ë§Œ, ì •í™•ë„ê°€ ë§ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆë‹¤.                                                                 |\n| Skitter         | Active         | Network | X             | ì „ì²´ì ì¸ Network Delayë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ ëŒ€í‘œì§€ì—­ì— ì¸¡ì •ê¸°ë¥¼ ì„¤ì¹˜í•˜ì—¬ ì‹¤í–‰í•œ projectë¡œ, ì´ë¥¼ í†µí•´ ëŒ€ëµì ì¸ ì§€ì—°ì„ ì˜ˆì¸¡í•  ìˆ˜ëŠ” ìˆì§€ë§Œ ì •í™•í•˜ì§€ëŠ” ì•Šë‹¤.                                                             |\n| IPMON           | Passive        | Network | X             | TCP/IP packet headerë¥¼ ì¶”ì¶œí•˜ì—¬, timestampì™€ í•¨ê»˜ ì¤‘ì•™ serverë¡œ ì „ì†¡í•˜ì—¬ ì´ë¥¼ ë¶„ì„í•˜ëŠ” ë°©ì‹ì´ë‹¤. <br /> Passiveì„ì—ë„ Synchronizationì„ ë§ì¶”ê¸° ìœ„í•´ì„œ í†µì‹ ì€ ë¶ˆê°€í”¼í•˜ë©° Network í¬ê¸°ê°€ ì»¤ì§ˆ ìˆ˜ë¡ ë¹„ìš©ì´ ì»¤ì§„ë‹¤. |\n| OpenTM          | Passive        | Network | O             | ê° Flowì˜ í†µê³„ ë°ì´í„°ë¥¼ ì¼ì • ì£¼ê¸°ë¡œ Queryí•˜ì—¬ ìˆ˜ì§‘í•œë‹¤. Flowì˜ ì‹œì‘ê³¼ ë ì§€ì ì—ì„œë§Œ ì¸¡ì •í•˜ëŠ” Last-Switch ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤.                                                                                       |\n| OpenSAFE        | Passive        | Network | O             | SDNì˜ ëª¨ë“  ìƒˆë¡œìš´ Flowê°€ Controllerë¡œ ì´ë™í•˜ëŠ” ê²ƒì„ ì´ìš©í•˜ì—¬ Monitoring ì‹œìŠ¤í…œìœ¼ë¡œ Controllerê°€ ì´ë¥¼ ì „ë‹¬í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤.                                                                                  |\n| OpenSketch      | -              | -       | -             | Monitoringì„ ìœ„í•´ OpenFlow ìì²´ë¥¼ ì¬ì •ì˜í•˜ìëŠ” ê²ƒìœ¼ë¡œ ìƒˆë¡œìš´ Protocolì„ ì •ì˜í•´ì„œ ë” ë‚˜ì€ Monitoringì„ ìˆ˜í–‰í•˜ìëŠ” ë°©ë²•ì´ë‹¤. <br /> í•˜ì§€ë§Œ, ì´ë ‡ê²Œ ìƒˆë¡œìš´ Protocolì„ ë§Œë“œëŠ” ê²ƒì€ Riskê°€ ë„ˆë¬´ í¬ë‹¤.                |\n\n## OpenNetMon\n\nê¸°ì¡´ì˜ Monitoring ë°©ì‹ë“¤ì€ OpenFlowì˜ Packet ì‚½ì…ì„ ì´ìš©í•œ ë°©ì‹ì„ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì„ ë¿ë§Œ ì•„ë‹ˆë¼ Flow ì¸¡ì •ì— ìˆì–´ ìµœì í™”ì— í•œê³„ê°€ ìˆì—ˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ **Throughput**, **Packet Loss**, **Delay**ì„ í†µí•©í•˜ê³ ì í•˜ì§€ ì•Šì•˜ë‹¤. ë”°ë¼ì„œ, OpenNetMonì€ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.\n\nê° ì¸¡ì • ìš”ì†Œë¥¼ ì–´ë–»ê²Œ ìˆ˜ì§‘í•  ê²ƒì¸ì§€ë¥¼ ê° ê° ì •ë¦¬í•œë‹¤.\n\n> **1. Throughput**\n\nOpenFlowì˜ `FlowStatsReq`(Controllerì—ì„œ ê° Switchë¡œ ì „ì†¡í•˜ëŠ” Request)ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ í˜¸ì¶œí•˜ì—¬ ê° Switchì—ì„œ ì „ì†¡í•œ Byteì˜ ì–‘ê³¼ ê° Flowì˜ ì§€ì† ì‹œê°„ì„ ì–»ëŠ”ë‹¤. ì£¼ê¸°ì  í˜¸ì¶œ ì‹±ë ˆëŠ” ê²½ë¡œ ìƒì˜ ì²˜ìŒê³¼ ëì„ í˜¸ì¶œí•˜ëŠ” Last Switch ë°©ì‹ì„ ì‚¬ìš©í•˜ë©°, ì´ëŠ” Round Robinì´ ëŒ€ê·œëª¨ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì—ì„œ ë¹„íš¨ìœ¨ì ì¼ ë¿ë§Œ ì•„ë‹ˆë¼ Packet Loss ì¸¡ì • ì‹œì—ë„ Last SwitchëŠ” í•„ìˆ˜ì ìœ¼ë¡œ í•„ìš”í•œ ìš”ì†Œì´ê¸°ì— ìµœì  ìš”ì†Œë§Œì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\n\në˜í•œ, ì´ëŸ¬í•œ í˜¸ì¶œ ì£¼ê¸°ëŠ” ë³€ë™ì ìœ¼ë¡œ ì„¤ì •ë˜ì—ˆëŠ”ë° ì´ëŠ” Link State Informationì— ê¸°ë°˜í•œ Routing Discovery ì‹œì— ì´ë¥¼ êµí™˜ ë° ë™ê¸°í™”í•˜ëŠ” ê²ƒì€ Network Throughputì— ë§ì€ ì˜í–¥ì„ ë¯¸ì¹˜ë©° Throughputì„ êµ‰ì¥íˆ í° ë²”ìœ„ë¡œ ë³€ë™ë˜ê²Œ í•œë‹¤. ì´ì— ë”°ë¼ ì•„ì§ convergence(ìˆ˜ë ´)ì´ ì•ˆëœ ì‹œì ì—ëŠ” ì£¼ê¸°ë¥¼ ë” ë¹ˆë²ˆí•˜ê²Œ í•˜ê³ , í›„ì—ëŠ” ì´ë¥¼ ë˜ëŒë¦¬ë„ë¡ í•˜ëŠ” ì„¤ì •ì´ í•„ìš”í•˜ê¸°ì— ì´ ë˜í•œ ì¶”ê°€ë˜ì—ˆë‹¤.\n\n> **2. Packet Loss**\n\nì‹œì‘ì§€ì™€ ëª©ì ì§€ì˜ Switchì—ì„œ í•´ë‹¹ Flowì— ëŒ€í•œ Packet Countingì„ ìˆ˜í–‰í•˜ì—¬ ê³„ì‚°í•œë‹¤.\n\n> **3. Delay**\n\nPacketì„ í•˜ë‚˜ ìƒì„±í•˜ì—¬ ì¶œë°œ ì‹œê°„ê³¼ ë„ì°© ì‹œê°„ì„ í†µí•´ ì¸¡ì •í•œë‹¤. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì€ ì‹ìœ¼ë¡œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤. ì•„ë˜ RTTëŠ” Controllerì™€ ê° Switch ê°„ì˜ RTTë¥¼ ì˜ë¯¸í•œë‹¤.\n\n$$ t_{delay} = (t_{arrival} - t_{sent} - {{1}\\over{2}}({RTT}_{sentSwitch-controller} + {RTT}_{arrivalSwitch-controller})) $$\n\n## Evaluation\n\nì‹¤ì œ ì‹¤í—˜ì„ í†µí•´ì„œ OpenNetMonì— ëŒ€í•œ ì„±ëŠ¥ì„ í…ŒìŠ¤íŒ…í•˜ì˜€ë‹¤. ì´ê³¼ì •ì—ì„œ ì´ 4ê°œì˜ OpenFlowë¥¼ ì§€ì›í•˜ëŠ” Switchë¥¼ ì¼ìë¡œ ì—°ê²°í•˜ê³  ê° ë§ë‹¨ì— Serverì™€ Clientë¥¼ ì—°ê²°í•œ í›„ì— ê° Switchê°€ POX OpenFlow Controllerì— ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°ë˜ë„ë¡ êµ¬ì„±í•˜ê³ , ê° ë§ë‹¨ê³¼ Server/Clientë¡œì˜ ì—°ê²°ì€ 1Gbps Ethernetë¡œ ì—°ê²°í•˜ê³ , Switchê°„ì˜ ì—°ê²°ì€ 100Mbpsì— 1% loss, 1ms delayë¡œ ì„¤ì •ì„ í•˜ì˜€ë‹¤. ì‹¤ì œ ì „ì†¡ ë°ì´í„°ëŠ” video stream trafficì„ í™œìš©í•˜ì—¬ ë³µì¡í•œ traffic ì „ì†¡ì„ í‘œí˜„í•˜ê³ ì í–ˆë‹¤.\n\nì‹¤ì œ ê·¸ë˜í”„ì™€ TopologyëŠ” ì§ì ‘ì ìœ¼ë¡œ ê°€ì ¸ì˜¤ì§€ëŠ” ì•Šì•˜ë‹¤. ì•„ë¬´ë˜ë„ ì €ì‘ê¶Œì— ëŒ€í•´ì„œ ì œëŒ€ë¡œ ì•Œ ìˆ˜ ì—†ì–´ì„œ ê°€ì ¸ì˜¤ì§€ ì•Šì•˜ë‹¤. í•˜ì§€ë§Œ, ë…¼ë¬¸ê³¼ ê°™ì´ ë¹„êµí•˜ë©´ì„œ ë³´ë©´ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\n> **1. Throughput**\n\nApplication Levelì—ì„œ êµ¬í˜„í•œ `tcpstat`ê³¼ ë¹„êµí–ˆì„ ë•Œ, 16KB/s(1.2%) ì •ë„ ë°–ì— ì°¨ì´ê°€ ë‚˜ì§€ ì•Šì•˜ë‹¤. í•˜ì§€ë§Œ, ì´ˆê¸°ì— 17.8%ê¹Œì§€ ì°¨ì´ê°€ ë°œìƒí•˜ëŠ”ë° ì´ëŠ” ì´ˆê¸° ì¤€ë¹„ ê¸°ê°„ìœ¼ë¡œ ë§Œì•½ ì´ˆê¸° ì¤€ë¹„ ê¸°ê°„ì„ ì¤€ë‹¤ë©´ í•´ê²° ê°€ëŠ¥í•˜ë‹¤. ë˜í•œ, í•œ ë²ˆì”© spikeê°€ ë°œìƒí•˜ëŠ”ë° ì´ëŠ” polling ê³¼ì •ì—ì„œ ì´ì „ ìš”ì²­ë³´ë‹¤ í˜„ì¬ ìš”ì²­ì´ ë¨¼ì € ë„ì°©í•  ë•Œ ë°œìƒí•œë‹¤. ì´ë¥¼ ìœ„í•´ synchronizationì„ ë§ì¶°ì£¼ê¸° ìœ„í•œ ë¡œì§ì„ ì¶”ê°€í•œë‹¤ë©´ í•´ê²°ì´ ê°€ëŠ¥í•˜ë‹¤. ì—¬ê¸°ì„œëŠ” sleepê³¼ mutual exclusionì„ ì´ìš©í•˜ê¸°ë¥¼ ê¶Œì¥í•œë‹¤.\n\n> **2. Packet Loss**\n\nì •í™•í•˜ì§€ëŠ” ì•Šì§€ë§Œ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆì„ ì •ë„ì˜ ì˜¤ì°¨ë°–ì— ë°œìƒí•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n> **3. Delay**\n\nControl Planeì— ê¸°ë°˜í•˜ì—¬ ì „ì†¡í•˜ëŠ” ë°©ë²•ê³¼ VLANì„ ê¸°ë°˜ìœ¼ë¡œ Data planeìœ¼ë¡œ ì „ì†¡í•˜ëŠ” ë²• ê·¸ë¦¬ê³  ì‹¤ì œë¡œ userê°€ ì²´ê°í•˜ëŠ” delayë¥¼ ë¹„êµí–ˆì„ ë•Œ, Control Planeì„ ê·¸ëŒ€ë¡œ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ìƒê°ë³´ë‹¤ í° ì˜¤ì°¨ê°€ ë°œìƒí•œë‹¤. ì´ëŠ” Controllerì—ì„œ Software Scheduling ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì´ê¸°ì—, VLANì„ ê¸°ë°˜ìœ¼ë¡œ Data Planeì„ ì´ìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” ì‹¤ì œ ë°ì´í„°ì™€ ë¹„êµí•´ë„ ì˜¤ì°¨ê°€ ê±°ì˜ ì—†ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n## Review\n\ní•´ë‹¹ ë…¼ë¬¸ì€ OpenFlowê°€ ë‚˜ì˜¤ê³  ì´ë¥¼ ì´ìš©í•´ì„œ Monitoringì„ ìˆ˜í–‰í•˜ê³ ì í–ˆë˜ ì—¬ëŸ¬ ISPì™€ ì—°êµ¬ìë“¤ì—ê²Œ ë„ì›€ì„ ì£¼ì—ˆë‹¤ê³  ìƒê°í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ OpenFlowë¥¼ ì´ìš©í•œ ì—¬ëŸ¬ Monitoring ë°©ì‹ì´ ì—°êµ¬ë˜ì—ˆë˜ ê²ƒ ê°™ë‹¤. ê·¸ë˜ì„œ Network ë…¼ë¬¸ì„ì—ë„ 261ê±´ ì •ë„ì˜ ì¸ìš©ìˆ˜ë¥¼ íšë“í•œ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ë˜í•œ, OpenFlowë¥¼ ì´ìš©í•œ Monitoring ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì´ í¥ë¯¸ë¡œì› ê³ , ê¸°ì¡´ì˜ Monitoring ë°©ì‹ì„ OpenFlowë¥¼ í†µí•´ì„œ ì ìš©í•´ë³´ëŠ” ê²ƒì´ ë‹¹ì‹œ ì—°êµ¬ì—ì„œ ì¤‘ìš”í–ˆë˜ í¬ì¸íŠ¸ì˜€ë˜ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ìƒˆë¡œìš´ ê¸°ìˆ ì— ê¸°ì¡´ ê¸°ìˆ ì˜ ì•„ì´ë””ì–´ë¥¼ ì ‘ëª©í•˜ëŠ” ê²ƒë„ ê³ ë ¤í•´ì„œ ë…¼ë¬¸ì„ ì‘ì„±í•˜ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì´ë¼ê³  ìƒê°ëœë‹¤. ë˜í•œ, êµ¬í˜„ì´ Githubë¡œ openë˜ì–´ìˆê¸° ë•Œë¬¸ì— ì‹ ë¢°ë„ë„ ë†’ì•˜ë˜ ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. ë§Œì•½ í•´ë‹¹ ë¶€ë¶„ì„ ì¢€ ë” í™•ì¸í•˜ê³  ì‹¶ë‹¤ë©´ ì¸ìš© ë…¼ë¬¸ì„ ì¢€ ë” íƒìƒ‰í•´ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ë°©ë²•ì´ ë  ê²ƒ ê°™ë‹¤.\n\nì‘ì„±ìê°€ Postingì„ ì‘ì„±í•˜ëŠ” ë‚ ì§œë¥¼ ê¸°ì¤€ìœ¼ë¡œ 261 ë²ˆì˜ ì¸ìš©ìˆ˜ë¥¼ ìë‘í•˜ëŠ” ë…¼ë¬¸ì„ ë¦¬ë·°í•œ ê²ƒì´ë‹¤. ì•ìœ¼ë¡œë„ NOMS ë…¼ë¬¸ ì¤‘ì—ì„œ ì¸ìš©ìˆ˜ê°€ ë§ì•˜ë˜ ë…¼ë¬¸ë“¤ì„ ìœ„ì£¼ë¡œ í•œ ë²ˆ Reviewë¥¼ ì§„í–‰í•  ì˜ˆì •ì´ë‹¤.\n\n## Reference\n\n- Niels L. M. van Adrichem, Christian Doerr, Fernando A.Kuipers, [`\"OpenNetMon: Network Monitoring in OpenFlow Software-Defined Networks\"`](https://ieeexplore.ieee.org/document/6838228), June 2014\n- Thumbnail : Photo by [Tobias Tullius](https://unsplash.com/@tobiastu?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@tobiastu?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"open-net-mon","date":"2022-06-27 14:02","title":"OpenNetMon","category":"Paper","tags":["SDN","Monitoring","OpenFlow"],"desc":"<https://ieeexplore.ieee.org/document/6838228ì— ê¸°ì¬ëœ OpenNetMon: Network Monitoring in OpenFlow Software-Defined Networksì˜ ë‚´ìš©ì— ëŒ€í•œ ë¦¬ë·°ì´ë‹¤. ì´ë¦„ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ OpenNetMonì€ POX OpenFlow Controllerë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ë§ì€ network componentë¡œ ì´ë£¨ì–´ì§„ fine-grained Networkì—ì„œ Traffic Engineeringì„ ìœ„í•œ QoS Metricì„ flow ë‹¨ìœ„ë¡œ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. ìˆ˜ì§‘í•˜ëŠ” ë°ì´í„°ëŠ” Throughput, Packet Loss, Delayë¥¼ ì¸¡ì •í•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/monitor.jpg"}],"Network":[{"content":"\n## Intro\n\nMPLSëŠ” 2ê³„ì¸µê³¼ 3ê³„ì¸µ ì‚¬ì´ì—ì„œ Routingì„ ê°€ì†í™”í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì œì‹œëœ ë°©ë²•ì´ë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ Networkingì˜ ë¬¸ì œë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ì„œ ê³ ì•ˆë˜ì—ˆê¸°ì— ì—¬ëŸ¬ ìš°ìˆ˜í•œ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆë‹¤.\n\n## MPLS\n\nê¸°ì¡´ì˜ Routingì—ì„œëŠ” ë§¤ hop(router)ë‹¹ Routing Tableì„ ì°¸ì¡°í•˜ì—¬ packetì„ ì „ì†¡í–ˆë‹¤. í•˜ì§€ë§Œ, ì´ ê³¼ì •ì€ ìƒê°ë³´ë‹¤ ë§ì€ ì‹œê°„ì´ í•„ìš”í•˜ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ í™”ìƒ í†µí™” ë“±ì„ í•œë‹¤ë©´, ì„œë¹„ìŠ¤ í’ˆì§ˆì´ ë§¤ìš° ë–¨ì–´ì§ˆ ìœ„í—˜ì´ ìˆë‹¤. ë”°ë¼ì„œ, MPLSëŠ” Routingë¥¼ ë” ë¹ ë¥´ê²Œ í•˜ê³ , í’ˆì§ˆ í•­ìƒì„ ìœ„í•´ì„œ ë§Œë“¤ì–´ì¡Œë‹¤. ì´ëŠ” Multi-Protocol Label Switching(MPLS)ì´ë¼ëŠ” ë§ì²˜ëŸ¼, ê¸°ì¡´ì˜ IPë¥¼ ì´ìš©í•œ Routingì´ ì•„ë‹Œ Label(ë˜ëŠ” tag)ì´ë¼ëŠ” ë³„ë„ì˜ dataë¥¼ ì´ìš©í•˜ì—¬, 3ê³„ì¸µì„ ê±°ì¹˜ì§€ ì•Šê³ , Routingì„ ê³ ì†í™”í•˜ëŠ” ì—­í• ì„ í•  ìˆ˜ ìˆë‹¤.\n\në˜í•œ, **MPLS**ì—ì„œëŠ” ì‚¬ì „ì— ê³ íš¨ìœ¨ ê²½ë¡œë¥¼ ì„¤ì •í•˜ê³ , ì´ë¥¼ í†µí•´ì„œ í†µì‹ í•˜ë„ë¡ í•˜ì—¬ ì„±ëŠ¥ ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, Packetì´ ë“¤ì–´ì˜¤ë©´, ì§„ì…ì ì— ìˆëŠ” Router(Ingress Router)ê°€ í•´ë‹¹ Packetì— Labelì„ í‘œê¸°í•˜ê³  ë‚´ë¶€ Networkë¡œ ì „ì†¡í•˜ê²Œ ëœë‹¤. ì´ì œ ë‚´ë¶€ Routerì—ì„œëŠ” Packetì„ ëª¨ë‘ í™•ì¸í•˜ì§€ ì•Šê³ , í•´ë‹¹ Labelë§Œì„ ì´ìš©í•˜ì—¬ Forwardingì„ ìˆ˜í–‰í•œë‹¤. ê·¸ë ‡ê¸°ì— ë” ë¹ ë¥¸ Routingì´ ê°€ëŠ¥í•´ì§€ëŠ” ê²ƒì´ë‹¤.\n\n![MPLS packet](/images/mpls-label.jpeg)\n\ní•˜ì§€ë§Œ, ê·¸ ì™¸ì—ë„ ì¶”ê°€ë¡œ ë” ë§ì€ ì¥ì ì„ ë³´ìœ í•˜ê³  ìˆë‹¤.\n\n1. ì—¬ëŸ¬ Protocolê³¼ í˜¸í™˜ì´ ê°€ëŠ¥í•˜ë„ë¡ overlayë¡œ ê°œë°œë˜ì—ˆë‹¤. (2.5 Layerë¼ê³ ë„ ë¶ˆë¦¬ëŠ” ì´ìœ ì´ë‹¤.)\n2. TE(Traffic Engineering)ë¥¼ ìœ„í•œ ì—¬ëŸ¬ ì„¤ì •ì„ ì œê³µí•œë‹¤. ë”°ë¼ì„œ, bandwidth, QoS(ì„œë¹„ìŠ¤ í’ˆì§ˆ)ì— ë”°ë¼ì„œ Trafficì„ ì œì–´í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n## ìš©ì–´\n\n- MPLS Network : **MPLS**ë¥¼ í†µí•´ì„œ êµ¬ì¶•í•œ Networkë¥¼ ì˜ë¯¸í•œë‹¤. í•´ë‹¹ Networkë¡œ ì§„ì…í•˜ëŠ” ìˆœê°„ Packetì—ëŠ” Labelê³¼ ë¶€ê°€ì ì¸ headerê°€ ì¶”ê°€ëœë‹¤.\n- Label : Labelì€ ê° Routerì—ê²Œ í•˜ë‚˜ì”© ì£¼ì–´ì§€ëŠ” Routerì˜ ê³ ìœ  ì‹ë³„ê°’ì´ë‹¤.\n- LER(Label Edge Router) : Network ì œê³µì ì…ì¥ì—ì„œ Edge Routerë¡œ ë‘ ê°€ì§€ ì¢…ë¥˜ë¡œ ë‚˜ë‰œë‹¤.  \n  Ingressì™€ EgressëŠ” í•­ìƒ ê³ ì •ì¸ ê²ƒì´ ì•„ë‹ˆë¼ packetì— ì…ì¥ì—ì„œ ê³„ì†í•´ì„œ ë³€ê²½ëœë‹¤.\n  - Ingress Router: packetì´ Networkë¡œ ì§„ì…í•˜ëŠ” Routerë¡œ ì‹¤ì œ Networkë¥¼ ì „ì²´ ì¡°íšŒí•˜ê³ , Labelì„ ì¶”ê°€í•˜ëŠ” ì—­í• ì„ í•œë‹¤.\n  - Egress Router : packetì´ Networkë¥¼ íƒˆì¶œí•˜ëŠ” Routerë¡œ Packetì˜ ë‚¨ì•„ìˆëŠ” Labelì„ ì‚­ì œí•œë‹¤.\n- LSR(Label Switched Router) : MPLS Network ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” LERì´ ì•„ë‹Œ Routerë“¤ë¡œ ì´ë“¤ì€ Packetì˜ Labelì„ Switchingí•˜ê³ , Forwardingí•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.\n\n![mpls-example](/images/mpls-example.jpeg)\n\n## ë™ì‘ ì›ë¦¬\n\n`LSP(Label Switched Path)ë¼ëŠ” ìµœë‹¨ ê²½ë¡œë¥¼ ì°¾ê³ , ì´ë¥¼ í†µí•´ì„œ Packetì„ ì „ë‹¬ì‹œí‚¨ë‹¤.`ê°€ Protocolì˜ í•µì‹¬ì ì¸ ì „ëµì´ë‹¤. í˜•ì„±ëœ LSPì— ë”°ë¼ì„œ labeë“¤ì„ ì„¤ì •í•´ë‘ë©´, ì´ì œ ë‚´ë¶€ Routerì—ì„œëŠ” ìì‹ ì—ê²Œ í•´ë‹¹í•˜ëŠ” Labelì„ êµí™˜í•˜ì—¬ ë‹¤ì‹œ Forwardingì„ ìˆ˜í–‰í•˜ë©´ ë˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, 3ê³„ì¸µì„ ê±°ì¹˜ì§€ ì•Šê³  Routingì´ ê°€ëŠ¥í•˜ë‹¤. ìœ„ì—ì„œ ë‚˜ì˜¨ ìš©ì–´ë¡œ ì •ë¦¬í•˜ìë©´, Ingress LERì—ì„œëŠ” packetì˜ ëª©ì ì§€ì™€ ìš”ì²­ì§€ ì •ë³´ ë“±ì„ í™œìš©í•˜ì—¬ LSPì„ êµ¬ì„±í•˜ê³ , ì´ì— ì•Œë§ëŠ” Labelì„ packetì— ì¶”ê°€í•œë‹¤. ì´ì œ ì´ packetì„ ë°›ì€ LSRì—ì„œëŠ” Labelì„ í•˜ë‚˜ ë¹¼ê³ , ë‹¤ìŒ LSRì„ ì°¾ì•„ê°€ê¸°ë¥¼ ë°˜ë³µí•˜ë©°, egress LERì— ë„ë‹¬í•œë‹¤. egressì—ì„œëŠ” Labelì´ ë‚¨ì•„ìˆë‹¤ë©´, ëª¨ë‘ ì œê±°í•˜ê³ , ì›ë˜ ì‚¬ìš© ì¤‘ì´ë˜ Protocolì— ë§ê²Œ ë‹¤ì‹œ Routingì„ ìˆ˜í–‰í•œë‹¤.\n\n![mpls-example](/images/mpls-example-2.jpeg)\n\n### LSP êµ¬ì„±\n\nì´ 3ê°€ì§€ ë°©ë²•ì„ í†µí•´ì„œ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤. ì´ëŠ” í›„ì— ë‚˜ì˜¬ Configurationì— ë”°ë¼ì„œ ì–´ëŠì •ë„ ë°”ë€Œê²Œ ëœë‹¤.\n\n1. Best Effort LSP : Label í• ë‹¹ì´ ì•Œê³ ë¦¬ì¦˜ì— ì˜í•´ì„œ ìë™ì ìœ¼ë¡œ í• ë‹¹ë˜ë©°, í•­ìƒ ì—°ê²°ì´ ì§€ì†ë  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì„ ìµœëŒ€ ëª©í‘œë¡œ í•˜ê¸° ë•Œë¬¸ì— ì—¬íƒ€ ë°©ì‹ë“¤ì— ë¹„í•´ ì„±ëŠ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ë„ ìˆì§€ë§Œ, ì¥ì•  ëŒ€ì‘ì— ì ì ˆí•˜ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.\n2. Static LSP : Labelì„ ì§ì ‘ ìˆ˜ì‘ì—…ì„ í†µí•´ì„œ í• ë‹¹í•´ì£¼ë©°, ê²½ë¡œë¥¼ customizingí•  ìˆ˜ ìˆì§€ë§Œ, ì´ë¡œ ì¸í•´ì„œ ì˜ˆìƒì¹˜ ëª»í•œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.\n3. Signaled LSP : ì¼ì • ì´ìƒì˜ ìì›(Bandwidth, ë“±)ì„ ì œí•œí•˜ì—¬ ê²½ë¡œë¥¼ ìµœì í™”í•  ìˆ˜ ìˆë‹¤.\n\n### Configuration\n\nMPLS networkë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ê²°êµ­ ê° Routerì— Labelì„ ë‚˜ëˆ„ì–´ì£¼ëŠ” ê²ƒê³¼ LSPë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì•„ë˜ì—ëŠ” ëŒ€í‘œì ì¸ MPLSì˜ Topologyë¥¼ ì‚´í´ë³¸ë‹¤.\n\n- LDP : ìœ„ì—ì„œ ì„¤ëª…í•œ Best Effort LSPë¥¼ êµ¬ì„±í•˜ëŠ” Protocolë¡œ Labelì„ ë¶„ë°°í•˜ê³ , ê° Routerì—ì„œëŠ” Labelì˜ Push/POP/Swapì„ ìˆ˜í–‰í•œë‹¤.\n- RSVP-TE : íŠ¹ì • ì œì•½ ì¡°ê±´ì„ ë¨¼ì € ì œì‹œë¥¼ í•˜ê³ , ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì´ì™€ ì¼ì¹˜í•˜ëŠ” ê²½ë¡œë¥¼ ì°¾ì•„ì„œ packetì„ Routingí•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n## Versus\n\n| êµ¬ë¶„                   | ATM       | IP        | MPLS      |\n| :--------------------- | :-------- | :-------- | :-------- |\n| IP Traffic Engineering | ìš°ìˆ˜      | ë³´í†µ      | ë§¤ìš° ìš°ìˆ˜ |\n| ê³ ì† í¬ì›Œë”©            | ë§¤ìš° ìš°ìˆ˜ | ë³´í†µ      | ìš°ìˆ˜/ë³´í†µ |\n| QoS                    | ë§¤ìš° ìš°ìˆ˜ | ë³´í†µ      | ìš°ìˆ˜      |\n| VPN ë¹„ìš©               | ê³ ê°€      | ì €ê°€      | ì¤‘ê°€      |\n| í™•ì¥ì„±                 | ìš°ìˆ˜      | ë§¤ìš° ìš°ìˆ˜ | ë§¤ìš° ìš°ìˆ˜ |\n| êµ¬ì¶• / ìœ ì§€ ë¹„ìš©       | ë§¤ìš° ê³ ê°€ | ì €ê°€      | ê³ ê°€      |\n\n## References\n\n- Thumbnail : Photo by [Tyler Farmer](https://unsplash.com/@tylerfarmer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/forwarding?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- <https://www.itworld.co.kr/tags/6580/MPLS/108621>\n- <https://blog.naver.com/thorong/70147777745>\n","slug":"mpls","date":"2022-05-22 15:25","title":"MPLS","category":"Network","tags":["Routing"],"desc":"MPLSëŠ” 2ê³„ì¸µê³¼ 3ê³„ì¸µ ì‚¬ì´ì—ì„œ Routingì„ ê°€ì†í™”í•˜ê¸° ìœ„í•œ ë°©ë²•ìœ¼ë¡œ ì œì‹œëœ ë°©ë²•ì´ë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ ê¸°ì¡´ì— ì¡´ì¬í•˜ë˜ Networkingì˜ ë¬¸ì œë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ì„œ ê³ ì•ˆë˜ì—ˆê¸°ì— ì—¬ëŸ¬ ìš°ìˆ˜í•œ ê¸°ëŠ¥ì„ ê°€ì§€ê³  ìˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/routing.jpg"},{"content":"\n## Intro\n\nmininetì€ í˜„ì‹¤ì ì¸ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ êµ¬ì¶•í•´ì£¼ëŠ” `Network Emulator`, ë” ì •í™•íˆëŠ” `NETOWKR Emulation Orchestration System`ì´ë‹¤.  \nì´ë¥¼ í†µí•´ì„œ, ê°€ìƒì˜ End Device(Host), ê°ì¢… Switch, Router, ê·¸ë¦¬ê³  ì´ë¥¼ ì—°ê²°í•˜ëŠ” Linkë¥¼ ë‹¨ í•˜ë‚˜ì˜ Linux Kernelë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³ , ê° Hostì— `ssh` ì ‘ê·¼ì„ ìˆ˜í–‰í•˜ì—¬ ê¸°ë³¸ Linux Kernel ë™ì‘ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ethernetì„ ì´ìš©í•´ì„œ ê° deviceë¡œ packetì„ ì „ì†¡í•˜ëŠ” ê²ƒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. (ì‹¤ì œ speedì™€ delayì— ê¸°ë°˜í•œ ì†ë„ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.) ë˜í•œ, SDNê³¼ ê°™ì€ í™˜ê²½ì— í•„ìš”í•œ Controller ì—­ì‹œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ê·¸ë ‡ê¸°ì— ì‹¤ì œë¡œ SDN Networkë¥¼ Testí•˜ê³  ì—°êµ¬í•˜ëŠ” ëª©ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆë‹¤.\n\n## ì¥ì \n\n1. Fast - ê°€ìƒ ë„¤íŠ¸ì›Œí¬ì˜ êµ¬ì„±ì´ êµ‰ì¥íˆ ë¹ ë¥¸ ì‹œê°„ ë‚´ì— êµ¬ì„±ëœë‹¤. ì‹¤ì œë¡œ ë™ì‘í•´ë³´ë©´, ì´ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.\n2. Customize Topology - ê°„ë‹¨í•œ ë„¤íŠ¸ì›Œí¬ì—ì„œë¶€í„° ì‹œì‘í•´ì„œ, Backborn, Datacenter, Internet ë“± ëª¨ë“  ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.\n3. Can run every programs in Linux - ê°„ë‹¨í•œ Web Serverì—ì„œë¶€í„° ì‹œì‘í•˜ì—¬ Mornitoring Serviceì¸ Wireshark ë“±ì˜ í™œìš©ì´ ê°€ëŠ¥í•˜ë‹¤.\n4. Progammable - ê° Switchì˜ ë™ì‘ë„ programmingì´ ê°€ëŠ¥í•˜ê¸°ì— OpenFlow Protocolì„ ê¸°ë°˜ìœ¼ë¡œ packet forwarding ì—­ì‹œ customizingì´ ê°€ëŠ¥í•˜ë‹¤.\n5. LightWeight - Labtopì—ì„œ ëŒì•„ê°ˆ ì •ë„ë¡œ ê°€ë³ë‹¤.\n6. Can share results - ê° Topologyì™€ ê°™ì€ êµ¬ì„±ì€ python codeë¡œ êµ¬ì„±ë˜ê³ , test code ë“±ë„ ì‰½ê²Œ ê³µìœ ê°€ ê°€ëŠ¥í•˜ë‹¤.\n7. Easy - Mininet ì‹¤í–‰ê³¼ êµ¬ì¶• ê·¸ë¦¬ê³  ìš´ì˜ì´ ë§¤ìš° ê°„ë‹¨í•œ CLI, Python codeë¡œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ë§¤ìš° ì‰½ë‹¤.\n8. OpenSource - ì‰½ê²Œ ì»¤ë®¤ë‹ˆì¼€ì´ì…˜ì´ ê°€ëŠ¥í•˜ê³ , ëˆ„êµ¬ë‚˜ í•´ë‹¹ í”„ë¡œì íŠ¸ì— ì°¸ì—¬ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\n## ì£¼ì˜ì‚¬í•­\n\n1. ë§Œì•½ 10Gbps ì´ìƒì˜ trafficì„ ì²˜ë¦¬í•˜ê¸°ë¥¼ ì›í•˜ëŠ” ê²½ìš°, ë¶€í•˜ë¥¼ ì ì ˆíˆ ë¶„ë°°í•˜ê¸° ìœ„í•œ êµ¬ì¡°ë¥¼ ì‹¤í–‰ì ì¸¡ì—ì„œ êµ¬ì„±í•  í•„ìš”ê°€ ìˆë‹¤.\n2. Mininetì€ í•˜ë‚˜ì˜ Linux Kernelì„ í†µí•´ ëª¨ë“  Virtual Hostë¥¼ ì œì–´í•œë‹¤. (ë‹¤ë¥¸ Platform, Window ë“±ì€ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. VM í•„ìš”)\n3. Mininetì—ì„œëŠ” OpenFlow Controllerë¥¼ ì‚¬ìš©í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ì´ë¥¼ ì§ì ‘ ì œì–´í•  ë°©ë²•ì€ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.\n4. ê¸°ë³¸ì ìœ¼ë¡œëŠ” Host LANê³¼ëŠ” ë¶„ë¦¬ë˜ì–´ ìˆë‹¤. (ë¬¼ë¡  `NAT`ë¥¼ í†µí•´ì„œ ì—°ê²°ë„ ê°€ëŠ¥í•˜ë‹¤.)\n5. ê¸°ë³¸ì ìœ¼ë¡œ Mininetì— ì˜í•´ ìƒì„±ëœ HostëŠ” PIDì™€ file systemì„ ê³µìœ í•œë‹¤. (ë¬¼ë¡  ë°”ê¿€ ìˆ˜ëŠ” ìˆì§€ë§Œ, ìœ ì˜í•˜ì.)\n6. Simulatorê°€ ì•„ë‹ˆê¸° ë•Œë¬¸ì—, Virtual Timeì— ëŒ€í•œ ë§¤ìš° ì •í™•í•œ ì§€í‘œë¥¼ ì œì‹œí•  ìˆ˜ëŠ” ì—†ë‹¤.\n\n> Mininet í™œìš©\n\nMininetì„ ì œëŒ€ë¡œ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‚¬í•­ì„ ìˆ™ì§€í•´ì•¼ í•œë‹¤.\n\n0. ì„¤ì¹˜\n1. Topology ìƒì„±\n2. Performance ì¸¡ì •\n3. OpenFlowë¥¼ ì´ìš©í•´ì„œ Custom Routing\n\nì´ì œë¶€í„° ìœ„ì˜ ë‚´ìš©ì„ í•˜ë‚˜í•˜ë‚˜ ìˆ˜í–‰í•´ ë³¼ ê²ƒì´ë‹¤.\n\n## 0. ì„¤ì¹˜\n\n[Mininet Repo](https://github.com/mininet/mininet)\n\nìœ„ì˜ ë§í¬ì—ì„œ INSTALLì´ë¼ëŠ” íŒŒì¼ì— ë”°ë¼ì„œ ì„¤ì¹˜ë¥¼ ì§„í–‰í•´ë³´ì. ì—­ì‹œ ì œì¼ ì‰¬ìš´ ê²ƒì€ ì œì‘ìê°€ ì§ì ‘ ë§Œë“¤ì–´ë†“ì€ Virtual Machine ì´ë¯¸ì§€ë¥¼ í™œìš©í•˜ì—¬ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ë‹¤.\n\n## 1. Topology ìƒì„±\n\nì•„ë˜ì˜ í˜•íƒœê°€ ê°€ì¥ ê¸°ë³¸ì ì¸ í˜•íƒœì˜ Topologyì´ë‹¤. ì´ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´, ê¸°ë³¸ì ìœ¼ë¡œ ë‘ ê°œì˜ Hostê°€ í•˜ë‚˜ì˜ Switchì— ê° ê° ì—°ê²°ëœ í˜•íƒœë¡œ êµ¬ì„±ë˜ì–´ì§„ë‹¤.\n\n![one-switch-topology](/images/one-switch-topo.jpeg)\n\n```python\nfrom mininet.topo import Topo\n\nclass SingleSwitchTopo(Topo):\n  \"Single switch connected to n Hosts.\"\n  # build function ë‚´ë¶€ì—ì„œ topologyë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†Œì— ëŒ€í•´ ì •ì˜\n  # self.__init__ì˜ parameterê°€ í•´ë‹¹ í•¨ìˆ˜ë¡œ ê·¸ëŒ€ë¡œ ì „ë‹¬ëœë‹¤.\n  def build(self, n=2):\n    # s1ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ Switch ìƒì„±\n    switch = self.addSwitch('s1')\n    for h in range(n):\n      # h1, h2, ... ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ Host ìƒì„±\n      host = self.addHost('h%s' % (h+1))\n      # h1, h2, ... ì„ s1ê³¼ ì—°ê²°\n      self.addLink(host, switch)\n\n# í›„ì— topologyë¥¼ ìƒì„±í•  ë•Œ, ì•„ë˜ ì´ë¦„ì„ í†µí•´ì„œ ì§€ì •ì´ ê°€ëŠ¥\ntopos = { 'singleSwitch': (lambda: SingleSwitchTopo())}\n```\n\nì´ë¥¼ íŒŒì¼ë¡œ ìƒì„±í•˜ê³ , ë‹¤ìŒê³¼ ê°™ì´ ì‹¤í–‰ì‹œí‚¤ë©´ ëœë‹¤.\n\n```bash\n$ sudo mn --custom [fileëª….py] --topo [topology ì´ë¦„],[build function parameters]\n\n# example\n$ sudo mn --custom mytopo.py --topo singleSwitch,3\n```\n\ní•˜ì§€ë§Œ, ìœ„ì™€ ê°™ì´ mininet commandë¥¼ í†µí•´ì„œ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì€ ìë™í™”ì—ëŠ” ì ì ˆí•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.  \në§Œì•½, ë¶€ê°€ì ì¸ ì„¤ì •ì„ í•´ì£¼ê³  ì‹¶ê±°ë‚˜ ì‹¤í–‰ í›„ì— test ë° ì‹¤í—˜í•˜ê³ ì í•˜ëŠ” ìƒí™©ì„ ë§Œë“¤ê³ ì í•œë‹¤ë©´ ì¶”ê°€ì ì¸ programmingì´ í•„ìš”í•˜ë‹¤.  \nì•„ë˜ ì½”ë“œë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì‚´í´ë³´ì.\n\n```python\nfrom mininet.topo import Topo\nfrom mininet.net import Mininet\nfrom mininet.util import dumpNodeConnections\nfrom mininet.log import setLogLevel\n\nclass SingleSwitchTopo(Topo):\n  \"Single switch connected to n Hosts.\"\n  def build(self, n=2):\n    switch = self.addSwitch('s1')\n    for h in range(n):\n      host = self.addHost('h%s' % (h+1))\n      self.addLink(host, switch)\n\ndef simpleTest():\n    \"Create and test a simple network\"\n    topo = SingleSwitchTopo(n=4)\n    # Mininet ìƒì„±\n    # ì´ë•Œ, Topology, Host, Switch, Controller, Link ë“±ì— ëŒ€í•œ Customizingì´ ê°€ëŠ¥í•˜ë‹¤.\n    net = Mininet(topo)\n    # mininet ì‹¤í–‰\n    net.start()\n    print( \"Hostì˜ ì—°ê²° ìƒíƒœë¥¼ ì¶œë ¥\" )\n    dumpNodeConnections(net.hosts)\n    print( \"Netowork ì—°ê²° ìƒíƒœë¥¼ ì²´í¬\" )\n    # ping to every node with each node.\n    net.pingAll()\n    # mininet ì •ì§€\n    net.stop()\n\nif __name__ == '__main__':\n    # Tell mininet to print useful information\n    setLogLevel('info')\n    simpleTest()\n```\n\n```bash\npython [fileëª….py]\n```\n\nì´ë¥¼ í†µí•´ì„œ, Mininetë¥¼ ìš°ë¦¬ê°€ ì •ì˜í•œ Topologyì— ë”°ë¼ì„œ ì‹¤í–‰í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•˜ëŠ” codeì´ë‹¤.  \nì´ëŸ¬í•œ ê¸°ëŠ¥ ë¿ë§Œ ì•„ë‹ˆë¼ hostì˜ ì„±ëŠ¥ì„ ì œí•œí•˜ê±°ë‚˜ Link ìš©ëŸ‰ì„ ì œì–´í•  ìˆ˜ë„ ìˆê³ , Switchë¥¼ ì œì–´í•  ìˆ˜ë„ ìˆê³ , íŠ¹ì • Hostì—ì„œ Commandë¥¼ ì‹¤í–‰ì‹œí‚¤ë„ë¡ í•  ìˆ˜ë„ ìˆë‹¤.  \në” ìì„¸í•œ ì‚¬í•­ì€ ì•„ë˜ ë§í¬ë¥¼ í†µí•´ì„œ í™•ì¸í•´ë³´ì.\n[More Example](https://github.com/mininet/mininet/tree/master/examples)\n\nìœ„ì—ì„œ ì‚´í´ë³¸ ì‚¬í•­ì€ ê°€ì¥ ê¸°ë³¸ì ì¸ Mininetì—ì„œ ì œê³µí•˜ëŠ” Templateì— ê¸°ë°˜í•˜ì—¬ programmingì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. ë§Œì•½, ì§ì ‘ì ìœ¼ë¡œ ì œì–´ë¥¼ ì›í•˜ëŠ” ê²½ìš° ë” í•˜ìœ„ ë‹¨ê³„ì˜ APIë¥¼ í™œìš©í•˜ì—¬ êµ¬í˜„í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. [API Doc](http://api.mininet.org)\n\n### ì¶”ê°€ ì°¸ê³ ì‚¬í•­\n\ncode conventionì´ í›„ì— ë²„ì „ì—ì„œëŠ” ì¢€ ë³€ê²½ë˜ì—ˆë‹¤.\n\n- camelCase í‘œê¸°ê°€ snake_caseí˜•íƒœë¡œ ë³€ê²½ë˜ì—ˆë‹¤. example. `addHost -> add_host`.\n- `build`ê°€ `__init__`ìœ¼ë¡œ ë°”ë€Œì–´, ë‚˜ì˜ ê¸°ì¤€ì—ì„œëŠ” ì´í•´í•˜ê¸° ì‰¬ì›Œì¡Œë‹¤.\n\në³€ê²½ë˜ì—ˆì§€ë§Œ, ì—¬ì „íˆ ê¸°ì¡´ ë²„ì „ í‘œê¸°ë„ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•˜ëŠ”ë°ëŠ” ë¬¸ì œê°€ ì—†ë‹¤.\n\n## 2. Performance ì¸¡ì •\n\ní•´ë‹¹ ì‚¬í•­ì€ Mininetì—ì„œ ê¶Œì¥í•˜ëŠ” ë°©ë²•ì´ë‹¤.\n\n1. Bandwidth - `bwm-ng`, `ethstats`\n2. Latency - `ping`\n3. Queues - `tc`\n4. TCP Congestion Window statistics - `tcp_probe`\n5. CPU usage - for all: `top`, per host: `cpuacct`\n\n## 3. OpenFlowë¥¼ ì´ìš©í•´ì„œ Custom Routing\n\nMininet ìì²´ë§Œìœ¼ë¡œë„ ê°’ì§€ì§€ë§Œ SDNì„ êµ¬ì¶•í•˜ê¸° ìœ„í•œ OpenFlow Protocolì„ ì´ìš©í•œ Routingì„ Emulatingí•  ë•Œì— êµ‰ì¥í•œ íš¨ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.  \nMininetì„ ì‹¤í–‰ì‹œí‚¬ ë•Œì— ì•„ë¬´ ì„¤ì •ì„ í•˜ì§€ ì•Šìœ¼ë©´ ê¸°ë³¸ Ethernet switchë¥¼ ì‚¬ìš©í•˜ëŠ” ê¸°ë³¸ Controllerë¥¼ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ, Open vSwitch(ovs)ì™€ ê°™ì€ OpenFlow Protocolì„ ì§€ì›í•˜ëŠ” Controllerë¥¼ í™œìš©í•  ìˆ˜ë„ ìˆë‹¤.  \nê¸°ë³¸ì ì¸ Switch(ëŒ€ëµ 4096ê°œ)ëŠ” ì´ë¯¸ ì§€ì›ì„ í•˜ê³  ìˆë‹¤. ì´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ì‚¬ìš©í•˜ê±°ë‚˜ ì›í•˜ëŠ” ê²½ìš°ì—ëŠ” pythonì„ í†µí•´ì„œ ì§ì ‘ êµ¬í˜„í•˜ì—¬ë„ ë¬´ë°©í•˜ë‹¤. ì‹¬ì§€ì–´ëŠ” ì›ê²©ì— ìˆëŠ” controllerë¥¼ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.\n\nì´ë ‡ê²Œ Controllerë¥¼ ì •ì˜í•˜ê³ , ì™¸ë¶€ì—ì„œ í•´ë‹¹ Controllerì˜ ë™ì‘ì„ ì •ì˜í•´ì£¼ë©´, Mininetì— ì˜í•´ì„œ ì •ì˜ëœ Networkê°€ ì˜ë„ëŒ€ë¡œ ë™ì‘í•˜ëŠ”ì§€ë¥¼ ê³„ì†í•´ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n## NutShell\n\nMininetì—ì„œ ì–´ë–»ê²Œ ì´ë ‡ê²Œ ë¹ ë¥´ê²Œ ê°€ìƒ Network Systemì„ ê°€ë³ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ”ê°€ì— ëŒ€í•œ ì—´ì‡ ëŠ” `container`ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, ì„œë¡œ ì™„ì „ ë¶„ë¦¬ëœ Hostë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” Containerì´ê¸°ì— ì´ë¥¼ ì‰½ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ Virtual Machineì„ ì§ì ‘ì ìœ¼ë¡œ êµ¬í˜„í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê°€ë³ê³  ë¹ ë¥¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ë˜í•œ, Virtual Link ê°™ì€ ê²½ìš°ì—ëŠ” Linux Traffic Control(`tc`)ë¥¼ í™œìš©í•˜ì—¬, Virtual Ethernetì´ ê° Virtual Switchì™€ Interfaceë“¤ì„ í†µí•´ì„œ ì „ë‹¬ë˜ëŠ” ê²ƒì„ ì œì–´í•  ìˆ˜ ìˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, SwitchëŠ” ê¸°ë³¸ì ì¸ Linux Bridgeë¥¼ í™œìš”í•˜ê±°ë‚˜ Open vSwitchë¥¼ í™œìš©í•˜ì—¬ êµ¬ì„±í•˜ì—¬ ê°€ìƒí™”ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\n## ê²°ë¡ \n\nMininetì€ ê°€ìƒ Networkë¥¼ Emulating í•  ìˆ˜ ìˆëŠ” Toolì´ê¸°ì— ì‹¤ì œë¡œ SDNì„ í…ŒìŠ¤íŠ¸í•˜ê¸° ì´ì „ì— ê°ì¢… ê¸°ëŠ¥ì„ ì²´í¬í•˜ê¸°ì— ìš©ì´í•˜ë‹¤.  \në˜í•œ, Networkì—ì„œ í•µì‹¬ì ì¸ Forwardingì— ê´€í•œ ê¸°ìˆ ì€ ë‹¤ë¥¸ ê¸°ìˆ ì—ê²Œ ë§¡ê²¨ì„œ ë” ì•ˆì •ì ì¸ êµ¬ì¡°ë¥¼ ê°€ì§€ê³  ìˆë‹¤.  \nì´ì— ë”°ë¼ Open vSwitchë¥¼ ì´ìš©í•´ì„œ ììœ ë¡­ê²Œ ì‹œìŠ¤í…œì„ ì œì–´í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ONOSì™€ ê°™ì€ ë„êµ¬ë¥¼ í†µí•´ì„œ Networkë¥¼ êµ¬ì„±í•˜ëŠ” ê³¼ì •ì„ í…ŒìŠ¤íŠ¸í•˜ê¸°ì— êµ‰ì¥íˆ ìœ ìš©í•˜ë‹¤.\n\n## Reference\n\n- Thumbnail : Photo by [Jordan Harrison](https://unsplash.com/@jordanharrison?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/network-cable?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- mininet : <https://github.com/mininet/mininet/wiki/Introduction-to-Mininet>\n","slug":"mininet","date":"2022-05-24 12:58","title":"Mininet","category":"Network","tags":["Emulator","Tool"],"desc":"mininetì€ í˜„ì‹¤ì ì¸ ê°€ìƒ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ êµ¬ì¶•í•´ì£¼ëŠ” Network Emulator, ë” ì •í™•íˆëŠ” NETOWKR Emulation Orchestration Systemì´ë‹¤.  ì´ë¥¼ í†µí•´ì„œ, ê°€ìƒì˜ End Device(Host), ê°ì¢… Switch, Router, ê·¸ë¦¬ê³  ì´ë¥¼ ì—°ê²°í•˜ëŠ” Linkë¥¼ ë‹¨ í•˜ë‚˜ì˜ Linux Kernelë¡œ ë§Œë“¤ ìˆ˜ ìˆë‹¤. ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³ , ê° Hostì— ssh ì ‘ê·¼ì„ ìˆ˜í–‰í•˜ì—¬ ê¸°ë³¸ Linux Kernel ë™ì‘ì„ ìˆ˜í–‰í•˜ê±°ë‚˜ ethernetì„ ì´ìš©í•´ì„œ ê° deviceë¡œ packetì„ ì „ì†¡í•˜ëŠ” ê²ƒê³¼ ê°™ì€ íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. (ì‹¤ì œ speedì™€ delayì— ê¸°ë°˜í•œ ì†ë„ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤.) ë˜í•œ, SDNê³¼ ê°™ì€ í™˜ê²½ì— í•„ìš”í•œ Controller ì—­ì‹œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ê·¸ë ‡ê¸°ì— ì‹¤ì œë¡œ SDN Networkë¥¼ Testí•˜ê³  ì—°êµ¬í•˜ëŠ” ëª©ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/switch-with-cable.jpg"},{"content":"\n## Intro\n\nNetworkëŠ” ì—¬ëŸ¬ê°€ì§€ ì¢…ë¥˜ê°€ ì¡´ì¬í•œë‹¤. ì¼ë°˜ì ì¸ LANì„ ì œì™¸í•œ Networkì˜ ëŒ€í‘œì ì¸ ì¢…ë¥˜(BackBorn, Internet, Datacenter, ë“±)ë¥¼ ì•Œì•„ë³¸ë‹¤.\n\n## BackBorn Network\n\nBackBornì€ ë“±ë¼ˆ, ì¤‘ì¶”ë¥¼ ì˜ë¯¸í•œë‹¤. ì¦‰, ë„¤íŠ¸ì›Œí¬ì˜ ì¤‘ì¶”ë¼ëŠ” ê²ƒì´ë‹¤. í•´ë‹¹ ë„¤íŠ¸ì›Œí¬ëŠ” ê° Nodeì™€ Nodeë¥¼ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°í•˜ê¸° ë³´ë‹¤ëŠ” ì´ë¯¸ êµ¬ì„±ë˜ì–´ìˆëŠ” LAN ê°„ì˜ ì—°ê²°ì„ ìˆ˜í–‰í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ì´ë‹¤. ì‘ì€ ë²”ìœ„ì—ì„œëŠ” íŠ¹ì • ê±´ë¬¼ ë‚´ì—ì„œì˜ LANê°„ì„ ì—°ê²°í•˜ëŠ” Networkë¥¼ ì˜ë¯¸í•˜ê¸°ë„ í•˜ì§€ë§Œ ëŒ€ê²Œì˜ ê²½ìš° LANê³¼ Internetì„ ì—°ê²°í•˜ëŠ” Internet BackBorn Networkë¥¼ ì˜ë¯¸í•œë‹¤. ì´ëŸ¬í•œ BackBorn NetworkëŠ” ì• ì„œ ì‚´í´ë³¸ LANê³¼ì˜ ì—°ê²° ë¿ë§Œ ì•„ë‹ˆë¼ ëŒ€ê²Œ 4ê°€ì§€ì˜ ì—­í• ì„ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤.\n\n1. ì„œë¹„ìŠ¤ ì„œë²„ ë° êµ­ë‚´ ì™¸ íƒ€ ì‚¬ì—…ì ì—°ê²°\n2. ê³ ê°€ìš©ë„ ìŠ¤ìœ„ì¹˜ ë° ë¼ìš°í„°ë¥¼ ì‚¬ìš©í•˜ë©°, ì´ì¤‘í™”ë¥¼ êµ¬ì„±\n3. íƒ€ í†µì‹ ì‚¬ì—…ìì™€ì˜ ì—°ë™ì„ ìœ„í•œ IX(Inter Exchange)ë¥¼ êµ¬ì„±\n4. ë°ì´í„°ì„¼í„°ì™€ ì—°ê²°ë˜ëŠ” Switchë¥¼ ì œê³µ\n\nìš°ë¦¬ê°€ Ethernetì„ í†µí•´ì„œ ê³µìœ ê¸°ì— packetì„ ì „ë‹¬í•˜ë©´, ê³µìœ ê¸°ëŠ” ê±´ë¬¼ ë‚´ Switchë¡œ ì—°ê²°ë˜ê³ , ì´ê²ƒì´ BackBorn Networkë¡œ packetì„ ë³´ë‚´ë©´ BackBornì—ì„œ ì´ë¥¼ ì˜¬ë°”ë¥¸ Networkë¡œ ë‹¤ì‹œ ì˜®ê¸°ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.\n\nëŒ€ê²Œ ì´ì™€ ê°™ì€ ì¼ì€ í†µì‹ ì‚¬ì—…ì(êµ­ë‚´ì—ëŠ” KT, SKT, LG)ê°€ ìˆ˜í–‰í•˜ê³  ìˆë‹¤. ë¬¼ë¡  ì ‘ì†í•˜ê³ ì í•˜ëŠ” ì‚¬ì´íŠ¸ê°€ í•´ì™¸ì— ìœ„ì¹˜í•˜ëŠ” ê²½ìš° í•´ì™¸ í†µì‹ ì‚¬ì—…ìì˜ BackBornìœ¼ë¡œ ë„˜ì–´ê°€ì„œ í•´ë‹¹ Networkë¥¼ ì°¾ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n![backborn network](/images/backborn-network.jpeg)\n\n### Topology in Backborn Network\n\nì´ëŸ¬í•œ BackBorn Networkë¥¼ êµ¬ì„±í•  ë•Œì— ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ê²ƒì€ Star topologyì´ë‹¤. ì´ëŠ” Star topologyëŠ” í•˜ë‚˜ ì´ìƒì˜ ì¤‘ì‹¬ nodeë¡œ trafficì´ ëª°ë¦¬ê²Œ ë˜ëŠ”ë° ì´ëŸ¬í•œ êµ¬ì¡°ëŠ” ê´€ë¦¬ ë° ìš”ê¸ˆ ì¸¡ì • ë“±ê³¼ ê°™ì€ ê³¼ì •ì„ ì‰½ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ, ì¤‘ì‹¬ìœ¼ë¡œ trafficì´ ì§‘ì¤‘ë˜ëŠ” ë§Œí¼ ì¬ë‚œ ë°œìƒì— ì·¨ì•½í•  ìˆ˜ ìˆê³ , ì´ë¡œ ì¸í•œ ì§€ì—°ìœ¼ë¡œ ì¸í•´ ì „ì†¡ íš¨ìœ¨ì´ ê°ì†Œí•  ìˆ˜ë„ ìˆë‹¤.\n\në¯¸êµ­ì˜ í†µì‹ ì‚¬ì—…ì AT&TëŠ” Mesh Topologyë¥¼ í™œìš©í•˜ëŠ”ë° ì´ëŠ” ì¤‘ì•™ì— ëª¨ë“  Trafficì´ ì§‘ì¤‘ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ê°€ìš©ì„±ì´ ë†’ê³ , êµ­ì œì ì¸ Trafficì´ ë§ê³ , ì´ë¡œ ì¸í•œ trafficì´ ë§ê¸°ì— í† ì§€ê°€ í° ë¯¸êµ­ì˜ íŠ¹ì„±ì„ ì´ìš©í•´ ë‹¤ë¥¸ ì§€ì—­ì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ì¥ë¹„ë¥¼ ìš°íšŒí•´ì„œ trafficì„ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. í•˜ì§€ë§Œ, ìœ ì§€ ê´€ë¦¬ ê³¼ì •ì´ ë‹¤ì†Œ ë‚œí•´í•˜ê³  ì´ë¡œ ì¸í•œ ë¹„ìš©ì´ Star Topologyë³´ë‹¤ í¬ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.\n\n## Internet\n\nInternetì€ ì„œë¡œ ë‹¤ë¥¸ Networkë¥¼ ì—°ê²°í•˜ëŠ” ë˜ í•˜ë‚˜ì˜ Networkì´ë‹¤. ëŒ€ê²Œ í•„ì—°ì ìœ¼ë¡œ Internet í†µì‹ ì´ë¼ê³  í•˜ë©´, BackBornì„ ê±°ì³ì„œ í†µì‹ í•˜ëŠ” ê²ƒì„ Internetì´ë¼ê³  í•˜ëŠ” ê²½í–¥ì´ ìˆë‹¤.\n\n### ì´ë™í†µì‹ \n\në¶€ê°€ì ìœ¼ë¡œ ëŒ€ê²Œì˜ í†µì‹  ì‚¬ì—…ìëŠ” êµ­ë‚´ ì§€ì—­ì— ê¸°ì§€êµ­(Base Station, ëŒ€ê²Œ ì „ë´‡ëŒ€ì— ì„¤ì¹˜ëœ ê²½ìš°ê°€ ë§ë‹¤.)ì„ í†µí•´ ì´ë™ í†µì‹  ì¢…ëŸ‰ì œ ë„¤íŠ¸ì›Œí¬ ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤. ì´ ì—­ì‹œ BackBorn Networkì™€ ì—°ê²°ë˜ì–´ ê°ì¢… ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•œë‹¤.\n\n### ì´ì¤‘í™”\n\nBackBorn Networkì˜ ê°€ì¥ ì¤‘ìš”í•œ íŠ¹ì§• ì¤‘ í•˜ë‚˜ê°€ ê³ ê°€ìš©ì„±ì„ ì œê³µí•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, ëŠê¸°ì§€ ì•ŠëŠ” Networkë¥¼ ì§€í–¥í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ ë§ ìì²´ë¥¼ ì´ì¤‘í™”í•˜ê³ , BackBornê³¼ ì—°ê²°ë˜ëŠ” Routerì—ì„œì˜ Link ì‚¬ìš©ë¥ ì„ 40%ë¡œ ì œí•œí•¨ìœ¼ë¡œì¨ ì¼ë¶€ ì¥ì• ì‹œì—ë„ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤. ë˜í•œ Star Topologyì˜ ê²½ìš° Core Routerë¡œ í–¥í•˜ëŠ” Linkë¥¼ ì‚¼ì¤‘í™”í•˜ì—¬ íŠ¹ì • Linkì— ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ë„ ìµœëŒ€í•œ í†µì‹ ì´ ê°€ëŠ¥í•˜ê²Œ í•˜ê³ ì ë…¸ë ¥í•˜ê³  ìˆë‹¤.\n\n## Datacenter Network\n\nDatacenterëŠ” Serviceë¥¼ ì œê³µí•˜ëŠ” ì—…ì²´ë“¤ì—ì„œ ë‹¤ì–‘í•œ Applicationì„ ì œê³µí•˜ê¸° ìœ„í•´ì„œ ì—¬ëŸ¬ machineì„ ëª¨ì•„ë‘ê³  ì €ì¥í•´ë†“ì€ ê¸°ê´€ì´ë‹¤. ì´ëŸ¬í•œ Datacenter Networkì˜ ê·œëª¨ê°€ Backborn Networkì˜ ê·œëª¨ë¥¼ ë„˜ì–´ì„œê³  ìˆëŠ” ì‹œì ì—ì„œ ì¤‘ìš”ì„±ì´ ë” ì»¤ì§€ê³  ìˆë‹¤.\n\n### Term\n\n- Rack : ìˆ˜ ë§ì€ machineì„ íš¨ìœ¨ì ìœ¼ë¡œ ì €ì¥í•˜ê¸° ìœ„í•´ì„œ ì¸µë³„ë¡œ machineì„ ì €ì¥í•˜ì—¬ ë³´ê´€í•˜ëŠ” ìˆ˜ë‚© ê³µê°„ ë˜ëŠ” ìˆ˜ë‚©ëœ ëª¨ë“  machineì„ ì˜ë¯¸í•œë‹¤.\n- ToR Switch : Top of Rack Switchì˜ ì•½ì–´ë¡œ Rackì˜ machineì—ê²Œ Networkë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„œ Rackì˜ ìµœìƒë‹¨ì— ì¡´ì¬í•˜ëŠ” Switchë¥¼ ë§í•œë‹¤.\n\n### Topology in Datacenter Network\n\n- Tree : ë§¤ìš° ì§ê´€ì ì¸ êµ¬ì¡°ì˜ Topologyì´ë‹¤. ê° ToR Switchê°€ ë” ìƒìœ„ Switchì¸ Access(=Edge) Switchì— ì—°ê²°ë˜ê³ , í•´ë‹¹ Access Switchê°€ Aggregation Switch/Routerë¡œ ì—°ê²°ë˜ê³ , ìµœì¢…ì—ëŠ” Core Routerì— ì—°ê²°ë˜ì–´ í•´ë‹¹ Core Routerë¥¼ í†µí•´ì„œ Internetì— ì—°ê²°ë˜ëŠ” í˜•íƒœë¥¼ ê°€ì§€ê³  ìˆë‹¤. ì´ì™€ ê°™ì€ ê²½ìš° 3ê°€ì§€ í° íŠ¹ì§•ì„ ê°€ì§„ë‹¤.\n  - íŠ¹ì§•\n    - Over Subscription : ìƒìœ„ Switch/Router/Linkì˜ bandwidthê°€ í•˜ìœ„ Switch/Routerì˜ bandwidthë³´ë‹¤ í¬ë„ë¡ ì„¤ê³„í•˜ëŠ” ê²ƒ\n    - Same Distance with Core : Coreì™€ì˜ ê±°ë¦¬ê°€ ëª¨ë“  rackì—ì„œ ë™ì¼í•˜ê¸° ë•Œë¬¸ì— íš¨ìœ¨ì ì¸ Networkingì´ ê°€ëŠ¥í•˜ë‹¤. ì´ëŸ¬í•œ Trafficì„ North-South Trafficì´ë¼ê³  í•œë‹¤.\n    - No Loop : Tree êµ¬ì¡° ìì²´ê°€ Loopê°€ ì—†ëŠ” í˜•íƒœì´ê¸° ë•Œë¬¸ì— Loopë¡œ ì¸í•œ Traffic í˜¼ì¡ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. ë§Œì•½, East-West Trafficì„ ìœ„í•´ì„œ linkë¥¼ ì¤‘ê°„ì— ì¦ì„¤í•˜ì˜€ë‹¤ë©´, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•˜ì—¬ Spanning Tree Protocolì„ í™œìš©í•˜ì—¬, Loopë¥¼ ì—†ì• ê¸° ìœ„í•œ ì„¤ì •ì„ í•œë‹¤.\n  - ë‹¨ì \n    - East-West Trafficì˜ ë‚®ì€ íš¨ìœ¨ : ì¢Œìš° Trafficì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•œë‹¤ë©´, ì´ë¡œ ì¸í•œ ë¹„íš¨ìœ¨ì´ í¬ê²Œ ë°œìƒí•  ìˆ˜ ìˆë‹¤. Virtual Machineì´ êµ‰ì¥íˆ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆëŠ” ìƒí™©ì—ì„œ ì–´ëŠ Physical Machineì— Virtual Machineì´ ì¡´ì¬í•˜ë”ë¼ë„ ë™ì¼í•œ IPë¥¼ ìœ ì§€í•œë‹¤ê±°ë‚˜ ë™ì¼í•œ ìˆ˜ì¤€ì˜ ê°€ìƒí™”ë¥¼ ì œê³µí•˜ê¸° ìœ„í•´ì„œ ì´ëŸ¬í•œ East-West Trafficì´ ë§ì•„ì§€ê³  ìˆë‹¤(80% ì´ìƒì„ ì°¨ì§€í•˜ê³  ìˆë‹¤). ë”°ë¼ì„œ, í˜„ì¬ì— ì‚¬ìš©ì´ ë§ì´ ì¤„ì—ˆë‹¤.\n    - í™•ì¥ì´ ì–´ë ¤ì›€ : ìƒìœ„ ê³„ì¸µì´ í•˜ìœ„ ê³„ì¸µì˜ BandWidthì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì— ì´ˆê³¼ëŸ‰ì„ ë„˜ì€ ê²½ìš° í™•ì¥ì´ ëª¨ë“  êµ¬ê°„ì—ì„œ ìˆ˜í–‰ë˜ì–´ì•¼ í•œë‹¤.\n- Spine-Leaf(=Clos, Leaf-Spine) : ìƒìœ„ Spine Switch/Routerì— ëª¨ë“  í•˜ìœ„ Leaf Switch/Routerê°€ ì—°ê²°ë˜ì–´ ìˆê³ , ì´ Leaf Switch/Routerì— ToR Switchê°€ ì—°ê²°ë˜ì–´ ìˆëŠ” êµ¬ì¡°ì´ë‹¤. ì´ëŸ¬í•œ êµ¬ì„±ì„ ê°–ì¶”ê²Œ ë˜ë©´, East-West Trafficì˜ ì²˜ë¦¬ê°€ ë§¤ìš° ìš©ì´í•˜ë‹¤.\n- Fat-tree : Treeì˜ Edge/Aggregation Switch/Routerì˜ ìˆ˜ë¥¼ kê°œë¡œ Groupì„ ë§Œë“¤ê³ , í•´ë‹¹ Groupì„ kê°œ ë§Œë“¤ì–´ì„œ ì—¬ëŸ¬ ê°œì˜ Coreë¥¼ ë‘ì–´ êµ¬ì„±í•˜ëŠ” í˜•íƒœì´ë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ East-West Trafficì˜ ì²˜ë¦¬ ì—­ì‹œ ë§¤ìš° ìš©ì´í•˜ë‹¤.\n\n## Edge Computing Network\n\ní†µì‹  ì‚¬ì—…ì ì…ì¥ì—ì„œ ê°€ì…ìì™€ ì¸ì ‘í•œ ì „í™”êµ­ì— ì„œë²„ pool(ì†Œê·œëª¨ datacenter)ì„ êµ¬ì¶•í•˜ê³ , ì´ë¥¼ í†µí•´ì„œ ë³´ì•ˆ ë˜ëŠ” ìš”ê¸ˆ ì¸¡ì • ë“±ê³¼ ê°™ì€ Network ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê³ ì í•˜ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•˜ê³  ìˆë‹¤.\n\n## Optical Transport Network(ê´‘í†µì‹ ë§)\n\nê´‘ì¼€ì´ë¸”ì„ ì´ìš©í•˜ì—¬ êµ¬ì¶•í•œ Physical Networkë¡œ ê³ ì† í†µì‹ ì„ ì§€ì›í•˜ê¸° ìœ„í•´ì„œ ê³ ì•ˆë˜ì—ˆë‹¤. ì´ëŠ” í›„ì— Postingì—ì„œ ìì„¸íˆ ë‹¤ë£° ì˜ˆì •ì´ë‹¤.\n\n[ğŸ”— ê´‘í†µì‹ ë§](/posts/optical-transport-network)\n\n## Digital Subscriber Line(DSL)\n\nADSLë¶€í„° ì‹œì‘ë˜ì–´ ì—¬ëŸ¬ê°€ì§€ í˜•íƒœë¡œ ë³€í™”ë˜ì–´ì˜¨ Network í˜•íƒœì´ë‹¤. ì¢…ë¥˜ëŠ” ë‹¤ì–‘í•˜ê²Œ ADSL/HDSL/SDSL/RADSL/VDSL ë“±ìœ¼ë¡œ ì¡´ì¬í•œë‹¤.\n\nADSLì€ Asymmetric Digital Subscriber Lineì˜ ì•½ìë¡œ ì „í™”ì„ ì„ ì´ìš©í•œ í†µì‹  ë°©ì‹ì´ë‹¤. 1988ë…„ ë¯¸êµ­ì—ì„œ ìµœì´ˆ ê°œë°œë˜ì—ˆê³ , í˜„ì¬ì—ë„ ì €ê°€í˜• ì¸í„°ë„· ì„œë¹„ìŠ¤ì— ì‚¬ìš© ì¤‘ì´ë‹¤. ë˜í•œ, VDSLì€ ì£¼íŒŒìˆ˜ ëŒ€ì—­ì„ í™•ì¥í•˜ì—¬ ì†ë„ í–¥ìƒì„ ê¾€í•˜ì˜€ë‹¤.\n\n## Reference\n\n- Thumbnail: Photo by [Markus Spiske](https://unsplash.com/@markusspiske?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/internet?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n\nì¸í„°ë„·ì´ ì²˜ìŒ ì„¸ìƒì— ë“±ì¥í•œ ì´ë˜ë¡œ ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ê°€ ë§Œë“¤ì–´ì¡Œë‹¤. ì‘ê²ŒëŠ” ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” Wifië¥¼ êµ¬ì„±í•˜ëŠ” LAN ì˜ì—­ì—ì„œ ë¶€í„° ì „ì²´ ì„¸ìƒì„ ì—°ê²°í•˜ëŠ” Internetì™€ ê°™ì€ ê´‘ë²”ìœ„í•œ ë„¤íŠ¸ì›Œí¬ê°€ ì¡´ì¬í•œë‹¤.\n","slug":"types-of-network","date":"2022-05-27 09:59","title":"Networkì˜ ì¢…ë¥˜","category":"Network","tags":["BackbornNetwork","Internet","DatacenterNetwork","EdgecomputingNetwork","AccessNetwork"],"desc":"NetworkëŠ” ì—¬ëŸ¬ê°€ì§€ ì¢…ë¥˜ê°€ ì¡´ì¬í•œë‹¤. ì¼ë°˜ì ì¸ LANì„ ì œì™¸í•œ Networkì˜ ëŒ€í‘œì ì¸ ì¢…ë¥˜(BackBorn, Internet, Datacenter, ë“±)ë¥¼ ì•Œì•„ë³¸ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/base-station.jpg"},{"content":"\n## Intro\n\nSDNì˜ ë³¸ê²©ì ì¸ ì‹œì‘ì´ OpenFlowë¼ê³  ë³´ì•„ë„ ë¬´ë°©í•˜ë‹¤. OpenFlowëŠ” 2007ë…„ Stanford ëŒ€í•™ì—ì„œ ê°œë°œì´ ì‹œì‘ë˜ì—ˆê³ , ì§€ê¸ˆë„ de facto standard(ì‚¬ì‹¤ìƒì˜ í‘œì¤€)ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì§€ê³  ìˆëŠ” Protocolì´ë‹¤. í•´ë‹¹ Protocolì˜ í•µì‹¬ì€ ê¸°ì¡´ Switch/Routerë¥¼ data plane(ë°ì´í„° í‰ë©´)ê³¼ control plane(ì œì–´ í‰ë©´)ìœ¼ë¡œ ë‚˜ëˆ„ê³ , ì œì–´ í‰ë©´ì„ OpenFlow Protocolì— ë”°ë¥´ëŠ” Controlerë¡œ ëŒ€ì²´í•˜ë©´ì„œ, OpenFlow Protocolì„ ë”°ë¥´ëŠ” SwitchëŠ” data planeë§Œì„ í¬í•¨í•˜ì—¬, ë‘˜ ê°„ì˜ í†µì‹ ì„ í†µí•´ì„œ ì œì–´ í‰ë©´ì„ êµ¬ì„±í•˜ìëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ë°ì´í„° í‰ë©´ì€ ì‹¤ì œë¡œ interfaceë¡œ packetì´ ë“¤ì–´ì˜¤ê³ , ë‚´ë³´ë‚´ëŠ” ì—­í• ì„ í•˜ëŠ” ê³„ì¸µì´ë¼ê³  ë³´ë©´ ë˜ê³ , ì œì–´ í‰ë©´ì€ packetì— ì–´ë–¤ ë™ì‘ì„ ìˆ˜í–‰ì‹œí‚¬ì§€ ê·¸ë¦¬ê³  ì–´ëŠ interfaceë¡œ ë‚´ë³´ë‚¼ì§€ë¥¼ ê²°ì •í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ê³„ì¸µì´ë¼ê³  ë³´ë©´ ëœë‹¤. ì´ëŸ¬í•œ êµ¬ì„±ì„ í†µí•´ì„œ, ê²°êµ­ SDNì„ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” í† ëŒ€ë¥¼ ì œê³µí•˜ê²Œ ëœ ê²ƒì´ë‹¤.\n\n## OpenFlow Switch\n\nOpenFlow SwitchëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ êµ¬ì„±ë˜ì–´ì§„ë‹¤.\n\n![OpenFlow Switch](/images/openflow-switch.jpeg)\n\n## OpenFlow Protocol\n\ní•´ë‹¹ ì‚¬í•­ì€ referenceì— ê¸°ë°˜í•œ version 1.3.1ì˜ ê¸°ëŠ¥ì„ ìš”ì•½í•œ ë‚´ìš©ì´ë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ OpenFlow Protocolì„ ì§€ì›í•˜ëŠ” Switchì˜ êµ¬ì¡°ë¶€í„° ì•Œì•„ë³´ì•„ì•¼ í•œë‹¤. SwitchëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì™¸ë¶€ì™€ ì—°ê²°ì´ ê°€ëŠ¥í•œ Port, Routingì„ ìœ„í•œ ì—¬ëŸ¬ ê°œì˜ Table, ê·¸ë¦¬ê³  Controllerì™€ì˜ ì˜ì‚¬ì†Œí†µì„ ìœ„í•œ Channelì„ ê°€ì§„ë‹¤. ê° ìš”ì†Œì˜ ì—­í• ì„ ê°„ëµíˆ í•˜ë‚˜í•˜ë‚˜ ì•Œì•„ë³´ë„ë¡ í•˜ì.\n\n> **1. Port**\n\nOpenFlowì—ì„œ packetì´ Switchë¡œ ì™”ë‹¤ê°”ë‹¤í•˜ëŠ” í†µë¡œë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ëŒ€ê²Œ Switchë¥¼ ê°€ë¥´í‚¤ê±°ë‚˜ packetì˜ ì§„ì… ìœ„ì¹˜ë¥¼ ì‹ë³„í•  ë•Œ ì‚¬ìš©ëœë‹¤. ì´ëŠ” ì‹¤ì œë¡œ ì¡´ì¬í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì¶”ìƒí™”ëœ ê°œë…ìœ¼ë¡œ, ì´ 3ê°€ì§€ì˜ Portë¥¼ í†µí•´ì„œ Switchë¥¼ ê°€ë¥´í‚¬ ìˆ˜ ìˆë‹¤. ê° SwitchëŠ” ì—¬ëŸ¬ ê°œì˜ Portë¥¼ ê°€ì§€ê³  ì´ë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ Switchë“¤ê³¼ë„ ì—°ê²°ë˜ì–´ì§„ë‹¤.\n\n- Physical Port : ì‹¤ì œ Switchì˜ interfaceì™€ ì¼ëŒ€ì¼ë¡œ ëŒ€ì‘ë˜ëŠ” ê°€ìƒ Portì´ë‹¤. ì¦‰, í•´ë‹¹ interfaceë¡œ packetì´ ë“¤ì–´ì™”ë‹¤ë©´, OpenFlowì—ì„œëŠ” ì´ì™€ ëŒ€ì‘ë˜ëŠ” portë¡œ packetì´ ë“¤ì–´ì™”ë‹¤ê³  íŒë‹¨í•œë‹¤.\n- Logical Port : OpenFlowë¥¼ ì“°ì§€ ì•Šê³ , Switch ìì²´ì ìœ¼ë¡œ ì •ì˜í•œ Tunnelê³¼ Loopbackê³¼ ê°™ì€ ê°€ìƒ Portì´ë‹¤.\n- Reserved Port : OpenFlow Protocolì— ì˜í•´ì„œ ì •ì˜ëœ Portì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Controller, All, Tableì˜ ë§¨ ì²˜ìŒ, IN_PORT ë“±ì„ ì‰½ê²Œ ê°€ë¥´í‚¬ ìˆ˜ ìˆë‹¤.\n\n> **2. Table**\n\nSwitchëŠ” ì—¬ëŸ¬ ê°œì˜ Tableì„ ê°€ì§€ê³  ìˆë‹¤. Tableì„ í†µí•´ì„œ SwitchëŠ” Routingì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ê¸°ë³¸ì ì¸ Switchì˜ ë™ì‘ê³¼ ë™ì¼í•˜ë‹¤. Switchì˜ íŠ¹ì • Portë¡œ packetì´ ë“¤ì–´ì™”ì„ ë•Œ, packetì˜ ëª©ì ì§€ì™€ ì§„ì…í•œ Port, ê·¸ ì™¸ì— metadataì— ê¸°ë°˜í•˜ì—¬ matchingì„ ìˆ˜í–‰í•˜ì—¬ ì¼ì¹˜í•˜ëŠ” ëŒ€ìƒì„ ì°¾ì•„ì„œ, í•´ë‹¹ Tableì— ê¸°ìˆ ëœ ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤. ëŒ€ê²Œ ë¬´ìŠ¨ ë™ì‘ì„ ìˆ˜í–‰í•  ê²ƒì¸ê°€ì— ë”°ë¼ì„œ ì¢…ë¥˜ê°€ ë‚˜ë‰˜ì–´ì§€ë©°, v1.3.1ì—ëŠ” ì´ 3ê°€ì§€ì˜ ì¢…ë¥˜ê°€ ì¡´ì¬í•œë‹¤.\n\n1. Flow Table : ëŒ€ê²Œ ì–´ë–»ê²Œ Packetì„ ì–´ëŠ Portë¡œ Routingí•  ê²ƒì¸ê°€ë¥¼ ë‹¤ë£¬ë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ Packetì˜ Headerë¥¼ ë³€ê²½í•˜ê±°ë‚˜ MPLS Labelê³¼ ê°™ì€ ì¶”ê°€ ì •ë³´ë¥¼ ë”í•˜ëŠ” ë“±ì˜ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. (ê° SwitchëŠ” í•˜ë‚˜ ì´ìƒì˜ Flow Tableì„ ì†Œìœ í•œë‹¤.)\n2. Group Table : íŒ¨í„´ê³¼ ì¼ì¹˜í•˜ëŠ” packetì— ëŒ€í•´ì„œ ì—¬ëŸ¬ ë™ì‘ì„ ìˆ˜í–‰í•˜ê²Œ í•˜ê±°ë‚˜ ìƒí™©ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ì ìš©í•˜ë„ë¡ í•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. (ê° SwitchëŠ” 1ê°œ ì´í•˜ì˜ Group Tableì„ ì†Œìœ í•œë‹¤.)\n3. Meter Table : packetì˜ ë¹ˆë„(rate) ì¡°ì ˆê³¼ ì¸¡ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. (Meter Tableì€ Controllerì— ì˜í•´ì„œ ê´€ë¦¬ëœë‹¤.)\n\n> **3. OpenFlow Channel**\n\nOpenFlow Switch ë‚´ë¶€ì—ì„œ Controllerë¥¼ ì—°ê²°í•˜ëŠ” Interfaceë¡œ Switchì˜ ìƒíƒœë¥¼ Controllerì—ê²Œ ì•Œë¦¬ê±°ë‚˜ Controllerë¡œ ë¶€í„° ë³€ê²½ì‚¬í•­ì„ ì „ë‹¬ ë°›ê¸° ìœ„í•œ í†µì‹  ì±„ë„ì´ë‹¤.\n\n---\n\nì´ë ‡ê²Œ ì´ë£¨ì–´ì§„ OpenFlow Switchë“¤ì€ ì„œë¡œ ì—°ê²°ë˜ì–´ ìˆìœ¼ë©°, í•˜ë‚˜ ë˜ëŠ” ì—¬ëŸ¬ Controllerì™€ ê° ê° ì—°ê²°ë˜ì–´ ìˆë‹¤. ControllerëŠ” ê° OpenFlow Switchë¡œ ë¶€í„° ìƒíƒœ ì •ë³´ì™€ ì¸ì ‘ Switch ì •ë³´ ë“±ì„ ì „ë‹¬ë°›ì•„ì„œ ë‚´ë¶€ì ìœ¼ë¡œ Flow Tableì„ êµ¬ì¶•í•œë‹¤. ê·¸ë¦¬ê³ , Controllerì—ì„œ ì¤‘ì•™ í†µì œë¥¼ í†µí•´ì„œ ì „ì²´ ë„¤íŠ¸ì›Œí¬ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ìˆ˜í–‰í•  ë•Œì—ëŠ” Controllerì—ì„œ ê° Switchì˜ Tableì„ ì§€ì •í•¨ìœ¼ë¡œì¨ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. ê·¸ë ‡ë‹¤ë©´, Switchì— Tableì„ ì„¤ì¹˜í•˜ì˜€ì„ ë•Œ, ì–´ë–»ê²Œ Packetì„ ì²˜ë¦¬í•˜ëŠ”ì§€ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.\n\n### Pipeline\n\nSwitch ë‚´ë¶€ì—ëŠ” ì—¬ëŸ¬ ê°œì˜ Tableì´ ì¡´ì¬í•˜ëŠ”ë°, Packetì´ Switchì˜ íŠ¹ì • Portë¡œ ë“¤ì–´ì˜¤ë©´, ë¨¼ì € Flow Tableì„ ê±°ì¹˜ê²Œ ëœë‹¤. Switch ë‚´ë¶€ì˜ ì—¬ëŸ¬ Flow Table ì¤‘ì—ì„œ index($\\ge 0$)ê°€ ì‘ì€ ê°’ë¶€í„° ì‹œì‘í•˜ì—¬ Flow Tableì—ì„œ ì¼ì¹˜í•˜ëŠ” patternì˜ Flow Entryë¥¼ ì°¾ê²Œ ëœë‹¤(Flow Tableì˜ í•˜ë‚˜ì˜ ì—´). í•´ë‹¹ Entryì— ì íŒ `Instruction`ì— ë”°ë¼ `Action`ì„ ë°”ë¡œ ìˆ˜í–‰í•˜ê±°ë‚˜ `Action Set`ì— ì¶”ê°€í•œ í›„ì— ë‹¤ìŒ Table ë˜ëŠ” Portë¥¼ í†µí•´ì„œ ë‹¤ìŒ Switchë¡œ ì´ë™í•˜ê²Œ ëœë‹¤. ì´ë•Œ Port ë°–ìœ¼ë¡œ ë‚˜ê°€ê¸° ì´ì „ì— Action Setì— ëª¨ì•„ë‘” Actionì„ í•œ ë²ˆì— ìˆ˜í–‰í•œë‹¤.  \në§Œì•½, Flow Tableì˜ ì–´ë–¤ patternê³¼ë„ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ì´ë¥¼ `Table Miss`ë¼ê³  í•˜ê³ , ë¯¸ë¦¬ ì§€ì •í•´ë‘” miss flow entryì— ë”°ë¼ Actionì„ ìˆ˜í–‰í•œë‹¤. ì•„ë¬´ ì„¤ì •ë„ í•˜ì§€ ì•Šì•˜ë‹¤ë©´ defaultë¡œ í•´ë‹¹ packetì„ dropí•œë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, ê° Tableì„ êµ¬ì„±í•˜ëŠ” ìš”ì†Œ(entry)ë“¤ì´ ì–´ë–»ê²Œ êµ¬ì„±ë˜ëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ì.\n\n> **1. Flow Entry**\n\n- Match Field : ì¼ì¹˜í•˜ëŠ” Packetì„ ì°¾ê¸° ìœ„í•˜ì—¬ Ingress Port / Egress Port / Packet Header / ë‹¤ë¥¸ Tableì—ì„œ ìƒì„±ëœ  Metadata ë“±ì„ ì‚¬ìš©í•œë‹¤.\n- Priority : ì¼ì¹˜í•˜ëŠ” ëŒ€ìƒì´ ë§ì„ ê²½ìš°, ë†’ì„ ìˆ˜ë¡ ì¡°íšŒ ì‹œì— ìš°ì„ ì‹œ ë˜ì–´ì§„ë‹¤.\n- Counters : matchê°€ ìˆ˜í–‰ëœ íšŸìˆ˜ë¥¼ ë§ˆí‚¹í•œë‹¤.\n- Instructions : packetì— ëŒ€í•´ì„œ íŠ¹ì • Actionì„ ìˆ˜í–‰ì‹œí‚¤ê±°ë‚˜ Action Setì„ ë³€ê²½í•œë‹¤.\n- Timeout : ìµœëŒ€ ì²˜ë¦¬ ì‹œê°„ ë˜ëŠ” ë‚¨ì€ ì‹œê°„ ë“±ì„ í‘œì‹œí•œë‹¤.\n- Cookie : Controllerì— ì˜í•´ ì„¤ì •ëœ ë°ì´í„°ë¡œ ëŒ€ê²Œ í•´ì‰¬ / ì•”í˜¸í™” ë˜ì–´ì§„ë‹¤. ì´ëŠ” Controllerì—ì„œ Flow ê´€ì¸¡ ë° ì¡°ì ˆ ì‹œì— ì‚¬ìš©í•œë‹¤.\n\n> **2. Group Entry**\n\n- Group Identifier : Group ì‹ë³„ì\n- Action Buckets : ì—¬ëŸ¬ ê°œì˜ actionê³¼ ì´ì— í•´ë‹¹í•˜ëŠ” parameterë¥¼ ë‹´ì€ bucketë“¤ì„ ì •ë ¬ í›„ ë³´ê´€\n- Group Type : Groupì˜ ë™ì¥ ë°©ì‹ì„ ì„ íƒ\n  - all :  ëª¨ë“  bucketì„ ì‹¤í–‰\n  - select : bucketì„ ë²ˆê°ˆì•„ê°€ë©´ì„œ ì‹¤í–‰í•˜ì—¬ Load Balancingì„ ì‹¤í–‰\n  - indirect : bucket í•˜ë‚˜ë§Œ ì‹¤í–‰í•˜ë©°, bucketì„ ì—¬ëŸ¬ ê°œ ë‘ëŠ” ê²ƒì„ í—ˆë½í•˜ì§€ ì•ŠëŠ”ë‹¤.\n  - fast failover : ê°€ì¥ ë¨¼ì € ì¼œì ¸ìˆë‹¤ê³  íŒë‹¨ë˜ëŠ” portë¥¼ ê°€ì§„ bucket í•˜ë‚˜ë§Œ ì‹¤í–‰\n- Counters : Groupì— ì˜í•´ ì²˜ë¦¬ëœ packetì˜ ìˆ˜\n\n> **3. Meter Entry**\n\n- Meter Identifier : Meter ì‹ë³„ì\n- Meter Bands : packet rateì™€ ì´ì— ë”°ë¥¸ packet ì²˜ë¦¬ ë°©ë²•ì„ ê°€ì§„ ì—¬ëŸ¬ meter bandë¥¼ ìˆœì„œì—†ì´ ì €ì¥. bandë¥¼ ì„ íƒí•  ë•Œì—ëŠ” ì¸¡ì •ëœ rateë³´ë‹¤ ì‘ìœ¼ë©´ì„œ ê°€ì¥ í° rateë¥¼ ê°€ì§„ bandë¥¼ ì„ íƒí•œë‹¤. ê° bandëŠ” ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±ëœë‹¤.\n  - Band Type : rateë¥¼ ë„˜ê¸´ í›„ì˜ packet ì²˜ë¦¬ ë°©ì‹ì„ ì„ íƒ\n    - drop : packetì„ ë²„ë¦°ë‹¤.\n    - dscp remark : IP headerì— drop ìš°ì„ ìˆœìœ„ë¥¼ ë†’ì¸ë‹¤.\n  - Rate : packet rateì˜ í•˜í•œì„ \n  - Couter : ì²˜ë¦¬ëœ packetì˜ ìˆ˜\n  - Type Specific Arguments : ë¶€ê°€ ì •ë³´\n- Counters : Meterì— ì˜í•´ ì²˜ë¦¬ëœ packetì˜ ìˆ˜\n\n---\n\në§ˆì§€ë§‰ìœ¼ë¡œ, Instructionê³¼ Action ê·¸ë¦¬ê³  Action Setì˜ êµ¬ì„±ì„ ì‚´í´ë³´ì.\n\n> **1. Instruction**\n\nInstructionì€ ë‹¤ìŒê³¼ ê°™ì€ ì¢…ë¥˜ê°€ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ëª…ë ¹ì„ ì ìš©í•˜ê±°ë‚˜ Tableì„ ì´ë™í•˜ê³ , ActionSetì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n1. `meter meter_id` : packetì— íŠ¹ì • meterë¥¼ ì ìš©\n2. `apply-actions action(s)` : packetì— í•´ë‹¹ action(s)ë¥¼ ì¦‰ê°ì ìœ¼ë¡œ ìˆ˜í–‰\n3. `clear-actions` : `Action set`ì„ ë°”ë¡œ ë¹„ìš°ê¸°\n4. `write-actions action(s)` : Action Setì— í•´ë‹¹ action(s)ë¥¼ ì¶”ê°€\n5. `write-metadata metadata/mask` : metadataë¥¼ ì¶”ê°€\n6. `goto-table next-table-id` : íŠ¹ì • tableë¡œ ì´ë™. ë‹¨, ë°˜ë“œì‹œ í˜„ì¬ Table indexë³´ë‹¤ ë” í° indexë¡œ ì´ë™í•´ì•¼ í•œë‹¤.\n\n> **2. Action Set**\n\npipelineì´ ì¢…ë£Œ ëœ í›„ì— ì‹¤í–‰ë˜ëŠ” actionì´ ì €ì¥ë˜ì–´ ìˆë‹¤.\n\nactionì€ ê¸°ë³¸ì ìœ¼ë¡œ ì•„ë˜ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ë˜ì§€ë§Œ, ë™ì¼í•œ actionì€ ë“¤ì–´ì˜¨ëŒ€ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì„ì˜ë¡œ ì‹¤í–‰ëœë‹¤.\n\n1. `copy TTL inwards` : TTLì„ ì²´í¬í•˜ëŠ” actionì„ ì‹¤í–‰\n2. `pop` : ë§Œì•½, packetì— tagê°€ ì¡´ì¬í•œë‹¤ë©´, ëª¨ë‘ ì œê±°í•œ\n3. `push MPLS` : MPLS tag(=label)ì„ ì¶”ê°€\n4. `push PBB` : PBB tagë¥¼ ì¶”ê°€\n5. `push VLAN` : VLAN tagë¥¼ ì¶”ê°€\n6. `copy TTL outwards` : TTLì„ ì²´í¬í•˜ëŠ” actionì„ ì‹¤í–‰\n7. `decrement TTL` : TTLì„ ê°ì†Œì‹œí‚¤ëŠ” actionì„ ì‹¤í–‰\n8. `set` : `set-field`ì— í•´ë‹¹í•˜ëŠ” actionì„ ì‹¤í–‰\n9. `qos` : `qos` ê´€ë ¨ actionì„ ì‹¤í–‰\n10. `group` : ì—°ê´€ëœ group bucketì˜ actionì„ ì‹¤í–‰\n11. `output` : `output` actionìœ¼ë¡œ ëª…ì‹œëœ portë¡œ packetì„ forwarding\n\n> **3. Action**\n\nì‹¤ì œë¡œ packetì„ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ë°©ë²•ì´ë‹¤.\n\n1. `output` : OpenFlow port ì¤‘ ì–´ë””ë¡œ forwardingí• ì§€ë¥¼ ì§€ì •\n2. `set-queue` : QoS ì§€ì›ì„ ìœ„í•´ packetì„ ë‚´ë³´ë‚¼ Switchì˜ queue Idë¥¼ ì§€ì •\n3. `drop` : ì§ì ‘ í˜¸ì¶œí•  ìˆ˜ëŠ” ì—†ì§€ë§Œ, outputì´ ì—†ê±°ë‚˜ `clean-actions` ìˆ˜í–‰ ì‹œì— ë‚´ë¶€ì ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.\n4. `group` : groupì„ í†µí•´ packetì„ ì²˜ë¦¬í•˜ë„ë¡ group tableë¡œ packet ì „ë‹¬\n5. `push-tag` : MPLS / VLAN ë“±ì˜ tagë¥¼ ì¶”ê°€\n6. `pop-tag` : MPLS / VLAN ë“±ì˜ tagë¥¼ ì‚­ì œ\n7. `set-field` : headerì˜ ê°€ì¥ ëì— íŠ¹ì • ê°’ì„ ì¶”ê°€\n8. `change-ttl` : ttlê°’ì„ ìˆ˜ì •\n\n## í‘œì¤€í™” í˜„í™©\n\n| version | ë°œí‘œì¼  | ì£¼ìš” ê¸°ëŠ¥ ì¶”ê°€                                  | ê¸°ê´€                |\n| :------ | :------ | :---------------------------------------------- | :------------------ |\n| OF 1.0  | 2009.12 | MAC, IPv4, Single Table                         | OpenFlow Consortium |\n| OF 1.1  | 2011.2  | MPLS/tunnel, Pipeline(Multi Table), Group Table | OpenFlow Consortium |\n| OF 1.2  | 2011.12 | IPv6, Of-Config, ë‹¤ì¤‘ Controller ì§€ì›           | ONF                 |\n| OF 1.3  | 2012.9  | Meter Table(QoS), Controller ë³„Event Filtering  | ONF                 |\n| OF 1.4  | 2013.10 | Optical port monitoring, Flow ì‚­ì œ ì›ì¸         | ONF                 |\n| OF 1.5  | 2014.12 | Egress Table ì¶”ê°€                               | ONF                 |\n\ní˜„ì¬ì—ëŠ” OpenFlow í‘œì¤€í™”ëŠ” ì¤‘ë‹¨ëœ ìƒíƒœì´ë‹¤. ëª¨ë“  ìš”êµ¬ì‚¬í•­ì„ ë°›ì•„ë“¤ì´ë‹¤ë³´ë‹ˆ match fieldì˜ í¬ê¸°ê°€ ë„ˆë¬´ë‚˜ ì»¤ì¡Œê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì´ìš©ìì˜ ìš”êµ¬ì— ë”°ë¼ì„œ programming í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•˜ê¸° ìœ„í•œ P4(Programmable Protocol-Independent Packet Protocol)ì„ ì œì‘í•˜ì˜€ë‹¤.\n\nì¦‰, ê¸°ì¡´ì—ëŠ” Protocolê³¼ ì´ë¥¼ ì§€ì›í•˜ëŠ” Switchë¥¼ ì£¼ìš” ì„œë¹„ìŠ¤ë¡œ ì‚¼ì•˜ë‹¤ë©´, ì´ì œëŠ” Programmingì´ ê°€ëŠ¥í•œ ì–¸ì–´ì™€ ì´ë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” Switchë¥¼ ì œê³µí•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ì „í™˜í•˜ì˜€ë‹¤.\n\n## Reference\n\n- [Openflow specification](https://opennetworking.org/wp-content/uploads/2013/04/openflow-spec-v1.3.1.pdf), ONF, 2012\n- Thumbnail: Photo by [Maksym Tymchyk ğŸ‡ºğŸ‡¦](https://unsplash.com/@maksym_tymchyk?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/flow?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"openflow","date":"2022-05-25 22:23","title":"OpenFlow","category":"Network","tags":["SDN","ONF"],"desc":"SDNì˜ ë³¸ê²©ì ì¸ ì‹œì‘ì´ OpenFlowë¼ê³  ë³´ì•„ë„ ë¬´ë°©í•˜ë‹¤. OpenFlowëŠ” 2007ë…„ Stanford ëŒ€í•™ì—ì„œ ê°œë°œì´ ì‹œì‘ë˜ì—ˆê³ , ì§€ê¸ˆë„ de facto standard(ì‚¬ì‹¤ìƒì˜ í‘œì¤€)ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì§€ê³  ìˆëŠ” Protocolì´ë‹¤. í•´ë‹¹ Protocolì˜ í•µì‹¬ì€ ê¸°ì¡´ Switch/Routerë¥¼ data plane(ë°ì´í„° í‰ë©´)ê³¼ control plane(ì œì–´ í‰ë©´)ìœ¼ë¡œ ë‚˜ëˆ„ê³ , ì œì–´ í‰ë©´ì„ OpenFlow Protocolì— ë”°ë¥´ëŠ” Controlerë¡œ ëŒ€ì²´í•˜ë©´ì„œ, OpenFlow Protocolì„ ë”°ë¥´ëŠ” SwitchëŠ” data planeë§Œì„ í¬í•¨í•˜ì—¬, ë‘˜ ê°„ì˜ í†µì‹ ì„ í†µí•´ì„œ ì œì–´ í‰ë©´ì„ êµ¬ì„±í•˜ìëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ë°ì´í„° í‰ë©´ì€ ì‹¤ì œë¡œ interfaceë¡œ packetì´ ë“¤ì–´ì˜¤ê³ , ë‚´ë³´ë‚´ëŠ” ì—­í• ì„ í•˜ëŠ” ê³„ì¸µì´ë¼ê³  ë³´ë©´ ë˜ê³ , ì œì–´ í‰ë©´ì€ packetì— ì–´ë–¤ ë™ì‘ì„ ìˆ˜í–‰ì‹œí‚¬ì§€ ê·¸ë¦¬ê³  ì–´ëŠ interfaceë¡œ ë‚´ë³´ë‚¼ì§€ë¥¼ ê²°ì •í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ê³„ì¸µì´ë¼ê³  ë³´ë©´ ëœë‹¤. ì´ëŸ¬í•œ êµ¬ì„±ì„ í†µí•´ì„œ, ê²°êµ­ SDNì„ êµ¬ì¶•í•  ìˆ˜ ìˆëŠ” í† ëŒ€ë¥¼ ì œê³µí•˜ê²Œ ëœ ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/flow.jpg"},{"content":"\n## Intro\n\nOverlay Networkë€ ê¸°ì¡´ì˜ Network ìœ„ì— ë§Œë“¤ì–´ì§„ ê°€ìƒì˜ Networkë¥¼ ì˜ë¯¸í•œë‹¤. ê·¸ë ‡ê¸°ì— ë¬¼ë¦¬ì ì¸ ê´‘í†µì‹  ë„¤íŠ¸ì›Œí¬ì— êµ¬ì„±ëœ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ë¥¼ Overlay Networkë¼ê³  ë³¼ ìˆ˜ë„ ìˆì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œëŠ” Public Internet ìœ„ì— êµ¬ì„±ëœ ê°€ìƒì˜ Networkë¼ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©ëœë‹¤.\n\nëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ P2P, VPNì„ ë“¤ ìˆ˜ ìˆë‹¤. ê·¸ ì™¸ì—ë„ VLAN, MPLS ë“±ë„ ë“¤ ìˆ˜ ìˆì§€ë§Œ Application ê³„ì¸µì—ì„œ êµ¬í˜„í•œ P2Pì™€ VPNì„ í•´ë‹¹ Postingì—ì„œ ì¤‘ì ì ìœ¼ë¡œ ë‹¤ë£° ê²ƒì´ë‹¤. Overlay NetworkëŠ” ìƒìœ„ì— ê³„ì¸µì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì— í•˜ìœ„ ê³„ì¸µì—ì„œëŠ” í•´ë‹¹ dataë¥¼ ë¶„ì„í•˜ëŠ” ê²ƒì€ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë ‡ê²Œ ë°ì´í„°ì˜ í¬ê¸°ê°€ ë” ì»¤ì§€ê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ì˜ ê³¼ë¶€í•˜ë¥¼ ì´ˆë˜í•˜ê¸°ë„ í•œë‹¤. í•˜ì§€ë§Œ, ì´ëŸ¬í•œ ê¸°ìˆ ì€ êµ¬í˜„ì´ í•˜ë“œì›¨ì–´ë‹¨ì—ì„œ ì§„í–‰í•˜ëŠ” ê²ƒë³´ë‹¤ ê°„ëµí•  ë¿ë§Œ ì•„ë‹ˆë¼ ìœ ì—°í•œ êµ¬ì„±ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ í™œìš©ë˜ê³  ìˆë‹¤. ì´ë¡œì¸í•´ì„œ ì´ëŸ¬í•œ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ì—…ì²´ë¥¼ `Free Rider`ë¼ê³  ë¶€ë¥´ê¸°ë„ í•œë‹¤. í†µì‹  ì‚¬ì—…ì ì…ì¥ì—ì„œëŠ” traffic ì¦ê°€ë¡œ ìš´ì˜ ë¹„ìš©ì´ ì¦ê°€í•˜ëŠ”ë° ë¹„í•´ ì´ì— ëŒ€í•œ ì´ë“ì€ ì„œë¹„ìŠ¤ ì œê³µì—…ì²´ì—ì„œë§Œ ê°€ì ¸ê°€ëŠ” í˜„ìƒë•Œë¬¸ì´ë‹¤.\n\n## P2P\n\nPeer To Peerì˜ ì•½ìë¡œ ì—¬ëŸ¬ client ê°„ì˜ í†µì‹ ì„ ìˆ˜í–‰í•  ë•Œ, ê°€ì¥ ê¸°ë³¸ì ì¸ ëª¨ë¸ë¡œ ëª¨ë“  Clientê°€ ì„œë¡œ ë™ë“±í•˜ê²Œ ì—°ê²°ë˜ëŠ” Networkì´ë‹¤. ì´ëŠ” `Client-Server` êµ¬ì¡°ì™€ëŠ” ë°˜ëŒ€ë˜ëŠ” ê°œë…ìœ¼ë¡œ, í•˜ë‚˜ì˜ Serverë¡œ ëª¨ë“  Clientê°€ ì—°ê²°ë˜ì–´ ì´ë¥¼ í†µí•´ì„œ ì„œë¡œ ì •ë³´ë¥¼ ì£¼ê³  ë°›ëŠ” êµ¬ì¡°ì™€ëŠ” í˜•íƒœê°€ ë§¤ìš° ë‹¤ë¥´ë‹¤. íŠ¹íˆ íŒŒì¼ ê³µìœ , í†µì‹ , VoIP, Instance Message, CDNê³¼ ê°™ì€ ë¶„ì•¼ì—ì„œ ë§ì´ ì‚¬ìš©ëœë‹¤. ì´ëŠ” P2Pì˜ ë‹¤ìŒê³¼ ê°™ì€ **ì¥ì ** ë•ë¶„ì´ë‹¤.\n\n1. Scalability : `Client-Server` êµ¬ì¡°ì—ì„œëŠ” Clientì˜ ì¦ê°€ëŠ” ê³§ Serverì˜ ë¶€í•˜ ì¦ê°€ë¥¼ ì˜ë¯¸í•œë‹¤. í•˜ì§€ë§Œ, P2Pì—ì„œëŠ” ë…¸ë“œ ìˆ˜ì˜ ì¦ê°€ëŠ” ì „ì²´ Networkì˜ í¬ê¸° ì¦ê°€ë¥¼ ì˜ë¯¸í•˜ì§€ë§Œ, ê° Nodeì—ê²Œ ë¶€ê³¼ë˜ëŠ” ë¶€í•˜ì˜ ì¦ê°€ë¥¼ ì•¼ê¸°í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n2. Low Cost : Service ì œê³µì ì…ì¥ì—ì„œëŠ” ê°’ë¹„ì‹¼ Serverë¥¼ ìœ ì§€í•˜ì§€ ì•Šì•„ë„ ë˜ê¸° ë•Œë¬¸ì— ì´ë¡œ ì¸í•œ ë¹„ìš©ì  ì´ë“ì„ ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, í†µì‹  ì‚¬ì—…ì ì…ì¥ì—ì„œëŠ” ì´ê²ƒì´ ë” ì‹ ê²½ì“°ì´ëŠ” ë¶€ë¶„ì´ë‹¤.\n3. Availability : ì¼ë¶€ ë…¸ë“œì— ì¥ì• ê°€ ë°œìƒí•´ë„ ì „ì²´ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì€ ì ë‹¤.\n\ní•˜ì§€ë§Œ, P2PëŠ” ì—¬ëŸ¬ ì¸í„°ë„· ë¬¸ì œë¥¼ ì•¼ê¸°í•  ìˆ˜ë„ ìˆë‹¤. ëŒ€í‘œì ìœ¼ë¡œ ì œê¸°ë˜ëŠ” ê²ƒì´ ë‹¤ìŒê³¼ ê°™ì€ ë¬¸ì œì´ë‹¤.\n\n1. ê³¼ë„í•œ ì¸í„°ë„· ëŒ€ì—­í­ ì†Œëª¨  \n   P2Pì— ì°¸ì—¬í•˜ëŠ” NodeëŠ” Bandwidthì˜ ëŒ€ë¶€ë¶„ì„ P2Pì— ì‚¬ìš©í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ P2P ì „ì†¡ì˜ íš¨ìœ¨ì„ ìµœëŒ€í™”í•˜ê³ ì í•œ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì´ë¡œ ì¸í•´ ì—¬íƒ€ ë‹¤ë¥¸ Network ì¥ë¹„ë“¤ì˜ ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆë‹¤.\n2. í†µì œê°€ ì–´ë ¤ì›€  \n   P2Pë¥¼ í†µí•´ì„œ ê³µìœ ë˜ëŠ” ìë£Œê°€ ë¶€ì •ì ì¸ ì»¨í…ì¸ (ìŒë€ë¬¼, ë¶ˆë²• ì €ì‘ë¬¼ ìœ í†µ)ë¥¼ í¬í•¨í•˜ë”ë¼ë„ ì´ë¥¼ í†µì œí•  ìˆ˜ë‹¨ì´ ì—†ì„ ë¿ë§Œ ì•„ë‹ˆë¼ ê³¼ë„í•œ Trafficì— ëŒ€í•œ ì°¨ë‹¨ì„ ìˆ˜í–‰í•˜ë ¤ê³  í•´ë„ P2P portë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ë°”ê¾¸ê±°ë‚˜ VPN ë“±ì„ í™œìš©í•˜ë©° ì´ëŸ¬í•œ ì°¨ë‹¨ë§ˆì €ë„ ìš°íšŒí•˜ê³ ìˆë‹¤.\n3. ë‚®ì€ ë³´ì•ˆì„±  \n   P2P softwareëŠ” ê° clientì—ì„œ ë™ì‘í•˜ë©°, ê° ClientëŠ” Hostì˜ ê¸°ëŠ¥ë„ ìˆ˜í–‰í•´ì•¼ í•˜ëŠ”ë° ì´ì— ëŒ€í•œ ì±…ìŒì€ ì›ë˜ Service ì œê³µìì—ì„œ Clientë¡œ ì „ê³¼ë˜ì—ˆìœ¼ë©°, ì´ëŠ” Clientì—ì„œ ì§ì ‘ì ìœ¼ë¡œ ë°©ì–´í•´ì•¼ í•œë‹¤. ê·¸ë ‡ê¸°ì— ë³´ì•ˆì„±ì´ ë‚®ê³  ì•…ì„±ì½”ë“œì— ë¬´ë°©ë¹„í•˜ë‹¤.\n\n2000ë…„ëŒ€ ì¤‘ë°˜ê¹Œì§€ë§Œ í•´ë„ ì´ëŸ¬í•œ P2P Trafficì´ ì „ì²´ ì¸í„°ë„·ì˜ 60~80%ë¥¼ ì°¨ì§€í•˜ì—¬ í° ë¬¸ì œê°€ ë˜ì—ˆì§€ë§Œ, í˜„ì¬ì—ëŠ” 2.4%ë¡œ ê°ì†Œí•˜ì˜€ë‹¤. ì´ëŠ” Streaming Platformì˜ ì„±ì¥ì´ ì»¸ë‹¤ê³  ë³´ê³  ìˆë‹¤. ë‹¤ìŒì€ ëŒ€í‘œì ì¸ P2P Serviceì— ëŒ€í•œ ì˜ˆì‹œì´ë‹¤.\n\n> **Napster**\n\nìµœì´ˆì˜ P2P serviceë¡œ ìœ ëª…í•˜ë©°, ë¬´ë£Œ ìŒì› MP3 íŒŒì¼ì„ ê³µìœ í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ì˜€ë‹¤. `Login Server`ë§Œì„ ìœ ì§€í•˜ê³ , ì´ê³³ì—ì„œ ê° nodeì˜ MP3 file ì •ë³´ì™€ user ì •ë³´ë¥¼ mappingí•˜ì—¬ ê´€ë¦¬í•˜ê³  ì´ë“¤ì„ í†µí•´ì„œ ì¡°íšŒë¥¼ ìˆ˜í–‰í•˜ë©´ DownloadëŠ” P2Pì— ì˜í•´ì„œ ìˆ˜í–‰ë˜ëŠ” ì›ë¦¬ì´ë‹¤. ê·¸ëŸ°ë° ì´ ë‹¨ê³„ì—ì„œ ë¬¸ì œê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë°”ë¡œ Client ê°„ì˜ P2Pë¥¼ ìˆ˜í–‰í•  ë•Œì— NATë¡œ ì¸í•´ì„œ ì‹¤ì œ Clientì˜ ì£¼ì†Œë¥¼ ì•Œì•„ë‚´ëŠ” ê²ƒì´ ì–´ë ¤ìš¸ ë¿ë§Œ ì•„ë‹ˆë¼ ë°©í™”ë²½ì— ì˜í•´ì„œ ë§‰í ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ `STUN`ì´ë¼ëŠ” ê°œë…ì„ í™œìš©í•œë‹¤. ì—¬ê¸°ì„œëŠ” ìì„¸íˆ ë‹¤ë£¨ì§€ ì•Šì§€ë§Œ NATì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§„ Public Addressì™€ Private Addressë¥¼ ì €ì¥í•˜ì—¬ ì´ë¥¼ ì €ì¥í•˜ê³  ìˆë‹¤ê°€ NAT ë‚´ë¶€ì— Nodeë¥¼ ì‹ë³„í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ê¸°ìˆ ë¡œ ë³„ë„ì˜ Serverë¥¼ êµ¬ì„±í•˜ì—¬ í•´ë‹¹ ì¥ì†Œì— ì €ì¥í•´ë‘ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. ë˜í•œ, fileì„ ê°–ê³  ìˆëŠ” Nodeì—ì„œ ë°©í™”ë²½ì´ ì¡´ì¬í•œë‹¤ë©´, ì´ë¥¼ ìš°íšŒí•˜ê¸° ìœ„í•´ì„œ  ì™¸ë¶€ Serverê°€ fileì„ ë³´ìœ í•œ Nodeì—ì„œ ì˜¤íˆë ¤ ìš”ì²­ì„ ë³´ë‚´ê³  íŒŒì¼ì„ ì „ì†¡í•˜ëŠ” ê²ƒì²˜ëŸ¼ ìš°íšŒë¥¼ ìˆ˜í–‰í•˜ê¸°ë„ í•œë‹¤.\n\n> **Torrent**\n\nBitTorrentì™€ uTorrentì— ëŒ€í•´ì„œë§Œ ì•Œì•„ë³¼ ê²ƒì´ë‹¤. BitTorrentëŠ” ê°€ì¥ ì´ˆê¸° ë²„ì „ìœ¼ë¡œ OpenSourceë¡œ ê³µê°œë˜ì—ˆê³ , version 6ì¸ uTorrentë¶€í„°ëŠ” ë¹„ê³µê°œë¡œ ê°œë°œë˜ì—ˆë‹¤. 32, 64, 128, 256 KB ë‹¨ìœ„ë¡œ fileì„ ë‚˜ëˆ„ê³  ì¡°ê° ë‹¨ìœ„ë¡œ ì „ì†¡í•˜ëŠ” ë°©ì‹ì´ë‹¤. Torrent Networkë¥¼ êµ¬ì„±í•˜ëŠ” ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- Web Server : TorrentëŠ” ë³„ë„ì˜ File ê³µìœ  Web Serviceë¥¼ ì œê³µí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì‚¬ìš©ìë“¤ì€ ìì‹ ì´ íŒŒì¼ì„ ê°€ì§€ê³  ìˆìŒì„ `X.torrent` ë¼ëŠ” fileì— ë‹´ì•„ì„œ Web Serviceì— ì—…ë¡œë“œí•´ì•¼ í•œë‹¤. ì´ë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì—¬ Torrent Applicationì„ ì‹¤í–‰ì‹œí‚¤ë©´ file downloadê°€ ì§„í–‰ë˜ëŠ” ê²ƒì´ë‹¤.\n- Tracker : Torrentì—ì„œ ì œê³µí•˜ëŠ” Serverì´ë‹¤. P2Pì—ì„œ ê° peerë“¤ì˜ ìƒíƒœì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ê³ , ì´ë¥¼ í†µí•´ì„œ í†µì‹ ì„ ì¤‘ê³„í•œë‹¤.\n- Seed : ì™„ì „í•œ íŒŒì¼ì„ ê°€ì§€ê³  ìˆëŠ” Peer\n- Leech : í•´ë‹¹ íŒŒì¼ì„ ì¼ë¶€ ê°€ì§€ê³  ìˆëŠ” Peer\n- Downloader : Leechì™€ ê°™ì€ ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ê¸°ë„ í•˜ë©°, ë‹¤ìš´ë¡œë“œê°€ ì™„ë£Œë˜ë©´ Leech ë˜ëŠ” Seedê°€ ëœë‹¤.\n\nDownloaderê°€ Downloadë¥¼ `X.torrent` fileì„ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•˜ê¸°ë¥¼ Trackerì—ê²Œ ìš”ì²­í•˜ë©´, TrackerëŠ” í•´ë‹¹ íŒŒì¼ì„ ì†Œìœ í•œ Peer Listë¥¼ ë°˜í™˜í•˜ê³  ì´ë¥¼ í†µí•´ì„œ ê° Peerë¡œ ë¶€í„° íŒŒì¼ ì¡°ê°ì„ ë‹¤ìš´ ë°›ì•„ ê²°í•©í•˜ì—¬ ìµœì¢… fileì„ ì™„ì„±í•œë‹¤ëŠ” ì›ë¦¬ì— ê¸°ë°˜í•˜ê³  ìˆë‹¤. uTorrentëŠ” ê¸°ì¡´ TCPì—ì„œ UDPë¡œì˜ ë³€ê²½ ë¿ë§Œ ì•„ë‹ˆë¼ STUN ê¸°ëŠ¥ ë“±ì„ í¬í•¨í•˜ì—¬ ì„±ëŠ¥ì„ í–¥ìƒì‹œì¼œ ì¶œì‹œë˜ì—ˆë‹¤.\n\n> **Skype**\n\nVoIPë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ íŒŒì¼ ì „ì†¡ ë“±ì„ ì œê³µí•˜ëŠ” P2P ì„œë¹„ìŠ¤ì´ë‹¤. 2003ë…„ì— ì²˜ìŒ ì‹œì‘ë˜ì–´ í˜„ì¬ëŠ” MicroSoftì— ì¸ìˆ˜ë˜ì—ˆê³ , 2012ë…„ ì´í›„ë¡œëŠ” `Client-Server` êµ¬ì¡°ë¡œ ì „í™˜í•˜ì˜€ë‹¤. ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- Login Server : íšŒì›ê°€ì… ë° ì‚¬ìš©ì ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” Serverë¡œ Skypeì— ì˜í•´ì„œ ê´€ë¦¬ëœë‹¤.\n- SN(Super Node) : ì‹¤ì œ Skype Clientê°€ ì—°ê²°ë˜ëŠ” Nodeë¡œ ì´ë“¤ì€ ê°ì ì—°ê²°ë˜ì–´ ê° Clientì—ê²Œ í†µì‹ ì„ ì œê³µí•œë‹¤. ì´ˆê¸°ì—ëŠ” í•­ìƒ ì¼œì ¸ ìˆê³ , ê³µì¸ IP ì£¼ì†Œë¥¼ ê°€ì§€ê³  ìˆëŠ” ê³ ì„±ëŠ¥ ê³ ëŒ€ì—­ ì¥ë¹„ì´ë©´ ì–´ë–¤ Skype Clientë„ Super Nodeê°€ ë  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ, 2012ë…„ ëŒ€ê·œëª¨ ì¥ì• ê°€ ë°œìƒí•œ ì´í›„ MicroSoftì—ì„œ ìš´ìš©í•˜ëŠ” Machine(Azure)ìœ¼ë¡œ ëŒ€ì²´ë˜ì—ˆë‹¤.\n- SC(Skype Client) : ì¼ë°˜ Skepe ì´ìš©ìë¥¼ ì˜ë¯¸í•œë‹¤.\n\nSkypeì˜ Codeê°€ ê³µê°œë˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ìì„¸íˆ ì•Œ ìˆ˜ ì—†ì§€ë§Œ ë‹¤ìŒê³¼ ê°™ì´ ì¶”ì¸¡ì€ ê°€ëŠ¥í•˜ë‹¤. Login Serverë¥¼ ê±°ì³ì„œ Loginì„ ìˆ˜í–‰í•˜ë©°, ì´ ê³¼ì •ì—ì„œ ì ì ˆí•œ Super Nodeë¥¼ í†µí•´ì„œ ë¨¼ì € ì—°ê²° ìƒíƒœ ì²´í¬ ë“±ì„ ìˆ˜í–‰í•œë‹¤. ì´ì œ ì‚¬ìš©ìê°€ í†µí™”ë¥¼ ì‹œì‘í•œë‹¤ë©´, í•´ë‹¹ Super Nodeë¥¼ ê¸°ë°˜ìœ¼ë¡œ UDP ìŒì„± packetì´ ì˜¤ê³  ê°ˆ ê²ƒì´ë‹¤.\n\n### STUN\n\nSession Traversal Utilities for NAT ì˜ ì•½ì–´ë¡œ UDP hole punchingì´ë¼ê³ ë„ ë¶€ë¥¸ë‹¤. Network Address Translationìœ¼ë¡œ ë²ˆì—­ë˜ëŠ” ë‚´ë¶€ë§ì˜ nodeì˜ Private Addressë¥¼ Public Addressì™€ Mappingí•˜ì—¬ ê´€ë¦¬í•œë‹¤. ì›ë˜ëŠ” NAT ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” Nodeë¥¼ ì‹ë³„í•  ìˆ˜ ì—†ì§€ë§Œ, ì´ë¥¼ í†µí•´ì„œ NAT ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” ëŒ€ìƒì—ê²Œ Requestë¥¼ ë³´ë‚´ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§€ëŠ” ê²ƒì´ë‹¤. ì´ì™€ ìœ ì‚¬í•œ ê°œë…ìœ¼ë¡œ TURNì´ ì¡´ì¬í•˜ëŠ”ë° ì´ëŠ” ì§ì ‘ì ìœ¼ë¡œ Trafficì„ ì „ë‹¬ë°›ì•„ì„œ ì¤‘ê³„ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì„ ë§¡ëŠ”ë‹¤.\n\n## VPN\n\nVirtual Private Networkì˜ ì•½ì–´ë¡œ 90ë…„ëŒ€ ë§ì— ê¸°ì—…ì˜ ì‚¬ì„¤ë§ êµ¬ì¶• ì‹œì— ì‚¬ìš©ë˜ë˜ ê¸°ìˆ ì´ ê³µìš©í™”ëœ ê²ƒì´ë‹¤. ì´ëŠ” OSI 7ê³„ì¸µì—ì„œ 2 ê³„ì¸µ ì´ìƒì—ì„œ ì ìš©ì´ ê°€ëŠ¥í•˜ë©°, ì–´ëŠ ê³„ì¸µì—ì„œ ìˆ˜í–‰í•˜ëƒì— ë”°ë¼ ëª©ì ì´ ì¡°ê¸ˆì”© ë‹¤ë¥´ì§€ë§Œ, packetì„ Encapsulationí•˜ì—¬ ë„ì²­, ê°ì²­, íƒˆì·¨ ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ë„ë¡ ë§‰ëŠ” ê²ƒì´ ì£¼ ëª©ì ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ ê°œì¸ì •ë³´ë¥¼ ì•”í˜¸í™”í•˜ê³ , ì¸í„°ë„·ì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. í†µì‹  ì‚¬ì—…ìì— ì˜í•´ì„œ êµ¬ì„±ëœ VPNì´ ì•„ë‹Œ ê²½ìš° ëŒ€ì—­í­ì´ ë³´ì¥ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. IPSecì—ì„œ ë¶€í„° ì‹œì‘í•˜ì—¬, SSLê³¼ ê°™ì€ ê¸°ìˆ ì´ ì´ì— í¬í•¨ë˜ê³ , ìš°ë¦¬ê°€ ì¼ë°˜ì ìœ¼ë¡œ ìƒê°í•˜ëŠ” VPNì€ ì‘ìš© ê³„ì¸µì—ì„œì˜ í™œìš©ì´ë‹¤. ì´ ê²½ìš°ì—ëŠ” Proxy Serverë¥¼ ë¨¼ì € ê±°ì³ì„œ Traffic ìì²´ë¥¼ ìš°íšŒì‹œí‚¤ëŠ” ë°©ì‹ì´ë‹¤.\n\n## Reference\n\n- Thumbnail : Photo by [Mark McGregor](https://unsplash.com/@mmcgregor?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/peer?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"overlay-network","date":"2022-05-30 09:23","title":"Overlay Network","category":"Network","tags":["P2P","VPN"],"desc":"Overlay Networkë€ ê¸°ì¡´ì˜ Network ìœ„ì— ë§Œë“¤ì–´ì§„ ê°€ìƒì˜ Networkë¥¼ ì˜ë¯¸í•œë‹¤. ê·¸ë ‡ê¸°ì— ë¬¼ë¦¬ì ì¸ ê´‘í†µì‹  ë„¤íŠ¸ì›Œí¬ì— êµ¬ì„±ëœ ëª¨ë“  ë„¤íŠ¸ì›Œí¬ë¥¼ Overlay Networkë¼ê³  ë³¼ ìˆ˜ë„ ìˆì§€ë§Œ, ì¼ë°˜ì ìœ¼ë¡œëŠ” Public Internet ìœ„ì— êµ¬ì„±ëœ ê°€ìƒì˜ Networkë¼ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©ëœë‹¤.ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ P2P, VPNì„ ë“¤ ìˆ˜ ìˆë‹¤. ê·¸ ì™¸ì—ë„ VLAN, MPLS ë“±ë„ ë“¤ ìˆ˜ ìˆì§€ë§Œ Application ê³„ì¸µì—ì„œ êµ¬í˜„í•œ P2Pì™€ VPNì„ í•´ë‹¹ Postingì—ì„œ ì¤‘ì ì ìœ¼ë¡œ ë‹¤ë£° ê²ƒì´ë‹¤. Overlay NetworkëŠ” ìƒìœ„ì— ê³„ì¸µì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì— í•˜ìœ„ ê³„ì¸µì—ì„œëŠ” í•´ë‹¹ dataë¥¼ ë¶„ì„í•˜ëŠ” ê²ƒì€ ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì´ë ‡ê²Œ ë°ì´í„°ì˜ í¬ê¸°ê°€ ë” ì»¤ì§€ê¸° ë•Œë¬¸ì— ë„¤íŠ¸ì›Œí¬ì˜ ê³¼ë¶€í•˜ë¥¼ ì´ˆë˜í•˜ê¸°ë„ í•œë‹¤. í•˜ì§€ë§Œ, ì´ëŸ¬í•œ ê¸°ìˆ ì€ êµ¬í˜„ì´ í•˜ë“œì›¨ì–´ë‹¨ì—ì„œ ì§„í–‰í•˜ëŠ” ê²ƒë³´ë‹¤ ê°„ëµí•  ë¿ë§Œ ì•„ë‹ˆë¼ ìœ ì—°í•œ êµ¬ì„±ì´ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ í™œìš©ë˜ê³  ìˆë‹¤. ì´ë¡œì¸í•´ì„œ ì´ëŸ¬í•œ ì„œë¹„ìŠ¤ë¥¼ êµ¬í˜„í•˜ëŠ” ì—…ì²´ë¥¼ Free Riderë¼ê³  ë¶€ë¥´ê¸°ë„ í•œë‹¤. í†µì‹  ì‚¬ì—…ì ì…ì¥ì—ì„œëŠ” traffic ì¦ê°€ë¡œ ìš´ì˜ ë¹„ìš©ì´ ì¦ê°€í•˜ëŠ”ë° ë¹„í•´ ì´ì— ëŒ€í•œ ì´ë“ì€ ì„œë¹„ìŠ¤ ì œê³µì—…ì²´ì—ì„œë§Œ ê°€ì ¸ê°€ëŠ” í˜„ìƒë•Œë¬¸ì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/climb-the-rock.jpg"},{"content":"\n## Intro\n\nP4ëŠ” Programmable Switch, ì¦‰ Hardwareì— ë¬¶ì—¬ìˆëŠ” Softwareë¥¼ í†µí•´ DataPlaneì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í•„ìš”ì— ë”°ë¼ Switchì˜ DataPlaneì„ ì§ì ‘ Programmingí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ìƒˆë¡œìš´ ë°©ë²•ë¡ ì„ ì œì‹œí•œë‹¤.\n\n## History\n\nì˜ˆì „ Postingì—ì„œ [ğŸ”— OpenFlow](/posts/openflow)ì™€ [ğŸ”— SDN](/posts/sdn)ì— ëŒ€í•´ì„œ ë‹¤ë£¬ ì ì´ ìˆë‹¤. ì´ë•Œ, P4ì— ëŒ€í•´ì„œ ê°„ëµíˆ ì•Œì•„ë³´ê³  ì§€ë‚˜ê°”ì—ˆëŠ”ë°, í•´ë‹¹ Postingì—ì„œëŠ” ì´ë¥¼ ìì„¸íˆ ë‹¤ë£° ê²ƒì´ë‹¤. ë§Œì•½, ì´ì— ëŒ€í•œ ê°œë…ì´ ì¡í˜€ìˆì§€ ì•Šë‹¤ë©´, í•´ë‹¹ Postingì„ ì´í•´í•˜ê¸° ì–´ë µë‹¤. ë”°ë¼ì„œ, SDNê³¼ OpenFlow ê´€ë ¨ Postingì„ ë¨¼ì € ì½ê³  ë‹¤ì‹œ ëŒì•„ì˜¤ê¸°ë¥¼ ë°”ë€ë‹¤.\n\në¨¼ì €, P4ì˜ ì´ˆê¸° ì‹œì‘ì€ OpenFlowì˜ ì„±ì¥ê³¼ ì—°ê´€ì´ ìˆë‹¤. OpenFlowëŠ” ê¸°ì¡´ì˜ Switchë¥¼ Data Planeê³¼ Control Planeìœ¼ë¡œ ë‚˜ëˆ„ì–´ Control Planeì„ ì™¸ë¶€ Server(Controller)ë¡œ ì˜®ê¸°ê³  ì´ë“¤ì€ OpenFlow Protocolì„ í†µí•´ì„œ Switchì˜ Data Palenì„ ì œì–´í•˜ê³ ì í–ˆë‹¤. OpenFlowì˜ ì‚¬ìš©ì´ ê°€ì†í™”ë˜ë©´ì„œ ê³„ì†í•´ì„œ ìƒˆë¡œìš´ versionì´ updateë˜ì—ˆê³ , 1.0ì—ì„œ 1.5ê¹Œì§€ ë„ë‹¬í•˜ê²Œ ë˜ì—ˆë‹¤. ê·¸ëŸ°ë°, ì—¬ëŸ¬ Usecaseì™€ Protocolì„ ì§€ì›í•˜ê¸° ìœ„í•´ì„œ ì ì  ë¹„ëŒ€í•´ì§€ëŠ” Headerë¥¼ ë§ˆì£¼ì¹˜ê²Œ ëœë‹¤. ì´ëŠ” í†µì‹  ì†ë„ì˜ ì €í•˜ë¥¼ ì•¼ê¸°í•  ë¿ë§Œ ì•„ë‹ˆë¼ ê¸°ì¡´ì˜ ìœ ì—°í•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ê³ ìí•œ OpenFlowì˜ íƒ„ìƒ ë°°ê²½ê³¼ë„ ê±°ë¦¬ê°€ ìˆê²Œ ëœë‹¤. ë”°ë¼ì„œ, Data Planeì„ í•„ìš”ì— ë”°ë¼ Protocol, Header, Algorithmì„ í¬í•¨í•˜ì—¬ Programmingìœ¼ë¡œ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©í•˜ë©´ ì¢‹ì§€ ì•Šì„ê¹Œë¼ëŠ” ë°œìƒì—ì„œ ì‹œì‘ëœ ê²ƒì´ P4ì´ë‹¤. ê·¸ë ‡ê¸°ì— P4ì˜ full nameì´ **Programming Protocol-independent Packet processors**ì¸ ê²ƒì´ë‹¤.\n\nì´ë ‡ê²Œ ì‹œì‘ëœ ProjectëŠ” ì ì  ë¹„ëŒ€í•´ì§€ë©°, ì›ë˜ëŠ” Programmable Switchë¥¼ ìœ„í•œ ì–¸ì–´ë¥¼ ëª©ì ìœ¼ë¡œ í–ˆë‹¤ë©´ í˜„ì¬ì—ëŠ” ì—¬ëŸ¬ ëª©ì ì˜ ì¥ë¹„(target)ì„ ì§€ì›í•˜ëŠ” ì–¸ì–´ë¡œ í™•ì¥ë˜ì—ˆë‹¤. ë”°ë¼ì„œ, P4ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ ì •ì˜í•˜ë¼ê³  í•˜ë©´, **Programmable Targetì˜ Data Planeì„ Programmingí•˜ëŠ” ì–¸ì–´**ë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n\n## ë™ì‘ì›ë¦¬\n\nP4ë¥¼ í†µí•œ Programmingì„ í†µí•´ì„œ ìš°ë¦¬ê°€ ìµœì¢…ì ìœ¼ë¡œ ë§Œë“œëŠ” ê²ƒì€ ë‘ ê°€ì§€ì´ë‹¤. ì²«ë²ˆì§¸ë¡œ, `DataPlane runtime`ì€ Tableê³¼ Action ê·¸ë¦¬ê³  ì ì ˆí•œ Alogrithmì„ í†µí•´ ì‹¤ì œë¡œ Packetì„ ì²˜ë¦¬ ë° Forwardingí•  Softwareë¥¼ ì œì‘í•˜ê³ , Control Planeì—ì„œ Data Planeì„ ì œì–´ ë° ì„¤ì •ì„ í•˜ê¸° ìœ„í•œ APIë¥¼ ì œì‘í•œë‹¤.\n\n![p4-overview](/images/p4-overview.jpeg)\n\nì´ë¥¼ ìœ„í•´ì„œ Targetì„ ì œì‘í•˜ëŠ” VenderëŠ” ë‹¤ìŒê³¼ ê°™ì€ 3ê°€ì§€ë¥¼ ì œì‘í•œë‹¤.\n\n1. P4 Architecture : í•´ë‹¹ Targetì—ì„œ ì‘ë™ì´ ê°€ëŠ¥í•œ Interfaceì™€ extern objectë¥¼ ì •ì˜í•´ë†“ì€ ëª…ì„¸ì„œì´ë‹¤. í›„ì— P4 programmerëŠ” ì´ë¥¼ ì°¸ê³ í•˜ì—¬ í•´ë‹¹ Interfaceì— í•´ë‹¹í•˜ëŠ” Packageë¥¼ ì‘ì„±í•˜ë©´ ëœë‹¤.\n2. P4 Compiler : Programmerê°€ ì‘ì„±í•œ Codeë¥¼ Compileí•˜ì—¬ APIì™€ DataPlane Runtimeì„ ìƒì„±í•œë‹¤.\n3. Target(Hardware) : ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ” Hardwareì´ë‹¤.\n\nì´ì œ P4 ê°œë°œì(Programmer)ëŠ” P4 Architectureë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ ì›í•˜ëŠ” ë™ì‘ì„ êµ¬í˜„í•œë‹¤. ì´ë¥¼ Compilerë¥¼ í†µí•´ì„œ ì‹¤í–‰ì‹œì¼œ ì •ìƒë™ì‘ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ìµœì¢…ì ìœ¼ë¡œ ë™ì‘í•˜ëŠ” P4 Targetì„ ì™„ì„±í•  ìˆ˜ ìˆë‹¤.\n\nì´ë ‡ê²Œ ë³´ì•˜ë“¯ì´ P4 Programming ê³¼ì •ì€ Target ë””ìì´ë„ˆ(Vender)ì— ì˜í•´ì„œ ë§Œë“¤ì–´ì§„ ê°ì²´ ì§€í–¥ Architectureì— ê¸°ë°˜í•˜ì—¬ Implementationì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤. ì•„ë§ˆ ê°ì²´ ì§€í–¥ì— ìµìˆ™í•˜ë‹¤ë©´ êµ‰ì¥íˆ ì¹œìˆ™í•œ ê°œë…ì¼ ê²ƒì´ë‹¤.\n\n## êµ¬ì„±ìš”ì†Œ\n\nP4 programmingì„ í†µí•´ì„œ ì‹¤ì œë¡œ ì‘ì„±í•˜ê±°ë‚˜ ì‚¬ìš©í•˜ëŠ” êµ¬ì„±ìš”ì†Œë“¤ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n\n- **Architecture** : P4ë¥¼ ì§€ì›í•˜ëŠ” ì§€ì›í•˜ëŠ” Switchì˜ êµ¬ì„±ìš”ì†Œë“¤ì˜ interface(ê°ì²´ì§€í–¥ì—ì„œì˜ interface)ë¥¼ ì‘ì„±í•œ ëª…ì„¸ì„œë¡œ ì´ëŠ” Programmerê°€ ì•„ë‹Œ í•´ë‹¹ Targetì„ ì œì‘í•œ Venderê°€ ì‘ì„±í•œë‹¤. ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ P4 ProgrammerëŠ” Implementationì„ ìˆ˜í–‰í•œë‹¤.\n- **Header Type** : í•´ë‹¹ Data Planeì—ì„œ ì‚¬ìš©í•  ê°ê°ì˜ Packetì˜ Headerì˜ í˜•íƒœë¥¼ ì˜ë¯¸í•œë‹¤. ì¦‰, Packetì˜ Header ë¶€ë¶„ì„ ì •ì˜í•œ ê²ƒì´ë‹¤.\n- **Parser** : ì—°ì†ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” Packetì—ì„œ Headerë¥¼ ì‹ë³„í•˜ê³  ì¶”ì¶œí•˜ëŠ” ì—­í• ì„ í•œë‹¤.\n- **Table** : Programmerì— ì˜í•´ì„œ ì •ì˜ëœ keyì™€ ì´ì— ëŒ€ì‘í•˜ëŠ” Actionì´ ì €ì¥ëœë‹¤. ì´ë¥¼ í†µí•´ì„œ, Routing Table, Flow Lookup Table, ACL ë“±ê³¼ ê°™ì€ ì¼ë°˜ Switchì˜ Tableë„ êµ¬ì„±ì´ ê°€ëŠ¥í•˜ë©°, ë” ë³µì¡í•œ í˜•íƒœì˜ ìƒˆë¡œìš´ Tableì„ êµ¬ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n- **Action** : Headerì™€ Metadataì— íŠ¹ì •í•œ ì¡°ì‘ì„ ê°€í•  ìˆ˜ ìˆë‹¤.\n- **Match-action unit** : ì‹¤ì œë¡œ Tableì„ ì¡°íšŒí•˜ì—¬, Actionì„ ìˆ˜í–‰í•˜ëŠ” Unitìœ¼ë¡œ ë™ì‘ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n  1. Packetì˜ fieldì™€ metadataë¥¼ í™œìš©í•˜ì—¬ keyë¥¼ ìƒì„±í•œë‹¤.\n  2. ìƒì„±í•œ keyë¡œ Tableì—ì„œ ì¡°íšŒ(Lookup)í•œë‹¤.\n  3. ì¡°íšŒëœ keyì— ëŒ€ì‘í•˜ëŠ” actionì´ ì¡´ì¬í•œë‹¤ë©´, ì´ë¥¼ ìˆ˜í–‰í•œë‹¤.\n- **User-defined metadata** : Programmer(user)ì— ì˜í•´ì„œ ì •ì˜ëœ data êµ¬ì¡°ë¡œ ê° packetì—ì„œ ì¶”ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.\n- **Intrinsic metadata** : ê¸°ë³¸ì ìœ¼ë¡œ ì •ì˜ëœ data êµ¬ì¡°ë¡œ ê° packetì—ì„œ ì¶”ì¶œì´ ê°€ëŠ¥í•˜ë‹¤.\n- **Extern object** : ì¼ë°˜ì ì¸ Programming Languageì—ì„œ Libraryì™€ ê°™ì€ ì—­í• ì„ í•˜ë©°, P4ê°€ ì‹¤í–‰ë  Hardwareì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ë“¤ì´ ì—¬ê¸°ì— í¬í•¨ëœë‹¤. P4ì—ì„œ ì´ë¥¼ ì´ìš©í•˜ì—¬ Programmingì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ì´ëŠ” P4ë¥¼ ì§€ì›í•˜ëŠ” Hardware Switch ì œì‘ìê°€ ì§€ì •í•˜ëŠ” ê²ƒì´ê¸°ì— P4ë¥¼ í†µí•œ êµ¬í˜„ì€ ë¶ˆê°€ëŠ¥í•˜ë‹¤.\n- **Deparser** : Packetì˜ Headerì™€ Payloadë¥¼ ë‹¤ì‹œ ê²°í•©í•˜ì—¬ output portë¡œ ë‚´ë³´ë‚¼ Packetì„ ìƒì„±í•œë‹¤.\n- **Control flow** : targetì˜ packet ì²˜ë¦¬ë¥¼ ê¸°ìˆ í•˜ëŠ” í•„ìˆ˜ì ì¸ program ìš”ì†Œì´ë‹¤. Deparsingê³¼ Match-action ë“±ì„ ì´ë¥¼ í†µí•´ì„œ ê¸°ìˆ í•  ìˆ˜ ìˆë‹¤.\n\n## Example\n\nê°€ì¥ ê¸°ë³¸ì ì¸ Siwtch(Very Simple Switch, **VSS**)ë¥¼ êµ¬í˜„í•˜ë©° P4ì˜ programming ì ˆì°¨ë¥¼ ìµí˜€ë³´ì. ì•„ë˜ ê·¸ë¦¼ì€ VSSë¥¼ ë¶„ì„í•œ ê·¸ë¦¼ì´ë‹¤.\n\n![Very Simple Switch](/images/vss.jpeg)\n\n### Flow\n\nì´ 3ê°€ì§€ì˜ Flowê°€ ì¡´ì¬í•œë‹¤. í•˜ë‚˜ëŠ” ì¼ë°˜ì ì¸ ë°ì´í„° Packetì„ ì˜ë¯¸í•˜ë©° Targetì˜ **Physical Ethernet**ì„ í†µí•´ì„œ ë“¤ì–´ì˜¨ packetì´ ì´ì— í•´ë‹¹í•œë‹¤. ë˜ ë‹¤ë¥¸ í•˜ë‚˜ì˜ Control Flowë¡œ ëŒ€ê²Œ SDNì˜ Controllerë¥¼ í†µí•´ì„œ ë“¤ì–´ì˜¨ Packetì´ë‹¤. ëŒ€ê²Œ ì´ëŠ” CPUë¥¼ í†µí•´ì„œ ì „ë‹¬ë˜ê¸° ë•Œë¬¸ì— **From CPU**ë¼ê³  í‘œê¸°í•œë‹¤. ë§ˆì§€ë§‰ì€ **Recirculate**ì¸ë° ì´ëŠ” ë™ì¼ Target ë‚´ë¶€ì—ì„œ ì¬ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œ ë‹¤ì‹œ Arbiterë¡œ ì „ë‹¬ëœ Packetì„ ì˜ë¯¸í•œë‹¤. ì´ëŠ” í•œ ë²ˆì˜ ìˆœí™˜ìœ¼ë¡œëŠ” ì œëŒ€ë¡œ ëœ ì²˜ë¦¬ê°€ ì–´ë ¤ìš´ ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.\n\n### Component\n\nì£¼í™©ìƒ‰ ë°•ìŠ¤ì˜ ìš”ì†ŒëŠ” Hardwareë¡œ ì •ì˜ëœ ìš”ì†Œ(Arbiter, Parser Runtime, Demux/Queue)ë¥¼ ì˜ë¯¸í•˜ê³ , ê²€ì€ ë°•ìŠ¤ì˜ ìš”ì†Œ(Parser, Match-action Pipeline, Deparser)ëŠ” Softwareë¡œ êµ¬í˜„ë˜ëŠ” ìš”ì†Œë¥¼ ì˜ë¯¸í•œë‹¤. ê° ìš”ì†Œë¥¼ ë¨¼ì € ì•Œì•„ë³´ë„ë¡ í•˜ì.\n\n1. **Arbiter**  \n    í•œêµ­ì–´ë¡œëŠ” ì¤‘ì¬ìë¼ëŠ” ëœ»ì„ ê°€ì§€ë©°, Inputì„ ì¼ì°¨ì ìœ¼ë¡œ ê°€ê³µí•˜ëŠ” Block(ì¥ì¹˜)ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•œë‹¤.\n    - ì´ 16ê°œì˜ Portë¥¼ ê°€ì§€ë©°, 3ê°€ì§€ ì¢…ë¥˜ì˜ Inputì„ ì…ë ¥ë°›ëŠ”ë‹¤. (1)Physical Ethernet Input, (2)Control Flow(from CPU), (3)Recirculate Inputì„ ë°›ëŠ”ë‹¤.\n    - **Ethernet Inputì¸ ê²½ìš°**, checksumì„ ì¶”ì¶œí•˜ê³  ê²€ì¦í•œë‹¤. ë§Œì•½, ì˜¬ë°”ë¥´ì§€ ì•Šì€ checksumì´ë¼ë©´ packetì´ ë²„ë ¤ì§€ê³ , ì˜¬ë°”ë¥´ë‹¤ë©´ packetì˜ payloadì—ì„œ checksumì„ ì¶”ì¶œí•˜ì—¬ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì „ë‹¬í•œë‹¤.\n    - ì—¬ëŸ¬ packetì„ ë™ì‹œì— ìˆ˜ì‹ í•œ ê²½ìš°ì—ëŠ” ì´ë¥¼ schedulingí•˜ëŠ” Algorithmì„ ì‹¤í–‰ì‹œí‚¨ë‹¤.\n    - Arbiterê°€ Busy ìƒíƒœì´ê³ , ëŒ€ê¸° queueê°€ ê½‰ ì°¬ ê²½ìš°ì—ëŠ” ë„ì°©í•œ packetì„ Dropí•œë‹¤.\n    - packetì„ ë°›ì€ portë¥¼ `inCtrl.inputPort`ì— ì €ì¥í•˜ì—¬, Match-action Pipelineìœ¼ë¡œ ì „ë‹¬í•˜ì—¬ packetì´ ì–´ë””ì„œë¶€í„° ì™”ëŠ”ì§€ë¥¼ markingí•œë‹¤. ì—¬ê¸°ì„œëŠ” Physical Ethernet portëŠ” 0 ~ 7ë²ˆê¹Œì§€ë¥¼ ì˜ë¯¸í•˜ê³ , 13ì€ recirculation port, 14ëŠ” CPU portë¥¼ ì˜ë¯¸í•œë‹¤.\n2. **Parser**\n   Packetì„ ê°€ê³µí•˜ì—¬ Input Headerë¥¼ ì¶”ì¶œí•˜ê³ , user defined metadataë¥¼ ìƒì„±í•˜ì—¬ ì´ë¥¼ Match-action Pipelineìœ¼ë¡œ ì „ë‹¬í•œë‹¤.\n3. **Parser Runtime**\n   Parserì™€ í˜‘ë ¥ì„ í•˜ë©° ì‹¤í–‰ë˜ëŠ” ì¥ì¹˜ì´ë‹¤. Parserì— ì •ì˜ëœ actionì— ê¸°ë°˜í•˜ì—¬ Match-action Pipelineìœ¼ë¡œ error codeë¥¼ Match-action Pipelien, packet payloadì— ëŒ€í•œ ì •ë³´(payload ê¸¸ì´ ë“±)ë¥¼ Demuxë¡œ ì „ë‹¬í•œë‹¤.\n4. **Match-action Pipeline**\n   Parserë¡œ ë¶€í„° ì „ë‹¬ë°›ì€ Input Headerì™€ Parser Runtimeìœ¼ë¡œ ë¶€í„° ë°›ì€ error, Arbiterë¥¼ í†µí•´ ë°›ì€ `inCtrl.inputPort`ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ keyë¥¼ êµ¬ì„±í•˜ê³ , ì´ë¥¼ í†µí•´ì„œ Tableì„ ì¡°íšŒí•˜ì—¬ ì ì ˆí•œ Actionì„ ì¡°íšŒí•˜ì—¬ ì‹¤í–‰í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ ê²°ë¡ ì ìœ¼ë¡œ Output Headerì™€ `outCtrl.outputPort`ë¥¼ ìƒì„±í•œë‹¤.\n5. **Deparser**\n   Deparserì˜ ì—­í• ì€ output Headerë¥¼ ë‹¤ì‹œ ì¬ì¡°ë¦½í•˜ëŠ” ì¥ì¹˜ì´ë‹¤. ì˜¨ì „í•œ header í˜•íƒœë¥¼ ì™„ì„±í•´ì„œ Demuxì—ì„œ Packetì„ ìµœì¢…ìœ¼ë¡œ ìƒì„±í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.\n6. **Demux/Queue**\n   ë°–ìœ¼ë¡œ ì „ë‹¬í•  packetì˜ headerëŠ” Deparserë¡œë¶€í„°, payloadëŠ” Parserë¡œ ë¶€í„° ì „ë‹¬ë°›ì•„ì„œ ì´ë¥¼ ì¬ê²°í•©í•˜ì—¬ ìƒˆë¡œìš´ packetì„ ìƒì„±í•˜ì—¬ ì˜¬ë°”ë¥¸ output portë¡œ ë‚´ë³´ë‚´ëŠ” ì—­í• ì„ í•˜ëŠ” ì¥ì¹˜ì´ë‹¤. output portëŠ” Matc-action Pipelineì˜ `outCtrl.outputPort`ë¥¼ í†µí•´ì„œ ì „ë‹¬ëœë‹¤. ì„¸ë¶€ì ì¸ ë™ì‘ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n   - packet ì‚­ì œë¥¼ ì›í•˜ëŠ” ê²½ìš° drop portë¡œ packetì„ ë‚´ë³´ë‚¸ë‹¤.\n   - Physical Ethernetìœ¼ë¡œ ë‚˜ê°€ëŠ” packetì¸ ê²½ìš° í•´ë‹¹í•˜ëŠ” output interfaceë¡œ ì „ë‹¬í•œë‹¤. ë§Œì•½, í•´ë‹¹ interfaceê°€ Busy ìƒíƒœë¼ë©´ Queueì— ì €ì¥ëœë‹¤. output interfaceì—ì„œëŠ” packetì˜ checksumì„ ê³„ì‚°í•˜ì—¬ packetì˜ ëì— ë¶™ì—¬ì„œ ë‚´ë³´ë‚¸ë‹¤.\n   - CPUë¥¼ í†µí•´ì„œ ì „ë‹¬í•˜ëŠ” Control plane packetì˜ ê²½ìš°ì—ëŠ” Deparserì—ì„œ ìƒì„±ëœ Headerë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , original packet ê·¸ëŒ€ë¡œë§Œ ì „ì†¡í•  ìˆ˜ ìˆë‹¤.\n   - `outCtrl.outputPort`ê°€ ì˜¬ë°”ë¥´ì§€ ì•Šë‹¤ë©´, í•´ë‹¹ packetì€ dropëœë‹¤.\n   - ë§Œì•½, Demuxê°€ Busy ìƒíƒœì´ê³ , queueì— ë¹ˆ ê³µê°„ì´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, `outCtrl.outputPort`ë¥¼ ë¬´ì‹œí•˜ê³  packetì„ dropí•œë‹¤.\n\n### Architecture.p4\n\nì•„ë˜ëŠ” ìœ„ì˜ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ Venderê°€ ì‘ì„±í•œ Architectureì˜ ë‚´ìš©ì´ë‹¤.\n\n```c++\n// File: \"very_simple_switch_model.p4\"\n// Core Libraryë¡œ packet_inê³¼ packet_outì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•˜ë‹¤.\n#include <core.p4> \n\n// PortëŠ” 4bitë¡œ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤.\ntypedef bit<4> PortId;\n\n// 4 width(bit)ë¡œ í‘œí˜„í•˜ëŠ” 8, ìƒëµí•´ì„œ 8ë§Œ ì¨ë„ ë¬´ë°©\nconst PortId REAL_PORT_COUNT = 4w8; \n\n// Input packetì— ë™ë°˜ë˜ëŠ” metadataë¡œ Match-action Pipelineì—ì„œ ì‚¬ìš©ëœë‹¤.\nstruct InControl {\n  PortId inputPort;\n}\n\n// Special Input Port\nconst PortId RECIRCULATE_IN_PORT = 0xD;\nconst PortId CPU_IN_PORT = 0xE;\n\n// Match-action Pipelineì—ì„œ ìƒì„±ë˜ëŠ” Output packetì— ë™ë°˜ë˜ëŠ” metadata\nstruct OutControl {\n  PortId outputPort;\n}\n\n// Special Output Port\nconst PortId DROP_PORT = 0xF;\nconst PortId CPU_OUT_PORT = 0xE;\nconst PortId RECIRCULATE_OUT_PORT = 0xD;\n\n// ê³µí†µìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” HëŠ” headerë¡œ programmerì— ì˜í•´ì„œ ì •ì˜ëœë‹¤.\n\n/**\n * Parse\n * @param b             input_packet\n * @param parsedHeaders headers contructed by parser\n */\nparser Parser<H>(packet_in b, out H parsedHeaders);\n\n\n/**\n * Match-action Pipeline\n * @param headers     Parserë¡œ ë¶€í„° ë°›ê³ , Deparserì—ê²Œ ë³´ë‚¸ë‹¤.\n * @param parseError  parsing ë„ì¤‘ì— ìƒì„±ëœ error\n * @param inCtrl      packetì„ ë°›ì€ input portë¥¼ í¬í•¨í•œ ì •ë³´\n * @param outCtrl     packetì„ ë³´ë‚¼ output portë¥¼ í¬í•¨í•œ ì •ë³´\n */\ncontrol Pipe<H>(inout H headers, \n                in error parseError, \n                in InControl inCtrl, \n                out OutControl outCtrl);\n\n/**\n * Deparser\n * @param outputHeaders programmerì— ì˜í•´ì„œ ì •ì˜ëœ output header\n * @param b             ë°–ìœ¼ë¡œ ë‚´ë³´ë‚¼ packet\n */\ncontrol Deparser<H>(inout H outputHeaders, packet_out b);\n\n/**\n * Top level Packet\n */\npackege VSS<H>(parse<H> p, Pipe<H> map, Deparser<H> d);\n\n/**\n * Extern block\n * ì´ëŠ” Target venderê°€ ë‚´ë¶€ì ìœ¼ë¡œ êµ¬í˜„í•œ blockì´ë‹¤.\n * programmerëŠ” ì•„ë˜ ì„ ì–¸ëœ blockì„ ììœ ë¡­ê²Œ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.\n */\nextern Checksum16 {\n  Checksum16();\n  void clear();\n  void update<T>(in T data);\n  void remove<T>(in T data);\n  bit<16> get();\n}\n```\n\nì´ë ‡ê²Œ ì‘ì„±ëœ architectureë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ programmerëŠ” ì½”ë“œ ì‘ì„±ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Programming.p4\n\në¨¼ì € ì–´ë–¤ ë™ì‘ì„ ìˆ˜í–‰í•˜ê²Œ í• ì§€ë¥¼ ì •ì˜í•˜ì.\n\n<!-- TODO ì±„ìš°ê¸° -->\n1. Ethernet/IPv4 headerë¥¼ í™œìš©í•˜ì—¬ Forwardingì„ ìˆ˜í–‰í•  ê²ƒì´ë‹¤.\n2. CheckSumì„ í™•ì¸í•˜ì—¬ ì •ë‹¹ì„± ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.\n3. TTL ê°’ì„ í™•ì¸í•˜ì—¬ ì •ë‹¹ì„± ì—¬ë¶€ë¥¼ í™•ì¸í•œë‹¤.\n4. Destination IPv4ë¥¼ í™œìš©í•˜ì—¬ Next Hopì˜ IPv4ë¥¼ ì°¾ëŠ”ë‹¤.\n5. ì¶”ì¶œí–ˆë˜ Packetì˜ Headerë¥¼ ë‹¤ì‹œ Ethernet/IPv4ë¡œ ì¬êµ¬ì„±í•œë‹¤.\n\nì´ë¥¼ ì½”ë“œë¡œì¨ êµ¬í˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n```c++\n// File: \"very_simple_switch_impl.p4\"\n# include <core.p4>\n# include \"very_simple_switch_model.p4\"\n\n// í•´ë‹¹ programì€ packetì—ì„œ IPv4ì™€ \n// ethernet headerë¥¼ ê°€ì ¸ì™€\n// destination IPì— ê¸°ë°˜í•˜ì—¬ packetì„ \n// forwardingí•˜ëŠ” ê²ƒì„ ëª©ì ìœ¼ë¡œ í•œë‹¤.\n\ntypedef bit<48> EthernetAddress;\ntypedef bit<32> IPv4Address;\n\n// Standard Ethernet header\nheader Ethernet_h {\n  EthernetAddress dstAddr;\n  EthernetAddress srcAddr;\n  bit<16>         etherType;\n}\n\n// IPv4 header (without option)\nheader IPv4_h {\n  bit<4>      version;\n  bit<4>      ihl;\n  bit<8>      diffserv;\n  bit<16>     totalLen;\n  bit<16>     identification;\n  bit<3>      flags;\n  bit<13>     fragOffset;\n  bit<8>      ttl;\n  bit<8>      protocol;\n  bit<16>     hdrChecksum;\n  IPv4Address srcAddr;\n  IPv4Address dstAddr;\n}\n\n// packetì—ì„œ ì¶”ì¶œí•œ headerí˜•íƒœì˜ êµ¬ì¡°ì²´\nstruct Parsed_packet {\n  Ethernet_h ethernet;\n  IPv4_h     ip;\n}\n\n/* Parser Section */\n\n// Programmerì— ì˜í•´ì„œ ì •ì˜ëœ errorë¡œ \n// parsing ë„ì¤‘ì— ì´ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆë‹¤.\nerror {\n  IPv4OptionsNotSupported,\n  IPv4IncorrectVersion,\n  IPv4ChecksumError\n}\n\n/**\n * @param b ë“¤ì–´ì˜¤ëŠ” packet\n * @param p parsingí•´ì„œ ë‚˜ê°ˆ packet Header\n */\nparser TopParser(packet_in b, out Parsed_packet p) {\n  Checksum16() ck; // checksum blockì„ instantiating\n\n  state start {\n    b.extract(p.ethernet); // pì˜ ethernet ë¶€ë¶„ì„ bì—ì„œ ì¶”ì¶œ\n    transition select(p.ethernet.etherType) {\n      0x800: parse_ipv4; // forward packet to parse_ipv4\n      // default ruleì´ ì—†ê¸° ë•Œë¬¸ì— 0x800(ethernet)ì„ \n      // ì œì™¸í•œ packetì„ ëª¨ë‘ rejected ëœë‹¤.\n    } \n  }\n\n  state parse_ipv4 {\n    b.extract(p.ip);\n    verify(p.ip.version == 4w4, error.IPv4IncorrectVersion);\n    verify(p.ip.ihl == 4w5, error.IPv4OptionsNotSupported);\n    ck.clear();\n    ck.update(p.ip);\n    verify(ck.get() == 16w0, error.IPv4ChecksumError);\n    transition accept; // ë‹¤ìŒ blockìœ¼ë¡œ outì„ forwarding\n  }\n}\n\n/* Match-action Pipeline Section */\n\ncontrol TopPipe(inout Parsed_packet headers, \n                in error parseError,\n                in InControl inCtrl,\n                out OutControl outCtrl) {\n  IPv4Address nextHop;\n\n  action Drop_action() { outCtrl.outputPort = DROP_PORT; }\n\n  action Set_nhop(IPv4Address ipv4_dest, PortId port) {\n    nextHop = ipv4_dest;\n    headers.ip.ttl = headers.ip.ttl - 1;\n    outCtrl.outputPort = port;\n  }\n\n  table ipv4_match {\n    // lpm : longest-prefix match\n    key = { headers.ip.dstAddr: lpm; }\n    // í•´ë‹¹ í…Œì´ë¸”ì—ì„œ keyì— ëŒ€ì‘í•  ìˆ˜ ìˆëŠ” actionì˜ listì´ë‹¤. \n    // í•´ë‹¹ tableì€ í›„ì— controllerì— ì˜í•´ì„œ ì±„ì›Œì§„ë‹¤.\n    // ì¦‰, í…Œì´ë¸”ì€ p4 prgrammingì„ í†µí•´ì„œ ì±„ìš°ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤.\n    actions = {\n      Drop_action;\n      Set_nhop;\n    }\n    size = 1024;\n    default_action = Drop_action;\n  }\n\n  action Send_to_cpu() {\n    outCtrl.outputPort = CPU_OUT_PORT;\n  }\n\n  table check_ttl {\n    // exact : ì •í™•íˆ ì¼ì¹˜í•˜ëŠ”ì§€ ì—¬ë¶€ë¥¼ í™•ì¸\n    key = { headers.ip.ttl: exact; }\n    actions = { \n      Send_to_cpu;\n      NoAction;\n    }\n    const default_action = NoAction;\n  }\n\n  action Set_dmac(EthernetAddress dmac) {\n    headers.ethernet.dstAddr = dmac;\n  }\n  \n  table dmac {\n    key = { NextHop: exact; }\n    actions = {\n      Drop_action;\n      Set_dmac;\n    }\n    size = 1024;\n    default_action = Drop_action;\n  }\n\n  action Set_smac(EthernetAddress smac) {\n    headers.ethernet.srcAddr = smac;\n  }\n  \n  table smac {\n    key = { outCtrl.outputPort: exact; }\n    actions = {\n      Drop_action;\n      Set_smac;\n    }\n    size = 16;\n    default_action = Drop_action;\n  }\n\n  apply {\n    if (parseError != error.NoError) {\n      Drop_actrion();\n      return;\n    }\n\n    ipv4_match.apply();\n    if (outCtrl.outputPort == DROP_PORT) return;\n\n    check_ttl.apply();\n    if (outCtrl.outputPort == CPU_OUT_PORT) return;\n\n    dmac.apply();\n    if (outCtrl.outputPort == DROP_PORT) return;\n\n    smac.apply();\n  }\n}\n\n/* Deparser Section */\n\ncontrol TopDeparser(inout Parsed_packet p, packet_out b) {\n  Checksum16() ck;\n  apply {\n    b.emit(p.ethernet);\n    if (p.ip.isValid()) {\n      ck.clear();\n      p.ip.hdrChecksum = 16w0;\n      ck.update(p.ip);\n      p.ip.hdrChecksum = ck.get();\n    }\n    b.emit(p.ip);\n  }\n}\n\n// VSS packetë¥¼ Instantiate\nVSS(TopParser(), TopPipe(), TopDeparser()) main;\n```\n\nì—¬ê¸°ê¹Œì§€ê°€ ê¸°ë³¸ì ì¸ P4ì— ëŒ€í•œ ì„¤ëª…ì´ë‹¤. í›„ì— ì „ë°˜ì ì¸ ë¬¸ë²•ê³¼ ì‘ì„±ë²•ì— ëŒ€í•œ ê°€ì´ë“œë¥¼ ì‘ì„±í•˜ë„ë¡ í•˜ê² ë‹¤.\n\n## Reference\n\n- Thumbnail: [ğŸ”— P4 ê³µì‹í™ˆí˜ì´ì§€](https://p4.org)\n- [P4 specification](https://p4.org/p4-spec/docs/P4-16-v1.2.2.pdf)\n","slug":"p4","date":"2022-06-09 17:29","title":"P4","category":"Network","tags":["SDN","P4","ProgrammableSwitch","DataPlane","OpenFlow"],"desc":"P4ëŠ” Programmable Switch, ì¦‰ Hardwareì— ë¬¶ì—¬ìˆëŠ” Softwareë¥¼ í†µí•´ DataPlaneì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ í•„ìš”ì— ë”°ë¼ Switchì˜ DataPlaneì„ ì§ì ‘ Programmingí•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ìƒˆë¡œìš´ ë°©ë²•ë¡ ì„ ì œì‹œí•œë‹¤.","thumbnailSrc":"https://euidong.github.io/images/p4-icon.png"},{"content":"\n## Intro\n\nRoutingì€ ìš°ë¦¬ê°€ ì£¼ê³  ë°›ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œ ëª©ì ì§€ë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” ê³¼ì •ì´ë‹¤. ì–´ë–»ê²Œ í•´ì„œ IPë¥¼ í†µí•´ì„œ ëª©ì ì§€ë¥¼ ì°¾ì•„ ë°ì´í„°ê°€ ì´ë™í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.\n\n## Routing Vs Switching Vs Forwarding\n\në§¤ìš° ìœ ì‚¬í•œ ê°œë…ì´ì§€ë§Œ ì´ì— ëŒ€í•´ì„œ ì•Œì•„ë‘ê³  ê°€ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.\n\n- `Switching` : Inbound Interfaceì—ì„œ Outbound Interfaceë¡œ packetë“¤ì„ ì „ì†¡ ì‹œí‚¤ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì¦‰, í•˜ë‚˜ì˜ ê¸°ê¸° ë‚´ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ì¼ì„ ì˜ë¯¸í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤.\n- `Forwarding` : í•œ ì¥ì¹˜ê°€ ëª©ì ì§€ë¡œ ê°€ëŠ” ê²½ë¡œì— ìˆëŠ” ë‹¤ìŒ ì¥ì¹˜ë¡œ packetì„ ì „ì†¡í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. í•˜ì§€ë§Œ, Switchingê³¼ ë™ì¼í•œ ëœ»ìœ¼ë¡œë„ ë§ì´ ì‚¬ìš©ëœë‹¤.\n- `Routing` : ë…¼ë¦¬ì ìœ¼ë¡œ Network Topologyë¥¼ í•™ìŠµí•˜ì—¬, ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìµœì ì˜ ê²½ë¡œë¥¼ ì°¾ì•„ ì´ë™í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ë”°ë¼ì„œ, ì „ì²´ì ì¸ ê¸¸ì„ ì°¾ëŠ” ê²ƒê³¼ ì´ë¥¼ ë”°ë¼ê°€ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤.\n\n## Switch\n\nSwitchë¥¼ ë¶€ë¥´ëŠ” ëª…ì¹­ ì—­ì‹œ ë‹¤ì–‘í•˜ê³ , ìƒí™©ì— ë”°ë¼ ì—­í• ë„ ì–´ëŠì •ë„ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— ì •ë¦¬ë¥¼ í•œë‹¤. ëŒ€ê²Œ OSI 7ê³„ì¸µì— ê¸°ë°˜í•˜ì—¬ ë¶„ë¥˜ë¥¼ í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n- `L2 Switch` : Ethernet Switchë¥¼ ëŒ€ê²Œ ì˜ë¯¸í•˜ë©°, ì¼ë°˜ì ìœ¼ë¡œ Switchë¼ê³  ë¶€ë¥´ëŠ” ì¥ì¹˜ê°€ ì´ë¥¼ ì˜ë¯¸í•œë‹¤. MAC ì£¼ì†Œì— ê¸°ë°˜í•œ Forwardingì„ ìˆ˜í–‰í•˜ëŠ” ì¥ì¹˜ì´ë‹¤.\n- `L3 Switch` : Routerë¼ê³ ë„ ë¶ˆë¦¬ëŠ” ì¥ì¹˜ë¡œ, IP ì£¼ì†Œì— ê¸°ë°˜í•˜ì—¬ ìµœì ì˜ ê²½ë¡œë¥¼ í•™ìŠµí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ í¬í•¨í•œ Switchì´ë‹¤.\n- `L4 Switch` : Port ë²ˆí˜¸ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Switchingì„ ìˆ˜í–‰í•˜ëŠ” ì¥ì¹˜ë¡œ ëŒ€ê²Œ Machine ë‚´ë¶€ì—ì„œ Softwareì ìœ¼ë¡œ êµ¬í˜„í•˜ëŠ” Switchì¼ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.\n- `L7 Switch` : Application Levelì—ì„œ ëª¨ë“  Trafficì„ ê´€ë¦¬ ë° URL, Cookie ê¸°ë°˜ìœ¼ë¡œ ììœ ë¡­ê²Œ Switchingì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìƒê°í•˜ëŠ” Load Balancingê³¼ ê°™ì€ ì‘ì—…ë„ ì‰½ê²Œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ Softwareì ìœ¼ë¡œ êµ¬í˜„ë˜ì–´ì§„ë‹¤.\n\n## Routing ì˜ì—­\n\nìš°ë¦¬ê°€ Routingì„ ìˆ˜í–‰í•˜ëŠ” ê²½ìš°ì— caseëŠ” í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. **AS ë‚´ë¶€ì¸ê°€? ì™¸ë¶€ì¸ê°€?** ì´ë‹¤. `AS`ë€ Autonomous Systemì˜ ì•½ìë¡œ í•˜ë‚˜ì˜ ê¸°ê´€ì—ì„œ ê´€ë¦¬í•˜ëŠ” IP subnetë“¤ê³¼ Routerë“¤ì˜ ì§‘í•©ì„ ì˜ë¯¸í•œë‹¤. ê° ASëŠ” ê³ ìœ  ì‹ë³„ê°’ì¸ ASN(AS Number)ì— ì˜í•´ì„œ ì‹ë³„ë˜ë©° ê° ê¸°ì—…, í†µì‹  ì‚¬ì—…ì, ëŒ€í•™, ì–¸ë¡  ê¸°ê´€ ë“±ì´ ì´ë¥¼ ê°–ê³  ìˆë‹¤. ì´ë ‡ê²Œ ê°™ì€ AS ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” ê¸°ê¸° ê°„ì˜ Protocolì„ Interior Gateway Protocol(**IGP**)ì´ë¼ê³  í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš° Exterior Gateway Protocol(**EGP**)ë¼ê³  í•œë‹¤.\n\n## Base\n\nê° Routing Protocolì— ëŒ€í•´ì„œ ìì„¸íˆ ì‚´í´ë³´ê¸°ì— ì• ì„œ ê¸°ë³¸ì ì¸ Network í™˜ê²½ì— ëŒ€í•œ ì´í•´ê°€ í•„ìš”í•˜ë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ì•„ë˜ ê°œë…ì— ëŒ€í•œ ìˆ™ì§€ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì.\n\n1. MAC/IP  \n   MACì€ íŠ¹ì • Network ì—°ê²° ë‹¨ì(Network Interface Card, NIC)ì—ê²Œ ì£¼ì–´ì§€ëŠ” ê³ ìœ ê°’ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ê¸°ì— í•˜ë‚˜ì˜ ê¸°ê¸°ëŠ” í•˜ë‚˜ ì´ìƒì˜ NICë¥¼ ê°€ì§„ë‹¤ë©´, í•˜ë‚˜ ì´ìƒì˜ MAC addressë¥¼ ê°–ê²Œ ë˜ê³ , ì´ì— ë”°ë¼ íŠ¹ì • ê¸°ê¸°ë¥¼ ì •í™•í•˜ê²Œ ê°€ë¥´í‚¤ê¸° ìœ„í•´ì„œ IPv4 ì£¼ì†Œë¥¼ ì‚¬ìš©í•œë‹¤. ê·¸ëŸ¬ë‚˜, IP ë¶€ì¡± í˜„ìƒìœ¼ë¡œ ì¸í•´ í˜„ì¬ì—ëŠ” ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ì—ì„œëŠ” private IPë¼ëŠ” ë³„ë„ì˜ ì˜ì—­ìœ¼ë¡œ í‘œê¸°ë¥¼ í•˜ê³ , ë„¤íŠ¸ì›Œí¬ì˜ ëŒ€í‘œ IPë¥¼ ë‚´ì„¸ìš°ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€í™”í•˜ì˜€ë‹¤. ì•„ì§ê¹Œì§€ëŠ” í° ë¬¸ì œê°€ ë°œìƒí•˜ê³  ìˆì§€ ì•Šì§€ë§Œ, í›„ì—ëŠ” IPv6ë¡œ ë„˜ì–´ê°€ì•¼í•  ìˆ˜ë„ ìˆë‹¤.\n2. Broadcast Address  \n   Networkì—ì„œ Trafficì„ Networkì— ì—°ê²°ëœ ëª¨ë“  Nodeì—ê²Œ ë³´ë‚´ì•¼í•  ê²½ìš°ê°€ ìˆë‹¤. ì´ë•Œ, ë§Œì•½ ëª¨ë“  IP addressë¥¼ 1ë¡œ í‘œê¸°í•œë‹¤ë©´, ì´ëŠ” ëª¨ë“  Networkë¥¼ í–¥í•œ Broadcast Requestë¡œ ë°›ì•„ë“¤ì—¬ì§„ë‹¤. ì´ˆê¸°ì— Networkì—ì„œëŠ” ëª¨ë“  ìš”ì²­ì´ Broadcastë˜ê³  ì´ë¥¼ ë°›ì€ ì‚¬ìš©ìê°€ ì·¨ì‚¬ ì„ íƒí•˜ëŠ” êµ¬ì¡°ë¥¼ ê°€ì¡Œì—ˆì§€ë§Œ, Broadcast ìš”ì²­ì´ loopê°€ ìƒê¸°ë©´ì„œ, Network ì „ì²´ë¥¼ ë§ˆë¹„ì‹œí‚¤ê±°ë‚˜ ë³´ì•ˆìƒ/ì„±ëŠ¥ìƒì˜ ë¬¸ì œë¡œ ì¸í•´ Broadcastë˜ëŠ” ì˜ì—­ì„ ì¤„ì´ê³ ì í•œë‹¤.\n3. Subnet  \n   Broadcast Trafficì´ ë§ì•„ì§„ë‹¤ëŠ” ê²ƒì€ Networkì˜ í˜¼ë€ì„ì•¼ê¸°í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ Broadcastì˜ ì˜ì—­ì„ ìµœì†Œí•œìœ¼ë¡œ í‘œí˜„í•˜ê³ ì Subnetì„ ì •ì˜í•˜ì˜€ë‹¤. ì¦‰, Networkë¥¼ ë” ì‘ì€ Subnetworkë¡œ ë‚˜ëˆ„ìëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ í‘œì‹œí•˜ê¸° ìœ„í•´ì„œ Subnet Maskë¼ëŠ” ê²ƒì„ í™œìš©í•˜ë©°, Network prefixë¥¼ ì´ìš©í•˜ì—¬, ì˜ì—­ì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•œë‹¤. ê·¸ë¦¬ê³  ì´ë¥¼ í†µí•´ì„œ ë‚˜ë‰˜ì–´ì§„ Network ë¼ë¦¬ëŠ” ë‹¤ë¥¸ Broadcast ì˜ì—­ì„ ê°€ì§€ê²Œ ë˜ê³ , ì„œë¡œ Broadcast messageê°€ ì „íŒŒë˜ì§€ ì•ŠëŠ”ë‹¤. ì´ì— ë”°ë¼ ë‚˜ë‰˜ì–´ì§„ Networkì˜ ê°€ì¥ ë(All One Address)ëŠ” Broadcast addressê°€ ë˜ê³ , ê°€ì¥ ì²˜ìŒ(All Zero Address)ëŠ” Networkì˜ ì£¼ì†Œë¥¼ ê°€ë¥´í‚¤ëŠ” ê°’ìœ¼ë¡œ ì‚¬ìš©ëœë‹¤.  \n   í˜„ëŒ€ì—ëŠ” ì´ëŸ¬í•œ Subnetì„ í‘œê¸°í•  ë•Œ, ë³„ë„ì˜ Public IPë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³ , Private IPë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ ë”ìš± IP addressë¥¼ ì ˆì•½í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ”, ì†¡ì‹  ì‹œ Router IPë¡œ Private IPë¥¼ ë°”ê¾¸ê³ , ì‘ë‹µì´ ëŒì•„ì™”ì„ ë•Œ ì›ë˜ Nodeë¡œ ëŒë ¤ì£¼ê¸° ìœ„í•œ ë²ˆì—­ ê³¼ì •ì´ í•„ìš”í•œë° ì´ë•Œ NAT(Network Address Translation) ê¸°ìˆ ì´ ì‚¬ìš©ëœë‹¤.\n4. CIDR  \n   Subnetì„ ë‚˜ëˆŒ ë•Œ, ìœ„ì—ì„œ IPë¥¼ êµ¬ë¶„í•  ë•Œ ì‚¬ìš©í•˜ëŠ” A(8bits prefix), B(16bits prefix), C(24bits prefix) classë¡œ ë‚˜ëˆ„ì–´ ì‚¬ìš©í–ˆì—ˆëŠ”ë°, ì´ëŸ¬í•œ ë²”ìœ„ê°€ Subnetì—ê²ŒëŠ” ë„ˆë¬´ ì»¸ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì„ì˜ì˜ bit ë‹¨ìœ„ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Subnet ë²”ìœ„ë¥¼ ë” ì„¸ë¶„í™”í•  ìˆ˜ ìˆë‹¤.\n5. Loopback Address  \n   ìê¸° ìì‹ ì„ ê°€ë¥´í‚¤ëŠ” addrsssë¡œ ëŒ€ê²Œ `127.0.0.1`ì„ ì‚¬ìš©í•˜ëŠ”ë°, í•„ìš”ì— ë”°ë¼ íŠ¹ì • IPë¥¼ ë³„ë„ë¡œ ìê¸° ìì‹ ì„ ê°€ë¥´í‚¤ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ì´ëŠ” Network Testingì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©ë˜ëŠ”ë°, Routerì˜ Loopback Addressì™€ ì™¸ë¶€ ì¥ì¹˜ IP Addressì— pingì„ ë³´ë‚´ë©° í†µì‹  ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n6. Default Gateway  \n   Nodeì— ê°€ì¥ ê·¼ì ‘í•œ Routerì˜ ì£¼ì†Œë¥¼ ì˜ë¯¸í•˜ë©°, ì´ë¥¼ í†µí•´ì„œ Internetì— ì—°ê²°ëœë‹¤.\n7. Collision Domain / VLAN  \n   í•˜ë‚˜ì˜ hub(Switch ì´ì „ì— ë„ë¦¬ ì“°ì´ë˜ L2 ì¥ì¹˜, Switch Hubë¼ê³ ë„ ë¶€ë¦„)ë¡œ ì—°ê²°ëœ ì¥ì¹˜ëŠ” ì „ë‹¬ë˜ëŠ” ëª¨ë“  packetì„ í•´ë‹¹ hubì˜ ëª¨ë“  portë¡œ flooding(forwarding)í•˜ëŠ”ë°, ì´ëŠ” Broadcastingê³¼ ê°™ë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ Broadcastingì€ ì„±ëŠ¥ìƒìœ¼ë¡œë„ ë³´ì•ˆìƒìœ¼ë¡œë„ ì¹˜ëª…ì ì´ê¸° ë•Œë¬¸ì—, ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ ë‚˜ì˜¨ ê²ƒì´ VLANì´ë‹¤. ê¸°ì¡´ì˜ Subnetì˜ L3ì—ì„œì˜ Broadcastingì„ ë§‰ì•˜ë‹¤ë©´, VLANì€ L2ì—ì„œ ì´ë¥¼ ë§‰ê¸° ìœ„í•œ ì‹œë„ì´ë‹¤. Virtual LANì˜ ì•½ìë¡œ í•˜ë‚˜ì˜ Switchê°€ ê° Portë§ˆë‹¤ Collision Domain(L2 Broadcastingì´ ìˆ˜í–‰ë˜ëŠ” ì˜ì—­)ì„ ë¶„ë¦¬ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Broadcastì˜ ë²”ìœ„ë¥¼ ë” ì˜ê²Œ ì¡°ê°¤ ìˆ˜ ìˆë‹¤.\n8. ARP  \n   Address Resolution Protocolì˜ ì•½ì–´ë¡œ, í•˜ë‚˜ì˜ Subnet ë‚´ì—ì„œ Broadcastë¥¼ ì´ìš©í•´, ê¸°ê¸°ì˜ IP ì£¼ì†Œë¥¼ í†µí•´ì„œ í•´ë‹¹ ê¸°ê¸°ì˜ MAC addressë¥¼ ì•Œì•„ë‚´ëŠ” Protocolì´ë‹¤. ì˜ˆì‹œë¡œ, Default Gatewayì˜ IP ì£¼ì†Œë¥¼ í†µí•´ì„œ í•´ë‹¹ Routerì˜ MAC addressë¥¼ ì°¾ì„ ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ë˜í•œ, ì¼ë°˜ Nodeì—ì„œ Serverë¡œ Requestë¥¼ ë³´ë‚¼ ë•Œì—ë„ MAC addressëŠ” ëª¨ë¥´ê¸° ë•Œë¬¸ì—, ì´ë¥¼ í†µí•´ì„œ MAC addressë¥¼ ì°¾ëŠ”ë‹¤. ì´ëŸ¬í•œ Trafficì€ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ ì¢‹ê¸° ë•Œë¬¸ì— ì´ë¥¼ ìœ„í•œ ì‘ìš© ê¸°ìˆ ë„ ì¡´ì¬í•œë‹¤.\n   - ARP Cache : ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œë§ˆë‹¤ ARPë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì€ ë¹„íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì—, IPì™€ ëŒ€ì‘í•˜ëŠ” MAC ì£¼ì†Œë¥¼ ì €ì¥í•œ Mapping tableì„ ì €ì¥í•´ë‘ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. PC í™˜ê²½ì—ì„œëŠ” Networkì˜ ë³€ê²½ì´ ì ê¸° ë•Œë¬¸ì— 20ë¶„ ë‹¨ìœ„ë¡œ ì¬ì‹¤í–‰í•˜ì§€ë§Œ, mobile ì¥ì¹˜ì—ì„œëŠ” 30ì´ˆ ë‹¨ìœ„ë¡œ ë‹¨ì¶•ë˜ì—ˆë‹¤.\n   - Proxy ARP : Routerê°€ ìˆ˜ì‹  Hostê¹Œì§€ì˜ ê²½ë¡œë¥¼ ì´ë¯¸ ì•Œê³  ìˆëŠ” ê²½ìš°ì—, ì†¡ì‹  Hostì—ê²Œ ìˆ˜ì‹  Hostì— ëŒ€í•œ MAC addressê°€ ì•„ë‹Œ Routerì˜ MAC addressë¥¼ ì „ì†¡í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ Routerì—ê²Œ ì „ì ì¸ ëŒ€ë¦¬ ì‘ì—…ì„ ë§¡ê¸°ëŠ” ê²ƒì´ê¸°ì— ë³´ì•ˆìƒì—ì„œëŠ” ì¢‹ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.\n\n## Routing Protocol\n\nê°€ì¥ ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  Routing ì¥ë¹„ì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì ìš©ë˜ëŠ” Protocol(STP)ë¥¼ ì ìš©í•˜ì—¬ Topologyì—ì„œ Loopë¥¼ ì œê±°í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œë‹¤. ì´í›„ì—ëŠ” Routing Table(RIB)ì™€ Forwarding Table(FIB)ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ê°€ì¥ í° ëª©í‘œê°€ ëœë‹¤. Routing Tableì€ íŠ¹ì • Router ì™€ ì—°ê²°ëœ Routerì˜ ì •ë³´ë¥¼ Protocolë§ˆë‹¤ ì •ì˜í•˜ì—¬ ë³´ê´€í•˜ëŠ” ê²ƒì´ë‹¤. Routerì—ì„œ Routing Tableì€ ì‚¬ìš©í•˜ëŠ” Routing Protocolì˜ ìˆ˜ ë§Œí¼, ì¦‰ ì—¬ëŸ¬ ê°œ ì¡´ì¬í•  ìˆ˜ ìˆë‹¤. ì´ëŸ¬í•œ Routing Tableë“¤ì— ê¸°ë¡ëœ ì •ë³´ë¥¼ í†µí•´ì„œ, ë‹¨ í•˜ë‚˜ì˜ Forwarding Tableì„ ê° Routerì—ì„œ êµ¬ì„±í•˜ê²Œ ëœë‹¤. (ì´ë•Œì— ê° Protocolì˜ ìš°ì„ ìˆœìœ„ì— ë”°ë¼ì„œ Forwarding Tableì´ êµ¬ì„±ëœë‹¤.) ì´ëŠ” ì‹¤ì œë¡œ ì–´ë–¤ Portë¡œ ì–´ë–¤ packetì´ ë“¤ì–´ì™”ì„ ë•Œ, ì–´ë–¤ Portë¡œ Forwarding í•  ê²ƒì¸ì§€ë¥¼ ê¸°ë¡í•´ë‘”ë‹¤.\nRoutingì˜ ì¢…ë¥˜ëŠ” ìœ„ì—ì„œ ë³´ì•˜ë˜ IGP/EGP ë¿ë§Œ ì•„ë‹ˆë¼ ì–¸ì œ ì„¤ì • ë°©ë²•ì— ë”°ë¼ì„œ 2 ê°€ì§€ë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. Trafficì´ ì „ë‹¬ë˜ê¸° ì´ì „ì— ê´€ë¦¬ìì— ì˜í•´ì„œ ì‚¬ì „ì— ì§ì ‘ Routingì„ ì •ì˜(Static Routing Protocol)í•˜ëŠ” ë°©ë²•ê³¼ ìŠ¤ìŠ¤ë¡œ ê·œì¹™ì— ë”°ë¼ í•™ìŠµì„ í†µí•´ ìµœì  ê²½ë¡œë¥¼ ì°¾ëŠ” ë°©ë²•(Dynamic Routing Protocol)ì´ ìˆë‹¤.\n\nê° Routing Protocolì„ ì•Œì•„ë³´ê¸° ì´ì „ì— ê¸°ë³¸ì ìœ¼ë¡œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì›ì¹™ì„ ë”°ë¼ì•¼ í•œë‹¤.\n\n1. Longest match Rule : Subnet maskê°€ ê¸´ Protocolì„ ìš°ì„ ì‹œí•œë‹¤.\n2. AD(Administrative Distance) : Protocolê°„ì˜ ìš°ì„  ìˆœìœ„ì— ë”°ë¼ì„œ ìš°ì„  ì ìš©í•œë‹¤. ëŒ€ê²Œ Static Routingì´ Dynamic Routingë³´ë‹¤ ìš°ì„ ì‹œë˜ì–´ì§„ë‹¤.\n3. *Spanning Tree Protocolì— ê¸°ë°˜í•˜ì—¬ ë¨¼ì €, Topology ë‚´ì— Loopë¥¼ ì œê±°í•´ì•¼ í•œë‹¤.\n\n### STP(Spanning Tree Protocol)\n\n2ê³„ì¸µ Protocolë¡œ Collision Domain ë‚´ë¶€ì—ì„œ Broadcast Stormì„ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œ Loopë¥¼ ë§‰ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.\n\nGraph í˜•íƒœë¡œ êµ¬ì„±ëœ Network ì¥ë¹„ ê°„ì˜ ì—°ê²°ì„ Tree í˜•íƒœë¡œ ì¬êµ¬ì„± í•´ì£¼ë©´, Loopë¥¼ í•´ê²°í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ, íŠ¹ì • Portë¥¼ Blockí•˜ê±°ë‚˜ Trafficì´ ì˜¤ê°€ëŠ” ê²ƒì„ ë§‰ëŠ” ë“±ì˜ ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.\n\nì„¤ëª…í•˜ê¸° ì•ì„œ ê¸°ë³¸ì ì¸ ìš©ì–´ë¥¼ ë¨¼ì € ì •ì˜í•´ì•¼ í•œë‹¤.\n\n1. Root Switch  \n   Treeë¥¼ êµ¬ì„±í•  ë•Œ, ì–´ë–¤ Switchë¥¼ rootë¡œ í•  ê²ƒì¸ì§€ì— ëŒ€í•œ ê²°ì •\n2. Root / Designated / Alternated Port  \n   Root Switchë¡œ ì„ íƒë˜ì§€ ëª»í•œ ëª¨ë“  ì¥ë¹„ë“¤ì€ Root Switchë¡œ ì—°ê²°ë˜ëŠ” portë¥¼ ì„ ì •í•´ì•¼ í•œë‹¤. ì´ë¥¼ Root Portë¼ê³  í•˜ê³ , ê·¸ ë°˜ëŒ€ ë°©í–¥ì— í•´ë‹¹í•˜ëŠ” Designated Portë¥¼ ì„ ì •í•œë‹¤. ê·¸ë¦¬ê³ , ì´ ë‘˜ì— í¬í•¨ë˜ì§€ ì•ŠëŠ” PortëŠ” Alternated Portë¡œ ë¶„ë¥˜ë˜ì–´ì„œ ì¼ë°˜ í†µì‹  ì‹œì—ëŠ” Blockë˜ì–´ ì‚¬ìš©ì´ ì°¨ë‹¨ëœë‹¤. ì—¬ê¸°ì„œ Root Portê°€ ëœë‹¤ëŠ” ê²ƒì€ í•´ë‹¹ Portë¡œ ë‚´ë³´ë‚´ë©´ ê²°êµ­ì—ëŠ” ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆë‹¤ëŠ” í™•ì‹ ì„ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\n\nì´ì œ Root Switchì™€ ê° Portë¥¼ ë¶„ë¥˜í•˜ê¸° ìœ„í•œ BPDU(Bridge Protocol Data Unit)ì„ ì•Œì•„ì•¼ í•œë‹¤. ì´ëŠ” Spanning Treeë¥¼ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ ì‹¤ì œë¡œ ê° Switchê°€ ì£¼ê³  ë°›ëŠ” Frameìœ¼ë¡œ, Switchì— ì—°ê²°ëœ ëª¨ë“  Portì—ì„œ ì „ì†¡ ë˜ëŠ” ìˆ˜ì‹ ëœë‹¤. ì´ˆê¸° Configurationì„ ìˆ˜í–‰í•˜ê±°ë‚˜ Network ìƒíƒœê°€ ë°”ë€Œì—ˆì„ ë•Œ, ì¬í•©ì˜ ê³¼ì •ì„ ìˆ˜í–‰í•  ë•Œ ì´ Data Unitì„ ê° Switch ê°„ì— ì „ì†¡í•œë‹¤. ì´ë•Œ í¬í•¨ë˜ëŠ” ê°€ì¥ ì¤‘ìš”í•œ ì •ë³´ê°€ **Bridge ID**ì´ë‹¤. ì´ëŠ” í•´ë‹¹ Switchì˜ `VLAN ë²ˆí˜¸`, `MAC address`, `ì„ì˜ì˜ ê°’`ì— ì˜í•´ì„œ ê²°ì •ëœë‹¤. ì—¬ê¸°ì„œ **Bridge ID**ê°€ ê°€ì¥ ë‚®ì€ Switchê°€ Root Switchê°€ ëœë‹¤. ì´ê²ƒì´ ì™„ë£Œë˜ë©´ ì´ì œ ê° Switchì˜ ê° Portë¥¼ ì‹ë³„í•˜ëŠ” ê³¼ì •ì„ ê±°ì³ì•¼ í•œë‹¤. ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. Bridge IDê°€ ì‘ì€ Switchë¶€í„° Root Switchê¹Œì§€ì˜ ê±°ë¦¬ê°€ ê°€ì¥ ì§§ì€ PortëŠ” Root Portê°€ ëœë‹¤. ë§Œì•½ ë™ì¼í•˜ë‹¤ë©´ Bridge ID, Port IDë¥¼ ë¹„êµí•˜ì—¬ ì„ íƒí•œë‹¤.\n2. í•˜ë‚˜ì˜ `Segment`(Switchê°„ì˜ ì—°ê²°)ì— ë°˜ë“œì‹œ í•˜ë‚˜ì˜ Designated Portê°€ ì¡´ì¬í•˜ë„ë¡ í•œë‹¤. ì¦‰, ë‘ ê°œì˜ Switchê°€ ì—°ê²°ë˜ì—ˆê³ , í•œ Switchì—ì„œ íŠ¹ì • Portë¥¼ Root Portë¡œ ì •í–ˆë‹¤ë©´, ë‹¤ë¥¸ Switchì—ì„œëŠ” ì´ì™€ ì—°ê²°ëœ Portë¥¼ Designatedë¡œ ì§€ì •í•´ì•¼ í•œë‹¤.\n3. ì–´ë– í•œ Portë„ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´, ë‚¨ëŠ” Portë¥¼ Designated Portë¡œ ì§€ì •í•˜ê³ , ì´ ë°˜ëŒ€ PortëŠ” Alternated Portë¡œ ì§€ì •í•œë‹¤.\n\nì´ ê³¼ì •ì´ ëë‚˜ë©´, ì´ì œ ê° PortëŠ” 5ê°€ì§€ ìƒíƒœë¡œ ë¶„ë¥˜ë˜ì–´ì§„ë‹¤.\n\n1. Listening State(ì²­ì·¨)  \n   Switchê°€ ìµœì´ˆì— ì „ì›ì´ ì¼œì§€ë©´, ëª¨ë“  PortëŠ” Listening ìƒíƒœì— ë“¤ì–´ê°„ë‹¤. ê·¸ë¦¬ê³ , í•´ë‹¹ Portê°€ ë§Œì•½ Alternated Portë¡œ ì§€ì •ëœë‹¤ë©´, ì´ëŠ” Block Stateë¡œ ë³€ê²½ëœë‹¤. ê·¸ë ‡ì§€ ì•Šê³  Root/Designated Portë¡œ ì§€ì •ëœë‹¤ë©´, 15ì´ˆ ì •ë„ì˜ ì—¬ìœ ë¥¼ ë‘ê³  Learning Stateë¡œ ë³€ê²½ëœë‹¤.\n2. Learning State(í•™ìŠµ)  \n   ì „ì†¡ì„ ìˆ˜í–‰í•˜ê¸° ì´ì „ì—, ì—°ê²°ëœ Switchë“¤ì˜ MAC addressë¥¼ í•™ìŠµí•˜ëŠ” ë‹¨ê³„ì´ë‹¤. í•´ë‹¹ ë‹¨ê³„ê°€ 15ì´ˆ ì§€ì†ëœ ë’¤ì—, Forwarding Stateë¡œ ë„˜ì–´ê°„ë‹¤. ì´ ê³¼ì •ì—ì„œ ê°‘ìê¸° Portê°€ Alternated Portë¡œ ë³€ê²½ëœë‹¤ë©´, ì´ ë˜í•œ Block Stateë¡œ ë°”ë¡œ ë„˜ì–´ê°„ë‹¤.\n3. Forwarding State(ì „ì†¡)  \n   ì‹¤ì œë¡œ Dataë¥¼ ì „ì†¡í•˜ëŠ” ë‹¨ê³„ì´ë‹¤. ì´ë•Œì—ëŠ” ì‹¤ì œë¡œ ê° ì¥ì¹˜ ê°„ì— ë°ì´í„°ê°€ ì´ë™í•  ìˆ˜ ìˆë‹¤.\n4. Blocking State(ì°¨ë‹¨)  \n   ì´ ìƒíƒœì—ì„œë„ í•´ë‹¹ Portê°€ Root/Designated Portê°€ ë  ìˆ˜ ìˆë‹¤. ê·¸ëŸ´ ê²½ìš° Listening Stateë¡œ ë³€ê²½ë˜ê³ , í†µì‹  ì¤€ë¹„ë¥¼ í•œë‹¤.\n5. Disable State(ë¹„í™œì„±)  \n   í•´ë‹¹ Portê°€ ê³ ì¥ ë˜ëŠ” ë¹„ì—°ê²° ë“±ìœ¼ë¡œ ë¹„í™œì„±í™”ë˜ì–´ ìˆëŠ” ìƒíƒœì´ë‹¤.\n\nì´ë ‡ê²Œ ê²°êµ­ì€ Forwarding Stateì— ë„ë‹¬í•˜ê²Œ ë˜ì—ˆì„ ë•Œ ì‹¤ì œë¡œ ë°ì´í„°ë¥¼ ì£¼ê³  ë°›ëŠ” ê²ƒì´ ê°€ëŠ¥í•´ì§€ê²Œ ëœë‹¤. ì¤‘ê°„ì— ì—°ê²°ì´ ëŠê¸°ë”ë¼ë„ ìœ ê¸°ì ìœ¼ë¡œ ê³„ì†í•´ì„œ BPDUë¥¼ ì£¼ê³  ë°›ìœ¼ë©´ì„œ Root/Designated/Alternated Portë¡œ ì—­í• ì´ ê³„ì†í•´ì„œ ë°”ë€Œë©´ì„œ, ì§€ì†ì ì¸ ì—°ê²°ì„ ì¶”êµ¬í•œë‹¤. í•˜ì§€ë§Œ, ì´ í•©ì˜ ê³¼ì •ì´ ìƒê°ë³´ë‹¤ ê¸¸ê¸° ë•Œë¬¸ì—(Block -> Forwarding 45ì´ˆ ì†Œìš”) ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ RSTP, MSTP, SPB ì™€ ê°™ì€ ë°©ë²•ë¡ ë„ ìˆë‹¤.\n\n### Static Routing Protocol\n\ndataì˜ Routeë¥¼ ì‚¬ì „ì— ê´€ë¦¬ìê°€ ì§ì ‘ ì •ì˜í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ëŠ” ì¸í„°ë„· ê°€ì…ì êµ¬ê°„ì—ì„œ ì„¤ì • ì‹œì— ì‚¬ìš©í•˜ë©°, ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ Default Gateway ë“±ì„ ì§€ì •í•˜ëŠ” ê³¼ì •ì´ë‹¤. ì¥ì• ê°€ ë°œìƒí•˜ë”ë¼ë„ ê³„ì†í•´ì„œ ë™ì¼í•œ ê³³ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ê¸° ë•Œë¬¸ì— ì¥ì• ì— ëŒ€í•œ ì±…ì„ì€ ì˜¨ì „íˆ ì„¤ì •ì„ ìˆ˜í–‰í•œ ê´€ë¦¬ìì—ê²Œ ë‹¬ë ¤ìˆë‹¤. ASì— ìƒê´€ì—†ì´ ê° Routerì—ì„œ ì§ì ‘ì ìœ¼ë¡œ ë‹¤ìŒ Linkë¥¼ ì„ íƒí•˜ê¸° ë•Œë¬¸ì— ASì— ìƒê´€ì—†ì´ ë™ì¼í•˜ê²Œ ì„¤ì •í•œë‹¤.\n\n### Dynamic Routing Protocol\n\nRouterê°€ ì‹¤í–‰ ì¤‘ì— ê³„ì†í•´ì„œ ì¥ì• ì— ëŒ€ì‘í•˜ë©´ì„œ, ê°€ìš©ì„± ë†’ì€ Routingì„ ì œê³µí•˜ê¸° ìœ„í•´ì„œ ê²½ë¡œë¥¼ ìµœì í™”í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ëŠ” ASì— ë”°ë¼ì„œ ì„¤ì • ë°©ë²•ì´ ìƒì´í•˜ê¸° ë•Œë¬¸ì— ì´ì— ë”°ë¼ì„œ ë¶„ë¥˜í•œë‹¤.\n\n- **Interior(IGP)** : AS ë‚´ë¶€ì—ì„œì˜ Routing Protocolì´ë©°, Linkì˜ ìƒíƒœë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ”ì§€ hop ìˆ˜(ì¤‘ê°„ Routerì˜ ìˆ˜)ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ”ì§€ì— ë”°ë¼ì„œ ë‘ ê°€ì§€ ì¢…ë¥˜ë¡œ ë‚˜ëˆ„ì–´ì§„ë‹¤.\n  - **Distance Vector**  \n    Distance(Router ê°„ì˜ Hop ìˆ˜)ì™€ Vector(ë°©í–¥)ë§Œì„ ê³ ë ¤í•˜ì—¬ Routing Tableì„ êµ¬ì„±í•œë‹¤. ì¸ê·¼ Routerì— ì˜í•´ì„œ ë°›ì€ ì •ë³´ë¥¼ í†µí•´ì„œ êµ¬ì„±í•˜ê²Œ ë˜ë©°, Linkì˜ Bandwidth, í˜„ì¬ ìƒíƒœë¥¼ ì•Œì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— ìµœì í™”ì™€ëŠ” ê±°ë¦¬ê°€ ë©€ë‹¤. ì‹¬ì§€ì–´ëŠ” ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ëŒì•„ê°€ëŠ” í˜„ìƒë„ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì¢…ë¥˜ëŠ” ëŒ€í‘œì ìœ¼ë¡œ ì•„ë˜ ë‘ ê°€ì§€ê°€ ìˆë‹¤.\n    1. **RIP(Routing Information Protocol)**  \n       ìµœì´ˆì˜ Dynamic Routing Protocolë¡œ ê° Routerê°„ì˜ Hop ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ Distanceë¥¼ ì¶”ì •í•œë‹¤. ì†Œê·œëª¨ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì¶•í•  ë•ŒëŠ” ë§¤ìš° ê°„ë‹¨í•˜ê²Œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, Hop ìˆ˜ ë§Œì„ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ë³µì¡í•œ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì—ëŠ” ì ì ˆì¹˜ ì•Šë‹¤. ë˜í•œ, 30ì´ˆ ë‹¨ìœ„ë¡œ ì—…ë°ì´íŠ¸ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì—, ë¹ ë¥¸ ì¥ì•  íšŒë³µì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. ë˜í•œ, ìµœëŒ€ Hop ìˆ˜ë¥¼ 15ë¡œ ì œí•œí•˜ì˜€ê³ , ê·¸ ì´ìƒì€ Networkê°€ ì—°ê²°ë˜ì§€ ì•Šì•˜ë‹¤ê³  ì¸ì‹í•œë‹¤. versionì€ 1,2ê°€ ì¡´ì¬í•˜ê³ , 2 ì—­ì‹œ 1ê³¼ ëŒ€ë™ì†Œì´ í•œë‹¤.\n    2. **IGRP(Interior Gateway Routing Protocol)**  \n      RIPì™€ ìœ ì‚¬í•˜ê³ , ê¸°ì¡´ 90ì´ˆ ë‹¨ìœ„ë¡œ Routing Tableì„ ê°±ì‹ í•˜ë©°, Hop ìˆ˜ë¥¼ 255ê¹Œì§€ í™•ì¥í•˜ì˜€ë‹¤.\n  - **Link State**  \n    Link(í†µì‹ ì„ ) ìƒíƒœ ì—­ì‹œ ê³ ë ¤í•˜ëŠ” Protocolì´ë‹¤. ë‹¨ìˆœí•œ ê¸°ê¸° ê°„ì˜ ê±°ë¦¬ ë¿ë§Œ ì•„ë‹ˆë¼ bandwidth ë“±ê³¼ ê°™ì€ ì •ë³´ë„ í™œìš©í•œë‹¤. ë˜í•œ Network ì „ì²´ì˜ ì •ë³´ë¥¼ í¬í•¨í•˜ê³  ìˆë‹¤. ì¦‰, **Routing Tableì˜ í¬ê¸°ê°€ êµ‰ì¥íˆ ì»¤ì§ˆ ìˆ˜ ìˆë‹¤. ì´ëŠ” Routerì˜ Memory ì†Œëª¨ì™€ CPU ì†Œëª¨ë¥¼ ê¸‰ê²©í•˜ê²Œ ëŠ˜ë¦°ë‹¤.** ë˜í•œ, Routing Tableì„ ë™ì¼í•˜ê²Œ ìœ ì§€í•´ì£¼ëŠ” Convergence(ì´ê²ƒì´ ì œëŒ€ë¡œ ìˆ˜í–‰ë˜ì§€ ì•Šìœ¼ë©´ í†µì‹  ì‹¤íŒ¨ê°€ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.)ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ ì†Œëª¨ë˜ëŠ” ì‹œê°„ì¸ `Convergence Time`ì´ ê³¼ë„í•˜ê²Œ ì»¤ì§ˆ ìˆ˜ë„ ìˆë‹¤. ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ëŠ” ê²ƒì´ í•´ë‹¹ Link State ë°©ì‹ì˜ ì£¼ìš” ëª©í‘œì´ë‹¤.\n    1. **OSPF(Open Shortest Path First)**  \n      Networkë¥¼ Areaë¼ëŠ” ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ê³ , ê° Areaì—ì„œëŠ” í•´ë‹¹ Areaì— í•´ë‹¹í•˜ëŠ” Routing Tableì„ ë³´ê´€í•˜ê²Œ í•˜ì—¬ ì „ì²´ Routing Tableì˜ í¬ê¸°ë¥¼ ì¤„ì¸ ë°©ì‹ì´ë‹¤. ê°™ì€ Area ë‚´ì—ì„œëŠ” ëª¨ë“  Routerê°€ ë™ì¼í•œ Routing Tableì„ ì†Œì§€í•œë‹¤. ë§Œì•½, ë‘ ê°œ ì´ìƒì˜ Areaì— ì†í•œë‹¤ë©´, í•´ë‹¹ RouterëŠ” ë‘ ê°œì˜ Routing Tableì„ ì†Œì§€í•˜ê²Œ ëœë‹¤. Areaê°€ í•˜ë‚˜ì¼ ê²½ìš°ì—ëŠ” ì„ì˜ì˜ Area Noì„ ì‚¬ìš©í•´ë„ ìƒê´€ì´ ì—†ì§€ë§Œ, Areaê°€ ì—¬ëŸ¬ ê°œì¼ ê²½ìš°ì—ëŠ” Area 0ì´ ë°˜ë“œì‹œ ì¡´ì¬í•´ì•¼ í•˜ë©°, í•´ë‹¹ Area 0ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ Topologyê°€ êµ¬ì„±ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ê°€ì¥ ëŒ€ì¤‘ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ëŠ” Routing Protocolë¡œ IGP ë‚´ì—ì„œëŠ” Conversionce Timeì´ ì§§ê³  íš¨ìœ¨ì ì´ë‹¤. ìµœë‹¨ ê±°ë¦¬ë¥¼ ì°¾ì„ ë•Œì—ëŠ” Dijkstra Algorithmì„ í™œìš©í•˜ì—¬ ìµœë‹¨ê±°ë¦¬ë¥¼ íƒìƒ‰í•œë‹¤.\n    2. **ISIS(Intermediate System - Intermediate System)**  \n       Intermediate Systemì€ Routerë¥¼ ì˜ë¯¸í•˜ë©°, ê°™ì€ Areaì— ì†í•˜ëŠ” Routerê°„ì˜ Routing Tableì„ ê³µìœ í•˜ëŠ” ê°œë…ìœ¼ë¡œ Routerë¥¼ ì´ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆˆë‹¤. í•˜ë‚˜ëŠ” ì—¬ëŸ¬ Areaì— ê±¸ì³ ìˆëŠ” Level 2, í•˜ë‚˜ì˜ Areaì— ì†í•˜ëŠ” Level 1ì´ë‹¤. ëŒ€ê²Œ ëª¨ë“  Routerê°€ Level 2ì— ì†í•˜ê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ í° Routing Tableì„ ê°€ì§€ê²Œ ëœë‹¤. Routing Tableì´ ì»¤ì§ˆ ìˆ˜ ìˆì§€ë§Œ Conversionce Timeì´ ì¤„ì–´ë“¤ê³ , Backbornì„ Area 0ìœ¼ë¡œ ì œí•œí•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— OSPFë³´ë‹¤ ë” ìœ ì—°í•œ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ë¥¼ êµ¬ì¶•í•  ìˆ˜ ìˆë‹¤.\n  - **Hybrid**\n    - **EIGRP(Enhanced Interior Gateway Routing Protocol)**  \n      Hop ìˆ˜ë¥¼ 256ê°œë¡œ ëŠ˜ë¦¬ê³ , ì£¼ê¸° ì—†ì´ Network í™˜ê²½ì´ ë³€í™”ë˜ë©´ ë°”ë¡œ ì ìš©ë˜ë„ë¡ ë°”ê¾¸ì—ˆë‹¤. ë˜í•œ, Hop ìˆ˜ ì™¸ì—ë„ Bandwidth, Delay, Load, MTU ë“±ì„ ì¶”ê°€ì ìœ¼ë¡œ ê³„ì‚°í•˜ì—¬ Link State ì—­ì‹œ í™œìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n- **Exterior(EGP)**  \n  ë‚˜ë‰˜ì–´ì§„ AS ê°„ì˜ í†µì‹ ì„ ì§€ì›í•˜ê¸° ìœ„í•œ ë°©ë²•ì´ë‹¤.\n  - **BGP(Border Gateway Protocol)**  \n    ì„œë¡œ ë‹¤ë¥¸ ASë¥¼ ì—°ê²°í•˜ëŠ” Protocolë¡œ TCPì— ê¸°ë°˜í•˜ë©°, IGPì™€ ê°™ì´ ì—°ë™í•˜ì—¬ ì „ì²´ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•  ìˆ˜ë„ ìˆê³ , ìì²´ì ìœ¼ë¡œ ì •ì˜í•œ Interior BGPë¥¼ í™œìš©í•˜ì—¬ BGPë§Œìœ¼ë¡œ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, BGPëŠ” iBGP(interior BGP), eBGP(exterior BGP)ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. BGPëŠ” ì—¬íƒ€ IGPë“¤ê³¼ëŠ” ë‹¤ë¥´ê²Œ ASê°„ì˜ Routingì„ ì¤‘ê³„í•˜ê¸° ë•Œë¬¸ì— Routing Tableì˜ í¬ê¸°ê°€ ë§¤ìš° í¬ê³ , ì´ì— ëŒ€í•œ ì²˜ë¦¬ì— íŠ¹í™”ë˜ì–´ìˆë‹¤. í•˜ì§€ë§Œ, ëŒ€ê²Œ BGPë¼ê³  í•˜ë©´ eBGPë¥¼ ì˜ë¯¸í•œë‹¤. íŠ¹ì´í•˜ê²Œ BGPëŠ” ê¸°ì¡´ì˜ Link Stateë‚˜ Hop ìˆ˜ì— ê¸°ë°˜í•˜ì§€ ì•Šê³  Attribute(Hop, Bandwidth, ACL, Weight ë“±)ë¼ëŠ” ê²ƒì„ ë³„ë„ë¡œ í™œìš©í•œë‹¤. Dynamic Routing ë°©ì‹ì´ì§€ë§Œ, ê° Linkì— ëŒ€í•œ ì •ë³´ëŠ” ì•ì—ì„œ ì–¸ê¸‰í•œ Attributeë¥¼ ì´ìš©í•˜ì—¬ ìˆ˜ë™ìœ¼ë¡œ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ, BGPëŠ” Broken Gateway Protocolì´ë¼ëŠ” ë³„ëª…ì´ ìˆì„ ì •ë„ë¡œ í˜„ì¬ ë§ì€ ë¬¸ì œë¥¼ ì•¼ê¸°í•˜ê³  ìˆë‹¤. BGP Tableì˜ í¬ê¸°ê°€ 102.4ë§Œ ê°œë¥¼ ì´ˆê³¼í•  ì‹œì— ì¼ë¶€ Routerì˜ Memoryê°€ ë¶€ì¡±í•´ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. í˜„ì¬ í•´ë‹¹ í¬ê¸°ì— ë„ë‹¬ ì‹œì ì„ 2023ë…„ ë§ ì •ë„ë¡œ ì˜ˆì¸¡í•˜ê³  ìˆë‹¤. ë˜í•œ, ì´ë ‡ê²Œ ì»¤ì§„ Tableì˜ í¬ê¸°ë¡œ ì¸í•´ Convergence Timeë„ êµ‰ì¥íˆ ë§ì´ ì†Œëª¨í•˜ê³  ìˆë‹¤.(ì™„ì „ ìˆ˜ë ´ê¹Œì§€ 15ë¶„ ì†Œìš”)\n\n## Reference\n\n- Thumbnail : Photo by [Nick Seagrave](https://unsplash.com/@seagrave?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/route?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"routing","date":"2022-05-30 12:28","title":"Routing","category":"Network","tags":["Routing","RIP","EIGRP","OSPF","BGP","ISIS"],"desc":"Routingì€ ìš°ë¦¬ê°€ ì£¼ê³  ë°›ê³ ì í•˜ëŠ” ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ê¸° ìœ„í•´ì„œ ëª©ì ì§€ë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” ê³¼ì •ì´ë‹¤. ì–´ë–»ê²Œ í•´ì„œ IPë¥¼ í†µí•´ì„œ ëª©ì ì§€ë¥¼ ì°¾ì•„ ë°ì´í„°ê°€ ì´ë™í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/routing-hero.jpg"},{"content":"\n## Intro\n\nSDN(Software Defined Network)ì€ ê¸°ì¡´ì— Hardwareë‹¨ì— ê²°í•©ë˜ì–´ ìˆë˜ ê°ì¢… Routing, Forwarding ë°©ì‹ì„ ë³„ë„ì˜ Controllerë¥¼ í†µí•´ì„œ ì œì–´í•˜ëŠ” ë°©ì‹ì„ ì œì‹œí•œ ê²ƒì´ë‹¤. í˜„ì¬ ì´ëŸ¬í•œ ê¸°ìˆ ì— ëŒ€í•œ ì—°êµ¬ê°€ ê¾¸ì¤€íˆ ì´ë£¨ì–´ì§€ê³  ìˆëŠ”ë°, ì´ìœ ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ê¸°ì¡´ì˜ Network êµ¬ì„± ë°©ì‹ì˜ ë¬¸ì œì ì„ ë¨¼ì € ì§šì–´ë³´ì.\n\n## Internetì˜ ë¬¸ì œ\n\n> **Traffic ê³¼ì¦ê°€**\n\nTrafficì˜ ë§¤ë…„ 20% ì´ìƒìœ¼ë¡œ êµ‰ì¥íˆ ê°€íŒŒë¥´ê²Œ ì„±ì¥í•˜ê³  ìˆë‹¤. ì´ê²ƒ ìì²´ë„ ë¬¸ì œê°€ ë  ìˆ˜ ìˆì§€ë§Œ, ì´ë¡œ ì¸í•œ ë¬¸ì œê°€ ë” í° ë¬¸ì œê°€ ë˜ê³  ìˆë‹¤.\n\n> **í†µì‹ ì‚¬ì—…ìì˜ ê³ ë¯¼**\n\nê³„ì†í•´ì„œ ëŠ˜ì–´ë‚˜ëŠ” traffic ëŒ€ë¹„ ìˆ˜ìµì˜ ì •ì²´ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì¦‰, ì¦ê°€í•˜ëŠ” trafficì„ ìˆ˜ìš©í•˜ê¸° ìœ„í•œ link, switch ë“±ì˜ íˆ¬ì ë¹„ìš©ì€ ê³„ì†í•´ì„œ ìš”êµ¬ë˜ëŠ” í•œí¸ ì‹ ê·œ ê°€ì…ì ìˆ˜ëŠ” ê±°ì˜ ì¡´ì¬í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— í†µì‹ ì‚¬ì—…ìê°€ ê°€ì ¸ê°€ëŠ” ìˆ˜ìµì€ í˜„ì¬ ë§¤ìš° ì •ì²´ë˜ì–´ìˆë‹¤. ë°˜ë©´ì— ëŠ˜ì–´ë‚œ trafficì— ëŒ€í•œ ì´ë“ì€ ê³ ìŠ¤ë€íˆ ëŒ€ê·œëª¨ service ì—…ì²´ì—ì„œ ê°€ì ¸ê°€ê³  ìˆë‹¤. (ex. Google, Netflix, etc..)\n\nì´ëŸ¬í•œ ê´€ì ì—ì„œ í†µì‹ ì‚¬ì—…ìì™€ ì„œë¹„ìŠ¤ ì‚¬ì—…ì ê°„ì˜ ì•„ë˜ì™€ ê°™ì€ ëŒ€ë¦½ì´ ê³„ì†ë˜ê³  ìˆë‹¤.\n\n- ê³µì •ì„±(Fairity) : traffic ì¦ê°€ëŠ” ì„œë¹„ìŠ¤ ì‚¬ì—…ìë„ ê°™ì´ ë¶€ë‹´í•˜ì.\n- ë§ì¤‘ë¦½ì„±(Neutrality) : traffic ì¦ê°€ëŠ” ì„œë¹„ìŠ¤ ì‚¬ì—…ìê°€ ìƒê´€í•  ì˜ì—­ì´ ì•„ë‹ˆë‹¤.\n\n> **ëŠë¦° í‘œì¤€í™”**\n\ní‘œì¤€í™”ë¼ëŠ” ì ˆì°¨ëŠ” í˜¸í™˜ì„± ê²€ì‚¬ ë° ì„±ëŠ¥ í™•ì¸ ë“±ì„ ê±°ì¹˜ë©´ì„œ êµ‰ì¥íˆ ë§ì€ ì‹œê°„ì„ ìš”êµ¬í•œë‹¤. í•˜ì§€ë§Œ, ì‹ ê¸°ìˆ ì€ ê³„ì†í•´ì„œ ìŸì•„ì§€ê³  ìˆê¸° ë•Œë¬¸ì— í‘œì¤€í™”ê°€ ì´ ì†ë„ë¥¼ ëª»ë”°ë¼ê°€ê³  ìˆëŠ” ê²ƒì´ ì‹¤í™©ì´ë‹¤. ì´ë¥¼ ì‹¤ì œ ìƒìš©ì—ì„œ ì ìš©í•˜ëŠ” ê²ƒ ì—­ì‹œ ë” ë§ì€ ì‹œê°„ì´ ë“¤ê²Œ ë  ìˆ˜ ìˆë‹¤.\n\n> **Vender ì˜ì¡´ì„±**\n\ní†µì‹  ì¥ë¹„(Switch, Router, Ethernet, etc...)ë¥¼ ì œì‘í•˜ëŠ” Vender(Cisco, Juniper, etc...)ê°€ ë§Œë“  platformì— ì˜ì¡´í•˜ëŠ” ì„¤ì • ë°©ë²•ì´ í˜¼ë€ì„ ì•¼ê¸°í–ˆë‹¤. ì¦‰, ê° venderë§ˆë‹¤ ë‹¤ë¥¸ ì‹œìŠ¤í…œê³¼ configuration ë°©ë²•ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì— human errorë¥¼ ì•¼ê¸°í•  ê°€ëŠ¥ì„±ì´ ë†’ì•˜ë‹¤.\n\në˜í•œ, Switch/Routerì˜ ë™ì‘ì„ ì œì–´í•˜ëŠ” ê²ƒì´ í•´ë‹¹ venderê°€ ì œê³µí•˜ëŠ” APIì— ì œí•œë˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©ìê°€ Programmingì„ í†µí•´ Routingì„ ì œì–´í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í–ˆë‹¤. ê·¸ë ‡ê¸°ì— ì‹ ê¸°ìˆ ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ì„ ë¿ë§Œ ì•„ë‹ˆë¼ Venderì—ì„œ í•´ë‹¹ ì‹ ê¸°ìˆ ì„ ì ìš©í•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ëŠ” ìˆ˜ ë°–ì— ì—†ì—ˆë‹¤.\n\n> **Router/Switchì˜ ë³µì¡ë„ ì¦ê°€**\n\ntrafficì˜ ì¦ê°€ë§Œí¼ Router, Switchì˜ ì„±ëŠ¥ì ì¸ í–¥ìƒ ë° ì–‘ì  ì¦ê°€ëŠ” ë§ì€ ë¬¸ì œë¥¼ ì•¼ê¸°í•˜ê³  ìˆë‹¤. ë¨¼ì €, ì„±ëŠ¥ì„ ë§Œì¡±í•˜ê¸° ìœ„í•˜ì—¬ ì ì  ê°€ê²©ì´ ê¸‰ê²©í•˜ê²Œ ìƒìŠ¹í•˜ê³  ìˆë‹¤. ì–‘ì ìœ¼ë¡œì˜ ì¦ê°€ëŠ” ê²°êµ­ Routing Tableì˜ í¬ê¸°ë¥¼ í¬ê²Œ ì¦ê°€ì‹œí‚¤ê³  ìˆë‹¤. ì´ëŠ” Table Lookup, Convergence Time ì¦ê°€ë¥¼ ì•¼ê¸°í•œë‹¤.\n\n> **ì´ˆê¸° ì¸í„°ë„·ì˜ êµ¬ì¡°ì  ë¬¸ì œ**\n\nì´ˆê¸° ì¸í„°ë„·ì¸ ARPANETì€ ì„¤ê³„ ìì²´ê°€ ì ˆëŒ€ ì—°ê²°ì´ ëŠê¸°ì§€ ì•ŠëŠ”(autonomous, Best Effort) Networkë¥¼ ì¶”êµ¬í–ˆë‹¤. ê·¸ë ‡ê¸°ì— ì‚¬ëŒì— ì˜í•œ ê°œì…ì´ ì‰½ì§€ ì•Šê³ , í†µì œê°€ ì–´ë ¤ìš´ êµ¬ì¡°ì´ë‹¤. ë”°ë¼ì„œ, ê° ì¥ë¹„ì—ê²Œ ë¶€ì—¬ë˜ëŠ” ì±…ì„ì´ ì»¤ì¡Œë‹¤.\n\n> **TCP/IP ê¸°ë°˜ì˜ ìˆ˜ ë§ì€ Protocol**\n\nì§€ì—°ë³´ë‹¤ëŠ” ì—°ê²°ì— ì´ˆì ì„ ë§ì¶˜ ì•ˆì „í•œ TCP/IP ê¸°ë°˜ì˜ í†µì‹ ì€ Networkì˜ ì„±ëŠ¥ë©´ì—ì„œ ë§ì€ ì–´ë ¤ì›€ì„ ê²ªê³  ìˆë‹¤. ë¬¼ë¡  ìƒˆë¡œìš´ TCP ë°©ì‹ë„ ì œì‹œë˜ê³  ìˆì§€ë§Œ, ì´ë¥¼ êµì²´í•˜ëŠ” ê²ƒì€ ì „ì²´ Networkë¥¼ ë³€ê²½í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ë§ê¸°ì— ì´ì— ëŒ€í•œ êµì²´ëŠ” ì‚¬ì‹¤ìƒ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  ê°„ì£¼ë˜ê³  ìˆë‹¤(í˜¸í™˜ì„± ë¬¸ì œ). ë˜í•œ, IoT ë””ë°”ì´ìŠ¤ì—ì„œëŠ” í•´ë‹¹ TCP/IPê°€ ë‹¤ì†Œ ë¬´ê±°ìš´ êµ¬í˜„ì´ê¸°ì— ì´ë¥¼ í¬í•¨í•  ìˆ˜ ì—†ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ë”°ë¼ì„œ, ë³„ë„ì˜ Protocolì„ ì§€ì›í•˜ëŠ” ì‹œìŠ¤í…œì´ í•„ìš”í•˜ë‹¤.\n\n### ìš”ì•½\n\nì¦‰, Trafficì€ ê³„ì†í•´ì„œ ì¦ê°€í•˜ê³  ìˆëŠ”ë°, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì‹ ê¸°ìˆ ë“¤ì€ ê³„ì†í•´ì„œ ì ìš©ì´ ëŠë ¤ì§€ê³  ìˆìœ¼ë©°, Venderë“¤ ë§ˆë‹¤ ë‹¤ë¥¸ í‘œì¤€ìœ¼ë¡œ ì¸í•´ ë„ˆë¬´ë‚˜ ë³µì¡í•œ ë„¤íŠ¸ì›Œí¬ êµ¬ì„±ì€ ìš´ì˜ë¹„ìš©ì˜ ìµœì í™”ê°€ ì–´ë µê³ , ìœ ì—°í•œ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ë¥¼ ë§Œë“œëŠ”ë° êµ‰ì¥í•œ ë¶€ë‹´ìœ¼ë¡œ ë‹¤ê°€ì™”ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•  ë°©ë²•ì´ í•„ìš”í•´ì¡Œë‹¤.\n\n## SDN\n\nìœ„ì—ì„œ ì œì‹œí•œ ë¬¸ì œë“¤ì€ ê²°êµ­ ê° Switch/Routerì™€ ê°™ì€ Hardware ì¥ì¹˜ì— Softwareê°€ ê·€ì†ë˜ì–´ì„œ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ, Switch/RouterëŠ” ë‹¨ì§€ Hardwareì˜ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë„ë¡í•˜ê³ , SoftwareëŠ” ìµœì†Œí•œì˜ ê¸°ëŠ¥ë§Œì„ ë‚¨ê¸´ í›„ ì´ë“¤ì´ ìˆ˜í–‰í•˜ëŠ” Forwarding/Routing ë“±ì˜ ë™ì‘ì„ ë³„ë„ì˜ Generic Computerì— Controllerë¼ëŠ” ì—­í• ì„ ë¶€ì—¬í•˜ê³ , ì´ Controllerì— ì˜í•´ì„œ Forwarding/Routingì„ ì œì–´í•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•œ Networkë¥¼ í†µí•´ì„œ ê¸°ì¡´ ë¬¸ì œë¥¼ í•´ê²°í•˜ìëŠ” ê²ƒì´ë‹¤.\n\nì´ë¥¼ í†µí•´ì„œ, ê²°êµ­ ê° ì¥ì¹˜ë“¤ì€ Routingì´ ì–´ë–»ê²Œ ì •í•´ì¡ŒëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì€ ì•Œì§€ ëª»í•œë‹¤. í•˜ì§€ë§Œ, Hardwareì ìœ¼ë¡œ packetì˜ ì…ë ¥ì„ ë°›ì„ ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ Controllerë¡œë¶€í„° ì–´ë””ë¡œ packetì„ forwarding í•´ì•¼í• ì§€ì— ëŒ€í•œ ì •ë³´ëŠ” ì•Œê³  ìˆê³ , ì´ì— ë”°ë¼ packetì„ ë‚´ë³´ë‚´ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ì „ì²´ ë„¤íŠ¸ì›Œí¬ê°€ Controllerë¥¼ ë¶„ë¦¬í•¨ìœ¼ë¡œì¨ ì¶”ìƒí™”ê°€ ë˜ëŠ” ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ì¶”ìƒí™”ì˜ ì¥ì ì€ ê²°êµ­ ìœ ì—°í•œ ë„¤íŠ¸ì›Œí¬ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nì´ê²ƒì´ SDNì´ ì¶”êµ¬í•˜ëŠ” ì‚¬ìƒì´ë‹¤. ì´ê²ƒì„ ê°€ëŠ¥í•˜ê²Œ í•œ ê²ƒì´ OpenFlowì˜ ë“±ì¥ì´ë‹¤. OpenFlowì— ëŒ€í•œ ì„¤ëª…ì€ ë³„ë„ì˜ [Posting](/posts/openflow)ì—ì„œ ë‹¤ë£¬ë‹¤.\n\n### Googleì˜ SDN í™œìš© ì‚¬ë¡€\n\n> **ë¬¸ì œ ìƒí™©**\n\nGoogleì—ì„œëŠ” ë§¤ë…„ 40\\~45%ì˜ Trafficì˜ ì¦ê°€ê°€ ë°œìƒí•˜ì˜€ë‹¤. ì´ë¥¼ ëŒ€ë¹„í•˜ê¸° ìœ„í•´ì„œ, Googleì—ì„œ ì „ìš© í•´ì € ì¼€ì´ë¸”ì„ ì„¤ì¹˜í•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Googleì˜ ê° DataCenter ê°„ì˜ ì—°ê²° í’ˆì§ˆì„ ì˜¬ë¦¬ê³  ì‹¶ì—ˆë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œë¡œ DataCenterê°„ì˜ í†µì‹ ì—ëŠ” 30\\~40% ìˆ˜ì¤€ìœ¼ë¡œë§Œ ì¼€ì´ë¸”ì„ ì‚¬ìš©í–ˆë‹¤. ê¸°ì¡´ì˜ Routingìœ¼ë¡œ DataCenterê°„ ì„œë¹„ìŠ¤ì˜ Trafficì„ ì ì ˆí•˜ê²Œ ë¶„ë°°í•˜ê³  ì‹¶ì—ˆì§€ë§Œ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ì—ˆë‹¤.\n\n> **í•´ê²°ì±…**\n\nìì²´ ê°œë°œí•œ OpenFlow Protocolì„ ì§€ì›í•˜ëŠ” Switchë¥¼ ê°œë°œí•˜ì—¬, ì´ë¥¼ ì´ìš©í•˜ì—¬, ë‹¤ìŒê³¼ ê°™ì€ ì„œë¹„ìŠ¤ì— weightë¥¼ ë¶€ì—¬í•˜ì—¬ ì ì ˆí•˜ê²Œ trafficì„ ë¶„ë°°í•˜ì˜€ë‹¤.\n\n- User data copy : ê° ë°ì´í„° ì„¼í„°ê°„ì˜ e-mail, video ë“±ì˜ íŒŒì¼ ë™ê¸°í™”\n- ê²€ìƒ‰ì–´ rankingì„ ìœ„í•œ ë°ì´í„° copy\n- Datacenterê°„ ìƒíƒœ ë™ê¸°í™”\n\ní•´ë‹¹ serviceì—ì„œ ë°œìƒí•˜ëŠ” trafficì„ ì ì ˆí•˜ê²Œ weightë¥¼ ë¶€ê³¼í•˜ì—¬ SDNì„ í™œìš©í•˜ì—¬ ë¶„ë°°í•˜ì—¬ ê²°êµ­ Datacenterê°„ì˜ í†µì‹ ì—ì„œ ê´‘ì¼€ì´ë¸” í™œìš©ë¥ ì´ 90%ê¹Œì§€ ìƒìŠ¹í–ˆë‹¤.\n\n### ì£¼ìš” OpenSource\n\nSDN êµ¬ì¶•ì— ë§ì´ í™œìš©ë˜ëŠ” ì£¼ìš” OpenSourceë¥¼ ì •ë¦¬í•œë‹¤. ê·¸ì „ì—, OpenSourceì˜ êµ¬ì„± í˜•íƒœë¥¼ ì•Œì•„ë³¼ í•„ìš”ê°€ ìˆë‹¤. ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¡œ ê° OpenSourceë¥¼ êµ¬ë¶„í•˜ì—¬ ì‚´í´ë³¼ ìˆ˜ ìˆë‹¤.\n\n![SDN Architecture](/images/sdn-arch.jpeg)\n\n- North : ì‹¤ì œ SDN Controllerì™€ communicationì„ í†µí•´ SDN configurationì„ ë³€ê²½í•œë‹¤ë˜ê°€ GUIë¡œ í˜„ì¬ ìƒíƒœë¥¼ ì²´í¬í•˜ëŠ” ë“±ì˜ ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n- North Bound Interface : SDN Controllerì™€ communicationì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” Protocolì´ë‹¤.\n- SDN Controller : ì‹¤ì œ SDNì—ì„œ Routingì„ ì œì–´í•  Controller\n- South Bound Interface : SDN Controllerì™€ Network Nodeë“¤(ì‹¤ì œ ë˜ëŠ” ê°€ìƒ Switch)ê³¼ì˜ communicationì„ ê°€ëŠ¥í•˜ê²Œ í•˜ëŠ” Protocolì´ë‹¤.\n- South : Physical / Virtual Switch\n\nê° OpenSourceì— ëŒ€í•´ì„œëŠ” ìì„¸íˆ ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤. ì„¸ë¶€ì ìœ¼ë¡œëŠ” ì‹œê°„ì´ ì£¼ì–´ì§€ë©´ í•˜ë‚˜ì”© í•´ë‚˜ê°ˆ ìƒê°ì´ë‹¤.\n\n> **ONOS**\n\nìœ„ì—ì„œ ì„¤ëª…í•œ ì˜ì—­ì—ì„œ North, North Bound Interface, SDN Controllerì˜ ì—­í• ì„ ëª¨ë‘ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” Open Sourceì´ë‹¤.\n\nOpen Network Operating Systemì˜ ì•½ìë¡œ, ONFì—ì„œ ê´€ë¦¬í•˜ë©° SDN Controllerë¥¼ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤. ì´ë¥¼ í†µí•´ì„œ, ìœ ì—°í•˜ê³  ì•ˆì •ì ì¸ Network Serviceë¥¼ êµ¬ì¶•í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. ìœ ì—°í•˜ë‹¤ëŠ” ê²ƒì€ ê°„ë‹¨í•œ programì„ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” interfaceë¥¼ ì œê³µí•˜ë©°, ë„¤íŠ¸ì›Œí¬ ìƒíƒœë¥¼ ì •ì˜í•˜ê³ , ì´ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•œë‹¤. ì•ˆì •ì ì´ë‹¤ì˜ ê¸°ì¤€ì„ ONOSì—ì„œëŠ” 99.999 % Availabilityë¥¼ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.\n\në³¸ ëª©ì ì€ Controllerë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ì§€ë§Œ, REST API(NIB)ì—ì„œë¶€í„° Webì„ í†µí•œ Dashboard GUI(North)ì™€ CLI(North)ë¥¼ ì œê³µí•˜ê³  ìˆë‹¤. ë˜í•œ, ë‚´ë¶€ì ìœ¼ë¡œ OpenFlowì˜ ë™ì‘ì„ ì¶”ìƒí™”í•˜ì—¬\n\n[ğŸ”— ê³µì‹ ì‚¬ì´íŠ¸](https://wiki.onosproject.org/display/ONOS/ONOS)\n\n> **Open DayLight**\n\nONOSì™€ ê°€ì¥ ë§ì´ ë¹„êµë˜ì–´ì§€ëŠ” OpenSourceë¡œ ë§ˆì°¬ê°€ì§€ë¡œ North, North Bound Interface, Controller ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤.\n\nCiscoì™€ Network Venderë¥¼ ëª¨ì•„ì„œ, ONOSë¥¼ ê²¬ì œí•˜ê¸° ìœ„í•´ì„œ ì´ˆê¸°ì— ì‹œì‘ëœ Projectë¡œ ONOSëŠ” SDN Controllerì— ì¢€ ë” ì§‘ì¤‘í•˜ëŠ” í•œí¸, Open DayLightëŠ” SDN ì‹œìŠ¤í…œì„ êµ¬ì¶•í•˜ëŠ” í™˜ê²½ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ê°•ì¡°í•œë‹¤. ë˜í•œ, Venderì— ì˜í•´ì„œ ê´€ë¦¬ë˜ê¸° ë•Œë¬¸ì— ONOSì™€ ë¹„êµí•˜ì˜€ì„ ë•Œ, SBIê°€ ì¼€ì´ë¸”tv ë° IoT Protocolê¹Œì§€ í™•ì¥ë˜ì—ˆë‹¤. ìì„¸íˆëŠ” ì•„ë˜ í‘œë¥¼ í†µí•´ì„œ ì‚´í´ë³´ë„ë¡ í•˜ì.\n\n|                 | ONOS                    | Open DayLight            | ë¹„ê³                     |\n| :-------------- | :---------------------- | :----------------------- | :---------------------- |\n| ë¼ì´ì„ ìŠ¤        | Apache 2.0              | Eclipse Public License   |                         |\n| ê°œë°œì          | ì œí•œ ì—†ìŒ               | Vender                   |                         |\n| SBI ì§€ì›        | ì—¬ëŸ¬ SBI ì§€ì›           | ONOSë³´ë‹¤ ë‹¤ì–‘í•œ SBI ì§€ì› |                         |\n| ì£¼ìš” ê³ ê°       | í†µì‹  ë° í´ë¼ìš°ë“œ ì‚¬ì—…ì | ë°ì´í„° ì„¼í„°              |                         |\n| ë³´ì•ˆì„±          | ì•½í•¨                    | ì¤‘ê°„                     | ì•„ì§ ëª¨ë‘ ë³´ì™„ì„±ì´ ë‚®ìŒ |\n| OpenFlow í˜¸í™˜ì„± | 1.0 ~ 1.5               | 1.0 ~ 1.3                | ONF í‘œì¤€                |\n| P4              | ì§€ì›                    | ì§€ì›                     |                         |\n| Network ê°€ìƒí™”  | ì§€ì›                    | ì§€ì›                     |                         |\n\n[ğŸ”— ê³µì‹ ì‚¬ì´íŠ¸](https://www.opendaylight.org)\n\n> **ONAP**\n\nONAPì€ Open Network Automation Platformì˜ ì•½ìë¡œ SDNì˜ Life Cycleì„ ê´€ë¦¬í•˜ëŠ” ë„êµ¬ë¡œ ì´í•´í•˜ë©´ ì‰½ë‹¤. ìœ„ì˜ ì œì‹œí•œ Controllerë¡œ ë¶€í„° ê° ê°ì˜ Switchì— ì´ë¥´ëŠ” ì¥ì¹˜ë“¤ì˜ ìƒíƒœë¥¼ í™•ì¸í•˜ê³ , ì ì ˆí•˜ê²Œ orchestrationí•˜ëŠ” ë„êµ¬ì´ë‹¤. ì´ëŠ” AT&Tì˜ ECOMP projectì™€ ì¤‘êµ­ ë„¤íŠ¸ì›Œí¬ë¥¼ ìœ„í•œ Open-Oê°€ ê²°í•©í•˜ì—¬ Opensourceí™”ë¥¼ ì§„í–‰í•œ í”„ë¡œì íŠ¸ì´ë‹¤.\n\n[ğŸ”— ê³µì‹ ì‚¬ì´íŠ¸](https://www.onap.org)\n\n> **P4**\n\nProgrammable, Protocol-Independant Packet Processorì˜ ì•½ìë¡œ ê¸°ì¡´ì˜ ì œí•œëœ ê¸°ëŠ¥ë§Œ ìˆ˜í–‰í•˜ë˜ Fixed Function Switchë¥¼ í•„ìš”ì— ë”°ë¼ ê¸°ëŠ¥ì„ ë‹¤ë¥´ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆëŠ” Programmable Switchë¡œ ëŒ€ì²´í•˜ê³ , P4ë¥¼ ì´ìš©í•˜ì—¬ programmingí•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. í˜„ì¬ì—ëŠ” Switch ë‚´ë¶€ì˜ Packet Forwardingê³¼ Access Control ê¸°ëŠ¥ ê°œë°œìš©ìœ¼ë¡œ íŠ¹í™”ëœ ìƒíƒœì´ë‹¤. ì•„ì§ê¹Œì§€ëŠ” Queueì˜ Schedulingê³¼ ê°™ì€ ê¸°ëŠ¥ì€ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n[ğŸ”— ê³µì‹ ì‚¬ì´íŠ¸](https://p4.org)\n\n> **DPDK**\n\nê³ ì„±ëŠ¥ packet ì²˜ë¦¬ë¥¼ ìœ„í•œ Libraryì™€ Driverì˜ ì§‘í•©ì´ë‹¤. Virtual Switchì˜ ê°€ì¥ í° ë¬¸ì œëŠ” OS Kernelì„ í†µê³¼í•˜ë©´ì„œ ë°œìƒí•˜ëŠ” Overheadì´ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, DPDKì—ì„œëŠ” Kernelì„ í†µê³¼í•˜ì—¬ ìˆ˜í–‰í•˜ëŠ” Kernel bypassë¼ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•œë‹¤. ì´ë¥¼ í†µí•´ì„œ Packet ì²˜ë¦¬ë¥¼ ê°€ì†í™”í•˜ì˜€ë‹¤.\n\n[ğŸ”— ê³µì‹ ì‚¬ì´íŠ¸](https://www.dpdk.org)\n\n> **FD.io**\n\nDPDKì™€ ë§ˆì°¬ê°€ì§€ë¡œ packet ì „ì†¡ì˜ ê°€ì†í™”ë¥¼ ëª©í‘œë¡œ í•œë‹¤. ê¸°ì¡´ í•˜ë‚˜ì˜ Packetì„ ë³´ë‚¼ ë•Œ, ê·¸ë˜í”„ ì—°ì‚°ì´ ëë‚  ë•Œê¹Œì§€ ë‹¤ìŒ packetì´ ë¬´ê¸°í•œ ê¸°ë‹¤ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•˜ê³ ì ë³‘ë ¬ ë˜ëŠ” ë™ì¼ ëª©ì ì§€ packetì„ ë¹ ë¥´ê²Œ ì‹ë³„í•˜ì—¬ packet ì „ì†¡ì„ ìµœì í™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.\n\n[ğŸ”— ê³µì‹ ì‚¬ì´íŠ¸](https://fd.io)\n\n> **OpenStack**\n\nOpenStackì€ ë²”ìš© Cloudë¥¼ êµ¬ì¶•í•˜ëŠ” Solutionì„ ì œê³µí•œë‹¤. ì¦‰, ì—¬ëŸ¬ Nodeë¥¼ ê°€ì§„ ì‚¬ìš©ìë¼ë©´, ì—¬íƒ€ Vender(AWS, GCP)ë¥¼ ì´ìš©í•˜ì§€ ì•Šê³ , Cloud í™˜ê²½ì„ êµ¬ì¶•í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ì´ë¥¼ í†µí•´ì„œ êµ¬ì¶•í•œ Cloudì— Controllerë¥¼ êµ¬ì„±í•˜ê³  SDNë¥¼ ì œê³µí•˜ëŠ” ê²½ìš°ë„ ë§ë‹¤.\n\n[ğŸ”— ê³µì‹ ì‚¬ì´íŠ¸](https://openstack.org)\n\n### ì£¼ìš” SBI\n\nSouth Bound Interfaceë€ ì‹¤ì œë¡œ Switchì™€ Controllerê°€ ì–´ë–»ê²Œ communicationì„ ìˆ˜í–‰í•  ê²ƒì¸ì§€ì— ëŒ€í•œ Protocolì„ ì˜ë¯¸í•œë‹¤. í˜„ì¬ ì‚¬ì‹¤ìƒ í‘œì¤€ì´ë¼ê³  ì—¬ê²¨ì§€ëŠ” Protocolì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n> **OpenFlow**\n\nì• ì„œ ê³„ì†í•´ì„œ ì„¤ëª…í•´ì™”ê¸°ì— ìƒëµí•œë‹¤.\n\n> **NetConf**\n\nNetwork ì¥ë¹„(Switch, Router)ì˜ Configurationì„ ìœ„í•œ Protocolë¡œ ê¸°ì¡´ Venderë§ˆë‹¤ ë‹¤ë¥´ë˜ Configuration ê³¼ì •ì„ ì´ë¥¼ í†µí•´ì„œ ê°„ëµí™”í•˜ê³ , ê¸°ì´ˆì ì¸ Programmingì„ í†µí•´ì„œ ì´ ê³¼ì •ì„ ìë™í™”í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n\n> **I2RS**\n\nOpenFlowë¥¼ í†µí•´ì„œ ê¸°ì¡´ Network ì¥ë¹„ì˜ ë°ì´í„° í‰ë©´ê³¼ ì œì–´ í‰ë©´ì˜ ì™„ì „ ì œê±°ì— ëŒ€í•œ ë°˜ë°œë¡œ ì¸í•´ ìƒê²¨ë‚˜ Protocolì´ë‹¤. ì´ëŠ” Ciscoì—ì„œ ë§Œë“¤ì–´ì¡Œìœ¼ë©°, ê¸°ì¡´ Switch/Routerì˜ ì œì–´ í‰ë©´ì„ ê·¸ëŒ€ë¡œ ìœ ì§€í•˜ë©´ì„œ ì™¸ë¶€ Controllerë¡œë¶€í„°ì˜ ì œì–´ë¥¼ ì¼ë¶€ ìˆ˜ìš©í•˜ëŠ” í˜•íƒœì˜ Protocolì´ë‹¤.\n\n> **BGP-LS / PCE-P**\n\nSDN Controllerì™€ Network ìƒíƒœ ì •ë³´ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ ê°œë°œëœ Protocolì´ë‹¤.\n\n> **LISP**\n\nIPì— ì˜í•œ ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œì™€ ë‹¨ë§ê¸° ì£¼ì†Œê°€ ì™„ë²½í•˜ê²Œ êµ¬ë¶„ë˜ì§€ ì•ŠëŠ” ë¬¸ì œì— ì˜í•´ì„œ ë§Œë“¤ì–´ì¡Œë‹¤. ì¦‰, ë‹¨ë§ì´ ì´ë™ ì‹œì— ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œë¥¼ ì¬ì„¤ì •í•´ì£¼ëŠ” ë“±ì˜ ë²ˆê±°ë¡œì›€ì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤.ë”°ë¼ì„œ, IP headerì— LISP headerë¥¼ ì¶”ê°€í•˜ì—¬ ì‹¤ì œ ê¸°ê¸° ì£¼ì†Œì™€ ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œë¥¼ ì‹ë³„í•˜ëŠ” ì •ë³´ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒì´ í•µì‹¬ ì•„ì´ë””ì–´ì¸ Protocolì´ë‹¤.\n\n### ì£¼ìš” ì—°êµ¬ ë™í–¥\n\n> **1. CORD**\n\ní˜„ì¬ê¹Œì§€ëŠ” DataCenter, Cloudì— í•œì •ë˜ì–´ ìˆëŠ” SDNì˜ ì ìš©ì„ ì‹¤ì œ ì „í™”êµ­ ë° ê°€ì…ì í†µì‹  ì‹œì„¤ì˜ ê°€ìƒí™”ê¹Œì§€ ì´ì–´ê°€ê³ ì í•˜ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤. í˜„ì¬ í”„ë¡œì íŠ¸ëŠ” ì´ 4ê°œì˜ ì„¸ë¶€ í”„ë¡œì íŠ¸ë¡œ ë‚˜ë‰˜ì–´ì ¸ì„œ ì§„í–‰ì¤‘ì´ë‹¤.\n\n1. E-CORD : ê¸°ì—…ìš© ìµœì  ì¸í„°ë„· êµ¬ì„± ì‹œê°„ ë‹¨ì¶•\n2. R-CORD : ê´‘ê°€ì…ì ì„œë¹„ìŠ¤ ì¥ì¹˜ì˜ ê°€ìƒí™”\n3. A-CORD : ë°ì´í„° ìˆ˜ì§‘ ê¸°ëŠ¥ì„ í”„ë¡œê·¸ë˜ë° ê°€ëŠ¥í•˜ê²Œ êµ¬í˜„í•˜ì—¬ ì´ë¥¼ í†µí•œ ì œì–´ë¥¼ ëª©í‘œ\n4. M-CORD : 4G/5G ì¥ì¹˜ì˜ ê°€ìƒí™”\n\n> **2. Pronto Project**\n\në„¤íŠ¸ì›Œí¬ì˜ ëª¨ë“  ë™ì‘ì„ Monitoringí•˜ê³ , ì œì–´í•˜ëŠ” Deep Programmable Platformì„ êµ¬í˜„í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ ì‚¬ì—…ìê°€ ì œì–´ê¶Œì„ í™•ë³´í•˜ë„ë¡ í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤.\n\n## NFV\n\nSDNê³¼ ê°™ì´ ì–˜ê¸°ë˜ì–´ì§€ëŠ” NFV(Network Function Virtualization)ë„ ì‚´í´ë³´ê³ ì í•œë‹¤. ìœ„ì—ì„œ SDNì„ ì„¤ëª…í•˜ì˜€ì§€ë§Œ, ê²°êµ­ ì•„ì§ê¹Œì§€ëŠ” DataCenterë¥¼ ìš´ì˜í•˜ëŠ” ì„œë¹„ìŠ¤ ì‚¬ì—…ì ì§€í–¥ì ì´ë‹¤. ëŒ€ê²Œ ë‹«íŒ ë„¤íŠ¸ì›Œí¬ ë‚´ì—ì„œ ì‚¬ìš©ì´ ìš©ì´í•˜ë‹¤ëŠ” ê²ƒì¸ë°, ì´ëŠ” ë³´ì•ˆê³¼ ê´€ë ¨ëœ ë¶€ë¶„ë„ ë¶€ì¡±í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, í†µì‹  ì‚¬ì—…ìë“¤ì€ SDNì„ íš¨ê³¼ì ìœ¼ë¡œ êµ¬ì„±í•˜ê¸° ìœ„í•´ì„œ í†µì‹  ì¥ë¹„ì˜ í•˜ë“œì›¨ì–´ì™€ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ë¶„ë¦¬í•  ë°©ë²•ì„ ì°¾ì•„ì•¼ í–ˆë‹¤. ì—¬ê¸°ì„œ ë‚˜ì˜¨ ë°©ë²•ì´ Cloudë¥¼ í™œìš©í•˜ì—¬ ì†Œí”„íŠ¸ì›¨ì–´ ì˜ì—­ì„ Cloud ë‚´ë¶€ì—ì„œ êµ¬í˜„í•˜ê³ , í†µì‹  ì¥ë¹„ëŠ” ìµœì†Œí•œì˜ ì†Œí”„íŠ¸ì›¨ì–´ë§Œìœ¼ë¡œ êµ¬ì„±í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, Networkì˜ íŠ¹ì • ê¸°ëŠ¥ì„ ê°€ìƒí™”í•´ì„œ í•„ìš”ì— ë”°ë¼ ê° í•˜ë“œì›¨ì–´ ì¥ë¹„ê°€ ë¶ˆëŸ¬ì™€ ì‚¬ìš©í•œë‹¤ëŠ” ê°œë…ì´ë‹¤. ê²°êµ­ í†µì‹  ì‚¬ì—…ì ì…ì¥ì—ì„œëŠ” SDNì„ êµ¬ì¶•í•˜ê¸° ìœ„í•´ì„œëŠ” NFVì˜ êµ¬í˜„ì´ ìš°ì„ ì‹œë˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë˜ë©´, ë‹¹ì—°íˆ Softwareì˜ ìœ ì—°í•œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ê³ , ê° ì¥ì¹˜ì—ì„œ Softwareê¹Œì§€ ë¶€ë‹´í•´ì•¼ í•˜ëŠ” ë¹„ìš©ì´ ì¤„ê¸° ë•Œë¬¸ì— ì„¤ì¹˜ ë° ìš´ì˜ë¹„ìš©(CAPEX / OPEX)ì—ì„œ í° ì´ì ì„ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n## Reference\n\n- Thumbnail : Photo by [Nastya Dulhiier](https://unsplash.com/@dulhiier?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/network?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"sdn","date":"2022-05-25 09:00","title":"SDN","category":"Network","tags":["SDN","NFV","OpenFlow","ONOS","OpenDayLight","P4","DPDK","FD.io","OpenStack","CORD"],"desc":"SDN(Software Defined Network)ì€ ê¸°ì¡´ì— Hardwareë‹¨ì— ê²°í•©ë˜ì–´ ìˆë˜ ê°ì¢… Routing, Forwarding ë°©ì‹ì„ ë³„ë„ì˜ Controllerë¥¼ í†µí•´ì„œ ì œì–´í•˜ëŠ” ë°©ì‹ì„ ì œì‹œí•œ ê²ƒì´ë‹¤. í˜„ì¬ ì´ëŸ¬í•œ ê¸°ìˆ ì— ëŒ€í•œ ì—°êµ¬ê°€ ê¾¸ì¤€íˆ ì´ë£¨ì–´ì§€ê³  ìˆëŠ”ë°, ì´ìœ ë¥¼ ì•Œê¸° ìœ„í•´ì„œëŠ” ê¸°ì¡´ì˜ Network êµ¬ì„± ë°©ì‹ì˜ ë¬¸ì œì ì„ ë¨¼ì € ì§šì–´ë³´ì.","thumbnailSrc":"https://euidong.github.io/images/network-background.jpg"},{"content":"\n## Intro\n\nSDNì„ ì‹¤ì œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ì–´ë ¤ìš´ ì¼ì´ë‹¤. ë”°ë¼ì„œ, Mininetì„ í™œìš©í•˜ì—¬ ê°€ìƒì˜ Topologyë¥¼ í†µí•´ì„œ ë¨¼ì € í…ŒìŠ¤íŒ…ì„ í•œ í›„ì— ì‹¤ì œë¡œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ, í•´ë‹¹ Postingì—ì„œëŠ” `Mininet`, `OpenFlow`, `Open VSwitch`, `ONOS`ë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ Tutorialì„ ìˆ˜í–‰í•´ë³¼ ê²ƒì´ë‹¤. ì´ Postingì„ í†µí•´ì„œ ë‚¨ê¸°ê³ ì í•˜ëŠ” ê²ƒì€ SDNì„ í…ŒìŠ¤íŒ…í•˜ëŠ” ì ˆì°¨ë¥¼ ìµíˆëŠ” ê²ƒì´ë‹¤.\n\n## 0. Tools\n\në¨¼ì € ì‘ì„±ìì˜ ì‹¤í–‰í™˜ê²½ì€ MAC OS Xë¡œ ëŒ€ë¶€ë¶„ì˜ ì„¤ì •ì€ ëª¨ë‘ ë™ì¼í•˜ì§€ë§Œ `XTerminal`ì€ Window/MACì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— Window ì „ìš©ì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.\n\n- Host Machine\n  - Virtual Box : [ğŸ”— Download](https://www.virtualbox.org/wiki/Downloads) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.virtualbox.org/)\n    - VMì„ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•œ ë„êµ¬, OpenSourceì´ë©° ë¬´ë£Œì´ê¸° ë•Œë¬¸ì— ë§ì´ ì‚¬ìš©ëœë‹¤.(v6.1)\n  - Vagrant : [ğŸ”— Download](https://www.vagrantup.com/downloads) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.vagrantup.com/)\n    - Virtual Environment êµ¬ì¶•ì„ ìë™í™”í•˜ëŠ” ë„êµ¬(v2.2.19)\n  - XQuartz : [ğŸ”— Download](https://www.xquartz.org/releases/index.html) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.xquartz.org/)\n    - XTerminal ì‹œìŠ¤í…œìœ¼ë¡œ ì›ê²©ìœ¼ë¡œ Graphic ì‹œìŠ¤í…œì„ í˜¸ìŠ¤íŒ…í•˜ëŠ” ë„êµ¬ì´ë‹¤. ì¦‰, `ssh`ë¡œ ì ‘ì†í•œ ì‹œìŠ¤í…œì—ì„œ ì¶”ê°€ì ìœ¼ë¡œ terminalì„ ìƒì„±í•˜ê±°ë‚˜ GUIë¥¼ ìš”êµ¬í•˜ëŠ” applicationì„ ì‹¤í–‰ì‹œí‚¬ ë•Œ ì´ë¥¼ host machineì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.(v2.8.1)\n- Virtual Machine\n  - Mininet : [ğŸ”— Download](http://mininet.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](http://mininet.org/)\n    - Network Topologyë¥¼ ê°€ìƒìœ¼ë¡œ êµ¬ì„±í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì¶”ê°€ì ì¸ configuration / testingì´ ê°€ëŠ¥í•œ Virtual Environment Emulator(v2.3.0)\n  - OpenVSwitch : [ğŸ”— Download](https://www.openvswitch.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.openvswitch.org/)\n    - Virtual Switchë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” toolì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Virtual Machine ë‚´ë¶€ì—ì„œ Virtual Switchë¥¼ ê°€ë™ì‹œí‚¬ ìˆ˜ ìˆë‹¤.OpenFlow Protocolì— ê¸°ë°˜í•œ ë‹¤ì–‘í•œ APIë¥¼ ë‚´ì¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í†µí•´ì„œ Virtual Switchì˜ Configuration ë“±ê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.(v2.9.8)\n  - ONOS : [ğŸ”— Download](https://wiki.onosproject.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://wiki.onosproject.org/)\n    - Open Network Operation Systemìœ¼ë¡œ SDNì˜ Controller ì—­í• ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ WEB Interfaceë„ ì œê³µí•˜ë©°, ë‹¤ì–‘í•œ APIë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ìœ ìš©í•˜ë‹¤.(v2.5.7)\n\n## 1. Setup\n\nìœ„ì— ì œì‹œí•œ Toolì„ ëª¨ë‘ `Virtual Machine` ë‚´ë¶€ì— ì„¤ì¹˜í•´ì•¼í•˜ì§€ë§Œ, ìë™ìœ¼ë¡œ í•´ë‹¹ toolì„ ì„¤ì¹˜í•˜ëŠ” `Vagrantfile`ì„ ë§Œë“¤ì–´ë†“ì•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•´ë„ ì¢‹ì„ ê²ƒì´ë‹¤. í•´ë‹¹ VagrantFileë¡œ buildí•˜ë©´ ì‹œê°„ì´ êµ‰ì¥íˆ ì†Œìš”ë  ìˆ˜ ìˆë‹¤. (ì¸í„°ë„· ìƒíƒœì— ë”°ë¼ ì²œì°¨ë§Œë³„ì´ì§€ë§Œ, ëŒ€ëµ 20ë¶„?)\n\n```bash\n$ git clone https://github.com/euidong/virtual-sdn-boilerplate\n$ cd virtual-sdn-boilerplate\n$ vagrant up\n# ì ‘ì†\n$ vagrant ssh\n```\n\n> **Run ONOS**\n\n```bash\n# In Virtual Machine\n$ cd $ONOS_ROOT\n$ bazel run onos-local\n```\n\n## 2. Scenarioë¥¼ ì‘ì„±\n\nìš°ì„  ì–´ë–¤ ìƒí™©ì„ **emulation**í•  ê²ƒì¸ì§€ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ê³„íšì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë¨¼ì € êµ¬ìƒí•´ë³´ì. ì•„ë˜ ì˜ˆì‹œëŠ” ë‹¨ìˆœíˆ ë‚´ê°€ ìƒê°í•œ ì˜ˆì‹œì´ë¯€ë¡œ ì •í™•ì„±ì´ëŸ° ê²ƒì€ ìƒê°í•˜ê¸° ë³´ë‹¤ëŠ” íë¦„ë§Œì„ ìµí˜€ë³´ì.\n\n```plaintext\nğŸ’¡ Base Scenario\n\n1. í›„ì§€ì‚° ì¸ê·¼ì—ì„œ ê³„ì†í•´ì„œ í™”ì‚°í™œë™ì´ ê°ì§€ë˜ê³  ìˆë‹¤. ë˜í•œ, í›„ì§€ì‚°ì€ 100ë…„ ë‹¨ìœ„ë¡œ í­ë°œì„ í•´ì™”ëŠ”ë° ìµœê·¼ 170ì—¬ ë…„ ë™ì•ˆ í­ë°œì´ ì¡´ì¬í•˜ì§€ ì•Šê³  ìˆë‹¤. ì´ë¡œ ë¯¸ë£¨ì–´ë³´ì•˜ì„ ë•Œ í›„ì§€ì‚°ì˜ í™”ì‚°í­ë°œì€ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ì„ ê²ƒì´ë¼ê³  ì¶”ì¸¡í•  ìˆ˜ ìˆë‹¤.\n2. í›„ì§€ì‚°ì—ì„œ í­ë°œì´ ë°œìƒí•˜ëŠ”ì§€ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œ ê³³ê³³ì— ê´€ì¸¡ê¸°ê°€ í•„ìš”í•˜ë©°, ì´ë¥¼ ë¶„ì„í•  ì„¼í„°ê°€ ì•ˆì „ì„ ìœ„í•´ í›„ì§€ì‚° ì•„ë˜ì— ì¡´ì¬í•˜ë©° ë°±ì—… ì„œë²„ë¥¼ ë³„ë„ë¡œ ë‹¤ë¥¸ ê³µê°„ì— ë‘ê³  ìˆë‹¤.\n3. ê° ê´€ì¸¡ì†Œì—ì„œ ì„œë¡œ ê°„ ë°ì´í„° ê³µìœ ë„ ê³„ì†í•´ì„œ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí•˜ë‹¤. => Horizontal trafficì´ ë§ë‹¤ -> datacenterì™€ ìœ ì‚¬í•œ í˜•íƒœì˜ Network -> Spine-Leaf êµ¬ì¡°ê°€ ì ì ˆ.\n```\n\n## 3. Topology êµ¬ì„± with Mininet\n\në¨¼ì €, topologyë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œ `Mininet`ì„ í™œìš©í•œë‹¤. ì´ì— ëŒ€í•œ ê°œë… ì •ë¦¬ëŠ” [ğŸ”— Mininet](/posts/mininet)ì•  í•´ë‘ì—ˆë‹¤. Base Scenarioì˜ 3ë²ˆ ì‚¬í•­ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ìš°ë¦¬ì˜ TopologyëŠ” Spine-Leaf êµ¬ì¡°ë¥¼ ê°–ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë¨¼ì € í‘œí˜„í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n> **Source Code**\n\n- `/vagrant/example/mt-fuji/topo.py`\n\n```python\nfrom mininet.topo import Topo\n\nclass SpineLeaf(Topo):\n  def build(self):\n    s_num = 2\n    l_num = 5\n    h_num = 2\n    spines = []\n    leaves = []\n    hosts = []\n\n    for i in range(s_num):\n      spines.append(self.addSwitch('s%s%s' % (1, i+1)))\n    for i in range(l_num):\n      leaves.append(self.addSwitch('l%s%s' % (2, i+1)))\n      for j in range(s_num):\n        self.addLink(spines[j], leaves[i])\n      for j in range(h_num):\n        hosts.append(self.addHost('h%s%s' % (i+1, j+1)))\n        self.addLink(leaves[i], hosts[i * h_num + j])\n\ntopos = { 'spineleaf': (lambda: SpineLeaf()) }\n```\n\n- ì‹¤í–‰\n\n```bash\n$ sudo mn --mac --controller remote --switch ovs --custom /vagrant/example/mt-fuji/topo.py --topo=spineleaf\n```\n\n- ì‹¤í–‰ ê²°ê³¼\n  - ë¹¨ê°„ìƒ‰ : `Spine Switch`\n  - ì²­ë¡ìƒ‰ : `Leaf Switch`\n\n![Spine-Leaf Topology](/images/spine-leaf-topo.png)\n\n## 4. Test í™˜ê²½êµ¬ì¶•\n\nì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” Test í™˜ê²½ìš© ë„êµ¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. `ping` : íŠ¹ì • machine ê°„ì˜ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ë§ì´ ì‚¬ìš©ë˜ì–´ì§„ë‹¤.\n2. `trace` : `ping`ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ ì§€ë‚˜ì³ê°„ `hop`ì„ ëª¨ë‘ ì¡°íšŒ ê°€ëŠ¥í•˜ì—¬ ì¢€ ë” ì„¸ë¶€ì ì¸ ê²½ë¡œë¥¼ í™•ì¸í•  ë•Œ ìœ ìš©í•˜ë‹¤.\n3. `iperf` : clientì™€ server êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì§€ë©°, `tcp`, `udp` packetì„ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. íŠ¹ì • machineì—ì„œëŠ” `server`ë¡œ ì‹¤í–‰ì‹œí‚¤ê³ , ë‹¤ë¥¸ machineì—ì„œ í•´ë‹¹ `server`ë¡œ dataë¥¼ ë³´ë‚´ë„ë¡ í•  ìˆ˜ ìˆë‹¤. `ping`ë³´ë‹¤ ì£¼ê¸°ì ìœ¼ë¡œ, ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ê´€ì¸¡í•  ìˆ˜ ìˆë‹¤.\n4. `wireshark` : ì‹¤ì ¤ trafficì˜ ì´ë™ì„ GUIë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ë„êµ¬ì´ë‹¤.\n5. `ONOS WEB GUI` : ONOSì—ì„œëŠ” Webì„ í†µí•´ì„œ Network ìƒíƒœì™€ Trafficì„ ê´€ì¸¡í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\nì—¬ê¸°ì„œëŠ” `iperf`ë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³ , `ONOS WEB GUI`ë¥¼ í†µí•´ì„œ trafficì„ ê´€ì¸¡í•  ê²ƒì´ë‹¤.\n\nì•„ë˜ commandë¥¼ í†µí•´ì„œ `h51`ê°€ ìœ„ì—ì„œ ì–¸ê¸‰í•œ í›„ì§€ì‚° ì•„ë˜ì˜ ì„œë²„ê°€ ë˜ê³ , `h52`ê°€ ë°±ì—… ì„œë²„ê°€ ë˜ëŠ” ìƒí™©ì„ ê°€ì •í•˜ê¸° ìœ„í•´ì„œ í•´ë‹¹ ë‘ ìœ„ì¹˜ë¥¼ `iperf server`ë¡œ ì§€ì •í•œë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  ê´€ì¸¡ì†Œ(`h11`, `h12`, ..., `h41`, `h42`)ì—ì„œ `iperf client`ê°€ ë˜ì–´ trafficì„ ì£¼ê¸°ì ìœ¼ë¡œ ë³´ë‚´ë„ë¡ ì„¤ì •í•œë‹¤.\n\n```bash\nmininet> h51 iperf -s -u &\nmininet> h52 iperf -s -u &\n\n# xterm ëª…ë ¹ì–´ëŠ” hostì— ìœ„ì—ì„œ ì„¤ëª…í•œ XQuartzê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆì–´ì•¼ ì‘ë™í•œë‹¤.\nmininet> xterm h11 h12 h21 h22 h31 h32 h41 h42\n\n# ê° clientì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ìš”ì²­ì„ ì „ì†¡í•œë‹¤.\n$ iperf -u -c 10.0.0.9 -i1 -t100000000000\n```\n\n![ONOSì—ì„œ í™•ì¸í•œ ëª¨ìŠµ](/images/sdn-tuto-example-1.png)\n\n## 5. Flow Control\n\nê¸°ë³¸ì ìœ¼ë¡œ Flowë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì€ í•´ë‹¹ Settingì„ ìˆ˜í–‰í•¼ ë•Œ, 3ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.\n\n1. Open vSwitch CLI : OpenFlow Protocolì— ê¸°ë°˜í•œ ì—¬ëŸ¬ CLI ëª…ë ¹ì–´ë¥¼ ì§€ì›í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ, Flow Tableì„ ì§ì ‘ ì‘ì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n2. ONOS REST API : ONOS REST APIë¥¼ í†µí•´ì„œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤. ì´ë•Œì—ëŠ” ONOSê°€ high levelë¡œ ì¶”ìƒí™”í•œ flow control ë°©ì‹ì„ í™œìš©í•´ì•¼ í•œë‹¤.(ex. intent) ì´ëŠ” ONOSë¥¼ ì‹¤í–‰í•˜ê³  ìˆë‹¤ë©´, ë‹¤ìŒ urlì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. [http://localhost:8181/onos/v1/docs/](http://localhost:8181/onos/v1/docs/)\n3. ONOS CLI : ONOS CLI ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\nì´ì œë¶€í„° í•´ë‹¹ ì„¸ê°€ì§€ ë°©ì‹ì„ ì ì ˆíˆ í™œìš©í•˜ì—¬ ì„¤ì •í•˜ì—¬ ê° Simulation ë³„ë¡œ ìˆ˜í–‰ì„ í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n### Scenario 1\n\n> **ì¤‘ê°„ì— linkê°€ ëŠì–´ì§„ ê²½ìš° with ONOS CLI**\n\n![sdn-tuto-scenario-1](/images/sdn-tuto-scenario-1.png)\n\në¨¼ì € ëª¨ë“  hostì—ì„œ serverë¡œ trafficì„ ì¤‘ê³„í•´ì¤„ ìˆ˜ ìˆë„ë¡ ë‹¤ìŒê³¼ ê°™ì´ intentë¥¼ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤. íŠ¹ì • hostê°„ì˜ intentë¥¼ ì„¤ì •í•˜ë©´ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ ì°¾ì•„ì„œ routingì„ ìˆ˜í–‰í•´ì¤€ë‹¤. ë˜í•œ, íŠ¹ì • ì—°ê²°ì´ ì¤‘ê°„ì— ì‚¬ë¼ì ¸ë„ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ ì¬ì„¤ì •í•œë‹¤.\n\n```bash\nonos> add-host-intent 00:00:00:00:00:01/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:02/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:03/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:04/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:05/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:06/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:07/None 00:00:00:00:00:09/None\nonos> add-host-intent 00:00:00:00:00:08/None 00:00:00:00:00:09/None\n```\n\nì´ í›„ì— mininetì—ì„œ íŠ¹ì • linkë¥¼ ë¹„í™œì„±í™”ì‹œí‚¨ë‹¤.\n\n```bash\nmininet> link s11 l25 down\n```\n\n![sdn-tuto-scenario-1-result](/images/sdn-tuto-scenario-1-result.png)\n\n### Scenario 2\n\n> **Load Balancingì„ í†µí•´ì„œ ì¸¡ì • ë°ì´í„° ê³ ë¥´ê²Œ ë¶„ë°° with Open Vswitch CLI**\n\n![sdn-tuto-scenario-2](/images/sdn-tuto-scenario-2.png)\n\nì´ì „ Scenarioì˜ intentë¥¼ ìœ ì§€í•œ ìƒíƒœì—ì„œ OpenFlowì˜ Group Tableì˜ `select` typeì„ í™œìš©í•˜ë©´, Load Balancingì´ ê°€ëŠ¥í•˜ë‹¤. ë¨¼ì €, ONOS CLIì—ì„œ ì™¸ë¶€ flowRuleë„ ë°›ì•„ë“¤ì´ë„ë¡ ì„¤ì •í•œ í›„\n\n```bash\n$ onos localhost\nonos> cfg set org.onosproject.net.flow.impl.FlowRuleManager allowExtraneousRules True\n```\n\në‹¤ìŒê³¼ ê°™ì´ group entry ìƒì„± ë° flowì¶”ê°€ë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ sudo ovs-ofctl add-group l21 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l21 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l21 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l22 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l22 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l22 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l23 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l23 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l23 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l24 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l24 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l24 in_port=4,actions=group:1 -O OpenFlow11\n```\n\n![sdn-tuto-scenario-2-result](/images/sdn-tuto-scenario-2-result.png)\n\n### Scenario 3\n\n> **h51ì´ downë˜ì–´ h52ë¡œ traffic redirection with Open Vswitch CLI**\n\n![sdn-tuto-scenario-3](/images/sdn-tuto-scenario-3.png)\n\nserverë¡œ ê°€ëŠ” Leaf Switchì—ì„œ packetì˜ IP, MAC ì£¼ì†Œë¥¼ ë³€ê²½í•˜ì—¬ Redirectionì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ sudo ovs-ofctl add-flow l25 \\\n  \"in_port=1, dl_dst=00:00:00:00:00:09,\n   actions=mod_dl_dst:00:00:00:00:00:10,mod_nw_dst:10.0.0.10,output:4\"\n$ sudo ovs-ofctl ad-flow l25 \\\n  \"in_port=4, dl_src=00:00:00:00:00:10,\n   actions=mod_dl_src:00:00:00:00:00:09,mod_nw_dst:10.0.0.9,output:1\"\n```\n\n![sdn-tuto-scenario-3-result](/images/sdn-tuto-scenario-3-result.png)\n\n### Scenario 4\n\n> **Meterë¥¼ ì´ìš©í•´ì„œ ê´€ì¸¡ì†Œë¡œ ê°€ëŠ” ê³¼ë„í•œ traffic ì°¨ë‹¨ with ONOS REST API**\n\n![sdn-tuto-scenario-4](/images/sdn-tuto-scenario-4.png)\n\níŠ¹ì • Switchì—ì„œ íŠ¹ì • portë¡œ ë‚˜ê°€ëŠ” trafficì˜ ìµœëŒ€ê°’ì„ `500KB/s`ë¡œ ì œí•œí•˜ëŠ” ì˜ˆì‹œì´ë‹¤.\n\n- Meterë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ REST API  \n  **`/meters/of:000000000000000c`ë¡œ POST ìš”ì²­**\n\n```json\n{\n  \"deviceId\": \"of:000000000000000c\",\n  \"unit\": \"KB_PER_SEC\",\n  \"burst\": true,\n  \"bands\": [\n    {\n      \"type\": \"DROP\",\n      \"rate\": 500,\n      \"burstSize\": 0,\n      \"prec\": 0\n    }\n  ]\n}\n```\n\n- Meterë¥¼ íŠ¹ì • Switchì— ì ìš©í•˜ê¸° ìœ„í•œ REST API  \n  **`/flows/of:000000000000000c?appId=meter`ë¡œ POST ìš”ì²­**\n\n```json\n{\n  \"priority\": 40000,\n  \"isPermanent\": true,\n  \"deviceId\": \"of:000000000000000c\",\n  \"treatment\": {\n    \"instructions\": [\n      {\n        \"type\": \"METER\",\n        \"meterId\": \"1\"\n      },\n      {\n        \"type\": \"OUTPUT\",\n        \"port\": \"2\"\n      }\n    ]\n  },\n  \"selector\": {\n    \"criteria\": [\n      {\n        \"type\": \"ETH_TYPE\",\n        \"ethType\": \"0x0800\"\n      }\n    ]\n  }\n}\n```\n\n![sdn-tuto-scenario-4-result](/images/sdn-tuto-scenario-4-result.png)\n\n## Reference\n\n- Thumbnail : Photo by [Alina Grubnyak](https://unsplash.com/@alinnnaaaa?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/virtual-network?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"sdn-tutorial","date":"2022-06-03 19:54","title":"SDN Tutorial","category":"Network","tags":["SDN","Mininet","OpenFlow","ONOS","OpenVSwitch"],"desc":"SDNì„ ì‹¤ì œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ì–´ë ¤ìš´ ì¼ì´ë‹¤. ë”°ë¼ì„œ, Mininetì„ í™œìš©í•˜ì—¬ ê°€ìƒì˜ Topologyë¥¼ í†µí•´ì„œ ë¨¼ì € í…ŒìŠ¤íŒ…ì„ í•œ í›„ì— ì‹¤ì œë¡œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.ë”°ë¼ì„œ, í•´ë‹¹ Postingì—ì„œëŠ” Mininet, OpenFlow, Open VSwitch, ONOSë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ Tutorialì„ ìˆ˜í–‰í•´ë³¼ ê²ƒì´ë‹¤. ì´ Postingì„ í†µí•´ì„œ ë‚¨ê¸°ê³ ì í•˜ëŠ” ê²ƒì€ SDNì„ í…ŒìŠ¤íŒ…í•˜ëŠ” ì ˆì°¨ë¥¼ ìµíˆëŠ” ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/sdn-tuto-hero.jpg"},{"content":"\n## Intro\n\nSegment Routingì€ MPLSì˜ ì°¨ì„¸ëŒ€ ë²„ì „ìœ¼ë¡œ, ì´ˆê¸°ì—ëŠ” MPLSì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì œì‹œë˜ì—ˆë‹¤. ì˜ˆë¥¼ë“¤ë©´, TE(Traffic Engineering) ì‹œì— Star Topologyì—ì„œëŠ” íš¨ìœ¨ì´ ì•ˆë‚˜ì˜¨ë‹¤ë˜ì§€ ECMP(Trafficì„ ì—¬ëŸ¬ output interfaceë¡œ ë¶„ë°°ì‹œí‚¤ëŠ” ë°©ì‹)ì„ í™œìš©í•  ìˆ˜ ì—†ë‹¤ì™€ ê°™ì€ ì œí•œì„ í•´ê²°í•˜ê³ ì ë“±ì¥í•˜ì˜€ë‹¤. ê·¸ë ‡ì§€ë§Œ, í˜„ì¬ì— ì™€ì„œ ì™€ì„œ ë” ì¤‘ìš”ì‹œ ì—¬ê²¨ì§€ëŠ” ê²ƒì€ **ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ì˜ ë‹¨ìˆœí™”**ì´ë‹¤. ì¦‰, ê¸°ì¡´ì˜ ë³µì¡í•˜ë˜ Switchì˜ ì„¤ì • ë°©ë²•(í†µì‹ ì¥ë¹„ vender ë§ˆë‹¤ ë‹¤ë¥¸ ì„¤ì •ë²•, ì—¬ëŸ¬ Protocoldì´ ì¡´ì¬)ê³¼ ìš´ìš© ë°©ë²•ì„ í†µì¼í•˜ê³ , ë‹¨ìˆœí™” ì‹œí‚´ìœ¼ë¡œì¨ ì‚¬ëŒì— ì˜í•œ ì—ëŸ¬(Human Error)ë¥¼ ìµœì†Œí™”í•˜ê³ ì í•˜ëŠ” ë…¸ë ¥ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\n\n## ìš©ì–´\n\n- **Segment** : í•˜ë‚˜ì˜ pathê°€ ì—¬ëŸ¬ ê°œì˜ ì‘ì€ pathë“¤ë¡œ êµ¬ì„±ë˜ëŠ” ê²ƒì—ì„œ ìœ ë˜í•˜ì˜€ë‹¤ê³  ë³´ë©°, í•˜ë‚˜ì˜ ëª…ë ¹ì–´(instruction)ì„ segmentë¼ê³ ë„ ë¶€ë¥¸ë‹¤. ëª…ë ¹ì–´ëŠ” ì–´ë””ë¡œ ì „ë‹¬í•  ê²ƒì¸ê°€ì™€ packetì„ ì–´ë–»ê²Œ ë³€í˜•í•  ê²ƒì¸ê°€ì— ëŒ€í•œ ë‚´ìš©ì„ í¬í•¨í•œë‹¤.  \n  SegmentëŠ” SIDë¼ëŠ” idê°’ì„ í†µí•´ì„œ êµ¬ë¶„í•˜ë©°, ì´ëŠ” [0, 1,048,575] ê¹Œì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. íŠ¹ë³„í•œ ëª©ì ì„ ê°€ì§€ëŠ” [0, 15,000) ì˜ˆì•½ëœ SIDì´ê³ , [15,000 ~ 16,000)ëŠ” ì¸ì ‘í•œ egress Routerë¥¼ ê°€ë¥´í‚¤ëŠ”ë° ì‚¬ìš©í•˜ëŠ” `Adjacency SID`ì´ê³ , [16,000, 24,000)ëŠ” Segment Routingì´ ìœ íš¨í•œ ë²”ìœ„ ë‚´ì—ì„œ ê° Routerì— ì„ì˜ ì„¤ì •ì´ ê°€ëŠ¥í•œ ì˜ì—­ëŒ€ë¡œ `Prefix SID` ë¼ê³  ë¶€ë¥¸ë‹¤. ê·¸ ì™¸ì— ì˜ì—­ì€ ë™ì ìœ¼ë¡œ í• ë‹¹ë˜ëŠ” SIDë¡œ ìë™ í• ë‹¹ ì‹œì— ì‚¬ìš©ëœë‹¤. ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ **Adjacency SIDì™€ Prefix SIDë§Œ ìˆìœ¼ë©´, ëª¨ë“  ê²½ë¡œë¥¼ í‘œí˜„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.** ì¶”ê°€ì ìœ¼ë¡œ, SR Policyë¥¼ ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì€ ê²½ìš°ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ ìœ„í•´ì„œ SR Policy ìì²´ì— SIDë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒì´ BSID(Binding SID)ì´ë‹¤.  \n  ![SID-table](/images/sid-table.jpeg)\n- **Headend Router** : Segment Routing ì˜ì—­ìœ¼ë¡œ ë“¤ì–´ì˜¤ëŠ” Ingress Routerì´ë‹¤.\n\n## ë™ì‘ ì›ë¦¬\n\nSegment Routing ì˜ì—­ìœ¼ë¡œ Packetì´ ì§„ì…í•˜ë©´, í•´ë‹¹ packetì˜ Destinationê³¼ ë¶€ê°€ ì •ë³´ë¥¼ í™•ì¸í•˜ì—¬, SR Policy(=Segment List, ë°©ë¬¸í•´ì•¼í•  ê²½ë¡œë¥¼ ìˆœì„œëŒ€ë¡œ ë‚˜ì—´í•´ë†“ì€ ë¦¬ìŠ¤íŠ¸)ë¥¼ MPLS ë˜ëŠ” IPv6ì˜ ë¶€ê°€ ê³µê°„ì— ì‚½ì…í•œë‹¤. ì´ë•Œì—ëŠ” Stack í˜•íƒœë¡œ Listë¥¼ êµ¬ì„±í•˜ê³ , ì¤‘ê°„ Routerë“¤ì—ì„œëŠ” Segmentì— ë”°ë¼ì„œ ë™ì‘ì„ ìˆ˜í–‰í•˜ë©°, packetì„ ìµœì¢… Egress Routerê¹Œì§€ ì „ë‹¬í•œë‹¤. ì—¬ê¸°ì„œ ê° ê²½ë¡œëŠ” ëª¨ë“  ì„¸ì„¸í•œ ê²½ë¡œë¥¼ í‘œì‹œí•  í•„ìš”ëŠ” ì—†ë‹¤. ë§Œì•½ Aì—ì„œ Bë¡œ ê°€ëŠ” SIDë¥¼ ì„¤ì •í–ˆì–´ë„, ê·¸ ë‚´ë¶€ì—ì„œ ì–´ë–¤ ê²½ë¡œë¥¼ ì„ íƒí• ì§€ëŠ” Systemì ìœ¼ë¡œ ì•Œì•„ì„œ Routingí•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.(`Loose Source Routing`) Ingressì—ì„œ SR Policyë¥¼ ì§€ì •í•˜ë©´ ì´ë¥¼ `Push`ë¼ê³  í•˜ê³ , ë‚´ë¶€ RouterëŠ” ê°€ì¥ ì•„ë˜ Segmentë¥¼ í™•ì¸í•˜ê³  ìì‹ ê³¼ ê´€ë ¨ ìˆëŠ” ê²½ìš°ì—ëŠ” `Pop`ì„ ìˆ˜í–‰í•˜ì—¬ í•˜ë‚˜ì˜ Segmentë¥¼ ì‚­ì œ í›„ ì´ì— ë”°ë¼ ë™ì‘ì„ ìˆ˜í–‰í•˜ê³ , ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ì—°ê²°ëœ Linkë¡œ ê¸°ì¡´ BGPì— ë”°ë¼ ì•Œì•„ì„œ Routingì„ ìˆ˜í–‰í•œë‹¤. ì´ë¥¼ `Continue`ë¼ê³  í•œë‹¤.\n\n## Usecase\n\në‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ Routingì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤. ì•„ë˜ ì˜ˆì‹œì—ì„œëŠ” ëª¨ë‘ 1 -> 2 -> 3 -> 4 ìˆœìœ¼ë¡œ Routingì„ ìˆ˜í–‰í•˜ê¸°ë¥¼ ì›í•œë‹¤ê³  ìƒê°í•˜ì.\n\n`SID 16002`ì˜ ê²½ìš°ì—ëŠ” `1 -> 2`ë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ `1 -> 4 -> 3 -> 2` ë³´ë‹¤ IGP costê°€ ì ìœ¼ë¯€ë¡œ, `1 -> 2`ë¡œ ì›í•˜ëŠ”ëŒ€ë¡œ ì´ë™í•  ê²ƒì´ë¼ê³  ì˜ˆìƒí•  ìˆ˜ ìˆë‹¤.\nì´í›„ `SID 16004`ì˜ ê²½ìš°ì—ë„ `2 -> 3 -> 4`ë¡œ ì´ë™í•˜ëŠ” ê²ƒì´ `2 -> 1 -> 4`ë¡œ ì´ë™í•˜ëŠ” ê²ƒë³´ë‹¤ IGP costê°€ ì ìœ¼ë¯€ë¡œ, `2 -> 3 -> 4`ë¡œ ì›í•˜ëŠ”ëŒ€ë¡œ ì´ë™í•˜ëŠ” ê²ƒì„ ì˜ˆìƒí•  ìˆ˜ ìˆë‹¤.\n\n![sr example 1](/images/sr-example-1.jpeg)\n\ní•˜ì§€ë§Œ, IGP costê°€ ìš°ë¦¬ì˜ ë°”ë¨ê³¼ëŠ” ë‹¤ë¥¸ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í˜„ìƒì´ ë°œìƒí•  ìˆ˜ë„ ìˆë‹¤.\nì•„ë˜ì—ì„œ `SID 16004`ë¥¼ ë³´ë©´, `2 -> 1 -> 4`ê°€ `2 -> 3 -> 4`ë³´ë‹¤ IGP costê°€ ì ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ì›í•˜ëŠ” ë°©í–¥ê³¼ëŠ” ë°˜ëŒ€ë¡œ ë™ì‘í•  ê²ƒì„ì„ ì˜ˆìƒí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²½ë¡œë¥¼ ì±„íƒí•´ì•¼ í•œë‹¤.\n\n![sr example 2](/images/sr-example-2.jpeg)\n\nì—¬ê¸°ì„œëŠ” `1 -> 2 -> 3`ì´ `1 -> 4 -> 3`ë³´ë‹¤ í¬ê¸° ë•Œë¬¸ì— ì›í•˜ëŠ”ëŒ€ë¡œ `1 -> 2 -> 3`ìœ¼ë¡œ ì›€ì§ì¼ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ `3 -> 4`ë¡œ ê°€ëŠ” ê²½ë¡œê°€ ì–´ë ¤ìš¸ ìˆ˜ ìˆë‹¤. ì´ ê²½ìš°ì—ëŠ” ì• ì„œ ë³´ì•˜ë˜ Adjacency SIDë¥¼ í™œìš©í•˜ì—¬ì•¼ í•œë‹¤. ì´ëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ê°€ì•¼í•  egress Routerë¥¼ ì§€ì •í•˜ê¸° ë•Œë¬¸ì— routing ì‹œì— costingì„ ê³ ë ¤í•˜ì§€ ì•Šê³ , ë°”ë¡œ Static Routingì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í™œìš©í•˜ë©´ ìµœì¢…ìœ¼ë¡œ `3 -> 4`ë¡œ ê°€ëŠ” ê²½ë¡œë¥¼ íšë“í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n![sr example 3](/images/sr-example-3.jpeg)\n\n## Configuration\n\n- SR-MPLS : MPLSì™€ ê°™ì€ ë°©ì‹ì„ ì¶”êµ¬í•˜ì§€ë§Œ, ì„¤ì • ë°©ì‹ì—ì„œ LDPì™€ RSVPë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  IGPë¥¼ í™œìš©í•´ì„œ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ Protocolì„ ë‹¨ìˆœí™”í•˜ì˜€ë‹¤.  \n  Segment List(`SR Policy`)ë¥¼ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì´ MPLSì˜ Labelì„ ì „ë‹¬í•˜ëŠ” ë°©ì‹ê³¼ ìœ ì‚¬í•˜ë©°, ì§€ë‚˜ì•¼í•˜ëŠ” ê²½ë¡œë¥¼ ëª…ì‹œí•˜ì—¬ stack í˜•íƒœë¡œ ìŒ“ì•„ì„œ ì „ë‹¬í•˜ë©´, ê° ë‚´ë¶€ RouterëŠ” ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ì œê±° ë˜ëŠ” ìœ ì§€í•˜ë©°, Egress Routerë¥¼ ì°¾ëŠ”ë‹¤.\n- SRv6 : IGPì™€ IPv6 Protocolë§Œì„ í™œìš©í•˜ì—¬ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤. ë„¤íŠ¸ì›Œí¬ ìì²´ë¥¼ í”„ë¡œê·¸ë˜ë° í•˜ê³ ì í•˜ëŠ” ìš”êµ¬ ë•Œë¬¸ì— í•„ìš”ì„±ì´ ê°•ì¡°ë˜ì—ˆë‹¤. ì´ëŠ” IPv6ì˜ ì£¼ì†Œê°’ì¸ 128bitë¥¼ topologyë¥¼ ì‹ë³„í•  ì£¼ì†Œê°’ê³¼ packet ì²˜ë¦¬ë¥¼ ìœ„í•œ ê°’(íŠ¹ì • packetì—ê²ŒëŠ” ë‹¤ë¥¸ routing tableì„ ì ìš© ë“±)ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, IPv4ì˜ ì§§ì€ ì£¼ì†Œ ì²´ê³„ë¡œëŠ” ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ, IPv6 Protocolì„ ì´ìš©í•˜ì—¬ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.  \n  Segment List(`SR Policy`)ë¥¼ ì „ë‹¬í•˜ëŠ” ê³¼ì •ì€ ìœ„ì™€ ìœ ì‚¬í•˜ì§€ë§Œ, ì´ë¥¼ IPv6 Option ì˜ì—­ì— stackí˜•íƒœë¡œ ì €ì¥í•œë‹¤.\n\n## Traffic Engineering\n\nTrafficì„ ì œì–´í•˜ê³ , í•´ë‹¹ ì œì–´ë¥¼ ìœ„í•œ ì œí•œì‚¬í•­ë“¤ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ updateí•˜ê³ , ìš´ìš© ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. MPLSì—ì„œ ìˆ˜í–‰í•˜ë˜ TE(Traffic Engineering)ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, Bandwidthë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëŒ€ì‹ ì— delayë¼ëŠ” ì¡°ê±´ì„ ê°–ê³  ìˆë‹¤. ì´ëŠ” packetì´ ë„ì°©í•˜ëŠ”ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì„ ì¸¡ì •í•œ ê°’ì´ë‹¤.  \ní•´ë‹¹ ì¡°ê±´ë“¤ì„ í™œìš©í•˜ì—¬ Trafficì„ ì…ë§›ì— ë§ê²Œ ë³€ê²½í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\në˜í•œ, ì¥ì•  ëŒ€ì±… ì‹œì—ë„ Segment Routingì€ ê°•ì ì„ ê°€ì§€ê³  ìˆë‹¤. ì¼ë°˜ì ì¸ OSPFë¥¼ í™œìš©í•˜ëŠ” ê²½ìš°ì—ëŠ” LFA(Loop Free Alternate)ë¥¼ í†µí•´ì„œ ìš°íšŒ ê²½ë¡œë¥¼ ê³„ì‚°í•œë‹¤. í•˜ì§€ë§Œ, ì´ëŠ” ìƒê°ë³´ë‹¤ ë¹„íš¨ìœ¨ì ì¸ ê²½ë¡œ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ê²Œ ëœë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ê°œì„ í•˜ëŠ”ë° Segment Routingì´ ì ì ˆí•˜ë‹¤. ë‹¤ìŒ ì˜ˆì‹œë¥¼ ë³´ì.\n\n[ê·¸ë¦¼]\n\nì¥ì•  ì´ì „ì— `1 -> 2 -> 3 -> 5` ê·¸ë¦¬ê³  `6 -> 2 -> 3 -> 5` ë¼ëŠ” trafficì´ ì¡´ì¬í•  ë•Œ, ë§Œì•½ `2 -> 3` linkê°€ ëŠì–´ì§€ë©´, ê¸°ì¡´ì˜ LFAë¥¼ ì´ìš©í•˜ë©´ ì°¾ê²Œ ë˜ëŠ” ê²½ë¡œëŠ” ë‹¤ìŒ ê²½ë¡œì™€ ê°™ì•„ì§„ë‹¤.\n\n![sr post convergence 1](/images/sr-post-convergence-1.jpeg)\n\nì´ëŠ” ìƒë‹¹íˆ ë¹„íš¨ìœ¨ì ì¸ ê²½ë¡œì¸ë°, ì´ë ‡ê²Œ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ì´ìœ ëŠ” `1 -> 2 -> 6 -> 7 -> 3 -> 5` ë¼ëŠ” ì°¨ì„  ê²½ë¡œë¡œ ê°€ëŠ” ë„ì¤‘ì— `2 -> 6`ìœ¼ë¡œ ì´ë™ ì´í›„ì— ê¸°ì¡´ Trafficì— ì˜í–¥ìœ¼ë¡œ ì¸í•´ `6 -> 2`ë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ëŠ” í˜„ìƒì´ ë°œìƒí•˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ê²°ë¡ ìƒ ë” í° ë¹„ìš©ì´ ë°œìƒí•˜ëŠ” ê²½ë¡œ(`2 -> 4`)ë¡œ ë“¤ì–´ê°€ì„œ ì˜¤íˆë ¤ ë” ë§ì€ ë¹„ìš©ì´ ë°œìƒí•˜ê²Œ ëœë‹¤.\n\n![sr post convergence 2](/images/sr-post-convergence-2.jpeg)\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” ì¥ì• ê°€ ë°œìƒí•œ ì´í›„ì— ë‹¤ì‹œ IGPê°€ ê³„ì‚°í•˜ëŠ” ìµœë‹¨ ê²½ë¡œì¸ `Post-Convergence Path`ë¥¼ ì‚¬ìš©í•˜ë©´ ëœë‹¤. í•˜ì§€ë§Œ, í•´ë‹¹ ê²½ë¡œëŠ” Loopë¥¼ ì•¼ê¸°í•  ê°€ëŠ¥ì„±ì´ ì¡´ì¬í•œë‹¤. ì´ë¡œ ì¸í•´, í•´ë‹¹ ë°©ì‹ì„ ì‚¬ìš©í•˜ì§€ ì•Šì•˜ì—ˆëŠ”ë°, Segment Routingì„ ì´ìš©í•˜ì—¬ ê²½ë¡œë¥¼ ì œí•œí•¨ìœ¼ë¡œì¨ Post Convergence Pathë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œ ë˜ì—ˆë‹¤. ì¦‰, Segment Routingì˜ Adjacency SIDë¥¼ ì´ìš©í•´ì„œ ë‚˜ê°€ì•¼í•  ì§€ì ì„ ëª…í™•í•˜ê²Œ í•˜ë©°, Loopê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì§€ì ì—ì„œ Static Routingì„ ì§€ì •í•˜ë©´ì„œ, Prefix SIDë¥¼ í†µí•´ì„œ ê²½ë¡œë¥¼ ì ì ˆíˆ ì§€ì •í•˜ì—¬ í•´ê²°ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.\n\n![sr post convergence 3](/images/sr-post-convergence-3.jpeg)\n\n## Programmable\n\nSegment Routingì˜ ë˜ í•˜ë‚˜ì˜ ê°•ì ì€ SDN ì§€í–¥ì ì¸ êµ¬ì¡°ë¼ëŠ” ê²ƒì´ë‹¤. ì¦‰, ì¤‘ì•™ì—ì„œ ê° Switchì˜ ë™ì‘ì„ ì œì–´í•˜ëŠ” Controllerë¥¼ Segment Routingì„ í†µí•´ì„œ ì§ì ‘ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, Segment Routing Networkê°€ íŠ¹ì • Controllerì—ê²Œ ìì‹ ì˜ ìƒíƒœ ì •ë³´ ë“±ì„ ì£¼ê¸°ì ìœ¼ë¡œ ë³´ë‚´ë©´, Controllerì—ì„œëŠ” ì´ë¥¼ ì´ìš©í•´ì„œ Databaseë¥¼ êµ¬ì¶•í•˜ê³ , ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ Routing Tableì„ ì™„ì„±í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ, í›„ì— ìš”ì²­ì´ Headend ì¥ì¹˜ë¡œ ë“¤ì–´ì˜¤ë©´, í•´ë‹¹ ì¥ì¹˜ëŠ” Controllerì—ê²Œ ì²˜ë¦¬ë¥¼ ìš”ì²­í•˜ê³ , ì´ì— ëŒ€í•œ ì‘ë‹µì„ ë°›ì€ Headend ì¥ë¹„ëŠ” ì ì ˆí•˜ê²Œ SR Policyë¥¼ í•´ë‹¹ packetì— ì €ì¥í•˜ì—¬ Routingì´ ê°€ëŠ¥í•´ì§€ëŠ” ê²ƒì´ë‹¤.\n\n## Summary\n\n|                   | MPLS                                                               | SR-MPLS                  | SRv6                 | Segment Routingì˜ ì¥ì                                                             |\n| :---------------- | :----------------------------------------------------------------- | :----------------------- | :------------------- | :-------------------------------------------------------------------------------- |\n| ì œì–´ í”„ë¡œí† ì½œ     | ê¸°ë°˜ : IGP/BGP, ì¶”ê°€ : LDP/RSVP-TE                                 | IGP/BGP                  | IGP/BGP              | LDP/RSVP-TE ì™€ ê°™ì€ ì¶”ê°€ Protocolì´ ì—†ìŒ                                          |\n| ë°ì´í„° í‰ë©´       | MPLS ë°ì´í„° í‰ë©´ì„ ì •ì˜í•´ì„œ ì‚¬ìš©                                   | MPLS ë°ì´í„° í‰ë©´ì„ í™œìš©  | IPv6ë¥¼ í™œìš©          | IPv6ë¥¼ í™œìš©í•œ ê²½ìš° ì¶”ê°€ì ì¸ ì„¤ì •ì´ í•„ìš”ì—†ìŒ                                       |\n| ê²½ë¡œ ê³„ì‚° ë° ì¡°ì • | ì‚¬ì‹¤ Ingressì—ì„œ ì„¤ì •í•˜ì§€ë§Œ ê° ë…¸ë“œê°€ ê´€ì—¬                         | Source(Ingress)ì—ì„œ ê²°ì • | ë™ì¼                 | Source Routingìœ¼ë¡œ ëª…í™•í•œ êµ¬ì¡°                                                    |\n| LSPì˜ Label ê´€ë¦¬  | LSPì˜ ê°¯ìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ê° ë…¸ë“œì˜ ë¶€ë‹´ ì¦ê°€                       | ì¸ì ‘ ë…¸ë“œ, ë§í¬ë§Œ ê´€ë¦¬   | ë™ì¼                 | ë‚´ë¶€ Routerì˜ ë¶€ë‹´ì´ í¬ê²Œ ê°ì†Œ                                                    |\n| Operation         | Push, Swap, Pop                                                    | Push, Next, Continue     | ë™ì¼                 | Swap ì—°ì‚°ì´ í•„ìš”ì—†ë‹¤.                                                             |\n| ì¥ì•  ëŒ€ì±…         | Fast ReRoute                                                       | TI-LFA, Fast ReRoute     | ë™ì¼                 | Fast ReRouteëŠ” convergence timeì´ ê¸¸ì–´ ì‹¤ìš© ì‚¬ë¡€ê°€ ì ë‹¤.                          |\n| Programmability   | ë¶ˆê°€ëŠ¥                                                             | ë¶ˆê°€ëŠ¥                   | Network Programmable | IPv6ë¥¼ ì´ìš©í•œë‹¤ë©´, Traffic Engineering, VPNì„ Programmingì„ í†µí•´ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤. |\n| ë„¤íŠ¸ì›Œí¬ í™•ì¥ì„±   | ì¼ë°˜ì ìœ¼ë¡œëŠ” ë†’ë‹¤. í•˜ì§€ë§Œ, RSVP-TEë¥¼ í™œìš©í•˜ëŠ” ê²½ìš° ë‚®ì•„ì§ˆ ìˆ˜ ìˆë‹¤. | í™•ì¥ì„±ì´ ë†’ë‹¤.           | ë™ì¼                 | í™•ì¥ì„±ì´ ë†’ë‹¤.                                                                    |\n| ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°     | ì¼ë°˜ì ì¸ ë¶„ì‚° ì œì–´ êµ¬ì¡°                                            | SDN ì ìš©ì´ ê°€ëŠ¥          | ë™ì¼                 | SDN ê¸°ë°˜ì˜ ì¤‘ì•™ì§‘ì¤‘ ì œì–´ì™€ ê¸°ì¡´ ë°©ì‹ìœ¼ë¡œ ë¶„ì‚° ì œì–´ë„ ê°€ëŠ¥í•¨                       |\n\n## Reference\n\n- Thumbnail: Photo by [Arno Senoner](https://unsplash.com/@arnosenoner?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/forwarding?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"segment-routing","date":"2022-05-23 10:41","title":"Segment Routing","category":"Network","tags":["Routing"],"desc":"Segment Routingì€ MPLSì˜ ì°¨ì„¸ëŒ€ ë²„ì „ìœ¼ë¡œ, ì´ˆê¸°ì—ëŠ” MPLSì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì œì‹œë˜ì—ˆë‹¤. ì˜ˆë¥¼ë“¤ë©´, TE(Traffic Engineering) ì‹œì— Star Topologyì—ì„œëŠ” íš¨ìœ¨ì´ ì•ˆë‚˜ì˜¨ë‹¤ë˜ì§€ ECMP(Trafficì„ ì—¬ëŸ¬ output interfaceë¡œ ë¶„ë°°ì‹œí‚¤ëŠ” ë°©ì‹)ì„ í™œìš©í•  ìˆ˜ ì—†ë‹¤ì™€ ê°™ì€ ì œí•œì„ í•´ê²°í•˜ê³ ì ë“±ì¥í•˜ì˜€ë‹¤. ê·¸ë ‡ì§€ë§Œ, í˜„ì¬ì— ì™€ì„œ ì™€ì„œ ë” ì¤‘ìš”ì‹œ ì—¬ê²¨ì§€ëŠ” ê²ƒì€ ë„¤íŠ¸ì›Œí¬ êµ¬ì¡°ì˜ ë‹¨ìˆœí™”ì´ë‹¤. ì¦‰, ê¸°ì¡´ì˜ ë³µì¡í•˜ë˜ Switchì˜ ì„¤ì • ë°©ë²•(í†µì‹ ì¥ë¹„ vender ë§ˆë‹¤ ë‹¤ë¥¸ ì„¤ì •ë²•, ì—¬ëŸ¬ Protocoldì´ ì¡´ì¬)ê³¼ ìš´ìš© ë°©ë²•ì„ í†µì¼í•˜ê³ , ë‹¨ìˆœí™” ì‹œí‚´ìœ¼ë¡œì¨ ì‚¬ëŒì— ì˜í•œ ì—ëŸ¬(Human Error)ë¥¼ ìµœì†Œí™”í•˜ê³ ì í•˜ëŠ” ë…¸ë ¥ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.","thumbnailSrc":"https://euidong.github.io/images/forwarding.jpg"},{"content":"\n## Intro\n\nê´‘í†µì‹ ì€ ë¹›ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ê´‘ì„¬ìœ ë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ì‹ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, êµ³ì´ ì™œ ë¹›ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ë©´ì„œ ê¹Œì§€ ê´‘í†µì‹ ì„ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ”ì§€ë¥¼ ì•Œí•„ìš”ê°€ ìˆë‹¤. **ì´ëŠ” ê°„ë‹¨í•˜ê²Œ ë¹ ë¥´ê³ , ë©€ë¦¬ ì „ë‹¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.** ê·¸ë¦¬ê³ , ì „ìíŒŒë¥¼ ì´ìš©í•˜ëŠ” ë¬´ì„ í†µì‹ ê³¼ ë‹¤ë¥´ê²Œ ë¹›ì€ 4ê°€ì§€ì˜ íŠ¹ì§•ì„ ê°€ì§€ê¸° ë•Œë¬¸ì´ë‹¤(ë°˜ì‚¬, êµ´ì ˆ, ê°„ì„­, í¸ê´‘). ê´‘ì„¬ìœ  ë‚´ë¶€ì—ì„œëŠ” ì—¬ëŸ¬ ì›ì¸ì— ì˜í•´ì„œ ìƒì‡„(ì†ì‹¤)ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì¦í­í•´ì¤„ ë°©ë²•ì´ í•„ìš”í•˜ë©°, ê´‘ì„¬ìœ ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í• ì§€ì—ì„œë¶€í„° ì²˜ìŒì— ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë¹›ìœ¼ë¡œ ë³€í™˜í• ì§€ì— ëŒ€í•œ ë°©ë²•ê³¼ ë°›ì€ ë¹›ì„ ë‹¤ì‹œ ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì´ êµ‰ì¥íˆ ì¤‘ìš”í•˜ë‹¤.\n\n---\n\n![ê´‘í†µì‹ ](/images/optical-transfer.jpeg)\n\në”°ë¼ì„œ, ì´ë¥¼ ìœ„í•œ ê¸°ìˆ ê³¼ ì¥ë¹„ë“¤ì„ ë¨¼ì € ì‚´í´ë³´ê³  ê°ˆ ê²ƒì´ë‹¤.\n\n### ê´‘ì„¬ìœ \n\nì‹¤ì œë¡œ ë¹›ì´ ì´ë™í•˜ëŠ” í†µë¡œ ì—­í• ì„ ìˆ˜í–‰í•œë‹¤. ì£¼ìš” êµ¬ì„±ìš”ì†ŒëŠ” ë³´í˜¸ìš© ì•„í¬ë¦´, cladding, coreì´ë‹¤. ë¹›ì€ ì‹¤ì œë¡œëŠ” core ë‚´ë¶€ì—ì„œë§Œ ì´ë™í•œë‹¤. ë‚´ë¶€ì—ì„œ ë¹›ì€ ì§€ê·¸ì¬ê·¸ë¡œ ì´ë™í•˜ë©° ê³„ì†í•´ì„œ claddingê³¼ ì ‘í•˜ì§€ë§Œ ë¹›ì˜ êµ´ì ˆë¥ ì„ ì´ìš©í•˜ì—¬ ì „ë°˜ì‚¬ ì‹œí‚¤ë„ë¡ ì„¤ê³„ë¥¼ í•´ë‘ì–´ coreë¡œë§Œ ë¹›ì´ í†µí•˜ê²Œ ëœë‹¤. ì´ë•Œ, ì´ëŸ¬í•œ ë¹›ì˜ ì´ë™ ê²½ë¡œë¥¼ í•˜ë‚˜ì˜ modeë¼ê³  í•˜ê³ , ì´ëŠ” ì²˜ìŒ ë¹›ì˜ ì…ì‚¬ê°ì— ë”°ë¼ ë‹¬ë¼ì§„ë‹¤. ì´ëŸ¬í•œ modeë¥¼ ì—¬ëŸ¬ ê°œ í—ˆìš©í•œë‹¤ë©´, ì´ëŠ” multi mode fiber(MMF)ë¼ê³  í•˜ê³ , í•˜ë‚˜ë§Œ í—ˆìš©í•œë‹¤ë©´ single mode fiber(SMF)ë¼ê³  í•œë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” SMFê°€ ë” ê³ íš¨ìœ¨ ì‹œìŠ¤í…œì„ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ì „ì†¡ íš¨ìœ¨ì€ ë†’ì§€ë§Œ ë¹„ìš©ì ì¸ ì¸¡ë©´ì—ì„œ MMFë„ ìì£¼ ì‚¬ìš©ëœë‹¤.\n\n![ê´‘ì„¬ìœ ](/images/optical-fiber.jpeg)\n\n#### ê´‘ì„¬ìœ  ì†ì‹¤\n\nê´‘ì„¬ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì´ìœ ì— ì˜í•´ì„œ ë¹›ì„ ì†ì‹¤í•œë‹¤.\n\n1. ê²°í•© ì†ì‹¤(Coupling Loss) : ì´ˆê¸°ì— Lasor ì¥ì¹˜ì™€ ê´‘ì„¬ìœ ì˜ core ì‚¬ì´ì—ì„œ ë°œìƒí•˜ëŠ” ì†ì‹¤\n2. í¡ìˆ˜ ì†ì‹¤ : ê´‘ì„¬ìœ  ì œì‘ ê³¼ì •ì—ì„œ coreì— ì„ì¸ ì–´ì©” ìˆ˜ ì—†ëŠ” ë¶ˆìˆœë¬¼ì— ì˜í•œ ì†ì‹¤\n3. ì‚°ë€ì†ì‹¤(Scattering Loss) : ê´‘ì„¬ìœ ì˜ coreì—ì„œì˜ ë¹„ê· ì§ˆì„±ì— ì˜í•´ì„œ êµ´ì ˆë¥ ì´ ìˆœê°„ì ìœ¼ë¡œ ë³€í•˜ì—¬ ë°œìƒí•˜ëŠ” ì†ì‹¤\n4. êµ¬ë¶€ëŸ¬ì§ì— ì˜í•œ ë³µì‚¬ ì†ì‹¤(Bending Loss) : ê´‘ì„¬ìœ ì˜ ì¼ë¶€ êµ¬ë¶€ëŸ¬ì§ì— ì˜í•˜ì—¬ êµ´ì ˆë¥ ì´ ì˜í–¥ì„ ë°›ì•„ ë°œìƒí•˜ëŠ” ì†ì‹¤\n5. ì ‘ì† ì†ì‹¤(Joint Loss) : ê´‘ì„¬ìœ ê°„ì˜ ê²°í•© ê³¼ì •ì—ì„œ ë°œìƒí•˜ëŠ” ì†ì‹¤\n\n#### ì†ì‹¤ ë³´ìƒ(Dispersion Compensation)\n\nê´‘ì„¬ìœ  ë‚´ì—ì„œ ì†ì‹¤ì„ ë³´ìƒí•˜ê¸° ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” ëŒ€í‘œì ì¸ ë°©ë²•ì´ 4ê°€ì§€ê°€ ìˆë‹¤.\n\n1. DCF(Dispersion Compensation Fiber)ë¥¼ ì´ìš©í•œë‹¤. ì´ëŠ” ë¹›ì˜ íŒŒì¥ì„ ë” ê¸¸ê²Œ ë³€í™”ì‹œí‚¤ëŠ”ë° ì´ë¥¼ ì´ìš©í•˜ì—¬ ì¤‘ê°„ì— ì¦í­ì„ ê°€í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ì´ìš©í•  ë•Œì—ëŠ” SMFë¡œ ê´‘ì„¬ìœ ë¡œ ì±„íƒí•˜ê³ , ë¨¼ì € ì§„í–‰í•œ í›„ì— í•´ë‹¹ ê¸¸ì´ì˜ 19%ë§Œí¼ì„ DCFë¡œ í†µê³¼ì‹œì¼œì„œ ì†ì‹¤ëœ ì–‘ë§Œí¼ì„ ë³´ì¶©í•´ì£¼ê³ , ë‹¤ì‹œ SMFë¡œ ì§„í–‰ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤. ë§ˆì¹˜ ë¹›ì„ ì˜¤ëª© ë Œì¦ˆ(SMF)ë¡œ í¼íŠ¸ë¦¬ë©´, ë‹¤ì‹œ ë³¼ë¡ ë Œì¦ˆ(DCF)ë¡œ ëª¨ì•„ì£¼ëŠ” ê²ƒê³¼ ìœ ì‚¬í•˜ë‹¤.\n2. EDF(Erbium Doped Fiber), PDF(Pr Droped Fiber) ë“±ì„ í™œìš©í•œë‹¤. ì´ëŠ” ìì²´ì ìœ¼ë¡œ ê´‘ì„ ì¦í­í•˜ëŠ” íš¨ê³¼ë¥¼ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ ì¤‘ê°„ì— í†µê³¼ ì‹œì¼œì„œ ì¦í­ì„ ìˆ˜í–‰í•œë‹¤. ì´ ë°©ì‹ì´ ë” ì§§ì€ ê¸¸ì´ì˜ Fiberë¡œ ì¦í­ì´ ê°€ëŠ¥í•˜ë‹¤.\n3. ì¤‘ê³„ê¸°ë¥¼ í™œìš©í•œë‹¤. ì¤‘ê°„ì—ì„œ ë¹›ì„ ë‹¤ì‹œ ì „ê¸°ë¡œ ë°”ê¾¼ í›„ì— ì´ë¥¼ ë‹¤ì‹œ ê´‘ìœ¼ë¡œ ì¦í­í•˜ì—¬ ì „ë‹¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ ë°©ì‹ì€ í¸ë¦¬í•˜ì§€ë§Œ, ì „ê¸°ê°€ í•„ìš”í•˜ë©°, ì²˜ë¦¬ ê³¼ì •ì—ì„œì˜ ì§€ì—°ì´ í¬ë‹¤ëŠ” ë‹¨ì ì´ ìˆë‹¤.\n4. ì¦í­ê¸°ë¥¼ í™œìš©í•œë‹¤. ê´‘ì„¬ìœ  ë‚´ ëª¨ë“  ì‹ í˜¸ë¥¼ ì¦í­ ì‹œí‚¨ë‹¤. Noiseë„ ê°™ì´ ì¦í­ë  ìˆ˜ ìˆë‹¤ëŠ” ë‹¨ì ì´ ìˆì§€ë§Œ, ë¹ ë¥´ê¸°ì— ë§ì´ ì‚¬ìš©ëœë‹¤. ëŒ€í‘œì ì¸ ì¦í­ì˜ ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n   - EDFA : EDFë¥¼ ì´ìš©í•œ ì¦í­ ë°©ë²•ì´ë‹¤. ì›ë¦¬ëŠ” ì „ë‹¬ë˜ëŠ” ë¹›ì— ì•½í•œ ê´‘ì‹ í˜¸ë¥¼ ì„ì–´ì„œ ì¦í­ì‹œí‚¤ëŠ” ê²ƒì´ë‹¤. ë‹¨ì ì€ C, L bandë§Œì„ ì»¤ë²„í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ë” ë„“ì€ ë²”ìœ„ì— ëŒ€í•´ì„œëŠ” ì œí•œì ì´ë‹¤.\n   - Raman ì¦í­ : ë¹›ì˜ ì‚°ë€íš¨ê³¼ë¥¼ í™œìš©í•˜ì—¬ íŠ¹ì • ì£¼íŒŒìˆ˜ ì˜ì—­ì˜ ë¹›ì„ ì¦í­ì‹œí‚¤ëŠ” ê¸°ëŠ¥ì„ í•œë‹¤. ë” ë„“ì€ ë²”ìœ„ë¥¼ ì»¤ë²„í•  ìˆ˜ ìˆê³ , EDFAë³´ë‹¤ ëœ ë¹ˆë²ˆí•˜ê²Œ ì„¤ì¹˜í•˜ì—¬ë„ ë¬´ë°©í•˜ë‹¤.\n\n### Tranceiver\n\nê´‘ì†¡ìˆ˜ì‹ ê¸°ë¥¼ ì˜ë¯¸í•œë‹¤. ëŒ€ê²Œ ê´‘ì†¡ì‹ ì„ ë‹´ë‹¹í•˜ëŠ” TOSAì™€ ê´‘ìˆ˜ì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ROSAë¥¼ ëª¨ë‘ í¬í•¨í•˜ì—¬ ë§Œë“  ì¥ì¹˜ë¡œ ì‹¤ì œ Switch/Routerì—ì„œ ê´‘ì¼€ì´ë¸”(ê´‘ì„¬ìœ )ì´ ì—°ê²°ë˜ëŠ” interface ì—­í• ì„ í•œë‹¤. í•´ë‹¹ ê¸°ìˆ ì€ ì†Œí˜•í™”ì™€ ì €ì „ë ¥í™”ê°€ í•µì‹¬ì´ê³  í˜„ì¬ì—ëŠ” í•˜ë‚˜ì˜ Switch/Routerì— 32ê°œ ì´ìƒ í¬í•¨í•  ìˆ˜ ìˆì„ ì •ë„ë¡œ ì†Œí˜•í™”/ì €ì „ë ¥í™”ê°€ ì§„í–‰ë˜ì—ˆë‹¤.\n\n#### Tranceiver ë‚´ë¶€ì˜ ë³€ì¡° ê¸°ìˆ \n\n> **ê´‘ë³€ì¡°ê¸°ìˆ **\n\nê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë¹›ìœ¼ë¡œ ë°”ê¾¸ê³ ì í•  ë•Œì—ëŠ” ê¸°ì¡´ ë°ì´í„°ì˜ ì£¼íŒŒìˆ˜ë¥¼ ê·¸ëŒ€ë¡œ ì´ìš©(BaseBand)í•˜ê¸° ë³´ë‹¤ëŠ” ê³ ì£¼íŒŒ ëŒ€ì—­ê³¼ ê²°í•©í•˜ì—¬ í•´ë‹¹ ê³ ì£¼íŒŒ ëŒ€ì—­(BroadBand)ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ë³´ë‚¸ë‹¤. ì´ë¥¼ ìˆ˜í–‰í•˜ë©´ ì¥ê±°ë¦¬ í†µì‹ ì— ìœ ë¦¬í•˜ë©°, ì•ˆí…Œë‚˜ì˜ ê¸¸ì´ë¥¼ ë‹¨ì¶•í•  ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ Noiseë¥¼ ê°œì„ í•˜ê¸°ì— ìœ ë¦¬í•˜ë‹¤ëŠ” ì¥ì ì„ ê°–ê³  ìˆë‹¤. ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ ì´ 2ê°€ì§€ í˜•íƒœì˜ ë³€ì¡° ê¸°ìˆ ì´ ì¡´ì¬í•œë‹¤.\n\n- ì§ì ‘ ë³€ì¡°(Direct Modulation) : ë°ì´í„°ì˜ 0ê³¼ 1ì— ë”°ë¼ ê´‘ì›ì„ í‚¤ê³  ë„ê³ ë¥¼ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹\n- ì™¸ë¶€ ë³€ì¡°(External Modulation) : ê´‘ì›ì€ ê³„ì† ì¼œë‘” ìƒíƒœì—ì„œ ë°ì´í„°ì˜ 0ê³¼ 1ì— ë”°ë¼ ë¹›ì„ ë§‰ì•˜ë‹¤ê°€ í†µê³¼ì‹œì¼°ë‹¤ë¥¼ ì œì–´í•˜ëŠ” ë°©ì‹\n\n> **ì‹ í˜¸ë³€ì¡°ê¸°ìˆ **\n\ndataë¥¼ ì‹ í˜¸ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ìˆ ì´ë‹¤. ëŒ€í‘œì ì¸ ë°©ì‹ì€ 4ê°€ì§€ê°€ ì¡´ì¬í•œë‹¤.\n\n1. ASK(Amplitude Shift Keying) : ë””ì§€í„¸ ì‹ í˜¸ì— ê³ ì£¼íŒŒ ì‹ í˜¸ë¥¼ ê²°í•©í•˜ì—¬ ë³€í™˜ ì‹ í˜¸ë¥¼ ë§Œë“œëŠ” ë°©ë²•ìœ¼ë¡œ ë‘ ê°œì˜ transiterë¡œë„ ë§Œë“¤ ìˆ˜ ì‡ì„ ì •ë„ë¡œ ë§¤ìš° ê°„ë‹¨í•˜ë‚˜ ì¡ìŒì—ëŠ” ì·¨ì•½í•˜ë‹¤.\n2. FSK(Frequency Shift Keying) : ë””ì§€í„¸ ì‹ í˜¸ì— ë”°ë¼ ê³ ì£¼íŒŒ ì‹ í˜¸ì˜ ì£¼íŒŒìˆ˜ë¥¼ ë³€í™˜í•˜ì—¬ ì‹ í˜¸ë¥¼ ë³´ë‚´ëŠ” ê¸°ìˆ ë¡œ ê°„ë‹¨í•˜ë©´ì„œë„ ì¡ìŒì— ê°•í•˜ì§€ë§Œ, ë§ì€ ì£¼íŒŒìˆ˜ ëŒ€ì—­ì„ í•„ìš”ë¡œ í•œë‹¤.\n3. PSK(Phase Shift Keying) : ë””ì§€í„¸ ì‹ í˜¸ì— ë”°ë¼ ê³ ì£¼íŒŒ ì‹ í˜¸ì˜ ìœ„ìƒì„ ì—­ì „ì‹œì¼œ ë³€í™˜í•˜ì—¬ ì‹ í˜¸ë¥¼ ë³´ë‚´ëŠ” ê¸°ìˆ ë¡œ ê°„ë‹¨í•˜ê³  ì¡ìŒì— ê°•í•˜ì§€ë§Œ ìˆ˜ì‹ ì¸¡ì— ë¶€ê°€ì ì¸ ìœ„ìƒ ì¶”ì  ì¥ë¹„ê°€ í•„ìš”í•˜ë‹¤.\n4. QPSK(Quadrature PSK) : ìœ„ìƒì„ ë” ì„¸ë¶„í™”í•˜ì—¬ 4ë‹¨ê³„ë¡œ ë‚˜ëˆ„ì–´ ì‹ í˜¸ë¥¼ ë³´ë‚´ëŠ” PSK ë°©ì‹ì´ë‹¤. ê¸°ì¡´ì˜ PSKë³´ë‹¤ ì „ì†¡ íš¨ìœ¨ì´ ë†’ì•„ì§„ë‹¤.\n5. QAM(Quadrature Amplitude Modulation) : ASKì™€ PSKë¥¼ ì¡°í•©í•œ ë°©ì‹ìœ¼ë¡œ ASKì™€ PSKë¥¼ ë³„ë„ë¡œ ìˆ˜í–‰í•˜ê³  ì´ì— ì˜í•´ì„œ ìƒì„±ëœ ì‹ í˜¸ë¥¼ í•©ì³ì„œ ì „ì†¡í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë‚˜íƒ€ë‚˜ëŠ” ìœ„ìƒì˜ ìˆ˜ì— ë”°ë¼ì„œ 4-QAM, 8-QAM, 16-QAM, 32-QAM ë“±ìœ¼ë¡œ ë‚˜ë‰œë‹¤. ì°¸ê³ ë¡œ 4-QAMì€ ì‚¬ì‹¤ìƒ QPSKì™€ ë™ì¼í•˜ë‹¤.\n\n## ê´‘í†µì‹ ë§\n\nê´‘ ì¼€ì´ë¸”ë¡œ êµ¬ì„±ëœ ë¬¼ë¦¬ ë„¤íŠ¸ì›Œí¬ì´ë‹¤. í¬ê²Œ 3ê°€ì§€ Networkë¡œ êµ¬ì„±ë˜ì–´ì§„ë‹¤. ì¼ë°˜ì ìœ¼ë¡œëŠ” ê° Networkê°€ Ring Topologyë¡œ êµ¬ì„±ëœë‹¤. ì´ëŠ” ì¥ì• ì— ëŒ€ë¹„í•˜ê¸° ìœ„í•¨ì´ë‹¤. OTNì´ë¼ê³ ë„ ë¶€ë¥´ë©° ì¤‘ê°„ Routerì—ì„œì˜ ë³€í™˜ì„ ìµœì†Œí™”í•˜ê³  ê´‘í†µì‹ ìœ¼ë¡œ ì§ì ‘ì ìœ¼ë¡œ ì—°ê²°í•˜ëŠ” í•˜ìœ„ ë„¤íŠ¸ì›Œí¬ë¥¼ êµ¬ì„±í•˜ëŠ” ê²ƒì´ë‹¤.\n\nì´ˆê¸°ì—ëŠ” SONET/SDHë¼ëŠ” í˜•íƒœê°€ ìˆì—ˆë‹¤. ì´ëŠ” Synchronous Optical Network / Synchronous Digital Hierarchyì˜ ì•½ìë¡œ ê±°ì˜ ë¹„ìŠ·í•œ ë‘ ê¸°ìˆ ì„ ë¶™ì—¬ ë¶€ë¥´ëŠ” ë§ì´ë‹¤. ì‚¬ì‹¤ìƒ í‘œì¤€ì„ ë°œí–‰í•œ ê¸°ê´€ì´ ë¯¸êµ­ì´ëƒ êµ­ì œê¸°ê´€ì´ëƒì˜ ì°¨ì´ì´ë‹¤(ê·¸ë˜ì„œ ì„¸ë¶€ ìš©ì–´ë“¤ì€ ë‚´ë¶€ì ìœ¼ë¡œ ë‹¤ë¥´ë‹¤). TDMìœ¼ë¡œ ë‹¤ì¤‘í™” ì „ì†¡ì„ ìˆ˜í–‰í•˜ì˜€ê³ , ì´í›„ì—ëŠ” í†µê³„ì  ë‹¤ì¤‘í™”ë¼ëŠ” TDMì˜ ê³ ì • ì‹œê°„ë¶„í• ì„ ìœ ë™ì ìœ¼ë¡œ ë°”ê¾¼ ë°©ì‹ì´ ë“±ì¥í•˜ì§€ë§Œ ì—¬ê¸°ì„œëŠ” ì‚¬ìš©ë˜ì–´ì§€ì§€ ì•Šì•˜ë‹¤. ì›ë˜ëŠ” ìŒì„± í†µì‹ ì— ì´ˆì ì„ ë§ì¶”ì—ˆê¸° ë•Œë¬¸ì— ì¥ì•  ì‹œ ì‚¬ëŒì´ ì¸ì‹í•˜ì§€ ëª»í•˜ëŠ” ~50ms ì´ë‚´ì— ìë™ ì ˆì²´ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì‘ì—…ë„ ìµœì´ˆ ë„ì…ë˜ì—ˆë‹¤. ì´ë¡œì¸í•´ ìŒì„± í†µì‹ ì—ì„œëŠ” ìš°ìˆ˜í•œ ì„±ëŠ¥ì„ ë³´ì˜€ì§€ë§Œ ì¸í„°ë„· íŠ¸ë˜í”½ì—ì„œëŠ” ìœ„ì—ì„œ ë§í•œ í†µê³„ì  ë‹¤ì¤‘í™”ë¥¼ ì§€ì›í•˜ì§€ ì•Šì•„ ëŒ€ì—­í­ ë‚­ë¹„ê°€ ì‹¬í–ˆë‹¤. ì´ì— ë”°ë¼ ì•„ë˜ì™€ ê°™ì€ í˜•íƒœì˜ Networkë¡œ êµ¬ì„±ëœ í˜•íƒœë¡œ ë³€í™”í•˜ê²Œ ë˜ì—ˆë‹¤.\n\n1. ROADM : Reconfigurable Optical Add-Drop Multiplexerì˜ ì•½ìë¡œ íŠ¹ì • íŒŒì¥ì„ Dropí•˜ê±°ë‚˜ Addí•˜ëŠ” ì¥ì¹˜ì¸ OADMì„ ë°œì „ì‹œí‚¨ ì¥ì¹˜ì´ë‹¤. ì›ë˜ëŠ” ì„¤ì •ì„ ë³€ê²½í•˜ëŠ” ê²ƒì´ ìˆ™ë ¥ëœ ê¸°ìˆ ìë“¤ì— ì˜í•´ í•˜ë“œì›¨ì–´ì ìœ¼ë¡œ ê°€ëŠ¥í–ˆëŠ”ë° ì´ë¥¼ ì›ê²©ìœ¼ë¡œ ì œì–´í•˜ëŠ” ê¸°ìˆ ì„ ì ìš©í•œ ê²ƒì´ ROADMì´ë‹¤. ì´ëŠ” Backbornì—ì„œ ê´‘íŒŒì¥ì„ ë¶„ë¦¬í•˜ê³  ë¶„ì„í•´ì„œ ì ì ˆí•˜ê²Œ Routingí•˜ëŠ”ë° ì‚¬ìš©ëœë‹¤.\n2. MSPP : Multi Service Provisioning Platformì˜ ì•½ìë¡œ SONET/SDHì™€ ATM, Ethernetì„ ë™ì‹œì— ì§€ì›í•˜ëŠ” Moduleë¡œ ì—¬ëŸ¬ Platformì˜ Interfaceë¡œ ê¸°ëŠ¥í•œë‹¤.\n3. PON : Passive Optical Network ì˜ ì•½ìë¡œ í•˜ë‚˜ì˜ ê´‘í†µì‹  ì§€ì›ì¥ì¹˜(OLT, Optical Line Terminator)ë¥¼ í†µí•´ì„œ ëª¨ë“  ë¹›ì„ í•˜ë‚˜ì˜ Fiberë¡œ í•©í•˜ì—¬ ì—¬ëŸ¬ ì¥ì¹˜ë“¤ì—ê²Œ ê´‘í†µì‹ ì„ ì§€ì›í•˜ëŠ” í˜•íƒœì˜ Networkë¡œ ëŒ€ê²Œ ê´‘í†µì‹ ì˜ End ì§€ì ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” Networkì´ë‹¤.\n   - TDM-PON : Time Division Mulitplexingì˜ ì•½ì €ë¡œ ìˆ˜ì‹  ì‹œì— OLTë¥¼ ì´ìš©í•˜ì—¬ ê´‘ì¼€ì´ë¸”ë¡œ ì˜¨ ë¹›ì„ ì§ë ¬í™”í•˜ê³ , Splitterë¥¼ í†µí•´ì„œ ë„¤íŠ¸ì›Œí¬ì— Broadcastingí•˜ëŠ” ë°©ì‹ì´ë‹¤. ì†¡ì‹  ì‹œì—ëŠ” ì‹œë¶„í• ì„ í†µí•´ì„œ ê° ì¥ë¹„ì—ì„œ ì˜¤ëŠ” ê´‘ ë°ì´í„°ë¥¼ ì „ì†¡í•œë‹¤.\n   - CWDM-PON : Coarse Wavelength Division Multiplexing ì˜ ì•½ìë¡œ ìˆ˜ì‹  ì‹œì— ì±„ë„ì„ ìµœëŒ€ 18ê°œê¹Œì§€ë¡œ ë‚˜ëˆ„ì–´ ê° ì±„ë„ì„ í†µí•´ì„œ í†µì‹ ì„ ìˆ˜í–‰í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë•Œ, RNì´ë¼ëŠ” ì¥ì¹˜ê°€ Prizmì²˜ëŸ¼ ë¹›ì„ ë¶„ì‚°ì‹œí‚¤ëŠ” ì—­í• ì„ í•œë‹¤.\n   - DWDM-PON : ê° ê´‘ê°€ì…ìë§ˆë‹¤ ë³„ë„ì˜ ê³ ìœ  íŒŒì¥ì„ ë¶€ì—¬í•˜ëŠ” ë°©ì‹ì´ë‹¤. ë°©ì‹ì€ CWDMê³¼ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤.\n   - NG-PON2 : TDMê³¼ WDMì„ ê²°í•©í•˜ì—¬ í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n## Reference\n\n- Thumbnail : Photo by [Compare Fibre](https://unsplash.com/@comparefibre?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/optical-network?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"optical-transport-network","date":"2022-05-28 19:03","title":"ê´‘í†µì‹ ë§","category":"Network","tags":["OpticalTransportNetwork"],"desc":"ê´‘í†µì‹ ì€ ë¹›ì— ë°ì´í„°ë¥¼ ì €ì¥í•˜ì—¬ ê´‘ì„¬ìœ ë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ë°©ì‹ì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, êµ³ì´ ì™œ ë¹›ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹˜ë©´ì„œ ê¹Œì§€ ê´‘í†µì‹ ì„ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ”ì§€ë¥¼ ì•Œí•„ìš”ê°€ ìˆë‹¤. ì´ëŠ” ê°„ë‹¨í•˜ê²Œ ë¹ ë¥´ê³ , ë©€ë¦¬ ì „ë‹¬í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ê·¸ë¦¬ê³ , ì „ìíŒŒë¥¼ ì´ìš©í•˜ëŠ” ë¬´ì„ í†µì‹ ê³¼ ë‹¤ë¥´ê²Œ ë¹›ì€ 4ê°€ì§€ì˜ íŠ¹ì§•ì„ ê°€ì§€ê¸° ë•Œë¬¸ì´ë‹¤(ë°˜ì‚¬, êµ´ì ˆ, ê°„ì„­, í¸ê´‘). ê´‘ì„¬ìœ  ë‚´ë¶€ì—ì„œëŠ” ì—¬ëŸ¬ ì›ì¸ì— ì˜í•´ì„œ ìƒì‡„(ì†ì‹¤)ê°€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ì¦í­í•´ì¤„ ë°©ë²•ì´ í•„ìš”í•˜ë©°, ê´‘ì„¬ìœ ë¥¼ ì–´ë–»ê²Œ êµ¬ì„±í• ì§€ì—ì„œë¶€í„° ì²˜ìŒì— ë°ì´í„°ë¥¼ ì–´ë–»ê²Œ ë¹›ìœ¼ë¡œ ë³€í™˜í• ì§€ì— ëŒ€í•œ ë°©ë²•ê³¼ ë°›ì€ ë¹›ì„ ë‹¤ì‹œ ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ” ë°©ë²•ì´ êµ‰ì¥íˆ ì¤‘ìš”í•˜ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/optical-network.jpg"}],"AI":[{"content":"\n## Intro\n\nMachine Learningì€ dataë“¤ë¡œ ë¶€í„° íŠ¹ì • patternì„ ë‚˜íƒ€ë‚´ëŠ” functionì„ ë§Œë“œëŠ” ê²ƒì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì¦‰, patternì€ dataì— ëŒ€í•œ ê°„ë‹¨í•œ ìš”ì•½ë³¸ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.\ní™•ë¥ /í†µê³„ ì´ë¡  ë° ì„ í˜•ëŒ€ìˆ˜, ë¯¸ì ë¶„, ì •ë³´ ì´ë¡  ê´€ë ¨ ê¸°ë³¸ ë‚´ìš©ì„ í•´ë‹¹ í¬ìŠ¤íŒ…ì— ì •ë¦¬í•œë‹¤. ì—¬ê¸°ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ì€ ëŒ€ê²Œ ë§ì´ ì¶”ìƒì ì¸ ë‚´ìš©ì´ë©°, í‚¤ì›Œë“œ ì¤‘ì‹¬ì˜ ë‚´ìš©ì´ë‹¤. ë§Œì•½, ì¶”ê°€ì ì¸ ì„¤ëª…ì´ í•„ìš”í•˜ë‹¤ë©´ í‚¤ì›Œë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë” ê²€ìƒ‰ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.\n\n## Probability/Statisics\n\ní™•ë¥ ê³¼ í†µê³„ëŠ” ëŒ€ê²Œ ê±°ì˜ ë™ì˜ì–´ì²˜ëŸ¼ ì‚¬ìš©ë˜ì§€ë§Œ, StatisticsëŠ” ëŒ€ê²Œ ê³¼ê±°ë¥¼ ì˜ë¯¸í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë°˜ë©´ ProbabilityëŠ” ë¯¸ë˜ë¥¼ ì˜ë¯¸í•˜ëŠ” ìš©ë„ë¡œ ë§ì´ ì‚¬ìš©ë˜ì–´ì§„ë‹¤. \n\n### Probability Space\n\ní™•ë¥  ê³µê°„ì„ ì •ì˜í•˜ëŠ” ê²ƒì€ í™•ë¥ ì„ ì´í•´í•˜ëŠ” í† ëŒ€ê°€ ëœë‹¤. í™•ë¥ ì„ ì ìš©í•˜ê¸° ìœ„í•œ ê³µê°„ì„ ë¨¼ì € ì‚´í´ë³´ì.\n\n- Sample Space($\\Omega$)  \n  ê°€ëŠ¥í•œ ëª¨ë“  ê²°ê³¼ê°’ì˜ ì§‘í•©ì´ë‹¤.  \n  ex. ë™ì „ì„ ë‘ ë²ˆì„ ë˜ì ¸ì„œ ë‚˜ì˜¬ ìˆ˜ ìˆëŠ” ëª¨ë“  ê²°ê³¼ê°’ì€ $\\Omega = $ $\\{ hh, ht, th, tt \\}$\n- Event($E$)  \n  Sample Spaceì˜ Subsetì´ë‹¤. Sample Spaceì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” eventë¼ëŠ” ì˜ë¯¸ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.  \n  ex. ë™ì „ì„ ë‘ ë²ˆì„ ë˜ì ¸ì„œ ëª¨ë‘ ê°™ì€ ë©´ì´ ë‚˜ì˜¤ëŠ” EventëŠ” $E = $ $\\{ hh, tt \\}$\n- Field($\\mathcal{F}$)  \n  Sample Spaceì—ì„œ ë°œìƒ ê°€ëŠ¥í•œ ëª¨ë“  Eventë“¤ì˜ ì§‘í•©ì´ë‹¤.  \n  ex ë™ì „ì„ ë‘ ë²ˆ ë˜ì ¸ì„œ ë‚˜ì˜¤ëŠ” ê²°ê³¼ê°’ì˜ FieldëŠ” $\\mathcal{F} = $ $\\{$ $\\emptyset$, $\\{hh\\}$, $\\{ht\\}$, $\\{th\\}$, $\\{tt\\}$, $\\{hh, ht\\}$, $\\{hh, th\\}$, $\\{hh, tt\\}$, $\\{ht, th\\}$, $\\{ht, tt\\}$, $\\{th, tt\\}$, $\\{hh, ht, th\\}$, $\\{hh, ht, tt\\}$, $\\{hh, th, tt\\}$, $\\{ht, th, tt\\}$, $\\{hh, ht, th, tt\\}$ $\\}$\n- $\\sigma$-field  \n  ìì‹  ë‚´ë¶€ì˜ ì›ì†Œë¥¼ í¬í•¨í•˜ëŠ” í•©ì§‘í•©ì„ ëª¨ë‘ í¬í•¨í•˜ëŠ” ì…€ ìˆ˜ ìˆëŠ” fieldë¥¼ sigma fieldë¼ê³  í•œë‹¤.  \n  ì´ $\\sigma$-fieldëŠ” ì¼ë°˜ì ì¸ í™•ë¥ ê³¼ íŠ¹ì • domainì—ì„œì˜ í™•ë¥ ì„ ì •ì˜í•˜ëŠ”ë° í•„ìš”í•˜ë‹¤.  \n  ìš°ë¦¬ê°€ sample space($\\Omega$)ì™€ $\\sigma$-field $\\mathcal{F} \\subset 2^{\\Omega}$ê°€ ì£¼ì–´ì§ˆ ë•Œ, í™•ë¥ Pê°€ ë‹¤ìŒê³¼ ê°™ì´ mappingí•œë‹¤ê³  í•˜ì. $P: \\mathcal{F} \\mapsto [0, 1]$ ì´ë•Œ PëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§„ë‹¤.\n  - $A \\in \\mathcal{F}$ì¸ ëª¨ë“  Aì— ëŒ€í•´ì„œ $P(A) \\leq 0$ ì´ë‹¤.  \n    $P(\\emptyset) = 0, P(\\Omega) = 1$\n  - $\\{A_i\\}_{i \\in I}$ì´ê³ , ì„œë¡œ ë‹¤ë¥¸ ëª¨ë“  i, jì— ëŒ€í•´ $ A_{i}\\cup A_{j} = \\emptyset$ì´ë¼ë©´, ì•„ë˜ ì‹ì„ ë§Œì¡±í•œë‹¤.  \n    $$P(\\cup_{i \\in I}A_i) = \\sum_{i \\in I}P(A_i)$$\n\n### Important properties of Probability\n\n- **Joint Probability**  \n  ë‘ Eventì˜ Joint ProbabilityëŠ” ë‘ Eventì˜ í•©ì§‘í•©ì˜ í™•ë¥ ì„ ì˜ë¯¸í•œë‹¤.\n  $P(A, B) = P(A \\cap B)$\n- **Marginal Probability**  \n  ëŒ€ê²Œ ë‘ ê°œ ì´ìƒì˜ Eventê°€ ìˆì„ ë•Œ, ê° ê°ì˜ Eventì˜ í™•ë¥ ì„ íŠ¹ì •í•  ë•Œ ì‚¬ìš©í•œë‹¤.\n  $P(A), P(B)$\n- **Independence**  \n  ë‘ Eventê°€ ë…ë¦½ì´ë¼ëŠ” ì˜ë¯¸ëŠ” ì„œë¡œì˜ Eventê°€ ì„œë¡œ ì˜í–¥ì„ ë°›ì§€ ì•ŠëŠ”ë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤. <mark>**ì£¼ì˜í•  ê²ƒì€ ì´ê²ƒì´ ì˜ë¯¸í•˜ëŠ” ê²ƒì´ ë‘ Eventì˜ êµì§‘í•©ì´ ì—†ë‹¤ëŠ” ì˜ë¯¸ê°€ ì•„ë‹ˆë‹¤.**</mark>  \n  ì˜ˆë¥¼ ë“¤ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. ìš°ë¦¬ê°€ ìœ„ì—ì„œ ì˜ˆì‹œë¡œ ì‚¬ìš©í•œ ë‘ ê°œì˜ ë™ì „ì„ ë˜ì§„ ê²°ê³¼ë¥¼ ë³´ì. ë‘ ê°œì˜ ë™ì „ì´ ëª¨ë‘ ì•ë©´ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ì™€ ëª¨ë‘ ë’·ë©´ì´ ë‚˜ì˜¤ëŠ” ê²½ìš°ëŠ” ì„œë¡œ ë…ë¦½ì¼ê¹Œ? ì´ëŠ” ë…ë¦½ì´ ì•„ë‹ˆë‹¤. ì™œëƒí•˜ë©´, ë™ì „ì´ ëª¨ë‘ ì•ë©´ì´ ë‚˜ì˜¤ëŠ” ì‚¬ê±´ì€ í•„ì—°ì ìœ¼ë¡œ ëª¨ë‘ ë’·ë©´ì´ ë‚˜ì˜¤ëŠ” ì‚¬ê±´ì€ ë°˜ë“œì‹œ ì¼ì–´ë‚˜ì§€ ì•Šì„ ê²ƒì´ë¼ëŠ” ì¦ê±°ê°€ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ë°˜ëŒ€ë¡œ, ëª¨ë‘ ì•ë©´ì´ ë‚˜ì˜¤ëŠ” ì‚¬ê±´ê³¼ í•œ ë²ˆë§Œ ì•ë©´ì´ ë‚˜ì˜¤ëŠ” ì‚¬ê±´ì„ ìƒê°í•´ë³´ì. í•˜ë‚˜ì˜ ì‚¬ê±´ì´ ì¼ì–´ë‚¬ë‹¤ê³ , ë°˜ë“œì‹œ ê·¸ ì‚¬ê±´ì´ ì¼ì–´ë‚¬ê±°ë‚˜ ì•ˆì¼ì–´ë‚¬ë‹¤ëŠ” ê´€ê³„ë¥¼ ë°í˜€ë‚¼ ìˆ˜ ì—†ë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ ê²½ìš° ë‘ ì‚¬ê±´ì´ ë…ë¦½ì ì´ë¼ê³  í•œë‹¤.  \n  ì´ë¥¼ ìˆ˜í•™ì ìœ¼ë¡œ í‘œí˜„í•˜ë©´, ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.  \n  $P(A, B)=P(A)P(B)$  \n  ì¦‰ ìœ„ ê³µì‹ì´ ì„±ë¦½í•˜ë©´ ë…ë¦½ì´ë©°, ë…ë¦½ì´ë¼ë©´ ìœ„ì˜ ì‹ì´ ì„±ë¦½í•œë‹¤.\n- **Conditional Probability**  \n  ë‘ Eventê°€ ìˆì„ ë•Œ, í•˜ë‚˜ì˜ Eventê°€ ë°œìƒí–ˆì„ ë•Œ ë‹¤ë¥¸ í•˜ë‚˜ì˜ Eventê°€ ë°œìƒí•  í™•ë¥ ì„ ì˜ë¯¸í•œë‹¤. ë”°ë¼ì„œ, ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì‹ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.  \n  $P(A|B) = {{P(A, B)}\\over{P(B)}}, (P(B) \\neq 0)$  \n  ì—¬ê¸°ì„œ independence íŠ¹ì„±ì„ ë” ëª…í™•í•˜ê²Œ í™•ì¸í•  ìˆ˜ ìˆëŠ”ë°, ë§Œì•½ Aì™€ Bê°€ ë…ë¦½ì´ë¼ë©´, $P(A|B) = P(A)$ì´ë‹¤.  \n  ì¦‰, Bê°€ ë°œìƒí–ˆëŠ”ì§€ ì—¬ë¶€ëŠ” Aì˜ ê²°ê³¼ì— ì˜í–¥ì„ ì•ˆì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤.\n- **Partition**  \n  Sample Space($\\Omega$)ë¥¼ ê²¹ì¹˜ì§€ ì•Šê³ , ëª¨ë‘ í¬í•¨í•˜ëŠ” Eventì˜ ì§‘í•©ì„ ì˜ë¯¸í•œë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ì‹ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.  \n  $\\cup_{i=1}^{n}{P_i} = \\Omega$ ì´ê³ , $\\cap_{i=1}^{n}{P_i} = \\emptyset$\n- **Marginalization**  \n  ì „ì²´ Sample space($\\Omega$)ì— ëŒ€í•˜ì—¬ **B**ê°€ ì´ì— ëŒ€í•œ partitionì¼ ë•Œ, ì•„ë˜ ê³µì‹ì´ ì„±ë¦½í•œë‹¤.  \n  $P(A) = \\sum_{i=1}^{n}{P(A,B_i)} = \\sum_{i=1}^{n}{P(A|B_i)P(B_i)}$\n- **Bayes' Theorem**  \n  ë§Œì•½ $P(B) \\neq 0$ë¼ë©´, ì•„ë˜ ê³µì‹ì´ ì„±ë¦½í•œë‹¤. ê°„ë‹¨íˆ conditional probabilityë¥¼ í’€ì–´ì£¼ë©´ ì•„ë˜ ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.  \n  $P(A|B) = {P(B|A)P(A)\\over{P(B)}}$  \n  í•´ë‹¹ ì‹ì€ ë‹¨ìˆœíˆ Joint Probabilityë¡œ ë³€í™˜í•˜ê³ , ë‹¤ì‹œ ë°˜ëŒ€ í™•ë¥ ë¡œ ë³€ê²½í–ˆì„ ë¿ì´ë‹¤. ì´ ê³µì‹ì´ ì¤‘ìš”í•˜ë‹¤ê¸° ë³´ë‹¤ëŠ” ì´ ê³µì‹ì´ ê°€ì§€ëŠ” ì˜ë¯¸ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. í™•ë¥ ì„ ì‚¬ê±´ì˜ ë°œìƒì˜ ë¹ˆë„ë¡œ ì´í•´í•˜ëŠ” Frequentist Approachì—ì„œëŠ” ê´€ì¸¡ì„ í†µí•´ì„œ íŠ¹ì • ë°ì´í„°ê°€ ë°œìƒí•  í™•ë¥ ì„ ì–»ëŠ”ë‹¤. ë§Œì•½ ìš°ë¦¬ê°€ ì›í•˜ëŠ” í™•ë¥ ì´ ê´€ì¸¡ì„ í†µí•´ì„œëŠ” ì–»ì„ ìˆ˜ ì—†ëŠ” ë°ì´í„°ë¼ê³  í•˜ì. ì´ ê²½ìš°ì— ìš°ë¦¬ëŠ” í™•ë¥ ì˜ ì—­ì—°ì‚°ì´ í•„ìš”í•˜ë‹¤. ìœ„ì˜ ê³µì‹ì„ ë³´ë©´ íŠ¹ì´í•œ ê²ƒì´ ë³´ì´ëŠ”ë°, ë°”ë¡œ $P(A|B)$ì™€ $P(A)$ì´ë‹¤. ì´ëŠ” ì „ì²´ í™•ë¥ ì„ í†µí•´ì„œ **Conditional Probability**ë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ê¸°ì— ìš°ë¦¬ëŠ” ì´ë¥¼ ì—­ì—°ì‚°ì´ë¼ê³  ë¶€ë¥´ë©°, ìš°ë¦¬ê°€ ê°€ì§€ê³  ìˆëŠ” ê¸°ì¡´ **ì‚¬ì „ í™•ë¥ **(Priority, ì´ì „ê¹Œì§€ ë§ì„ ê±°ë¼ê³  ìƒê°í•œ í™•ë¥ )ì„ í†µí•´ì„œ ë°ì´í„°ê°€ ì£¼ì–´ì¡Œì„ ë•Œì˜ ì‚¬ê±´ì˜ í™•ë¥ ì„ ë‹¤ì‹œ ê³„ì‚°í•´ë³´ëŠ” ê²ƒì´ë‹¤. ì´ ê³¼ì •ì„ **Bayesian Update**ë¼ê³  í•˜ëŠ”ë° ì´ ê³¼ì •ì„ í†µí•´ì„œ ì–»ì€ $P(A|B)$ë¥¼ ë‹¤ì‹œ ë‹¤ìŒ ë°ì´í„°ì— ëŒ€í•´ì„œëŠ” $P(A)$ë¡œì¨ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë ‡ê²Œ í•´ì„œ ìš°ë¦¬ëŠ” ì ì§„ì ìœ¼ë¡œ $P(A)$ë¥¼ ì°¾ì•„ë‚˜ê°ˆ ìˆ˜ ìˆë‹¤.\n\n### Random Variable\n\nRandom Variableì´ë¼ëŠ” ê²ƒì€ íŠ¹ì • ì‚¬ê±´ì„ ìˆ˜í•™ì ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ ë³€í˜•í•˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤. ìš°ë¦¬ëŠ” ì´ì „ ì˜ˆì‹œì—ì„œ ë‘ ê°œì˜ ë™ì „ì„ ë™ì‹œì— ë˜ì ¸ì„œ ë‚˜ì˜¨ ê²°ê³¼ë¥¼ Sample Spaceë¡œ ë‘ì—ˆê³ , ì´ë¥¼ $\\Omega = $ $\\{ hh, ht, th, tt \\}$ë¼ê³  í‘œí˜„í–ˆë‹¤. í•˜ì§€ë§Œ, ì´ì™€ ê°™ì€ í‘œê¸° ë°©ì‹ì€ ìˆ˜í•™ì ì¸ ì—°ì‚°ì„ ì ìš©í•˜ê¸° ì–´ë µë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì•ë©´ì´ ë‚˜ì˜¨ ê²½ìš°ë¥¼ $X=1$, ë’·ë©´ì´ ë‚˜ì˜¨ ê²½ìš°ë¥¼ $X=-1$ ë¼ê³  í•˜ëŠ” í˜•íƒœë¡œ ì¹˜í™˜í•˜ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ë§Œë“¤ì–´ì§„ Xë¥¼ ìš°ë¦¬ëŠ” Random Variableì´ë¼ê³  ë¶€ë¥¸ë‹¤. ì´ëŸ° ì¹˜í™˜ì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” í™•ë¥ ì„ Random Variableì— ëŒ€í•œ í•¨ìˆ˜ë¡œ í‘œí˜„í•  ìˆ˜ ìˆë‹¤.\n\në˜, Random Variableì„ ì •ì˜í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ ê°’ì„ ì—°ì†ì ìœ¼ë¡œ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n- **Mean**  \n  Random Variableì˜ í‰ê·  ë˜ëŠ” ê¸°ëŒ“ê°’ì´ë¼ê³  ë¶€ë¥¸ë‹¤.  \n  $\\mu_{X} = E[X] = \\sum_{x}{xP(X=x)}$\n- **Variance**  \n  í‰ê· ì—ì„œ ë°ì´í„°ê°€ ë–¨ì–´ì§„ ì •ë„ë¥¼ í‘œí˜„í•˜ëŠ” ê°’ìœ¼ë¡œ ë¶„ì‚°ì´ë¼ê³  ë¶€ë¥¸ë‹¤.  \n  $\\sigma_{X}^{2} = E[(X-\\mu_{X})^2] = E[X^2] -\\mu_{X}^{2}$\n- **Covariance**  \n  Random Variable Xì™€ Yì˜ ìƒê´€ê´€ê³„(Correlation)ì„ í™•ì¸í•˜ëŠ” ì²™ë„ë¡œ ì‚¬ìš©í•œë‹¤.  \n  $cov(X, Y) = E[(X-\\mu_{X})(Y-\\mu_{Y})] = E[XY] -\\mu_{X}\\mu_{Y}$  \n  ë§Œì•½, ë‘ Xì™€ Yê°€ ì„œë¡œ ì „í˜€ ìƒê´€ì´ ì—†ë‹¤(Independent)ë©´, $cov(X, Y) = 0$ì´ë‹¤. ê·¸ ë°˜ëŒ€ëŠ” ì„±ë¦½í•˜ì§€ ì•Šì§€ë§Œ, ê·¸ëŸ´ ê°€ëŠ¥ì„±ì´ êµ‰ì¥íˆ ë†’ì•„ì§„ë‹¤.\n- **Correlation Coefficient**  \n  Covarianceë³´ë‹¤ ë” ì—„ê²©í•œ ìƒê´€ê´€ê³„ë¥¼ í™•ì¸í•˜ëŠ” ì²™ë„ë¡œ ì‚¬ìš©ë˜ëŠ”ë°, ë‹¨ìˆœíˆ Covarianceë¥¼ ê° í‘œì¤€í¸ì°¨($\\sigma$)ë¡œ ë‚˜ëˆˆ ê²ƒì´ë‹¤. ì´ë¡œ ì¸í•´ ê²°ê³¼ ê°’ì€ [-1, 1] ì‚¬ì´ ê°’ì´ ëœë‹¤.  \n  $corr(X, Y) = {cov(X,Y)\\over{\\sigma_{X}\\sigma_{Y}}}$  \n  ë”°ë¼ì„œ, <mark>1ì¼ ìˆ˜ë¡ ë‘ Random Variableì˜ ìƒê´€ì„±ì´ ë†’ìœ¼ë©° ë¹„ë¡€í•˜ëŠ” ê´€ê³„ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•˜ë©°, -1ì¼ ê²½ìš°ì—ëŠ” ìƒê´€ì´ ë†’ì§€ë§Œ ë°˜ë¹„ë¡€í•˜ëŠ” ê´€ê³„ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ë°˜ëŒ€ë¡œ, 0ì¸ ê²½ìš°ëŠ” ìƒê´€ ê´€ê³„ê°€ ì•„ì£¼ ë‚®ìŒìœ¼ë¡œ ë…ë¦½ì¼ ê°€ëŠ¥ì„±ì´ ë†’ë‹¤.</mark> ê·¸ë ‡ë‹¤ê³  100%ëŠ” ì•„ë‹ˆì§€ë§Œ, ë‹¨ì§€ ê·¸ëŸ´ í™•ë¥ ì´ êµ‰ì¥íˆ ë†’ë‹¤ëŠ” ê²ƒì´ë‹¤. ì£¼ì˜í•  ì ì€ Correlation Coefficientê°€ 1ì´ë¼ê³  Xê°€ Yì˜ ì›ì¸ì´ ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë¼ëŠ” ê²ƒì„ ìœ ì˜í•´ì•¼ í•œë‹¤. ë‹¨ìˆœíˆ Xê°€ ì¼ì–´ë‚¬ì„ ë•Œ, Yê°€ ì¼ì–´ë‚  í™•ë¥ ì´ ë†’ë‹¤ëŠ” ê²ƒì´ë‹¤.  \n\n### Law of Large Numbers\n\nê²½í—˜ì  í™•ë¥ ê³¼ ìˆ˜í•™ì  í™•ë¥  ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë²•ì¹™ìœ¼ë¡œ, ì „ì²´ ê²½ìš°ì˜ ìˆ˜ì™€ ì´ì— ë”°ë¥¸ í™•ë¥ (ëª¨ì§‘ë‹¨)ì´ ìˆì„ ë•Œ, ê´€ì¸¡í•œ ê²½ìš°ì˜ ìˆ˜ì™€ ì´ì— ë”°ë¥¸ í™•ë¥ (í‘œë³¸ ì§‘ë‹¨)ì€ ê´€ì¸¡ ë°ì´í„°ì˜ í¬ê¸°ê°€ ì»¤ì§ˆ ìˆ˜ë¡ í‘œë³¸ í‰ê· ì´ ëª¨í‰ê· ì— ê°€ê¹Œì›Œì§ì„ ì˜ë¯¸í•œë‹¤.\n\n### ìì£¼ ì‚¬ìš©ë˜ëŠ” Probability Distribution Function\n\níŠ¹ì • taskì˜ ê²½ìš° ì´ë¯¸ ì •ì˜ëœ í™•ë¥  ë¶„í¬ë¥¼ í†µí•´ì„œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ê²½ìš°ê°€ ìˆë‹¤. ë”°ë¼ì„œ, ì•„ë˜ì™€ ê°™ì€ ëŒ€í‘œì ì¸ í™•ë¥  ë¶„í¬ëŠ” ì•Œì•„ë‘ëŠ” ê²ƒì€ ì¤‘ìš”í•˜ë‹¤.\n\n- **Bernoulli distribution**  \n  í•˜ë‚˜ì˜ ì‚¬ê±´ì´ ì¼ì–´ë‚  í™•ë¥ ì„ ì˜ë¯¸í•œë‹¤. ë°œìƒí•˜ëŠ” ê²½ìš°ë¥¼ X=1, ê·¸ë ‡ì§€ ì•Šì€ ê²½ìš°ë¥¼ X=0ìœ¼ë¡œ random variableë¡œ ì¹˜í™˜í•˜ì—¬ ë‚˜íƒ€ë‚¸ í™•ë¥  ë¶„í¬(probability distribution)ì´ë‹¤. ëŒ€í‘œì ì¸ ì‚¬ê±´ì€ ë™ì „ ë˜ì§€ê¸°ì™€ ê°™ì€ ë‘ ê°œì˜ ê²°ê³¼ë§Œ ê°–ëŠ” binary eventì„ í‘œí˜„í•  ë•Œì´ë‹¤.  \n  ë”°ë¼ì„œ, ì‚¬ê±´ì´ ì¼ì–´ë‚  í™•ë¥ ì„ pë¼ê³  í•  ë•Œ, ë‹¤ìŒê³¼ ê°™ì´ Random Variableì— ëŒ€í•œ í™•ë¥ ì„ ì •ì˜í•  ìˆ˜ ìˆë‹¤.  \n  $P(X=x) = p^{x}(1-p)^{1-x}$ \n  ë³µì¡í•´ë³´ì´ì§€ë§Œ, ì‹¤ìƒì€ Xê°€ 0 ë˜ëŠ” 1ì´ë¯€ë¡œ, $P(X=0)=1-p$ì´ê³ , $P(X=1)=p$ì´ë‹¤.\n  - í‰ê·       \n    $E[X] = p$\n  - ë¶„ì‚°  \n    $Var[X] = E[X^2] - \\mu_{X}^2 = p - p^2 = p(1-p)$\n- **Binomial Distribution**  \n  í™•ë¥ ì´ pì¸ ì‚¬ê±´ì„ në²ˆ ìˆ˜í–‰í–ˆì„ ë•Œ, xë²ˆ ë°œìƒí•  í™•ë¥ ì„ ì˜ë¯¸í•œë‹¤. ë”°ë¼ì„œ, Random Variable Xì˜ ë²”ìœ„ëŠ” {0, 1, â€¦, n}ì´ ëœë‹¤. ëŒ€í‘œì ì¸ ì‚¬ê±´ì€ ë™ì „ ë˜ì§€ê¸°ë¥¼ ì—¬ëŸ¬ ë²ˆ ë˜ì¡Œì„ ë•Œ, ì• ë©´ì´ xë²ˆ ë‚˜ì˜¬ ê²½ìš°ì˜ ìˆ˜ì´ë‹¤.  \n  ì´ì— ë”°ë¼ Random Variableì— ëŒ€í•œ í™•ë¥ ì„ ì •ì˜í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.  \n  $P(X=x) = {n \\choose x}p^x(1-p)^{n-x}$  \n  ì´ ë˜í•œ ë³µì¡í•´ ë³´ì´ì§€ë§Œ, ì‚¬ì‹¤ì€ ë…ë¦½ì ì¸ Bernoulliì˜ ì—°ì† ìˆ˜í–‰ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤.  \n  - í‰ê·   \n    $E[X] = np$\n  - ë¶„ì‚°  \n    $Var[X] = Var[\\sum_{i}X_i]=\\sum_iVar[X_i]=np(1-p)$\n- **Beta Distribution**  \n  $\\alpha, \\beta > 0$ë¥¼ ë§Œì¡±í•˜ëŠ” ë‘ parameterë¥¼ ì´ìš©í•œ probability distributionì´ë‹¤.  \n  ì´ëŠ” [0, 1]ì—ì„œ continuousí•œ random variableë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‹¤. ì´ì— ë”°ë¥¸ í™•ë¥ ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  \n  $P(X=x) \\propto x^{\\alpha-1}(1-x)^{\\beta-1}$  \n  ì´ì— ëŒ€í•œ ì˜ë¯¸ë¥¼ ì´í•´í•˜ìë©´, í™•ë¥ ì— ëŒ€í•œ í™•ë¥  ë¶„í¬ì´ë‹¤. ê° $\\alpha - 1$ì™€ $\\beta - 1$ë¥¼ ì„±ê³µ íšŸìˆ˜, ì‹¤íŒ¨ íšŸìˆ˜ë¼ê³  í•˜ì.  ì´ëŠ” ì´ë¯¸ ì•Œê³  ìˆëŠ” ëª¨ì§‘ë‹¨(ì „ì²´ ì§‘í•©)ì˜ ê³„ì‚° ê²°ê³¼ì´ë‹¤. ê·¸ë¦¬ê³  random variableì„ íŠ¹ì • eventì˜ í™•ë¥ ì´ë¼ê³  í•˜ì. ì˜ˆë¥¼ë“¤ë©´, ë™ì „ ë˜ì§€ê¸°ë¥¼ í•  ë•Œ, ì•ë©´ì´ ë‚˜ì˜¬ í™•ë¥ ì´ $1\\over2$ì´ë¼ëŠ” ê²ƒì„ ì´ë¯¸ ì•Œê³  ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” $\\alpha - 1$ = $\\beta - 1$ ë¼ëŠ” ê²ƒì„ ì•Œê³  ìˆëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ë™ì „ ë˜ì§€ê¸°ë¥¼ 5ë²ˆ ìˆ˜í–‰í–ˆì„ ë•Œ, 4ë²ˆ ì•ë©´ì´ ë‚˜ì™”ë‹¤ê³  í•˜ì. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ì¶”ì¸¡í•œ í•´ë‹¹ eventì˜ í™•ë¥ ì€ $4\\over5$ì´ ëœë‹¤. ê·¸ë ‡ë‹¤ë©´, ì‹¤ì œë¡œ í•´ë‹¹ í™•ë¥ ì´ $4\\over5$ì¼ í™•ë¥ ì„ ì–¼ë§ˆë‚˜ ë ê¹Œ?  \n  ì´ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•œ ê²ƒì´ Beta distributionì¸ ê²ƒì´ë‹¤. ì´ì— ë”°ë¼, Beta distributionì„ PDFë¡œ í‘œí˜„í•˜ë©´ ${\\alpha\\over\\alpha+\\beta}$ì—ì„œ ë†’ì€ í™•ë¥ ê°’ì„ ê°€ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n  - í‰ê·   \n    $E[X] = {\\alpha\\over{\\alpha+\\beta}}$\n  - ë¶„ì‚°  \n    $Var[X] = {\\alpha\\beta\\over{(\\alpha+\\beta)^2(\\alpha+\\beta+1)}}$\n\n  ìœ„ì˜ í‰ê· ê³¼ ë¶„ì‚°ì„ ë³´ë©´ ì•Œ ìˆ˜ ìˆë“¯ì´, ë§Œì•½ ì´ì „ ëª¨ì§‘ë‹¨ì—ì„œì˜ í‰ê· ê°’ì— ëŒ€í•œ ë¯¿ìŒì´ í¬ë‹¤ë©´, ê°ê°  $\\alpha, \\beta$ì˜ ë¹„ìœ¨ì€ ìœ ì§€í•˜ë©´ì„œ ìƒìˆ˜ë°°ë¥¼ ìˆ˜í–‰í•˜ì—¬ í‰ê· ì€ ë™ì¼í•˜ì§€ë§Œ ë¶„ì‚° ê°’ì„ ë” ì ê²Œ ë§Œë“¤ì–´ ë¾°ì¡±í•œ í˜•íƒœì˜ ë¶„í¬ë¥¼ ì™„ì„±í•  ìˆ˜ë„ ìˆë‹¤. ì´ ê²½ìš°ì—ëŠ” í‰ê· ê³¼ ë§ì§€ ì•ŠëŠ” í‘œë³¸ì§‘í•©ì—ì„œì˜ í‰ê· ì„ êµ‰ì¥íˆ í™•ë¥ ì´ ë‚®ì€ í™•ë¥ ë¡œ ì‹ë³„í•˜ëŠ” ê²ƒì´ë‹¤.\n- **Gaussian Distribution**  \n  $\\mu, \\sigma^2$ë¥¼ parameterë¡œ ê°–ëŠ” probability distributionì´ë‹¤.\n    \n  ì´ëŠ” $[-\\infin, \\infin]$ë¥¼ êµ¬ê°„ìœ¼ë¡œ continuousí•œ random varibleì„ ì´ìš©í•œë‹¤. ì´ì— ë”°ë¥¸ í™•ë¥ ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. (ë‹¨ì¼ random variableì¸ ê²½ìš°)\n  \n  $P(X) = {1\\over{\\sqrt{2\\pi\\sigma^2}}}\\exp(-{1\\over{2\\sigma^2}}(X-\\mu)^2)$\n\n  ì´ ë¶„í¬ëŠ” êµ‰ì¥íˆ ë§ì€ ê³³ì— ì‚¬ìš©ë˜ëŠ”ë° <mark>ìš°ë¦¬ê°€ ìƒê°í•  ìˆ˜ ìˆëŠ” ëŒ€ê²Œì˜ ìì—° ë°œìƒì— ì˜í•œ í˜„ìƒë“¤(ex. ì‚¬ëŒ í‚¤ì˜ ë¶„í¬)ì´ ì´ ë¶„í¬ë¥¼ ë”°ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.</mark> ê·¸ë ‡ê¸°ì— ë‹¤ì–‘í•œ í™˜ê²½ì—ì„œ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë¶„í¬ì´ë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ (Lindeberg-Levy) **Central Limit Theoriem**ì— ë”°ë¥´ë©´, í‘œë³¸ì—ì„œ ì–»ì€ í‘œë³¸ í‰ê· ì„ êµ¬í•˜ë©´ êµ¬í•  ìˆ˜ë¡ ì ì  Gaussian Distributionì„ ë”°ë¼ê°„ë‹¤. ì¦‰, $n \\rarr \\infin$ì´ë©´, í‘œë³¸ í‰ê· ì´ ì´ë£¨ëŠ” ë¶„í¬ê°€ Gaussianì´ë¼ëŠ” ê²ƒì´ë‹¤.\n  \n  ì¶”ê°€ì ìœ¼ë¡œ ì•Œì•„ë³¼ ê²ƒì€ ë°”ë¡œ ì—¬ëŸ¬ ê°œì˜ Random Variableë¡œ Gaussian Distributionì„ ë” ë†’ì€ ì°¨ì›ìœ¼ë¡œ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ìˆ˜í–‰í•˜ë©´, Gaussian ë¶„í¬ê°€ í‰ê· ê³¼ ë¶„ì‚°ì„ í¬í•¨í•˜ê¸° ë•Œë¬¸ì— ë‘ ë°ì´í„°ì˜ ê²½í–¥ì„±(Covariance)ë¥¼ ì–´ëŠì •ë„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.\n\n## Calculus\n\nì¼ëª… ë¯¸ì ë¶„í•™ìœ¼ë¡œ, ëŒ€ê²Œì˜ ë¯¸ì ë¶„ ë²•ì¹™ì€ ëª¨ë‘ ì•Œê³  ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•˜ê³  ë„˜ì–´ê°„ë‹¤.\n\n### Optimization\n\nì •ë§ ëª¨ë‘ê°€ ì•Œê³  ìˆì„ ê±° ê°™ì§€ë§Œ, ê·¸ëŸ¼ì—ë„ ì¤‘ìš”í•˜ê¸° ë•Œë¬¸ì— ì •ë¦¬í•˜ê³  ë„˜ì–´ê°€ì. ì¼ë°˜ì ìœ¼ë¡œ Optimizationì´ë€ ìµœì ê°’ì„ ì°¾ëŠ” ê³¼ì •ì´ë‹¤. ì´ ê³¼ì •ì—ì„œ ëŒ€ê²Œ ì‚¬ìš©ë˜ëŠ” ê²ƒì´ ìµœì†Ÿê°’ ë˜ëŠ” ìµœëŒ“ê°’ì´ë‹¤. ìš°ë¦¬ëŠ” ìµœì†Ÿê°’/ìµœëŒ“ê°’ì„ ë¯¸ë¶„ì„ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\nì—¬ê¸°ì„œëŠ” Convexë¼ëŠ” ì„±ì§ˆì— ëŒ€í•´ì„œ ìì„¸íˆ ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤. ì‹œê°„ì´ ìˆë‹¤ë©´, ì´ì—ëŒ€í•œ ê°œë…ë„ ë°˜ë“œì‹œ ìˆ™ì§€í•˜ê¸°ë¥¼ ë°”ë€ë‹¤.\n\n> **ìµœëŒ€/ìµœì†Œ êµ¬í•˜ê¸°**\n\nëª¨ë‘ê°€ ì•Œë‹¤ì‹œí”¼ í•¨ìˆ˜ì˜ ë¯¸ë¶„ì€ ê¸°ìš¸ê¸°ë¥¼ ì˜ë¯¸í•œë‹¤. ë§Œì•½ í•¨ìˆ˜ì˜ ë¯¸ë¶„ì— íŠ¹ì • ê°’ì„ ëŒ€ì…í•  ê²½ìš° ì´ëŠ” ê·¸ ì§€ì ì—ì„œì˜ ê¸°ìš¸ê¸°ë¥¼ ì˜ë¯¸í•œë‹¤.\n\në¨¼ì €, í•¨ìˆ˜ì˜ ë¯¸ë¶„ì— ëŒ€ì…í•œ ê°’ì´ 0ì¸ ê²½ìš°ì— í•´ë‹¹ ê°’(ê·¹ê°’)ì´ ê°€ì§€ëŠ” ì„±ì§ˆì„ ê¸°ì–µí•´ì•¼ í•œë‹¤. ë§Œì•½, ê°’ì´ 0ìœ¼ë¡œ í•˜ëŠ” ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì¢Œìš° ë¶€í˜¸ê°€ ë°”ë€ë‹¤ë©´, ì´ëŠ” ì •ë§ ê·¹ëŒ€, ê·¹ì†Œë¼ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤. ì¦‰, í•´ë‹¹ êµ¬ê°„ì—ì„œ ìµœì†Œì™€ ìµœëŒ€ë¼ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” ê²ƒì´ë‹¤.\n\nì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” í•¨ìˆ˜ì˜ ê¸°ìš¸ê¸°ì˜ ë¶€í˜¸ê°€ ë°”ë€Œì—ˆë‹¤ëŠ” ì˜ë¯¸ë¥¼ ì‚´í´ë³´ì•„ì•¼ í•œë‹¤. ì´ëŠ” í•¨ìˆ˜ì˜ ê°’ì´ êµ¬ê°„ ë‚´ì—ì„œ ê°€ì¥ ì‘ì€ ê°’(ê·¹ì†Œ) ë˜ëŠ” êµ¬ê°„ ë‚´ì—ì„œ ê°€ì¥ í° ê°’(ê·¹ëŒ€)ë¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ì™œëƒí•˜ë©´, ì§ê´€ì ìœ¼ë¡œ ê¸°ìš¸ê¸°ê°€ 0ì´ ë˜ê¸° ì „ê¹Œì§€ëŠ” ê³„ì†í•´ì„œ ì¦ê°€/ê°ì†Œí•´ì™”ë‹¤ëŠ” ê²ƒì„ ì•Œê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ê¸°ìš¸ê¸°ê°€ 0ì¸ ì§€ì ì„ ëª¨ë‘ ì°¾ì•„ ë¹„êµí•˜ë©´, ê·¸ ì•ˆì—ì„œ ìµœëŒ€/ìµœì†Œë¥¼ ì°¾ì„ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\nê·¸ëŸ°ë° ì–´ë–»ê²Œ í•˜ë©´, ê¸°ìš¸ê¸°ê°€ 0ì¸ ì§€ì ì´ ê·¹ëŒ€ì¸ì§€ ê·¹ì†Œì¸ì§€ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆì„ê¹Œ? ì´ê²ƒì€ ë°”ë¡œ ì§ì „ì˜ ê°’ì„ ë¯¸ë¶„ í•¨ìˆ˜ì— ëŒ€ì…í•´ë³´ë©´ ì‰½ê²Œ ì•Œ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒì´ ë§¤ë²ˆ ê·¸ë ‡ê²Œ ì‰½ê²Œ íŒë³„ë˜ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ì¤‘ ë¯¸ë¶„ì„ ì‚¬ìš©í•œë‹¤. ì´ì¤‘ ë¯¸ë¶„ í•¨ìˆ˜ì— ê·¹ê°’ì„ ëŒ€ì…í–ˆì„ ë•Œ ì–‘ìˆ˜ë¼ë©´ ì´ëŠ” ê·¹ì†Œë¥¼ ì˜ë¯¸í•˜ê³ , ìŒìˆ˜ì¸ ê²½ìš°ëŠ” ê·¹ëŒ€ë¥¼ ì˜ë¯¸í•œë‹¤. ì´ ë˜í•œ, ì§ê´€ì ìœ¼ë¡œ ê¸°ìš¸ê¸°ì˜ ë³€í™”ëŸ‰ì´ë¼ëŠ” ì´ì¤‘ ë¯¸ë¶„ì˜ ì •ì˜ë¥¼ ì•Œë©´, ì§ê´€ì ìœ¼ë¡œ ì™€ë‹¿ì„ ìˆ˜ ìˆë‹¤.\n\nì´ë ‡ê²Œ í•´ì„œ ê·¹ëŒ€ì™€ ê·¹ì†Œë¥¼ ê³¨ë¼ë‚´ê³ , ì´ì¤‘ì—ì„œ ê°€ì¥ í° ê°’ê³¼ ê°€ì¥ ì‘ì€ ê°’ì„ ì°¾ì•„ë‚´ë©´, ìš°ë¦¬ëŠ” ì´ê²ƒì„ í•¨ìˆ˜ì˜ ìµœì í™”ë¥¼ ìˆ˜í–‰í–ˆë‹¤ê³  í•œë‹¤.\n\n### Constraint Optimization\n\nì—¬ê¸°ì„œëŠ” íŠ¹ë³„í•œ caseë¥¼ ìœ„í•œ ì˜ˆì‹œì´ë‹¤. íŠ¹ì • ì¡°ê±´ì´ ì£¼ì–´ì¡Œì„ ë•Œ, ì´ë¥¼ ë§Œì¡±í•˜ë©´ì„œ íŠ¹ì • í•¨ìˆ˜ì˜ optimizationì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ë‹¤.\n\nê·¸ëŸ¬ë©´ ìš°ë¦¬ê°€ ìµœì í™”í•˜ê³ ì í•˜ëŠ” ëª©ì í•¨ìˆ˜($\\mathcal{J}(\\bold{x})$)ì™€ ë“±ì‹ ì œì•½ ì¡°ê±´($h_{j}(\\bold{x})$), ë¶€ë“±ì‹ ì œì•½ ì¡°ê±´($g_{i}(\\bold{x})$)ì„ ì‚´í´ë³´ì.\n\nìš°ë¦¬ëŠ” ëª¨ë“  ìµœì í™” ë¬¸ì œë¥¼ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¡œ ë¬˜ì‚¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\n  \\text{minimize}   \\quad & \\mathcal{J}(\\bold{x}) &\\\\\n  \\text{subject to} \\quad & g_{i}(\\bold{x}) \\leq 0, & i = 1, ..., M \\\\\n                          & h_{j}(\\bold{x}) = 0, & j = 1, ..., L\n\\end{align*}\n$$\n\nmaximizationì¸ ê²½ìš°ëŠ” ìŒìˆ˜ë¥¼ ì·¨í•´ì„œ ê²°ê³¼ë¥¼ êµ¬í•œ í›„ ë³€í™˜ ì‹œì— ë‹¤ì‹œ ìŒìˆ˜ë¥¼ ì·¨í•´ì£¼ë©´ ëœë‹¤. ê·¸ë¦¬ê³  ë¶€ë“±í˜¸ê°€ ë°˜ëŒ€ì¸ ì œì•½ ì¡°ê±´ì¸ ê²½ìš°ì—ë„ ì–‘ë³€ì— ìŒìˆ˜ë¥¼ ì·¨í•´ì„œ ê°„ë‹¨í•˜ê²Œ ë’¤ì§‘ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\nì´ëŸ¬í•œ ë¬¸ì œë¥¼ í’€ê¸° ìœ„í•´ì„œëŠ” ìš°ë¦¬ëŠ” ì‹ì„ **Lagrangian** í˜•íƒœë¡œ ë³€í™˜í•´ì•¼ í•œë‹¤.\n\n> **Lagrangian**\n\nì´ëŠ” ì¡°ê±´ë¶€ì‹ì— ìˆëŠ” ì¡°ê±´ì— ë³€ìˆ˜($\\nu$, $\\lambda$)ë¥¼ ê³±í•œ ê°’ì˜ í•©ê³¼ ì›ë˜ ëª©ì  í•¨ìˆ˜($\\mathcal{J}(\\bold{x})$)ì˜ í•©ì´ë‹¤.\n\n$$\n\\mathcal{L}(\\bold{x}, \\boldsymbol{\\nu}, \\boldsymbol{\\lambda}) = \\mathcal{J}(\\bold{x}) + \\sum_{i=1}^{M}{\\nu_{i}g_{i}(\\bold{x})} + \\sum_{j=1}^{K}{\\lambda_{j}h_{j}(\\bold{x})}\n$$\n\nì—¬ê¸°ì„œ **Lagrangian** í•¨ìˆ˜ì˜ optimizationì´ ê³§ ëª©ì í•¨ìˆ˜ì˜ optimizationì´ë‹¤. ì¦ëª…ì€ ìˆ˜í–‰í•˜ì§€ ì•ŠëŠ”ë‹¤. ì´ì— ëŒ€í•œ ì¶”ê°€ì ì¸ ì„¤ëª…ì´ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ì§ì ‘ ì°¾ì•„ë³´ì•„ì•¼í•  ê²ƒì´ë‹¤.  \nì—¬ê¸°ì„œ ë§Œì•½ ë“±ì‹ë§Œ ìˆëŠ” ì‹ì¸ ê²½ìš°ì— ìš°ë¦¬ëŠ” ê°„ë‹¨íˆ ëª¨ë“  ë³€ìˆ˜ì— ëŒ€í•´ì„œ í¸ë¯¸ë¶„ì´ 0ì´ ë˜ëŠ” ë“±ì‹ì„ ì´ìš©í•´ì„œ, ìµœì  $\\bold{x}$ë¥¼ ì°¾ì„ ìˆ˜ ìˆë‹¤. ìœ„ì— ì‹ì—ì„œ ë¶€ë“±ì‹ ì¡°ê±´($g_{i}(\\bold{x})$)ì´ ì‚¬ë¼ì§„ë‹¤ë©´, ìš°ë¦¬ëŠ” ë¯¸ë¶„ì„ í†µí•´ì„œ ì²˜ë¦¬í•´ì•¼í•˜ëŠ” ê°’ì€ ì´ xì˜ í¬ê¸°(N)ì™€ Lì´ë‹¤. ì´ëŠ” ìš°ë¦¬ê°€ í¸ë¯¸ë¶„í•´ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” ì‹ì˜ ê°¯ìˆ˜ì™€ ë˜‘ê°™ë‹¤. ì¦‰, ìš°ë¦¬ê°€ ëª¨ë¥´ëŠ” ë³€ìˆ˜ëŠ” N+Mê°œ ìš°ë¦¬ê°€ ê°€ì§„ ë“±ì‹ì€ N+Mê°œì´ë¯€ë¡œ ì—°ë¦½í•´ì„œ ê° ê°’ì„ êµ¬í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\ní•˜ì§€ë§Œ, ë¶€ë“±ì‹ì¸ ê²½ìš°ì—ëŠ” ì¶”ê°€ì ìœ¼ë¡œ ê³ ë ¤í•´ì¤˜ì•¼í•  ê²ƒì´ ìˆë‹¤.\n\n> **KKT Condition**\n\nì´ëŠ” ìš°ë¦¬ê°€ ìµœì ê°’($\\bold{x}_{*}$)ë¥¼ ì°¾ì•˜ì„ ë•Œ, ë‹¤ìŒê³¼ ê°™ì€ $\\boldsymbol{\\nu_{*}}$, $\\boldsymbol{\\lambda_{*}}$ê°€ ì¡´ì¬í•´ì•¼ í•œë‹¤ëŠ” ì •ë¦¬ì´ë‹¤.\n\n1. **Optimality**  \n   $\\nabla\\mathcal{L} = \\nabla\\mathcal{J}(\\bold{x}_{*}) + \\sum_{i=1}^{M}{\\nu_{*(i)}\\nabla g_{i}(\\bold{x}_{*})} + \\sum_{j=1}^{L}{\\lambda_{*(j)}\\nabla h_{j}(\\bold{x}_{*})} = 0$  \n   ìœ„ì—ì„œ ë³´ì•˜ë˜ ìµœì í™”ë¥¼ ìˆ˜í–‰í•˜ëŠ” ì‹ì´ë‹¤.\n2. **Feasibility**  \n   $g_{i}(\\bold{x}_{*}) \\leq 0,  i = 1, ..., M$  \n   $h_{j}(\\bold{x}_{*}) = 0,  j = 1, ..., L$  \n   ì¡°ê±´ì´ ë§Œì¡±í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤.\n3. **Complementary slackness**  \n   $\\nu_{*(i)}g_{i}(\\bold{x}_{*}) = 0, i = 1, ..., M\\quad(\\nu_{*(i)} \\geq 0)$  \n   ìœ„ì˜ ì‹ì€ ë‹¤ì†Œ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë° ê°€ì¥ ì•Œì•„ë“£ê¸° ì‰¬ìš´ í˜•íƒœëŠ” ì•„ë˜ì´ë‹¤.  \n   $g_{i}(\\bold{x}_{*}) \\lt 0\\text{, then } \\nu_{*(i)} = 0$  \n   $g_{i}(\\bold{x}_{*}) = 0\\text{, then } \\nu_{*(i)} > 0$\n\nìœ„ì˜ ì‹ì„ ë§Œì¡±í•˜ëŠ” $\\bold{x}_{*}$, $\\boldsymbol{\\nu_{*}}$, $\\boldsymbol{\\lambda_{*}}$ë¥¼ ì°¾ìœ¼ë©´, ê·¸ê²ƒì´ ìµœì ê°’ì—ì„œì˜ $\\bold{x}_{*}$ì´ë‹¤.\n\n> **Lagrangian Dual Problem**\n\nì—¬ê¸°ì„œ í•œ ë°œ ë” ë‚˜ì•„ê°€ë©´, Lagrangianì— ë‹¤ì‹œ í•œë²ˆ Lagrangianì„ ì·¨í•  ìˆ˜ ìˆë‹¤.\n\nìš°ë¦¬ê°€ ë§Œì•½ Lagrangianì˜ í•˜í•œì„ $\\mathcal{G}(\\boldsymbol{\\nu}, \\boldsymbol{\\lambda})$ì´ë¼ í•˜ê³ , \n\n$$\n\\mathcal{G}(\\boldsymbol{\\nu}, \\boldsymbol{\\lambda}) = \\inf_{\\bold{x} \\in \\mathcal{X}}\\mathcal{L}(\\bold{x}, \\boldsymbol{\\nu}, \\boldsymbol{\\lambda})\n$$\n\n$\\boldsymbol{f}^{*}$ì„ ìµœì ê°’ì´ë¼ê³  í•œë‹¤ë©´, ì•„ë˜ ì‹ì´ ì„±ë¦½í•œë‹¤.\n\n$$\n\\boldsymbol{f}^{*} \\geq \\min_{\\bold{x}}\\mathcal{L}(\\bold{x}, \\boldsymbol{\\nu}, \\boldsymbol{\\lambda}) := \\mathcal{G}(\\boldsymbol{\\nu}, \\boldsymbol{\\lambda})\n$$\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” $\\mathcal{G}$ì˜ ìµœëŒ“ê°’ì„ ì°¾ìœ¼ë©´ í•´ë‹¹ ê°’ì´ ìµœì í•´ì— ê·¼ì‚¬í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\nì´ëŠ” ìš°ë¦¬ê°€ í’€ê³ ì í•˜ëŠ” ë¬¸ì œì˜ í˜•ì‹ì„ ë‹¤ì‹œ í•œ ë²ˆ ë°”ê¾¸ê²Œ ëœë‹¤.\n\n$$\n\\begin{align*}\n  \\text{minimize}   \\quad & \\mathcal{G}(\\boldsymbol{\\nu}, \\boldsymbol{\\lambda}) &\\\\\n  \\text{subject to} \\quad & \\boldsymbol{\\nu}_{i} \\geq 0, & i = 1, ..., M\n\\end{align*}\n$$\n\nì´ ì‹ì„ KKT conditionì„ ì´ìš©í•˜ì—¬ í‘¸ëŠ” ê²ƒì´ ê¸°ì¡´ ì‹ë³´ë‹¤ ì‰½ê²Œ í’€ ìˆ˜ ìˆëŠ” ê²½ìš°ê°€ ë§ë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ í˜•íƒœë¡œ ë¬¸ì œë¥¼ í’€ì´í•  ìˆ˜ë„ ìˆë‹¤.\n\n## Information Theory\n\n### Entropy\n\nìˆ˜í•™ì—ì„œ ì •ë³´ì˜ ë¶ˆí™•ì‹¤ì„±(uncertainty)ì„ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ ë¬¼ë¦¬ì˜ entropy ë¼ëŠ” ê°œë…ì„ ë„ì…í•œ ê²ƒì´ë‹¤. ì¦‰ ì •ë³´ê°€ ê°€ì§€ëŠ” \"surprise\" ì •ë„ê°€ í¬ë‹¤ë©´, entropyê°€ í° ì •ë³´ë¥¼ ì˜ë¯¸í•˜ê³ , ì¼ë°˜ì ì¸ ì •ë³´ë¼ë©´ ì´ëŠ” entropyê°€ ì‘ì€ ì •ë³´ì¸ ê²ƒì´ë‹¤.\n\nìˆ˜í•™ì ìœ¼ë¡œ ë‹¤ì‹œ ì •ì˜í•˜ìë©´, ë‹¤ìŒê³¼ ê°™ë‹¤.  \nsample space $\\Omega$ì—ì„œ ì •ì˜ëœ random variable $X$ì™€ í™•ë¥  $p_{X}(x)$ì´ ì£¼ì–´ì§ˆ ë•Œ, Entropyë¥¼ $H(x)$ë¼ í•˜ì.\n\n$$\nH(X) = -\\sum_{x \\in \\Omega}p(x)\\log_{2}p(x)\n$$\n\nìœ„ ì‹ì—ì„œ logì˜ ë°‘ì´ 2ì¸ ê²ƒì„ ì•Œ ìˆ˜ ìˆëŠ”ë° computer scienceì—ì„œëŠ” ì •ë³´ê°€ bitë‹¨ìœ„ë¡œ ì €ì¥ë˜ê¸° ë•Œë¬¸ì— ê¸°ë³¸ì ìœ¼ë¡œëŠ” 2ë¥¼ ì‚¬ìš©í•œë‹¤. í•˜ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ì„œëŠ” ë‹¤ë¥¸ ë°‘ì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤.\n\ní—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë° í‘œê¸°ë²•ì´ êµ‰ì¥íˆ ë‹¤ì–‘í•˜ë‹ˆ ìœ ì˜í•´ì„œ ë³´ë„ë¡ í•˜ì.\n\n$$\nH(X) = H_{p}(X) = H(p) = H_{X}(p) = H(p_{X})\n$$\n\n> **ìµœëŒ“ê°’ê³¼ ìµœì†Ÿê°’**\n\nEntropyëŠ” ì •ë³´ì˜ ë¶ˆí™•ì‹¤ì„±ì„ ë‚˜íƒ€ë‚¸ë‹¤ê³  í–ˆë‹¤. ì¦‰, ì •ë³´ê°€ í™•ì‹¤í•  ìˆ˜ë¡ EntrophyëŠ” 0ìœ¼ë¡œ ìˆ˜ë ´í•˜ë©°, í™•ì‹¤íˆ ì•„ëŠ” ì •ë³´ì˜ ê²½ìš° Entropyê°€ ìµœì†Ÿê°’ì¸ 0ì´ ëœë‹¤.  \në°˜ëŒ€ë¡œ Entropyì˜ ìµœëŒ“ê°’ì˜ ê²½ìš° $|\\Omega| = n$ì´ë¼ê³  í•  ë•Œ, $\\log_{2}{n}$ì´ë‹¤. ì´ëŠ” uniform distribution(ëª¨ë“  Random Variableì˜ í™•ë¥ ì´ ê°™ì€ ë¶„í¬)ì¼ ê²½ìš°ì´ë‹¤.\n\n$$\n0 \\leq H(x) \\leq log_{2}{|\\Omega|}\n$$\n\n> **$\\bold{\\log_{2}({1 \\over p_{X}(x)})}$ì˜ í‰ê· **\n\nEntropyë¥¼ random variable xì˜ í™•ë¥ ì˜ ì—­ìˆ˜ì˜ logë¥¼ ì·¨í•œ ê°’ìœ¼ë¡œ í•´ì„í•  ìˆ˜ë„ ìˆë‹¤.\n\n$$\n\\begin{align*}\nE[\\log_{2}(({1 \\over p_{X}(x)})] &= \\sum_{x \\in X}p_{X}(x)\\log_{2}({1 \\over p_{X}(x)}) \\\\\n&= -\\sum_{x \\in X}p_{X}(x)\\log_{2}(p_{X}(x)) \\\\\n&= H(p_{X})\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” $\\log_{2}({1 \\over p_{X}(x)})$ì„ **ì •ë³´ëŸ‰**ì´ë¼ê³  ì •ì˜í•œë‹¤. ì‹ì—ì„œë„ ì•Œ ìˆ˜ ìˆì§€ë§Œ, ì •ë³´ëŸ‰ê³¼ í•´ë‹¹ ì •ë³´ëŸ‰ì„ ì–»ì„ í™•ë¥ ì€ ë°˜ë¹„ë¡€í•œë‹¤.\n\n> **Joint, Conditional Entropy**\n\nRandom Variableì´ ë‘ ê°œ ì´ìƒì¼ ë•Œ, ì´ë¥¼ ì ìš©í•  ìˆ˜ ìˆë‹¤. ìœ ë„ ê³¼ì •ì€ $H(X)$ê°€ Expectationê³¼ ì–´ë–¤ ê´€ê³„ì˜€ëŠ”ì§€ë¥¼ ë– ì˜¬ë ¤ ë³´ë©´ ì•Œ ìˆ˜ ìˆë‹¤.\n\n- **Joint Entropy** : $H(X, Y) = -\\sum_{x \\in \\Omega_{X}}\\sum_{y \\in \\Omega_{Y}}p(x, y)\\log_{2}p(x, y)$\n- **Conditional Entropy** : $H(Y|X) = -\\sum_{x \\in \\Omega_{X}}\\sum_{y \\in \\Omega_{Y}}p(x, y)\\log_{2}p(y|x)$\n\n> **properties**\n\n1. **Chain Rule**  \n   $H(X, Y) = H(Y|X) + H(X)$  \n   $H(X, Y) = H(X|Y) + H(Y)$\n2. **Conditional Entropy's Maximum**  \n   $H(Y|X) \\leq H(Y)$  \n   ë…ë¦½ì¼ ë•Œ ê°™ì•„ì§€ë©° ê·¸ ì™¸ì—ëŠ” í•­ìƒ Conditionalì˜ Entropyê°€ ë” ë‚®ë‹¤. ì˜ë¯¸ë¥¼ ì´í•´í•˜ë©´ ì‰½ë‹¤. í•œ ë§ˆë””ë¡œ Xë¼ëŠ” ì •ë³´ê°€ Yë¼ëŠ” ì •ë³´ê°€ ë°œìƒí•  í™•ë¥ ì— ëŒ€í•œ í‹°ëŒì´ë¼ë„ì˜ íŒíŠ¸ë¥¼ ì¤€ë‹¤ë©´, í•´ë‹¹ ë¶ˆí™•ì‹¤ì„±ì€ ê°ì†Œí•˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.\n3. **Joint Entropy's Maximum**  \n   $H(X, Y) \\leq H(X) + H(Y)$  \n   ë™ì¼í•˜ê²Œ ë…ë¦½ì¼ ë•Œ ê°™ì•„ì§€ë©°, ê·¸ ì™¸ì—ëŠ” í•­ìƒ Jointì˜ Entropyê°€ ë” ë‚®ë‹¤. ì´ ë˜í•œ, ë‘ ì‚¬ê±´ì´ í‹°ëŒì´ë¼ë„ ê²¹ì¹˜ëŠ” Eventê°€ ìˆë‹¤ë©´, ê° Entropyë¥¼ ë”í•˜ëŠ” ê²ƒë³´ë‹¤ ë‹¹ì—°íˆ ì‘ì„ ìˆ˜ ë°–ì— ì—†ëŠ” ê²ƒì´ë‹¤.\n4. **Concave**  \n   Entropyì˜ ê·¸ë˜í”„ëŠ” í•­ìƒ concaveí•˜ë‹¤. \n\n> **Coding**\n\nì •ë³´ ì´ë¡ ì´ í™œë°œí•˜ê²Œ ì‚¬ìš©ë˜ëŠ” ì˜ˆì‹œ ì¤‘ì— í•˜ë‚˜ê°€ ë°”ë¡œ ë°ì´í„°ì˜ Encoding/Decodingì„ ìˆ˜í–‰í•˜ì—¬ bit dataë¡œ mappingí•  ë•Œì´ë‹¤. variable length encodingì„ ì•Œê³  ìˆë‹¤ë©´, ì´ì— ëŒ€í•œ ì´í•´ê°€ ì‰¬ìš¸ ê²ƒì´ë‹¤. ì‰½ê²Œ ì„¤ëª…í•˜ë©´, ë°ì´í„°ë¥¼ bit sequenceë¡œ mappingí•  ë•Œ ëª¨ë“  ë°ì´í„°ì—ê²Œ ë™ì¼í•œ bit sequenceì˜ ê¸¸ì´ë§Œí¼ì„ í• ë‹¹í•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ë¹ˆë„ê°€ ë†’ì€ ë°ì´í„°ë¶€í„° ì§§ì€ bit sequence ê¸¸ì´ë¥¼ í• ë‹¹í•˜ëŠ” ë°©ì‹ì´ë‹¤. ì´ë•Œ bit sequenceì˜ ê¸¸ì´ë¥¼ Entropyë¥¼ ì´ìš©í•´ì„œ êµ¬í•  ìˆ˜ ìˆë‹¤. ì´ ê¸¸ì´ëŠ” í•­ìƒ í•´ë‹¹ ë°ì´í„°ì˜ Entropyë³´ë‹¤ëŠ” ì»¤ì•¼ í•œë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ Entropyë³´ë‹¤ í° ê°€ì¥ ì‘ì€ ìì—°ìˆ˜ê°€ í•´ë‹¹ ë°ì´í„°ì˜ Bit Sequence ê¸¸ì´ì˜ ìµœì ê°’ì´ë‹¤.\n\n### KL divergence(Relative Entropy)\n\nKullback-Leibler Divergenceì˜ ì•½ìë¡œ, ìš°ë¦¬ê°€ êµ¬í•˜ê³ ìí•˜ëŠ” ì‹¤ì œ í™•ë¥ (p)ê³¼ ì¶”ì¸¡ í™•ë¥ (q) ì‚¬ì´ì˜ ì˜¤ì°¨ë¥¼ ê³„ì‚°í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ì§€í‘œì´ë‹¤. ë”°ë¼ì„œ, ë™ì¼í•œ Sample Spaceì™€ Random Variableì— ëŒ€í•œ ì„œë¡œ ë‹¤ë¥¸ í™•ë¥  ë¶„í¬ë¥¼ ë¹„êµí•œë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤.\n\n$$\nD(p||q) = KL(p||q) = \\sum_{x \\in \\Omega}p(x)\\log_{2}(p(x)/q(x)) = E_{p}[\\log_{2}({p(x) \\over q(x)})]\n$$\n\nì•„ì‰½ê²Œë„ KL divergenceëŠ” ê±°ë¦¬ì™€ ê°™ì€ ì—°ì‚°ì„ ì ìš©í•  ìˆ˜ ì—†ë‹¤. ì¦‰, ë‘˜ ì‚¬ì´ì˜ ì—­ì—°ì‚°ì€ ê°™ì§€ ì•Šì„ ë¿ë§Œ ì•„ë‹ˆë¼($D(p||q) \\neq D(q||p)$), ì„œë¡œ ë‹¤ë¥¸ Random Variableì˜ KL divergenceì˜ í•©ì´ Random Variableì˜ í•©ì˜ KL divergenceì™€ëŠ” ë‹¤ë¥´ë‹¤. \n\n### Mutual Information\n\nKL divergenceë¥¼ í™œìš©í•˜ì—¬ ì„œë¡œ ë‹¤ë¥¸ Random Variable X,Yì˜ ì—°ê´€ì„±ì„ ìœ ì¶”í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n\n$$\nI(X, Y) = D(p(x,y) || p(x)p(y))\n$$\n\n$I$ê°’ì´ ì˜ë¯¸í•˜ëŠ” ê²ƒì€ Yë¥¼ ì•„ëŠ” ê²ƒì´ Xì˜ ì¶”ì¸¡ì„ ì–¼ë§ˆë‚˜ ì‰½ê²Œí•˜ëŠ”ì§€ì— ëŒ€í•œ ì§€í‘œë¡œ ì‘ìš©í•œë‹¤.\n\nì¦ëª… ê³¼ì •ì€ ìƒëµí•˜ì§€ë§Œ, ìœ„ì˜ ì‹ì„ ì •ë¦¬í•˜ë©´ ê²°êµ­ì€ ì•„ë˜ì™€ ê°™ì•„ì§€ê¸° ë•Œë¬¸ì´ë‹¤.\n\n$$\n\\begin{align*}\n  I(X, Y) &= H(X) - H(X|Y) \\\\\n  &= H(Y) - H(Y|X)\n\\end{align*}\n$$\n\n### Cross Entropy\n\nìš°ë¦¬ê°€ íŠ¹ì • corpus(dataset)ë¥¼ í†µí•´ì„œ í™•ë¥ ì„ ì¶”ì •í–ˆë‹¤ê³  í•´ë³´ì. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ëŠ” ì´ ê°€ì„¤ì„ ì¦ëª…í•˜ê¸° ìœ„í•´ì„œ ë‹¤ë¥¸ dataì— ëŒ€í•´ì„œ í•´ë‹¹ ì¶”ì¸¡ì´ ì ì ˆí•œì§€ë¥¼ í™•ì¸í•˜ì—¬ ì •ë‹¹ì„±ì„ ì¦ëª…í•  ìˆ˜ ìˆë‹¤. ê·¸ëŸ¬ê¸° ìœ„í•´ì„œ ìš°ë¦¬ê°€ ë§Œë“  í™•ë¥ ì—ì„œ ì •ë³´ëŸ‰ì„ ì¶”ì¶œí•˜ê³ , ì´ë¥¼ ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” dataì˜ ê³µê°„ì— ë„£ì—ˆì„ ë•Œì˜ í™•ë¥ ì„ ì¶”ì •í•˜ê¸° ìœ„í•´ì„œ Cross Entropyë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n$$\nH_{q}(p) = \\sum_{x \\in \\Omega}q(x)\\log_{2}{1 \\over p(x)}\n$$\n\nê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ë©´, ìœ„ ì‹ì€ í‹€ë¦´ ìˆ˜ ìˆëŠ” ì •ë³´ë¥¼ ê°–ê³  êµ¬í•œ ìµœì ì˜ Entropyë¡œ, ì •ë³´ëŸ‰ì— ì¶”ì¸¡ ì •ë³´ëŸ‰ì„ ë„£ê³ , í™•ë¥ ì—ëŠ” ì‹¤ì œ í™•ë¥ ì„ ë„£ëŠ” ë°©ì‹ì´ë‹¤.\n\në˜í•œ, ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ë³€í˜•ë˜ê¸°ë„ í•œë‹¤.\n\n$$\nH_{q}(p) = H(q) + D(q || p)\n$$\n\në˜í•œ, íŠ¹ì • ì¡°ê±´ì´ ì£¼ì–´ì¡Œì„ ë•Œì˜ Conditional Cross EntropyëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\nH_{q}(p) = - \\sum_{y \\in \\Omega_{Y}}\\sum_{x \\in \\Omega_{X}}q(y,x)\\log_{2}p(y|x)\n$$\n\ní•˜ì§€ë§Œ, ì‹¤ì œ êµ¬í˜„ levelì—ì„œëŠ” ì´ëŸ¬í•œ Cross Entropyë¥¼ ì •ì„ìœ¼ë¡œ êµ¬í•˜ëŠ” ê²ƒì€ ë¹„ìš©ì´ í¬ë‹¤. ë”°ë¼ì„œ, ì´ì™€ ê·¼ì‚¬í•˜ëŠ” ì‹ì„ ì‚¬ìš©í•œë‹¤.\n\n$$\n\\begin{align*}\n  H_{q}(p) &= - \\sum_{y \\in \\Omega_{Y}}\\sum_{x \\in \\Omega_{X}}q(y,x)\\log_{2}p(y|x) \\\\\n  &= {1\\over{|T_{Y}|}}\\sum_{i=1..|T_{Y}|}{\\log_{2}p(y_{i}|x_{i})}\n\\end{align*}\n$$\n\nìœ„ ì‹ì„ ì´ìš©í•  ë•Œì—ëŠ” ì‹¤ì œ ë°ì´í„°ì™€ ë¹„êµì— ì‚¬ìš©í•´ì„œëŠ” ì•ˆëœë‹¤. ëŒ€ì‹  ë‘ ê°œì˜ ì„œë¡œ ë‹¤ë¥¸ p,qê°€ ìˆì„ ë•Œ, së¼ëŠ” ì‹¤ì œ ë¶„í¬ì— ì–´ë–¤ ê²ƒì´ ë” ì ì ˆí•œì§€ë¥¼ íŒëª…í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"ml-base-knowledge","date":"2022-10-14 19:28","title":"[ML] 0. Base Knowledge","category":"AI","tags":["ML","Probability","Calculus","InformationTheory"],"desc":"Machine Learningì€ dataë“¤ë¡œ ë¶€í„° íŠ¹ì • patternì„ ë‚˜íƒ€ë‚´ëŠ” functionì„ ë§Œë“œëŠ” ê²ƒì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì¦‰, patternì€ dataì— ëŒ€í•œ ê°„ë‹¨í•œ ìš”ì•½ë³¸ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.í™•ë¥ /í†µê³„ ì´ë¡  ë° ì„ í˜•ëŒ€ìˆ˜, ë¯¸ì ë¶„, ì •ë³´ ì´ë¡  ê´€ë ¨ ê¸°ë³¸ ë‚´ìš©ì„ í•´ë‹¹ í¬ìŠ¤íŒ…ì— ì •ë¦¬í•œë‹¤. ì—¬ê¸°ì„œ ë‹¤ë£¨ëŠ” ë‚´ìš©ì€ ëŒ€ê²Œ ë§ì´ ì¶”ìƒì ì¸ ë‚´ìš©ì´ë©°, í‚¤ì›Œë“œ ì¤‘ì‹¬ì˜ ë‚´ìš©ì´ë‹¤. ë§Œì•½, ì¶”ê°€ì ì¸ ì„¤ëª…ì´ í•„ìš”í•˜ë‹¤ë©´ í‚¤ì›Œë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë” ê²€ìƒ‰ì„ í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nMachine Learningì€ íŠ¹ì • ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ì„œ ë°ì´í„°ë¡œ ë¶€í„° pattern ë˜ëŠ” ê°€ì • ë“±ì„ ìœ ë„í•´ë‚´ëŠ” ë°©ë²•ì´ë‹¤.\nì´ë¥¼ ìœ„í•œ ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ì—¬ëŸ¬ ê°œì˜ í™•ë¥ ë¶„í¬ì™€ ì´ê²ƒì˜ parameterì˜ ì¡°í•©(probabilistic model)ë“¤ ì¤‘ì—ì„œ ì¸¡ì •ëœ ë°ì´í„°ë“¤ì„ ê°€ì¥ ì˜ ë‚˜íƒ€ë‚´ëŠ” í•˜ë‚˜ë¥¼ ì°¾ì•„ë‚´ëŠ” ê²ƒì´ë‹¤.\nê·¸ ì¤‘ì—ì„œ, í™•ë¥  ë¶„í¬ë¥¼ ê²°ì •í•œ ìƒíƒœì—ì„œ parameterë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” í˜•íƒœì˜ ì ‘ê·¼ë²•ì„ ìš°ë¦¬ëŠ” Parametric Estimationì´ë¼ê³  í•œë‹¤. ê·¸ ì™¸ì—ë„ Nonparametric, Semi-parametric ë°©ì‹ë„ ì¡´ì¬í•˜ì§€ë§Œ ì´ëŠ” ì—¬ê¸°ì„œëŠ” ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤.\n\n## Small Example\n\nê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ í†µí•´ì„œ Parametric Estimationì˜ íë¦„ì„ ìµí˜€ë³´ì.\n\ní•œ í•™ê¸‰ì—ì„œ í•™ìƒë“¤ì˜ í˜•ì œìë§¤ ìˆ˜ì— ëŒ€í•œ ì˜ˆì¸¡ì„ í•˜ê³  ì‹¶ë‹¤ê³  í•˜ì.  \nê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ëŠ” ë¨¼ì € ì¡°ì‚¬(ê´€ì¸¡)ë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ë°ì´í„°ë¥¼ ì–»ê²Œ ë˜ì—ˆë‹¤ê³  í•˜ì.\n\n| x        | 1    | 2    | 3    | 4    | 5    | 6    | x$\\geq$7 |\n| :------- | :--- | :--- | :--- | :--- | :--- | :--- | :------- |\n| $p(X=x)$ | 17   | 59   | 15   | 6    | 2    | 0    | 1        |\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ì—¬ëŸ¬ ì‚¬ì „ ì§€ì‹ì„ í™œìš©í•˜ì—¬ í•´ë‹¹ ë°ì´í„°ë¥¼ ë³´ì•˜ì„ ë•Œ, í•´ë‹¹ ë¶„í¬ê°€ Poisson ë¶„í¬ì˜ í˜•íƒœë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.  \në”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•´ë‹¹ ë¶„í¬ë¥¼ Poissonì´ë¼ê³  ê°€ì •í•œ ë‹¤ìŒì—ëŠ” ë‹¨ìˆœíˆ í•´ë‹¹ ë¶„í¬ì— ëŒ€ì…í•˜ë©°, ê°€ì¥ ì ì ˆí•œ parameterë§Œ ì°¾ìœ¼ë©´ ëœë‹¤.  \n\nì´ ê³¼ì •ê³¼ ë‹¨ìˆœíˆ ê° xì—ì„œì˜ í™•ë¥ ê°’ì„ êµ¬í•˜ëŠ” ë°©ì‹ì´ë‘ ë¬´ì—‡ì´ ë‹¤ë¥¸ì§€ë¥¼ ì•Œì•„ì•¼ì§€ í•´ë‹¹ ê³¼ì •ì˜ ì˜ì˜ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.\në¨¼ì €, ìš°ë¦¬ê°€ í•˜ê³ ì í•˜ëŠ” ì¼ì´ í˜•ì œìë§¤ì˜ í‰ê·  ìˆ˜ë¥¼ êµ¬í•œë‹¤ê³  í•˜ì. ì´ë•Œì˜ í‰ê·  ê°’ê³¼ Poisson ë¶„í¬ì—ì„œì˜ í™•ë¥ ê°’ì€ ë‹¤ë¥¼ ìˆ˜ ë°–ì— ì—†ë‹¤.\n\nì´ë ‡ê²Œ í™•ë¥  ë¶„í¬ë¥¼ êµ¬í•˜ëŠ” ê²ƒì˜ ì˜ë¯¸ëŠ” ì´ê²ƒë§ê³ ë„ ë³´ì§€ ì•Šì€ ë°ì´í„°(unseen data)ë¥¼ ì²˜ë¦¬í•¨ì— ìˆë‹¤. ìš°ë¦¬ê°€ ë§Œì•½ ëª¨ë“  ê°€ëŠ¥í•œ ê²½ìš°ì˜ ìˆ˜ë¥¼ ëª¨ë‘ ì•Œê³  ìˆê³ , ì´ë¥¼ ì €ì¥í•  ê³µê°„ì´ ì¶©ë¶„í•˜ë‹¤ë©´,\nì´ëŸ¬í•œ í™•ë¥  ë¶„í¬ë¥¼ êµ¬í•  í•„ìš”ê°€ ì—†ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ì›í•˜ëŠ” ì¶”ì¸¡ì€ unseen dataì— ëŒ€í•´ì„œë„ ê·¸ëŸ´ì‚¬í•´ì•¼ í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œëŠ” ê²°êµ­ í™•ë¥  ë¶„í¬ê°€ í•„ìš”í•˜ë‹¤.\n\nìœ„ì˜ ì˜ˆì‹œì—ì„œ ë§Œì•½, í˜•ì œìë§¤ê°€ 3ëª…ì¸ ê²½ìš°ì˜ ë°ì´í„°ê°€ ì—†ë‹¤ê³  í•˜ì. ì´ ê²½ìš°ì—ë„ í™•ë¥ ë¶„í¬ë¥¼ í†µí•œ ì¶”ì¸¡ì„ í•œë‹¤ë©´, ìš°ë¦¬ëŠ” ìœ ì˜ë¯¸í•œ ê°’ì„ êµ¬í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n## Parametric Estimation\n\n> **ì •ì˜**\n\nsample space $\\Omega$ì—ì„œ í†µê³„ ì‹¤í—˜ì˜ ê´€ì¸¡ ê²°ê³¼ë¥¼ í†µí•´ì„œ ì–»ì€ sample $X_1$, $X_2$, ... , $X_n$ì´ ìˆë‹¤ê³  í•˜ì. ê° sampleì— ëŒ€í•œ í™•ë¥  ë¶„í¬ë¥¼ ìš°ë¦¬ëŠ” $p_\\theta$ë¼ê³  í•œë‹¤.\nì—¬ê¸°ì„œ $\\theta$ëŠ” íŠ¹ì • í™•ë¥  ë¶„í¬ì—ì„œì˜ parameterë¥¼ ì˜ë¯¸í•œë‹¤. ë§Œì•½, bernoulli ë¼ë©´, ë‹¨ì¼ ì‹œí–‰ì— ëŒ€í•œ í™•ë¥ ì´ ë  ê²ƒì´ê³ , binomialì´ë¼ë©´, ë‹¨ì¼ ì‹œí–‰ì˜ í™•ë¥ ê³¼ íšŸìˆ˜ê°€ í•´ë‹¹ ê°’ì´ ë  ê²ƒì´ë‹¤.\n\n> **ì„±ëŠ¥ í‰ê°€**\n\nì—¬ê¸°ì„œ ìš°ë¦¬ê°€ ì°¾ê¸°ë¥¼ ì›í•˜ëŠ” ê²ƒì€ ì „ì²´ sample space $\\Omega$ë¥¼ ëª¨ë‘ ì˜ í‘œí˜„í•  ìˆ˜ ìˆëŠ” $\\theta_{*}$(ì‹¤ì œ true $\\theta$)ë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤.(ì´ë¯¸ í™•ë¥  ë¶„í¬ì˜ í˜•íƒœ(í•¨ìˆ˜, ex. Bernoulli, Binomial)ëŠ” ì´ë¯¸ ì •ì˜ë˜ì–´ ìˆë‹¤.)  \nê·¸ë ‡ë‹¤ë©´, ì‹¤ì œ $\\theta_*$ì™€ ì¶”ì¸¡ì„ í†µí•´ ë§Œë“  $\\hat{\\theta}$ ì‚¬ì´ì˜ ë¹„êµë¥¼ ìœ„í•œ ì§€í‘œë„ í•„ìš”í•  ê²ƒì´ë‹¤. ì¦‰, ìš°ë¦¬ê°€ ë§Œë“  í™•ë¥  ë¶„í¬ì˜ ì˜ˆì¸¡ ì„±ëŠ¥í‰ê°€ê°€ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ì¸¡ì •í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” **Risk**ë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•œë‹¤.  \nê°„ë‹¨í•˜ê²Œë„ ì‹¤ì œ $\\theta_*$ì™€ $\\hat{\\theta}$ì˜ Mean Square Errorë¥¼ ê³„ì‚°í•œë‹¤.\n\n$$ \n\\begin{align*}\nRisk &= E[(\\hat{\\theta} - \\theta_*)^2] = E[\\hat{\\theta}^2 - 2\\hat{\\theta}\\theta_* + \\theta_*^2] \\\\\n&= E[\\hat{\\theta}^2] - 2\\theta_*E[\\hat{\\theta}] + \\theta_*^2 \\\\\n&= E[\\hat{\\theta}^2] - 2\\theta_*E[\\hat{\\theta}] + \\theta_*^2 + (E^2[\\hat{\\theta}] - E^2[\\hat{\\theta}]) \\\\\n&= (E[\\hat{\\theta}] - \\theta_*)^2 + E[\\hat{\\theta}^2] - E^2[\\hat{\\theta}] \\\\\n&= {Bias}^2 + Var[\\hat{\\theta}]\n\\end{align*}\n$$\n\ní•´ë‹¹ ì‹ì„ ë¶„ì„í•´ë³´ë©´, ì´ì™€ ê°™ì€ ì˜ë¯¸ë¡œ í•´ì„í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. ìš°ë¦¬ê°€ íŠ¹ì • í™•ë¥  ë¶„í¬ì˜ íŒŒë¼ë¯¸í„°ë¥¼ ë‹¨ í•˜ë‚˜ë¡œ ë‹¨ì •í•˜ê³  Riskë¥¼ ê³„ì‚°í•˜ëŠ” ê²½ìš°ëŠ” Variance ê°’ì€ 0ì´ë‹¤. ì¦‰, í•´ë‹¹ í™•ë¥  ë¶„í¬ê°€ ê°€ì§€ëŠ” RiskëŠ” ë‹¨ìˆœíˆ í•´ë‹¹ parameterì™€ ì‹¤ì œ parameterê°€ ì–¼ë§ˆë‚˜ ì°¾ì´ê°€ ë‚˜ëŠ”ê°€ë¥¼ ì˜ë¯¸í•œë‹¤.\n\ní•˜ì§€ë§Œ, parameterë¥¼ íŠ¹ì •í•˜ì§€ ì•Šê³ , ë²”ìœ„ë¡œ ì§€ì •í•œë‹¤ë©´, (ì˜ˆë¥¼ ë“¤ì–´, ì£¼ì‚¬ìœ„ë¥¼ ë˜ì ¸ 3ì´ ë‚˜ì˜¬ í™•ë¥ ì€ 1/6 ~ 1/3ì´ë‹¤.) í•´ë‹¹ í™•ë¥ ì˜ í‰ê· ê³¼ Varianceê°€ ì˜í–¥ì„ ë¯¸ì¹  ê²ƒì´ë‹¤.  \në‹¤ì†Œ ì²˜ìŒì—ëŠ” í—·ê°ˆë¦´ ìˆ˜ ìˆì§€ë§Œ, í•´ë‹¹ ì‹ì—ì„œ í‰ê· ì´ ì˜ë¯¸ëŠ” ì˜ í™•ì¸í•˜ì. íŠ¹ì • í™•ë¥  ë¶„í¬ë¥¼ ê°€ì§€ë„ë¡ í•˜ëŠ” $\\theta$ê°€ $\\theta_*$ ì— ì–¼ë§ˆë‚˜ ê·¼ì ‘í•œì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•œ ì‹ì´ë¼ëŠ” ê²ƒì„ ë‹¤ì‹œ í•œ ë²ˆ ê¸°ì–µí•˜ì.\n\n> **Estimation**\n\nì´ì œë¶€í„°ëŠ” ì•ì—ì„œ ì‚´í´ë³´ì•˜ë˜, parameteric estimationì—ì„œ ì–´ë–»ê²Œ $\\hat{\\theta}$ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë‹¤ë£° ê²ƒì´ë‹¤. í™•ë¥ /í†µê³„ ì´ë¡ ì—ì„œëŠ” í¬ê²Œ 3ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤ê³  ë³¼ ìˆ˜ ìˆë‹¤. ê° ê°ì„ ì‚´í´ë³´ë„ë¡ í•˜ì.\n\n<mark>**1. MLE**</mark>\n\nMaximum Likelihood Estimationì˜ ì•½ìì´ë‹¤. ì—¬ê¸°ì„œ, LikelihoodëŠ” ê°€ëŠ¥ì„±ì´ë¼ëŠ” ëœ»ì„ ê°€ì§€ë©°, í™•ë¥ /í†µê³„ ì´ë¡ ì—ì„œ ì´ëŠ” í™•ë¥ ì„ í•´ë‹¹ ì‚¬ê±´ì´ ë°œìƒí•  ê°€ëŠ¥ì„±ìœ¼ë¡œ í•´ì„í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ ìš°ë¦¬ê°€ í’€ê³ ì í•˜ëŠ” ë¬¸ì œ, ìš°ë¦¬ê°€ ì¶”ì¸¡í•œ $\\theta$ê°€ ìš°ë¦¬ê°€ ê°€ì§„ Datasetë¥¼ ë§Œì¡±ì‹œí‚¬ ê°€ëŠ¥ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•œë‹¤. ì•„ë˜ ìˆ˜ì‹ì„ ë³´ì.\n\n$$\n\\begin{align*}\n\\mathcal{L}(\\theta;\\mathcal{D}) &= p(\\mathcal{D}|\\theta) = p(x_1, x_2, ..., x_n|\\theta) \\\\\n&= \\prod_{i=1}^{n}{p(x_i|\\theta)}\n\\end{align*}\n$$\n\n(ìœ„ ì‹ì„ ì´í•´í•˜ë ¤ë©´, ë¨¼ì € Datasetì˜ ê° dataë“¤ì€ ì„œë¡œ independentí•˜ë‹¤ëŠ” ì‚¬ì‹¤ì„ ê¸°ì–µí•˜ì.)  \nê²°êµ­ $\\theta$ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, Datasetì¼ í™•ë¥ ì„ êµ¬í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ë‹¤ì‹œ ìƒê°í•˜ë©´, $\\theta$ê°€ ì–¼ë§ˆë‚˜ ë°ì´í„°ì…‹ì˜ í™•ë¥ ì„ ì˜ í‘œí˜„í•  ìˆ˜ ìˆëŠ”ê°€ì™€ ê°™ë‹¤.\n\nì´ê²ƒì„ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•˜ë ¤ë©´ í•˜ë‚˜ì˜ ì˜ˆì‹œë¥¼ ë³´ë©´ ì¢‹ë‹¤.\n\n![MLE example](/images/MLE-example.png)\n\nì²« ë²ˆì§¸ ê·¸ë˜í”„ëŠ” ê°™ì€ ê°€ìš°ì‹œì•ˆ ë¶„í¬ í•¨ìˆ˜ë¥¼ ì“°ë©´ì„œ, parameterë§Œ ë‹¤ë¥´ê²Œ í•œ ê²½ìš°ì´ê³ , ì•„ë˜ëŠ” ì‹¤ì œ ë°ì´í„°ì˜ ë¶„í¬ë¼ê³  í•˜ì.(ë¹¨ê°„ìƒ‰ ì„  í•˜ë‚˜ í•˜ë‚˜ê°€ ë°ì´í„°ë¥¼ ì˜ë¯¸)  \nì´ë•Œ, Likelihoodë¥¼ ê° ê° êµ¬í•˜ë©´ ê° xì—ì„œì˜ í™•ë¥ ë¶„í¬ì˜ í™•ë¥ ê°’ì„ ëª¨ë‘ ê³±í•˜ë©´ ëœë‹¤. ê·¸ ê²½ìš° ì–´ë–¤ ê²ƒì´ ì œì¼ í´ì§€ëŠ” ë¶„ëª…í•˜ë‹¤. ë°”ë¡œ íŒŒë€ìƒ‰ ë¶„í¬ì¼ ê²ƒì´ë‹¤.  \n\nê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì€ ë¬´ì—‡ì¸ê°€? ë°”ë¡œ ê°€ì¥ ë†’ì€ ê°€ëŠ¥ì„±ì„ ê°€ì§€ê²Œ í•˜ëŠ” $\\theta$ë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ì‹ìœ¼ë¡œ í‘œì‹œí•˜ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n$$\n\\hat{\\theta}_{MLE} = \\argmax_{\\theta}\\mathcal{L}(\\theta;\\mathcal{D})\n$$\n\nì—¬ê¸°ì„œ í•˜ë‚˜ ë¬¸ì œê°€ ìˆì„ ìˆ˜ ìˆë‹¤. ë°”ë¡œ, ì»´í“¨í„°ë¡œ ì—°ì‚°í•˜ê²Œ ë˜ë©´ underflowê°€ ë°œìƒí•˜ëŠ” ê²ƒì´ë‹¤. íŠ¹ì • ì–¸ì–´ê°€ ê³„ì‚°í•  ìˆ˜ ìˆëŠ” ì†Œìˆ˜ì  ë²”ìœ„ë¥¼ ë²—ì–´ë‚œë‹¤ë©´, ì œëŒ€ë¡œ ëœ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ì—†ë‹¤. ì´ì™€ ê°™ì€ ë¬¸ì œë¥¼ **vanishing likelihood**ë¼ê³  í•œë‹¤.  \në”°ë¼ì„œ, ìš°ë¦¬ëŠ” logë¥¼ ì·¨í–ˆì„ ë•Œì™€ logë¥¼ ì·¨í•˜ì§€ ì•Šì•˜ì„ ë•Œì˜ ê²½í–¥ì„±ì´ ê°™ìŒì„ ë°”íƒ•ìœ¼ë¡œ likelihoodì— logë¥¼ ì·¨í•œ ê°’ì„ ì´ìš©í•˜ì—¬ MLEë¥¼ êµ¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. ì´ ë°©ì‹ì„ maxmum log likelihood estimation ì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n\n$$\n\\mathcal{l}(\\theta;\\mathcal{D}) = \\sum_{i=1}^{n}{\\log{(p(x_i|\\theta))}}\n$$\n\nì´ ë°©ì‹ì„ ì´ìš©í•˜ê²Œ ë˜ë©´, ê³±ì…ˆì´ ëª¨ë‘ ë§ì…ˆìœ¼ë¡œ ë°”ë€Œê¸° ë•Œë¬¸ì— ê³„ì‚°ì—ì„œë„ ìš©ì´í•˜ë‹¤.\n\nì—¬ê¸°ê¹Œì§€ ì‚´í´ë³´ë©´, í•˜ë‚˜ì˜ ì˜ë¬¸ì´ ë“¤ ìˆ˜ë„ ìˆë‹¤. ë°”ë¡œ, $p(\\theta|\\mathcal{D})$ë„ ì¸¡ì • ê¸°ì¤€ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ ì•ŠëƒëŠ” ê²ƒì´ë‹¤. ì´ ì—­ì‹œë„ Datasetì´ ì£¼ì–´ì§ˆ ë•Œ, $\\theta$ì¼ í™•ë¥ ì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.  \nì–´ì°Œë³´ë©´, ì‚¬ëŒì˜ ìƒê°ìœ¼ë¡œëŠ” ì´ê²Œ ë” ë‹¹ì—°í•˜ê²Œ ëŠê»´ì§ˆ ìˆ˜ë„ ìˆë‹¤. ì´ëŠ” ë°”ë¡œ ë‹¤ìŒ MAPì—ì„œ ë‹¤ë£° ê²ƒì´ë‹¤. ìš°ì„  MLEë¥¼ ë¨¼ì €í•œ ì´ìœ ëŠ” ì´ê²ƒì´ ë” êµ¬í•˜ê¸° ì‰½ê¸° ë•Œë¬¸ì„ì„ ê¸°ì–µí•´ë‘ì. \n\n```plaintext\n ğŸ¤” ì¦ëª…\n\n (*í•´ë‹¹ ë‚´ìš©ì€ ì •ë³´ ì´ë¡ ì— ê¸°ë°˜í•œ MLEì— ëŒ€í•œ ì¶”ê°€ì ì¸ ì´í•´ë¥¼ ìœ„í•œ ë‚´ìš©ì…ë‹ˆë‹¤. í•´ë‹¹ ë‚´ìš©ì€ ìì„¸íˆ ì•Œ í•„ìš”ê¹Œì§€ëŠ” ì—†ìŠµë‹ˆë‹¤.)\n\n ë‘ í™•ë¥  ë¶„í¬ ê°„ information Entropyì˜ ì°¨ì´ë¥¼ ë‚˜íƒ€ë‚´ëŠ” KL divergenceì˜ ìµœì†Ÿê°’ì„ êµ¬í•˜ëŠ” ê²ƒì´ ìš°ë¦¬ì˜ ëª©í‘œë¼ê³  ì •ì˜í•  ìˆ˜ ìˆë‹¤.  \n ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ê²°êµ­ ì–»ê³ ì í•˜ëŠ” ê²ƒì€ í™•ë¥  ë¶„í¬ í•¨ìˆ˜ê°€ ì£¼ì–´ì¡Œì„ ë•Œ,  \n nì´ ë¬´í•œëŒ€ë¡œ ê°ˆ ë•Œ, ê²½í—˜ì  í™•ë¥ (empirical probability)ì— ê°€ì¥ ê·¼ì‚¬í•˜ëŠ” parameterë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤.  \n ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” KL divergenceì˜ ìµœì†Ÿê°’ì„ êµ¬í•˜ë©´ ëœë‹¤.\n```\n\n$$\n\\begin{align*}\n\\argmin_\\theta KL(\\tilde{p}||p_\\theta) &= \\argmin_\\theta \\int\\tilde{p}(x)\\log{\\tilde{p}(x)\\over{p_\\theta(x)}}dx \\\\ \n&=\\argmin_\\theta[-\\int\\tilde{p}(x)\\log{\\tilde{p}(x)dx} - \\int\\tilde{p}(x)\\log{p_\\theta(x)dx}] \\\\\n&= \\argmax_\\theta\\int{\\tilde{p}(x)\\log{p_\\theta(x)}dx} \\\\\n&= \\argmax_\\theta\\sum_{i=1}^{n}{\\log{p_\\theta(x_i)}} \\\\\n&= \\theta_{MLE}\n\\end{align*} \n$$\n\n<mark>**2. MAP**</mark>\n\nMaximum A Posterioriì˜ ì•½ìì´ë‹¤. PosterioriëŠ” ì‚¬í›„ í™•ë¥ ì´ë¼ê³ ë„ ë¶€ë¥´ë©°, datasetì´ ì£¼ì–´ì¡Œì„ ë•Œ, $\\theta$ì¼ í™•ë¥ ì„ êµ¬í•˜ëŠ” ê²ƒì´ë‹¤.  \nì´ë¥¼ ë°”ë¡œ êµ¬í•˜ëŠ” ê²ƒì€ ë‹¤ì†Œ ì–´ë µë‹¤. ì™œëƒí•˜ë©´, Datasetì´ ì¡°ê±´ìœ¼ë¡œ ë“¤ì–´ê°€ëŠ” í˜•íƒœì´ê¸° ë•Œë¬¸ì´ë‹¤. ($p(\\theta|\\mathcal{D})$)  \në”°ë¼ì„œ, ìš°ë¦¬ëŠ” Bayes' Theoremì— ë”°ë¼ì„œ ì´ì „ì— ë°°ìš´ Likelihoodì™€ parameterì˜ í™•ë¥ , ê·¸ë¦¬ê³  Datasetì˜ í™•ë¥ ì„ í™œìš©íˆì—¬ í’€ì–´ë‚¼ ê²ƒì´ë‹¤.\n\n$$\np(\\theta|\\mathcal{D}) = {p(\\mathcal{D}|\\theta)p(\\theta)\\over{p(\\mathcal{D})}}\n$$\n\nì—¬ê¸°ì„œ ì£¼ì˜í•´ì„œ ë³¼ ê²ƒì€ ë°”ë¡œ $p(\\theta|\\mathcal{D})$ì™€ $p(\\theta)$ì˜ ê´€ê³„ì´ë‹¤. datasetì´ ì£¼ì–´ì§ˆ ë•Œì˜ parameterì˜ í™•ë¥ ì„ êµ¬í•˜ê¸° ìœ„í•´ì„œ ì›ë˜ parameterì˜ í™•ë¥ ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.  \nì–´ì°Œë³´ë©´ êµ‰ì¥íˆ ëª¨ìˆœë˜ì–´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ, ìš°ë¦¬ê°€ ì´ê²ƒì„ ì‚¬ì „ í™•ë¥ (priori)ë¡œ ë³¸ë‹¤ë©´ ë‹¤ë¥´ê²Œ ë³¼ ì—¬ì§€ê°€ ìˆë‹¤.  \nì˜ˆë¥¼ ë“¤ë©´, ìš°ë¦¬ê°€ ìˆ˜ìƒí•œ ì£¼ì‚¬ìœ„ë¡œ í•˜ëŠ” ê²Œì„ì— ì°¸ê°€í•œë‹¤ê³  í•˜ì. ì´ë•Œ, ìš°ë¦¬ëŠ” ìˆ˜ìƒí•œ ì£¼ì‚¬ìœ„ì˜ ì‹¤ì œ í™•ë¥ ì€ ì•Œ ìˆ˜ ì—†ì§€ë§Œ, ì£¼ì‚¬ìœ„ ìì²´ì˜ í™•ë¥ ì€ ëª¨ë‘ 1/6ì´ë¼ëŠ” ê²ƒì„ ì•Œê³  ìˆë‹¤. ë”°ë¼ì„œ, $p(\\theta={1\\over6}) = \\alpha, p(\\theta\\neq{1\\over6}) = \\beta$ ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ë§Œì•½ ì •ë§ ìˆ˜ìƒí•´ë³´ì¸ë‹¤ë©´, ìš°ë¦¬ëŠ” $\\alpha$ê°€ ì ì  ì‘ì•„ì§„ë‹¤ëŠ” ì‹ìœ¼ë¡œ í‘œí˜„í•  ìˆ˜ ìˆê³ , í•˜ë‚˜ë„ ìˆ˜ìƒí•´ë³´ì´ì§€ ì•ŠëŠ” ì¼ë°˜ ì£¼ì‚¬ìœ„ë¼ë©´, $\\alpha=1, \\beta=0$ìœ¼ë¡œ í•  ìˆ˜ë„ ìˆë‹¤. ì´ ê²½ìš°ì—ëŠ” likelihood ê°’ì— ìƒê´€ì—†ì´ ë‹¤ë¥¸ ëª¨ë“  ê°’ì´ 0ì´ê¸° ë•Œë¬¸ì— ê²°êµ­ì€ $p(\\theta|\\mathcal{D}) = p(\\theta)$ ê°€ ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\nìµœì¢…ì ìœ¼ë¡œ, MAPë„ ê²°êµ­ì€ Datasetì„ ì–¼ë§ˆë‚˜ parameterê°€ ì˜ í‘œí˜„í•˜ëŠ”ê°€ì— ëŒ€í•œ ì§€í‘œë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. \në”°ë¼ì„œ, ì´ë¥¼ ìµœëŒ€ë¡œ ë§Œë“œëŠ” parameterëŠ” $\\theta_*$ì™€ êµ‰ì¥íˆ ê·¼ì ‘í•  ê²ƒì´ë‹¤.\n\n$$\n\\begin{align*}\n\\hat{\\theta}_{MAP} &= \\argmax_{\\theta}p(\\theta|\\mathcal{D}) \\\\\n&= \\argmax_\\theta{p(\\mathcal{D}|\\theta)p(\\theta)\\over{p(\\mathcal{D})}} \\\\\n&=\\argmax_\\theta{p(\\mathcal{D}|\\theta)p(\\theta)} \\\\\n&=\\argmax_\\theta{[\\red{\\log{p(\\mathcal{D}|\\theta)}} + \\blue{\\log{p(\\theta)}}]}\n\\end{align*}\n$$\n\nMLEì™€ ë§ˆì°¬ê°€ì§€ë¡œ ì´ ë˜í•œ ì—°ì‚° ë° **vanishing**ì„ ë§‰ê¸° ìœ„í•´ì„œ logë¥¼ ì·¨í•œë‹¤. ì‚¬ì‹¤ìƒ likelihoodì™€ ì‚¬ì „ í™•ë¥ ì˜ í•©ì„ ìµœëŒ€ë¡œ í•˜ëŠ” $\\theta$ë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤.\n\n<mark>**3. Bayesian Inference**</mark>\n\nì´ì œ ë§ˆì§€ë§‰ ë°©ë²•ìœ¼ë¡œ ì œì‹œë˜ëŠ” Bayesian Inferenceì´ë‹¤. ì´ëŠ” ëŒ€ê²Œ Bayesian Estimationì´ë¼ê³  ë§ì´ ë¶ˆë¦¬ëŠ” ê²ƒ ê°™ë‹¤. ì´ì „ê¹Œì§€ MLE, MAPëŠ” ê²°êµ­ ì£¼ì–´ì§„ ì‹ì„ ìµœëŒ€ë¡œ í•˜ëŠ” í™•ì •ì  $\\theta$ í•˜ë‚˜ë¥¼ êµ¬í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í–ˆë‹¤.\n\nBayesian InferenceëŠ” Datasetì´ ì£¼ì–´ì¡Œì„ ë•Œ, $\\theta$ì˜ í‰ê· ê°’ì„ í™œìš©í•œë‹¤. ë” ìì„¸íˆ ë§í•˜ë©´, Posteriori(ì‚¬í›„ í™•ë¥ )ì˜ í‰ê· ì„ êµ¬í•˜ëŠ” ê²ƒì´ë‹¤.  \nì´ë¥¼ êµ¬í•˜ëŠ” ê³¼ì •ì„ ì‚´í´ë³´ë©´ ì´í•´í•˜ëŠ”ë° ë„ì›€ì´ ë  ê²ƒì´ë‹¤. í•œ ë²ˆ ì‚´í´ë³´ì.\n\n$$\n\\begin{align*}\n\\hat{\\theta}_{BE}&= E[\\theta|\\mathcal{D}] \\\\\n&= {\\int_{0}^{1}{{\\theta}p(\\theta|\\mathcal{D})}d\\theta} \\\\\n&= {\\int_{0}^{1}{\\theta}{{p(\\mathcal{D}|\\theta)p(\\theta)}\\over{p(\\mathcal{D})}}d\\theta} \\\\\n&= {{\\int_{0}^{1}{\\theta}{p(\\theta)p(\\mathcal{D}|\\theta)}d\\theta}\\over{p(\\mathcal{D})}} \\\\\n&= {{\\int_{0}^{1}{\\theta}{p(\\theta)\\prod_{i=1}^{n}{p(x_i|\\theta)}}d\\theta}\\over{p(\\mathcal{D})}} \\\\\n&= {{\\int_{0}^{1}{\\theta}{p(\\theta)\\prod_{i=1}^{n}{p(x_i|\\theta)}}d\\theta}\\over{\\int_0^1{p(\\mathcal{D}|\\theta)p(\\theta)}d\\theta}} \\\\\n&= {{\\int_{0}^{1}{\\theta}{p(\\theta)\\prod_{i=1}^{n}{p(x_i|\\theta)}}d\\theta}\\over{\\int_0^1{p(\\theta)\\prod_{i=1}^{n}p(x_i|\\theta)}d\\theta}} \\\\\n\\end{align*}\n$$\n\nì´ë¥¼ êµ¬í•˜ëŠ” ê³¼ì •ì€ ì´ì „ê³¼ëŠ” ë‹¤ë¥´ê²Œ ìƒëŒ€ê°’ì´ ì•„ë‹Œ í‰ê· ì„ êµ¬í•´ì•¼í•˜ê¸° ë•Œë¬¸ì— posteriori(ì‚¬í›„ í™•ë¥ ,$p(\\theta|\\mathcal{D})$)ë¥¼ êµ¬í•´ì•¼ í•œë‹¤.\n\ní•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ì¡ê¸°ìˆ ì´ í•˜ë‚˜ ì¡´ì¬í•œë‹¤. ë°”ë¡œ **Conjugate Prior**ì´ë‹¤.\n\në°”ë¡œ ë‘ í™•ë¥  ë¶„í¬ í•¨ìˆ˜(likelihood, prior)ì— ì˜í•œ posteriorì˜ í˜•íƒœê°€ ì •í•´ì§„ ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì´ë‹¤.\n\n| Prior $p(\\theta \\mid \\alpha)$  | Likelihood $p(\\mathcal{D} \\mid \\theta)$                 | Posterior $p(\\theta \\mid \\mathcal{D}, \\alpha)$                                                                                                                                                                                                                      | Expectation of Posterior                                                                                                                                                         |\n| :----------------------------- | :------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| Beta ($\\alpha, \\beta$)         | Benoulli ($\\sum _{i=1}^{n}x_{i}$)                       | Beta ($\\alpha +\\sum _{i=1}^{n}x_{i},\\,\\beta +n-\\sum _{i=1}^{n}x_{i}$)                                                                                                                                                                                               | ${{\\alpha + \\sum _{i=1}^{n}x_{i}}\\over{\\alpha + \\beta + n}}$                                                                                                                     |\n| Beta ($\\alpha, \\beta$)         | Binomial ($\\sum _{i=1}^{n}N_{i}, \\sum _{i=1}^{n}x_{i}$) | Beta ($\\alpha +\\sum _{i=1}^{n}x_{i},\\,\\beta +\\sum _{i=1}^{n}N_{i}-\\sum _{i=1}^{n}x_{i}$)                                                                                                                                                                            | ${{\\alpha + \\sum _{i=1}^{n}x_{i}}\\over{\\alpha + \\beta + \\sum _{i=1}^{n}N_{i}}}$                                                                                                  |\n| Gaussian ($\\mu_0, \\sigma_0^2$) | Gaussian ($\\mu, \\sigma^2$)                              | Gaussian (${\\displaystyle {\\frac {1}{{\\frac {1}{\\sigma _{0}^{2}}}+{\\frac {n}{\\sigma ^{2}}}}}\\left({\\frac {\\mu _{0}}{\\sigma _{0}^{2}}}+{\\frac {\\sum _{i=1}^{n}x_{i}}{\\sigma ^{2}}}\\right),\\left({\\frac {1}{\\sigma _{0}^{2}}}+{\\frac {n}{\\sigma ^{2}}}\\right)^{-1}}$) | ${\\displaystyle {\\frac {1}{{\\frac {1}{\\sigma _{0}^{2}}}+{\\frac {n}{\\sigma ^{2}}}}}\\left({\\frac {\\mu _{0}}{\\sigma _{0}^{2}}}+{\\frac {\\sum _{i=1}^{n}x_{i}}{\\sigma ^{2}}}\\right)}$ |\n\nì´ë¥¼ ì´ìš©í•˜ë©´, ìš°ë¦¬ëŠ” ê°„ë‹¨í•˜ê²Œ Posterioriì˜ í‰ê· ì„ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n  ","slug":"ml-parametric-estimation","date":"2022-10-15 11:25","title":"[ML] 1. Parametric Estimation","category":"AI","tags":["ML","MLE","MAP","Bayesian"],"desc":"Machine Learningì€ íŠ¹ì • ëª©í‘œë¥¼ ë‹¬ì„±í•˜ê¸° ìœ„í•´ì„œ ë°ì´í„°ë¡œ ë¶€í„° pattern ë˜ëŠ” ê°€ì • ë“±ì„ ìœ ë„í•´ë‚´ëŠ” ë°©ë²•ì´ë‹¤.ì´ë¥¼ ìœ„í•œ ê°€ì¥ ì¼ë°˜ì ì¸ ë°©ë²•ì€ ì—¬ëŸ¬ ê°œì˜ í™•ë¥ ë¶„í¬ì™€ ì´ê²ƒì˜ parameterì˜ ì¡°í•©(probabilistic model)ë“¤ ì¤‘ì—ì„œ ì¸¡ì •ëœ ë°ì´í„°ë“¤ì„ ê°€ì¥ ì˜ ë‚˜íƒ€ë‚´ëŠ” í•˜ë‚˜ë¥¼ ì°¾ì•„ë‚´ëŠ” ê²ƒì´ë‹¤.ê·¸ ì¤‘ì—ì„œ, í™•ë¥  ë¶„í¬ë¥¼ ê²°ì •í•œ ìƒíƒœì—ì„œ parameterë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” í˜•íƒœì˜ ì ‘ê·¼ë²•ì„ ìš°ë¦¬ëŠ” Parametric Estimationì´ë¼ê³  í•œë‹¤. ê·¸ ì™¸ì—ë„ Nonparametric, Semi-parametric ë°©ì‹ë„ ì¡´ì¬í•˜ì§€ë§Œ ì´ëŠ” ì—¬ê¸°ì„œëŠ” ë‹¤ë£¨ì§€ ì•ŠëŠ”ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nRegression(íšŒê·€)ì´ë¼ëŠ” ë‹¨ì–´ëŠ” \"ì›ë˜ì˜ ìƒíƒœë¡œ ëŒì•„ê°„ë‹¤\"ë¡œ ëŒì•„ê°„ë‹¤ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤. ê²°êµ­ ì–´ë–¤ ì¼ë ¨ì˜ Eventë¡œ ì¸í•´ì„œ ë°ì´í„°ì— Noiseê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ë„ ê²°êµ­ì€ í•˜ë‚˜ì˜ \"ë³´í¸\"ìœ¼ë¡œ ì‹œê°„ì´ ì§€ë‚˜ë©´ ìˆ˜ë ´(íšŒê·€)í•  ê²ƒì´ë¼ëŠ” ìƒê°ì— ê¸°ë°˜í•˜ëŠ” ê²ƒì´ë‹¤.  \në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ \"ë³´í¸\"ì„ ì°¾ê¸° ìœ„í•´ì„œ ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” ë…ë¦½ ë°ì´í„° Xë¥¼ í†µí•´ì„œ ì•Œê³ ì í•˜ëŠ” ê°’ Yë¥¼ ë³´í¸ì ìœ¼ë¡œ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤. ì´ ê³¼ì •ì„ ìš°ë¦¬ëŠ” Regressionì´ë¼ê³  ë¶€ë¥¸ë‹¤. ë˜í•œ, Xì— ì˜í•´ ë…ë¦½ì ì´ì§€ ì•Šê³  ì¢…ì†ì ì¸ Yì˜ ê´€ê³„ê°€ Linearí•˜ê²Œ í‘œí˜„ë  ë•Œ ì´ë¥¼ ìš°ë¦¬ëŠ” Linear Regressionì´ë¼ê³  í•œë‹¤.  \në”°ë¼ì„œ, í•´ë‹¹ Postingì—ì„œëŠ” Linear Regressionì„ ë°”íƒ•ìœ¼ë¡œ Machine Learningì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤.\n\n## Regression\n\n> **ì •ì˜**\n\në…ë¦½ ë³€ìˆ˜ Xë¡œ ë¶€í„° ì¢…ì† ë³€ìˆ˜ Yì— ëŒ€ì‘ë˜ëŠ” í•¨ìˆ˜ fë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì„ ì˜ë¯¸í•œë‹¤.\n\n$$\n\\bold{y} = f(\\bold{x}) + \\epsilon\n$$\n\n$$\nf(\\bold{x}) = \\bold{w}^{\\top}\\bold{x}, \n(\\bold{w} = \\begin{bmatrix} w_{0} \\\\ w_{1} \\\\ w_{2} \\\\ \\vdots \\\\ w_{N} \\\\ \\end{bmatrix}, \\bold{x} = \\begin{bmatrix} 1 \\\\ x_{1} \\\\ x_{2} \\\\ \\vdots \\\\ x_{N} \\\\ \\end{bmatrix} )\n$$\n\nì—¬ê¸°ì„œ ê° ë³€ìˆ˜ $x$, $y$, $\\epsilon$, $w$ì€ ë‹¤ìŒê³¼ ê°™ì´ ì—¬ëŸ¬ ì´ë¦„ìœ¼ë¡œ ë¶ˆë ¤ì§„ë‹¤.\n\n- $x$ : input, ë…ë¦½ ë³€ìˆ˜, predictor, regressor, covariate\n- $y$ : output, ì¢…ì† ë³€ìˆ˜, response\n- $\\epsilon$ : noise, ê´€ì¸¡ë˜ì§€ ì•Šì€ ìš”ì†Œ\n- $w$ : weight, ê°€ì¤‘ì¹˜, parameter \n\n> <mark>**ì„±ëŠ¥ í‰ê°€(MSE)**</mark>\n\nìš°ë¦¬ê°€ ë§Œë“  Regressionì´ ì–¼ë§ˆë‚˜ ë°ì´í„°ë¥¼ ì˜ ë°˜ì˜í•˜ëŠ”ì§€ë¥¼ ì•Œê³  ì‹¶ì„ ë•Œ, ì¦‰ í‰ê°€í•˜ê³ ì í•  ë•Œ, ìš°ë¦¬ëŠ” Mean Squared Error(MSE)ë¥¼ ì‚¬ìš©í•œë‹¤. ì´ëŠ” ì´ì „ í¬ìŠ¤íŒ…ì¸ [Parametric Estimation](/posts/ml-parametric-estimation)ì—ì„œë„ ì‚´í´ë³´ì•˜ì—ˆë‹¤. \n\nê·¸ë ‡ë‹¤ë©´, MSEë¥¼ ìµœì†Œë¡œ í•˜ëŠ” f(x)ëŠ” ë¬´ì—‡ì¼ê¹Œ? ì´ë¥¼ í†µí•´ì„œ ë˜, í•˜ë‚˜ì˜ ì‹ê²¬ì„ ë„“í ìˆ˜ ìˆë‹¤. í•œ ë²ˆ MSE ì‹ì„ ì •ë¦¬í•´ë³´ì.\n\n$$\n\\begin{align*}\n\\Epsilon(f) &= E[||\\bold{y}_*-f(\\bold{x})||^2] \\\\\n&= \\int\\int||\\bold{y}_*-f(\\bold{x})||^2p(\\bold{x}, \\bold{y}_*)d\\bold{x}d\\bold{y}_* \\\\\n&= \\int\\int||\\bold{y}_*-f(\\bold{x})||^2p(\\bold{x})p(\\bold{y}_* | \\bold{x})d\\bold{y}_*d\\bold{x} \\\\\n&= \\int p(\\bold{x}) \\red{\\int||\\bold{y}_*-f(\\bold{x})||^2p(\\bold{y}_* | \\bold{x})d\\bold{y}_*}d\\bold{x}\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ ë°”ë¡œ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ìƒ‰ì¹ í•œ ë¶€ë¶„ì´ë‹¤. ìš°ë¦¬ê°€ ë°”ê¿€ ìˆ˜ ìˆëŠ” ê°’ì€ f(x)ë¥¼ êµ¬ì„±í•˜ëŠ” wë°–ì— ì—†ë‹¤ ì¦‰, ìœ„ ì‹ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì€ ë¹¨ê°„ìƒ‰ ë¶€ë¶„ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒê³¼ ê°™ì•„ì§„ë‹¤.  \në”°ë¼ì„œ, ì´ ë¶€ë¶„ì„ ë¯¸ë¶„í•´ì„œ ìµœì†Ÿê°’ì„ êµ¬í•  ìˆ˜ ìˆëŠ”ë° ì´ë¥¼ í™•ì¸í•´ë³´ì.\n\n$$\n\\begin{align*}\n&{\\partial\\over{\\partial{f(\\bold{x})}}}({\\int||\\bold{y}_*-f(\\bold{x})||^2p(\\bold{y}_* | \\bold{x})d\\bold{y}_*}) = 0 \\\\\n&{\\partial\\over{\\partial{f(\\bold{x})}}}({\\int||\\bold{y}_*^2p(\\bold{y}_* | \\bold{x})d\\bold{y}_*} - 2f(\\bold{x}){\\int\\bold{y}_*p(\\bold{y}_* | \\bold{x})d\\bold{y}_*} + f(\\bold{x})^2{\\int p(\\bold{y}_* | \\bold{x})d\\bold{y}_*}) = 0 \\\\\n&-2{\\int\\bold{y}_*p(\\bold{y}_* | \\bold{x})d\\bold{y}_*} + 2f(\\bold{x}) = 0 \\\\\n&f(\\bold{x}) = {\\int\\bold{y}_*p(\\bold{y}_* | \\bold{x})d\\bold{y}_*} = E[\\bold{y}_*|\\bold{x}]\n\\end{align*}\n$$\n\nì¦‰, ìš°ë¦¬ê°€ êµ¬í•˜ê³ ì í•˜ëŠ” Linear Regression í•¨ìˆ˜ëŠ” data xì— ë”°ë¥¸ ì‹¤ì œ y ê°’ì˜ í‰ê· ì„ ì˜ë¯¸í•œë‹¤. Regressionì˜ ì •ì˜ë¥¼ ìƒê°í–ˆì„ ë•Œ, ì–´ëŠì •ë„ í•©ë¦¬ì ì´ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. \"ë³´í¸\"ì ì´ë‹¤ëŠ” ì˜ë¯¸ì—ì„œ \"í‰ê· \"ì„ ì“°ëŠ” ê²½ìš°ê°€ ë§ì´ ìˆê¸° ë•Œë¬¸ì´ë‹¤.\n\nìœ„ì—ì„œëŠ” MSEë¥¼ ì´ìš©í•´ì„œ ë¶„ì„í•˜ì˜€ì§€ë§Œ, MAE(Mean Absolute Error)ë¥¼ í™œìš©í•˜ì—¬ êµ¬í•  ìˆ˜ ìˆëŠ”ë° ì´ ê²½ìš°ì—ëŠ” Regressionì˜ í˜•íƒœê°€ ë˜ ë‹¬ë¼ì§„ë‹¤. ì¦‰, MSEë¥¼ ìµœì†Œí™”í•˜ëŠ” ë°©ì‹ì€ ìš°ë¦¬ê°€ \"ë³´í¸\"ì ì¸ ë‹µì„ êµ¬í•˜ëŠ”ë° ìˆì–´ \"í‰ê· \"ì„ í™œìš©í•œ ê²ƒì´ê³ , MAEë¥¼ ì‚¬ìš©í•œë‹¤ë©´, ë˜ ë‹¤ë¥¸ ë°©ì‹ì„ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë  ê²ƒì´ë‹¤.\n\n## MLE of Linear Regression\n\nì´ì œ Linear Regressionì—ì„œ $\\bold{w}$ë¥¼ ì–´ë–»ê²Œ ì°¾ì•„ ë‚˜ê°ˆì§€ì— ëŒ€í•´ì„œ ì‚´í´ë³¼ ê²ƒì´ë‹¤. ìˆœì„œëŠ” ì´ì „ Posting [Parametric Estimation](/posts/ml-parametric-estimation)ì—ì„œ ì‚´í´ë´¤ë˜ ê²ƒê³¼ ë§ˆì°¬ê°€ì§€ë¡œ MLE, MAP ìˆœìœ¼ë¡œ ì‚´í´ë³¼ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì´ê²ƒì´ ì™œ MLEê³ , MAPë‘ ê´€ë ¨ì´ ìˆëŠ”ì§€ë„ ì‚´í´ë³¼ ê²ƒì´ë‹¤.\n\në“¤ì–´ê°€ê¸°ì— ì• ì„œ, í‘œê¸°ë²•ê³¼ ìš©ì–´ë¥¼ ëª‡ ê°œ ì •ë¦¬í•  í•„ìš”ê°€ ìˆë‹¤.\n\n- $\\bold{x}, \\bold{y}, \\bold{w}$ ë“± êµµì€ ì„  ì²˜ë¦¬ë˜ì–´ ìˆëŠ” ë³€ìˆ˜ëŠ” vectorë¥¼ ì˜ë¯¸í•œë‹¤.\n- $\\bold{X}$ ë“± êµµê³  ëŒ€ë¬¸ìë¡œ ì²˜ë¦¬ë˜ì–´ ìˆëŠ” ë³€ìˆ˜ëŠ” Matrixë¥¼ ì˜ë¯¸í•œë‹¤.\n- $\\bold{w^{\\top}}$, $\\bold{X}^{\\top}$ ì—ì„œ TëŠ” Transposeë¥¼ ì˜ë¯¸í•œë‹¤.\n- feature : input ë°ì´í„°ì˜ ê° ê° ë¶„ë¥˜ ê¸°ì¤€ë“¤ì„ ì˜ë¯¸í•œë‹¤. ìˆ˜ì‹ìœ¼ë¡œëŠ” $x_1, x_2, x_3$ ì´ëŸ° ì‹ìœ¼ë¡œ í‘œí˜„ëœ inputë“¤ ì¤‘ì— ê° ê°ì˜ inputì„ featureë¼ê³  í•˜ë©°, ì‹¤ì œ ì˜ˆì‹œë¡œëŠ” ë°ì´í„° ìˆ˜ì§‘ ì‹œì— ê° ë°ì´í„°ì˜ column(ë‚˜ì´, ì„±ë³„, ë“± ë“±)ì´ ë  ê²ƒì´ë‹¤.\n\nìœ„ì˜ ìš©ì–´ ì •ë¦¬ì— ì˜í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì‹¤ì„ ë‹¤ì‹œ í•œ ë²ˆ í™•ì¸í•˜ì.\n\në¨¼ì €, ë‹¨ì¼ Linear Regressionì´ë‹¤.\n\n$$\n\\hat{y} = f(\\bold{x}) = \\bold{w}^{\\top}\\bold{x} = \\bold{x}^{\\top}\\bold{w}\n$$\n\nì´ë²ˆì—ëŠ” ì—¬ëŸ¬ ê°œì˜ ë°ì´í„°ë¥¼ í•œ ë²ˆì— ì¶”ì¸¡í•œ ê²°ê³¼ê°’ $\\hat{\\bold{y}}$ ì´ë‹¤.\n\n$$\n\\hat{\\bold{y}} = \\bold{X}\\bold{w}\n$$\n\nê° ì˜ë¯¸ë¥¼ ê³±ì”¹ì–´ë³´ë©´ ì–´ë–»ê²Œ ìƒê²¼ì„ì§€ ì–´ë µí’‹ì´ ì§ì‘ì´ ì˜¬ ê²ƒì´ë‹¤.\n\n> **basis function**\n\nì—¬ê¸°ì„œ ë˜ í•˜ë‚˜ ì§šì–´ë³¼ ê²ƒì€ ë°”ë¡œ $\\bold{x}$ë¥¼ ë³€í˜•í•˜ëŠ” ë°©ë²•ì´ë‹¤. ë°”ë¡œ, ìš°ë¦¬ëŠ” ë°ì´í„°ë¡œ ì…ë ¥ ë°›ì€ ë°ì´í„°ë¥¼ ë°”ë¡œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆì§€ë§Œ, í•´ë‹¹ input ê°’ì„ ì œê³±í•´ì„œ ì‚¬ìš©í•´ë„ ë˜ê³ , ì„œë¡œ ë”í•´ì„œ ì‚¬ìš©í•´ë„ ë˜ê³ , ë‚˜ëˆ„ì–´ì„œ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ì„œ ìš°ë¦¬ê°€ êµ¬í•˜ê³  ì‹¶ì€ ê°’ì´ ëŒ€í•œë¯¼êµ­ ì¸êµ¬ì˜ í‰ê·  ë‚˜ì´ë¼ê³  í•˜ì. ì´ë•Œ, ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë°ì´í„°ì˜ ê°’ì´ ê°€êµ¬ ë‹¨ìœ„ë¡œ ì¡°ì‚¬ë˜ì–´ ë¶€,ëª¨,ìì‹1, ìì‹2, ... ë¡œ ë¶„ë¥˜ë˜ì–´ ë‚˜ì´ê°€ ì í˜€ìˆë‹¤ê³  í•˜ì. ì´ë•Œ ìš°ë¦¬ê°€ í•„ìš”í•œ ê²ƒì€ ê²°êµ­ ì „ì²´ ì¸êµ¬ì˜ ë‚˜ì´ ë°ì´í„°ì„ìœ¼ë¡œ ëª¨ë‘ í•˜ë‚˜ì˜ featureë¡œ í•©ì³ë²„ë¦´ ìˆ˜ë„ ìˆë‹¤.\n\nì´ëŸ¬í•œ ê³¼ì •ì„ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” basis function($\\phi(\\bold{x})$)ì´ë¼ëŠ” ê²ƒì„ ì´ìš©í•œë‹¤. ë‹¨ìˆœíˆ input dataë¥¼ í•©ì„±í•´ì„œ í•˜ë‚˜ì˜ inputì„ ìƒì„±í•˜ëŠ” ê²ƒì´ë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•„ìš”ì— ë”°ë¼ input dataë¥¼ ê°€ê³µí•˜ì—¬ ì‚¬ìš©í•˜ë©° ì—¬ëŸ¬ $\\phi$ë¥¼ ì ìš©í•˜ì—¬ ë‚˜íƒ€ë‚¼ ê²½ìš° linear regressionì€ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœê°€ ëœë‹¤.\n\n$$\nf(\\bold{x}) = \\bold{w}^{\\top}\\boldsymbol{\\phi}(\\bold{x})\n$$\n\nëŒ€í‘œì ì¸ Basis functionì„ ì‚´í´ë³´ì.\n\n- Polynomial basis : í•˜ë‚˜ì˜ input featureì— ëŒ€í•´ì„œ n-ì œê³±í˜•íƒœì˜ vectorë¡œ ë³€í™˜í•˜ëŠ” í˜•ì‹ì´ë‹¤. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì´ í‘œê¸° ëœë‹¤.  \n  $\\boldsymbol{\\phi}(\\bold{x}) = \\begin{bmatrix} 1 \\\\ x \\\\ x^{2} \\\\ \\vdots \\\\ x^{n} \\\\ \\end{bmatrix}$, $\\bold{w}^{\\top}\\boldsymbol{\\phi}(\\bold{x}) = w_{0} + w_{1}x + w_{2}x^{2} + ... + w_{n}x^{n}$  \n  ëŒ€ê²Œ ì´ëŸ¬í•œ í˜•íƒœë¡œ ë³€í˜•í•œ Linear Regressionì„ Polinomial Regressionì´ë¼ê³  ë¶€ë¥´ëŠ”ë°, ì´ë¥¼ í†µí•œ ê²°ê³¼ ê°’ì´ ë§ˆì¹˜ ë‹¤í•­ì‹ì˜ í˜•íƒœë¥¼ ë„ê¸° ë•Œë¬¸ì´ë‹¤. í•˜ì§€ë§Œ, featureì˜ ê°’ì´ polynomialì´ ë˜ì—ˆë”ë¼ë„ $\\bold{w}$ê°€ ì„ í˜•ì„ì„ ìŠì–´ì„œëŠ” ì•ˆëœë‹¤.  \n  ì´ë¥¼ ì‚¬ìš©í•˜ê²Œ ë˜ë©´, ìš°ë¦¬ëŠ” 1ì°¨ì›ì˜ input ê³µê°„ì—ì„œ ì„ í˜•ìœ¼ë¡œëŠ” ë‚˜ëˆŒ ìˆ˜ ì—†ë˜ ë¶„ë¥˜ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n- Gaussian basis : ê°€ìš°ì‹œì•ˆ ë¶„í¬ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒìœ¼ë¡œ íŠ¹ì • featureë¥¼ gaussianìœ¼ë¡œ ë³€í™˜í•˜ê²Œ ë˜ë©´, ë°ì´í„°ì˜ ê²½í–¥ì„±ì´ íŒŒì•…ëœë‹¤. ì´ëŠ” í›„ì— ë” ìì„¸íˆ ë‹¤ë£° ê¸°íšŒê°€ ì˜¨ë‹¤.  \n- Spline basis: íŠ¹ì • êµ¬ê°„ë§ˆë‹¤ ë‹¤ë¥¸ Polynomial í˜•íƒœì˜ featureë¥¼ ì ìš©í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì´ë‹¤. ëŒ€ê²Œ êµ¬ê°„ë§ˆë‹¤ ë‹¤ë¥¸ í™•ë¥  ë¶„í¬ë¥¼ ì ìš©í•˜ê³ ì í•  ë•Œ ì‚¬ìš©í•œë‹¤.\n- Fourier basis, Hyperbolic tangent basis, wavelet basis ë“± ì—¬ëŸ¬ ê°€ì§€ ë°©ì‹ì´ ì¡´ì¬í•œë‹¤.\n\n> **Design Matrix**\n\në§ˆì§€ë§‰ìœ¼ë¡œ, ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ $\\phi(\\bold{x})$ë¥¼ í•˜ë‚˜ì˜ Matrixë¡œ í•©ì¹œ ê²ƒì„ Design Matrixë¼ê³  í•œë‹¤. Nê°œì˜ ë°ì´í„°ë¥¼ Lê°œì˜ ì„œë¡œ ë‹¤ë¥¸ basis functionìœ¼ë¡œ ë³€í™˜í•œ ë°ì´í„°ë¥¼ í–‰ë ¬ë¡œ í‘œí˜„í•˜ë©´, ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\Phi = \n  \\begin{bmatrix} \n    \\phi_1({\\bold{x_1}})  & \\phi_2(\\bold{x_1})  & \\cdots  & \\phi_L(\\bold{x_1})  \\\\\n    \\phi_1({\\bold{x_2}})  & \\phi_2(\\bold{x_2})  & \\cdots  & \\phi_L(\\bold{x_2})  \\\\\n    \\vdots                & \\vdots              & \\ddots  & \\vdots              \\\\\n    \\phi_1({\\bold{x_N}})  & \\phi_2(\\bold{x_N})  & \\cdots  & \\phi_L(\\bold{x_N})  \\\\\n  \\end{bmatrix}\n$$\n\nì´ë¥¼ í†µí•´ì„œ í‘œí˜„í•œ ëª¨ë“  ë°ì´í„°ì— ëŒ€í•œ Linear Regressionì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\hat{\\bold{y}} = \\Phi\\bold{w}\n$$\n\nì ì´ì œë¶€í„° ìš°ë¦¬ëŠ” ë³¸ë¡ ìœ¼ë¡œ ë“¤ì–´ì™€ì„œ ìš°ë¦¬ì˜ Linear Regressionì˜ Weight(Parameter, $\\bold{w}$)ë¥¼ ì–´ë–»ê²Œ ì¶”ì •í•  ìˆ˜ ìˆì„ì§€ë¥¼ ì•Œì•„ë³´ì.\n\nìš°ë¦¬ëŠ” ìµœì¢…ì ìœ¼ë¡œ ìš°ë¦¬ì˜ Linear Regressionì´ ì •ë‹µê³¼ ë§¤ìš° ìœ ì‚¬í•œ ê°’ì„ ë‚´ë†“ê¸°ë¥¼ ì›í•œë‹¤. ë”°ë¼ì„œ, ì´ë•Œ ìš°ë¦¬ëŠ” Least Square Errorë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ëª¨ë“  ë°ì´í„°ì—ì„œ ì–»ì€ ì˜ˆì¸¡ê°’(Linear Regressionì˜ output)ê³¼ ì‹¤ì œ yì˜ ê°’ì˜ Square Errorì˜ í•©ì„ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\varepsilon_{LS}(\\bold{w}) = {1\\over2}\\sum_{n=1}^{N}(y_n - \\bold{w}^{\\top}\\boldsymbol{\\phi}(\\bold{x_n}))^2 = {1\\over2}||\\bold{y}_* - \\Phi\\bold{w}||^2\n$$\n\nì´ì œ $\\argmin_{\\bold{w}}\\varepsilon_{LS}(\\bold{w})$ì„ í’€ê¸° ìœ„í•´ì„œ ë¯¸ë¶„ì„ í•´ë³´ì.\n\n$$\n\\begin{align*}\n&{\\partial\\over\\partial\\bold{w}}{1\\over2}||\\bold{y}_* - \\Phi\\bold{w}||^2 = 0 \\\\\n&\\Phi^{\\top}(\\bold{y}_* - \\Phi\\bold{w}) = 0 \\\\\n&\\Phi^{\\top}\\Phi\\bold{w} = \\Phi^{\\top}\\bold{y_*} \\\\\n&\\bold{w} = (\\Phi^{\\top}\\Phi)^{-1}\\Phi^{\\top}\\bold{y_*} \\\\\n&\\bold{w} = \\Phi^{\\dagger}\\bold{y_*}\n\\end{align*}\n$$\n\nì´ë¥¼ í†µí•´ì„œ, ìœ„ì™€ ê°™ì€ ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n---\n\nê·¸ëŸ¼ ì´ ì‹ì´ ì™œ MLEë‘ ê´€ë ¨ì´ ìˆëŠ” ê²ƒì¼ê¹Œ? ê·¸ê²ƒì€ ë‹¤ìŒì˜ ê³¼ì •ì„ í†µí•´ì„œ ì¦ëª…í•  ìˆ˜ ìˆë‹¤.\n\nìš°ë¦¬ëŠ” ê° dataë§ˆë‹¤ ì¡´ì¬í•˜ëŠ” error(noise, $y_* - \\hat{y}$, $\\varepsilon$)ê°€ ê·¸ ì–‘ì´ ë§ì•„ì§ì— ë”°ë¼ ì •ê·œ ë¶„í¬ë¥¼ ë”°ë¥¸ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. (Central Limit Theorem)\n\n$$\n\\begin{align*}\n\\varepsilon &= y_* - \\hat{y} = y_*-\\phi(\\bold{x}) \\\\\ny_* &= \\phi(\\bold{x}) + \\varepsilon\n\\end{align*}\n$$\n\nì´ë¥¼ ì¢Œí‘œ í‰ë©´ ìƒì—ì„œ ë‚˜íƒ€ë‚´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤.\n\n![gaussian-error](/images/gaussian-error.jpeg)\n\në˜í•œ, $\\varepsilon$ì˜ í™•ë¥ ì„ ì •ì˜í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ í™•ë¥ ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\np(\\varepsilon) &= {1\\over{\\sqrt{2\\pi}\\sigma}}\\exp{[-{\\varepsilon^2\\over{2\\sigma^2}}]} \\\\\np(\\varepsilon) &= {1\\over{\\sqrt{2\\pi}\\sigma}}\\exp{[-{(y_*-\\phi(\\bold{x}))^2\\over{2\\sigma^2}}]}\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” $p(\\varepsilon)$ì„ $p(y_*|\\bold{x}; \\theta)$ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ($\\theta = (\\bold{w}, \\phi, \\sigma)$)\n\nìš°ë¦¬ëŠ” ì´ë¥¼ ì´ìš©í•´ì„œ Likelihoodë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\n\\mathcal{L} &= \\log{p(\\bold{y}_*|\\bold{X}; \\theta)} = \\sum_{i=1}^{N}{\\log{p(y_{*(i)}|\\bold{x}_{(i)}; \\theta)}} \\\\\n&= N\\log{{1\\over{\\sqrt{2\\pi}\\sigma}}} + \\sum_{i=1}^{N}{-{(y_*-\\phi(\\bold{x}))^2\\over{2\\sigma^2}}} \\\\\n&= N\\log{{1\\over{\\sqrt{2\\pi}\\sigma}}} - {1\\over{\\sigma^2}}\\red{{1\\over{2}}\\sum_{i=1}^{N}{(y_*-\\phi(\\bold{x}))^2}}\n\\end{align*}\n$$\n\nìš°ë¦¬ê°€ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ë°ì´í„°ëŠ” $\\phi(\\bold{x})$ ë°–ì— ì—†ë‹¤. ë”°ë¼ì„œ, ë¹¨ê°„ìƒ‰ì„ ì œì™¸í•œ ë¶€ë¶„ì€ Likelihoodì˜ ìµœëŒ“ê°’ì„ êµ¬í•  ë•Œ, ê³ ë ¤í•˜ì§€ ì•Šì•„ë„ ë˜ëŠ” ìƒìˆ˜ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ëŠ” Likelihoodì˜ ìµœëŒ“ê°’ì„ êµ¬í•˜ê¸° ìœ„í•´ì„œ ë¹¨ê°„ìƒ‰ í‘œì‹œëœ ë¶€ë¶„ì„ ìµœì†Œí™”í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³ , ì´ëŠ” ìš°ë¦¬ê°€ ì•ì—ì„œ ì‚´í´ë´¤ë˜, Least Squared Errorì™€ ê°™ë‹¤.\n\n<mark>ì¦‰, $\\bold{w}_{LS}=\\bold{w}_{MLE}$ ë¼ëŠ” ê²ƒì´ë‹¤.</mark>\n\n## MAP of Linear Regression\n\nì´ë²ˆì—ëŠ” Linear Regressionì—ì„œ $\\bold{w}$ë¥¼ ì°¾ì•„ë‚˜ê°€ëŠ” ê³¼ì •ì—ì„œ MAPë¥¼ í™œìš©í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.\n\n> **overfitting**\n\nìš°ë¦¬ê°€ MLEë¥¼ í†µí•´ì„œ Linear Regressionì„ ì°¾ëŠ” ê²ƒì´ ì¶©ë¶„í•˜ë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ëŠ” ì–´ì©” ìˆ˜ ì—†ì´ **overfitting**ì´ë¼ëŠ” ë¬¸ì œì— ì§ë©´í•˜ê²Œ ëœë‹¤. \n\n![over-fitting-example](/images/over-fitting-example.jpg)\n\n**overfitting**ì´ë€ ë°ì´í„°ë¥¼ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” ë¶„í¬ê°€ í•™ìŠµì— ì‚¬ìš©ëœ ë°ì´í„°ì— ëŒ€í•´ì„œëŠ” ì—ëŸ¬ê°€ ê±°ì˜ ì—†ëŠ” í˜•íƒœë¡œ ì˜ˆì¸¡í•˜ì§€ë§Œ, ê·¸ ì™¸ì— ë°ì´í„°ì— ëŒ€í•´ì„œëŠ” ì—ëŸ¬ê°€ í¬ê²Œ ë°œìƒí•˜ëŠ” ê²½ìš°ë¥¼ ì˜ë¯¸í•œë‹¤. ìœ„ì˜ ì˜ˆì‹œì—ì„œ ì²˜ëŸ¼ ë°ì´í„°ê°€ ì „ì²´ Sample spaceë³´ë‹¤ í„±ì—†ì´ ì ì€ ê²½ìš°ì— ë°œìƒí•˜ê¸° ì‰½ë‹¤.\n\nì´ëŸ¬í•œ ë¬¸ì œëŠ” ì‚¬ì‹¤ basis functionì„ ì˜ ì„ íƒí•˜ë©´ í•´ê²°í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ì–´ë–»ê²Œ ë§¤ë²ˆ ì ì ˆí•œ basis functionì„ ì°¾ê¸° ìœ„í•´ì„œ iterationì„ ë°˜ë³µí•˜ëŠ” ê²ƒì´ ì˜¬ë°”ë¥¼ê¹Œ? ê·¸ë¦¬ê³  ì´ëŠ” ì‹¤ì œ ì í•©í•œ ê°’ì„ ì°¾ê¸° ìœ„í•œ ìˆ˜í•™ì  ì‹ë„ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\n> **Regularization**\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” **regularization**ì„ ìˆ˜í–‰í•œë‹¤. ìœ„ì˜ overfittingëœ ê·¸ë˜í”„ë¥¼ ë³´ë©´ í•˜ë‚˜ì˜ insight(ë²ˆëœ©ì´ëŠ” idea?)ë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤. ë°”ë¡œ, ê¸‰ê²©í•œ ê¸°ìš¸ê¸°ì˜ ë³€í™”ëŠ” overfittingê³¼ ìœ ì‚¬í•œ ì˜ë¯¸ë¡œ ë³¼ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì¦‰, ê·¸ë˜í”„ì˜ í˜•íƒœê°€ smooth í•´ì•¼í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ errorì— ëŒ€í•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ ì¬ì •ì˜í•´ì„œ smoothing(regularization)ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\varepsilon = {1\\over2}||\\bold{y}_* - \\Phi\\bold{w}||^2 + {\\lambda\\over{2}}||\\bold{w}||^2\n$$\n\n$\\bold{w}$ì˜ L2 normì„ errorì— ì¶”ê°€í•˜ì—¬ $\\bold{w}$ì˜ í¬ê¸°ê°€ ì‘ì•„ì§€ëŠ” ë°©í–¥ìœ¼ë¡œ ì˜ˆì¸¡ì„ í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê²ƒì´ë‹¤. (ë¬¼ë¡  L1 normì„ ì‚¬ìš©í•  ìˆ˜ë„ ìˆë‹¤. ì´ ë˜í•œ, í›„ì— ë‹¤ë£° ê²ƒì´ë‹ˆ ì—¬ê¸°ì„œëŠ” ë„˜ì–´ê°€ê² ë‹¤. ì¶”ê°€ë¡œ ì´ë ‡ê²Œ L2 normì„ ì´ìš©í•˜ë©´ **Ridge Regression**, L1 normì„ ì´ìš©í•˜ë©´ **Lasso Regression**ì´ë¼ê³  í•œë‹¤.)\n\nì ì´ì œ ìœ„ì˜ ì‹ì„ ë¯¸ë¶„í•´ì„œ ìµœì†Œê°’ì´ ë˜ê²Œ í•˜ëŠ” $\\bold{w}$ë¥¼ ì°¾ì•„ë³´ì. ê³¼ì •ì€ ì—°ì‚°ì´ ê·¸ë ‡ê²Œ ì–´ë µì§€ ì•Šìœ¼ë¯€ë¡œ ë„˜ì–´ê°€ê³  ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n\n$$\n\\bold{w}_{ridge} = (\\lambda I + \\Phi^{\\top}\\Phi)^{-1}\\Phi^{\\top}\\bold{y}_*\n$$\n\n---\n\nê·¸ëŸ¼ ì´ ì—­ì‹œ MAPë¥¼ í†µí•´ì„œ í•´ì„í•´ë³´ë„ë¡ í•˜ì.\n\nìœ„ì—ì„œ ì‚´í´ë³¸ ë°”ì™€ ê°™ì´ ìš°ë¦¬ëŠ” wê°’ì´ ì‘ì„ í™•ë¥ ì´ ë†’ì„ ìˆ˜ë¡ ì¢‹ì€ ì„±ëŠ¥ì„ ê°€ì§ˆ ê²ƒì´ë¼ëŠ” Priorë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\nì¦‰,$p(\\bold{w})$ê°€ zero-mean gaussian(í‘œì¤€ì •ê·œë¶„í¬)í˜•íƒœë¥¼ ì´ë£¨ê¸°ë¥¼ ë°”ë„ ê²ƒì´ë‹¤.\n\n$$\np(\\bold{w}) = \\mathcal{N}(\\bold{w}|0, \\Sigma)\n$$\n\nê·¸ë¦¬ê³ , ì´ì „ì— MLEë¥¼ êµ¬í•  ë•Œ, Likelihoodë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í–ˆë‹¤.\n\n$$\n\\begin{align*}\np(\\bold{y}_*|\\bold{X}; \\theta) &= \\mathcal{N}(\\bold{y}_*-\\Phi\\bold{w}, \\sigma I) \\\\\np(\\bold{y}_*|\\Phi, \\bold{w}) &= \\mathcal{N}(\\bold{y}_*-\\Phi\\bold{w}, \\sigma I)\n\\end{align*}\n$$\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ë¥¼ ì´ìš©í•´ì„œ posteriorë¥¼ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤.\n\n$$\np(\\bold{w}|\\bold{y}_*, \\Phi) = {{p(\\bold{y}_*| \\Phi, \\bold{w})p(\\bold{w})}\\over{p(\\bold{y}_*|\\Phi)}}\n$$\n\nì—¬ê¸°ì„œ MAPë¥¼ êµ¬í•  ë•Œì—ëŠ” Lemma ì •ë¦¬(ë‘ ì •ê·œë¶„í¬ì˜ conditional Probabilityë¥¼ êµ¬í•˜ëŠ” ê³µì‹)ë¥¼ ì´ìš©í•˜ë©´ í¸í•˜ë‹¤. ë”°ë¡œ ì—°ì‚°ì€ ìˆ˜í–‰í•˜ì§€ ì•Šì§€ë§Œ ê²°ê³¼ ê°’ì€ ì•„ë˜ì™€ ê°™ë‹¤.\n\n$$\n\\bold{w}_{MAP} = (\\sigma^2\\Sigma^{-1}+\\Phi^{\\top}\\Phi)^{-1}\\Phi^{\\top}\\bold{y}\n$$\n\nì—¬ê¸°ì„œ ë§Œì•½ ìš°ë¦¬ê°€ $\\Sigma = {\\sigma^2\\over{\\lambda}}I$ë¼ê³  ê°€ì •í•˜ë©´, ìœ„ì˜ MAP ì‹ì€ Ridge Regressionê³¼ ë™ì¼í•´ì§€ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\nì¦‰, Ridge Regressionì€ MAPì˜ í•œ ì¢…ë¥˜ë¼ê³  ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\bold{w}_{ridge} \\in {(\\bold{w}_{MAP}, \\Sigma)}\n$$\n\n## Gradient Descent\n\nì—¬íƒœê¹Œì§€ ìš°ë¦¬ëŠ” Lossë¥¼ ì •ì˜í•˜ê³ , ì´ Lossê°€ ìµœì†Ÿê°’ì„ ê°–ëŠ” $\\bold{w}$ë¥¼ ì°¾ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ëª¨ë“  Lossê°€ ë¯¸ë¶„ì´ í•­ìƒ ì‰¬ìš´ ê²ƒì€ ì•„ë‹ˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼, Lossì˜ ë¯¸ë¶„ ê°’ì´ 5ì°¨ì› ì´ìƒì˜ ì‹ìœ¼ë¡œ ì´ë£¨ì–´ì§„ë‹¤ë©´, ìš°ë¦¬ëŠ” ì´ë¥¼ í’€ ìˆ˜ ì—†ì„ ìˆ˜ë„ ìˆë‹¤. 5ì°¨ì› ì´ìƒì˜ polynomialì—ì„œëŠ” ì„ í˜•ëŒ€ìˆ˜ì ì¸ í•´ê²°ë²•(ê·¼ì˜ ë°©ì •ì‹)ì´ ì—†ë‹¤ëŠ” ê²ƒì´ ì¦ëª…ë˜ì–´ìˆë‹¤.(Abel-Ruffini theorem)\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” Lossê°€ 0ì´ ë˜ëŠ” ì§€ì ì„ ì°¾ê¸° ìœ„í•´ì„œ, wì˜ ê°’ì„ ì ì§„ì ìœ¼ë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ì‹ì„ í™œìš©í•œë‹¤. ì´ë•Œ, ìš°ë¦¬ëŠ” wì˜ ê°’ì´ ê³„ì†í•´ì„œ Lossë¥¼ ê°ì†Œì‹œí‚¤ê¸°ë¥¼ ì›í•œë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í˜„ì¬ $\\bold{w}$ì—ì„œ Gradientë¥¼ í˜„ì¬ $\\bold{w}$ì— ë¹¼ì¤€ë‹¤. ì´ë¥¼ ìš°ë¦¬ëŠ” **Gradient Descent**ë¼ê³  í•œë‹¤.\n\n$$\n\\bold{w}_{t+1} = \\bold{w}_{t} - \\gamma((\\nabla L)(\\bold{w}_{t}))^{\\top}\n$$\n\nì—¬ê¸°ì„œ $\\gamma$ëŠ” step size(learning rate)ë¼ê³  í•˜ë©°, ê¸°ìš¸ê¸°ê°’ì„ ì–¼ë§ˆë‚˜ ë°˜ì˜í• ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.\n\n---\n\nì´ì œë¶€í„°ëŠ” Gradient Descentë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ ì§„í–‰í•˜ê¸° ìœ„í•œ 3ê°€ì§€ì˜ ê¸°ìˆ ë“¤ì„ ì¶”ê°€ì ìœ¼ë¡œ ì œì‹œí•œë‹¤.\n\n> **1. optimize stepsize**\n\nstepsize($\\gamma$)ê°€ íŠ¹ì • ìƒìˆ˜ë¡œ ì œì‹œëœ ê²Œ ì•„ë‹ˆë¼ ë³€ìˆ˜ë¡œ í‘œí˜„ëœ ì´ìœ ëŠ” linear regressionë§ˆë‹¤ ì ì ˆí•œ $\\gamma$ê°€ ë‹¤ë¥´ê¸° ë•Œë¬¸ì´ë‹¤. í•˜ë‚˜ì˜ ì˜ˆì‹œë¥¼ ë“¤ì–´ë³´ì.\n\n![loss-divergence](/images/loss-divergence.jpg)\n\nìœ„ëŠ” Loss functionì´ convexí•  ë•Œ, ìµœì†Ÿê°’ì„ ì°¾ì•„ë‚˜ê°€ëŠ” ê³¼ì •ì´ë‹¤. ë§Œì•½, $\\gamma$ê°€ í¬ë‹¤ë©´, Lossê°€ íŠ¹ì •ê°’ìœ¼ë¡œ ìˆ˜ë ´í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë°œì‚°í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë§‰ê¸° ìœ„í•´ $\\gamma$ë¥¼ êµ‰ì¥íˆ ì‘ì€ ìˆ˜ë¡œ í•˜ëŠ” ê²½ìš°ì—ëŠ” Lossì˜ ìµœì†Ÿê°’ì„ ì°¾ê¸°ë„ ì „ì— íŠ¹ì • ì§€ì ì—ì„œ ë©ˆì¶°ë²„ë¦´ ìˆ˜ë„ ìˆë‹¤. ë˜í•œ, Lossì˜ graphí˜•íƒœëŠ” dataë§ˆë‹¤ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— ì ˆëŒ€ì ì¸ $\\gamma$ì—­ì‹œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ë§¤ updateë§ˆë‹¤ ì ì ˆí•œ $\\gamma$ë¥¼ ì°¾ì„ë ¤ê³  ë…¸ë ¥í•œë‹¤. ì—¬ê¸°ì„œëŠ” ìì„¸íˆ ë‹¤ë£¨ì§€ ì•Šì§€ë§Œ í›„ì— ë” ë‹¤ë£° ê¸°íšŒê°€ ìˆì„ ê²ƒì´ë‹¤. ê°„ë‹¨íˆ í”„ë¡œê·¸ë˜ë°ì ìœ¼ë¡œ(systemical) ìƒê°í•˜ë©´, ì—…ë°ì´íŠ¸ ì´í›„ lossê°€ ë§Œì•½ ê·¸ì „ Lossë³´ë‹¤ ì»¤ì§„ë‹¤ë©´, ì´ë¥¼ ì·¨ì†Œí•˜ê³  ë” ì‘ì€ $\\gamma$ë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ê³ , ì—…ë°ì´íŠ¸ ëœ í›„ì˜ Lossì™€ ê·¸ì „ Lossê°€ ê°™ë‹¤ë©´, ì§„ì§œ ìˆ˜ë ´í•˜ëŠ”ì§€ë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ $\\gamma$ë¥¼ í‚¤ì›Œë³¼ ìˆ˜ë„ ìˆë‹¤.\n\n> **2. momentum**\n\nìš°ë¦¬ê°€ Gradient Descentë¥¼ ì§„í–‰í•˜ë‹¤ë³´ë©´, ë‹¤ìŒê³¼ ê°™ì€ í˜„ìƒì„ ìì£¼ ë§ˆì£¼í•˜ê²Œ ëœë‹¤.\n\n![momentum-example-1](/images/momentum-example-1.jpg)\n\nìš°ë¦¬ê°€ ì°¾ê³ ì í•˜ëŠ” Lossë¥¼ ì°¾ì•„ê°€ëŠ” ê³¼ì •ì—ì„œ ë§¤ ì—…ë°ì´íŠ¸ë§ˆë‹¤ ë°˜ëŒ€ë°©í–¥ìœ¼ë¡œ ê¸°ìš¸ê¸°ê°€ ë°”ë€ŒëŠ” ê²½ìš°ì´ë‹¤.(ì§„ë™í•œë‹¤) ì´ëŠ” ìµœì¢…ìœ¼ë¡œ ì°¾ê³ ì í•˜ëŠ” ê°’ì„ ì°¾ëŠ” ê³¼ì •ì´ ë” ì˜¤ë˜ ê±¸ë¦¬ê²Œ í•œë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ ì§„ë™ì„ ë§‰ê¸° ìœ„í•´ì„œ Momentumì„ ì‚¬ìš©í•œë‹¤. ì¦‰, ì´ì „ ì°¨ì‹œì—ì„œì˜ gradientë¥¼ ì €ì¥í•´ë‘ê³ , ì´ë¥¼ ë”í•´ì„œ ì§„ë™í•˜ëŠ” ê²ƒì„ ë§‰ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\bold{w}_{i+1} = \\bold{w}_{i} - \\gamma_{i}((\\nabla L)(\\bold{w}_{i}))^{\\top} + \\alpha \\Delta \\bold{w}_i ,( \\alpha \\in [0, 1] )\n$$\n\n$$\n\\Delta \\bold{w}_i = \\bold{w}_{i} - \\bold{w}_{i-1} = \\alpha \\Delta \\bold{w}_{i-1} - \\gamma_{i-1}((\\nabla L)(\\bold{w}_{i-1}))^{\\top}\n$$\n\nì¦‰, ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´, ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n![momentum-example-2](/images/momentum-example-2.jpg)\n\nì´ì „ ë³€í™”ëŸ‰ê³¼ í˜„ì¬ ë³€í™”ëŸ‰ì„ í•©í•˜ì—¬ ì´ë™í•˜ê¸° ë•Œë¬¸ì— ìœ„ì— ìƒˆë¡œ ì¶”ê°€ëœ ê²ƒì²˜ëŸ¼ ì§„ë™í•˜ì§€ ì•Šê³ , ì§„í–‰í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n> **3. Stochastic Gradient Descent**\n\nìš°ë¦¬ì˜ Gradient Descentì˜ ê°€ì¥ í° ë¬¸ì œëŠ” ë°”ë¡œ Global Minimumì„ ì°¾ì„ ê±°ë¼ëŠ” í™•ì‹ ì„ ì¤„ ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤. ì•„ë˜ ê·¸ë¦¼ì„ ë³´ì.\n\n![gradient-descent-example](/images/gradient-descent-example.jpg)\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ì´ˆê¸° w ê°’ì„ ì–´ë–»ê²Œ ì •í•˜ëƒì— ë”°ë¼ì„œ, **local minimum**ì„ ì–»ê²Œ ë˜ê±°ë‚˜ **global minimum**ì„ ì–»ê²Œ ëœë‹¤. ì¦‰, ì´ˆê¸°ê°’ì´ ê²°ê³¼ì— êµ‰ì¥íˆ í° ì˜í–¥ì„ ì¤€ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆìœ¼ë©°, í•™ìŠµ íš¨ìœ¨ë„ ë†’ì¼ ìˆ˜ ìˆëŠ” ê²ƒì´ Stochastic Gradient Descentì´ë‹¤. ì›ë¦¬ëŠ” Lossë¥¼ êµ¬í•˜ê¸° ìœ„í•´ì„œ ì „ì²´ ë°ì´í„°(ëª¨ì§‘ë‹¨)ë¥¼ ì‚¬ìš©í–ˆì—ˆëŠ”ë° ê·¸ëŸ¬ì§€ë§ê³  ì¼ë¶€ ë°ì´í„°ë¥¼ ëœë¤í•˜ê²Œ ì¶”ì¶œ(sampling)í•´ì„œ(í‘œë³¸ ì§‘ë‹¨) ì´ë“¤ì„ í†µí•´ì„œ Loss functionì„ êµ¬í•˜ê¸°ë¥¼ ë°˜ë³µí•˜ìëŠ” ê²ƒì´ë‹¤.\n\nì´ ë°©ì‹ì„ í†µí•´ì„œ êµ¬í•œ Gradientì˜ í‰ê· ì´ ê²°êµ­ì€ ì „ì²´ batchì˜ í‰ê· ê³¼ ê°™ë‹¤ëŠ” ê²ƒì€ Central Limit Theorem(ì¤‘ì‹¬ ê·¹í•œ ì •ë¦¬)ì— ì˜í•´ ì¦ëª…ì´ ëœë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ë¥¼ í†µí•œ gradient descentë„ íŠ¹ì • minimumì„ í–¥í•´ ë‚˜ì•„ê°€ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\nê·¸ë ‡ì§€ë§Œ, í‘œë³¸ ì§‘ë‹¨ì„ ì´ìš©í•œ í‰ê· ì„ êµ¬í–ˆì„ ë•Œì— ìš°ë¦¬ëŠ” noiseì— ì˜í•´ì„œ local minimumìœ¼ë¡œë§Œ ìˆ˜ë ´í•˜ëŠ” í˜„ìƒì„ ë§‰ì„ ìˆ˜ ìˆë‹¤. ì¦‰, gradient descentë¥¼ ë°˜ë³µí•˜ë‹¤ë³´ë©´, ë‹¤ë¥¸ local minimumìœ¼ë¡œ íŠ€ì–´ë‚˜ê°€ê¸°ë„ í•˜ë©° global minimumì„ ë°œê²¬í•  í™•ë¥ ì„ ë†’ì¼ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- [Probabilistic interpretation of linear regression clearly explained](https://towardsdatascience.com/probabilistic-interpretation-of-linear-regression-clearly-explained-d3b9ba26823b), Lily Chen","slug":"ml-linear-regression","date":"2022-10-17 09:46","title":"[ML] 2. Linear Regression","category":"AI","tags":["ML","LinearRegression","BasisFunction","Regularization","GradientDescent","Momentum","StochasticGradientDescent"],"desc":"Regression(íšŒê·€)ì´ë¼ëŠ” ë‹¨ì–´ëŠ” \"ì›ë˜ì˜ ìƒíƒœë¡œ ëŒì•„ê°„ë‹¤\"ë¡œ ëŒì•„ê°„ë‹¤ëŠ” ì˜ë¯¸ë¥¼ ê°€ì§„ë‹¤. ê²°êµ­ ì–´ë–¤ ì¼ë ¨ì˜ Eventë¡œ ì¸í•´ì„œ ë°ì´í„°ì— Noiseê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ë„ ê²°êµ­ì€ í•˜ë‚˜ì˜ \"ë³´í¸\"ìœ¼ë¡œ ì‹œê°„ì´ ì§€ë‚˜ë©´ ìˆ˜ë ´(íšŒê·€)í•  ê²ƒì´ë¼ëŠ” ìƒê°ì— ê¸°ë°˜í•˜ëŠ” ê²ƒì´ë‹¤.  ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ \"ë³´í¸\"ì„ ì°¾ê¸° ìœ„í•´ì„œ ìš°ë¦¬ê°€ ì•Œê³  ìˆëŠ” ë…ë¦½ ë°ì´í„° Xë¥¼ í†µí•´ì„œ ì•Œê³ ì í•˜ëŠ” ê°’ Yë¥¼ ë³´í¸ì ìœ¼ë¡œ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤. ì´ ê³¼ì •ì„ ìš°ë¦¬ëŠ” Regressionì´ë¼ê³  ë¶€ë¥¸ë‹¤. ë˜í•œ, Xì— ì˜í•´ ë…ë¦½ì ì´ì§€ ì•Šê³  ì¢…ì†ì ì¸ Yì˜ ê´€ê³„ê°€ Linearí•˜ê²Œ í‘œí˜„ë  ë•Œ ì´ë¥¼ ìš°ë¦¬ëŠ” Linear Regressionì´ë¼ê³  í•œë‹¤.  ë”°ë¼ì„œ, í•´ë‹¹ Postingì—ì„œëŠ” Linear Regressionì„ ë°”íƒ•ìœ¼ë¡œ Machine Learningì´ ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ì§€ë¥¼ ì´í•´í•˜ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì „ê¹Œì§€ ìš°ë¦¬ëŠ” input dataê°€ ë“¤ì–´ì™”ì„ ë•Œ, continuosí•œ outputì„ ì–»ëŠ” ê²ƒì„ ëª©í‘œë¡œ í–ˆë‹¤. í•˜ì§€ë§Œ í˜„ì‹¤ì—ì„œëŠ” ëŒ€ê²Œ ì •í™•í•œ ìˆ˜ì¹˜ë³´ë‹¤ëŠ” íŠ¹ì • ë¶„ë¥˜ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ íš¨ê³¼ì ì¸ ê²½ìš°ê°€ ë§ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, spam í•„í„°ë§, object detection, ë“± ë“±. ë”°ë¼ì„œ, í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” classificationì„ ìœ„í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” logistic regressionì— ëŒ€í•´ì„œ ì‚´í´ë³¼ ê²ƒì´ë‹¤.\n\n## Classification\n\n**Classification**ì´ë€ ê²°êµ­ íŠ¹ì • inputì´ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ í•˜ë‚˜ì˜ Classë¼ëŠ” outputì„ ë‚´ë³´ë‚´ëŠ” ê²ƒì´ë‹¤. ì¦‰, outputì€ ì—°ì†ì ì´ì§€ ì•Šê³ , descretí•˜ë‹¤. ëŒ€ê²Œ Classificationì—ì„œëŠ” Classì˜ ê°¯ìˆ˜ë¥¼ Kë¼ê³  í‘œê¸°í•˜ê³ , $C_k$ëŠ” k ë²ˆì§¸ Classë¼ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ì–´ì§„ë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, ì–´ë–»ê²Œ Classë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆëŠ” ê²ƒì¼ê¹Œ? ë§¤ìš° ë‹¨ìˆœí•˜ê²Œë„ ì´ëŠ” **Decision Boundary**ë¼ëŠ” ì„ ì„ ê·¸ì–´ì„œ í•´ê²° í•  ìˆ˜ ìˆë‹¤.\n\n![decision-boundary](/images/decision-boundary.jpg)\n\nìœ„ì˜ ì˜ˆì‹œì²˜ëŸ¼ ìš°ë¦¬ëŠ” ì„ ì„ í•˜ë‚˜ ê·¸ì–´ì„œ $\\red{\\text{x}}$ì™€ $\\blue{\\text{o}}$ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” Class 1ì— í•´ë‹¹í•  ê²ƒì´ë¼ê³  ì˜ˆì¸¡í•˜ëŠ” êµ¬ê°„ $R_1$ì´ ë§Œë“¤ì–´ì§€ê³ , Class 2ë¼ê³  ì˜ˆì¸¡í•˜ëŠ” êµ¬ê°„ $R_2$ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆë‹¤.\n\nì¦‰, classificationì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ í•´ì•¼í•  ì¼ì€ ê¸°ì¡´ì˜ Regression ê³¼ì •ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ì„ ì„ ì°¾ëŠ” ê²ƒì´ë‹¤.\n\nê²°êµ­ ì°¾ê³ ì í•˜ëŠ” ê²ƒì´ ì„ ì´ë¼ë©´, ì´ê²ƒì„ Linear Regressionìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ìœ¼ë¡œ ê°„ë‹¨íˆ Linear Regressionì„ ë°”ê¿”ì„œ ìƒê°í•  ìˆ˜ ìˆë‹¤.\n\n- ì˜ˆì¸¡ê°’($\\hat{y}$, $h(\\bold{x})$)  \n  $h(\\bold{x}) = \\text{sign}(\\bold{w}^{\\top}\\bold{x}) = \\begin{cases} +1 & \\bold{w}^{\\top}\\bold{x} \\geq 0 \\\\ -1 & \\text{otherwise}\\end{cases}$\n- Least Squared Error(LS, MLE)  \n  ì‹¤ì œë¡œ parameterë¥¼ êµ¬í•  ë•Œì—ëŠ” signì„ ì·¨í•˜ì§€ ì•ŠëŠ”ë°, signì„ ì·¨í•˜ê²Œ ë˜ë©´ ëª¨ë‘ LSëŠ” ê²°êµ­ ì˜¤ë‹µì˜ ê°¯ìˆ˜ ì •ë„ë¡œ ì·¨ê¸‰ëœë‹¤. ì¦‰, ì–¼ë§ˆë‚˜ ì˜ˆì¸¡ì´ ì˜ëª»ë˜ì—ˆëŠ”ì§€ë¥¼ ë°˜ì˜í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ì´ëŠ” ê¸°ì¡´ Linear Regressionì˜ LSë¥¼ êµ¬í•˜ëŠ” ë°©ë²•ê³¼ ë™ì¼í•˜ê²Œ ìˆ˜í–‰í•œë‹¤.  \n  $\\argmin_{w} {1\\over2}\\sum_{n=1}^{N}{(y_n - (\\bold{w}^{\\top}\\bold{x}))^2}$\n\nì´ë ‡ê²Œ Linear Regressionì„ ì ìš©í•˜ë©´ ë¬¸ì œê°€ ì—†ì„ ê±° ê°™ë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ë¬¸ì œê°€ ìˆë‹¤. ë°”ë¡œ, ë°ì´í„°ê°€ ë¶ˆê· í˜•í•  ë•Œì´ë‹¤. ë§Œì•½ ë°ì´í„°ê°€ decision boundaryë¥¼ ê¸°ì¤€ìœ¼ë¡œ ëŒ€ì¹­(symmetric)ì¸ í˜•íƒœë¡œ ì¡´ì¬í•œë‹¤ë©´, ë¬¸ì œê°€ ì—†ë‹¤. í•˜ì§€ë§Œ, ë¹„ëŒ€ì¹­(asymmetric)ì¸ ê²½ìš° ì œëŒ€ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤. ì™œëƒí•˜ë©´, linear regressionì€ ìµœì ì—ì„œ ë°ì´í„°ì˜ í‰ê· ì„ ë°˜ì˜í•˜ëŠ”ë° ë¶ˆê· í˜•í•œ ê²½ìš° ë°ì´í„°ì˜ í‰ê· ì´ Decision Boundaryê°€ ë˜ëŠ” ê²ƒì€ ë¬¸ì œê°€ ìˆë‹¤.\n\n![linear-in-classification](/images/linear-in-classification.jpg)\n\n## Logistic Regression\n\nìœ„ì—ì„œ ì œì‹œí•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ Classificationì—ì„œëŠ” Linear Regressionì´ ì•„ë‹Œ Logistic Regressionì„ í™œìš©í•œë‹¤. ì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ ê¸°ë°˜ì´ ë  ìš”ì†Œë“¤ì„ ë¨¼ì € ì‚´í´ë³´ì.\n\n> **Discriminant Function**\n\níŒë³„í•¨ìˆ˜(Discriminant Function, Score Function) ë“±ìœ¼ë¡œ ë¶ˆë¦¬ëŠ” í•´ë‹¹ í•¨ìˆ˜ëŠ” íŠ¹ì • dataê°€ íŠ¹ì • classì— ì†í•  ê°€ëŠ¥ì„±(likelihood, probability, score)ì„ ë‚˜íƒ€ë‚´ëŠ” í•¨ìˆ˜ì´ë‹¤. ì¦‰, inputìœ¼ë¡œ dataë¥¼ ë°›ê³ , outputìœ¼ë¡œ classì— ì†í•  í™•ë¥ ì„ ë‚´ë³´ë‚¸ë‹¤.\n\nì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ í•  ìˆ˜ ìˆë‹¤.\n\në§Œì•½, $f_k(\\bold{x}) \\gt f_j(\\bold{x})$ì´ë¼ë©´, $\\bold{x}$ì˜ classëŠ” $C_k$ì´ë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ìœ¼ë¡œ ì—¬ëŸ¬ ê°œì˜ Classê°€ ìˆëŠ” ê³µê°„ì—ì„œ dataë¥¼ ë¶„ë¥˜í•  ìˆ˜ ìˆë‹¤.\n\n$$\nh(\\bold{x}) = \\argmax_{k}f_{k}(\\bold{x})\n$$\n\nê·¸ë ‡ë‹¤ë©´, Discriminant Functionìœ¼ë¡œ ì–´ë–¤ ê°’ì„ ì“°ë©´ ì¢‹ì„ê¹Œ? ì´ì— ëŒ€í•œ í•´ê²°ì±…ì„ Bayes Decision Ruleì—ì„œ ì œì‹œí•œë‹¤.\n\n> **Bayes Decision Rule**\n\në§Œì•½ ìš°ë¦¬ê°€ íŠ¹ì • dataê°€ íŠ¹ì • Classì— ì†í•  í™•ë¥ ì„ êµ¬í•œë‹¤ê³  í•˜ì. ìš°ë¦¬ëŠ” ë¨¼ì € Likelihoodë¥¼ ìƒê°í•  ìˆ˜ ìˆë‹¤. $P(x|C = k), P(x|C = j)$ë¥¼ êµ¬í•˜ì—¬ ê° Classì— ì†í•  í™•ë¥ ì„ ë¹„êµí•  ìˆ˜ ìˆì„ê¹Œ?  \në¬¼ë¡  ë¹„êµëŠ” ê°€ëŠ¥í•˜ë‹¤ í•˜ì§€ë§Œ, ë°˜ìª½ì§œë¦¬ ë¹„êµë¼ê³  í•  ìˆ˜ ìˆë‹¤. ë§Œì•½, class kì— ì†í•˜ëŠ” ë°ì´í„°ë³´ë‹¤ class jì— ì†í•˜ëŠ” ë°ì´í„°ê°€ í›¨ì”¬ ë§ë‹¤ê³  í•˜ì. ê·¸ëŸ¬ë©´, ì¼ë°˜ì ìœ¼ë¡œ class jê°€ ë°œìƒí•  í™•ë¥  ìì²´ê°€ ë†’ë‹¤. í•˜ì§€ë§Œ, likelihoodëŠ” ì´ëŸ¬í•œ ê²½í–¥ì„ ë°˜ì˜í•˜ì§€ ì•ŠëŠ”ë‹¤. ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ ë“¤ì–´ë³´ì.\n\n```plaintext\n ğŸ¤” ì–´ë–¤ ë™ë¬¼ì˜ í„¸ì— ì¡´ì¬í•˜ëŠ” ìƒ‰ì˜ ê°¯ìˆ˜ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ê³ ì–‘ì´ì¼ í™•ë¥ ê³¼ í˜¸ë‘ì´ì¼ í™•ë¥ ì´ë¼ê³  í•˜ì.\n\n  ê·¸ë¦¬ê³ , input dataëŠ” í„¸ì— ì¡´ì¬í•˜ëŠ” ìƒ‰ì˜ ìˆ˜ë¼ê³  í•˜ì. (í˜¸ë‘ì´ëŠ” ëŒ€ê²Œ 3ê°€ì§€ ìƒ‰, ë°±í˜¸ = 2ê°€ì§€ ìƒ‰, ê³ ì–‘ì´ëŠ” ë§¤ìš° ë‹¤ì–‘)\n  ê·¸ë ‡ë‹¤ë©´, P(í„¸ì˜ ìƒ‰ = 3|C = í˜¸ë‘ì´), P(í„¸ì˜ ìƒ‰ = 3|C = ê³ ì–‘ì´)ë¥¼ ë¹„êµí–ˆì„ ë•Œ, ìš°ë¦¬ëŠ” ë‹¹ì—°íˆ ì „ìê°€ í¬ë‹¤ê³  ìƒê°í•  ê²ƒì´ë‹¤.\n  í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ìš°ë¦¬ê°€ ê³ ë ¤í•˜ì§€ ì•Šì€ ê²ƒì´ ìˆë‹¤. ë°”ë¡œ ì „ì²´ ê³ ì–‘ì´ì™€ í˜¸ë‘ì´ì˜ ë¹„ìœ¨ì´ë‹¤. \n  ìƒëŒ€ì ìœ¼ë¡œ ê³ ì–‘ì´ê°€ í˜¸ë‘ì´ë³´ë‹¤ ì••ë„ì ìœ¼ë¡œ ë§ë‹¤ëŠ” ê²ƒì„ ê³ ë ¤í–ˆì„ ë•Œ, ê³ ì–‘ì´ì˜ í™•ë¥ ì´ ë” ë†’ì„ ìˆ˜ë„ ìˆë‹¤. \n\n  ì¦‰, ì–´ë–¤ ë™ë¬¼ì˜ í„¸ì— ì¡´ì¬í•˜ëŠ” ìƒ‰ì˜ ê°¯ìˆ˜ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ê³ ì–‘ì´ì¼ í™•ë¥ ì€ \n  P(C=ê³ ì–‘ì´|í„¸ì˜ ìƒ‰=3) =  P(í„¸ì˜ ìƒ‰ = 3|C = ê³ ì–‘ì´)P(C=ê³ ì–‘ì´)ì´ë‹¤. (ë¶„ëª¨ëŠ” ìƒëµí•¨.)\n```\n\nì¦‰, Bayes Ruleì— ê¸°ë°˜í•˜ì—¬ ìš°ë¦¬ê°€ ì›í•˜ëŠ” outputì€ Posteriorë¼ëŠ” ê²ƒì„ ëª…í™•íˆ ì•Œ ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\np(C_{k}|\\bold{x}) &= {{p(\\bold{x}| C_{k}) p(C_{k})}\\over{\\sum_{j=1}^{K}{p(\\bold{x}|C_{j})p(C_{j})}}} \\\\\n&\\propto p(\\bold{x}| C_{k}) p(C_{k})\n\\end{align*}\n$$\n\nìœ„ì˜ ê²½ìš° Classê°„ì˜ ìƒëŒ€ ë¹„êµì— ì‚¬ìš©í•˜ëŠ” ì§€í‘œë¡œ ì´ë¥¼ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—, ë¶„ëª¨(Normalization Factor, í™•ë¥ ì˜ ì´í•©ì´ 1ì´ ë˜ë„ë¡ í•˜ëŠ” ì—­í• )ë¥¼ ì œì™¸í•˜ì—¬ë„ ìƒê´€ì—†ê¸°ì— ëŒ€ê²Œ ë³µì¡í•œ ë¶„ëª¨ ê³„ì‚°ì„ ì œì™¸í•˜ê³  í‘œí˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\në˜í•œ, ì•ì„  ì˜ˆì‹œì—ì„œ ì–»ì„ ìˆ˜ ìˆëŠ” insightëŠ” í¸í–¥ëœ ë°ì´í„°ì¼ìˆ˜ë¡ MLEë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤. ìœ„ì—ì„œ Linear Regressionì´ Classificationì— ë¶€ì í•¨í•œ ê²½ìš°ë„ ë°ì´í„°ì˜ í¸í–¥ì´ ìˆì„ ê²½ìš°ì´ë‹¤. ì´ ì—­ì‹œ Linear Regressionì´ ê²°êµ­ì€ MLEì— ê¸°ë°˜í•˜ê¸° ë•Œë¬¸ì¸ ê²ƒì´ë‹¤.\n\nìš°ë¦¬ëŠ” ê° Class ìì²´ì˜ í™•ë¥ (Prior)ê³¼ Likelihoodë¥¼ ì´ìš©í•  ìˆ˜ ìˆëŠ” Discriminant Functionì„ êµ¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n> **Logistic Regression**\n\nì ì´ì œ ë“œë””ì–´ Logistric Regressionì„ ì‹œì‘í•´ë³´ì. ìš°ë¦¬ëŠ” Discriminant Functionì„ ë¨¼ì € ì§€ì •í•´ì•¼ í•œë‹¤. ì—¬ëŸ¬ ê°€ì§€ ë°©ë²•ì´ ìˆì§€ë§Œ, ê°€ì¥ ëŒ€í‘œì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë°©ë²•ì€ **Softmax**ë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. **Softmax**ë¥¼ í™œìš©í•˜ì—¬ ì‹ì„ ë‚˜íƒ€ë‚´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n$$\np(y_n = k | \\bold{x}_n, \\bold{w}) = {{\\exp(\\bold{w}_{k}^{\\top}\\bold{x}_n)}\\over{\\sum_{j=1}^{K}{\\exp(\\bold{w}_{j}^{\\top}\\bold{x}_n)}}} \n$$\n\në§Œì•½, classê°€ 2ê°œì¸ Binary Classificationì¸ ê²½ìš°ì— **Softmax**ëŠ” ë‹¤ìŒê³¼ ê°™ì•„ì§„ë‹¤. íŠ¹íˆ ì´ë¥¼ **Sigmoid**(**Logit**)ë¼ê³  ì •ì˜í•œë‹¤.\n\n$$\np(y_n = k | \\bold{x}_n, \\bold{w}) = {1\\over{1+\\exp(-y_{n}\\bold{w}^{\\top}\\bold{x}_{n})}}\n$$\n\nì´ë¥¼ ìœ ë„í•˜ëŠ” ê³¼ì •ì€ ìƒëµí•˜ì§€ë§Œ, ì—¬íƒ€ ë‹¤ë¥¸ ë¸”ë¡œê·¸ë¥¼ ë” ì°¸ê³ í•˜ë©´ ì¢‹ë‹¤.\n\nì´ë¥¼ Linear Regressionê³¼ ë¹„êµí•´ì„œ ì‚´í´ë³´ì.\n\n![logistic-vs-linear](/images/logistic-vs-linear.jpg)\n\nLinear Regressionì€ íŠ¹ì •ê°’ì„ í–¥í•´ ë‚˜ì•„ê°€ê³  ìˆë‹¤. í•´ë‹¹ ë°©ì‹ì„ ë³´ë©´ xê°€ ëŒ€ìƒì˜ íŠ¹ì„±ì„ ê°•í•˜ê²Œ ê°€ì§€ê³  ìˆë‹¤ë©´, ëª…í™•í•˜ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ”ë°, ì´ëŠ” **sigmoid**($\\sigma$) í•¨ìˆ˜ê°€ [0, 1] ë²”ìœ„ ë‚´ì—ì„œ ì •ì˜ë˜ê¸° ë•Œë¬¸ì— Regression ê³¼ì •ì—ì„œ ê·¹ë‹¨ ë°ì´í„°(outlier)ê°€ ê°€ì§€ëŠ” ì˜í–¥ë ¥ì´ Linear Regressionë³´ë‹¤ ê·¹ë‹¨ì ìœ¼ë¡œ ì ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\nì ì´ê²ƒì´ ê°€ì§€ëŠ” ì˜ë¯¸ë¥¼ ì´ì „ì— ì‚´í´ë³¸ **Bayes Decision Rule**ì— ê¸°ë°˜í•´ì„œ ìƒê°í•´ë³´ì. **sigmoid**($\\sigma$)ëŠ” ê²°êµ­ ê·¹ë‹¨ì ì¸ ë°ì´í„°ì´ë“ , ì• ë§¤í•œ ë°ì´í„°ì´ë“  ê±°ì˜ ë¹„ìŠ·í•œ ê°’ìœ¼ë¡œ ë³€í™˜í•œë‹¤. ê·¸ë ‡ë‹¤ëŠ” ê²ƒì€ ê¸°ì¡´ì—ëŠ” í‰ê· ì„ êµ¬í•˜ëŠ”ë°ì— input(x)ì˜ ê°’ì´ í° ì˜í–¥ì„ ë¯¸ì³¤ë‹¤ë©´, **sigmoid**($\\sigma$)ì—ì„œëŠ” íŠ¹ì • classì— ì†í•˜ëŠ” xì˜ ê°¯ìˆ˜ê°€ ë§ì€ ì˜í–¥ì„ ì£¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ **sigmoid**($\\sigma$)ê°€ ì™„ë²½í•˜ì§€ëŠ” ì•Šì§€ë§Œ, **Bayes Decision Rule**ì„ ë°˜ì˜í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\në§ˆì§€ë§‰ìœ¼ë¡œ, MLEë¥¼ í†µí•´ì„œ Logistic Regressionì˜ parameterë¥¼ ì¶”ì •í•´ë³´ì. (MAPëŠ” ê¸°ì¡´ì— ì‚´í´ë³¸ Linear Regressionê³¼ ë™ì¼í•˜ê²Œ regularizerë¥¼ ë”í•´ì£¼ëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— ìƒëµí•œë‹¤.)\n\n$$\n\\begin{align*}\n\\argmax_{w}\\log{p(\\mathcal{D}|\\bold{w})} &= \\argmax_{w}\\sum_{n=1}^{N}{\\log p(y_{n}|\\bold{x}_{n}, \\bold{w})} \\\\\n&= \\argmax_{w}\\sum_{n=1}^{N}{\\log ({1\\over{1+\\exp(-y_{n}\\bold{w}^{\\top}\\bold{x}_{n})}}) } \\\\\n&= \\argmax_{w}\\sum_{n=1}^{N}{-\\log (1+\\exp(-y_{n}\\bold{w}^{\\top}\\bold{x}_{n})) } \\\\\n&= \\argmin_{w}\\sum_{n=1}^{N}{\\log (1+\\exp(-y_{n}\\bold{w}^{\\top}\\bold{x}_{n})) } \\\\\n\\end{align*}\n$$\n\n## Gradient Descent/Ascent\n\nìœ„ì˜ ë³µì¡í•œ ì‹ì„ ë´¤ìœ¼ë©´ ì•Œê² ì§€ë§Œ, ì•ˆíƒ€ê¹ê²Œë„ ì¼ë°˜ì‹ìœ¼ë¡œ $\\bold{w}_{MLE}, \\bold{w}_{MAP}$ ë“±ì„ êµ¬í•  ìˆ˜ëŠ” ì—†ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ë¯¿ì„ ê²ƒì€ Gradientë¥¼ ì´ìš©í•œ ë°©ì‹ì´ë‹¤.\n\n> **Gradient Descent**\n\në¨¼ì €, ìœ„ì—ì„œ ë´¤ê² ì§€ë§Œ, LossëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\mathcal{L} = \\sum_{n=1}^{N}{\\log(1+\\exp(-y_{n}\\bold{w}^{\\top}\\bold{x}_{n}))}\n$$\n\nì´ì œ ì´ë¥¼ ë¯¸ë¶„í•´ì„œ Gradientë¥¼ êµ¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\nabla_{\\bold{w}}\\mathcal{L}(\\bold{w}) = \\sum_{n=1}^{N}{{{-y_{n}\\exp(-y_{n}\\bold{w}^{\\top}\\bold{x}_{n})}\\over{1+\\exp(-y_{n}\\bold{w}^{\\top}\\bold{x}_{n})}}\\bold{x}_{n}}\n$$\n\në”°ë¼ì„œ, Gradient Descent ë°©ì‹ì€ ë‹¤ìŒê³¼ ê°™ì´ ì§„í–‰ëœë‹¤.\n\n$$\n\\bold{w}_{t+1} = \\bold{w}_{t} - \\alpha\\nabla_{\\bold{w}}\\mathcal{L}(\\bold{w}_{t})\n$$\n\n> **Gradient Ascent**\n\nìœ„ì˜ ë°©ì‹ì´ ê°€ì¥ ì¼ë°˜ì ì´ì§€ë§Œ, ìš°ë¦¬ê°€ sigmoidì˜ classê°’ìœ¼ë¡œ $y \\in \\{-1, 1\\}$ ëŒ€ì‹  $y \\in \\{0, 1\\}$ì„ ì‚¬ìš©í–ˆì„ ê²½ìš° ë‹¤ë¥¸ ì‹ìœ¼ë¡œë„ ì ‘ê·¼ì´ ê°€ëŠ¥í•˜ë‹¤.\n\nì´ ê²½ìš°ì—ëŠ” Lossë¼ê¸° ë³´ê¸° ì–´ë µì§€ë§Œ, ë‹¤ë¥¸ í˜•íƒœì˜ optimization í˜•íƒœê°€ ë§Œë“¤ì–´ì§„ë‹¤. (ì—¬ê¸°ì„œ $\\sigma$ëŠ” sigmoid í•¨ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.)\n\n$$\n\\argmax_{\\bold{w}} \\sum_{n=1}^{N}y_{n}\\log{\\sigma(\\bold{w}^{\\top}\\bold{x}_{n}) + (1-y_{n})\\log{(1-\\sigma(\\bold{w}^{\\top}\\bold{x}_{n}))} }\n$$\n\nì´ë¥¼ ë˜‘ê°™ì´ ë¯¸ë¶„í•˜ì—¬ ì‚¬ìš©í•˜ì§€ë§Œ, ë°˜ëŒ€ë¡œ ì´ ê²½ìš°ì—ëŠ” maximization ì´ê¸° ë•Œë¬¸ì— Gradient Ascentë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. \n\nìš°ì„  ë¯¸ë¶„ ê²°ê³¼ ì–»ëŠ” GradientëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\nabla_{\\bold{w}}\\mathcal{L}(\\bold{w}) = \\sum_{n=1}^{N}{[y_{n} - \\sigma(\\bold{w}^{\\top}\\bold{x}_{n})]\\bold{x}_{n}}\n$$\n\nêµ‰ì¥íˆ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬ê°€ ë˜ì–´ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n$$\n\\bold{w}_{t+1} = \\bold{w}_{t} - \\alpha\\nabla_{\\bold{w}}\\mathcal{L}(\\bold{w}_{t})\n$$\n\në”°ë¼ì„œ, ì•„ë˜ì™€ ê°™ì´ Gradient Ascentë¥¼ í™œìš©í•˜ì—¬ ê³„ì‚°í•˜ëŠ” ê²ƒë„ ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ë‹¤.\n\n> **Newton Method**\n\nì´ëŸ¬í•œ í˜•íƒœë¡œ ë„˜ì–´ì˜¤ê²Œ ë˜ë©´, êµ‰ì¥íˆ ë§ì€ ì—°ì‚°ì´ ê° updateë§ˆë‹¤ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ ê³¼ì •ì„ ì¶•ì•½í•  ë°©ë²•ì„ ì°¾ê²Œ ëœë‹¤. ê·¸ ì•„ì´ë””ì–´ëŠ” ë°”ë¡œ gradientë¥¼ ì—…ë°ì´íŠ¸ í•  ë•Œ, linear í•˜ê²Œ updateí•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ Quadraticí•˜ê²Œ updateí•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ ìœ„í•œ ë°©ë²•ë¡ ì´ **Newton Method**ì´ë‹¤. ì´ ë°©ì‹ì„ Logistic Regressionì— ì ìš©í•˜ì˜€ì„ ë•Œ, ì´ë¥¼ IRLS(Iterative Re-weighted Least Squared) Algorithm ì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n\n![newton-method](/images/newton-method.jpg)\n\nìœ„ ê·¸ë˜í”„ì—ì„œ f(x)ê°€ Loss ë¼ê³  í•  ë•Œ, ìš°ë¦¬ëŠ” $x_k$ì—ì„œ ì§ì„ í˜•ì˜ gradientë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ quadratic í˜•íƒœë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ë” ë¹ ë¥´ê²Œ ìˆ˜ë ´ê°’ì„ ì°¾ì„ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\nì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒ 2ê°€ì§€ì— ëŒ€í•œ ì‚¬ì „ ì´í•´ê°€ í•„ìš”í•˜ë‹¤.\n\n- Taylor Series  \n  smoothí•œ í˜•íƒœë¥¼ ê°€ì§„ xì— ëŒ€í•œ í•¨ìˆ˜ë¥¼ xì— ëŒ€í•œ ê¸‰ìˆ˜ì˜ í˜•íƒœë¡œ ë³€í™˜í•œ ê²ƒì´ë‹¤. ë”°ë¼ì„œ ì´ë¥¼ ì‹ìœ¼ë¡œ ë‚˜íƒ€ë‚´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.  \n  $T_{\\infin}(x) = \\sum_{k=0}^{\\infin}{f^{(k)}(x_{0})\\over{k\\!}}(x-x_{0})^{k} $  \n  ì¦‰, sine í•¨ìˆ˜ì™€ ê°™ì€ í˜•íƒœì˜ ê·¸ë˜í”„ë„ xì˜ ê¸‰ìˆ˜ í˜•íƒœë¡œ ë³€í™˜ì´ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤. Newton Methodì—ì„œëŠ” ë¬´í•œëŒ€ê¹Œì§€ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šê³ , ëŒ€ê²Œ K=2ê¹Œì§€ë¥¼ ì“´ë‹¤.\n- Hessian Matrix  \n  íŠ¹ì • í•¨ìˆ˜ $f(\\bold{x})$ë¥¼ ê° featureì— ëŒ€í•´ì„œ ì´ì¤‘ í¸ë¯¸ë¶„í•œ ê²°ê³¼ë¥¼ ì €ì¥í•œ í–‰ë ¬ì´ë‹¤. ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.  \n  $\n  H = \\nabla^{2}f(x) =\n  \\left[\n    \\begin{array}{ccc}\n      \\dfrac{\\partial^{2} f(\\mathbf{x})}{\\partial x_{1}^{2}} & \\cdots & \\dfrac{\\partial^{2} f(\\mathbf{x})}{\\partial x_{1} \\partial x_{D}} \\\\ \n      \\vdots & \\ddots & \\vdots \\\\\n      \\dfrac{\\partial^{2} f(\\mathbf{x})}{\\partial x_{D} \\partial x_{1}} & \\cdots & \\dfrac{\\partial^{2} f(\\mathbf{x})}{\\partial x_{n}^{2}}\n    \\end{array}\n  \\right]\n  $\n\nì´ë¥¼ ì´ìš©í•´ì„œ, Newton Methodì˜ ê²°ê³¼ê°’ì„ ì •ë¦¬í•˜ë©´ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\bold{w}^{(k+1)} = \\bold{w}^{(k)} - [\\nabla^{2}\\mathcal{J}(\\bold{w}^{(k)})]^{-1}\\nabla\\mathcal{J}(\\bold{w}^{(k)})\n$$\n\nì ì´ì œ ì´ê²ƒì„ ì‹¤ì œë¡œ Logistic Regression ì‹ì— ëŒ€ì…í•´ë³´ì.\n\n$$\n\\begin{align*}\n  \\nabla\\mathcal{J}(w) &= - \\sum_{n=1}^{N}(y_{n}-\\hat{y}_{n})x_{n} \\\\\n  \\nabla^{2}\\mathcal{J}(w) &= \\sum_{n=1}^{N}\\hat{y}_{n}(1-\\hat{y}_{n})\\bold{x}_{n}\\bold{x}_{n}^{\\top}\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ, ì•„ë˜ì™€ ê°™ì´ ë³€ìˆ˜ë¥¼ ì •ì˜í•˜ë©´,\n\n$$\nS = \n  \\begin{bmatrix}\n    \\hat{y}_{1}(1-\\hat{y}_1)  & \\cdots  & 0                         \\\\\n    \\vdots                    & \\ddots  & \\vdots                     \\\\\n    0                         & \\cdots  & \\hat{y}_{N}(1-\\hat{y}_N)  \\\\\n  \\end{bmatrix},\n\n\\bold{b} = \n  \\begin{bmatrix}\n    {{y_{1} - \\hat{y}_{1}}\\over{\\hat{y}_{1}(1-\\hat{y}_{1})}} \\\\\n    \\vdots \\\\\n    {{y_{N} - \\hat{y}_{N}}\\over{\\hat{y}_{N}(1-\\hat{y}_{N})}}\n  \\end{bmatrix}\n$$\n\nê²°ê³¼ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\n\\bold{w}_{k+1} &= \\bold{w}_{k} + (XS_{k}X^{\\top})^{-1}XS_{k}\\bold{b}_{k} \\\\\n&= (XS_{k}X^{\\top})^{-1}[(XS_{k}X^{\\top})\\bold{w}_{k} + XS_{k}\\bold{b}_{k}] \\\\\n&= (XS_{k}X^{\\top})^{-1}XS_{k}[X^{\\top}\\bold{w}_{k} + \\bold{b}_{k}]\n\\end{align*}\n$$\n\nì´ëŠ” ê²°ì½” ê³„ì‚° ê³¼ì •ì´ ë‹¨ìˆœí•˜ë‹¤ê³ ëŠ” í•  ìˆ˜ ì—†ì§€ë§Œ, ë¹ ë¥´ê²Œ ìˆ˜ë ´í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ê°€ì¹˜ìˆëŠ” ë°©ë²•ì´ë‹¤.\n\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)","slug":"ml-logistic-regression","date":"2022-10-18 09:58","title":"[ML] 3. Logistic Regression","category":"AI","tags":["ML","LogisticRegression","Classification","SigmoidFunction","SoftmaxFunction","NewtonMethod"],"desc":"ì´ì „ê¹Œì§€ ìš°ë¦¬ëŠ” input dataê°€ ë“¤ì–´ì™”ì„ ë•Œ, continuosí•œ outputì„ ì–»ëŠ” ê²ƒì„ ëª©í‘œë¡œ í–ˆë‹¤. í•˜ì§€ë§Œ í˜„ì‹¤ì—ì„œëŠ” ëŒ€ê²Œ ì •í™•í•œ ìˆ˜ì¹˜ë³´ë‹¤ëŠ” íŠ¹ì • ë¶„ë¥˜ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ íš¨ê³¼ì ì¸ ê²½ìš°ê°€ ë§ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, spam í•„í„°ë§, object detection, ë“± ë“±. ë”°ë¼ì„œ, í•´ë‹¹ í¬ìŠ¤íŒ…ì—ì„œëŠ” classificationì„ ìœ„í•´ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” logistic regressionì— ëŒ€í•´ì„œ ì‚´í´ë³¼ ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nìš°ë¦¬ëŠ” Classificationì„ í•˜ê¸° ìœ„í•´ì„œ Logistic Regressionì„ ìˆ˜í–‰í•˜ì˜€ë‹¤. ê·¸ ê²°ê³¼ ê²°êµ­ Classificationë„ ê²°êµ­ì€ ì„ ì„ ê¸‹ëŠ” ê²ƒì´ë¼ëŠ” ê²°ë¡ ì„ ë‚´ë¦¬ê²Œ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³  í•˜ë‚˜ ë” ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ ìˆë‹¤. ë°”ë¡œ ì£¼ì–´ì§„ ë°ì´í„°ì— ëŒ€í•´ì„œ ì™„ë²½í•˜ê²Œ êµ¬ë¶„í•˜ëŠ” decision boundaryê°€ ì—¬ëŸ¬ ê°œ ìˆì„ ë•Œ, ì–´ë–¤ ê²ƒì´ ê°€ì¥ ì¢‹ì€ ê²ƒì¼ê¹Œ? ì´ê²ƒì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ê²ƒì´ SVMì´ë‹¤. í•´ë‹¹ Postingì—ì„œëŠ” ì´ì— ëŒ€í•´ì„œ ì‚´í´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n## (Hard Margin) SVM\n\nSoft Vector Machineì˜ ì•½ìë¡œ, ìœ„ì—ì„œ ì œì‹œí•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ Marginì´ë¼ëŠ” ê²ƒì„ ë„ì…í•˜ì˜€ë‹¤.\n\n> **Margin**\n\n**Margin**ì´ë€ decison boundaryì™€ ê°€ì¥ ê°€ê¹Œìš´ ê° classì˜ ë‘ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ 2ë¡œ ë‚˜ëˆˆ ê°’ì´ë‹¤.\n\n![svm-1](/images/svm-1.jpg)\n\nìœ„ì˜ ê·¸ë¦¼ì€ ë˜‘ê°™ì€ ë°ì´í„° ë¶„í¬ì—ì„œ ëŒ€í‘œì ì¸ decision boundary ë‘ ê°œë¥¼ ì œì‹œí•œ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” êµ‰ì¥íˆ ë§ì€ decision boundaryë¥¼ ê·¸ë¦´ ìˆ˜ ìˆë‹¤. ê·¸ ì¤‘ì—ì„œë„ íŒŒë€ìƒ‰ ì‹¤ì„ ì´ ì§ê´€ì ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ decision boundaryê°€ ë  ê²ƒì´ë¼ê³  ì§ì‘í•  ìˆ˜ ìˆë‹¤. ê·¸ ì´ìœ ëŠ” í•„ì—°ì ìœ¼ë¡œ dataëŠ” noiseì— ì˜í•œ ì˜¤ì°¨ê°€ ë°œìƒí•  ìˆ˜ ìˆëŠ”ë° ì‹¤ì œ ë°ì´í„°ì˜ ì˜¤ì°¨ì˜ í—ˆìš© ë²”ìœ„ë¥¼ ìš°ë¦¬ëŠ” **margin**(=capability of unexpected noise)ë§Œí¼ í™•ë³´í•  ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ë¡œ ì´ë¥¼ í•´ì„í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ marginì„ í¬ê²Œ í•˜ë©´ í•  ìˆ˜ë¡ ì¢‹ì€ ì„±ëŠ¥ì„ ê°€ì§€ëŠ” ì„ ì„ ê·¸ì„ ìˆ˜ ìˆì„ ê²ƒì´ë¼ëŠ” ê²°ë¡ ì„ ë‚´ë¦´ ìˆ˜ ìˆë‹¤.\n\nì´ê²ƒì´ SVMì˜ í•µì‹¬ ì•„ì´ë””ì–´ì´ë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, marginì„ ìˆ˜í•™ì ìœ¼ë¡œ ì •ì˜í•´ë³´ì. ìš°ë¦¬ê°€ decision boundaryë¥¼ $f(\\bold{x}) := \\bold{w}^{\\top}\\bold{x} + b = 0$ì´ë¼ê³  í•œë‹¤ë©´, ì ($\\bold{x}_{i}$)ê³¼ vector ì§ì„  vector ì‚¬ì´ì˜ ê±°ë¦¬ ê³µì‹ì„ í†µí•´ì„œ ${{|f(\\bold{x}_{i})|}\\over{||\\bold{w}||^{2}}}$ë¼ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ marginì€ ìˆ˜í•™ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\min_{i}{{|f(\\bold{x}_{i})|}\\over{||\\bold{w}||^{2}}}\n$$\n\n```plaintext\n ğŸ¤” Canonical(ë²•ì¹™ê¹Œì§€ëŠ” ì•„ë‹ˆì§€ë§Œ ì‚¬ì‹¤ìƒ í‘œì¤€í™”ëœ) SVM\n\n SVMì—ì„œëŠ” f(x) = 0ì¸ ë“±ì‹ í˜•íƒœë¥¼ ê°™ëŠ”ë‹¤. ì¦‰ f(x)ì— ì–´ë–¤ ê°’ì„ ê³±í•´ë„ ë˜‘ê°™ë‹¤ëŠ” ê²ƒì´ë‹¤.\n ê·¸ëŸ°ë° marginì˜ í¬ê¸°ë¥¼ êµ¬í•  ë•Œì—ëŠ”, wì™€ bì— ì–´ë–¤ ê°’ì´ ê³±í•´ì§„ë‹¤ë©´ ì´ ê°’ì´ êµ‰ì¥íˆ ë‹¬ë¼ì§€ê²Œ ëœë‹¤.\n ë”°ë¼ì„œ, ì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” marginì—ì„œì˜ |f(x)| = 1ì´ ë  ìˆ˜ ìˆë„ë¡ ì„¤ì •í•œë‹¤. \n ì´ë ‡ê²Œ í•˜ë©´ ê³„ì‚°ì´ êµ‰ì¥íˆ ì‰¬ì›Œì§„ë‹¤.\n```\n\n![svm-2](/images/svm-2.jpg)\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ìœ„ì˜ ê·¸ë¦¼ê³¼ ê°™ì€ í˜•íƒœë¡œ $\\bold{x}^{-}$ì™€ $\\bold{x}^{+}$ë¥¼ ì°¾ì„ ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\nì´ì œ ë§ˆì§€ë§‰ìœ¼ë¡œ marginì„ ì •ì˜í•´ë³´ì.\n\n$$\n\\begin{align*}\n\\rho &= {1\\over2}\\{ {{|f(\\bold{x}^{+})|}\\over{||\\bold{w}||^{2}}} - {{|f(\\bold{x}^{-})|}\\over{||\\bold{w}||^{2}}}  \\} \\\\\n&= {1\\over2}{1\\over{||\\bold{w}||^{2}}}\\{\\bold{w}^{\\top}\\bold{x}^{+} - \\bold{w}^{\\top}\\bold{x}^{-}\\} \\\\\n&= {1\\over{||\\bold{w}||^{2}}}\n\\end{align*}\n$$\n\n> **Optimization**\n\nê·¸ë ‡ë‹¤ë©´, ì´ì œ ìš°ë¦¬ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ì¤€ë¹„ê°€ ëœ ê²ƒì´ë‹¤. ìš°ë¦¬ê°€ í•˜ê³ ì í•˜ëŠ” ê²ƒì€ marginì„ ìµœëŒ€í™”í•˜ë©´ì„œë„, ëª¨ë“  dataë¥¼ ì˜¤ë¥˜ì—†ì´ ë¶„ë¥˜í•˜ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ Constraint Optimization í˜•íƒœë¡œ ë³€í™˜í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\n  \\text{maximize}   \\quad & {1\\over{||\\bold{w}||^{2}}} &\\\\\n  \\text{subject to} \\quad & y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b) \\geq 1, & i = 1, ..., N\n\\end{align*}\n$$\n\nConditional Optimizationì€ ì´ì „ Posting([[ML] 0. Base Knowledge](/posts/ml-base-knowledge))ì—ì„œ ë‹¤ë£¬ë°” ìˆë‹¤. í•´ë‹¹ ë‚´ìš©ì— ëŒ€í•´ ë¯¸ìˆ™í•˜ë‹¤ë©´ í•œ ë²ˆ ì‚´í´ë³´ê³  ì˜¤ë„ë¡ í•˜ì.\n\nìœ„ ë‚´ìš©ì„ ìˆ™ì§€í•˜ì˜€ë‹¤ë©´, ìœ„ì˜ í¼ì´ ë‹¤ì†Œ ë°”ë€Œì–´ì•¼ í•œë‹¤ëŠ” ê²ƒì„ ì•Œ ê²ƒì´ë‹¤. í•´ë‹¹ í˜•íƒœë¥¼ ë°”ê¾¸ë©´ì„œ, minimize í˜•íƒœë¥¼ ë¯¸ë¶„ì´ ê°„í¸í•  ìˆ˜ ìˆë„ë¡ ë°”ê¾¸ë„ë¡ í•˜ê² ë‹¤.\n\n$$\n\\begin{align*}\n  \\text{minimize}   \\quad & {1\\over2}||\\bold{w}||^{2} &\\\\\n  \\text{subject to} \\quad & 1 - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b) \\leq 0, & i = 1, ..., N\n\\end{align*}\n$$\n\nìš°ì„  lagrangianì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\mathcal{L} = {1\\over2}||\\bold{w}||^{2} + \\sum_{i=1}^{N}\\alpha_{i}(1 - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b))\n$$\n\nì´ê²ƒì— KKT Conditionì„ ì ìš©í•˜ì—¬ ì •ë¦¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë“±ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n$$\n\\bold{w} = \\sum_{i=1}^{N}\\alpha_{i}y_{i}\\bold{x}_{i}\n$$\n\n$$\n\\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0\n$$\n\nì´ë¥¼ $\\mathcal{L}$ì— ëŒ€ì…í•˜ì—¬ ì‹ì„ ì •ë¦¬í•˜ë©´, ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\mathcal{L} = -{1\\over2}\\sum_{i=1}^{N}\\sum_{j=1}^{N}\\alpha_{i}\\alpha_{j}y_{i}y_{j}\\bold{x}_{i}^{\\top}\\bold{x}_{j} + \\sum_{i=1}^{N}\\alpha_{i}\n$$\n\nì´ì œ ì´ê²ƒì„ ì´ìš©í•´ì„œ Dual Problemì„ ì •ì˜í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\begin{align*}\n  \\text{maximize}   \\quad & -{1\\over2}\\sum_{i=1}^{N}\\sum_{j=1}^{N}\\alpha_{i}\\alpha_{j}y_{i}y_{j}\\bold{x}_{i}^{\\top}\\bold{x}_{j} + \\sum_{i=1}^{N}\\alpha_{i} &\\\\\n  \\text{subject to} \\quad & \\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0, & \\\\\n  & \\alpha_{i} \\geq 0, & i = 1, ..., N \n\\end{align*}\n$$\n\nì´ ì‹ì—ì„œ ëˆˆì—¬ê²¨ ë³¼ì ì€ ë°”ë¡œ constraint ë¶€ë¶„ì´ë‹¤. ì´ ê³¼ì •ì„ í†µí•´ì„œ ê²°ë¡ ì ìœ¼ë¡œ constraint ë¶€ë¶„ì´ ë¶€ë“±ì‹ì—ì„œ ë“±ì‹ì´ ë˜ì—ˆë‹¤. ì´ëŠ” ì—°ì‚° ê³¼ì •ì„ ë§¤ìš° ê°„ë‹¨í•˜ê²Œ í•œë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ $\\bold{x}_{i}^{\\top}\\bold{x}_{j}$ëŠ” í•œ ë²ˆ ê³„ì‚°í•˜ë©´, ì „ì²´ ê³¼ì •ì—ì„œ ê³„ì†í•´ì„œ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì»´í“¨íŒ… ì‹œì—ëŠ” êµ‰ì¥í•œ ì´ì ì„ ë°œíœ˜í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì‹¤ì œë¡œ ê°’ì„ êµ¬í•  ë•Œì—ëŠ” ì´ê²ƒì„ ì´ìš©í•˜ì—¬ ê°’ì„ êµ¬í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì¼ë°˜ì ì´ë‹¤.\n\n## (Soft Margin) SVM\n\nSVMì˜ ëª¨ë“  ì ˆì°¨ë¥¼ ì‚´í´ë³¸ ê²ƒ ê°™ì§€ë§Œ, ìš°ë¦¬ê°€ ê°„ê³¼í•œ ì‚¬ì‹¤ì´ í•˜ë‚˜ ìˆë‹¤. ë°”ë¡œ ê·¸ê²ƒì€ ìš°ë¦¬ëŠ” dataê°€ í•˜ë‚˜ì˜ ì„ ì„ í†µí•´ì„œ ì™„ë²½í•˜ê²Œ ë‚˜ë‰˜ì–´ì§„ë‹¤ê³  ê°€ì •í–ˆë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ë°ì´í„°ëŠ” ê·¸ë ‡ì§€ ì•Šì„ ê°€ëŠ¥ì„±ì´ í¬ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì–´ëŠ ì •ë„ì˜ ì˜¤ì°¨ë¥¼ í—ˆìš©í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤. ì´ë¥¼ slack($\\zeta$)ì´ë¼ê³  í•œë‹¤.\n\n![svm-2](/images/svm-2.jpg)\n\nì´ë¥¼ ì ìš©í•˜ë©´, ìš°ë¦¬ì˜ ëª©ì í•¨ìˆ˜ì™€ ì œì•½ ì¡°ê±´ì„ ë³€ê²½í•´ì•¼ í•œë‹¤. ì´ë¥¼ ë³€ê²½í•˜ëŠ” ë°©ë²•ì€ ë‘ ê°€ì§€ê°€ ì¡´ì¬í•˜ëŠ”ë° ê° ê° slack variableì˜ L2-normì„ ëª©ì í•¨ìˆ˜ì— ë”í•˜ëŠ” ë°©ì‹ê³¼ L1-normì„ ë”í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n> **L2-norm Optimization**\n\në¨¼ì € L2-normì„ ë”í•˜ëŠ” ë°©ì‹ì„ ì•Œì•„ë³´ì\n$$\n\\begin{align*}\n  \\text{minimize}   \\quad & {1\\over2}||\\bold{w}||^{2} + C\\sum_{i=1}^{N}\\zeta_{i}^{2} &\\\\\n  \\text{subject to} \\quad & 1 - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b) - \\zeta_{i} \\leq 0, & i = 1, ..., N\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ $C$ëŠ” margin ìµœëŒ€í™”ì™€ slackness ì •ë„ì˜ ìƒëŒ€ê°’ì„ ì˜ë¯¸í•œë‹¤. ë§Œì•½, slacknessë³´ë‹¤ marginì˜ ìµœëŒ€í™”ê°€ ì¤‘ìš”í•˜ë‹¤ë©´, Cê°’ì€ ì»¤ì§€ê³  ë°˜ëŒ€ë¼ë©´ ì´ ê°’ì€ ì‘ì•„ì§„ë‹¤.\n\nìš°ì„  lagrangianì„ ë¨¼ì € êµ¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\mathcal{L} = {1\\over2}||\\bold{w}||^{2} + {C\\over2}\\sum_{i=1}^{N}\\zeta_{i}^{2} + \\sum_{i=1}^{N}\\alpha_{i}(1 - \\zeta_{i} - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b))\n$$\n\nKKT conditionì„ ì´ìš©í•˜ì—¬ ì£¼ìš” ê°’ë“¤ì„ êµ¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë“±ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n$$\n\\bold{w} = \\sum_{i=1}^{N}\\alpha_{i}y_{i}\\bold{x}_{i}\n$$\n\n$$\n\\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0\n$$\n\n$$\n\\boldsymbol{\\zeta} = {\\alpha\\over{C}}\n$$\n\në§ˆì§€ë§‰ìœ¼ë¡œ ì´ë¥¼ Dual Problemìœ¼ë¡œ ì¬ì •ì˜í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì•„ì§„ë‹¤.\n\n$$\n\\begin{align*}\n  \\text{maximize}   \\quad & -{1\\over2}\\sum_{i=1}^{N}\\sum_{j=1}^{N}\\alpha_{i}\\alpha_{j}y_{i}y_{j}(\\bold{x}_{i}^{\\top}\\bold{x}_{j} + {1\\over{C}}\\delta_{ij}) + \\sum_{i=1}^{N}\\alpha_{i} &\\\\\n  \\text{subject to} \\quad & \\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0, & \\\\\n  & \\alpha_{i} \\geq 0, & i = 1, ..., N \n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ $\\delta_{ij}$ëŠ” ë‹¨ìœ„í–‰ë ¬ì´ë‹¤. ê¸°ì¡´ hard margin svmê³¼ ë¹„êµí–ˆì„ ë•Œ, ${1\\over{C}}\\delta_{ij}$ ì™¸ì—ëŠ” ë°”ë€Œì§€ ì•ŠëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤.\n\n> **L1-norm Optimization**\n\nê·¸ ë‹¤ìŒì€ L1-normì´ë‹¤.\n$$\n\\begin{align*}\n  \\text{minimize}   \\quad & {1\\over2}||\\bold{w}||^{2} + C\\sum_{i=1}^{N}\\zeta_{i} &\\\\\n  \\text{subject to} \\quad & 1 - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b) - \\zeta_{i} \\leq 0, & \\\\\n  & \\zeta_{i} \\geq 0 & i = 1, ..., N\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œëŠ” slack variableì´ ë°˜ë“œì‹œ 0ë³´ë‹¤ í¬ê±°ë‚˜ ê°™ë‹¤ëŠ” ê²ƒì„ ì£¼ì˜í•˜ì.\n\nlagrangianì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\mathcal{L} = {1\\over2}||\\bold{w}||^{2} + C\\sum_{i=1}^{N}\\zeta_{i} + \\sum_{i=1}^{N}\\alpha_{i}(1 - \\zeta_{i} - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b)) -  \\sum_{i=1}^{N}\\beta_{i}\\zeta_{i}\n$$\n\nKKT conditionì„ ì´ìš©í•˜ì—¬ ì£¼ìš” ê°’ë“¤ì„ êµ¬í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì€ ë“±ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n$$\n\\bold{w} = \\sum_{i=1}^{N}\\alpha_{i}y_{i}\\bold{x}_{i}\n$$\n\n$$\n\\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0\n$$\n\n$$\n\\sum_{i=1}^{N}\\beta_{i} = C\n$$\n\në§ˆì§€ë§‰ìœ¼ë¡œ ì´ë¥¼ Dual Problemìœ¼ë¡œ ì¬ì •ì˜í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì•„ì§„ë‹¤.\n\n$$\n\\begin{align*}\n  \\text{maximize}   \\quad & -{1\\over2}\\sum_{i=1}^{N}\\sum_{j=1}^{N}\\alpha_{i}\\alpha_{j}y_{i}y_{j}\\bold{x}_{i}^{\\top}\\bold{x}_{j} + \\sum_{i=1}^{N}\\alpha_{i} &\\\\\n  \\text{subject to} \\quad & \\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0, & \\\\\n  & 0 \\leq \\alpha_{i} \\leq C, & i = 1, ..., N \n\\end{align*}\n$$\n\nê²°êµ­ ê¸°ì¡´ Hard marginê³¼ ë¹„êµí–ˆì„ ëŒ€ëŠ” ë§ˆì§€ë§‰ constraintì— $\\alpha_{i} \\leq C$ê°€ ì¶”ê°€ëœ ê²ƒ ë°–ì— ì—†ë‹¤.\n\n---\n\në§ˆì§€ë§‰ìœ¼ë¡œ ì—¬ê¸°ì„œ í•˜ë‚˜ì˜ insightë¥¼ ë” ì–»ì„ ìˆ˜ ìˆë‹¤.  \nL1-normì˜ optimizationìœ¼ë¡œ ëŒì•„ê°€ë³´ì.\n\n$$\n\\begin{align*}\n  \\text{minimize}   \\quad & {1\\over2}||\\bold{w}||^{2} + C\\sum_{i=1}^{N}\\zeta_{i} &\\\\\n  \\text{subject to} \\quad & 1 - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b) - \\zeta_{i} \\leq 0, & \\\\\n  & \\zeta_{i} \\geq 0 & i = 1, ..., N\n\\end{align*}\n$$\n\nëª©ì  í•¨ìˆ˜ì˜ slack variableì— constraintì˜ ê°’ì„ ëŒ€ì…í•˜ì—¬, ë‹¤ìŒê³¼ ê°™ì´ ë³€í™˜ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n$$\n\\min {C^{\\prime}\\over2}||\\bold{w}||^{2} + \\sum_{i=1}^{N}max\\{ 0, 1 - y_{i}(\\bold{w}^{\\top}\\bold{x}_{i} + b) \\}\n$$\n\nì´ í˜•íƒœëŠ” logistric regressionì— regularizationì„ ìˆ˜í–‰í•œ ê²ƒê³¼ ë™ì¼í•œ í˜•íƒœë¥¼ ê°€ì§€ê²Œ ëœë‹¤. ì¦‰, ì´ì „ logistic regressionì—ì„œ regularizationì„ ë‹¤ë£¨ì§€ ì•Šì•˜ëŠ”ë°, ê²°êµ­ì€ soft margin svmì˜ L1-norm ëª©ì í•¨ìˆ˜ê°€ logistic regression ì¤‘ì—ì„œë„ hinge functionì´ë¼ëŠ” ê²ƒì„ ì´ìš©í–ˆì„ ë•Œì˜ regularizationì´ ë˜ëŠ” ê²ƒì´ë‹¤.\n\n## Generalization\n\nì—¬íƒœê¹Œì§€ ì‚´í´ë³¸ Regressionì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” Generalí•œ Classification ë°©ì‹ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤. ìš°ì„  ì•„ë˜ ì‹ì„ ì‚´í´ë³´ì.\n\n- Linear Regression(Quadratic Loss)  \n  $\\min {C^{\\prime}\\over2}||\\bold{w}||^{2} + \\sum_{i=1}^{N}{1\\over2}(1 - y_{i}(\\bold{w}^{\\top}\\phi(\\bold{x}_{i})) )^{2}$\n- Logit Regresion(Log Loss)  \n  $\\min {C^{\\prime}\\over2}||\\bold{w}||^{2} + \\sum_{i=1}^{N}\\log( 1 + \\exp[-y_{i}(\\bold{w}^{\\top}\\phi(\\bold{x}_{i})]) )$\n- Binary SVM(Hinge Loss)  \n  $\\min {C^{\\prime}\\over2}||\\bold{w}||^{2} + \\sum_{i=1}^{N}max\\{ 0, 1 - y_{i}(\\bold{w}^{\\top}\\phi(\\bold{x}_{i})) \\}$\n\nì—¬íƒœê¹Œì§€ ë‚˜ì˜¨ ì‹ë“¤ì„ ì‚´í´ë³´ë©´ ìœ„ì™€ ê°™ë‹¤. ìš°ë¦¬ëŠ” ì—¬ê¸°ì„œ ì•„ë˜ì™€ ê°™ì€ ì¼ë°˜ì ì¸ í˜•íƒœì˜ Classificationì„ ì œì‹œí•  ìˆ˜ ìˆë‹¤. \n\n- General Classification  \n  $\\min {C^{\\prime}\\over2}||\\bold{w}||^{2} + \\sum_{i=1}^{N}\\varepsilon\\log( 1 + \\exp[-y_{i}(\\bold{w}^{\\top}\\phi(\\bold{x}_{i})]) )$\n\nì—¬ê¸°ì„œ $\\varepsilon$ì´ 1ì´ë©´ ë°”ë¡œ logistic regressionì´ ë˜ê³ , $\\varepsilon$ì´ 0ì— ìˆ˜ë ´í•  ìˆ˜ë¡ SVMì´ ëœë‹¤. ì•„ë˜ ê·¸ë¦¼ì„ ë³´ë©´ ì´ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.\n\n![compare-regressions](/images/compare-regressions.jpg)\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)","slug":"ml-svm","date":"2022-10-18 17:29","title":"[ML] 4. SVM","category":"AI","tags":["ML","SVM","GeneralClassifier"],"desc":"ìš°ë¦¬ëŠ” Classificationì„ í•˜ê¸° ìœ„í•´ì„œ Logistic Regressionì„ ìˆ˜í–‰í•˜ì˜€ë‹¤. ê·¸ ê²°ê³¼ ê²°êµ­ Classificationë„ ê²°êµ­ì€ ì„ ì„ ê¸‹ëŠ” ê²ƒì´ë¼ëŠ” ê²°ë¡ ì„ ë‚´ë¦¬ê²Œ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³  í•˜ë‚˜ ë” ê³ ë¯¼í•´ ë³¼ ìˆ˜ ìˆëŠ” ê²ƒì´ ìˆë‹¤. ë°”ë¡œ ì£¼ì–´ì§„ ë°ì´í„°ì— ëŒ€í•´ì„œ ì™„ë²½í•˜ê²Œ êµ¬ë¶„í•˜ëŠ” decision boundaryê°€ ì—¬ëŸ¬ ê°œ ìˆì„ ë•Œ, ì–´ë–¤ ê²ƒì´ ê°€ì¥ ì¢‹ì€ ê²ƒì¼ê¹Œ? ì´ê²ƒì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ê²ƒì´ SVMì´ë‹¤. í•´ë‹¹ Postingì—ì„œëŠ” ì´ì— ëŒ€í•´ì„œ ì‚´í´ë³´ë„ë¡ í•˜ê² ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì „ Postingì—ì„œëŠ” SVMì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ë‹¤. ì¼ë°˜ì ì¸ Logistic Regressionì—ì„œëŠ” softmax functionì„ í†µí•´ì„œ ì—¬ëŸ¬ classë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆì—ˆì§€ë§Œ, SVMì˜ ê²½ìš° êµ¬ë¶„ ì„ ì´ ê²°êµ­ì€ hyperplaneìœ¼ë¡œë§Œ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ SVMì—ì„œì˜ ì—¬ëŸ¬ í•´ê²°ì±…ì„ ì•Œì•„ë³´ì.\n\n## Multiclass in SVM\n\nê°€ì¥ ì‰½ê²Œ ìƒê°í•  ìˆ˜ ìˆëŠ” ê²ƒì€ SVMì„ ê²°í•©í•´ì„œ Multiclassë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆë‹¤ëŠ” ideaì´ë‹¤. ì•„ë˜ì—ì„œ ê³§ë°”ë¡œ ì œì‹œí•  ì•„ì´ë””ì–´ë“¤ì´ ì´ì— ëŒ€í•œ ë‚´ìš©ì´ë‹¤.\n\n> **1. OvR SVM**\n\nOne vs Rest ì˜ ì•½ìë¡œ ë‹¤ì–‘í•œ ë³„ëª…ì´ ì¡´ì¬í•œë‹¤. (One vs All, OVA, One Against All, OAA)  \nì´ë¦„ì—ì„œë¶€í„° ëŠê»´ì§€ë‹¤ì‹œí”¼ í•˜ë‚˜ì˜ classì™€ ê·¸ ì™¸ì— ëª¨ë“  classë¥¼ í•˜ë‚˜ë¡œ ë¬¶ì–´ì„œ SVMì„ ì´ class ê°¯ìˆ˜ë§Œí¼ ë§Œë“¤ì–´ì„œ ê° decision boundaryë¡œ ë¶€í„° ê±°ë¦¬ê°€ ì–‘ì˜ ë°©í–¥ìœ¼ë¡œ ê°€ì¥ í° classë¥¼ ì„ íƒí•˜ëŠ” ë°©ì‹ì´ë‹¤.\n\n$$\n\\argmax_{k \\in [K]}(\\bold{w}_{(k)}^{\\top}\\phi(\\bold{x})+ b_{(k)})\n$$\n\n![svm-ovr](/images/svm-ovr.jpg)\n\nì´ ë°©ì‹ì€ í•˜ë‚˜ì˜ í° ë¬¸ì œë¥¼ ê°–ê³  ìˆëŠ”ë°, ê·¸ê²ƒì€ ê³¼ë„í•œ ë°ì´í„° ë¶ˆê· í˜•ì„ ìœ ë°œí•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ëŸ¬í•œ ë¬¸ì œëŠ” classì˜ ìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ë” ì‹¬í•´ì§„ë‹¤.\n\n> **2. OvO SVM**\n\nOne vs (Another) Oneì˜ ì•½ìë¡œ, í•´ë‹¹ ë°©ì‹ì€ 1ëŒ€1ë¡œ ë¹„êµí•˜ë©´ì„œ ê° SVMì—ì„œ ì„ íƒí•œ class ì¤‘ì—ì„œ ê°€ì¥ ë§ì€ ì„ íƒì„ ë°›ì€ classë¥¼ ìµœì¢…í•œë‹¤. OvRê³¼ëŠ” ë‹¤ë¥´ê²Œ ê° ê°ì˜ classë¥¼ 1ëŒ€1ë¡œ ë¹„êµí•˜ê¸° ë•Œë¬¸ì— ë°ì´í„°ì˜ ë¶ˆê· í˜•ì— ëŒ€í•œ ìœ„í˜‘ì€ ëœí•˜ë‹¤. í•˜ì§€ë§Œ, í•´ë‹¹ ê³¼ì •ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ K(K-1)/2ê°œì˜ SVMì´ í•„ìš”í•˜ë‹¤.\n\n![svm-ovo](/images/svm-ovo.jpg)\n\në˜í•œ, ê·¸ë¦¼ì—ì„œ \"?\"ë¡œ í‘œì‹œëœ ë¶€ë¶„ì„ ì–´ë–¤ classë¡œ ì„ íƒí• ì§€ì— ëŒ€í•œ ê¸°ì¤€ì´ ì—†ë‹¤. ì™œëƒí•˜ë©´, ê° ì˜ì—­ì—ì„œ í•œ í‘œì”©ë§Œ ë°›ê¸° ë•Œë¬¸ì´ë‹¤.\n\n> **3. DAG SVM**\n\nì• ì„œ ë³´ì•˜ë˜ OvOì™€ OvRì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì¥ë‹¨ì ì„ ì·¨í•˜ê¸° ìœ„í•´ì„œ ë‘˜ì„ ê²°í•©í•œ ë°©ì‹ì´ë‹¤. ê³„ì¸µ í˜•íƒœë¡œ SVMì„ êµ¬ì„±í•˜ê¸° ë•Œë¬¸ì— OvOë³´ë‹¤ëŠ” ì ì€ SVMì„ ì‚¬ìš©í•˜ë©´ì„œ, OvOì—ì„œì˜ ê³¼ë„í•œ ë°ì´í„° ë¶ˆê· í˜•ì„ í•´ê²°í•œë‹¤.\n\n![svm-multiclass-comparing](/images/svm-multiclass-comparing.jpg)\n\n> **4. WW SVM**\n\nmulticlass êµ¬ë¶„ì„ SVM ìµœì í™” ê³¼ì •ì— ì ìš©í•˜ê¸° ìœ„í•´ì„œ ëª©ì  í•¨ìˆ˜ì˜ í˜•íƒœë¥¼ ë³€í˜•í•˜ì—¬ êµ¬í˜„í•œ ë°©ë²•ìœ¼ë¡œ ìì„¸íˆ ë‹¤ë£¨ì§€ ì•Šì§€ë§Œ, ê¶ê¸ˆí•˜ë‹¤ë©´ í•´ë‹¹ [ğŸ”— link](https://www.csie.ntu.edu.tw/~cjlin/papers/multisvm.pdf)ë¥¼ í†µí•´ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\n\n## Kernel Method\n\nì´ì „ê¹Œì§€ëŠ” ì‹¤ì œë¡œ SVMì˜ í˜•íƒœë¥¼ ë³€í˜•ì‹œí‚¤ê±°ë‚˜ SVMì„ ì—¬ëŸ¬ ê°œ í™œìš©í•˜ì—¬ multiclass classificationì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•œ ë°©ë²•ì„ ë³´ì•˜ë‹¤.\n\në˜ ë‹¤ë¥¸ ë°©ë²•ì´ ì¡´ì¬í•œë‹¤. ë°”ë¡œ input ê³µê°„ì„ í™•ì¥í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, ë” ë§ì€ ìœ ì˜ë¯¸í•œ featureë¥¼ ìˆ˜ì§‘í•˜ê±°ë‚˜ ê¸°ì¡´ featureë¥¼ ê°€ê³µí•˜ì—¬ ìƒˆë¡œìš´ featureë¡œ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì‹œìŠ¤í…œì ìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ ê¸°ì¡´ featureë¥¼ ê°€ê³µí•˜ì—¬ ìƒˆë¡œìš´ featureë¥¼ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì•„ë˜ì˜ ì˜ˆì‹œë¥¼ ë³´ì.\n\n![feature-transposing](/images/feature-transposing.jpg)\n\nì™¼ìª½ ê³µê°„ì—ì„œëŠ” SVMì€ decision vectorë¥¼ ì ì ˆí•˜ê²Œ ì„ íƒí•˜ëŠ” ê²ƒì´ ì–´ë µë‹¤. í•˜ì§€ë§Œ, ê¸°ì¡´ x ë°ì´í„°ì— ì ˆëŒ€ê°’ì„ ì·¨í•˜ì—¬ ë‚˜íƒ€ë‚´ì–´ ë°ì´í„°ì— ì¶”ê°€í•˜ë©´, ì‰½ê²Œ decision boundaryë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŸ¬í•œ ì—¬ëŸ¬ ë³€í™˜ í•¨ìˆ˜ë¥¼ ì ìš©í•´ë³´ë©° ì—¬ëŸ¬ featureë¥¼ ë” ì¶”ì¶œí•˜ëŠ” ê²ƒì´ ì¢‹ì€ í•´ê²°ì±…ì„ ê°€ì ¸ë‹¤ ì¤„ ê²ƒì´ë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ì˜ Soft margin SVMì˜ Dual Problemì„ ë‹¤ì‹œ í•œ ë²ˆ ì‚´í´ë³´ì.\n\n$$\n\\begin{align*}\n  \\text{maximize}   \\quad & -{1\\over2}\\sum_{i=1}^{N}\\sum_{j=1}^{N}\\alpha_{i}\\alpha_{j}y_{i}y_{j}\\bold{x}_{i}^{\\top}\\bold{x}_{j} + \\sum_{i=1}^{N}\\alpha_{i} &\\\\\n  \\text{subject to} \\quad & \\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0, & \\\\\n  & 0 \\leq \\alpha_{i} \\leq C, & i = 1, ..., N \n\\end{align*}\n$$\n\nì´ê²ƒì„ feature ë³€í™˜(basis functionì„ ì·¨í•œë‹¤.)ì„ í†µí•´ì„œ ë‹¤ìŒê³¼ ê°™ì´ ë³€í˜•í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\begin{align*}\n  \\text{maximize}   \\quad & -{1\\over2}\\sum_{i=1}^{N}\\sum_{j=1}^{N}\\alpha_{i}\\alpha_{j}y_{i}y_{j}\\red{\\boldsymbol{\\phi}^{\\top}(\\bold{x}_{i})\\boldsymbol{\\phi}(\\bold{x}_{j})} + \\sum_{i=1}^{N}\\alpha_{i} &\\\\\n  \\text{subject to} \\quad & \\sum_{i=1}^{N}\\alpha_{i}y_{i} = 0, & \\\\\n  & 0 \\leq \\alpha_{i} \\leq C, & i = 1, ..., N \n\\end{align*}\n$$\n\ní•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ìƒˆë¡œìš´ featureë¥¼ ìƒì„±í•  ìˆ˜ë¡, ê·¸ë¦¬ê³  ê¸°ì¡´ featureë¥¼ ë³µì¡í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ë¡ $\\boldsymbol{\\phi}(\\bold{x}_{i})$ë¥¼ ì—°ì‚°í•˜ëŠ” ë¹„ìš©ì´ ì»¤ì§ˆ ìˆ˜ ë°–ì— ì—†ë‹¤.  \n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì¼ì¢…ì˜ trickì„ í•˜ë‚˜ ì‚¬ìš©í•˜ë„ë¡ í•œë‹¤. ë°”ë¡œ, ë§¤ bayese update ë§ˆë‹¤ ë³€í•˜ì§€ ì•Šê³  ì¬ì‚¬ìš©ë˜ëŠ” ê°’ì¸ $\\boldsymbol{\\phi}^{\\top}(\\bold{x}_{i})\\boldsymbol{\\phi}(\\bold{x}_{j})$ë¥¼ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ëŒ€ì²´í•˜ë©´ ì–´ë–¨ê¹Œ? ê·¸ë ‡ê²Œ í•˜ë©´ ìš°ë¦¬ëŠ” $\\boldsymbol{\\phi}(\\bold{x}_{i})$ë¥¼ ê³„ì‚°í•˜ê³  êµ¬ì„±í•˜ëŠ” ìˆ˜ê³ ë¥¼ ëœ ìˆ˜ ìˆë‹¤.\n\nì´ê²ƒì´ kernel method(trick)ì˜ í•µì‹¬ ì•„ì´ë””ì–´ì´ë‹¤.\n\nê°€ì¥ ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ ì•„ë˜ì™€ ê°™ì€ ë³µì¡í•œ $\\phi$ ê°€ ì£¼ì–´ì¡Œì„ ë•Œ,\n\n$$\n\\boldsymbol{\\phi}(x) = \\exp({{-x^{2}}\\over{2\\sigma^{2}}})[1, \\sqrt{1\\over{1!\\sigma^{2}}}x, \\sqrt{1\\over{2!\\sigma^{4}}}x^{2}, \\sqrt{1\\over{3!\\sigma^{6}}}x^{3}, \\cdots]\n$$\n\nì•„ë˜ì˜ (RBF) kernelë¡œ ëŒ€ì²´ê°€ ê°€ëŠ¥í•´ì§„ë‹¤.\n\n$$\n\\kappa(x,x^{\\prime}) = \\exp(-{{(x - x^{\\prime})}\\over{2\\sigma^{2}}}) = \\boldsymbol{\\phi}^{\\top}(x)\\boldsymbol{\\phi}(x^{\\prime})\n$$\n\nëŒ€ê²Œ ìš°ë¦¬ê°€ í‘œí˜„í•˜ê³ ì í•˜ëŠ” í˜•íƒœì˜ $\\boldsymbol{\\phi}$ëŠ” ì´ë¯¸ íŠ¹ì • kernel í•¨ìˆ˜ë¡œ ë§¤í•‘ë˜ê³  ìˆìœ¼ë‹ˆ ì§ì ‘ $\\boldsymbol{\\phi}$ë¥¼ ê³„ì‚°í•˜ê¸° ì „ì— ì°¾ì•„ë³´ëŠ” ê²ƒì´ ë„ì›€ì´ ë  ê²ƒì´ë‹¤.[ğŸ”— link](https://dataaspirant.com/svm-kernels/#t-1608054630726)\n\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- A Comparison of Methods for Multi-class Support Vector Machines, Chih-Wei Hsu and Chih-Jen Lin, https://www.csie.ntu.edu.tw/~cjlin/papers/multisvm.pdf\n- SEVEN MOST POPULAR SVM KERNELS, https://dataaspirant.com/svm-kernels/#t-1608054630726","slug":"ml-multiclass-classification-in-svm","date":"2022-10-18 23:19","title":"[ML] 5. Multiclass Classification in SVM","category":"AI","tags":["ML","SVM","KernelMethod"],"desc":"ì´ì „ Postingì—ì„œëŠ” SVMì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì•˜ë‹¤. ì¼ë°˜ì ì¸ Logistic Regressionì—ì„œëŠ” softmax functionì„ í†µí•´ì„œ ì—¬ëŸ¬ classë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆì—ˆì§€ë§Œ, SVMì˜ ê²½ìš° êµ¬ë¶„ ì„ ì´ ê²°êµ­ì€ hyperplaneìœ¼ë¡œë§Œ í‘œí˜„ ê°€ëŠ¥í•˜ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ SVMì—ì„œì˜ ì—¬ëŸ¬ í•´ê²°ì±…ì„ ì•Œì•„ë³´ì.","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nìš°ë¦¬ëŠ” Linear Regression, Logistic Regression, SVMì„ ê±°ì¹˜ë©° dataë¡œ ë¶€í„° ìœ ì˜ë¯¸í•œ patternì„ ë°œê²¬í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³´ì•˜ë‹¤. ì´ ê³¼ì •ì€ ìš°ë¦¬ì—ê²Œ ëª…í™•í•œ ì‹ í•˜ë‚˜ë¥¼ ì œì‹œí•˜ì˜€ê³ , ëª¨ë“  ê³¼ì •ì„ ìš°ë¦¬ê°€ ì œì–´í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ë°ì´í„°ë¥¼ ìš°ë¦¬ê°€ ëª¨ë‘ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆëŠ” ê²ƒì¸ì§€ëŠ” ì˜ë¬¸ì´ ë“¤ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ì´í•´í•˜ì§€ëŠ” ëª»í•˜ì§€ë§Œ, ì•Œì•„ì„œ ìµœì ì˜ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œ? ì´ëŸ° ë§ˆë²•ê°™ì€ ì¼ì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ê²ƒì´ Neural Networkì´ë‹¤.\n  ê²Œ ì•Œì§€ ëª»í•˜ì§€ë§Œ inputì´ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ ì²˜ë¦¬í•´ì„œ outputì„ ì „ë‹¬í•˜ëŠ” ì‹œìŠ¤í…œì„ ìš°ë¦¬ì˜ ì‹ ì²´ì—ì„œ ì°¾ê²Œ ëœë‹¤. ë°”ë¡œ ìš°ë¦¬ ëª¸ì„ ì´ë£¨ëŠ” ì‹ ê²½ë§ì´ë‹¤. ì˜ˆì‹œë¡œ ìš°ë¦¬ëŠ” ëˆˆì„ í†µí•´ ë¹›ì´ë¼ëŠ” inputì„ ë°›ìœ¼ë©´, ìš°ë¦¬ ëˆˆê³¼ ë‡Œì—ì„œ ë¬´ìŠ¨ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ëŠ” ëª¨ë¥´ì§€ë§Œ ê²°ê³¼ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ë¬¼ì²´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. ì´ ê³¼ì •ì„ ì¶”ì¸¡ì˜ ê³¼ì •ì— ë„ì…í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?\n\n## Perceptron\n\nPerception(ì¸ì§€ ëŠ¥ë ¥) + Neuron(ì‹ ê²½ ì„¸í¬)ì˜ í•©ì„±ì–´ì´ë‹¤. ì¤‘ê³ ë“±í•™êµ ìƒëª… ìˆ˜ì—…ì„ ë“¤ì—ˆë‹¤ë©´, ìš°ë¦¬ì˜ ëª¨ë“  ì‹ ê²½ì€ ë‰´ëŸ°ì´ë¼ëŠ” ë‹¨ìœ„ ì„¸í¬ë¡œ ì´ë£¨ì–´ì§„ë‹¤ëŠ” ê²ƒì„ ë°°ì› ì„ ê²ƒì´ë‹¤. ì¦‰, ìš°ë¦¬ì˜ ì‹ ê²½ ì„¸í¬ë¥¼ ì»´í“¨í„° ê³µí•™ì—ì„œ í™œìš©í•˜ê¸° ìœ„í•´ì„œ, ìˆ˜í•™ì ìœ¼ë¡œ ë³€í™˜í•œ ê²ƒì´ë‹¤. í˜•íƒœë¥¼ ë¨¼ì € ì‚´í´ë³´ì.\n\n$$\ny = sign(\\bold{w}^{\\top}\\bold{x} + b)\n$$\n\n![nn-perceptron-1](/images/nn-perceptron-1.jpg)\n\nëŒ€ë‹¨í•œ ê²ƒì„ ê¸°ëŒ€í–ˆë‹¤ë©´ ì‹¤ë§í•˜ê² ì§€ë§Œ, simpleí•œ ê²ƒì´ ìµœê³ ë¼ëŠ” ì—°êµ¬ì˜ ì§„ë¦¬ì— ë”°ë¼ì„œ ìœ„ì˜ ì‹ì€ ê½¤ë‚˜ í•©ë¦¬ì ì´ë‹¤. ìš°ë¦¬ê°€ Linear Regressionê³¼ Logistic Regressionì„ ë°°ì› ìœ¼ë‹ˆ ì•Œ ê²ƒì´ë‹¤. ì´ëŠ” ì‚¬ì‹¤ Linear Regressionì„ ì´ìš©í•´ì„œ ìš°ë¦¬ê°€ Classificationì„ ìˆ˜í–‰í•  ë•Œ ì‚¬ìš©í–ˆë˜ ì‹ì´ë‹¤. ì¦‰, perceptron í•˜ë‚˜ëŠ” inputì„ ì„ í˜•ìœ¼ë¡œ êµ¬ë¶„í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” decision boundaryë¥¼ ì°¾ëŠ” ê²ƒê³¼ ê°™ë‹¤.\n\n> **Optimization**\n\nê·¸ë ‡ë‹¤ë©´, í•´ë‹¹ perceptronì„ í†µí•´ì„œ ëª¨ë“  ë°ì´í„°ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒì„ ë§Œì¡±í•˜ëŠ” $\\bold{w}$ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.\n\n$$\ny_{n} = \n\\begin{cases}\n1  &\\text{ if  } \\bold{x}_{n} \\in \\mathcal{C}_{1} \\\\\n-1 &\\text{ if  } \\bold{x}_{n} \\in \\mathcal{C}_{2} \\\\\n\\end{cases}\n$$\n$$\ny_{n}\\bold{w}^{\\top}\\bold{x}_{n} \\gt 0, \\forall n\n$$\n\nê²°êµ­ Loss í•¨ìˆ˜ëŠ” perceptronì˜ ì˜ëª»ëœ classification ê²°ê³¼ë¥¼ ìµœì†Œí™”í•˜ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\mathcal{J}(\\bold{w}) = - \\sum_{n \\in \\mathcal{M}(\\bold{w})}{y_{n}\\bold{w}^{\\top}\\bold{x}_{n}} \\quad( \\mathcal{M}(\\bold{w}) = \\{ n : y_{n}\\bold{w}^{\\top}\\bold{x}_{n} \\} )\n$$\n$$\n\\nabla_{\\bold{w}}\\mathcal{J}(\\bold{w}) = - \\sum_{n \\in \\mathcal{M}(\\bold{w})}{y_{n}\\bold{x}_{n}}\n$$\n\në”°ë¼ì„œ, ìš°ë¦¬ê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” Gradient Descentì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\bold{w}_{t+1} = \\bold{w}_{t} + \\alpha\\sum_{n \\in \\mathcal{M}(\\bold{w})}{y_{n}\\bold{x}_{n}}\n$$\n\nê°„ë‹¨í•œ ì˜ˆì‹œë¡œ AND, OR Gateë¥¼ percentronì„ í†µí•´ í‘œí˜„í•´ë³´ì.\n\n![nn-and-gate](/images/nn-and-gate.jpg)\n![nn-or-gate](/images/nn-or-gate.jpg)\n\ní•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ë‹¤ë£¨ëŠ” ë°ì´í„°ëŠ” í•­ìƒ ì™„ë²½í•˜ê²Œ ì„ ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì§€ì§€ëŠ” ì•ŠëŠ”ë‹¤. í•˜ë‚˜ì˜ perceptronìœ¼ë¡œëŠ” ì•„ë˜ì˜ XORì¡°ì°¨ë„ êµ¬ë¶„í•´ë‚¼ ìˆ˜ ì—†ë‹¤.\n\n![nn-multi-line-example](/images/nn-multi-line-example.jpg)\n\n## Multilayer Perceptron\n\nìœ„ì˜ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë‚˜ì˜¨ ê²ƒì´ perceptronì„ ë‹¤ì¸µìœ¼ë¡œ ìŒ“ì•„ì„œ í•´ê²°í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ì œëŠ” í•˜ë‚˜ì˜ ì‹ ê²½ì„¸í¬ì˜€ë˜ perceptronì„ ì§„ì§œ ì‹ ê²½ë§ì²˜ëŸ¼ ì—°ê²°í•´ë³´ìëŠ” ê²ƒì´ë‹¤.\n\në¨¼ì € ì¶”ìƒì ì¸ ì˜ˆì‹œë¥¼ ìƒê°í•´ë³´ì. ìš°ë¦¬ê°€ XOR Gateë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ì–´ë–¤ Gateë¥¼ ê²°í•©í•´ì•¼í• ê¹Œ?\n\n$$\na \\oplus b = ab + \\bar{a}\\bar{b}\n$$\n\nìš°ë¦¬ëŠ” AND Gate 2ê°œ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ê³ , í•´ë‹¹ ê²°ê³¼ê°’ì„ ì´ìš©í•´ì„œ OR Gate ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë©´ XOR Gateë¥¼ í‘œí˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê³  ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ê° GateëŠ” ìš°ë¦¬ê°€ perceptronìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆì—ˆëŠ”ë° ê·¸ëƒ¥ ì´ê²ƒì„ gateë¡œ í‘œí˜„í•˜ë“¯ì´ ë˜‘ê°™ì´ ë‚˜íƒ€ë‚´ë©´ í’€ ìˆ˜ ìˆì§€ ì•Šì„ê¹Œ?\n\nê·¸ë˜ì„œ ì§ì ‘ ìˆ˜í–‰í•´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê°’ì„ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n![nn-xor-gate](/images/nn-xor-gate.jpg)\n\n```plaintext\n ğŸ¤” Insight\n\n ìœ„ì˜ ê³¼ì •ì„ ë³´ë‹¤ë³´ë©´ ë†€ë¼ìš´ ê²ƒì„ í•˜ë‚˜ ë°œê²¬í•  ìˆ˜ ìˆë‹¤. ë°”ë¡œ ì™¼ ìª½ ê·¸ë¦¼ì˜ ë³€í™”ì´ë‹¤. \n ì²«ë²ˆì§¸, ë‘ ê°œì˜ perceptronì„ í†µí•´ì„œ ë§Œë“¤ì–´ì§„ outputì´ ì´ë£¨ëŠ” ê²°ê³¼ê°’ì˜ í˜•íƒœë¡œ featureë¥¼ ë³€í™˜í•˜ë©´, \n í•˜ë‚˜ì˜ perceptronìœ¼ë¡œ decision boundaryë¥¼ ê·¸ë¦´ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. \n ì´ëŠ” ë§ˆì¹˜ ì´ì „ linear regressionì—ì„œ ë°°ì› ë˜ basis function(Ï•)ì´ í–ˆë˜ ì—­í• ì´ë‹¤.\n\n ê·¸ë ‡ë‹¤ë©´, ì´ë¥¼ ë”ìš± í™•ì¥í•´ë³´ì. \n ë§Œì•½ í•´ë‹¹ Layerê°€ ë” ê¹Šì–´ì§„ë‹¤ê³  í•´ë„, ì¶œë ¥ ì§ì „ì˜ layerëŠ” ë‹¨ìˆœíˆ ì´ì „ ëª¨ë“  layerëŠ” ì…ë ¥ ë°ì´í„°ë¥¼ ê°€ê³µí•´ì„œ\nfeatureë¥¼ ë³€í™˜í•˜ëŠ” í•˜ë‚˜ì˜ basis function(Ï•)ë¥¼ ì·¨í•œ ê²ƒìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.\n```\n\nê²°ë¡ ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ë” ë³µì¡í•˜ê³ , ì–´ë ¤ìš´ ë¬¸ì œì˜ ê²½ìš°ì—ë„ ë” ê¹Šê²Œ ì‹ ê²½ë§ì„ êµ¬ì„±í•˜ë©´ ê²°êµ­ì€ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n> **Universal Approximation Theorem**\n\nìœ„ì™€ ê°™ì€ ê¹Šì€ ì‹ ê²½ë§ êµ¬ì¡°ë¥¼ ì´ìš©í•˜ìëŠ” ì£¼ì¥ë„ ìˆì§€ë§Œ, ì´ì™€ ìœ ì‚¬í•˜ê²Œ ë„“ì€ ì‹ ê²½ë§ì„ ì“°ìëŠ” ì£¼ì¥ë„ ì¡´ì¬í–ˆë‹¤.  \n\n![nn-universal-approx-theorem-1](/images/nn-universal-approx-theorem-1.jpg)\n\në§Œì•½, ìš°ë¦¬ê°€ í•˜ë‚˜ì˜ Layerì™€ outputì—ì„œ ìµœì¢… output perceptronë§Œ ê°–ê³  ì²˜ë¦¬ë¥¼ í•œë‹¤ë©´, ê²°êµ­ ì—¬ëŸ¬ perceptronì˜ weighted í•©ìœ¼ë¡œ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ ê²½ìš° ìš°ë¦¬ëŠ” ê³„ë‹¨ í•¨ìˆ˜ì˜ weighted í•©ìœ¼ë¡œ ìƒê°í•  ìˆ˜ ìˆëŠ”ë° perceptronì´ ë§ì•„ì§ˆ ìˆ˜ë¡ ì´˜ì´˜í•´ì§€ë©° ì •ë‹µê³¼ ìœ ì‚¬í•œ ì¶”ë¡ ì´ ê°€ëŠ¥í•´ì§„ë‹¤.(ë§ˆì¹˜ ì ë¶„ì˜ ê°œë…ê³¼ ìœ ì‚¬í•˜ë‹¤. ë¬¼ë¡  ì´ëŠ” ì¶”ìƒì ì¸ ì„¤ëª…ì´ê¸° ë•Œë¬¸ì— ì‹¤ì œë¡œëŠ” ê³„ë‹¨í•¨ìˆ˜ì˜ í•©ì´ê¸° ë•Œë¬¸ì— ì¢€ ë‹¤ë¥´ë‹¤.)\n\n![nn-universal-approx-theorem-2](/images/nn-universal-approx-theorem-2.jpg)\n\nìœ„ì˜ ê·¸ë¦¼ì„ ë³´ë©´ ì´í•´í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ ê²°êµ­ ëª¨ë“  í•¨ìˆ˜ í˜•íƒœë¥¼ ê¸°ì–µí•˜ëŠ” ê²ƒì´ë‹¤.(**memorizer**) ì´ê²ƒì€ input dataê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ ë³µì¡ë„ê°€ ê¸‰ê²©í•˜ê²Œ ì¦ê°€í•˜ê¸° ë•Œë¬¸ì— í•™ìŠµê³¼ ì˜ˆì¸¡ê³¼ì •ì— êµ‰ì¥íˆ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í•œë‹¤.\n\n> **Multilayer Optimization(Backpropagation)**\n\nê·¸ë ‡ë‹¤ë©´, ë„“ì€ ì‹ ê²½ë§ì´ í•œê³„ê°€ ìˆìœ¼ë‹ˆ ì„ íƒì§€ëŠ” inputê³¼ output ì‚¬ì´ì˜ layer(**hidden layer**)ì˜ ê°¯ìˆ˜ë¥¼ ëŠ˜ë ¤ì„œ ê¹Šì€ ì‹ ê²½ë§ì„ ë§Œë“œëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” perceptronì€ signí•¨ìˆ˜ë¡œ ê°ì‹¸ì ¸ìˆê¸° ë•Œë¬¸ì— ë¯¸ë¶„ ì‹œì— ê¸°ìš¸ê¸°ê°€ 0ì´ë¼ëŠ” ë¬¸ì œë¥¼ ê°–ëŠ”ë‹¤. ë˜í•œ, ê·¸ë ‡ë‹¤ê³  ì •ë‹µì˜ ê°¯ìˆ˜ë¥¼ ì´ìš©í•˜ê¸°ì—ëŠ” ê° perceptronì˜ ì˜í–¥ì„ ì „ë‹¬í•˜ê¸°ì— ë¶€ì¡±í•˜ë‹¤ëŠ” ê²ƒì´ ëª…í™•í•˜ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” perceptronì— ìˆëŠ” ì •ë‹µì„ íŒë³„í•˜ëŠ” í•¨ìˆ˜ signì„ ë‹¤ë¥¸ í•¨ìˆ˜ë¡œ ëŒ€ì²´í•˜ê¸°ë¡œ í•œë‹¤.\n\n![nn-perceptron-2](/images/nn-perceptron-2.jpg)\n\nì—¬ê¸°ì„œ ì´ í•¨ìˆ˜ë¥¼ ìš°ë¦¬ëŠ” **activation function**ì´ë¼ê³  ë¶€ë¥´ê³  ëŒ€í‘œì ìœ¼ë¡œëŠ” ê°™ì€ ì¢…ë¥˜ê°€ ìˆë‹¤.\n\n- **sigmoid**  \n  ìš°ë¦¬ê°€ ê°€ì¥ ì‰½ê²Œ ìƒê°í•  ìˆ˜ ìˆëŠ” í•¨ìˆ˜ì´ë‹¤. logistic regressionì—ì„œ ì‚¬ìš©í•´ë³¸ë§Œí¼ ê¸°ìš¸ê¸°ê°’ì„ íš¨ê³¼ì ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ìˆë‹¤.\n- **tanh**  \n  sigmodì™€ êµ‰ì¥íˆ ìœ ì‚¬í•œ í•¨ìˆ˜ì´ë‹¤. ë”°ë¼ì„œ, ë¹„ìŠ·í•œ ìš©ë„ë¡œ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤.\n- **ReLU**  \n  ì¶œë ¥ ì‹œì ì—ì„œëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì§€ë§Œ, ê° ê°ì˜ hidden layerì—ì„œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. ì™œëƒí•˜ë©´, sigmoid í•¨ìˆ˜ëŠ” ì¶œë ¥ê°’ì˜ í˜•íƒœê°€ [0, 1], tanhëŠ” [-1, 1]ì´ê¸° ë•Œë¬¸ì— ë°˜ë³µí•´ì„œ ì ìš©í•˜ë©´, gradientê°€ ì‚¬ë¼ì§€ëŠ” í˜„ìƒì´ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ê¸°ìš¸ê¸°ë¥¼ ìˆëŠ” ê·¸ëŒ€ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ì´ëŸ¬í•œ í˜•íƒœë¥¼ ì¶œë ¥ ì´ì „ì—ëŠ” ë§ì´ ì‚¬ìš©í•œë‹¤.\n- **Leaky ReLU**  \n  ReLUê°€ ìŒìˆ˜ê°’ì„ ì™„ì „íˆ ë¬´ì‹œí•˜ëŠ”ë° Leaky ReLUëŠ” ì´ëŸ¬í•œ ë°ì´í„°ê°€ ì¡°ê¸ˆì´ë¼ë„ ì˜ë¯¸ ìˆëŠ” ê²½ìš°ì— ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n- **ELU**  \n  Leaky ReLUì™€ ë¹„ìŠ·í•œ ì´ìœ ì´ë‹¤.\n\n  ![activation-functions](/images/activation-functions.png)\n  \nìë£Œê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤ë©´ [ğŸ”— wikipedia](https://en.wikipedia.org/wiki/Activation_function)ë¥¼ ì°¸ê³ í•˜ì.\n\n---\n\nì ì´ì œ ì‹¤ì œë¡œ ì–´ë–»ê²Œ optimizationì„ ìˆ˜í–‰í• ì§€ë¥¼ ì•Œì•„ë³´ë„ë¡ í•˜ì.\n\në¨¼ì €, LossëŠ” ê°€ì¥ ë§ˆì§€ë§‰ layer(output layer)ì˜ outputê³¼ ì‹¤ì œ ê°’ê³¼ì˜ ì°¨ì´ê°€ ë  ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n(ì•„ë˜ì„œ $\\bold{h}_{L}$ì€ Lë²ˆì§¸ layerì˜ outputì„ ì˜ë¯¸í•œë‹¤.)\n\n$$\n\\begin{align*}\n\\mathcal{L} &= \\sum_{n=1}^{N}{\\ell(y_n, \\bold{h}_L)} \\\\\n&= \\sum_{n=1}^{N}{(y_{n} - \\bold{h}_{L})^2} \\\\\n&= \\sum_{n=1}^{N}{(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\bold{h}_{L-1} + b_{L-1}))^2} \\\\\n&= \\sum_{n=1}^{N}{(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\sigma(\\bold{w}_{L-1}^{\\top}\\bold{h}_{L-2} + b_{L-2}) + b_{L-1}))^2} \\\\\n&= ...\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ì¤‘ìš”í•œ ê²ƒì€ ìš°ë¦¬ëŠ” ì „ì²´ $\\bold{W}$ë¥¼ í•™ìŠµì‹œì¼œì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ì¶œë ¥ì¸µë§Œ í•™ìŠµí•˜ëŠ” ê²Œ ì•„ë‹ˆë¼ ì „ì²´ ëª¨ë“  layerì˜ $\\bold{w}_{i}$ë¥¼ ì—…ë°ì´íŠ¸í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\nê·¸ëŸ¬ê¸° ìœ„í•´ì„œëŠ” ìš°ë¦¬ëŠ” ${{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{i}}}$ë¥¼ ëª¨ë‘ êµ¬í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤. ì•„ë§ˆ ê°€ì¥ ìŠµê´€ì ìœ¼ë¡œ í•˜ëŠ” í–‰ìœ„ëŠ” ìˆ«ìê°€ ì‘ì€ ê°’ë¶€í„° í¸ë¯¸ë¶„í•˜ë©´ì„œ ì§„í–‰í•˜ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ê·¸ë ‡ê²Œ í•˜ì§€ë§ê³  ë°˜ëŒ€ ìˆœì„œë¡œ ë¯¸ë¶„ì„ í•˜ë¼ëŠ” ê²ƒì´ **backpropagation**ì˜ main ideaì´ë‹¤.\n\n$$\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L}}} = \\sum_{n=1}^{N}\\{({\\partial \\bold{h}_L \\over \\partial \\bold{w}_{L}} )\\times\\red{-2(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\bold{h}_{L-1} + b_{L-1}))}\\}\n$$\n\n$$\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L-1}}} = \\sum_{n=1}^{N}\\{({\\partial \\bold{h}_{L} \\over \\partial \\bold{w}_{L-1} })\\times\\red{-2(y_{n} - \\sigma(\\bold{w}_{L}^{\\top}\\bold{h}_{L-1} + b_{L-1}))}\\}\n$$\n\nì¦‰, ë‹¤ìŒê³¼ ê°™ì€ chain ruleì„ ì´ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\begin{align*}\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L}}} &= \\red{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{w}_{L}}} \\\\\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L-1}}} &= \\red{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{w}_{L-1}}} \\\\\n&= \\red{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{h}_{L-1}}} {{\\partial\\bold{h}_{L-1}}\\over{\\partial \\bold{w}_{L-1}}} \\\\\n&= \\blue{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L-1}}} } {{\\partial\\bold{h}_{L-1}}\\over{\\partial \\bold{w}_{L-1}}} \\\\\n{{\\partial\\mathcal{L}}\\over{\\partial \\bold{w}_{L-2}}} &= \\blue{ {{\\partial\\mathcal{L}}\\over{\\partial \\bold{h}_{L-1}}} } {{\\partial\\bold{h}_{L}}\\over{\\partial \\bold{w}_{L-2}}} \\\\\n\\end{align*}\n$$\n\nìš°ë¦¬ëŠ” ë¹¨ê°„ìƒ‰ê³¼ íŒŒë€ìƒ‰ ë¶€ë¶„ì˜ ì—°ì‚°ì„ ì¬í™œìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ë˜í•œ, ${{\\partial\\bold{h}_{l}}\\over{\\partial \\bold{w}_{l}}}$ì€ êµ‰ì¥íˆ ì‰¬ìš´ ì—°ì‚°ì´ê¸°ì— ìš°ë¦¬ê°€ ì‹ ê²½ ì¨ì„œ ê³„ì‚°í•´ì•¼ í•  ê°’ì€ ë§¤ë‹¨ê³„ë¥¼ ì—°ê²°í•´ì¤„ $ {{\\partial\\bold{h}_{l}}\\over{\\partial \\bold{h}_{l-1}}}$ì´ë‹¤.\n\n![ml-backpropagation](/images/ml-backpropagation.jpg)\n\n## Loss Function\n\nìš°ì„  KL-Divergence, Entropy, Cross Entropyì— ëŒ€í•œ ì•½ê°„ì˜ ì´í•´ê°€ í•„ìš”í•˜ë‹ˆ ì´ì „ Posting([ğŸ”— Base Knowledge](posts/ml-base-knowledge))ì„ ì‚´í´ë³´ê³  ì˜¤ì.\n\nìœ„ì—ì„œëŠ” ìì—°ìŠ¤ëŸ½ê²Œ Lossë¥¼ ê³„ì‚°í•  ë•Œ, Squared Errorë¥¼ ì‚¬ìš©í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ ê²½ìš°ì— ë”°ë¼ì„œëŠ” ë‹¤ì–‘í•œ í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤. multiclass classificationì—ì„œëŠ” **Cross Entropy Loss**ë¥¼ ì‚¬ìš©í•œë‹¤. \n\nìš°ì„  Cross Entropy LossëŠ” ëŒ€ê²Œ L2 Loss(Squared Error)ì™€ ê°™ì´ ë¹„êµë˜ì–´ì§„ë‹¤. ìš°ì„  ìš°ë¦¬ê°€ ì´ì „ [ğŸ”— Parametric Estimation](posts/ml-parametric-estimation)ì—ì„œ MLEë¥¼ ë‹¤ë£° ë•Œ, KL-Divergenceë¥¼ í†µí•´ì„œ MLEê°€ ìµœì  parameterë¥¼ ì°¾ì„ ê²ƒì´ë¼ëŠ” ê±¸ ì¦ëª…í•œ ì ì´ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ [ğŸ”— Logistic Regression](/posts/ml-logistic-regression)ì—ì„œ Squared Errorë¥¼ í†µí•´ì„œ Lossë¥¼ êµ¬í–ˆë˜ ê³µì‹ì„ í™•ì¸í•´ë³´ì.(Gradient Asecent Part)\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê³µì‹ì„ ë´¤ì—ˆë‹¤.\n\n$$\n\\argmax_{\\bold{w}} \\sum_{n=1}^{N}y_{n}\\log{\\sigma(\\bold{w}^{\\top}\\bold{x}_{n}) + (1-y_{n})\\log{(1-\\sigma(\\bold{w}^{\\top}\\bold{x}_{n}))} }\n$$\n\nì´ ê³µì‹ì„ Cross Entropyë¥¼ í†µí•´ì„œ ì„¤ëª…í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\nH_{q}(p) &= - \\sum_{x \\in \\Omega}q(x)\\log_{2}p(x) \\\\\n&= \\sum_{n=1}^{N}{[-y_{n}\\log\\hat{y}_{n} - (1- y_{n})\\log(1-\\hat{y}_{n})]}\n\\end{align*}\n$$\n\nì¦‰, ì—¬ê¸°ì„œ ìš°ë¦¬ê°€ ì–»ì„ ìˆ˜ ìˆëŠ” insightëŠ” Cross EntropyëŠ” sigmoidë¥¼ ì·¨í•œ binary classificationì—ì„œ Squared Errorì™€ ê°™ê³ , ì´ëŸ¬í•œ Cross Entropyë¥¼ Squared Errorê°€ í•  ìˆ˜ ì—†ëŠ” Multiclassì—ëŠ” ì ìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ëŠ” ì ì´ë‹¤. ì™œëƒí•˜ë©´, multiclass classificationì— ì‚¬ìš©ë˜ëŠ” Softmax Functionì„ ì´ìš©í•´ì„œ Sigmoid functionì„ ìœ ë„í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ì ì‹œ ê¹Œë¨¹ì—ˆì„ê¹Œë´ Softmax í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ì ëŠ”ë‹¤.\n\n$$\n\\hat{y}_{k} = {{\\exp(\\bold{w}_{k}^{\\top}\\bold{x})}\\over{\\sum_{i=1}^{K}{\\exp(\\bold{w}_{i}^{\\top}\\bold{x})}}}\n$$\n\në”°ë¼ì„œ, Cross Entropy Lossë¥¼ ëŒ€ì…í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì€ Lossë¥¼ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n$$\n\\mathcal{L} = \\sum_{n=1}^{N}\\sum_{k=1}^{K}[-y_{k,n}\\log\\hat{y}_{k,n}],\\quad y_{k,n} = p(x_{n} \\in C_{k}| x_{n}) \n$$\n\nì—¬ê¸°ì„œ $y_{k,n}$ì€ one-hot encodingëœ ë°ì´í„°ë¡œ, ì •ë‹µì¸ classë§Œ 1ì´ê³  ë‚˜ë¨¸ì§€ëŠ” ëª¨ë‘ 0ìœ¼ë¡œ ë˜ì–´ ìˆë‹¤. ë”°ë¼ì„œ, multiclass classificationì—ì„œëŠ” ìœ„ì™€ ê°™ì€ Lossë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤.\n\nì´ ë‘ê°€ì§€ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°€ì§€ Loss Functionì´ ì´ë¯¸ ì¡´ì¬í•œë‹¤. ì˜ˆì „ì— ì ê¹ ì„¤ëª…í–ˆë˜ L1 Lossë¶€í„° ì‹œì‘í•´ì„œ NLLLoss, KLDivLoss ë“±ë“± ì¡´ì¬í•˜ë©°, dataì˜ íŠ¹ì„±ê³¼ outputì˜ í˜•íƒœì— ë”°ë¼ì„œ ìš°ë¦¬ëŠ” ìŠ¤ìŠ¤ë¡œ Loss Functionì„ ìƒˆë¡œ ì •ì˜í•  ìˆ˜ë„ ìˆë‹¤.\n\n\n\n\n\n## Reference\n\n- Tumbnail : Photo by [Markus Winkler](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@markuswinkler?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- activation function, wikipedia, https://en.wikipedia.org/wiki/Activation_function","slug":"ml-nn","date":"2022-10-20 09:00","title":"[ML] 6. Neural Network","category":"AI","tags":["ML","NeuralNetwork","Perceptron","Backpropagation","CrossEntropyLoss"],"desc":"ìš°ë¦¬ëŠ” Linear Regression, Logistic Regression, SVMì„ ê±°ì¹˜ë©° dataë¡œ ë¶€í„° ìœ ì˜ë¯¸í•œ patternì„ ë°œê²¬í•˜ëŠ” ê³¼ì •ì„ ì•Œì•„ë³´ì•˜ë‹¤. ì´ ê³¼ì •ì€ ìš°ë¦¬ì—ê²Œ ëª…í™•í•œ ì‹ í•˜ë‚˜ë¥¼ ì œì‹œí•˜ì˜€ê³ , ëª¨ë“  ê³¼ì •ì„ ìš°ë¦¬ê°€ ì œì–´í•  ìˆ˜ ìˆê²Œ í•˜ì˜€ë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œ ë°ì´í„°ë¥¼ ìš°ë¦¬ê°€ ëª¨ë‘ ëª…í™•í•˜ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” í˜•íƒœë¡œ ë¶„ë¥˜í•  ìˆ˜ ìˆëŠ” ê²ƒì¸ì§€ëŠ” ì˜ë¬¸ì´ ë“¤ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ì´í•´í•˜ì§€ëŠ” ëª»í•˜ì§€ë§Œ, ì•Œì•„ì„œ ìµœì ì˜ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¤ê²Œ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ìˆì„ê¹Œ? ì´ëŸ° ë§ˆë²•ê°™ì€ ì¼ì— ëŒ€í•œ ì•„ì´ë””ì–´ë¥¼ ì œì‹œí•˜ëŠ” ê²ƒì´ Neural Networkì´ë‹¤.  ê²Œ ì•Œì§€ ëª»í•˜ì§€ë§Œ inputì´ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ ì²˜ë¦¬í•´ì„œ outputì„ ì „ë‹¬í•˜ëŠ” ì‹œìŠ¤í…œì„ ìš°ë¦¬ì˜ ì‹ ì²´ì—ì„œ ì°¾ê²Œ ëœë‹¤. ë°”ë¡œ ìš°ë¦¬ ëª¸ì„ ì´ë£¨ëŠ” ì‹ ê²½ë§ì´ë‹¤. ì˜ˆì‹œë¡œ ìš°ë¦¬ëŠ” ëˆˆì„ í†µí•´ ë¹›ì´ë¼ëŠ” inputì„ ë°›ìœ¼ë©´, ìš°ë¦¬ ëˆˆê³¼ ë‡Œì—ì„œ ë¬´ìŠ¨ ì¼ì´ ë°œìƒí•˜ëŠ”ì§€ëŠ” ëª¨ë¥´ì§€ë§Œ ê²°ê³¼ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ë¬¼ì²´ë¥¼ ë³¼ ìˆ˜ ìˆë‹¤. ì´ ê³¼ì •ì„ ì¶”ì¸¡ì˜ ê³¼ì •ì— ë„ì…í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ?","thumbnailSrc":"https://euidong.github.io/images/ml-thumbnail.jpg"},{"content":"\n## Intro\n\nNatural Language(ìì—°ì–´, ì‚¬ëŒì´ ì‚¬ìš©í•˜ëŠ” í†µìƒ ì–¸ì–´)ë¥¼ inputìœ¼ë¡œ í™œìš©í•˜ê³ ì í•˜ëŠ” ë…¸ë ¥ì€ ì»´í“¨í„°ì˜ ë“±ì¥ë¶€í„° ì‹œì‘í•˜ì—¬ ì—¬ëŸ¬ ë²ˆ ì‹œë„ë˜ì–´ ì™”ë‹¤. ì§€ê¸ˆê¹Œì§€ë„ ì™„ë²½í•˜ê²Œ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ í˜ë“¤ë‹¤. ì™œ Natural Languageë¥¼ ë‹¤ë£¨ëŠ” ê²ƒì€ ì–´ë µê³ , ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ NLPì—ì„œëŠ” ì–´ë–¤ ë°©ì‹ì„ í™œìš©í• ì§€ì— ëŒ€í•œ ê°œëµì ì¸ overviewë¥¼ ì œì‹œí•œë‹¤. ë˜í•œ, Natural Languageì˜ íŠ¹ì„±ê³¼ ë¶„ì„ ë‹¨ê³„ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ Linguistics(ì–¸ì–´í•™)ì„ ê°„ëµí•˜ê²Œ ì •ë¦¬í•œë‹¤. \n\n## NLP\n\nNatural Language Processingì˜ ì•½ìë¡œ ì‚¬ëŒì´ ì‚¬ìš©í•˜ëŠ” ì–¸ì–´ë¥¼ inputìœ¼ë¡œ í•˜ì—¬ ì›í•˜ëŠ” ê°’ì„ ì¶”ì¶œí•´ë‚´ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ì‚¬ëŒì˜ ì–¸ì–´ë¥¼ ì´í•´í•˜ê±°ë‚˜ ë‹¤ë£° ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì„ ì»´í“¨í„°ì—ê²Œ ë¶€ì—¬í•´ì•¼ í•œë‹¤.\n\në¨¼ì €, ì´ëŸ¬í•œ í•„ìš”ê°€ ìˆëŠ” ëŒ€í‘œì ì¸ usecaseë¥¼ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n### Usecase\n\n- **Spam Detection**  \n  ê°€ì¥ ê°„ë‹¨í•œ ì˜ˆì‹œë¡œ mailì—ì„œ spam ì—¬ë¶€ë¥¼ í™•ì¸í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\n- **POS tagging / NER**  \n  íŠ¹ì • ë‹¨ì–´ ë‹¨ìœ„ì˜ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê²Œ ë˜ëŠ”ë° ë‹¨ì–´ì˜ í’ˆì‚¬ì™€ ëŒ€ëµì ì¸ ì˜ë¯¸ë¥¼ ê°€ì§„ categoryë¡œ ë¶„ë¥˜ë¡œ taggingí•˜ëŠ” ê³¼ì •ì´ë‹¤. ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ ë‹¤ë¥¸ usecaseì—ì„œ í™œìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. í’ˆì‚¬ì™€ categoryëŠ” ë‹¨ì–´ì˜ ëœ»ì„ ì¶”ë¡ í•˜ëŠ”ë° í° ë„ì›€ì„ ì£¼ë©°, ì´ê²ƒì´ ë¬¸ì¥ì˜ ì´í•´ ë“±ì— ë„ì›€ì„ ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.\n- **Sentiment Analysis**  \n  ê°ì •/ì—¬ë¡  ë¶„ì„ ë“±ì˜ ì˜ì—­ì„ ì˜ë¯¸í•˜ë©°, í…ìŠ¤íŠ¸ ë˜ëŠ” ëŒ€í™”ì—ì„œì˜ ê¸ì •/ë¶€ì • ì—¬ë¶€ë¥¼ íŒë‹¨í•˜ê±°ë‚˜ í‰ì  ë“±ì„ ì¶”ì¶œí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\n- **Conference Resolution**  \n  \"he\", \"she\" ë“± ëŒ€ëª…ì‚¬, ìƒëµ ë‹¨ì–´ ë“±ì„ ì›ë˜ì˜ ë‹¨ì–´ë¡œ ëŒ€ì²´í•˜ê±°ë‚˜ ì±„ìš°ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•œë‹¤. ì´ ì—­ì‹œë„ ì—¬ëŸ¬ ì˜ì—­ì—ì„œ ì´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì¶”ê°€ì ì¸ ì‘ì—…ì„ í•  ìˆ˜ ìˆë‹¤.  \n- **Word Sense Disambiguation(WSD)**  \n  íŠ¹ì • ë‹¨ì–´ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ë™ì˜ì–´, ë™ìŒì´ì˜ì–´ ë“±ì—ì„œ ê°€ë¥´í‚¤ëŠ” ì§„ì§œ ì˜ë¯¸ë¥¼ í—·ê°ˆë¦¬ì§€ ì•Šê²Œ ëª…í™•í•˜ê²Œ ë‹¤ì‹œ í•œ ë²ˆ ì²˜ë¦¬í•œë‹¤. ì´ ì—­ì‹œë„ ë‹¤ë¥¸ NLP usecaseì—ì„œ ë‘ë£¨ ì‚¬ìš©ëœë‹¤. \n- **Parsing**  \n  ë¬¸ì¥ì—ì„œ ë‹¨ì–´ë“¤ì„ ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” ë‹¨ìœ„(êµ¬, ì ˆ, ë¬¸ì¥)ë¡œ ë‹¤ì‹œ groupingí•œë‹¤. ì´ ê³¼ì •ì„ ì˜ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œëŠ” ì´ì „ ë‹¨ê³„ì—ì„œ WSDì™€ Conference Resolution, POS tagging, NERì´ ì´ë£¨ì–´ì§€ë©´ ì¢‹ë‹¤. ì´ ê³¼ì •ì„ í†µí•´ì„œ ë¬¸ì¥ì˜ ê°œëµì ì¸ ì˜ë¯¸ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.\n- **Machine Translation(MT)**  \n  íŠ¹ì • ì–¸ì–´ë¥¼ ë˜ ë‹¤ë¥¸ Natural Languageë¡œ ë³€ê²½í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\n- **Information Extraction(IE)**  \n  íŠ¹ì • ë¬¸ì¥ì—ì„œ ì‚¬ìš©ìì—ê²Œ ì˜ë¯¸ìˆì„ë§Œí•œ ë°ì´í„°ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ë‹¤.\n- **Q&A**  \n  íŠ¹ì • ì‚¬ìš©ìê°€ ì§ˆë¬¸ì„ í•˜ì˜€ì„ ë•Œ, ì´ ëœ»ì„ ì´í•´í•˜ê³ , ì´ì— ì ì ˆí•œ ëŒ€ë‹µì„ ìˆ˜í–‰í•˜ëŠ” ë°©ì‹ì´ë‹¤.\n- **Paraphrase**  \n  ë¬¸ì¥ì˜ ëœ»ì„ ì´í•´í•˜ê³ , ë” ì‰¬ìš´ í˜•íƒœì˜ í‘œí˜„ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\n- **Summarization**  \n  ì—¬ëŸ¬ ë¬¸ì¥ìœ¼ë¡œ ì´ë£¨ì–´ì§„ ê¸€ì˜ ì˜ë¯¸ë¥¼ ì´í•´í•˜ê³ , ì ì ˆí•œ ë‚´ìš©ìœ¼ë¡œ ìš”ì•½í•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\n- **Dialog**  \n  Natural Languageë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒê³¼ 1:1ë¡œ ë‹´í™”ë¥¼ ì£¼ê³  ë°›ëŠ” ê²ƒì´ë‹¤. ì˜ë¯¸ë¥¼ ì´í•´í•  ë¿ë§Œ ì•„ë‹ˆë¼ ìì‹ ì´ ë‚´ë³´ë‚¼ outputì— ëŒ€í•´ì„œë„ ì ì ˆí•˜ê²Œ ìƒì„±í•  ìˆ˜ ìˆëŠ” ëŠ¥ë ¥ì´ í•„ìš”í•˜ë‹¤.\n\nìœ„ì™€ ê°™ì´ ë§ì€ usecaseê°€ ìˆëŠ”ë° ì´ë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì€ ì§€ê¸ˆê¹Œì§€ë„ êµ‰ì¥íˆ challengeí•œ ë¶€ë¶„ì´ë‹¤. ê·¸ê²ƒì€ Natural Languageê°€ ê°€ì§€ëŠ” ëª‡ëª‡ íŠ¹ì§• ë•Œë¬¸ì´ë‹¤.\n\n### Why is NLP difficult?\n\nì—¬ê¸°ì„œëŠ” Natural Language ì¤‘ì—ì„œ ì˜ì–´ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì„¤ëª…ì´ì§€ë§Œ, í•œêµ­ì–´ë„ ë§¤ìš° ìœ ì‚¬í•˜ë‹¤.\n\n- **non-standard** : Natural Languageë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒë“¤ì´ í‘œì¤€ì„ í•­ìƒ ë”°ë¥´ì§€ëŠ” ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ì•½ì–´ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ ë¬¸ë²•ì— ë§ì§€ ì•ŠëŠ” ë¹„ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì˜ì‚¬ì†Œí†µì„ í•˜ê¸° ë•Œë¬¸ì— ì´ê²ƒì„  ì‹œìŠ¤í…œì´ ì´í•´í•˜ê²Œ í•˜ëŠ” ê²ƒì€ ì–´ë µë‹¤.\n- **segmentation** issues : ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” ë‹¨ì–´ ë‹¨ìœ„ë¡œ ë¬¶ëŠ” ê²ƒì´ ì–´ë µë‹¤ëŠ” ê²ƒì´ë‹¤. ìš°ë¦¬ëŠ” ë¬¸ì¥ì˜ ë„ì–´ì“°ê¸°ë¥¼ ì–´ë””ë¡œ ë°›ì•„ë“¤ì´ëƒì— ë”°ë¼ì„œ ì˜ë¯¸ê°€ ë‹¬ë¼ì§€ëŠ” ê²ƒì„ ë³¸ ê²½ìš°ê°€ ìˆì„ ê²ƒì´ë‹¤.\n- **idioms** : ê´€ìš©êµ¬ì˜ ì‚¬ìš©ì€ NLPì—ì„œ ì˜ˆì™¸ì²˜ë¦¬ë¡œ í•´ì£¼ì–´ì•¼ í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¨ì–´ ê·¸ëŒ€ë¡œì˜ ì˜ë¯¸ì™€ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°€ì§€ê¸° ë•Œë¬¸ì´ë‹¤.\n- **neologisms** : ì‹ ì¡°ì–´ëŠ” ê³„ì†í•´ì„œ ìƒê²¨ë‚˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ ê³„ì†í•´ì„œ ì—…ë°ì´íŠ¸ í•´ì£¼ëŠ” ê²ƒë„ ë¶€ë‹´ì´ ëœë‹¤.\n- **world knowledge** : ì‚¬ì „ ì§€ì‹ì„ ì•Œê³  ìˆì–´ì•¼ ì´í•´í•  ìˆ˜ ìˆëŠ” ë‹¨ì–´, ë¬¸ì¥ì´ ì¡´ì¬í•œë‹¤. ì¦‰, ì–´ë–¤ ì§€ì‹ì„ ê°€ì§€ê³  ìˆëŠëƒì— ë”°ë¼ì„œ í•´ì„ì´ ë‹¬ë¼ì§„ë‹¤ëŠ” ê²ƒì´ë‹¤.\n- **tricky entity names** : ê³ ìœ  ëª…ì‚¬ ì¤‘ì—ì„œ íŠ¹íˆ contents(ë…¸ë˜, ê·¸ë¦¼, ì†Œì„¤) ë“±ì˜ ì œëª©ì´ í•´ì„ ì‹œì— í—·ê°ˆë¦¬ê²Œ í•œë‹¤. ì˜ˆë¥¼ ë“¤ë©´, \"Let it be\"ë¼ëŠ” ë¹„í‹€ì¦ˆì˜ ë…¸ë˜ëŠ” ë¬¸ì¥ ì¤‘ê°„ì— ë“¤ì–´ê°€ë©´, í•˜ë‚˜ì˜ ë¬¸ì¥ìœ¼ë¡œ ë°›ì•„ë“¤ì—¬ì§€ê²Œ ë˜ëŠ”ë° ì´ë¥¼ ì˜ í•´ê²°í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼ í•œë‹¤.\n\nìœ„ì˜ ë‚´ìš©ì„ ìš”ì•½í•˜ìë©´, ë‹¤ì–‘í•œ ë‹¨ì–´ê°€ ë‹¤ì–‘í•œ í˜„ìƒê³¼ ë‹¤ì–‘í•œ ë²•ì¹™(Grammer)ì˜ ì˜í–¥ì„ ë°›ê¸°ì— ì–´ë ¤ìš°ë©°, ë‹¨ì–´ê°€ ê°€ì§€ëŠ” ëª¨í˜¸ì„±ì´ ë¬¸ì œë¥¼ ì•¼ê¸°í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n### Solutions\n\nì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ í¬ê²Œ ë‘ ê°€ì§€ ë°©ì‹ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\n- Rule based approach  \n  Gammerì™€ ê°™ì€ ë²•ì¹™ì„ ëª¨ë‘ ì ìš©í•´ì„œ prgorammingì„ í•˜ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ ë¹„ë¬¸ê³¼ ê°™ì€ ë¬¸ì¥ì„ ì œëŒ€ë¡œ ì²˜ë¦¬í•  ìˆ˜ ì—†ì„ ë¿ë§Œ ì•„ë‹ˆë¼ ì •í™•í•œ í˜•íƒœì˜ ë¬¸ì¥ì´ë¼ë„ ì—¬ëŸ¬ ì˜ë¯¸ë¡œ í•´ì„ë˜ëŠ” ë¬¸ì¥ì—ì„œ ê²½í–¥ì„±ê³¼ ë¬¸ë§¥ì„ ì „í˜€ íŒŒì•…í•  ìˆ˜ ì—†ë‹¤. \n- Statistic based approach  \n  ê·¸ë˜ì„œ ìµœê·¼ì—ëŠ” ê²½í–¥ì„±ê³¼ ë¬¸ë§¥ì„ íŒŒì•…í•  ìˆ˜ ìˆë„ë¡ AI ê¸°ìˆ , ML, Deep Learningì„ ì´ìš©í•˜ì—¬ NLPë¥¼ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ í•˜ë‚˜ì˜ trendë¡œ ìë¦¬ ì¡ì•˜ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì–´ë–»ê²Œ í†µê³„ì ì¸ ì ‘ê·¼ë²•ì´ ê²½í–¥ì„±ê³¼ ë¬¸ë§¥ì„ í¬í•¨í•  ìˆ˜ ìˆì„ê¹Œ? ì´ëŠ” í†µê³„ê°€ ê°€ì§€ëŠ” ê²½í–¥ì„±ì´ë¼ëŠ” íŠ¹ì§•ê³¼ conditional probabilityë¥¼ ì‚¬ìš©í•  ë•Œì˜ ë¬¸ë§¥ì„ í¬í•¨í•œ ê²½í–¥ì„±ì„ íŒŒì•…í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì„ í™œìš©í•´ì„œ ê°€ëŠ¥í•˜ë‹¤. \n\n## Linguistics\n\nê²°êµ­ ì•ìœ¼ë¡œ í†µê³„ì ì¸ ë°©ì‹ì„ í™œìš©í•˜ë”ë¼ë„ ìš°ë¦¬ëŠ” ìµœì†Œí•œì˜ ì–¸ì–´í•™ì ì¸ ê¸°ë³¸ì´ í•„ìš”í•˜ë‹¤. ì™œëƒí•˜ë©´, í†µê³„ì— ì‚¬ìš©í•  ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ì„œì´ë‹¤. ìš°ë¦¬ê°€ ì‚¬ìš©í•  ë°ì´í„°ëŠ” text ë˜ëŠ” ìŒì„±ì´ë‹¤. ì´ë¥¼ ì ì ˆí•˜ê²Œ ì²˜ë¦¬í•˜ì—¬ í†µê³„ì— ì‚¬ìš©í•  ìœ ì˜ë¯¸í•œ ë°ì´í„°ë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ë‹¤. ì´ë¥¼ ìœ„í•´ì„œ ì–¸ì–´í•™ì— ëŒ€í•œ ì´í•´ê°€ í•„ìš”í•œ ê²ƒì´ë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ ì–¸ì–´ë¥¼ ë¶„ì„í•  ë•Œ, ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë„êµ¬ëŠ” **Grammar**ì´ë‹¤. ì´ëŠ” íŠ¹ì • languageì—ì„œ í—ˆìš©ë˜ëŠ” ê·œì¹™ì˜ ì§‘í•©ì„ ì •ë¦¬í•œ ê²ƒì´ë‹¤. ì´ê²ƒì˜ ì¢…ë¥˜ëŠ” í¬ê²Œ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰œë‹¤.\n\n- **Classic Grammar**  \n  ì‚¬ëŒì´ ì‹¤ì œë¡œ ì–¸ì–´ë¥¼ ì‚¬ìš©í•¨ì— ìˆì–´ ë°œìƒí•˜ëŠ” ì´ìƒí•œ ìŠµê´€ê³¼ ê°™ì€ ì–¸ì–´ í‘œí˜„ì´ë‹¤. ì´ëŸ¬í•œ ë²•ì¹™ë“¤ì€ ëŒ€ê²Œ ì˜ˆì œë“¤ì„ í†µí•´ì„œ ì •ì˜ë˜ëŠ”ë° ì´ëŸ° ê²ƒì„ ëª…í™•í•˜ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ëª…ë°±í•œ ë„êµ¬ê°€ ì¡´ì¬í•˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ì˜ˆë¥¼ ë“¤ë©´, ê°íƒ„ì‚¬ì™€ ê°™ì€ ê²ƒë“¤ì´ ì—¬ê¸°ì— í¬í•¨ë˜ê² ë‹¤. ì´ëŠ” ì´ëŸ¬í•œ ë³€ì¹™ì ì¸ í˜•íƒœ ë•Œë¬¸ì— programmingì ìœ¼ë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤. \n- **Explicit Grammar**  \n  ëª…ë°±í•˜ê²Œ ì •ì˜ë˜ì–´ ìˆëŠ” ì–¸ì–´ ê·œì¹™ì„ ì˜ë¯¸í•œë‹¤. ì´ëŠ” Programmìœ¼ë¡œ êµ¬í˜„í•  ìˆ˜ ìˆìœ¼ë©°, ì—¬ëŸ¬ Grammar ì •ë¦¬ ë‚´ìš©ì´ ì´ë¯¸ ì •ë¦¬ë˜ì–´ ìˆë‹¤. (CFG, LFG, GPSG, HPSG, ....)  \n  ì´ë¥¼ ë¬¸ë²•ì ìœ¼ë¡œ ë¶„ì„í•˜ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” 6ë‹¨ê³„ì˜ ìˆœì°¨ì ì¸ ì²˜ë¦¬ê°€ í•„ìš”í•˜ë‹¤.\n\n### 6 Layers in Language\n\nê° ë‹¨ê³„ëŠ” inputê³¼ outputì„ ê°€ì§„ë‹¤. ë‹¨ê³„ì ìœ¼ë¡œ ì§„í–‰ë˜ê¸° ë•Œë¬¸ì— ì´ì „ ë‹¨ê³„ì˜ outputì´ ë‹¤ìŒ ë‹¨ê³„ì˜ inputì´ ë˜ë©°, ë•Œë•Œë¡œ ëª‡ ë‹¨ê³„ëŠ” ìƒëµë  ìˆ˜ ìˆê¸°ì— ìœ ì—°í•˜ê²Œ ìƒê°í•˜ë„ë¡ í•˜ì.\n\nê° ë‹¨ê³„ì—ì„œ ì‹¤ì œë¡œ íŠ¹ì • ë¬¸ì¥ì´ ì²˜ë¦¬ë˜ëŠ” ê³¼ì •ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œ \"Astronomers saw stars with telescope\"ë¼ëŠ” ë¬¸ì¥ì´ ìŒì„± ë˜ëŠ” textë¡œ ë“¤ì–´ì™”ì„ ë•Œë¥¼ ê°€ì •í•˜ì—¬ ê° ë‹¨ê³„ì—ëŠ” ë¬´ì—‡ì„ í•˜ê³  ì´ë¥¼ í†µí•´ì„œ ì–´ë–»ê²Œ ì´ ë¬¸ì¥ì„ ë°”ê¿€ ìˆ˜ ìˆëŠ”ì§€ë¥¼ í™•ì¸í•´ë³´ê² ë‹¤.\n\n> **1. Phonetics/Orthography(ìŒì„±í•™/ë§ì¶¤ë²•)**\n\në¨¼ì € OrthographyëŠ” ë§ì¶¤ë²• ê²€ì‚¬ë¥¼ ì˜ë¯¸í•˜ë©°, character sequenceë¡œ inputì´ ë“¤ì–´ì˜¤ë©´, ì´ë¥¼ ë§ì¶¤ë²•ì— ë§ëŠ”ì§€ë¥¼ í™•ì¸í•˜ì—¬ ì´ê²ƒì´ ìˆ˜ì •ëœ sequenceë¡œ ë°˜í™˜í•œë‹¤.  \nì˜ˆì‹œ ë¬¸ì¥ì— ìˆëŠ” \"telescope\"ëŠ” ë¬¸ë²•ì— ë§ì§€ ì•Šìœ¼ë¯€ë¡œ \"telescopes\"ë¡œ ë°”ë€Œì–´ì•¼ í•œë‹¤.\n\n| input                                 | output                                 |\n| :------------------------------------ | :------------------------------------- |\n| Astronomers saw stars with telescope. | Astronomers saw stars with telescopes. |\n\nPhoneticsëŠ” ìŒì„±í•™ì„ ì˜ë¯¸í•˜ë©°, í˜€ì™€ ìŒì„±ì˜ ì˜í–¥ì„ ì£¼ëŠ” ë‹¤ì–‘í•œ ê·¼ìœ¡ì˜ ìœ„ì¹˜ í˜•íƒœ, ëª¨ì–‘, ë¹ˆë„ë¥¼ í™œìš©í•˜ì—¬ ììŒê³¼ ëª¨ìŒì„ ë¶„ë¥˜í•˜ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤. Orthoographyì™€ëŠ” ë‹¬ë¦¬ ì–µì–‘ì´ë¼ëŠ” ê²ƒì„ ì¶”ê°€ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆë‹¤.\n\n| input                                                       | output                                 |\n| :---------------------------------------------------------- | :------------------------------------- |\n| Astronomers saw stars with telescopes.ë¥¼ ì˜ë¯¸í•˜ëŠ” ìŒì„± ì‹ í˜¸ | É™sËˆtrÉ’nÉ™mÉ™z sÉ”Ë stÉ‘Ëz wÉªÃ° ËˆtÉ›lÉªskÉ™ÊŠps. |\n\n*https://tophonetics.com/ ì„ í†µí•´ì„œ ë³€í™˜í•˜ì—¬ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n> **2. Phonology/Lexicalization(ìŒìš´ë¡ /ì–´íœ˜í™”)**\n\nPhonologyì€ ìŒìš´ë¡ ìœ¼ë¡œ ì†Œë¦¬ì™€ phonemes(ìŒì†Œ)ì‚¬ì´ì˜ ê´€ê³„ë¥¼ ì´ìš©í•˜ì—¬, ìŒì†Œë¥¼ íŠ¹ì • wordë¡œ ë³€í™˜í•˜ê³ , Lexicalizationì—ì„œëŠ” í•´ë‹¹ ë‹¨ì–´ë¥¼ ì‚¬ì „ì—ì„œì˜ í˜•íƒœë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ìˆ˜í–‰í•œë‹¤.\n\n| input                                  | output                                 |\n| :------------------------------------- | :------------------------------------- |\n| É™sËˆtrÉ’nÉ™mÉ™z sÉ”Ë stÉ‘Ëz wÉªÃ° ËˆtÉ›lÉªskÉ™ÊŠps. | Astronomers saw stars with telescopes. |\n\n> **3. Morphology(ì–´í˜•ë¡ )**\n\nMorphologyëŠ” ì–´í˜•ë¡ ìœ¼ë¡œ ìŒì†Œì˜ êµ¬ì„±ì„ ê¸°ë³¸í˜•(lemma)ì˜ í˜•íƒœë¡œ ë³€í™˜í•˜ë©°, ê° ë‹¨ì–´ë“¤ì„ í˜•íƒœí•™ì ì¸ ì˜ë¯¸ë¥¼ ê°–ëŠ” ì¹´í…Œê³ ë¦¬(category, tag)ë¡œ ë¶„ë¥˜í•œë‹¤. \nì—¬ê¸°ì„œ ì‚¬ìš©ë˜ëŠ” lemmaì™€ categoryê°€ ë¬´ì—‡ì¸ì§€ ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ì.\n\n- **lemma**  \n  - ì‚¬ì „ì— í‘œê¸°ë˜ëŠ” ë‹¨ì–´ì˜ ê¸°ë³¸í˜•ìœ¼ë¡œ, ì‚¬ì „ì—ì„œ wordë¥¼ ì°¾ëŠ” pointerê°€ ëœë‹¤.  \n  - ë™ìŒì´ì˜ì–´ì˜ ê²½ìš° íŠ¹ì • ëœ»ì„ ì§€ì¹­í•˜ê³  ì‹¶ì€ ê²½ìš°ì—ëŠ” numberingì„ ìˆ˜í–‰í•˜ê¸°ë„ í•œë‹¤.\n  - ë” ë‚˜ì•„ê°€ì„œëŠ” í˜•íƒœì†Œ(morpeheme)ê¹Œì§€ êµ¬ë¶„í•˜ê¸°ë„ í•œë‹¤. ì´ëŠ” í˜¼ìì„œ ì“°ì¼ ìˆ˜ ìˆëŠ” ìë¦½ í˜•íƒœì†Œ(root)ì™€ ì˜ì¡´ í˜•íƒœì†Œ(stem)ìœ¼ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.  \n    - ì˜ˆë¥¼ ë“¤ë©´, quotations -> quote[root] + -ation[stem] + -s[stem]\n    - ìœ„ì™€ ê°™ì€ í˜•íƒœë¡œ ì„¸ë¶„í™”í•  ìˆ˜ë„ ìˆì§€ë§Œ, ëŒ€ê²ŒëŠ” lemma ë‹¨ìœ„ì—ì„œ ê·¸ì¹œë‹¤.\n- **categorizing**  \n  - categoryëŠ” ì •í•˜ê¸° ë‚˜ë¦„ì´ë©°, ì´ë¯¸ ì •í•´ì ¸ìˆëŠ” tagsetë“¤ë„(Brown, Penn, Multext) ë§ì´ ì¡´ì¬í•˜ê³ , ì–µì–‘ì´ë‚˜ ì‹¤ì œ ë¶„ë¥˜ ë“±ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.\n  - **POS tagging**ì€ categoryë¥¼ ë¶„ë¥˜í•˜ëŠ” ë°©ë²• ì¤‘ì—ì„œ ê°€ì¥ ìœ ëª…í•œë°, ì´ëŠ” ì—¬ëŸ¬ ì–¸ì–´ì—ì„œ ê±°ì˜ í˜¸í™˜ë˜ê¸° ë•Œë¬¸ì— ì´ ë°©ì‹ì„ í™œìš©í•˜ì—¬ ë¶„ì„í•˜ëŠ” ê²ƒì´ ê°€ì¥ ì•ˆì •ì ì¸ ë°©ë²•ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ì´ëŠ” ë³„ë„ì˜ Postingì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¨ë„ë¡ í•˜ê² ë‹¤.\n\në˜í•œ, ë‹¨ì–´ì˜ í˜•íƒœëŠ” ì–¸ì–´ë§ˆë‹¤ ë‹¤ì–‘í•˜ê¸° ë•Œë¬¸ì— ì–´ëŠì •ë„ ì–¸ì–´ë§ˆë‹¤ ë‹¤ë¥¸ ì‘ì—…ì„ í•´ì£¼ì–´ì•¼ í•œë‹¤. í¬ê²Œ êµ¬ë¶„ë˜ëŠ” í˜•íƒœë¡œ ì–¸ì–´ë¥¼ 3ê°œì˜ ì¢…ë¥˜ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.\n\n1. **Analytical Language(ê³ ë¦½ì–´)**  \n   í•˜ë‚˜ì˜ ë‹¨ì–´ê°€ ëŒ€ê²Œ í•˜ë‚˜ì˜ morphemeì„ ê°€ì§„ë‹¤. ë”°ë¼ì„œ, í•˜ë‚˜ ì´ìƒì˜ categoryë¡œ êµ¬ë¶„ë˜ì–´ì§ˆ ìˆ˜ ìˆë‹¤.  \n   ex. English, Chinese, Italian\n2. **Inflective Fusional Language(êµ´ì ˆì–´)**  \n   prefix/suffix/infixê°€ ëª¨ë‘ morphemeì— ì˜í–¥ì„ ë¯¸ì¹˜ë©°, morphemeì˜ ì •ì˜ ìì²´ê°€ ì• ë§¤í•´ì§€ëŠ” ì–¸ì–´ í˜•íƒœ  \n   ex. Czech, Russian, Polish, ...\n3. **Agglutinative Language(êµì°©ì–´)**  \n   í•˜ë‚˜ì˜ ë‹¨ì–´ì—ëŠ” morphemeì´ ëª…í™•í•˜ê²Œ êµ¬ë¶„ë˜ê³ , prefix/suffix/infix ë˜í•œ ëª…í™•í•˜ê²Œ êµ¬ë¶„ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ, ê° morphemeì— ëª…í™•í•œ categoryë¥¼ mappingí•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.  \n   ex. Korean, ...\n\n\n| input                                  | output(based on Brown tagset)                                         |\n| :------------------------------------- | :-------------------------------------------------------------------- |\n| Astronomers saw stars with telescopes. | (astronomer/NNS) (see/VBD) (star/NNS) (with/IN) (telescope/NNS) (./.) |\n\n> **4. Syntax(í†µì‚¬ë¡ )**\n\nlemmaë‚˜ morphemeì„ êµ¬ë¬¸ì˜ ìš”ì†Œì¸ S(Subject, ì£¼ì–´), V(Verb, ë™ì‚¬), O(Object, ëª©ì ì–´)ì™€ ê°™ì€ ìš”ì†Œë¡œ ë¶„ë¥˜í•œë‹¤. ì´ ë¶„ë¥˜ë¥¼ ìˆ˜í–‰í•  ë•Œì—ëŠ” ë¬¸ì¥ì˜ êµ¬ì„±ìš”ì†Œë¥¼ ì•Œì•„ì•¼ í•œë‹¤. ì´ë¥¼ bottom-upìœ¼ë¡œ ì‚´í´ë³´ì.\n \n- **Word(ë‹¨ì–´)**  \n  ì‚¬ì „ì— ëª…ì‹œëœ í•˜ë‚˜ì˜ ë‹¨ìœ„ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. ì´ëŠ” ê´€ìš©ì–´(dark horse)ë¥¼ í¬í•¨í•œë‹¤.\n- **Phrase(êµ¬)**  \n  ë‘˜ ì´ìƒì˜ ë‹¨ì–´ ë˜ëŠ” êµ¬ì˜ ê²°í•©ìœ¼ë¡œ ë§Œë“¤ì–´ì§„ë‹¤. ëŒ€ê²Œ í•˜ë‚˜ì˜ ë¬¸ë²•ì ì¸ ì˜ë¯¸ë¡œ ë³€í™˜ë˜ì–´ì§„ë‹¤.  \n  - ëŒ€í‘œì ì¸ ì˜ˆì‹œ\n    - Noun : a new book\n    - Adjective : brand new\n    - Adverbial : so much\n    - Prepositional : in a class\n    - Verb : catch a ball\n  - **Elipse(ìƒëµ)**  \n    ëŒ€ê²Œ ë‹¨ì–´ ë˜ëŠ” êµ¬ê°€ ìƒëµë˜ëŠ” ê²½ìš°ê°€ ë§ë‹¤. íŠ¹íˆ ë‹´í™”ì˜ ê²½ìš° ë”ìš± ê·¸ë ‡ë‹¤.  \n    ì´ë¥¼ ì¶”ë¡ ì„ í†µí•´ì„œ ì¶”ê°€í•  ìˆ˜ë„ ìˆë‹¤.\n- **Clause(ì ˆ)**  \n  ì ˆì€ ì£¼ì–´ì™€ ì„œìˆ ì–´ë¥¼ ê°–ì¶˜ í•˜ë‚˜ì˜ ë¬¸ì¥ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ, ë¬¸ì¥ ìš”ì†Œë¡œì„œ ë” ìƒìœ„ ë¬¸ì¥ì— ì†í•˜ëŠ” ê²½ìš°ì´ë‹¤.  \n  ë˜í•œ, ì˜ì–´ì—ì„œëŠ” íŠ¹íˆ ì ‘ì†ì‚¬ë¡œ ì—°ê²°ëœ ì ˆì´ ì•„ë‹Œ ê²½ìš°ì—ëŠ” í•´ë‹¹ ì ˆì´ ì§€ì¹­í•˜ëŠ” ëŒ€ìƒì´ ì ˆ ë‚´ë¶€ì—ì„œ ìƒëµëœë‹¤. ì´ë¥¼ gapì´ë¼ê³  í•œë‹¤.\n- **Sentense**  \n  í•˜ë‚˜ ì´ìƒì˜ ì ˆë¡œ ì´ë£¨ì–´ì§€ê³ , ì˜ì–´ì—ì„œëŠ” ì‹œì‘ ì‹œì— ëŒ€ë¬¸ìë¡œ í‘œê¸°í•˜ë©° ì¢…ë£Œ ì‹œì—ëŠ” êµ¬ë¶„ìë¡œ .?!ë¡œ ëë‚œë‹¤.\n\nê²°êµ­ ìš°ë¦¬ëŠ” ì´ëŸ¬í•œ ìš”ì†Œë¥¼ ì ì ˆí•˜ê²Œ í‘œì‹œí•´ì•¼ í•˜ëŠ”ë°, ì´ë¥¼ ìœ„í•´ì„œ tree êµ¬ì¡°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤. ëŒ€í‘œì ìœ¼ë¡œ ë‘ ê°€ì§€ì˜ êµ¬ì¡°ê°€ ìˆë‹¤.\n\n1. **phrase structure(derivation tree)**    \n   ë¬¸ì¥ì„ ê¸°ì ìœ¼ë¡œ ì ˆ, êµ¬, ë‹¨ì–´ë¡œ top-downìœ¼ë¡œ ë‚´ë ¤ê°€ëŠ” êµ¬ì¡°ë¥¼ ê°€ì§„ë‹¤.  \n   ê° ë‹¨ìœ„ë¥¼ ë¬¶ì„ ë•Œì—ëŠ” ()ë¥¼ ì´ìš©í•˜ê³ , ê·¸ ë’¤ì•  í•´ë‹¹í•˜ëŠ” ë‚´ìš©ì´ ë¬´ìŠ¨ êµ¬, ì ˆì¸ì§€ë¥¼ í‘œê¸°í•œë‹¤.   \n2. **dependency structure**  \n   ë‹¨ì–´ ê°„ì˜ ê´€ê³„ì— ë” ì§‘ì¤‘í•˜ì—¬ ë‚˜íƒ€ë‚¸ë‹¤. ë”°ë¼ì„œ, ì‚¬ëŒì´ ë³´ê¸°ì—ëŠ” ë¶ˆëª…í™•í•´ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ íŠ¹ì • usecaseì—ì„œëŠ” ìœ ìš©í•˜ë‹¤.\n\n| input                                                                 | output (phrase structure)                                                              |\n| :-------------------------------------------------------------------- | :------------------------------------------------------------------------------------- |\n| (astronomer/NNS) (see/VBD) (star/NNS) (with/IN) (telescope/NNS) (./.) | ((astronomer/NNS)NP ((see/VBD)V ((star/NNS)NP ((with/IN)P (telescope/NNS)NP)PP)NP)VP)S |\n\n![nlp-phase-structure](/images/nlp-phase-structure.jpg)\n\n> **5. Semantics(Meaning, ì˜ë¯¸ë¡ )**\n\nê°„ë‹¨í•˜ê²ŒëŠ” ì£¼ì–´, ëª©ì ì–´ì™€ ê°™ì€ tagë‚˜ \"Agent\"ë‚˜ \"Effect\"ì™€ ê°™ì€ tagë¥¼ ì ìš©í•˜ë©°, ì „ì²´ì ì¸ ì˜ë¯¸ë¥¼ ìœ ì¶”í•´ë‚¸ë‹¤.\n\n| input                                                                                  | output                                                                                                |\n| :------------------------------------------------------------------------------------- | :---------------------------------------------------------------------------------------------------- |\n| ((astronomer/NNS)NP ((see/VBD)V ((star/NNS)NP ((with/IN)P (telescope/NNS)NP)PP)NP)VP)S | ((astronomer/NNS)NP/agent ((see/VBD)V ((star/NNS)NP/affected ((with/IN)P (telescope/NNS)NP)PP)NP)VP)S |\n\n> **6. Discourse/Pragmatics(ë‹´í™”/í™”ìš©ë¡ )**\n\nì‹¤ì œ ëŒ€í™” ë“±ê³¼ ê°™ì€ ëª©í‘œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ì•ì„œ ë³´ì•˜ë˜ ë¬¸ì¥ êµ¬ì¡°ë¥¼ ì´ìš©í•œë‹¤.\n\në§Œì•½, í•´ë‹¹ ë°ì´í„°ë¥¼ í†µí•´ì„œ í•˜ê³ ì í•˜ëŠ” ê²ƒì´ ì´ ì´ì•¼ê¸°ë¥¼ í•œ ì‚¬ëŒì´ ì‹ë‹¹ ë‚´ë¶€ì— ìˆëŠ”ì§€ë¥¼ íŒë‹¨í•˜ê³ ì í•œë‹¤ê³  ê°€ì •í•´ë³´ì.\n\n| input                                                                                                 | output |\n| :---------------------------------------------------------------------------------------------------- | :----- |\n| ((astronomer/NNS)NP/agent ((see/VBD)V ((star/NNS)NP/affected ((with/IN)P (telescope/NNS)NP)PP)NP)VP)S | False  |\n\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- text to phonetic converter, https://tophonetics.com","slug":"nlp-linguistics","date":"2022-10-19 09:03","title":"[NLP] 1. Linguistics","category":"AI","tags":["NLP","Languagistics"],"desc":"Natural Language(ìì—°ì–´, ì‚¬ëŒì´ ì‚¬ìš©í•˜ëŠ” í†µìƒ ì–¸ì–´)ë¥¼ inputìœ¼ë¡œ í™œìš©í•˜ê³ ì í•˜ëŠ” ë…¸ë ¥ì€ ì»´í“¨í„°ì˜ ë“±ì¥ë¶€í„° ì‹œì‘í•˜ì—¬ ì—¬ëŸ¬ ë²ˆ ì‹œë„ë˜ì–´ ì™”ë‹¤. ì§€ê¸ˆê¹Œì§€ë„ ì™„ë²½í•˜ê²Œ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì€ í˜ë“¤ë‹¤. ì™œ Natural Languageë¥¼ ë‹¤ë£¨ëŠ” ê²ƒì€ ì–´ë µê³ , ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ NLPì—ì„œëŠ” ì–´ë–¤ ë°©ì‹ì„ í™œìš©í• ì§€ì— ëŒ€í•œ ê°œëµì ì¸ overviewë¥¼ ì œì‹œí•œë‹¤. ë˜í•œ, Natural Languageì˜ íŠ¹ì„±ê³¼ ë¶„ì„ ë‹¨ê³„ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œ Linguistics(ì–¸ì–´í•™)ì„ ê°„ëµí•˜ê²Œ ì •ë¦¬í•œë‹¤. ","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"},{"content":"\n## Intro\n\nNLPë¥¼ ìˆ˜í–‰í•  ë•Œ, ìš°ë¦¬ëŠ” sequence of characterë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì œëŒ€ë¡œ ì•Œì•„ì•¼ ì œëŒ€ë¡œ ëœ ì „ì²˜ë¦¬ì™€ í›„ì²˜ë¦¬ ë“±ì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ í•´ë‹¹ chapterì—ì„œëŠ” ì–´ë–»ê²Œ ì›ë³¸ ë¬¸ì/ë‹¨ì–´/ë¬¸ì¥ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ë‹¤ë£° ê²ƒì´ë‹¤.\n\n## Regular Express\n\nì•„ì£¼ ê¸°ë³¸ì ì¸ ë¬¸ìì—´ ì²˜ë¦¬ ë°©ë²•ì´ë‹¤. ì´ë¥¼ ì•Œê³  ìˆì–´ì•¼ ì‹¤ì§ˆì ì¸ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. í•´ë‹¹ ë‚´ìš©ì€ ë³„ë„ì˜ Postingìœ¼ë¡œ ë¶„ë¦¬í•˜ì—¬ ë‹¤ë£¨ì—ˆë‹¤. ([ğŸ”— Regex](/posts/regex))ë¥¼ ì‚´í´ë³´ë„ë¡ í•˜ì.\n\n## Text Normalization\n\nìš°ë¦¬ê°€ ì‚¬ìš©í•  NLì€ ì •ì œë˜ì–´ ìˆì§€ ì•Šì•„ì„œ ì—¬ëŸ¬ ì „ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•´ì•¼ í•œë‹¤. ê·¸ ì¤‘ì—ì„œ ëŒ€ì¤‘ì ìœ¼ë¡œ ì¢‹ë‹¤ê³  ì•Œë ¤ì§„ ë°©ë²•ë“¤ì„ ì‚´í´ë³¼ ê²ƒì´ë‹¤. ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì•„ë˜ ë‹¨ê³„ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n1. Word Tokenization  \n   ë§ ê·¸ëŒ€ë¡œ NL ë°ì´í„°ê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ, ì´ë¥¼ ë‹¨ì–´ ë‹¨ìœ„ë¡œ ìª¼ê°œëŠ” ê²ƒì´ë‹¤.\n2. Word Reformating  \n   ë‹¨ì–´ë¥¼ ë‚˜ëˆ„ì—ˆë‹¤ë©´, ê° ë‹¨ì–´ì˜ í˜•íƒœë¥¼ ì²˜ë¦¬í•˜ê¸° ì‰¬ìš´ í˜•íƒœë¡œ Normalizingí•˜ëŠ” ê²ƒì´ë‹¤.  \n3. Sentence Segmentation  \n   ë¬¸ì¥ ë‹¨ìœ„ë¡œ êµ¬ë¶„í•´ëŠ” ê³¼ì •ì´ë‹¤.\n\nì´ì œ ê° ë‹¨ê³„ë¥¼ ì„¸ë¶€ì ìœ¼ë¡œ ë‹¤ë¤„ë³´ê² ë‹¤.\n\n### 1. Word Tokenization\n\nìš°ì„  ì‰½ê²Œ ìƒê°í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ë‹¨ìˆœíˆ ë„ì–´ì“°ê¸°ë¥¼ ê¸°ì¤€ìœ¼ë¡œ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ê²Œ í•˜ë©´, ìš°ë¦¬ëŠ” ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§„ Corpusì—ì„œ tokenì„ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤. \n\ní•˜ì§€ë§Œ, \"San Francisco\"ì™€ ê°™ì€ ë‹¨ì–´ê°€ ë‘ ê°œì˜ tokenìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ í•˜ë‚˜ì˜ tokenìœ¼ë¡œ ì²˜ë¦¬ë˜ê¸°ë¥¼ ì›í•  ìˆ˜ ìˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ ì¼ë¶€ ì–¸ì–´ë“¤(íŠ¹íˆ ì¤‘êµ­ì–´ì™€ ì¼ë³¸ì–´)ì˜ ê²½ìš° ë„ì–´ì“°ê¸° ì—†ì´ ì‘ì„±í•˜ëŠ” ì–¸ì–´ë“¤ì˜ ê²½ìš° ë¬¸ì œëŠ” ë” ì»¤ì§ˆ ìˆ˜ ìˆë‹¤. ì´ ê²½ìš°ì—ëŠ” **Word Segmenting**ì´ë¼ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ í™œìš©í•  ìˆ˜ë„ ìˆëŠ”ë°, ì›ë¦¬ëŠ” ë§¤ìš° ê°„ë‹¨í•˜ë‹¤. ì–¸ì–´ì˜ ëª¨ë“  ë‹¨ì–´ë¥¼ í¬í•¨í•˜ëŠ” ì‚¬ì „ì„ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì¥ì—ì„œ ì‚¬ì „ì— ì¼ì¹˜í•˜ëŠ” ê°€ì¥ ê¸´ ë¬¸ìì—´ì„ ì°¾ì„ ìˆ˜ ìˆì„ ë•Œê¹Œì§€ tokenì„ ì—°ì¥í•´ì„œ ë§Œë“œëŠ” ë°©ì‹ì´ë‹¤.\n\nê·¸ëŸ¬ë‚˜ ì´ ë°©ì‹ë„ ê²°êµ­ì€ íŠ¹ì • ì–¸ì–´(ì¤‘êµ­ì–´, ë“±)ì—ì„œëŠ” ì˜ ì‘ë™í•˜ì§€ë§Œ, ì¼ë¶€ ì–¸ì–´(ì˜ì–´ ë“±)ì—ì„œëŠ” ì˜ ì‘ë™í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ë§ë‹¤. ë”°ë¼ì„œ, ìµœê·¼ì—ëŠ” í™•ë¥ ì— ê¸°ë°˜í•˜ì—¬ ê°™ì´ ë“±ì¥í•˜ëŠ” íšŸìˆ˜ê°€ ë§ì„ ê²½ìš° í•˜ë‚˜ì˜ tokenìœ¼ë¡œ ë¬¶ëŠ” í˜•íƒœì˜ tokenizationì„ ë” ì„ í˜¸í•œë‹¤.\n\nì´ ê³¼ì •ì—ì„œ ìš°ë¦¬ê°€ ì¶”ê°€ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ë°”ë¡œ wordì˜ ê°¯ìˆ˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ê²ƒì´ë‹¤. ëŒ€ê²Œ ìš°ë¦¬ê°€ ê´€ì‹¬ ìˆì–´í•˜ëŠ” ìˆ˜ëŠ” ì´ 3ê°€ì§€ì´ë‹¤.\n\n1. **number of tokens**  \n   ì¦‰, ë„ì–´ì“°ê¸°ë¡œ ë‚˜ë‰˜ì–´ì§€ëŠ” tokenë“¤ì˜ ì´ ê°¯ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤.\n2. **number of types(Vocabulary)**  \n   ë„ì–´ì“°ê¸°ë¡œ ë‚˜ë‰˜ì–´ì§„ tokenë“¤ì˜ ì¤‘ë³µì„ ì œê±°í•œ ì¢…ë¥˜ë“¤ì˜ ê°¯ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤. ëŒ€ê²Œ ì´ëŸ¬í•œ typeë“¤ì˜ ëª¨ìŒì„ Vocabularyë¼ê³  í•œë‹¤.\n3. **number of each type's tokens**  \n   ê° ì¢…ë¥˜ì˜ tokenì´ ì–¼ë§ˆë‚˜ ë§ì´ ë“±ì¥í–ˆëŠ”ì§€ë¥¼ ì˜ë¯¸í•œë‹¤.\n\nì—¬ê¸°ì„œ ì´ëŸ¬í•œ tokenì´ë‚˜ typeì´ ì„œë¡œ ê°™ë‚˜ëŠ” ê²ƒì„ ì–´ë–»ê²Œ êµ¬ë¶„í•  ìˆ˜ ìˆì„ê¹Œ? ì´ë¥¼ ìœ„í•´ì„œ Word Reformatingì„ ìˆ˜í–‰í•˜ì—¬ ì¢€ ë” ì¼ë°˜ì ì¸ í˜•íƒœë¡œ ë³€í˜•í•˜ì—¬ ìœ„ì˜ ìˆ˜ë“¤ì„ íŒŒì•…í•˜ê¸°ë„ í•œë‹¤.\n\n### 2. Word Normalization and Stemming(Word Reformating)\n\nëŒ€ê²Œì˜ ì–¸ì–´ëŠ” wordì˜ í˜•íƒœê°€ ì—¬ëŸ¬ ê°œë¡œ ì¡´ì¬í•œë‹¤. ì´ ê³¼ì •ì—ì„œ ìš°ë¦¬ê°€ ê³ ë ¤í•´ì•¼ í•  ê²ƒì´ ì •ë§ ë§ë‹¤. ê·¸ ì¤‘ì—ì„œ ê°€ì¥ ê¸°ë³¸ì ìœ¼ë¡œ ìˆ˜í–‰ë˜ì–´ì•¼ í•  ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ë‹¤. í•´ë‹¹ ë‚´ìš©ì€ ì˜ì–´ì— ì¤‘ì‹¬ì„ ë‘” ì„¤ëª…ì´ë‹¤.\n\n1. **Uppercase**  \n   ì˜ì–´ì—ì„œ ì²« ê¸€ìëŠ” ëŒ€ë¬¸ìë¡œ ì‹œì‘í•œë‹¤ëŠ” ê·œì¹™ì´ ìˆë‹¤. ë˜ëŠ” ê°•ì¡°í•˜ê³  ì‹¶ì€ ë‹¨ì–´ë¥¼ ëŒ€ë¬¸ìë¡œ í‘œí˜„í•˜ê¸°ë„ í•œë‹¤. ê·¸ ê²°ê³¼ tokenì˜ ì¢…ë¥˜ë¥¼ ì¶”ì¶œí•˜ëŠ” ê³¼ì •ì—ì„œ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¤ê¸°ë„ í•œë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ëª¨ë‘ lowercaseë¡œ ë°”ê¿”ë²„ë¦¬ëŠ” ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ëª¨ë“  ê²½ìš°ì— ì´ë¥¼ ì ìš©í•  ìˆ˜ ì‡ëŠ” ê²ƒì€ ì•„ë‹ˆë‹¤. ê°€ì¥ ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ USì™€ usì˜ ì˜ë¯¸ê°€ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì´ë‹¤. ë˜, ê³ ìœ  ëª…ì‚¬ì¸ General Motorsì™€ ê°™ì€ ê²½ìš°ë„ ë‹¤ë¥´ê²Œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ê³ ë ¤í•´ì„œ ë¨¼ì € ì²˜ë¦¬í•œ ì´í›„ì— ì „ì²´ ë°ì´í„°ë¥¼ lowercaseë¡œ ë³€í™˜í•˜ëŠ” ë°©ì‹ì„ ìˆ˜í–‰í•œë‹¤.  \n2. **Lemmatization**  \n   Lemma(ê¸°ë³¸í˜•, ì‚¬ì „í˜•)ë¡œ ë‹¨ì–´ë¥¼ ë³€í™˜í•˜ëŠ” ê²ƒì´ë‹¤. ê°€ì¥ ê¸°ë³¸ì ì¸ ê²ƒì€ am, are, isì™€ ê°™ì€ beë™ì‚¬ë¥¼ ëª¨ë‘ beë¡œ ë³€í™˜í•˜ê±°ë‚˜ car, cars, car'së¥¼ ëª¨ë‘ ê¸°ë³¸í˜•íƒœì¸ carë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ë‹¤. ëŒ€ê²Œì˜ ê²½ìš°ì—ëŠ” ì´ ê³¼ì •ì—ì„œ ì˜ë¯¸ë¥¼ ì¼ë¶€ ìƒì–´ë²„ë¦¬ê¸° ë•Œë¬¸ì— lemma + tagë¡œ ê¸°ì¡´ tokenì„ ë³µêµ¬í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” tagë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.\n3. **Stemming**  \n   morpheme(í˜•íƒœì†Œ)ì€ ì¤‘ì‹¬ ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” stemê³¼ í•µì‹¬ ì˜ë¯¸ëŠ” ì•„ë‹ˆì§€ë§Œ stemì— ì¶”ê°€ ì˜ë¯¸ë¥¼ ë”í•´ì£¼ëŠ” affixesë¡œ ë‚˜ëˆ„ì–´ wordë¥¼ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ê° tokenì„ ê°€ì¥ coreì˜ ì˜ë¯¸ë¥¼ ê°€ì§€ëŠ” stemìœ¼ë¡œ ë‚˜íƒ€ë‚´ëŠ” ë°©ì‹ì´ë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œê°€ automate, automatic, automationì„ automatìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” lemmatizationë³´ë‹¤ ë„“ì€ ë²”ìœ„ì˜ wordë¥¼ í•˜ë‚˜ë¡œ ë¬¶ê¸° ë•Œë¬¸ì— ì„¸ë¶€ì˜ë¯¸ê°€ ë” ì†ì‹¤ë  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ê¸°ì¡´ ì˜ë¯¸ë¡œ ë³µêµ¬í•  ìˆ˜ ìˆëŠ” tagë¥¼ í¬í•¨í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤. \n\n### 3. Sentence Segmentation\n\në¬¸ì¥ì„ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” ë„êµ¬ë¡œ ìš°ë¦¬ëŠ” \"?\", \"!\", \".\"ì„ í™œìš©í•œë‹¤. \"?\"ì™€ \"!\" ê°™ì€ ê²½ìš°ëŠ” ë¬¸ì¥ì˜ ëì„ ì˜ë¯¸í•˜ëŠ”ê²ƒì´ ëŒ€ê²Œ ìëª…í•˜ë‹¤. í•˜ì§€ë§Œ, \".\"ì€ ê½¤ë‚˜ ì• ë§¤í•  ìˆ˜ ìˆë‹¤. ì†Œìˆ˜ì , Abbreviation(Mr., Dr., Inc.)ì™€ ê°™ì€ ê²½ìš°ì— ë¹ˆë²ˆí•˜ê²Œ ì‚¬ìš©ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ íŒë‹¨í•˜ê¸° ìœ„í•´ì„œ Decision Treeë¥¼ ë§Œë“¤ì–´ì„œ ì´ë¥¼ ìˆ˜í–‰í•œë‹¤. ì•„ë˜ì™€ ê°™ì´ ì‚¬ëŒì´ ì§ì ‘ ê·œì¹™ì„ ì •í•  ìˆ˜ë„ ìˆì§€ë§Œ í˜„ì¬ëŠ” ëŒ€ê²Œ í†µê³„ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•œë‹¤.\n\n![nlp-sentence-segmentation](/images/nlp-sentence-segmentation.jpg)\n\n## Collocation(ì—°ì–´) processing\n\nText Normalizationì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” sentenceë¥¼ êµ¬ë¶„í•˜ê³ , wordë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ, ë‹¨ìˆœíˆ í•˜ë‚˜ì˜ wordë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì£¼ë³€ ë‹¨ì–´ë¥¼ í™œìš©í•˜ì—¬ ì²˜ë¦¬í•´ì•¼ë§Œ ì–»ì„ ìˆ˜ ìˆëŠ” ì •ë³´ë“¤ì´ ìˆë‹¤. ìš°ë¦¬ëŠ” ì´ë¥¼ Collocation(ì—°ì–´)ë¥¼ í™œìš©í•˜ì—¬ ìˆ˜í–‰í•œë‹¤. ì´ëŠ” íŠ¹ì • ë‹¨ì–´ìŒì´ ë†’ì€ ë¹ˆë„ë¡œ ê°™ì´ ë¶™ì–´ ì‚¬ìš©ë˜ëŠ” í˜„ìƒì„ ë§í•œë‹¤. **\"ëª¨ë“  ë‹¨ì–´ëŠ” ì´ë¥¼ ë™ë°˜í•˜ëŠ” ì£¼ë³€ ë‹¨ì–´ì— ì˜í•´ íŠ¹ì„± ì§€ì–´ì§„ë‹¤.\"** ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ì´ collocationì„ co-ocurrenceë¡œ ìƒê°í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì„ í•  ìˆ˜ ìˆë‹¤.\n\n1. **lexicography(ì‚¬ì „ í¸ì°¬)** : ê°™ê°€ë‹ˆ ìœ ì‚¬í•œ ëœ»ì„ ê°€ì§€ëŠ” ë‹¨ì–´ëŠ” ë¹ˆë²ˆí•˜ê²Œ ë¶™ì–´ì„œ ì‚¬ìš©ë˜ëŠ”ë° ì´ë¥¼ ì´ìš©í•´ì„œ í•˜ë‚˜ì˜ ë‹¨ì–´ì˜ ëœ»ì„ ì•ˆë‹¤ë©´, ì´ë¥¼ í†µí•´ì„œ ë‹¤ë¥¸ ë‹¨ì–´ì˜ ëœ»ì„ ì¶”ë¡ í•˜ë©° í™•ì¥í•´ë‚˜ê°ˆ ìˆ˜ ìˆë‹¤.\n2. **language modeling** : NLë¥¼ í†µí•´ì„œ ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•´ì„œ íŠ¹ì • parameterë¥¼ ì¶”ì •í•´ë‚´ëŠ” ê²ƒì„ language modelingì´ë¼ê³  í•˜ëŠ”ë° ì´ ê³¼ì •ì—ì„œ collocationì„ í™œìš©í•˜ëŠ” ê²ƒì´ ë‹¨ì¼ ë‹¨ì–´ë¥¼ í™œìš©í•˜ëŠ” ê²ƒë³´ë‹¤ contextë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì¥ì ì„ ë°œíœ˜í•  ìˆ˜ ìˆë‹¤.\n3. **NL generation** : ìš°ë¦¬ëŠ” ë¬¸ë§¥ìƒ ë§¤ë„ëŸ¬ìš´ ë¬¸ì¥ì„ ì›í•œë‹¤. ì¦‰, \"ê°ì„ ì¡ë‹¤\"ë¥¼ \"ê°ì„ ë¶™ì¡ë‹¤\"ë¼ê³  í–ˆì„ ë•Œ, ëœ»ì„ ì´í•´í•  ìˆ˜ëŠ” ìˆì§€ë§Œ ì–´ìƒ‰í•˜ë‹¤ê³  ëŠë‚€ë‹¤. ë”°ë¼ì„œ, ì´ ê´€ê³„ë¥¼ í™œìš©í•´ì„œ NLì„ ìƒì„±í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— collocationì„ ê³ ë ¤í•´ì•¼ í•œë‹¤.\n\nê·¸ë ‡ë‹¤ë©´, ì´ëŸ¬í•œ Collocationì„ ì–´ë–»ê²Œ ì°¾ì„ ìˆ˜ ìˆì„ê¹Œ?\n\n1. **Frequency**  \n   ê°€ì¥ ê°„ë‹¨í•˜ê²Œ ë‹¨ìˆœíˆ ë™ì‹œ ë°œìƒ ë¹ˆë„ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤. ì •í™•í•œ íŒŒì•…ì„ ìœ„í•´ì„œëŠ” ë¹ˆë²ˆí•˜ê²Œ ë“±ì¥í•˜ëŠ” ì˜ë¯¸ ì—†ëŠ” ë‹¨ì–´ë¥¼ ë¨¼ì € filteringí•  í•„ìš”ê°€ ìˆë‹¤. ëŒ€í‘œì ì¸ ì˜ˆì‹œë¡œ a, the, and ë“±ì´ ìˆë‹¤.\n2. **Hypothesis Testing**  \n   ê°€ì„¤ ê²€ì¦ìœ¼ë¡œ ìš°ë¦¬ê°€ ê°€ì •í•œ collocationì„ ì§€ì •í•˜ê³ , ì´ ì‚¬ê±´ì´ ì¼ì–´ë‚  ê°€ëŠ¥ì„±ì„ êµ‰ì¥íˆ ë‚®ê²Œ í•˜ëŠ” ê°€ì„¤ì„ ë°˜ëŒ€ë¡œ ê°€ì •í•œ í›„ì— ì´ê²ƒì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì„ ì¦ëª…í•˜ëŠ” Null Hypothesisë¥¼ ì´ìš©í•œ ì¦ëª…ìœ¼ë¡œ íƒ€ë‹¹ì„±ì„ í™•ë³´í•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ê°€ ë³´ì´ê³ ì í•˜ëŠ” ê²ƒì€ word1, word2ê°€ ìˆì„ ë•Œ, ë‘ ë‹¨ì–´ê°€ ì„œë¡œ ì˜ì¡´ì ì´ë¼ëŠ” ê²ƒì„ ì¦ëª…í•˜ê³  ì‹¶ì€ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, Null Hypothesisë¡œ ë‘ ë‹¨ì–´ëŠ” ë…ë¦½ì´ë‹¤ë¼ê³  ì§€ì •í•˜ë©´, ìš°ë¦¬ëŠ” ë‹¤ìŒ ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.  \n   $p(w_{1}, w_{2}) = p(w_{1})p(w_{2})$  \n   ì´ë¥¼ ë°”íƒ•ìœ¼ë¡œ t-ê²€ì¦ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.  \n   $t = {{p(w_{1}, w_{2}) - p(w_{1})p(w_{2})} \\over \\sqrt{p(w_{1}, w_{2})\\over{N}}} $  \n   tê°’ì´ ì´ì œ ì»¤ì§ˆ ìˆ˜ë¡ ìš°ë¦¬ëŠ” í•´ë‹¹ ê°€ì„¤ì´ í‹€ë ¸ìŒì„ ì¦ëª…í•˜ì—¬ collocationì„ì„ ì£¼ì¥í•  ìˆ˜ ìˆë‹¤.\n\n## Minimum Edit Distance\n\në‹¨ì–´ ë˜ëŠ” ë¬¸ì¥ ê°„ ìœ ì‚¬ë„ë¥¼ ì¸¡ì •í•  ë•Œ, ì‚¬ì „ì„ ê¸°ë°˜ìœ¼ë¡œ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆì§€ë§Œ ì°¸ê³ í•  corpusê°€ ë§ˆë•…í•˜ì§€ ì•Šê±°ë‚˜ ë” ì¶”ê°€ì ì¸ ìˆ˜ì¹˜ê°€ í•„ìš”í•˜ë‹¤ë©´, Minimum Edit Distanceë¡œ ìœ ì‚¬ë„ë¥¼ ì¸¡ì •í•˜ê¸°ë„ í•œë‹¤. ì¦‰, ë‘ ë¬¸ìì—´ì´ ê°™ì•„ì§€ê¸° ìœ„í•´ì„œ ì–´ëŠì •ë„ì˜ ìˆ˜ì •ì´ í•„ìš”í•œì§€ë¥¼ ìˆ˜ì¹˜í™”í•œ ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ì—°ì‚°ì€ ìƒˆë¡œìš´ ë¬¸ì ì¶”ê°€, ì‚­ì œ, ëŒ€ì²´ë§Œ ê°€ëŠ¥í•˜ë‹¤.\n\n\n```plaintext\nS - N O W Y  | - S N O W - Y\nS U N N - Y  | S U N - - N Y\ndistance : 3 | distance : 5\n```\n\në‹¤ìŒê³¼ ê°™ì´ í‘œí˜„ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n1. ë¬¸ìì—´ x, yê°€ ìˆì„ ë•Œ, $E(i, j)$ëŠ” xì˜ 0\\~iê¹Œì§€ë¥¼ í¬í•¨í•˜ëŠ” ë¬¸ìì—´ê³¼ yì˜ 0~jê¹Œì§€ë¥¼ í¬í•¨í•˜ëŠ” ë¬¸ìì—´ì˜ distanceë¼ê³  í•˜ì. \n2. ì´ë ‡ê²Œ ë˜ë©´, $E(i,j)$ì—ì„œ ìš°ë¦¬ëŠ” ëë¬¸ìì˜ ê·œì¹™ì„ ë³¼ ìˆ˜ ìˆë‹¤.\n    \n    ì˜¤ë¥¸ìª½ ë ë¬¸ìê°€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ì¡°í•©ì€ 3ê°€ì§€ ë°–ì— ì—†ë‹¤.\n    \n    ```plaintext\n    x[i]        | -           | x[i]\n    -           | y[j]        | y[j]\n    distance: 1 | distance: 1 | distance: 0 or 1\n    ```\n    \n3. ê·¸ë ‡ë‹¤ë©´ ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ ì‚¬ì‹¤ì„ ì•Œê²Œ ëœë‹¤.\n    \n    $E(i,j)$ëŠ” ë‹¤ìŒ ê²½ìš°ì˜ ìˆ˜ ì¤‘ í•˜ë‚˜ì—¬ì•¼ë§Œ í•œë‹¤.\n    \n    - $E(i-1, j) + 1$\n    - $E(i, j-1) + 1$\n    - $E(i-1, j-1) + ((x[i] == y[j])\\text{ ? 0 : 1} )$\n4. ë”°ë¼ì„œ, ë‹¤ìŒê³¼ ê°™ì€ ì‹ì„ ìœ ë„í•  ìˆ˜ ìˆë‹¤.\n    \n    $E(i, j) =\\min( \\\\\n      \\quad E(i-1, j) + 1, \\\\\n      \\quad E(i, j-1) + 1,  \\\\\n      \\quad E(i - 1, j-1) + ((x[i] == y[j])\\text{ ? 0 : 1} )\\\\\n    )$\n\në§Œì•½, ê° ì—°ì‚°ì˜ ë¹„ìš©ì´ ë‹¤ë¥¼ ê²½ìš°ë¼ë©´, 1 ëŒ€ì‹ ì— ê·¸ ê°’ì„ ë„£ì–´ì£¼ë©´ ì¶©ë¶„íˆ í’€ ìˆ˜ ìˆìœ¼ë©°, ì¶”ê°€ì ìœ¼ë¡œ ìµœì ì˜ ì´ë™í˜•íƒœë¥¼ ì•Œê³  ì‹¶ë‹¤ë©´, back pointer í•˜ë‚˜ë¥¼ ì¶”ê°€í•˜ëŠ” ê²ƒìœ¼ë¡œ ì¶©ë¶„í•˜ë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)","slug":"nlp-text-processing","date":"2022-10-19 21:59","title":"[NLP] 2. Text Processing","category":"AI","tags":["NLP","Regex","Tokenization","Collocation","MinimumEditDistance"],"desc":"NLPë¥¼ ìˆ˜í–‰í•  ë•Œ, ìš°ë¦¬ëŠ” sequence of characterë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ì œëŒ€ë¡œ ì•Œì•„ì•¼ ì œëŒ€ë¡œ ëœ ì „ì²˜ë¦¬ì™€ í›„ì²˜ë¦¬ ë“±ì´ ê°€ëŠ¥í•˜ë‹¤. ë”°ë¼ì„œ í•´ë‹¹ chapterì—ì„œëŠ” ì–´ë–»ê²Œ ì›ë³¸ ë¬¸ì/ë‹¨ì–´/ë¬¸ì¥ì„ ì²˜ë¦¬í•˜ëŠ” ë°©ì‹ì„ ë‹¤ë£° ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì œ í†µê³„ì ì¸ ê´€ì ì—ì„œ NLì„ inputìœ¼ë¡œ í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ë°©ë²•ì„ ì°¾ì„ ê²ƒì´ë‹¤. ì´ë¥¼ Language Modelingì´ë¼ê³  í•˜ë©°, ì´ë¥¼ ìœ„í•´ì„œ ë˜ëŠ” ì´ë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•œ ë°©ë²•ë“¤ì„ ì†Œê°œí•  ê²ƒì´ë‹¤.\n\n## Noisy Channel\n\nì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ì›í•˜ëŠ” ê²°ê³¼ê°€ ìˆë‹¤. ê·¸ ê²°ê³¼ë¥¼ ì–»ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” ë§ì„ í•˜ê±°ë‚˜ í–‰ë™ì„ í•˜ê±°ë‚˜ ê¸€ì„ ì“´ë‹¤. ê·¸ ê³¼ì •ì€ ìš°ë¦¬ê°€ ê°–ê³  ì‹¶ì€ Aë¼ëŠ” ê²ƒì„ ì–»ê¸° ìœ„í•´ì„œ Bë¼ëŠ” í–‰ë™ì„ ëŒ€ì‹ í•˜ëŠ” ê²ƒê³¼ ê°™ë‹¤. ì¦‰, ìš°ë¦¬ëŠ” ì´ë¥¼ Aì— noiseê°€ ê»´ì„œ Bë¼ëŠ” ê²ƒì´ ìƒì„±ë˜ì—ˆë‹¤ê³  ìƒê°í•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ìš°ë¦¬ê°€ ê´€ì¸¡í•  ìˆ˜ ìˆëŠ” ê²ƒì€ Bë°–ì— ì—†ëŠ” ê²ƒì´ë‹¤.\n\nì´ëŠ” ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” NLì—ì„œë„ ë™ì¼í•˜ë‹¤. ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²°ê³¼ê°’ Aë¥¼ ì–»ê¸° ìœ„í•´ì„œ ìš°ë¦¬ëŠ” Bë¼ëŠ” ë¬¸ì¥, ìŒì„±ì„ ì œì‹œí•œë‹¤. ê·¸ ê²°ê³¼ê°€ ì›í•˜ëŠ” ê²°ê³¼ë¡œ ë  ìˆ˜ ìˆëŠ” í™•ë¥ ì„ ì–»ì–´ì„œ ìµœì¢… ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ê²ƒì´ ìš°ë¦¬ì˜ ëª©í‘œì¸ ê²ƒì´ë‹¤.\n\nì´ ê³¼ì •ì„ ìˆ˜ì‹ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì•„ì§„ë‹¤.\n\n$$\nP(A|B) = {P(B|A)P(A)\\over{P(B)}}\\quad(\\text{Bayes Rule})\n$$\n\nìš°ë¦¬ê°€ ì–»ê³  ì‹¶ì€ $P(A|B)$ ë¥¼ ì–»ê¸° ìœ„í•´ì„œ, $P(A)$ì™€ $P(B|A)$ ë¥¼ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤. ì´ì— ëŒ€í•œ ë” ìì„¸í•œ ë‚´ìš©ì€ MLì„ ì´í•´í•˜ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤. ì¶”ì²œí•˜ëŠ” Postingì€ [ğŸ”— [ML] Parametric Estimation](/posts/ml-parametric-estimation)ì´ë‹¤.\n\n## Language Modeling\n\nê²°êµ­ ìš°ë¦¬ê°€ ì–»ê³  ì‹¶ì€ ê²ƒì€ íŠ¹ì • ë¬¸ì¥ì˜ í• ë‹¹ëœ í™•ë¥ ì¸ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, Language Modelì€ inputìœ¼ë¡œ word sequenceê³¼ ë“¤ì–´ì™”ì„ ë•Œ, í™•ë¥ ì„ ê³„ì‚°í•˜ëŠ” ê²ƒì´ë‹¤.\nê·¸ë¦¬ê³ , ì´ ê³„ì‚°ì„ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ parameterë¥¼ ì°¾ëŠ” ê³¼ì •ì„ Language Modelingì´ë¼ê³  í•œë‹¤.\n\n## Input(N-gram)\n\nëŒ€ê²Œ ì´ëŸ¬í•œ ëª¨ë¸ì€ ë¬¸ì¥ ë˜ëŠ” wordì˜ ë°°ì—´ì´ ë‹¤ìŒê³¼ ê°™ì´ ì£¼ì–´ì§ˆ ë•Œ, $W = w_{1}\\ w_{2}\\ w_{3}\\ ...\\ w_{n}$ ì•„ë˜ì™€ ê°™ì€ í˜•íƒœë¡œ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n- **Single word probability**  \n  í•˜ë‚˜ì˜ ë‹¨ì–´ì˜ í™•ë¥ ì„ ë‚˜íƒ€ë‚¼ ë•Œ ë‹¨ìˆœí•˜ê²Œ ì•„ë˜ì™€ ê°™ì´ í‘œí˜„í•œë‹¤.  \n  $P(w_{i})\\quad(w_{i} \\in W)$\n- **Sequence of Words probability**  \n  ì¼ë°˜ì ìœ¼ë¡œ sentenceì˜ í™•ë¥ ì„ ë‚˜íƒ€ë‚¼ ë•Œ, ì—¬ëŸ¬ ë¬¸ì¥ì„ í•œêº¼ë²ˆì— ê°€ì§€ëŠ” í™•ë¥ ì´ë¯€ë¡œ ì•„ë˜ì™€ ê°™ì´ í‘œí˜„í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.  \n  $P(W) = P(w_{1}, w_{2}, w_{3}, ..., w_{n})$\n- **single word probability with context**  \n  ì¼ë°˜ì ìœ¼ë¡œ ìš°ë¦¬ëŠ” ì´ì „ì— ì‚¬ìš©í•œ ë‹¨ì–´ê°€ ë¬¸ë§¥ì´ë¼ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, êµ¬ì²´ì ì¸ ë‹¨ì–´ë“¤ ì´í›„ì— íŠ¹ì • ë‹¨ì–´ê°€ ë‚˜ì˜¤ëŠ” ê²ƒì€ ë¬¸ë§¥ì„ ë°˜ì˜í•œ í™•ë¥ ì´ë¼ê³  ìƒê°í•  ìˆ˜ ìˆë‹¤.  \n  $P(W) = P(w_{5}| w_{1}, w_{2}, w_{3}, w_{4})$\n\nìœ„ì˜ ì‹ì„ ë³´ê²Œ ë˜ë©´, ìš°ë¦¬ëŠ” ë‹¤ì‹œ í•œë²ˆ sentenceì˜ í™•ë¥ ì„ ë‹¤ì‹œ ì •ë¦¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\nP(W) = P(w_{1}) \\times P(w_{2}|w_{1}) \\times P(w_{3}|w_{1},w_{2}) \\times ... \\times P(w_{n}| w_{1},w_{2},..., w_{n-1})\n$$\n\nìœ„ì˜ ì‹ì„ ë³´ê²Œë˜ë©´, Wê°€ ì§§ë‹¤ê³  í•˜ë”ë¼ë„ êµ‰ì¥íˆ ë§ì€ ì²˜ë¦¬ê°€ í•„ìš”í•˜ê³ , ì €ì¥ì„ ìœ„í•´ ë§ì€ ê³µê°„ì´ í•„ìš”í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í˜„ì¬ ë‹¨ì–´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë„ˆë¬´ ì˜¤ë˜ëœ ë‹¨ì–´ì— ëŒ€í•´ì„œëŠ” ë¬´ì‹œë¥¼ í•˜ë„ë¡ í•˜ëŠ” ë°©ë²•ì„ ì·¨í•˜ëŠ” ê²ƒì´ë‹¤.(**Markov Chain**) ì´ë¥¼ \"n ë²ˆì§¸ê¹Œì§€ í—ˆë½\"í–ˆì„ ë•Œ, ì´ë¥¼ n-gram ì´ë¼ê³  ë¶€ë¥¸ë‹¤.\n\n$$\np(W) = \\prod_{i=1}^{n}{p(w_{i}|w_{i-n+1},w_{i-n+2},...,w_{i-1})}\n$$\n\nê·¸ë ‡ë‹¤ë©´, n-gramì—ì„œ ì ì ˆí•œ nì´ë€ ë¬´ì—‡ì¼ê¹Œ? ì¼ë°˜ì ìœ¼ë¡œëŠ” nì´ í¬ë‹¤ëŠ” ê²ƒì€ contextë¥¼ ë§ì´ ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆë‹¤ëŠ” ì˜ë¯¸ë¡œ ë°›ì•„ë“¤ì—¬ì§ˆ ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, nì´ í´ìˆ˜ë¡ ì„±ëŠ¥ì˜ ìµœì í™” ê°€ëŠ¥ì„±ì´ ë” ë†’ë‹¤. í•˜ì§€ë§Œ, Vocabularyì˜ ì‚¬ì´ì¦ˆê°€ ì»¤ì§€ëŠ” ê²½ìš°ë¥¼ ì˜ˆë¥¼ ë“¤ì–´ë³´ì. ì—¬ê¸°ì„œëŠ” $|V| = 60$k ë¼ê³  í•´ë³´ì.\n\n| n-gram          | p(w_{i})                         | # of parameters   |\n| :-------------- | :------------------------------- | :---------------- |\n| 0-gram(uniform) | ${1\\over\\vert V\\vert}$           | 1                 |\n| 1-gram(unigram) | $p(w_{i})$                       | $6\\times10^4$     |\n| 2-gram(bigram)  | $p(w_{i}\\vert w_{i-1})$          | $3.6\\times10^9$   |\n| 3-gram(trigram) | $p(w_{i}\\vert w_{i-2}, w_{i-1})$ | $2.16\\times10^14$ |\n\nnì´ ì»¤ì§ˆ ìˆ˜ë¡ ê°€ëŠ¥í•œ ì¡°í•©ì˜ ìˆ˜ëŠ” êµ‰ì¥íˆ ì»¤ì§€ê¸° ë•Œë¬¸ì— ìš°ë¦¬ê°€ ë³´ì§€ ëª»í•˜ëŠ” ê²½ìš°ì˜ ìˆ˜ë„ êµ‰ì¥íˆ ì¦ê°€í•˜ê²Œ ë˜ì–´ dataìì²´ì˜ ë¹ˆë„ê°€ ì ì–´ì§€ëŠ” í˜„ìƒ(sparse)ì´ ë°œìƒí•œë‹¤. ë”°ë¼ì„œ, ëŒ€ê²Œì˜ ê²½ìš° ìµœëŒ€ nì˜ í¬ê¸°ëŠ” 3ì •ë„ë¡œ í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë‹¤.\n\n```plaintext\n ğŸ¤” ì£¼ì˜\n\n ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ê³µí•  ë•Œì—ëŠ” bigramë¶€í„°ëŠ” ë¬¸ì¥ì˜ ì‹œì‘ê³¼ ëì„ í‘œì‹œí•´ì£¼ì–´ì•¼ í•œë‹¤. \n ê·¸ë ‡ì§€ ì•Šìœ¼ë©´, ì²«ë²ˆì§¸ ë¬¸ìì˜ í™•ë¥ ì„ êµ¬í•  ë•Œ, ì´ì „ ë‹¨ì–´ì˜ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ì—†ë‹¤.\n ì •í•´ì§„ ê·œì¹™ì€ ì—†ì§€ë§Œ, ëŒ€ê²Œ <s></s>ë¥¼ ì´ìš©í•œë‹¤.\n ex.  bigram : <s> w1 w2 w3 w4 </s>\n     trigram : <s> <s> w1 w2 w3 w4 </s> </s>\n```\n\n```plaintext\n ğŸ¤” Google N-gram\n\n êµ¬ê¸€ì—ì„œ 2006ë…„ì— N-gramì„ ì§ì ‘ êµ¬ì„±í•œ ê²ƒì´ ìˆë‹¤. \n ì´ 1,024,908,257,229ê°œì˜ ë‹¨ì–´ê°€ ì¡´ì¬í•˜ê³ , 40íšŒ ì´ìƒ ë“±ì¥í•˜ëŠ” 5-gramì´ 1,176,470,663ê°œ ì¡´ì¬í•œë‹¤. \n ì´ Vocabularyì˜ sizeëŠ” 200ë²ˆ ì´í•˜ë¡œ ë“±ì¥í•˜ëŠ” ê²ƒì€ ì œì™¸í•˜ë©´, 13,588,391ê°œì´ë‹¤. \n```\n\n## Estimation\n\nMLì—ì„œëŠ” Estimationì„ ìˆ˜í–‰í•  ë•Œ, continuousí•˜ê²Œ ì¶”ì •í•˜ì˜€ë‹¤. ì¦‰, ë³´ì§€ ëª»í•œ ë°ì´í„°ì— ëŒ€í•œ ì²˜ë¦¬ë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ continuousí•œ ë¶„í¬ì˜ parameterë§Œ ì¶”ì •í•˜ë©´ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, NLPì—ì„œëŠ” ë‹¤ë¥´ë‹¤. NLë¥¼ continuousí•˜ê²Œ í‘œí˜„í•  ë§ˆë•…í•œ ë°©ë²•ì´ ì—†ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” ê²°êµ­ ëª¨ë“  í™•ë¥ ì„ discreteí•˜ê²Œ êµ¬í•´ì•¼ í•œë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” íŠ¹ì • ë‹¨ì–´ì˜ í™•ë¥ ì„ êµ¬í•˜ëŠ” ë°©ë²•ì€ ë‹¨ í•˜ë‚˜ê°€ ëœë‹¤.\n\n$$\n|T| = \\text{count of observed tokens}\n$$\n$$\nc(w_{i}) = \\text{count of observed } w_{i}\n$$\n$$\n\\begin{align*}\n&P(w_{i}) = {{c(w_{i})}\\over{|T|}} \\\\\n&P(w_{i}| w_{i-1}) = {{c(w_{i-1}, w_{i})}\\over{c(w_{i-1})}} \\\\\n&P(w_{i}| w_{i-2}, w_{i-1}) = {{c(w_{i-2}, w_{i-1}, w_{i})}\\over{c(w_{i-2}, w_{i-1})}} \\\\\n\\end{align*}\n$$\n\nì´ë•Œ, ë°˜ë“œì‹œ sequenceì˜ ìˆœì„œë¥¼ ìœ ì˜í•˜ë„ë¡ í•˜ì. ìˆœì„œê°€ ë°”ë€Œë©´ ë‹¤ë¥¸ ì¢…ë¥˜ì´ë‹¤.\n\n> **Small Example**\n\në°ì´í„°ê°€ ë‹¤ìŒê³¼ ê°™ì´ ì£¼ì–´ì§„ë‹¤ê³  í•˜ì.\n\n```plaintext\n He can buy the can of soda.\n```\n\nì´ë•Œ ê° n-gramì„ ì´ìš©í•œ modelì˜ í™•ë¥ ë“¤ì„ ì‚´í´ë³´ì.\n\n| model    | probability                                                                                                                                                     |\n| :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| uni-gram | $p(He)=p(buy)=p(the)=p(of)=p(soda)=p(.) = 0.125$<br /> $p(can)=0.25$                                                                                            |\n| bi-gram  | $p(He\\vert <s>)=p(can\\vert He)=p(the\\vert buy)=p(can\\vert the)=p(soda\\vert of)=p(.\\vert sode) =p(</s> \\vert .) = 1$<br /> $p(buy\\vert can)=p(of\\vert can)= 0.5$ |\n| tri-gram | $p(He\\vert <s>, <s>)=p(can\\vert <s>, He)=p(the\\vert He, buy)=...=p(</s>\\vert ., </s>) =1$                                                                       |\n\n\n## Evaluation\n\ní‰ê°€í•  ë•ŒëŠ” MLê³¼ ê²°êµ­ì€ ë™ì¼í•˜ë‹¤. ìš°ë¦¬ê°€ í™•ë¥ ë¶„í¬ë¥¼ êµ¬í•  ë•Œ, ì‚¬ìš©í•œ ë°ì´í„° ì™¸ì— ë°ì´í„°ë¥¼ ì´ìš©í•´ì„œ ì˜ ì ìš©ì´ ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, wordì˜ ê°¯ìˆ˜ì™€ ë°ì´í„°ì˜ ìˆ˜ê°€ êµ‰ì¥íˆ ë§ì€ NLì˜ íŠ¹ì„±ìƒ ì´ Evaluation ë‹¨ê³„ì—ë§Œ êµ‰ì¥íˆ ë§ì€ ì‹œê°„ì„ ì†Œëª¨í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì¦‰ê°ì ì¸ í‰ê°€ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ì²™ë„ê°€ ìˆë‹¤.\n\n> **Perplexity**\n\ntrain setì„ í†µí•´ í•™ìŠµì„ í•˜ê³ , test setì„ í†µí•´ì„œ í‰ê°€ë¥¼ ìˆ˜í–‰í•  ë•Œ, train setì„ í†µí•´ êµ¬í•œ í™•ë¥ ì´ ì‹¤ì œ test setì—ì„œ ì–´ëŠì •ë„ì˜ Entropyë¥¼ ë°œìƒì‹œí‚¤ëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ë‹¤. ì›ë˜ì˜ ì‹ì€ \n$PP = 2^{H}$ì´ì§€ë§Œ, ì´ë¥¼ ë³€í˜•í•˜ì—¬ ë‹¤ìŒê³¼ ê°™ì´ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\nPP(W) &= \\sqrt[N]{1 \\over P(w_1, w_2, ..., w_N)} \\\\\n&= \\sqrt[N]{\\prod_{i=1}^{N}{P(w_i|w_{i-n+1}, w_{i-n+2}, ..., w_{i-1})}}\n\\end{align*}\n$$\n\nì´ë¥¼ í†µí•´ì„œ, ì‹¤ì œë¡œ í•´ë‹¹ ë¬¸ì œê°€ ë„ˆë¬´ ì–´ë µì§€ëŠ” ì•Šì€ì§€, ì„ íƒí•œ modelì´ ì˜ëª»ë˜ì§€ëŠ” ì•Šì•˜ëŠ”ì§€ë¥¼ íŒë‹¨í•œë‹¤.\n\n| model    | probability                                                                                                                                                     | entropy |\n| :------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------ |\n| uni-gram | $p(He)=p(buy)=p(the)=p(of)=p(soda)=p(.) = 0.125$<br /> $p(can)=0.25$                                                                                            | 2.75    |\n| bi-gram  | $p(He\\vert <s>)=p(can\\vert He)=p(the\\vert buy)=p(can\\vert the)=p(soda\\vert of)=p(.\\vert sode) =p(</s> \\vert .) = 1$<br /> $p(buy\\vert can)=p(of\\vert can)= 0.5$ | 0.25    |\n| tri-gram | $p(He\\vert <s>, <s>)=p(can\\vert <s>, He)=p(the\\vert He, buy)=...=p(</s>\\vert ., </s>) =1$                                                                       | 0       |\n\nìœ„ì˜ ì˜ˆì‹œë¥¼ ê°€ì ¸ì™€ì„œ ë´ë³´ì. ë¬¼ë¡  ë™ì¼í•œ datasetì—ì„œ perplexityë¥¼ ì¸¡ì •í•˜ê¸°ëŠ” í–ˆì§€ë§Œ, nì´ ì»¤ì§ˆ ìˆ˜ë¡ ì ì  entropyê°€ ì‘ì•„ì§€ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ëŸ° dataê°€ ì¢‹ì€ ê±¸ê¹Œ? ì´ëŠ” ì¢‹ì€ ê²Œ ì•„ë‹ˆë‹¤. ì™œëƒí•˜ë©´, í•´ë‹¹ datasetì—ì„œë§Œ ì˜ ì‘ë™í•˜ë„ë¡ ë˜ì–´ìˆê¸° ë•Œë¬¸ì´ë‹¤. ì¼ëª… **overfitting**ì´ë‹¤.\n\n## Smooting\n\nìœ„ì—ì„œ ë§í•œ overfittingì„ ì–´ëŠì •ë„ í•´ì†Œí•  ë¿ë§Œ ì•„ë‹ˆë¼ ì •ë§ í° ë¬¸ì œê°€ ë  ìˆ˜ ìˆëŠ” probabilityê°€ 0ì´ ë˜ëŠ” ë¬¸ì œ(ìš°ë¦¬ê°€ trainsetì„ í†µí•´ í•™ìŠµí•œ í™•ë¥  ë¶„í¬ì—ì„œ testsetì— ë“¤ì–´ì˜¤ëŠ” ë°ì´í„°ì— í•´ë‹¹í•˜ëŠ” í™•ë¥ ê°’ì´ ì—†ì„ ë•Œ, ì¦‰ í•´ë‹¹ í™•ë¥ ì´ 0ì¼ë•Œ)ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” smoothingì´ í•„ìˆ˜ì ì´ë‹¤. probabilityê°€ 0ì´ ëœë‹¤ëŠ” ê²ƒì€ í›„ì— ìœ„ì—ì„œ êµ¬í•œ í™•ë¥ ë¡œ Predictionì„ í•  ë•Œ ëª¨ë“  ì˜ˆì¸¡ì„ ë§ì¹˜ëŠ” ìš”ì¸ì´ ëœë‹¤. ì™œëƒí•˜ë©´, ì¶”ì •í™•ë¥ ì˜ ìµœì  Entropyë¥¼ ì˜ë¯¸í•˜ëŠ” Cross Entropyë¥¼ $\\infin$ë¡œ ë§Œë“¤ê¸° ë•Œë¬¸ì´ë‹¤. (ìµœì  Entropyê°€ ë¬´í•œëŒ€ë¼ëŠ” ê²ƒì€ ì¶”ì •ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.)\n\në”°ë¼ì„œ, ìš°ë¦¬ëŠ” probabilityê°€ 0ì´ ë˜ì§€ ì•Šê²Œ í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ ê¸°ì¡´ì˜ í™•ë¥ ì˜ ì¼ë¶€ë¥¼ ë‚˜ëˆ„ì–´ì£¼ë„ë¡ í•˜ëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤. ì´ê²ƒì´ smoothingì´ë‹¤.\n\nì´ë•Œ ë°˜ë“œì‹œ ìœ ì˜í•  ì ì€ smoothingì„ í•˜ê±´ ì•ˆí•˜ê±´ ê° í™•ë¥ ì˜ ì´í•©ì€ 1ì´ ë˜ë„ë¡ ë³´ì¥í•´ì•¼ í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n$$\n\\sum_{w \\in \\Omega}p(w) = 1\n$$\n\nëŒ€ëµ 6ê°€ì§€ì˜ ëŒ€í‘œì ì¸ smoothing ë°©ì‹ë“¤ì„ ì†Œê°œí•˜ê² ë‹¤.\n\n> <mark>**1. Add-1(Laplace)**</mark>\n\nê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì˜ smoothing ë°©ë²•ì´ì§€ë§Œ, ì‹¤ìš©ì ì¸ë©´ì€ ë‹¤ì†Œ ë–¨ì–´ì§€ëŠ” ë°©ë²•ì´ë‹¤. ì•„ì´ë””ì–´ëŠ” ê°„ë‹¨í•˜ë‹¤. predictionì„ ìˆ˜í–‰í•  ë•Œ, í˜„ì¬ ë“¤ì–´ì˜¨ inputê¹Œì§€ í¬í•¨í•˜ì—¬ ë§Œë“  $|V|$ë¥¼ ë¶„ëª¨ì— ë”í•˜ê³ , ë¶„ìì— 1ì„ ë”í•´ì£¼ëŠ” ë°©ë²•ì´ë‹¤. ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´, ì„¤ì‚¬ countê°€ 0ì´ ë”ë¼ë„ í™•ë¥ ì´ 0ì´ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤.\n\n$$\np(w) = {X \\over Y} \\rArr p^{\\prime}(w) = {X + 1 \\over Y + |V|}\n$$\n\nì—¬ê¸°ì„œ, $|V|$ ê°’ì´ ì •ë§ í—·ê°ˆë ¸ëŠ”ë°, ì•„ë¬´ë„ ì˜ ì„¤ëª…ì„ ì•ˆí•˜ëŠ” ê²ƒ ê°™ì•„ì„œ ì§šê³  ë„˜ì–´ê°€ë©´, ìš°ë¦¬ê°€ í™•ë¥ ê°’ì„ ì–»ê¸° ìœ„í•´ì„œ ì‚¬ìš©í–ˆë˜ datasetê³¼ í˜„ì¬ predictionì„ í•˜ê¸° ìœ„í•´ì„œ ë“¤ì–´ì˜¨ input ë‘˜ì—ì„œ ë°œìƒí•œ ëª¨ë“  uniqueí•œ ë‹¨ì–´ì˜ ìˆ˜ë¥¼ ì˜ë¯¸í•œë‹¤. (# of vocabulary)\n\nê·¸ë ‡ê²Œ í•´ì•¼ë§Œ $\\sum_{w \\in \\Omega}p(w) = 1$ì„ ë§Œì¡±í•˜ëŠ” ê°’ì´ ë‚˜ì˜¨ë‹¤.\n\në”°ë¼ì„œ, ì´ë¥¼ ê° ê°ì˜ n-gramì— ëŒ€ì…í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n| n    | $p(w_{i})$                                                 | $p^{\\prime}(w_{i})$                                                            |\n| :--- | :--------------------------------------------------------- | :----------------------------------------------------------------------------- |\n| $1$  | $c(w_{i}) \\over \\vert T \\vert$                             | $c(w_{i}) + 1 \\over \\vert T \\vert + \\vert V \\vert$                             |\n| $2$  | ${{c(w_{i-1}, w_{i})}\\over{c(w_{i-1})}}$                   | ${{c(w_{i-1}, w_{i}) + 1}\\over{c(w_{i-1})} + \\vert V \\vert} $                  |\n| $3$  | ${{c(w_{i-2}, w_{i-1}, w_{i})}\\over{c(w_{i-2}, w_{i-1})}}$ | ${{c(w_{i-2}, w_{i-1}, w_{i}) + 1}\\over{c(w_{i-2}, w_{i-1})} + \\vert V \\vert}$ |\n\n> <mark>**2. Add-k**</mark>\n\n1ì´ë¼ëŠ” ìˆ«ìê°€ ê²½ìš°ì— ë”°ë¼ì„œëŠ” êµ‰ì¥íˆ í° ì˜í–¥ì„ ì¤„ ë•Œê°€ ìˆë‹¤. íŠ¹íˆ ê¸°ì¡´ ë°ì´í„°ì˜ ìˆ˜ê°€ ì ì€ ê²½ìš°ì— ë”ìš± ê·¸ë ‡ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ 1ë³´ë‹¤ ì‘ì€ ì„ì˜ì˜ ê°’(k)ì„ ì“°ëŠ” ë°©ë²•ì´ë‹¤.\n\n$$\np(w) = {X \\over Y} \\rArr p^{\\prime}(w) = {X + 1 \\over Y + k|V|}\n$$\n\ní•˜ì§€ë§Œ, ìœ„ì™€ ê°™ì€ ë°©ì‹ì€ ê²°êµ­ ì–´ë–¤ í™•ë¥  ê°’ì´ë“ ì§€ ë¶„ìì— 1ì„ ë”í•˜ê¸° ë•Œë¬¸ì— ë¶ˆí‰ë“±í•˜ê²Œ ê°’ì„ ë‚˜ëˆ ì¤€ë‹¤ê³  í•  ìˆ˜ ìˆë‹¤. ì™œëƒí•˜ë©´, ì• ì´ˆì— count(ë¶„ì)ê°€ í° ë°ì´í„°ì—ê²Œ 1ì€ ë³„ë¡œ ì˜í–¥ì„ ì•ˆì£¼ê² ì§€ë§Œ, ë¶„ìê°€ ì²˜ìŒë¶€í„° ì‘ì•˜ë˜ ê²½ìš°ì—ëŠ” ì´ë¡œ ì¸í•´ì„œ ë°›ëŠ” ì˜í–¥ì´ êµ‰ì¥íˆ í¬ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì´ëŸ¬í•œ í•œê³„ì ì„ ê·¹ë³µí•  ìˆ˜ ìˆëŠ” ë°©ë²•ë“¤ì´ ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ë“¤ì´ë‹¤.\n\n> <mark>**3.Good Turing**</mark>\n\nì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ìš°ë¦¬ëŠ” ìƒˆë¡œìš´ featureì˜ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì•¼ í•œë‹¤. ë°”ë¡œ wordì˜ frequencyì˜ frequencyì´ë‹¤. \n\n$$\nN_{k} = \\sum_{i=1}^{n}1[c(w_{i}) = k]\n$$\n\nì•„ë§ˆ ì˜ˆì‹œë¥¼ ë´ì•¼ ì´í•´ê°€ ë¹ ë¥¼í…Œë‹ˆ í•˜ë‚˜ì˜ ì˜ˆì‹œë¥¼ ë³´ì.\n\n```plaintext\n sam I am I am sam I do not eat\n```\n\nì´ ê²½ìš° ìš°ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ countë¥¼ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\n  &c(I) &=\\ 3 \\\\\n  &c(sam) &=\\ 2\\\\\n  &c(am) &=\\ 2\\\\\n  &c(do) &=\\ 1\\\\\n  &c(not) &=\\ 1\\\\\n  &c(eat) &=\\ 1\\\\\n\\end{align*}\n\\quad\\rArr\\quad\n\\begin{align*}\n  & N_{1} = 3 \\\\\n  & N_{2} = 2 \\\\\n  & N_{3} = 1\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ Good Turingì€ í•œ ë²ˆë„ ì•ˆë³¸ ë°ì´í„°ì—ê²ŒëŠ” í•œ ë²ˆë§Œ ë³´ëŠ” ê²½ìš°ì˜ ìˆ˜ë¥¼ ì „ì²´ ê²½ìš°ì˜ ìˆ˜ë¡œ ë‚˜ëˆˆê°’ë§Œí¼ì˜ í™•ë¥ ì„ ë‚˜ëˆ„ì–´ì£¼ê³ , ê¸°ì¡´ ë°ì´í„°ë“¤ì—ê²ŒëŠ” laplaceì²˜ëŸ¼ 1ì„ ë”í•´ì£¼ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ë¹„ë¡€í•˜ëŠ” ë§Œí¼ì„ ê³±í•´ì£¼ì–´ ì ì ˆí•œ í™•ë¥ ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆê²Œí•˜ì˜€ë‹¤.\n\në”°ë¼ì„œ, ì‹ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n$$\np(w_{i}) = {(c(w_{i})+1)N_{c(w_{i})+1}\\over{N_{c(w_{i})}}} \\times {1\\over |T|},\\quad (N_{0} = 1)\n$$\n\nëŒ€ê²Œ ${(c(w_{i})+1)N_{c(w_{i})+1}\\over{N_{c(w_{i})}}}$ì´ ë¶€ë¶„ì„ $c^{*}$ë¼ê³ ë„ ë¶€ë¥¸ë‹¤.\n\n> <mark>**4. Kneser-Ney**</mark>\n\nê°€ì¥ ë„ë¦¬ ì“°ì´ëŠ” Smoothing ë°©ì‹ìœ¼ë¡œ ê¸°ì–µí•´ë‘ëŠ” ê²ƒì´ ì¢‹ë‹¤. ì´ë¥¼ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì €, Absolute Discountingì„ ë¨¼ì € ì´í•´í•´ì•¼ í•œë‹¤.  \nGood-turing ë°©ì‹ì„ ì‚¬ìš©í–ˆì„ ë•Œ $c$ì™€ $c^{*}$ì‚¬ì´ì— ì°¨ì´ê°€ ê²½í—˜ì ìœ¼ë¡œ íŠ¹ì • ìƒìˆ˜ë§Œí¼ì”© ì°¨ì´ê°€ ë‚œë‹¤ëŠ” ê²ƒì„ ë°œê²¬í•˜ì—¬, \n\n$$\nc^{*} = c - d\n$$\n\nChurchê³¼ Galeì€ ì´ë¥¼ Absolute Discounting í™•ë¥ ì´ë¼ë©° ë‹¤ìŒ ì‹ì„ ì œì‹œí•œë‹¤.\n\n$$\nP(w_{i}|w_{i-1}) = {c(w_{i-1}, w_{i}) -d \\over c(w_{i-1})} + \\lambda(w_{i-1})P(w) \n$$\n\nì—¬ê¸°ì„œ ë’·ì— ë¶€ë¶„ $\\lambda(w_{i-1})P(w)$ì€ discountingìœ¼ë¡œ ë°œìƒí•œ ì˜¤ì°¨ë¥¼ ë§¤ê¾¸ê¸° ìœ„í•œ ê°’ì´ë‹¤.\n\nì—¬ê¸°ì„œ Kneser-Ney problemì€ ë” ë„“ì€ ë²”ìœ„ë¡œ í™•ì¥ì‹œí‚¬ ìˆ˜ ìˆëŠ” ë²”ìœ„ë¡œ í™•ì¥ì‹œí‚¨ ê²ƒì´ë‹¤. ê¸°ì¡´ì—ëŠ” bigramìœ¼ë¡œ ì œí•œë˜ì–´ ìˆë˜ Absolute Discountingì˜ ì‹ì€ ë‹¤ìŒê³¼ ê°™ì´ ë³€í˜•ëœë‹¤.\n\n$$\nP_{KN}(w_{i}|w_{i-n+1}^{i-1}) = {\\max(c(w_{i-1}, w_{i}) -d, 0) \\over c(w_{i-n+1}^{i-1})} + \\lambda(w_{i-n+1}^{i-1})P_{KN}(w_{i}|w_{i-n+2}^{i-1}) \n$$\n\n(ìœ„ì˜ ì‹ì— ëŒ€í•´ì„œ ì •í™•í•˜ê²Œ ì´í•´ë¥¼ í•˜ì§€ ì•Šì•˜ì§€ë§Œ, ê·¸ë ‡êµ¬ë‚˜ í•˜ê³  ë„˜ì–´ê°€ë„ ì¶©ë¶„í•  ê²ƒ ê°™ë‹¤.)\n\n> <mark>**5. Backoff & Interpolation**</mark>\n\nìƒí™©ì— ë”°ë¼ì„œ unigram, bigram, trigramì„ ê°€ì¤‘ì¹˜ë§Œí¼ ë”í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ì´ë‹¤. ê²°êµ­ n-gramì—ì„œ nì´ ì‘ì•„ì§ˆ ìˆ˜ë¡ detailì„ ì‹ ê²½ì“¸ ìˆ˜ ì—†ì§€ë§Œ, ì‹ ë¢°ë„ ìì²´ëŠ” ëŠ˜ì–´ë‚  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ì ì ˆíˆ ì„ì–´ì“°ë©´ ì¢‹ì€ ê²°ê³¼ê°€ ë‚˜ì˜¨ë‹¤ëŠ” ì´ë¡ ì´ë‹¤. í•˜ì§€ë§Œ, ì–´ë–¤ ê²ƒì„ ë” ì¤‘ì ìœ¼ë¡œ ì§ì ‘ ì •í•´ì£¼ì–´ì•¼ í•œë‹¤. \n\n$$\np^{\\prime}(w_{i}|w_{i-2}, w_{i-1}) = \\lambda_{3}p(w_{i}|w_{i-2}, w_{i-1}) + \\lambda_{2}p(w_{i}|w_{i-1}) + \\lambda_{1}p(w_{i}) + {\\lambda_{0}\\over|V|}\n$$\n\nì´ë¥¼ ì •í•  ë•ŒëŠ” ëŒ€ê²Œ held-out dataë¥¼ í™œìš©í•´ì„œ êµ¬í•œë‹¤.(validation setì´ë¼ê³  ë¶€ë¥¸ë‹¤.) ì¦‰, ì „ì²´ corpusë¥¼ (train, validation, test)ë¡œ ì ì ˆíˆ ë‚˜ëˆ„ì–´ ì“°ë¼ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ì„±ëŠ¥ì„ ì¸¡ì •í•  ë•ŒëŠ” testsetì„ ì“°ê³ , $\\lambda$ë¥¼ ì¶”ì •í•  ë•Œì—ëŠ” validation(heldout)setì„ ì‚¬ìš©í•˜ë¼ëŠ” ê²ƒì´ë‹¤.\n\n\n## Word Class\n\nSmoothing ë°©ì‹ì„ ì´ìš©í•´ì„œ unseen dataë¥¼ ì²˜ë¦¬í•´ì£¼ì—ˆëŠ”ë° ì¢€ ë” íš¨ê³¼ì ìœ¼ë¡œ ì´ë¥¼ ì²˜ë¦¬í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤í•œ ê²ƒì´ë‹¤. classë‹¨ìœ„ë¡œ wordë¥¼ groupingí•˜ëŠ” ê²ƒì´ë‹¤. ê·¸ë˜ì„œ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ë‹¨ì–´ì˜€ë‹¤ê³  í•˜ë”ë¼ë„ íŠ¹ì • groupì— ì†í•œë‹¤ë©´, ì´ë¥¼ í™œìš©í•´ì„œ ì–´ëŠì •ë„ í™•ë¥ ì„ ë¶€ì—¬í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ ë°©ì‹ì„ í™œìš©í•˜ë©´, ì‹¤ì œë¡œ ë³´ì§€ ì•Šì€ ë°ì´í„°ì— ëŒ€í•´ì„œë„ í˜„ì‹¤ì ì¸ ì¶”ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ detailì— ëŒ€í•œ ì„±ëŠ¥ì€ ê°ì†Œí•  ìˆ˜ ìˆë‹¤.\n\n$$\np(w_{i}|w_{i-1}) \\rArr p(w_{i}|c_{i-1}) ={ c(c_{i}, w_{i}) \\over c(c_{i-1}) }\n$$\n\nìœ„ì˜ ì‹ì„ ë³´ë©´, ì´ì „ ë‹¨ì–´ì˜ contextë¥¼ ë³´ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ ì´ì œëŠ” classë¥¼ ë³´ê³  ë‹¤ìŒ ë‹¨ì–´ë¥¼ probabilityë¥¼ ê³„ì‚°í•˜ë„ë¡ ë°”ë€ ê²ƒì´ë‹¤. ê·¸ë¦¬ê³  ì´ í™•ë¥ ì€ classë‚´ë¶€ì—ì„œ í•´ë‹¹ ë‹¨ì–´ì˜ ë¹ˆë„ë¥¼ ì´ì „ classì˜ ë¹ˆë„ë¡œ ë‚˜ëˆ„ì—ˆë‹¤ê³  ë³´ë©´ ë˜ê² ë‹¤.\n\n$$\np(w_{i}|c_{i-1}) = p(w_{i}|c_{i}) \\times p(c_{i}|h_{i})\n$$\n\nì¦‰, class ë‹¨ìœ„ë¡œ ë‹¨ì–´ë¥¼ ë¬¶ê³  classì—ì„œ ë‹¨ì–´ì˜ ë°œìƒ í™•ë¥ ì— classì—ì„œì˜ n-gramì„ ê³±í•œ ê°’ì´ ë˜ëŠ” ê²ƒì´ë‹¤. ì¼ë°˜ì ì¸ Bayes Decison Ruleì— ê¸°ë°˜í•˜ì—¬ ì„ íƒí•œë‹¤ê³  ë³´ë©´ ë˜ê² ë‹¤.\n\n## Example. Spelling Correction\n\nì—¬íƒœê¹Œì§€ ë°°ìš´ ë‚´ìš©ì„ í™œìš©í•˜ì—¬ Spelling ì˜¤ë¥˜ë¥¼ ì •ì •í•´ì£¼ëŠ” applicationì„ ì œì‘í•œë‹¤ê³  í•´ë³´ì. ë¨¼ì €, Spelling Errorì˜ ì¢…ë¥˜ë¶€í„° ì•Œì•„ë³´ë„ë¡ í•˜ì.\n\n- **Non word Error**  \n  ì˜ëª»ëœ spellingì— ì˜í•´ì„œ ì „í˜€ ëœ»ì´ ì—†ëŠ” ë‹¨ì–´ê°€ ë§Œë“¤ì–´ì§„ ê²½ìš°ì´ë‹¤.  \n  í•´ê²°ì„ ìœ„í•´ì„œëŠ” ì‚¬ì „ì—ì„œ ìœ ì‚¬í•œ ë‹¨ì–´ë¥¼ ì°¾ì•„ì„œ ê°€ì¥ ê°€ëŠ¥ì„±ì´ ë†’ì€ ê²ƒ ë˜ëŠ” ì´ì „ì— ë°°ì› ë˜ shortest edit distanceë¥¼ ì°¾ëŠ” ê²ƒì´ë‹¤.\n- **Real word Error**  \n  ì˜ëª»ëœ spelling ë˜ëŠ” ìœ ì‚¬í•œ ë°œìŒ ë•Œë¬¸ì— ëœ»ì´ ìˆëŠ” ë‹¨ì–´ê°€ ë§Œë“¤ì–´ì¡Œì§€ë§Œ, ì˜¤ë¥˜ê°€ ì˜ì‹¬ë˜ëŠ” ê²½ìš°ì´ë‹¤.  \n  í•´ê²°ì±…ì€ ë¹„ìŠ·í•œ ë°œìŒ ë˜ëŠ” spellingì˜ ëª¨ë“  ë‹¨ì–´ë¥¼ ì°¾ì•„ì„œ í•´ë‹¹ ë‹¨ì–´ì™€ í•¨ê»˜ language modelì— ë„£ì–´ì„œ ê°€ì¥ ë†’ì€ ê°€ëŠ¥ì„±ì„ ê°€ì§€ëŠ” ê°’ì„ ì°¾ëŠ” ê²ƒì´ë‹¤.\n\në¨¼ì €, **Non Word Error** ê°™ì€ ê²½ìš°ëŠ” ì˜¤íƒ€ ë°ì´í„°ì— ì›ë˜ ì“°ë ¤ê³  í–ˆë˜ ê°’ì„ labelingí•´ì„œ ëª¨ì•„ë‘ê³  ë‹¤ìŒ ê°’ì„ í•™ìŠµì‹œí‚¤ëŠ” ê²ƒì´ë‹¤. \n(*x=ì˜¤íƒ€ë°ì´í„°, w=ì‚¬ì „ì—ìˆëŠ”ë‹¨ì–´)\n- $P(x|w)$ = xê°€ wì¼ ê°€ëŠ¥ì„±\n- $p(w)$ = wì˜ í™•ë¥ \n\nê·¸ë¦¬ê³  ë‚˜ì„œ, ë‹¤ìŒì„ ì‹¤í–‰ì‹œì¼œì„œ ê°€ì¥ ì ì ˆí•œ $\\hat{w}$ë¥¼ ì°¾ìœ¼ë©´ ëœë‹¤.\n$$\n\\begin{align*}\n\\hat{w} &= \\argmax_{w \\in V}P(w|x) \\\\\n&= \\argmax_{w \\in V}{P(x|w)P(w)}\n\\end{align*}\n$$\n\n**Real Word Error**ì˜ ê²½ìš°ì—ëŠ” ê²°êµ­ ì´ì „ ë‹¨ì–´ sequenceë¥¼ í™œìš©í•´ì•¼ í•œë‹¤. ì „ì²´ corpusë¥¼ í•™ìŠµí•´ì„œ tri-gramì„ ì¶”ì¶œí•´ë†“ê³ , ë²ˆê°ˆì•„ê°€ë©´ì„œ í›„ë³´ ë‹¨ì–´ë“¤ì„ ì§‘ì–´ë„£ì–´ì„œ ê°€ì¥ ë†’ì€ í™•ë¥ ì´ ë‚˜ì˜¤ëŠ” ë‹¨ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, í›„ë³´ ë‹¨ì–´ê°€ ë‹¤ìŒê³¼ ê°™ì´ ì •í•´ì¡Œë‹¤ê³  í•˜ì. ($\\bold{w}_{3} = {w_3^{(1)}, w_3^{(2)}, w_3^{(3)}, ...}$) ì´ë•Œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” wëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\hat{w}_{3} = \\argmax_{w_{3}^{(i)} \\in \\bold{w}_{3}} P(w_{3}^{(i)}| w_{1}, w_{2}) \n$$\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)","slug":"nlp-language-modeling","date":"2022-10-21 12:15","title":"[NLP] 3. Language Modeling","category":"AI","tags":["NLP","NoisyChannel","Ngram","LanguageModeling","Smoothing","WordClass"],"desc":"ì´ì œ í†µê³„ì ì¸ ê´€ì ì—ì„œ NLì„ inputìœ¼ë¡œ í•˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•  ë°©ë²•ì„ ì°¾ì„ ê²ƒì´ë‹¤. ì´ë¥¼ Language Modelingì´ë¼ê³  í•˜ë©°, ì´ë¥¼ ìœ„í•´ì„œ ë˜ëŠ” ì´ë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ í•˜ê¸° ìœ„í•œ ë°©ë²•ë“¤ì„ ì†Œê°œí•  ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì „ Postingì—ì„œëŠ” sentenceì˜ ì ì ˆì„±ì„ í™•ì¸í•œë‹¤ë“ ì§€ ë‹¤ìŒ ë‹¨ì–´ë¥¼ ìœ ì¶”í•œë‹¤ë“ ì§€ ì˜¤íƒ€ë¥¼ ì •ì •í•˜ëŠ” ë“±ì— í•„ìš”í•œ ê¸°ë³¸ì ì¸ Language Modeling ë°©ì‹ì„ ì‚´í´ë³´ì•˜ë‹¤. ì´ë²ˆì—ëŠ” ì‹¤ì œë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì˜ˆì œì¸ Classificationì„ Language Modelì„ ì´ìš©í•˜ì—¬ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë°°ìš°ë©°, ì´ë¥¼ ì§ì ‘ Spam Filteringì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì‚´í´ë³¸ë‹¤. ì£¼ì˜í• ì ì€ í•´ë‹¹ Postingì€ Naive Bayes ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” Classificationì´ë‹¤. ë” ë‹¤ì–‘í•œ ë°©ë²•ë¡ ì„ ì›í•œë‹¤ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ë„ì›€ì„ ì£¼ê¸° ì–´ë µë‹¤. ë§Œì•½ ì§€ê¸ˆ ë§ì´ ì´í•´ê°€ ì•ˆëœë‹¤ë©´, ê·¸ëƒ¥ ê³„ì† ì½ìœ¼ì‹œë©´ ë˜ê² ë‹¤.\n\n## Classification\n\nê¸°ë³¸ì ìœ¼ë¡œ inputì´ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ ì•Œë§ì€ ë¶„ë¥˜ë¡œ ë‚˜ëˆ„ëŠ” ê¸°ëŠ¥ì„ í•˜ëŠ” ê²ƒì´ë‹¤. ë‹¨ìˆœíˆ ì‚¬ì „ ì§€ì‹ì— ê¸°ë°˜í•´ì„œ ì´ë¥¼ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆì§€ë§Œ, Language Modelingì„ ì´ìš©í•˜ë©´, ë” ì •í™•ë„ ë†’ì€ ë¶„ë¥˜ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\nì¼ë°˜ì ìœ¼ë¡œ ë§ì´ ì‚¬ìš©í•˜ëŠ” Classification ë„êµ¬ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n\n1. Naive Bayes\n2. Hidden Markov Model(HMM)\n3. Maximum Entropy Model(MaxEnt)\n   1. Logistic Regression\n   2. Support Vector Machine\n   3. Neural Network(Deep Learning)\n4. K Nearest Neighbors\n\ní•´ë‹¹ Postingì—ì„œëŠ” **Naive Bayes Classifier**ë¥¼ ì´ìš©í•œ ë¶„ë¥˜ë¥¼ ìˆ˜í–‰í•  ê²ƒì´ë‹¤. 3ë²ˆ ë°©ë²•ì€ ê¸°ë³¸ì ìœ¼ë¡œ ê° ë‹¨ì–´ë¥¼ Random Variableë¡œ ì¹˜í™˜í•´ì„œ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•œë° ì´ëŠ” í›„ì— ë” ìì„¸íˆ ë‹¤ë£° ê²ƒì´ê¸° ë•Œë¬¸ì— ì—¬ê¸°ì„œëŠ” ê¸°ë³¸ì ì¸ Classifierë¥¼ í™œìš©í•˜ëŠ” ë°©ë²•ì„ ë°°ìš°ê³  í›„ì— ê°€ì„œ wordë¥¼ vectorë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •ì„ ê±°ì¹œ í›„ì— ë” í›Œë¥­í•œ ê¸°ìˆ ë“¤ì„ í™œìš©í•´ë³´ê² ë‹¤.  \në”°ë¼ì„œ, ì•ìœ¼ë¡œ 3ê°œì˜ Posting ë™ì•ˆì€ Naive Bayes, HMM, MaxEnt ë°©ì‹ì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ê²ƒì´ê³ , ê·¸ í›„ì—ëŠ” wordë¥¼ vector ë°ì´í„°ë¡œ ì¹˜í™˜í•˜ì—¬ ì²˜ë¦¬ë¥¼ í•˜ëŠ” ë°©ì‹ì„ ë°°ì›Œë³¼ ê²ƒì´ë‹¤.\n\nê¸°ë³¸ì ìœ¼ë¡œ Classificationì€ ë°ì´í„°ê°€ ì£¼ì–´ì¡Œì„ ë•Œ, í•´ë‹¹ ë°ì´í„°ê°€ íŠ¹ì • classì— ì†í•  í™•ë¥ ì„ ì œì‹œí•˜ëŠ” ê²ƒì´ë‹¤. ë”°ë¼ì„œ, íŠ¹ì • classì—ì„œ í•´ë‹¹ ë°ì´í„°ê°€ ì–¼ë§ˆë‚˜ ìì£¼ ë°œìƒë˜ëŠ”ì§€ì™€ ì‹¤ì œë¡œ í•´ë‹¹ classì˜ ë¹ˆë„ê°€ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤.\n\nì´ë¥¼ ìˆ˜ì‹ì ìœ¼ë¡œ í‘œí˜„í•˜ê¸° ìœ„í•´ì„œ ë‹¤ìŒ ë³€ìˆ˜ë“¤ì„ ë¨¼ì € ì‚´í´ë³´ì.\n\n- **documents($D$)**: ì—¬ëŸ¬ ê°œì˜ Documentë¥¼ ì˜ë¯¸í•˜ë©°, í•˜ë‚˜ì˜ DocumentëŠ” ëŒ€ê²Œ ì—¬ëŸ¬ ê°œì˜ wordsë¥¼ í¬í•¨í•œë‹¤. ê° documentëŠ” $d_{i} \\in D$ì˜ í˜•íƒœë¡œ í‘œí˜„í•œë‹¤.\n- **classes($C$)**: classëŠ” ë‘ ê°œ ì´ìƒì„ ê°€ì§„ë‹¤. ê° í´ë˜ìŠ¤ëŠ” $c_{i} \\in C$ì˜ í˜•íƒœë¡œ í‘œí˜„ëœë‹¤.\n- **labeled dataset**: ì´ëŠ” (document($d_{i}$), class($c_{i}$))ê°€ í•˜ë‚˜ì”© mappingëœ í˜•íƒœë¡œ ì¡´ì¬í•œë‹¤. ìš°ë¦¬ê°€ ê°€ì§€ëŠ” datasetìœ¼ë¡œ í•™ìŠµ, í‰ê°€ ì‹œì— ì‚¬ìš©í•œë‹¤. ëŒ€ê²Œ í‰ê°€ì— ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ëŠ” í•™ìŠµ ì‹œì— ì‚¬ìš©í•˜ëŠ” ê²ƒì„ ê¸ˆì§€í•˜ê¸° ë•Œë¬¸ì— ë³„ë„ë¡œ ë¶„ë¦¬í•˜ì—¬ ì‚¬ìš©í•œë‹¤.\n- **word($w$)**: í•˜ë‚˜ì˜ wordë¥¼ ì˜ë¯¸í•˜ë©° NLP í•™ìŠµ ì‹œì— ì‚¬ìš©í•˜ëŠ” ê°€ì¥ ì‘ì€ ë‹¨ìœ„ì´ë‹¤. ëŒ€ê²Œ document í•˜ë‚˜ì— ìˆëŠ” ë‹¨ì–´ì˜ ìˆ˜ëŠ” Nìœ¼ë¡œ í‘œê¸°í•˜ê³ , uniqueí•œ ë‹¨ì–´ì˜ ìˆ˜ëŠ” V(size of vocabulary)ë¡œ í‘œì‹œí•œë‹¤.\n\në”°ë¼ì„œ, ìš°ë¦¬ê°€ ì°¾ê³ ì í•˜ëŠ” ê°€ì¥ ë†’ì€ í™•ë¥ ì„ ê°€ì§„ classëŠ” ë‹¤ìŒì„ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\nc_{MAP} &= \\argmax_{c \\in C}{P(c|d)} \\\\\n&= \\argmax_{c \\in C}{p(d|c)p(c)\\over p(d)} \\\\\n&= \\argmax_{c \\in C}{p(d|c)p(c)} \\\\\n&= \\argmax_{c \\in C}{p(w_{1}, w_{2}, ... , w_{N} | c)p(c)} \\\\\n&= \\argmax_{c \\in C}{\\prod_{i=1}^{N}p(w_{i})p(c)} \\\\\n&= \\argmax_{c \\in C}{\\log(\\prod_{i=1}^{N}p(w_{i})p(c))} \\\\\n&= \\argmax_{c \\in C}{\\sum_{i=1}^{N}\\log p(w_{i}) + \\log{p(c)}} \\\\\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ìš°ë¦¬ê°€ language modelì„ ë¬´ì—‡ìœ¼ë¡œ ì •í–ˆëŠ”ì§€ê°€ ì¤‘ìš”í•˜ë‹¤. ìœ„ì—ì„œëŠ” uni-gramì´ë¼ê³  ê°€ì •í•´ì„œ í’€ì´í–ˆì§€ë§Œ, bi-gramì¸ ê²½ìš° documentì˜ í˜•íƒœê°€ $d={(w_{1}, w_{2}), (w_{2}, w_{3}), ... , (w_{N-1}, w_{N})}$ì´ë‹¤. ë”°ë¼ì„œ, ì „ì²´ì ì¸ í¬ê¸°ì™€ vocabularyìì²´ë„ ë°”ë€Œê²Œ ëœë‹¤.\n\nì¦‰, ìš°ë¦¬ëŠ” train setì„ í†µí•´ì„œ vocabularyë¥¼ ì™„ì„±í•œë‹¤. ê·¸ë¦¬ê³ , ê° wordì˜ count ë° í•„ìš”ì— ë”°ë¼ í•„ìš”í•œ word sequenceì˜ countë¥¼ ìˆ˜ì§‘í•˜ì—¬ $p(w_i)$ë¥¼ êµ¬í•œ í›„ ìœ„ì— ë°©ë²•ì„ í†µí•´ì„œ íŠ¹ì • classë¥¼ ì¶”ì¸¡í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n## Evaluation\n\nbinary classificaitonì˜ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ì´ 4ê°œ ì¤‘ í•˜ë‚˜ë¡œ ê²°ì •ëœë‹¤.\n\n| prediction\\answer | True           | False          |\n| :---------------- | :------------- | :------------- |\n| Positive          | true positive  | false positive |\n| Negative          | false negative | true negative  |\n\nì´ë¥¼ ì‰½ê²Œ ì´í•´í• ë ¤ë©´, ë³‘(ì½”ë¡œë‚˜)ì˜ ì–‘ì„±/ìŒì„± íŒì •ì´ rowì— í•´ë‹¹í•˜ê³ , ì‹¤ì œ ë³‘ì˜ ì—¬ë¶€ë¥¼ columnìœ¼ë¡œ ìƒê°í•˜ë©´ ì‰½ë‹¤. ë˜í•œ, ê° cellì˜ ê°’ì´ í—·ê°ˆë¦´ ìˆ˜ ìˆëŠ”ë°, ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì´ ì˜ˆì¸¡ì˜ ì •í™•ë„ë¥¼ í™•ì¸í•˜ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ì˜ˆì¸¡ ê²°ê³¼ëŠ” ê·¸ëŒ€ë¡œ ë³´ì—¬ì£¼ë©´ì„œ, ì´ê²ƒì´ í‹€ë ¸ëŠ”ì§€ ë§ì•˜ëŠ”ì§€ë¥¼ ì•ì— true/falseë¡œ í‘œí˜„í–ˆë‹¤ê³  ìƒê°í•˜ë©´ ì‰½ë‹¤.\n\n\nclassificationì˜ ì„±ëŠ¥ì„ ì¸¡ì •í•˜ëŠ” ì§€í‘œëŠ” ëŒ€í‘œì ìœ¼ë¡œ 4 ê°€ì§€ê°€ ìˆë‹¤.\n\n1. **Accuracy(ì •í™•ë„)**  \n   ê°€ì¥ ì‰½ê²Œ ê·¸ë¦¬ê³  ì¼ë°˜ì ìœ¼ë¡œ ìƒê°í•˜ëŠ” ì§€í‘œë‹¤. ìœ„ì˜ í‘œì—ì„œëŠ” ì „ì²´ ê²½ìš°ì˜ ìˆ˜ë¥¼ ë”í•˜ì—¬ ì˜³ê²Œ ì˜ˆì¸¡í•œ ê²ƒ(true postive, true negative)ì˜ í•©ì„ ë‚˜ëˆ„ëŠ” ê²ƒì´ë‹¤. \n   $tp + fn \\over tp + fp + fn + tn$  \n   í•˜ì§€ë§Œ, ì´ ë°©ì‹ì€ í•œê³„ê°€ ìˆë‹¤. ë°”ë¡œ, ë°ì´í„°ê°€ í•œìª½ìœ¼ë¡œ ì¹˜ìš°ì³ì ¸ìˆì„ ë•Œì´ë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ìš°ë¦¬ê°€ ì§„ì§œë¥¼ ì§„ì§œë¼ê³  ë§ì¶œí™•ë¥ ì€ ë†’ì§€ë§Œ, ê°€ì§œë¥¼ ê°€ì§œë¼ê³  ë§ì¶œ í™•ë¥ ì´ ë‚®ë‹¤ê³  í•  ë•Œ, ì´ë¥¼ ì œëŒ€ë¡œ ë°˜ì˜í•˜ê¸°ê°€ ì–´ë µë‹¤. ê·¸ëŸ°ë° ë°ì´í„°ì—ì„œ ì§„ì§œê°€ ê°€ì§œë³´ë‹¤ ì••ë„ì ìœ¼ë¡œ ë§ì„ ê²½ìš° ì •í™•ë„ëŠ” ì¢‹ì€ ì§€í‘œë¡œ ì“°ê¸° ì–´ë µë‹¤ëŠ” ê²ƒì´ë‹¤.\n2. **Precision(ì •ë°€ë„, ì •ë‹µë¥ )**  \n   ì‰½ê²Œ ì •ë‹µ ìì²´ë¥¼ ë§í í™•ë¥ ì…ë‹ˆë‹¤.  \n   $tp \\over tp + fn$\n3. **Recall(ì¬í˜„ìœ¨)**  \n   ì˜ˆì¸¡ì´ ë§ì„ í™•ë¥ ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.  \n   $tp \\over tp + fp$\n4. **F1 Score**  \n   ì¢€ ë” ì„¸ë¶„í™”ëœ í‰ê°€ì§€í‘œì´ë‹¤. ì¡°í™” í‰ê· ì— ê¸°ë°˜í•˜ì—¬ ëª¨ë¸ì˜ ì„±ëŠ¥ì„ ì •í™•í•˜ê²Œ í‰ê°€í•  ë•Œ ì‚¬ìš©í•œë‹¤.  \n   $2 \\times {\\text{Precision} \\times \\text{Recall} \\over \\text{Precision} + \\text{Recall}}$\n\nì—¬ê¸°ê¹Œì§€ ë´¤ìœ¼ë©´, ìŠ¬ìŠ¬ multi classì˜ ê²½ìš°ì—ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ì§€ ê¶ê¸ˆí•  ê²ƒì´ë‹¤. ëŒ€ê²Œ ë‘ ê°€ì§€ ë°©ë²•ì„ í†µí•´ì„œ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n> **1. Micro Average**\n\nì „ì²´ classë¥¼ í•˜ë‚˜ì˜ binary tableë¡œ í•©ì¹˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, í´ë˜ìŠ¤ê°€ A, B, C 3ê°œê°€ ìˆë‹¤ë©´, ê° í´ë˜ìŠ¤ ë³„ë¡œ ì˜ˆì¸¡ ì„±ê³µë„ë¥¼ binaryë¡œ í‘œì‹œí•˜ê³ , ì´ë¥¼ í•˜ë‚˜ì˜ í…Œì´ë¸”ë¡œ í•©ì¹˜ëŠ” ê²ƒì´ë‹¤. ê·¸ í›„ì—ëŠ” binaryì—ì„œ ê³„ì‚°í•˜ëŠ” ì‹ì„ ê·¸ëŒ€ë¡œì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.  \n\n> **2. Macro Average**\n\nmulti classì˜ ê²½ìš°ì—ë„ ë³„ë¡œ ë‹¤ë¥¼ ê²ƒì€ ì—†ë‹¤. ë‹¨ì§€ Precisionê³¼ Recall ê·¸ë¦¬ê³  Accuracyê°€ ì–´ë–»ê²Œ ë°”ë€ŒëŠ”ì§€ë§Œ ì•Œë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.  \n\n| prediction\\answer | c1            | c2            | c3            | c4            |\n| :---------------- | :------------ | :------------ | :------------ | :------------ |\n| c1                | true positive | x             | x             | x             |\n| c2                | x             | true positive | x             | x             |\n| c3                | x             | x             | true positive | x             |\n| c4                | x             | x             | x             | true positive |\n\n- Precision: $c_{ii} \\over \\sum_{j}c_{ij}$\n- Recall: $c_{ii} \\over \\sum_{j}c_{ji}$\n- Accuracy: $c_{ii} \\over \\sum_{i}\\sum_{j}c_{ij}$\n\n## Case Study. Spam Filtering\n\nì´ˆê¸° NLPê°€ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ì—ˆë˜ ì˜ˆì‹œ ì¤‘ì— í•˜ë‚˜ì´ë‹¤. ì—¬ëŸ¬ ê°œì˜ ë©”ì¼ì— spamì¸ì§€ hamì¸ì§€ë¥¼ labelingí•œ ë°ì´í„°ë¥¼ ê°–ê³  í›„ì— inputìœ¼ë¡œ mail ë°ì´í„°ê°€ ë“¤ì–´ì™”ì„ ë•Œ, ì´ë¥¼ filteringí•˜ëŠ” ê²ƒì´ë‹¤. ìœ„ì—ì„œ ì‚´í´ë³´ì•˜ë˜ í™•ë¥ ì„ ê·¸ëŒ€ë¡œ ì ìš©í•˜ë©´ ëœë‹¤. ì˜ˆì¸¡ì— í•„ìš”í•œ í™•ë¥ ì„ ìŠµë“í•˜ê³ , ì˜ˆì¸¡í•˜ëŠ” ë°©ë²•ê³¼ ì´ë¥¼ í‰ê°€í•˜ëŠ” ë°©ë²•ì˜ ìˆœìœ¼ë¡œ ì„¤ëª…í•˜ê² ë‹¤.\n\n### 0. Preprocessing\n\nì‚¬ì‹¤ mail dataì˜ í˜•íƒœê°€ ì´ìƒí•  ìˆ˜ë„ ìˆë‹¤. Subjectë¶€í„° ì‹œì‘í•˜ì—¬ ë‚ ì§œ ë°ì´í„° ê·¸ë¦¬ê³  íŠ¹ìˆ˜ ë¬¸ì ë“±ì´ ì¡´ì¬í•  ìˆ˜ ìˆëŠ”ë°, ì´ë¥¼ ë¨¼ì € ì²˜ë¦¬í•´ì„œ í›„ì— ìˆì„ Modeling ë‹¨ê³„ì—ì„œ ì˜ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í˜•íƒœë¥¼ ë³€í˜•í•´ì£¼ì–´ì•¼ í•œë‹¤.\n\n[ğŸ”— ì´ì „ Posting(Text Processing)](/posts/nlp-text-processing)ì—ì„œ ë°°ì› ë˜ ê¸°ìˆ ë“¤ì„ í™œìš©í•˜ì—¬ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤.\n\nëŒ€í‘œì ìœ¼ë¡œ í•´ì¤„ ìˆ˜ ìˆëŠ” ì‘ì—…ë“¤ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. ëŒ€ì†Œë¬¸ì í†µì¼\n2. alphabetì´ í•˜ë‚˜ë¼ë„ ë“¤ì–´ìˆì§€ ì•Šì€ ë°ì´í„°ëŠ” ì‚­ì œ\n3. date, ì°¸ì¡° ë“±ì„ ì˜ë¯¸í•˜ëŠ” ë°ì´í„° ì‚­ì œ\n\n### 1. Modeling\n\nParameter Estimation / Learning / Modeling ë“±ìœ¼ë¡œ ë¶ˆë¦¬ëŠ” ë‹¨ê³„ì´ë‹¤. ì¼ë‹¨ ìš°ë¦¬ëŠ” train setìœ¼ë¡œë¶€í„° ìš°ë¦¬ê°€ ì›í•˜ëŠ” í™•ë¥ ì„ ì¶”ì¶œí•´ì•¼ í•œë‹¤. ê·¸ ì „ì— ìš°ë¦¬ê°€ ì–´ë–¤ language modelì„ ì´ìš©í• ì§€ ì„ íƒí•´ì•¼ í•œë‹¤. ë¨¼ì € uni-gramì¸ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ train setì´ ì •ì˜ëœë‹¤.\n$$\n\\text{TrainSet} = {(d_{1}, c_{1}),  (d_{2}, c_{2}), ..., (d_{N}, c_{N})}\n$$\n$$\nd_{i} = \\begin{cases}\n  {w_{1}, w_{2}, ... , w_{M_{i}}} \\quad&\\text{unigram} \\\\\n  {(<s>, w_{1}), (w_{1}, w_{2}), ... , (w_{M_{i}}, </s>)} \\qquad&\\text{bigram}\n\\end{cases}\n$$\n\nì´ì œ ìš°ë¦¬ê°€ ì›í•˜ëŠ” parameter, ì¦‰ í™•ë¥ ì€ ë‹¤ìŒê³¼ ê°™ì€ ë°ì´í„°ì´ë‹¤.\n\n> **unigram**\n\n$$\n\\begin{align*}\np(w_{i}|c_{j}) &= {\\text{count}(w_{i}, c_{j}) \\over \\sum_{w \\in V} \\text{count}(w, c_{j})} \\\\\np(c_{j}) &= {\\sum_{i = 1}^{N}{1[c_{i} = c_{j}]} \\over N}\n\\end{align*}\n$$\n\n> **bigram**\n\n$$\n\\begin{align*}\np(w_{i}|w_{i-1},c_{j}) &= {\\text{count}((w_{i-1}, w_{i}), c_{j}) \\over \\sum_{(w^{(1)}, w^{(2)}) \\in V} \\text{count}((w^{(1)}, w^{(2)}), c_{j})} \\\\\np(c_{j}) &= {\\sum_{i = 1}^{N}{1[c_{i} = c_{j}]} \\over N}\n\\end{align*}\n$$\n\nì—¬ê¸°ì„œ ìš°ë¦¬ëŠ” ë°˜ë“œì‹œ Smoothingì„ í•´ì£¼ì–´ì•¼ í•œë‹¤. ì™œëƒí•˜ë©´, spam mailì—ì„œ ì•ˆ ë³¸ ë‹¨ì–´ê°€ ë‚˜ì˜¬ ê°€ëŠ¥ì„±ì´ ë„ˆë¬´ë‚˜ ë†’ê¸° ë•Œë¬¸ì´ë‹¤. ë”°ë¼ì„œ, ì‹¤ì œ $p(w_{i}|c_{j})$ëŠ” ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ëœë‹¤. (ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ ë“¤ê¸° ìœ„í•´ì„œ Add-1 ë°©ì‹ì„ ì‚¬ìš©í–ˆë‹¤. - í•´ë‹¹ ë‚´ìš©ì´ ê¸°ì–µì´ ë‚˜ì§€ ì•ŠëŠ”ë‹¤ë©´, [ğŸ”— ì´ì „ í¬ìŠ¤íŒ…](/posts/nlp-language-modeling)ì„ ë‹¤ì‹œ ë³´ê³  ì˜¤ì.)\n\n$$\np(w_{i}|c_{j}) = {\\text{count}(w_{i}, c_{j}) + 1 \\over \\sum_{w \\in V} \\text{count}(w, c_{j}) + |V|}\n$$\n\nì£¼ì˜í•  ì ì€ ë‹¤ì‹œ í•œ ë²ˆ ê°•ì¡°í•˜ì§€ë§Œ, $V$ëŠ” í›„ì— Estimationì—ì„œ inputìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë‹¨ì¼ documentê¹Œì§€ í¬í•¨í•œ Vocabularyì´ë‹¤.\n\n### 2. Estimation\n\nì´ì œ ìš°ë¦¬ê°€ ì–»ì€ parameterë¥¼ ì´ìš©í•´ì„œ ì‹¤ì œ input dataì— ëŒ€í•œ estimationì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\nì´ ê²½ìš° ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\hat{c} = \\argmax_{c \\in C} p(c)\\prod_{w \\in d_{\\text{input}}}p(w|c)\n$$\n\në¬¼ë¡  ì–´ë–¤ n-gramì„ ì“°ëƒì— ë”°ë¼ $d_{\\text{input}}$ë„ í˜•íƒœê°€ ë‹¬ë¼ì§ˆ ê²ƒì´ë‹¤.\n\n### 3. Evaluation\n\nì´ì œ í‰ê°€ë¥¼ ìˆ˜í–‰í•  ê²ƒì´ë‹¤. í‰ê°€ëŠ” ìš°ë¦¬ê°€ ì•Œì•„ë´¤ë˜ Accuracyì™€ F1 Scoreë¥¼ ì¶”ì¶œí•  ìˆ˜ ìˆë‹¤. Binary Classificationì´ê¸° ë•Œë¬¸ì— ì‰½ê²Œ êµ¬í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\n\n\n| prediction\\answer | True                                                                       | False                                                                     |\n| :---------------- | :------------------------------------------------------------------------- | :------------------------------------------------------------------------ |\n| Positive          | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} = c, c = \\text{spam}]$    | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} \\neq c, c = \\text{ham}]$ |\n| Negative          | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} \\neq c, c = \\text{spam}]$ | $\\sum_{(d, c) \\in D_{\\text{test}}} 1[\\hat{c}_{d} = c, c = \\text{ham}]$    |\n\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"nlp-classification","date":"2022-10-21 21:53","title":"[NLP] 4. Classification","category":"AI","tags":["NLP","Classification","SpamFiltering","F1Score"],"desc":"ì´ì „ Postingì—ì„œëŠ” sentenceì˜ ì ì ˆì„±ì„ í™•ì¸í•œë‹¤ë“ ì§€ ë‹¤ìŒ ë‹¨ì–´ë¥¼ ìœ ì¶”í•œë‹¤ë“ ì§€ ì˜¤íƒ€ë¥¼ ì •ì •í•˜ëŠ” ë“±ì— í•„ìš”í•œ ê¸°ë³¸ì ì¸ Language Modeling ë°©ì‹ì„ ì‚´í´ë³´ì•˜ë‹¤. ì´ë²ˆì—ëŠ” ì‹¤ì œë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ì˜ˆì œì¸ Classificationì„ Language Modelì„ ì´ìš©í•˜ì—¬ í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ë°°ìš°ë©°, ì´ë¥¼ ì§ì ‘ Spam Filteringì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©í•˜ëŠ”ì§€ ì‚´í´ë³¸ë‹¤. ì£¼ì˜í• ì ì€ í•´ë‹¹ Postingì€ Naive Bayes ë°©ì‹ì„ ê¸°ë°˜ìœ¼ë¡œ ì§„í–‰í•˜ëŠ” Classificationì´ë‹¤. ë” ë‹¤ì–‘í•œ ë°©ë²•ë¡ ì„ ì›í•œë‹¤ë©´ í•´ë‹¹ í¬ìŠ¤íŒ…ì€ ë„ì›€ì„ ì£¼ê¸° ì–´ë µë‹¤. ë§Œì•½ ì§€ê¸ˆ ë§ì´ ì´í•´ê°€ ì•ˆëœë‹¤ë©´, ê·¸ëƒ¥ ê³„ì† ì½ìœ¼ì‹œë©´ ë˜ê² ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"},{"content":"\n## Intro\n\nì´ì „ê¹Œì§€ íŠ¹ì • wordë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ modelingì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ íŠ¹ì • wordì˜ sequenceë¥¼ í†µí•´ì„œ ê° wordì— ëŒ€í•œ classificationì„ í•œ ë²ˆì— í•˜ê³  ì‹¶ì€ ê²½ìš°ëŠ” ì–´ë–»ê²Œ í• ê¹Œ?(ì˜ˆë¥¼ ë“¤ì–´, ê° ë‹¨ì–´ì˜ í’ˆì‚¬ë¥¼ ì§€ì •í•˜ëŠ” ì¼) ì¼ë°˜ì ìœ¼ë¡œ ê° ë‹¨ì–´ê°€ íŠ¹ì • í•´ë‹¹ classì¼ í™•ë¥ ë¡œ êµ¬í•˜ëŠ” ë°©ë²•ì´ ì¼ë°˜ì ì¼ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ë¬¸ë§¥ì„ ê³ ë ¤í•˜ì—¬ í™•ë¥ ì„ êµ¬í•  ë°©ë²•ì€ ì—†ì„ê¹Œ? ê·¸ ë°©ë²•ì€ ë°”ë¡œ bigramì„ ì´ìš©í•˜ë©´ ë  ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì‚¬ì‹¤ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë¬¸ë§¥ì´ ë‹¨ì–´ ìì²´ë³´ë‹¤ëŠ” ì´ì „ classê°€ ë” ì˜í–¥ì´ í¬ë‹¤ë©´, ì´ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì´ë¥¼ ìœ„í•œ í•´ê²°ì±…ì´ HMMì´ë‹¤. NLP ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ë„“ê²Œ ì‚¬ìš©ë˜ê³  ìˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” NLP ë¶„ì•¼ì—ì„œ ì–´ë–»ê²Œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.\n\n## Markov Model\n\nHMMì„ ì•Œì•„ë³´ê¸°ì „ì— Markov Modelì„ ì•Œì•„ì•¼ í•œë‹¤. ì´ëŠ” íŠ¹ì • sequenceì˜ í™•ë¥ ì„ ì¶”ì •í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì¦‰ ìš°ë¦¬ì—ê²Œ state sequence ($S= {s_{0}, s_{1}, ..., s_{N}}$)ê°€ ì£¼ì–´ì§ˆ ë•Œ, ê° stateì—ì„œ ë‹¤ìŒ stateë¡œ ì „ì´(ì´ë™)í•  í™•ë¥ ì„ ì´ìš©í•´ì„œ state sequenceì˜ í™•ë¥ ì„ êµ¬í•˜ëŠ” ë°©ë²•ì´ë‹¤.\n\n![nlp-markov-model-1](/images/nlp-markov-model-1.jpg)\n\nìœ„ì˜ ê·¸ë¦¼ì´ state ê° ê°ì—ì„œ ë‹¤ìŒ stateë¡œ ì „ì´í•  í™•ë¥ ì„ ë‚˜íƒ€ë‚¸ ê²ƒì´ë¼ë©´, ìš°ë¦¬ëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì€ ê·¸ë¦¼ìœ¼ë¡œ sequenceì˜ í™•ë¥ ì„ ì¶”ë¡ í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n![nlp-markov-model-2](/images/nlp-markov-model-2.jpg)\n\në”°ë¼ì„œ, ìœ„ì˜ ê·¸ë¦¼ì—ì„œ ìš°ë¦¬ê°€ ë§Œì•½ $(s_{0}, s_{1}, s_{0}, s_{2})$ìœ¼ë¡œ ì´ë£¨ì–´ì§„ sequenceì˜ í™•ë¥ ì„ ì–»ê¸°ë¥¼ ë°”ë€ë‹¤ë©´, ê·¸ í™•ë¥ ì€ ì•„ë˜ì™€ ê°™ì•„ì§„ë‹¤.\n$$\n\\begin{align*}\np(s_{0}, s_{1}, s_{0}, s_{2}) &= p(s_{0}| \\text{start}) \\times p(s_{1}|s_{0}) \\times p(s_{0}|s_{1}) \\times p(s_{2}|s_{1}) \\times p(end|s_{2}) \\\\\n&= \\pi_{0} \\times p_{01} \\times p_{10} \\times p_{12} \\times 1 \n\\end{align*}\n$$\n\nì´ë¥¼ ì˜ ì‚´í´ë³´ë‹ˆ bigramì—ì„œì˜ Likelihoodë¥¼ êµ¬í•˜ëŠ” ê³µì‹ê³¼ ë˜‘ê°™ë‹¤. ì¦‰, state ê° ê°ì„ wordë¼ê³  ë³¸ë‹¤ë©´, Markov Modelì„ í†µí•´ì„œ êµ¬í•  ìˆ˜ ìˆëŠ” í™•ë¥ ì€ bigramì˜ Likelihoodì¸ ê²ƒì´ë‹¤.\n\nê·¸ë¦¬ê³  ì´ë¥¼ ì¼ë°˜í™”í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\np(seq) = \\prod_{i=1}^{N}p(seq_{i}|seq_{i-1})\n$$\n\nê·¸ëŸ°ë°, ì—¬ê¸°ì„œ nì´ 3 ì´ìƒì¸ ngramì„ ì ìš©í•˜ê³  ì‹¶ë‹¤ë©´, ê° stateë¥¼ n-1 gramìœ¼ë¡œ ì„¤ì •í•˜ë©´ ëœë‹¤.\n\n$$\n\\begin{align*}\nX_{i} &= (Q_{i-1}, Q_{i}) \\text{ë¼ë©´, }\\\\\nP(X_{i} | X_{i-1}) &= P(Q_{i-1}, Q_{i} | Q_{i-2}, Q_{i-1}) \\\\\n&= P(Q_{i} | Q_{i-2}, Q_{i-1})\n\\end{align*}\n$$\n\në”°ë¼ì„œ, trigramì„ ì ìš©í•´ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤.\n\n$$\n\\begin{align*}\np((start, w_{0}), (w_{0}, w_{1}), (w_{1}, w_{0}), (w_{0}, w_{2})) &= p(w_{0}| \\text{start}, \\text{start}) \\times p(w_{1}|\\text{start}, w_{0}) \\times p(w_{0}|w_{0}, w_{1}) \\times p(w_{2}|w_{1}, w_{0}) \\times p(end|w_{0}, w_{2}) \\\\\n&= \\pi_{0} \\times p_{01} \\times p_{10} \\times p_{12} \\times 1\n\\end{align*}\n$$\n\n\n## Hidden Markov Model\n\nHidden Markov Modelì€ stateë¥¼ í•˜ë‚˜ ë” ë§Œë“ ë‹¤ëŠ” ê²ƒì´ í•µì‹¬ì´ë‹¤. ê·¸ë˜ì„œ, ìš°ë¦¬ê°€ ì§ì ‘ ê´€ì¸¡í•˜ëŠ” state(**observed state**)ì™€ ì§ì ‘ì ìœ¼ë¡œ ê´€ì¸¡í•˜ì§€ ì•Šì§€ë§Œ, ê´€ì¸¡í•œ stateë“¤ì— ì˜ì¡´í•˜ëŠ” state(**hidden state**) ì´ ë‘ ê°œì˜ stateë¥¼ ì‚¬ìš©í•œë‹¤. ì¼ë°˜ì ì¸ ì˜ˆì‹œê°€ textê°€ ì…ë ¥ë˜ì—ˆì„ ë•Œ ìš°ë¦¬ëŠ” ê° ë‹¨ì–´ë¥¼ observed stateë¼ê³  í•œë‹¤ë©´, ê° ë‹¨ì–´ì˜ í’ˆì‚¬ë¥¼ hidden stateë¼ê³  ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n![nlp-markov-model-3](/images/nlp-markov-model-3.jpg)\n\nìœ„ì˜ ì˜ˆì‹œëŠ” ìš°ë¦¬ê°€ ê´€ì¸¡í•˜ëŠ” ë°ì´í„°($O$)ê°€ 3ê°œì˜ stateë¥¼ ê°€ì§€ê³ , ì´ ì‚¬ê±´ì— ì˜ì¡´ì ì¸ ë˜ ë‹¤ë¥¸ ì‚¬ê±´($H$)ì´ 3ê°œì˜ stateë¥¼ ê°€ì§€ëŠ” ê²½ìš°ì´ë‹¤. ì´ë¥¼ ì´ìš©í•´ì„œ ê¸°ì¡´ Markov Modelë³´ë‹¤ ë³µì¡í•œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\n### Estimation\n\nìš°ë¦¬ê°€ í•  ìˆ˜ ìˆëŠ” ì‘ì—…ì€ í¬ê²Œ ë‘ ê°€ì§€ì´ë‹¤. ì¼ë°˜ì ì¸ Markov Modelì—ì„œ í•  ìˆ˜ ìˆë˜ ë°©ì‹ì´ **Trellis** ë°©ì‹ì´ê³ , ë˜ ë‹¤ë¥¸ ë°©ì‹ì´ **Viterbi** ë°©ì‹ì´ë‹¤.\n\n1. $(o_{0}, o_{1}, o_{0}, o_{2})$ì˜ í™•ë¥ ì´ ê¶ê¸ˆí•  ë•Œ(**Trellis**)\n2. $(o_{0}, o_{1}, o_{0}, o_{2})$ê°€ ì£¼ì–´ì§ˆ ë•Œ, ì´ê²ƒì˜ hidden stateì˜ sequence ì¤‘ ê°€ì¥ ìœ ë ¥í•œ sequenceë¥¼ ì°¾ê³ ìí•  ë•Œ(**Viterbi**)\n\nìœ„ì˜ ê²½ìš°ë¥¼ ê°ê° í’€ì–´ë³´ë„ë¡ í•˜ì.\n\n> <mark>**1. Trellis**</mark>\n\nìš°ë¦¬ê°€ ì§ì ‘ ê´€ì¸¡í•œ ë°ì´í„°ì˜ sequence ìì²´ì˜ í™•ë¥ ì´ ê¶ê¸ˆí•  ë•Œì´ë‹¤. ë”°ë¼ì„œ, ì´ì— ëŒ€í•œ ë¶„ì„ì€ $(o_{0}, o_{1}, o_{0}, o_{2})$ì˜ í™•ë¥ ì„ ë¶„ì„í•´ë³´ë©´ì„œ ì„¤ëª…í•˜ê² ë‹¤.\n\n$$\n\\begin{align*}\np(o_{0}, o_{1}, o_{0}, o_{2}) &= p(o_{0}, o_{1}, o_{0}) \\times p(o_{2} | o_{0}, o_{1}, o_{0}) \\\\\n&= p(o_{0}, o_{1}, o_{0}) \\times \\{p(o_{2} | h_{0})p(h_{0} | o_{0}, o_{1}, o_{0}) + p(o_{2} | h_{1})p(h_{1} | o_{0}, o_{1}, o_{0}) + p(o_{2} | h_{2})p(h_{2} | o_{0}, o_{1}, o_{0})\\} \\\\\n&= p(o_{0}, o_{1}, o_{0}) \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n&= p(o_{0}, o_{1}) \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n&= p(o_{0}) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n&= \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) }\n\\end{align*}\n$$\n\nì´ë¥¼ ê·¸ë¦¼ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n![nlp-hidden-markov-model-1](/images/nlp-hidden-markov-model-1.jpg)\n\në˜í•œ, ì´ ì‹ì„ ë‹¤ìŒê³¼ ê°™ì´ ì¶•ì†Œê°€ ê°€ëŠ¥í•˜ë‹¤.\n\n$$\n\\begin{align*}\n  &\\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}\\alpha_{0 i} \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}{\\alpha_{1 i} } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}{\\alpha_{2 i} } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}{\\alpha_{3 i} }\n\\end{align*}\n$$\n\nìš°ë¦¬ëŠ” ì´ë¥¼ í†µí•´ì„œ, Markov Modelì˜ íŠ¹ì§•ì„ í•˜ë‚˜ ë°°ìš¸ ìˆ˜ ìˆë‹¤. ê·¸ê²ƒì€ ë°”ë¡œ ë³µì¡í•œ sequence ì „ì²´ì˜ í™•ë¥ ì—ì„œ ë²—ì–´ë‚˜ì„œ ë°”ë¡œ ì§ì „ì˜ í™•ë¥ ê°’ë§Œ ìœ¼ë¡œ ë‹¤ìŒ í™•ë¥ ì„ ì¶”ë¡ í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤. ì´ê²ƒì´ Markov Chainì´ë¼ëŠ” ì´ë¡ ì´ê³ , ì´ë¥¼ ì´ìš©í–ˆê¸° ë•Œë¬¸ì— Markov Modelë¼ê³  ë¶€ë¥´ëŠ” ê²ƒì´ê¸°ë„ í•˜ë‹¤.\n\në”°ë¼ì„œ, $\\alpha$ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì •ì˜í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\alpha(t, i) = \\sum_{k=1}^{N}{\\alpha(t-1, k)p(h_{i}|h_{k})p(o = s_{t}|h_{i})} \\quad (s_{t} = \\text{inputìœ¼ë¡œ ë“¤ì–´ì˜¨ sequenceì˜ të²ˆì§¸ ê°’})\n$$\n\në˜, ì´ë¥¼ ë°˜ëŒ€ë¡œ í•  ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì‹ì„ ì–»ì„ ìˆ˜ ìˆë‹¤.\n\n![nlp-hidden-markov-model-2](/images/nlp-hidden-markov-model-2.jpg)\n\n$$\n\\begin{align*}\n  &\\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{p(o_{2} | h_{i})p(h_{i} | o_{0}, o_{1}, o_{0}) } \\\\\n  =& \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{p(o_{0} | h_{i})p(h_{i} | o_{0}, o_{1}) } \\times \\sum_{i=0}^{2}{\\beta_{3i}} \\\\\n  =& \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{p(o_{1} | h_{i})p(h_{i} | o_{0}) } \\times \\sum_{i=0}^{2}{\\beta_{2i}} \\\\\n  =& \\sum_{i=0}^{2}p(o_{0}|h_{i})p(h_{i}|start) \\times \\sum_{i=0}^{2}{\\beta_{1i}} \\\\\n  =& \\sum_{i=0}^{2}{\\beta_{0i}} \\\\\n\\end{align*}\n$$\n\n$$\n\\beta(t, i) = \\sum_{k=1}^{N}{\\beta(t+1, k)p(h_{k}|h_{i})p(o = s_{t}|h_{i})} \\quad (s_{t} = \\text{inputìœ¼ë¡œ ë“¤ì–´ì˜¨ sequenceì˜ të²ˆì§¸ ê°’})\n$$\n\nìœ„ì˜ ì²˜ëŸ¼ ì•ì—ì„œë¶€í„° í’€ì´ë¥¼ í•´ë‚˜ê°€ë©´ì„œ, $\\alpha$ì˜ í•©ìœ¼ë¡œ ëì´ ë‚˜ë„ë¡ í‘¸ëŠ” ë°©ë²•ì„ forwarding ë°©ì‹ì´ë¼í•˜ê³ , ë°˜ëŒ€ë¡œ ë’¤ì—ì„œë¶€í„° í’€ì´í•˜ë©´ì„œ $\\beta$ì˜ í•©ìœ¼ë¡œ í‘¸ëŠ” ë°©ë²•ì„ backwarding ë°©ì‹ì´ë¼ê³  í•œë‹¤. ì‚¬ì‹¤ ì´ ê²½ìš°ëŠ” HMMì´ êµ³ì´ ì•„ë‹ˆë”ë¼ë„, MMìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆìœ¼ë‹ˆ êµ³ì´ í•„ìš”ëŠ” ì—†ë‹¤. í•˜ì§€ë§Œ, ì´ê²ƒì€ í›„ì— modeling ë‹¨ê³„ì—ì„œ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ì•Œì•„ë‘ì–´ì•¼ í•œë‹¤.\n\n> <mark>**2. Viterbi**</mark>\n\nì´ëŠ” observed stateì˜ sequenceì— ì˜í•´ì„œ íŒŒìƒë˜ëŠ” ê°€ì¥ ì ì ˆí•œ hidden sequenceë¥¼ êµ¬í•˜ëŠ” ê²ƒì´ ëª©í‘œì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ í•  ìˆ˜ ìˆëŠ” ëŒ€í‘œì ì¸ ê²ƒì´ sequence classificationì´ë‹¤. \n\nê·¸ë ‡ë‹¤ë©´ ê°€ì¥ ìœ ë ¥í•œ hidden stateì˜ sequenceë¥¼ $\\hat{s}^{(H)}$ë¼ê³  í•˜ì. ì´ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n$$\n\\begin{align*}\n\\hat{s}^{(H)} &= \\argmax_{s^{(H)} \\in S^{(H)}}P(s^{(H)}|s^{(O)}) \\\\\n&= \\argmax_{s^{(H)} \\in S^{(H)}}P(s^{(O)}|s^{(H)})P(s^{(H)}) \\\\\n&= \\argmax_{{h_{1}, h_{2}, ..., h_{N}} \\in S^{(H)}}\\underbrace{P(o_{1}, o_{2}, ... , o_{N}|h_{1}, h_{2}, ... , h_{N})}_{\\text{Markov Model}}\\underbrace{P(h_{1}, h_{2}, ... , h_{N})}_{\\text{Markov Model}} \\\\\n&= \\argmax_{{h_{1}, h_{2}, ..., h_{N}} \\in S^{(H)}}\\prod_{i=1}^{N}p(o_{i}|h_{i})p(h_{i}|h_{i-1})\n\\end{align*}\n$$\n\n![nlp-hidden-markov-model-3](/images/nlp-hidden-markov-model-3.jpg)\n\nì¦‰, ê° layerì—ì„œ ë‹¨ í•˜ë‚˜ì˜ ê°€ì¥ í° outputë§Œ ì‚´ì•„ë‚¨ì„ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤. ì´ ê³¼ì •ì´ ì‚¬ì‹¤ìƒ HMMì˜ ë³¸ì§ˆì ì¸ ëª©í‘œì´ë‹¤. sequenceë¥¼ ì…ë ¥í•´ì„œ sequence í˜•íƒœì˜ classification ê²°ê³¼ë¥¼ ì–»ëŠ” ê²ƒì´ë‹¤.\n\n### Modeling\n\nì—¬íƒœê¹Œì§€ HMMì„ í™œìš©í•˜ì—¬ sequential classë¥¼ ì–´ë–»ê²Œ estimation í•˜ëŠ”ì§€ ì•Œì•„ë³´ì•˜ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì´ì œëŠ” ì´ë¥¼ ìœ„í•´ì„œ ì‚¬ìš©ë˜ëŠ” í™•ë¥ ê°’ì„ êµ¬í•´ì•¼í•œë‹¤. í•„ìš”í•œ í™•ë¥ ê°’ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n- $p(h_{i}|h_{i-1})$ : Hidden Stateì—ì„œ Hidden Stateë¡œ ë„˜ì–´ê°€ê¸° ìœ„í•œ í™•ë¥ ì´ë‹¤.\n- $p(o_{i}|h_{i})$ : ë°©ì¶œ í™•ë¥ ë¡œ íŠ¹ì • Hidden Stateì—ì„œ ë‹¤ìŒ Stateì˜ Observed Stateë¡œ ë„˜ì–´ê°€ëŠ” ë°©ë²•ì´ë‹¤. \n- $\\pi_{i}$\n\nTrelli ë°©ì‹ì—ì„œ ë§Œë“¤ì—ˆë˜, $\\alpha$ì™€ $\\beta$ì˜ ì˜ë¯¸ë¥¼ ì´í•´í•´ì•¼ í•œë‹¤. ê° ê°ì€ í•´ë‹¹ ê³¼ì •ê¹Œì§€ ì˜¤ë©´ì„œ ëˆ„ì í•´ì˜¨ í™•ë¥ ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³ , ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²ƒì€ ì…ë ¥ìœ¼ë¡œ ì£¼ì–´ì§„ ë°ì´í„°ë¥¼ ì˜ ë°˜ì˜í•  ìˆ˜ ìˆëŠ” í™•ë¥  ê°’ì„ ì°¾ëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, ìš°ë¦¬ê°€ ìƒê°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì€ í‰ê· ì„ í™œìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì´ë¥¼ êµ¬í•˜ëŠ” ê³¼ì •ì„ ë¨¼ì € ì‚´í´ë³´ì.\n\n$$\n\\begin{align*}\n  c(i, j, k) &= h_{i}\\text{ì—ì„œ } h_{j}\\text{ë¡œ ë„˜ì–´ê°€ê³ , } o_{k}\\text{ê°€ ê´€ì¸¡ë  í™•ë¥ ì˜ í•©} \\\\\n  &= \\sum_{t=2}^{T} \\alpha(t-1, i)p(h_{j}|h_{i})p(o_{k}|h_{j}) \\beta(t, j) \\\\\n  \\\\\n  c(i,j) &= h_{i}\\text{ì—ì„œ } h_{j}\\text{ë¡œ ë„˜ì–´ê°ˆ í™•ë¥ ì˜ í•©} \\\\\n  &= \\sum_{k=1}^{K}\\sum_{t=2}^{T}{\\alpha(t-1, i)p(h_{j}|h_{i})p(o_{k}|h_{j}) \\beta(t, j)} \\\\\n  \\\\\n  c(i) &= h_{i}\\text{ì—ì„œ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” í™•ë¥ ì˜ í•©} \\\\\n  &= \\sum_{j=1}^{N}\\sum_{k=1}^{K}\\sum_{t=2}^{T}{\\alpha(t-1, i)p(h_{j}|h_{i})p(o_{k}|h_{j}) \\beta(t, j)} \\\\\n\\end{align*}\n$$\n\nìœ„ì˜ ê°’ì„ í†µí•´ì„œ ìš°ë¦¬ëŠ” ìš°ë¦¬ê°€ ê°€ì§€ê³  ìˆë˜ í™•ë¥ ì„ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë‹¤.\n\n$$\n\\begin{align*}\np(h_{j}|h_{i}) &= {c(i,j)\\over c(i)} \\\\\np(o_{k}|h_{i}) &= {c(i,j,k)\\over c(i,j)}\n\\end{align*}\n$$\n\nì¦‰, ìš°ë¦¬ëŠ” ë‹¤ìŒ ê³¼ì •ì„ ìˆ˜í–‰í•˜ì—¬ Modelingì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n1. ì´ˆê¸°ê°’ ($p(h_{i}|h_{i-1})$, $p(o_{i}|h_{i})$, $\\pi_{i}$)ì„ ì´ˆê¸°í™” í•œë‹¤.  \n2. Trellië¥¼ í†µí•´ì„œ $\\alpha$, $\\beta$ë¥¼ ê³„ì‚°í•œë‹¤.\n3. $p(h_{i}|h_{i-1})$, $p(o_{i}|h_{i})$ë¥¼ ì—…ë°ì´íŠ¸ í•œë‹¤.  \n   ($pi_{i}$ê°™ì€ ê²½ìš°ëŠ” ë°œìƒ ë¹ˆë„ë¡œ ì—…ë°ì´íŠ¸ í•œë‹¤.)\n4. ì„ê³„ì¹˜ì— ë„ë‹¬í•  ë•Œê¹Œì§€ 2,3ë²ˆì„ ë°˜ë³µí•œë‹¤.\n\nì´ ê³¼ì •ì„ ëŒ€ê²Œ 10ë²ˆ ì •ë„ë§Œ í•˜ë©´ ìˆ˜ë ´í•˜ê²Œ ë˜ê³ , ì´ë¥¼ í™•ë¥ ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤.\n\n## Reference\n\n- Tumbnail : Photo by [David Ballew](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/@daveballew?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n","slug":"nlp-hmm","date":"2022-10-21 21:55","title":"[NLP] 5. Hidden Markov Model","category":"AI","tags":["NLP","MarkovModel","HMM","HiddenMarkovModel"],"desc":"ì´ì „ê¹Œì§€ íŠ¹ì • wordë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ì—¬ modelingì„ ìˆ˜í–‰í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ì•˜ë‹¤. í•˜ì§€ë§Œ, ìš°ë¦¬ê°€ íŠ¹ì • wordì˜ sequenceë¥¼ í†µí•´ì„œ ê° wordì— ëŒ€í•œ classificationì„ í•œ ë²ˆì— í•˜ê³  ì‹¶ì€ ê²½ìš°ëŠ” ì–´ë–»ê²Œ í• ê¹Œ?(ì˜ˆë¥¼ ë“¤ì–´, ê° ë‹¨ì–´ì˜ í’ˆì‚¬ë¥¼ ì§€ì •í•˜ëŠ” ì¼) ì¼ë°˜ì ìœ¼ë¡œ ê° ë‹¨ì–´ê°€ íŠ¹ì • í•´ë‹¹ classì¼ í™•ë¥ ë¡œ êµ¬í•˜ëŠ” ë°©ë²•ì´ ì¼ë°˜ì ì¼ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, ë¬¸ë§¥ì„ ê³ ë ¤í•˜ì—¬ í™•ë¥ ì„ êµ¬í•  ë°©ë²•ì€ ì—†ì„ê¹Œ? ê·¸ ë°©ë²•ì€ ë°”ë¡œ bigramì„ ì´ìš©í•˜ë©´ ë  ê²ƒì´ë‹¤. ê·¸ë ‡ë‹¤ë©´, ì‚¬ì‹¤ ìš°ë¦¬ê°€ ì‚¬ìš©í•˜ëŠ” ë¬¸ë§¥ì´ ë‹¨ì–´ ìì²´ë³´ë‹¤ëŠ” ì´ì „ classê°€ ë” ì˜í–¥ì´ í¬ë‹¤ë©´, ì´ëŠ” ì–´ë–»ê²Œ í•´ì•¼í• ê¹Œ? ì´ë¥¼ ìœ„í•œ í•´ê²°ì±…ì´ HMMì´ë‹¤. NLP ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ë„“ê²Œ ì‚¬ìš©ë˜ê³  ìˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” NLP ë¶„ì•¼ì—ì„œ ì–´ë–»ê²Œ ì´ë¥¼ ì‚¬ìš©í•˜ëŠ”ì§€ë¥¼ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/nlp-thumbnail.jpg"}]}},"__N_SSG":true}