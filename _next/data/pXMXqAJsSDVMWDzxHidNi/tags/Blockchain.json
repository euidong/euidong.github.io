{"pageProps":{"posts":[{"content":"\n## Intro\n\nEthereumì˜ TPSë¥¼ Client ë‹¨ì—ì„œ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë…¸ë ¥ìœ¼ë¡œ, LMPTëŠ” Layered Merkle Partical Trieì˜ ì•½ìì´ë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì—ì„œ ì‚¬ìš©í•˜ë˜ MPTì˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•˜ì—¬ ì œê¸°ëœ ì•„ì´ë””ì–´ë¡œ Computer Architectureì—ì„œ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” cacheë¥¼ ì ‘ëª©í•œ ë°©ë²•ì´ë‹¤. (í•´ë‹¹ ë…¼ë¬¸ ICBC 2022ì˜ ë…¼ë¬¸ ì¤‘ LMPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìš”ì•½ê¸€ì´ë‹¤.)\n\n## Terms\n\n- **ERC-20**  \n  Ethereumê³¼ í˜¸í™˜ì´ ê°€ëŠ¥í•œ tokenì— ëŒ€í•œ í‘œì¤€ì„ ì œì‹œí•œ ë¬¸ì„œì´ë‹¤. ì¦‰, ì´ í‘œì¤€ì„ ë§Œì¡±í•˜ëŠ” tokenì€ Ethereumì„ í†µí•´ì„œ êµí™˜ì´ ê°€ëŠ¥í•˜ë©° ê·¸ ë°˜ëŒ€ë„ ê°€ëŠ¥í•˜ë‹¤.\n- **Tether token**  \n  Tether tokenì€ ERC-20ì— ê¸°ë°˜í•œ ëŒ€í‘œì ì¸ tokenìœ¼ë¡œ, ë¯¸êµ­ ë‹¬ëŸ¬ì™€ 1:1ë¡œ ëŒ€ì‘í•˜ëŠ” USDTë¡œ ìœ ëª…í•˜ë‹¤. ì‹¤ì œ ê±°ë˜ì—ì„œë„ ë¹ˆë²ˆíˆ ì‚¬ìš©ë˜ëŠ” ERC-20 tokenì´ë‹¤.\n- **Trie**  \n  TrieëŠ” sequenceë¡œ ì´ë£¨ì–´ì§„ ë°ì´í„°ì˜ ë¹ ë¥¸ ê²€ìƒ‰ì„ ìœ„í•´ì„œ ë§Œë“¤ì–´ì§„ treeì˜ ì¼ì¢…ì´ë‹¤. ë°ì´í„°ë¥¼ ì €ì¥í•  ë•Œ sequence ë°ì´í„°ì˜ ê²€ìƒ‰ì„ ìµœì í™”í•˜ëŠ” ê²ƒì„ ëª©í‘œë¡œ í•œë‹¤. ì›ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤. sequenceì˜ ê²€ìƒ‰ ì‹œì— sequenceì˜ ì•ì—ì„œë¶€í„° ë§ëŠ” nodeë¥¼ rootì—ì„œë¶€í„° ê²€ìƒ‰í•˜ë©° ì°¾ì•„ë‚˜ê°„ë‹¤. ì´ ë•ë¶„ì— ê²€ìƒ‰ ì‹œì—ëŠ” sequenceì˜ ê¸¸ì´ë§Œí¼ì˜ ì‹œê°„ì´ë©´ ì¶©ë¶„íˆ ë°ì´í„°ë¥¼ ì°¾ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤. í•˜ì§€ë§Œ, ì €ì¥ sequenceë¥¼ í’€ì–´ì„œ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— ê²½ìš°ì˜ ìˆ˜ê°€ ì—„ì²­ ë§ì•„ì§„ë‹¤. ì´ëŠ” sequenceë¥¼ í•˜ë‚˜ì˜ ë°ì´í„°ë¡œ ë³´ëŠ” ê²ƒë³´ë‹¤ ì €ì¥ ê³µê°„ì„ ë§ì´ ì°¨ì§€í•œë‹¤ëŠ” ë‹¨ì ë„ ìˆë‹¤.\n- **Patricia Trie**  \n  Trieì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ëª¨ë“  sequenceë¥¼ ìš”ì†Œ í•˜ë‚˜ë¥¼ nodeë¡œ ë³´ì•˜ë‹¤ë©´, Patricia Trieì—ì„œëŠ” ê° nnodeê°€ ë‘ ê°œë¡œ ë‚˜ë‰˜ì–´ì§„ë‹¤. branch node, leaf nodeì´ë‹¤. leaf nodeëŠ” ê° sequenceì˜ ëì„ ì˜ë¯¸í•˜ë©° ê° sequenceëŠ” ë°˜ë“œì‹œ í•˜ë‚˜ì˜ leaf nodeë¡œ ì¢…ê²°ë˜ì–´ì§€ê³ , branch nodeëŠ” ì €ì¥í•œ ë°ì´í„° ì¤‘ì—ì„œ ì¤‘ë³µì´ ë°œìƒí•˜ëŠ” ê²½ìš° ì¤‘ê°„ ì§€ì ìœ¼ë¡œ ì €ì¥í•´ë‘ëŠ” ë°©ì‹ì´ë‹¤. ë”°ë¼ì„œ, Trieì—ì„œëŠ” ê° ë…¸ë“œê°€ sequenceì˜ í•˜ë‚˜ì˜ ê°’ì„ ì˜ë¯¸í–ˆë‹¤ë©´, Patricia Trieì—ì„œëŠ” pathê°€ sequenceì˜ ìš”ì†Œë“¤ì„ ì˜ë¯¸í•œë‹¤. ì´ì— ëŒ€í•œ ì´í•´ë¥¼ ìœ„í•´ì„œëŠ” ì•„ë˜ì— ì œì‹œëœ ê·¸ë¦¼ì„ ë³´ëŠ” ê²ƒì´ ì¢‹ì„ ê²ƒì´ë‹¤.(ì¢Œ. trie, ìš°. patricia trie)  \n  ![patricia-trie](/images/patricia-trie.png)\n- **Merkle Tree**  \n  Bitcoinì—ì„œ ì‚¬ìš©ëœ ìë£Œêµ¬ì¡°ë¡œ Blockchainì˜ ëª¨ë“  Blockì„ ì €ì¥í•˜ëŠ” ê²ƒì€ íŠ¹ì • nodeì—ê²ŒëŠ” ë¶€ë‹´ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ì´ì— ëŒ€í•œ ì¸ì¦ì„ ì‰½ê²Œ í•˜ê¸° ìœ„í•´ì„œ ìš”ì•½ë³¸ë§Œì„ ì €ì¥í•˜ëŠ” ë°©ì‹ì´ë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [ğŸ”— bitcoin-4](/posts/bitcoin-4)ì˜ 2. Merkle Tree ë¶€ë¶„ì—ì„œ ìì„¸íˆ ë‹¤ë£¨ì—ˆë‹¤. ê°„ë‹¨íˆ ì„¤ëª…í•˜ìë©´, Blockì„ serializationí•˜ê³  hashí•˜ì—¬ ê²°ê³¼ê°’ì„ ì €ì¥í•œ í›„ ì´ë¥¼ leaf nodeë¡œ í•˜ëŠ” í˜•íƒœì˜ binary treeë¥¼ ë§Œë“œëŠ” ê²ƒì´ë‹¤. ê·¸ë ‡ê¸°ì— ìš°ë¦¬ëŠ” Merkle Treeì˜ hashê°’ ëª‡ê°œë§Œ ê°–ê³ ë„ í•´ë‹¹ transactionì„ í¬í•¨í•˜ëŠ” blockì´ ìœ íš¨í•œì§€ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆë‹¤.  \n- **MPT**  \n  Merkle Patricia Trieì˜ ì¤„ì„ë§ë¡œ ê¸°ì¡´ Bitcoinì—ì„œ ì‚¬ìš©í•˜ë˜ Merkle Treeì™€ Patricia Trieì˜ ê²°í•©ì„ í†µí•´ ë§Œë“¤ì–´ë‚¸ ìë£Œêµ¬ì¡°ì´ë‹¤. ì´ì— ëŒ€í•œ ì„¤ëª…ì€ ì•„ë˜ì—ì„œ ë” ìì„¸íˆ ë‹¤ë£¬ë‹¤.\n- **Latency bound issue**  \n  Memoryì—ì„œ ë„ˆë¬´ ë§ì€ ë°ì´í„°ë¥¼ ì–»ì–´ì˜¤ë ¤ê³  í•  ë•Œë¥¼ ì˜ë¯¸í•˜ëŠ” Memory Bound ì¤‘ì˜ í•˜ë‚˜ë¡œ dataë¥¼ Memory ë§Œìœ¼ë¡œëŠ” ê°€ì ¸ì˜¬ ìˆ˜ ì—†ì„ ë•Œ, secondary storageì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ë°œìƒí•˜ëŠ” latencyë¥¼ ì˜ë¯¸í•œë‹¤.\n\n## Problem\n\nBitcoinì—ì„œ ì‹œì‘ëœ Blockchainì— ëŒ€í•œ ì‘ìš©ì€ ì˜ë£Œ, ê³µê¸‰ë§ ê´€ë¦¬ ë“±ìœ¼ë¡œ í™•ì¥ë˜ë©° ê³„ì†í•´ì„œ ë°œì „ë˜ê³  ìˆë‹¤. ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ì•„ì§ê¹Œì§€ **transactionì˜ ë¹ ë¥¸ ì²˜ë¦¬**ëŠ” challengeí•œ ë¶€ë¶„ìœ¼ë¡œ ë‚¨ì•„ìˆë‹¤. ì´ëŠ” P2P í™˜ê²½ì—ì„œ ì•ˆì „í•œ transactionì˜ ìƒì„± ë° ì¡°íšŒ ê·¸ë¦¬ê³  ê²€ì¦ì„ ìœ„í•´ì„œ ì–´ì©” ìˆ˜ ì—†ëŠ” trade offë¡œ ë°›ì•„ë“¤ì—¬ì¡Œë‹¤. ê·¸ ê²°ê³¼ 7~30 tps(transaction per second)ì •ë„ì— ê·¸ì¹˜ëŠ” ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ì£¼ë¥˜ì¸ ì¤‘ì•™ ì²˜ë¦¬ ë°©ì‹ì€ ìˆ˜ ì²œê°œì˜ transactionì„ ì²˜ë¦¬í•˜ëŠ” ê²ƒê³¼ ë¹„êµí–ˆì„ ë•Œì—ëŠ” êµ‰ì¥íˆ ë‚®ì€ ìˆ˜ì¤€ì´ë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ ë‹¤ë…„ê°„ ì—¬ëŸ¬ê°€ì§€ ì ‘ê·¼ ë°©ì‹ê³¼ í•´ê²°ì±…ì´ ì œì‹œë˜ì—ˆë‹¤(AI-gorand, Conflux, Prism, OHIE, etc). ì´ë¥¼ í†µí•´ì„œ ìˆ˜ ì²œê°œì˜ transactionì„ blockchainì—ì„œ ì²˜ë¦¬í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ê²Œ ë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, ì‹¤ì œë¡œ ì‘ìš©í•˜ëŠ”ë°ì—ëŠ” í•œê³„ê°€ ìˆì—ˆë‹¤. ê·¸ê²ƒì€ stateë¥¼ ë³´ê´€í•˜ëŠ” ledger ë‹¨ì—ì„œ ë°œìƒí•˜ëŠ” ê²ƒì´ ì•„ë‹Œ ì‹¤ì œë¡œ transactionì„ ì²˜ë¦¬í•˜ëŠ” client ë‹¨ì—ì„œì˜ ë¬¸ì œì´ë‹¤. ì´ëŠ” ë°”ë¡œ **blockchain stateë¥¼ ë³€ê²½í•˜ëŠ” transactionì´ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ëŠ” ê²½ìš° client ë‹¨ì—ì„œ ìƒˆë¡œìš´ bottleneckì´ ë°œìƒí•œë‹¤ëŠ” ì ì´ë‹¤.** ì‹¤ì œë¡œ ê°€ì¥ ìœ ëª…í•œ Ethereum Clientì¸ GoEthereumê³¼ OpenEtereumì—ì„œëŠ” 700 tpsë¡œ ê¸°ì¡´ ì œì‹œëœ ìˆ˜ ì²œ transactionë³´ë‹¤ëŠ” í•œì°¸ ëª» ë¯¸ì¹˜ëŠ” ì„±ëŠ¥ì„ ë³´ì—¬ì¤€ë‹¤.\n\nê·¸ ì›ì¸ì€ ì‚¬ì‹¤ìƒ state machineì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” Ethereumê³¼ ì´ê²ƒì˜ ê²€ì¦ì„ ìœ„í•´ ì œì•ˆëœ MPTì˜ êµ¬ì¡°ì ì¸ í•œê³„ë¡œ ì¸í•´ ë°œìƒí•œë‹¤(ì´ëŠ” Backgroundì—ì„œ ì œëŒ€ë¡œ ë‹¤ë£° ê²ƒì´ë‹¤). ì´ êµ¬ì¡°ì ì¸ í•œê³„ì— ì˜í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ í˜„ìƒë“¤ì´ ë°œìƒí•œë‹¤.\n\n1. key-value ì§ìœ¼ë¡œ ì´ë£¨ì–´ì§€ëŠ” ë°ì´í„°ì˜ read/write ì—°ì‚°ì´ ì¦í­í•´ì„œ ë°œìƒí•œë‹¤.\n2. íŠ¹íˆ write operationì€ ëª¨ë“  nodeì— ëŒ€í•œ hashë¥¼ ì¬ê³„ì‚°í•˜ë„ë¡ í•œë‹¤.\n3. ì´ëŸ¬í•œ ë™ì‘ì´ ì™„ë£Œë˜ê¸° ì „ê¹Œì§€ ë°˜ë“œì‹œ transactionì„ ì²˜ë¦¬í•˜ëŠ” threadëŠ” ëŒ€ê¸°í•´ì•¼ í•œë‹¤.\n\nì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, í•´ë‹¹ ë…¼ë¬¸ì€ LMPTë¼ëŠ” ìƒˆë¡œìš´ ìë£Œêµ¬ì¡°ë¥¼ ì œì‹œí•œë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì˜ MPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•˜ëŠ” ì‹œìŠ¤í…œë³´ë‹¤ 6ë°° ì •ë„ ìƒìŠ¹ëœ tps ì„±ëŠ¥ ì§€í‘œë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤. ì´ê²ƒì˜ í•µì‹¬ ì•„ì´ë””ì–´ëŠ” MPTë¥¼ ê³„ì¸µí™”(layer)í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, ìµœê·¼ updateëœ ë‚´ìš©ì„ ë³„ë„ì˜ ì €ì¥ê³µê°„ì„ í™œìš©í•˜ì—¬ ì €ì¥í•´ë‘ê³  ì´ë¥¼ ìš°ì„ ì ìœ¼ë¡œ í™œìš©í•˜ê¸° ë•Œë¬¸ì— ë” ë¹ ë¥¸ ì²˜ë¦¬ ì„±ëŠ¥ì„ ë³´ì—¬ì£¼ëŠ” ê²ƒì´ë‹¤.\n\n## Background\n\n> <mark>**1. Ethereum**</mark>\n\nEthereumì€ ê¸°ì¡´ Bitcoin Blockchain Systemê³¼ í™•ì—°íˆ ë‹¤ë¥¸ì ì´ ìˆë‹¤. ë°”ë¡œ State Machineì´ë¼ëŠ” ì ì´ë‹¤. ê¸°ì¡´ì˜ Bitcoinì—ì„œëŠ” ê±°ë˜ ë‚´ì—­ì„ ëª¨ë‘ ê³µê°œí•˜ê³ , ì´ë¥¼ í†µí•´ì„œ ìš°ë¦¬ëŠ” ìµœì´ˆ Blockì—ì„œë¶€í„° ì´ ê±°ë˜ ë‚´ì—­ì„ ì½ì–´ë“¤ì´ë©´ì„œ ê°€ì§„ ìì‚°ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì¦‰, ê±°ë˜ historyë¥¼ ì¢…í•©í•´ì„œ ê²°ê³¼ê°’ì„ ì–»ëŠ” ê²ƒì´ë‹¤. Transactionì˜ ìˆ˜ì •ê³¼ ì‚­ì œ ì—†ì´ ê³„ì†í•´ì„œ ì¶”ê°€ë§Œ ì´ë£¨ì–´ì§€ëŠ” í˜•íƒœë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, Ethereumì—ì„œëŠ” Transactionì„ State Machineì˜ ìƒíƒœë¥¼ ë³€í™”ì‹œí‚¤ëŠ” í•˜ë‚˜ì˜ actionìœ¼ë¡œ ë°›ì•„ë“¤ì¸ë‹¤. ë”°ë¼ì„œ, Transactionì— ì˜í•´ì„œ ìš°ë¦¬ëŠ” ìƒíƒœê°€ ë³€í™”í•˜ë„ë¡ í•˜ëŠ” ë°©ì‹ì¸ ê²ƒì´ë‹¤. ë”°ë¼ì„œ, ìš°ë¦¬ëŠ” í•´ë‹¹ Stateë§Œ ë³´ê³  ìì‹ ì˜ ìì‚°ì„ íŒŒì•…í•  ìˆ˜ ìˆëŠ” ê²ƒì´ë‹¤.\n\n> <mark>**2. MPT**</mark>\n\nê²°êµ­ Ethereum ì‹œìŠ¤í…œì„ í™œìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë“  ê²ƒì´ ê³µê°œë˜ëŠ” Network ìƒì—ì„œ ì•ˆì „í•˜ê²Œ Stateì™€ ì´ë¥¼ ë³€ê²½í•˜ëŠ” Transactionì„ ë³´ê´€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤. ì´ëŸ¬í•œ dataë¥¼ ë¬´ê²°í•˜ê²Œ ê·¸ëŸ¬ë©´ì„œë„ ìˆ˜ì •, ì‚­ì œ, ê²€ìƒ‰ ë“±ì´ ìš©ì´í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ì„œ Ethereumì—ì„œëŠ” MPT(Merkle Patricia Trie)ë¥¼ í™œìš©í•œë‹¤. ì´ëŠ” ê²°êµ­ ìœ„ì—ì„œ ì„¤ëª…í•œ Merkle Treeì™€ ë§ˆì°¬ê°€ì§€ë¡œ í•˜ìœ„ Nodeì˜ Hashê°’ì„ ìƒìœ„ Nodeì—ì„œ ê°€ì§€ê¸° ë•Œë¬¸ì— Root Hashë§Œì„ ë¹„êµí•˜ì—¬ ê²€ì¦ì„ í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ê°•ì ì„ ê°€ì§€ê³  ìˆë‹¤.\n\nMPTëŠ” 3ê°€ì§€ì˜ Nodeë¡œ ì´ë£¨ì–´ì§„ë‹¤.\n\n1. **Leaf Node**  \n   ì‹¤ì œë¡œ valueë¥¼ ì €ì¥í•˜ëŠ” ë§ë‹¨ nodeì´ë‹¤. ë§Œì•½, pathë¡œ keyê°€ ëª¨ë‘ í‘œì‹œë˜ì§€ ì•Šì•˜ë‹¤ë©´, key-endì— ë‚¨ì€ keyë¥¼ ëª¨ë‘ ë‹´ëŠ”ë‹¤.\n2. **Extension Node**  \n   Leaf Node ì´ì™¸ì— ê²½ë¡œì˜ í™•ì¥ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©ë˜ì–´ì§€ëŠ” Nodeë¡œ Branch Nodeì˜ hash dataë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ëŠ” ë“±ì˜ ì—­í• ì„ í•œë‹¤.\n3. **Branch Node**  \n   16ê°œì˜ pointerë¥¼ í¬í•¨í•˜ëŠ” Nodeë¡œ ì´ë¥¼ í†µí•´ì„œ Leaf, Extension, Branch Nodeë¥¼ ê°€ë¥´í‚¤ëŠ” ë° ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ, ì¼ë°˜ì ì¸ êµ¬ì¡°ëŠ” ì•„ë˜ì™€ ê°™ë‹¤.\n\n![mpt](/images/mpt.png)\n\nì´ êµ¬ì¡°ê°€ ê°€ì§€ëŠ” ì˜ì˜ëŠ” ê²°êµ­ ìš°ë¦¬ëŠ” í•˜ìœ„ nodeë“¤ì„ hashí•œ ë°ì´í„°ë¥¼ ìƒìœ„ nodeì—ì„œ í¬í•¨í•˜ê³  ìˆê¸° ë•Œë¬¸ì— í•„ìš”ì— ë”°ë¼ trieì— ì¼ë¶€ë¶„ë§Œì„ ì €ì¥í•´ë„ dataì˜ ê²€ì¦ì€ ì¶©ë¶„íˆ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì ì´ë‹¤. ë”°ë¼ì„œ, ëª¨ë“  dataë¥¼ ê°€ì§€ëŠ” full nodeì™€ ë‹¬ë¦¬ light clientëŠ” ë” ì ì€ ë°ì´í„°ë§Œ ê°–ê³ ë„ ê²€ì¦ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤. í•˜ì§€ë§Œ, light clientì—ì„œ authenticated read(full nodeì˜ ë„ì›€ì´ í•„ìš”í•œ read)ë¥¼ ìˆ˜í–‰í•˜ê³ ì í•˜ëŠ” ê²½ìš° full nodeì—ì„œëŠ” readë¥¼ ìˆ˜í–‰í•˜ê¸° ìœ„í•´ì„œ pathë¥¼ ë”°ë¼ì„œ ì½ê¸°ë¥¼ ë°˜ë³µí•´ë‚˜ê°€ë©°, leaf nodeì— ìˆëŠ” ìµœì¢… valueë¥¼ ì–»ì–´ì™€ì•¼ í•œë‹¤.\n\n> <mark>**3. Futher Observation**</mark>\n\ní•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” OpenEthereum Clientë¥¼ ê´€ì¸¡í•˜ê³ , ê¸°ì¡´ ë…¼ë¬¸ë“¤ì—ì„œ ì—¬ëŸ¬ ì˜ê°ì„ ì–»ì—ˆë‹¤. ë‹¤ìŒì€ ì´ ë…¼ë¬¸ì—ì„œ insightë¥¼ ì–»ëŠ” ë° ì¤‘ìš”í•œ ì—­í• ì„ í•œ ê´€ì¸¡ ì •ë³´ì´ë‹¤.\n\n1. Transactionì´ Blockchain Stateì— ë¹ˆë²ˆí•˜ê²Œ ì ‘ê·¼í•  ìˆ˜ë¡ Transactionì˜ ì²˜ë¦¬ ì„±ëŠ¥ì€ ë‚®ì•„ì§„ë‹¤.\n2. ì‹¤ì œ Transactionì˜ ì‹¤í–‰ ì‹œê°„ ì¤‘ì—ì„œ ê°€ì¥ ë§ì€ ì‹œê°„ì„ ì°¨ì§€í•˜ëŠ” ê²ƒì€ Blockchain Stateì— ì ‘ê·¼í•˜ëŠ” ë™ì‘(SLOAD, SSTORE)ì´ë‹¤.  \n   [ğŸ”— ê¸°ë°˜ ë…¼ë¬¸(Securing Smart Contract with Runtime Validation)](https://aoli.al/papers/solythesis-pldi20.pdf)\n3. í•œ ë²ˆì˜ Transactionì€ ì—¬ëŸ¬ ë²ˆì˜ IOì„ ìœ ë°œí•œë‹¤.(IO amplication)  \n   MPT êµ¬ì¡°ì—ì„œ í•˜ë‚˜ì˜ key ì¡°íšŒë¥¼ ìœ„í•´ì„œ í•œ ë²ˆì— ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ê²°êµ­ keyë¥¼ í†µí•´ì„œ Trieë¥¼ ìˆœíšŒí•˜ì—¬ì•¼ í•œë‹¤.  \n   ì´ëŠ” keyì— ëŒ€ì‘ë˜ëŠ” Nodeê°€ ë§ì„ ìˆ˜ë¡ ë§ì€ IOë¥¼ ìš”êµ¬í•œë‹¤.\n4. Transaction ì‹¤í–‰ threadëŠ” ë³‘ë ¬ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šê³ , ìœ„ì—ì„œ ì œì‹œëœ operationì´ ëë‚  ë•Œê¹Œì§€ ëŒ€ê¸°í•œë‹¤.  \n   ì¦‰, Transactionì„ ì²˜ë¦¬í•˜ëŠ” ThreadëŠ” critical path(section)ë¥¼ ì§€í‚¤ê¸° ìœ„í•´ì„œ ë‹¨ í•˜ë‚˜ë§Œ ì¡´ì¬í•œë‹¤ëŠ” ê²ƒì´ë‹¤.\n5. memory cache sizeë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒì€ ì„±ëŠ¥í–¥ìƒì— í° ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.  \n   | Memory Cache size(MB) | Hit Rate | TPS  |\n   | :-------------------- | :------- | :--- |\n   | 50                    | 0.635    | 1238 |\n   | 100                   | 0.758    | 1256 |\n   | 500                   | 0.862    | 1278 |\n   | 1000                  | 0.879    | 1292 |\n\n   ìœ„ì˜ í‘œë¥¼ ë³´ë©´ ì•Œ ìˆ˜ ìˆì§€ë§Œ, Cache Sizeë¥¼ ëŠ˜ë ¸ì„ ë•Œ Hit RateëŠ” ëŠ˜ë¦´ ìˆ˜ ìˆì§€ë§Œ TPSì˜ ì„±ëŠ¥ í–¥ìƒ í­ì€ 5% ìˆ˜ì¤€ì— ê·¸ì¹œë‹¤. ì´ëŠ” memory cacheë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ì§€ ëª»í•˜ê³  ìˆìŒì„ ì˜ë¯¸í•œë‹¤.\n\nì¦‰, í•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” í•˜ë‚˜ì˜ Transactionì— ì˜í•´ì„œ IOê°€ ë¹ˆë²ˆíˆ ë°œìƒí•˜ëŠ”ë° ì´ë¥¼ ë³‘ë ¬ì ìœ¼ë¡œ ì²˜ë¦¬í•˜ëŠ” ê²ƒë„ ê¸°ì¡´ MPTë§Œìœ¼ë¡œëŠ” í•œê³„ê°€ ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì œì‹œí•œë‹¤.\n\n## LMPT\n\nLayered Merkle Patricia Trieì˜ ì•½ìë¡œ ê¸°ì¡´ Ethereum MPTì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê¸° ìœ„í•´ì„œ ì œì•ˆí•˜ëŠ” ìë£Œêµ¬ì¡°ì´ë‹¤. ì´ì˜ í•µì‹¬ì ì¸ ëª©í‘œëŠ” Authenticated Ethereum Stateë¥¼ ë” íš¨ê³¼ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ê²ƒì´ë‹¤. ì—¬ê¸°ì„œ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ ì•„ì´ë””ì–´ëŠ” ë°”ë¡œ ê¸°ì¡´ Computer Architectureì—ì„œ ì‚¬ìš©í–ˆë˜ Hierarchical Memoryì˜ êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ì°¨ìš©í•˜ëŠ” ê²ƒì´ë‹¤. ì¦‰, cacheë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” MPTë¥¼ ë” êµ¬í˜„í•´ë‘ëŠ” ê²ƒì´ë‹¤. ì´ëŠ” ê²°ë¡ ìƒìœ¼ë¡œ MPTì˜ readì‹œì— IO amplicationì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\nìš°ì„  êµ¬ì„± ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. **Delta MPT**  \n   Read accessê°€ ìš”ì²­ë˜ë©´ ê°€ì¥ ë¨¼ì € ì¡°íšŒë˜ëŠ” MPTì´ë‹¤.\n2. **Intermediate MPT**  \n   Delta MPT ì´í›„ì— ì¡°íšŒë˜ëŠ” MPTì´ë‹¤.\n3. **Snapshot MPT**  \n   ì›ë³¸ì´ë¼ê³  í•  ìˆ˜ ìˆëŠ” MPTì´ë‹¤. ì „ì²´ blockchain dataë¥¼ ì €ì¥í•˜ë©°, diskì— ì¡´ì¬í•œë‹¤.\n4. **Flat KV Store**  \n   readì‹œì— ê°€ì¥ ë§ˆì§€ë§‰ì— ì¡°íšŒëœë‹¤. ì´ ì—­ì‹œë„ ì „ì²´ blockchain dataë¥¼ ì €ì¥í•˜ì§€ë§Œ, ì°¨ì´ì ì´ë¼ë©´ keyë¥¼ pathë¡œ í•˜ì—¬ ì¡°íšŒí•˜ëŠ” MPTì™€ ë‹¤ë¥´ê²Œ key, value storeí˜•íƒœì´ë‹¤.  \n   ê·¸ë ‡ê¸°ì— snapshot MPTì™€ ë™ì¼í•˜ê²Œ diskì— ì¡´ì¬í•˜ì§€ë§Œ, ë” ë¹ ë¥´ë‹¤ê²Œ ì¡°íšŒê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤.  \n   snapshot MPTë¥¼ ì¡°íšŒí•˜ëŠ” ëŒ€ì‹ ì— ì´ë¥¼ í†µí•´ì„œ ì¡°íšŒë¥¼ í•œë‹¤ë©´, keyë¥¼ í†µí•´ì„œ ë°”ë¡œ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” ë°©ì‹ì´ê¸° ë•Œë¬¸ì— read IO amplicationì„ íš¨ê³¼ì ìœ¼ë¡œ ì¤„ì¼ ìˆ˜ ìˆë‹¤.\n\nìœ„ì˜ ê¹Œì§€ëŠ” readì‹œì— ìµœì í™”ë¥¼ ìˆ˜í–‰í•˜ì˜€ë‹¤ë©´, write ì‹œì—ëŠ” ì´ë ‡ê²Œ ê³„ì¸µí™”ë¥¼ í•´ë‘ì—ˆê¸° ë•Œë¬¸ì— diskì— writeí•˜ëŠ” ë™ì•ˆì˜ ì—¬ìœ ê°€ ìƒê¸¸ ìˆ˜ ìˆë‹¤. LMPTì—ì„œëŠ” MPTì˜ ì ì€ ë³€í™”ì¼ ê²½ìš°ì—ëŠ” delta MPTì— ì €ì¥í•˜ê³  ìˆë‹¤ê°€ periodic checkpointë¥¼ ë‘ê³ , í•´ë‹¹ ì‹œì ë§ˆë‹¤ delta MPTì˜ ë³€ê²½ì‚¬í•­ì€ intermediate MPT, intermediate MPTì˜ ë³€ê²½ ë‚´ìš©ì€ snapshot MPTì— í•©ì¹œë‹¤. ë”°ë¼ì„œ, write ë™ì‘ì€ ì‹œê°„ì°¨ë¥¼ ë‘ê³  **batch ë‹¨ìœ„**ë¡œ **verificationê³¼ëŠ” ë…ë¦½ì **ìœ¼ë¡œ ì§„í–‰ëœë‹¤. ì´ëŠ” ê²°êµ­ ë³‘ë ¬ì ìœ¼ë¡œ IO ì‘ì—…ì„ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ì—¬ì§€ë¥¼ ë§Œë“¤ì–´ì¤€ë‹¤.\n\n> <mark>**[Design] Structure**</mark>\n\nì–´ë–»ê²Œ ì‹¤ì œë¡œ ì´ë¥¼ êµ¬í˜„í–ˆëŠ”ì§€ì— ëŒ€í•œ outlineì„ ì œì‹œí•˜ë©´ ë‹¤ìŒê³¼ ê°™ë‹¤. (OpenEthereumì€ Rustë¥¼ ì´ìš©í•˜ê¸° ë•Œë¬¸ì— LMPTë„ Rustì— ê¸°ë°˜í•œ codeì´ë‹¤. psuedo codeì´ê¸° ë•Œë¬¸ì— ë¬¸ë²•ì€ ë‹¤ì†Œ)\n\n```rust\nstruct Trie {\n  root: uint256,\n  kv:   Map\n}\nstruct LMPT {\n  delta, interm:  Trie, // In memory\n  snapshot:       Trie, // In Disk\n  flat:           Map   // In Disk\n}\n```\n\nìœ„ì—ì„œ ì œì‹œí•œ ì „ì²´ êµ¬ì„±ìš”ì†Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ delta, intermedidate, snapshot mptë¥¼ ì •ì˜í•˜ê³  flatë¥¼ ì •ì˜í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤.\n\n> <mark>**[Design] Read/Write**</mark>\n\nì‹¤ì œë¡œ Writeì™€ ReadëŠ” ì•„ë˜ì™€ ê°™ì´ ìˆ˜í–‰ë˜ì–´ì§„ë‹¤. ì½”ë“œëŠ” ë…¼ë¬¸ì„ ì°¸ì¡°í•˜ì˜€ì§€ë§Œ, ì„¤ëª…ì€ ì§ì ‘ ì‘ì„±í•˜ì˜€ë‹¤.\n\n```rust\nT := LMPT()\n\nfn write_LMPT(k, v) {\n  root := T.delta.put(T.delta.root, k, v) // put new k, v data and get recomputed root hash\n  T.delta.root := root                    // set new root\n}\n\nfn read_LMPT(k, auth_proof) -> <v, p> {\n  // get value and path from delta mpt with key\n  <v, p1> := T.delta.get(T.delta.root, k)\n  // check whether value is exist or not\n  // if exist, then return value and path\n  // if not exist, then we get a adjacent path from delta MPT and store it in p1.\n  if v is present\n    return <v, p1>\n  // get value and path from intermediate mpt with key\n  <v, p2> := T.interm.get(T.interm.root, k)\n  // check whether value is exist or not\n  // if exist, then return value and path(p1 is adjacent path in delta, p2 is real path in intermediate MPT)\n  // if not exist, then we get a adjacent path from intermediate MPT and store it in p2.\n  if v is present\n    return <v, p1 + p2>\n  // if client want authneticated read(when they can't have authenticity), \n  // then request to snapshot MPT and return result\n  // else then request to flat kv store and return result without path.\n  if auth_proof\n    <v, p3> := T.snapshot.get(T.snapshot.root, k)\n    return <v, p1 + p2 + p3>\n  else\n    v := T.flat.get(k)\n    return <v, dummy>\n}\n```\n\nê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´, ê²°êµ­ writeì˜ ê²½ìš°ì—ëŠ” ë‹¤ìŒ ì ˆì°¨ê°€ ëì¸ ê²ƒì´ë©°,\n\n1. key, valueë¥¼ ë°›ì•„ì„œ delta MPTì— ì €ì¥í•œë‹¤.\n2. ë³€ê²½ëœ root hashë¥¼ delta MPTì— ì ìš©í•œë‹¤.\n\nreadì˜ ê²½ìš°ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì ˆì°¨ê°€ ëì¸ ê²ƒì´ë‹¤.\n\n1. delta MPTë¥¼ ìš°ì„  ì¡°íšŒí•œë‹¤.\n2. intermediate MPTë¥¼ ë‹¤ìŒìœ¼ë¡œ ì¡°íšŒí•œë‹¤.\n3. ë§Œì•½, ì¶œì²˜ê°€ í™•ì‹¤í•œ ìš”ì²­ì¸ ê²½ìš° auth_proofê°€ í•„ìš”ì—†ìœ¼ë¯€ë¡œ, flat KV storeë¥¼ ì¡°íšŒí•œë‹¤.\n4. auth_proofê°€ í•„ìš”í•˜ë‹¤ë©´, snapshot MPTë¥¼ ì¡°íšŒí•œë‹¤.\n\n> <mark>**[Design] Merge**</mark>\n\nwrite ê³¼ì •ì—ì„œëŠ” delta MPTì—ë§Œ ì¶”ê°€ë¥¼ ìˆ˜í–‰í–ˆì—ˆë‹¤. ì•„ë˜ì—ì„œëŠ” ì‹¤ì œë¡œ ë³€ê²½ì‚¬í•­ì„ snapshot MPTì™€ flat KV storeì— ì ìš©í•œ ê²ƒì´ë‹¤.\n\n```rust\n// merge intermediate MPT to snapshot MPT and flat KV store\nfn merge_compute(T) -> (root, flat) {\n  flat := T.flat            \n  root := T.snapshot.root   \n  for <k, v> in T.interm.kv(T.interm.root)\n    root := T.snapshot.append(root, k, v)\n    flat := flat.set(k, v)\n  return (root, flat) \n}\n\n// reconfigure flat, snapshot root, intermediate MPT, delta MPT\nfn merge_update(T, root, flat) {\n  T.flat := flat\n  T.snapshot.root := root\n  T.interm := T.delta\n  T.interm.root := T.delta.root\n  T.delta := Trie()\n  T.delta.root := None\n}\n```\n\nì´ ê³¼ì •ë„ ê°„ë‹¨í•˜ê²Œ ìš”ì•½í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. merge_compute, merge_updateê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ì •í•œë‹¤.\n2. merge_computeì—ì„œëŠ” intermediate MPTì˜ dataë¥¼ ëª¨ë‘ snapshot MPTì™€ flat KV storeì— ì¶”ê°€í•œë‹¤.\n3. merge_updateì—ì„œëŠ” intermediate MPTëŠ” ì´ë¯¸ ì ìš©ì´ ì™„ë£Œë˜ì—ˆê¸° ë•Œë¬¸ì— delta MPTë¥¼ intermediate MPTë¡œ ë³€ê²½í•œ í›„, delta MPTë¥¼ ë¹„ì–´ ìˆëŠ” MPTë¡œ ë³€ê²½í•œë‹¤.\n4. ë§¤ ì£¼ê¸°ê°€ ë  ë•Œë§ˆë‹¤ merge_computeì™€ merge_updateê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤.\n\nìœ„ methodê°€ ì¤‘ìš”í•œ ì ì€ ë°”ë¡œ transactionì˜ write/readì™€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì´ë‹¤. ì¦‰, diskì— dataë¥¼ write í•˜ê¸° ìœ„í•´ì„œ ì‹¤ì œ transaction ì²˜ë¦¬ì— waitingì´ í•„ìš”ì—†ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n> <mark>**[Design] Flush**</mark>\n\nìœ„ì—ì„œ ì œì‹œí•œ Methodë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì ìš©í•¨ìœ¼ë¡œì„œ ë‹¤ìŒê³¼ ê°™ì´ Ethereum stateë¥¼ updateí•˜ê³ , ë¬´ê²°í•˜ê²Œ ìœ ì§€í•  ìˆ˜ ìˆë‹¤.\n\n```rust\nblock_cnt := 0\nmerge_interval := 100     // you can set this constant\n\nT := LMPT(genesis_state)  // setup initial state\n\nwhile Block is processing\n  for transaction in Block\n    T.update_trie(transaction)                  // apply transaction to LMPT\n  block_cnt += 1\n  if block_cnt % merge_interval == 0\n    Wait for last spawned thread to end         // wait until previous thread finished.\n    merge_update(T, root, flat)               \n    spawn_thread(root, flat=merge_compute(T))   // make new thread for merging\n```\n\nì´ ê³¼ì •ì˜ ìš”ì•½ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. merge_intervalë¥¼ ì›í•˜ëŠ” ê°’ìœ¼ë¡œ ì´ˆê¸°í™”í•œë‹¤. (ì´ ê°’ì— ëŒ€í•´ì„œ ë…¼ë¬¸ì—ì„œëŠ” ì œì‹œí•˜ì§€ ì•ŠìŒ)\n2. ì´ˆê¸° genesis_stateë¥¼ í†µí•´ LMPTë¥¼ ì´ˆê¸°í™”í•œë‹¤.\n3. blockchainì˜ blockì„ ì²˜ë¦¬í•˜ë„ë¡ í•œë‹¤. ìƒˆë¡œìš´ blockì— ëŒ€í•œ ì²˜ë¦¬ë„ ì´ì— í¬í•¨ëœë‹¤.\n4. ê·¸ ê³¼ì •ì—ì„œ íŠ¹ì • intervalì´ ë˜ë©´, ê¸°ì¡´ merge_computeë¥¼ ìˆ˜í–‰í•˜ëŠ” threadê°€ ìˆëŠ”ì§€ë¥¼ í™•ì¸í–ˆë‹¤ê°€ backgroundë¡œ merge_computeë¥¼ ì‹¤í–‰í•˜ëŠ” threadë¥¼ ìƒì„±í•œë‹¤.\n\n## Evaluation\n\në³¸ ë…¼ë¬¸ì—ì„œëŠ” í‰ê°€ë¥¼ ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‹¤í—˜ì„ ìˆ˜í–‰í•œë‹¤.\n\n|       | data structure | workload              |\n| :---- | :------------- | :-------------------- |\n| Test1 | MPT vs LMPT    | simple payment        |\n| Test2 | MPT vs LMPT    | ETC-20 token (Tether) |\n\nì—¬ê¸°ì„œ ì‹¤í—˜ ì‹œì— ê³ ë ¤í•œ ì‚¬í•­ì€ ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. ì‹¤ì œì™€ ê°™ì€ ìƒí™©ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì‹¤ì œ Ethereum transaction 500,000ê°œë¥¼ í™œìš©í•œ benchmarkë¥¼ ë§Œë“¤ì—ˆë‹¤.\n2. ë˜í•œ, ë˜ ë‹¤ë¥¸ insightë¥¼ ì–»ê¸° ìœ„í•´ì„œ ê° addressê°„ì˜ ê³ ë¥´ë©´ì„œë„ randomí•˜ê²Œ transactionì„ ë³´ë‚´ë„ë¡ í•˜ëŠ” Random senders traces benchmarkë„ ë§Œë“¤ì—ˆë‹¤.\n3. ë˜í•œ, ê°„ë‹¨í•œ paymentì˜ ê²½ìš°ì™€ ë³µì¡í•œ smart contractì— ì˜í•´ ë™ì‘í•˜ëŠ” ETC-20 token ì¤‘ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” Tether tokenì„ í™œìš©í•œ ë¹„êµë„ ìˆ˜í–‰í•˜ì˜€ë‹¤.\n\nê²°ê³¼ì ìœ¼ë¡œ stateë¡œ ë³´ê´€í•´ì•¼í•  accountì˜ ìˆ˜ê°€ ë§ì•„ì§ˆ ìˆ˜ë¡ LMPTì™€ MPT ì‚¬ì´ì˜ ì°¨ì´ë¥¼ ëª…í™•í•˜ê²Œ ë³¼ ìˆ˜ ìˆëŠ” í˜•íƒœë¥¼ ë³´ì—¬ì¤€ë‹¤. ì´ ì°¨ì´ëŠ” ë” ë³µì¡í•œ ETC-20 tokenì—ì„œ ë” ëª…í™•í•˜ê²Œ ë“¤ì–´ë‚˜ê³  ì„±ëŠ¥ ì°¨ì´ëŠ” ì ê²ŒëŠ” 1.2ë°°ì—ì„œ 6ë°° ì´ìƒê¹Œì§€ë„ ë²Œì–´ì§€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ í†µí•´ì„œ ê²°ê³¼ì ìœ¼ë¡œ cacheë¥¼ í™œìš©í•˜ì—¬ ë” íš¨ìœ¨ì ì¸ Transaction ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤ëŠ” ê²ƒì´ë‹¤.\n\n## Related Work\n\ní•´ë‹¹ ë…¼ë¬¸ì€ ê²°êµ­ Blockchainì˜ MPT êµ¬í˜„ì„ ë³€í˜•í•˜ì—¬ íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì œì‹œí•˜ì˜€ë‹¤. ì´ì™¸ì—ë„ TPSë¥¼ í–¥ìƒì‹œí‚¤ê¸° ìœ„í•œ ì—¬ëŸ¬ ë°©ë²•ì´ ì œì‹œë˜ì—ˆë‹¤. í•˜ì§€ë§Œ, LMPTëŠ” ì´ëŸ¬í•œ ì—°êµ¬ë“¤ë³´ë‹¤ ì• ì„  ê²°ê³¼ë¥¼ ë³´ì—¬ì¤€ë‹¤. ê·¸ ì´ìœ ë¥¼ ë“¤ê¸° ìœ„í•´ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì „ ì—°êµ¬ì™€ ë¹„êµí–ˆì„ ë•Œ ì–´ëŠ ì ì´ ì¢‹ì€ì§€ë¥¼ ë°íŒë‹¤.\n\n1. **Distributed MPTs**  \n   LMPTì™€ ê°€ì¥ ìœ ì‚¬í•œ ì—°êµ¬ ì‚¬ë¡€ë“¤ë¡œ MPTì˜ êµ¬í˜„ì„ ë³€ê²½í•˜ì—¬ ìµœì í™”ë¥¼ í•˜ê³ ì í•œ ì‚¬ë¡€ì´ë‹¤. í•˜ì§€ë§Œ, ì´ë“¤ ì¤‘ì—ì„œë„ LMPTê°€ ë” ìš°ìˆ˜í•˜ë‹¤ëŠ” ê²ƒì„ ë‹¤ìŒì„ í†µí•´ì„œ ì•Œ ìˆ˜ ìˆë‹¤.\n   - [ğŸ”— mLSM](https://www.usenix.org/conference/hotstorage18/presentation/raju)  \n     MPT ìì²´ë¥¼ ì—¬ëŸ¬ ê°œì˜ MPTë¡œ ë‚˜ëˆ„ì–´ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ íƒí•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ì„œ read, write ì‹œì— IO amplicationì„ ë§‰ì„ ìˆ˜ **ìˆì—ˆì§€ë§Œ**, ì˜¤íˆë ¤ write ì‹œì—ëŠ” ì—¬ëŸ¬ ë²ˆì˜ ì¤‘ë³µ writingìœ¼ë¡œ ì¸í•´ì„œ ë” ë§ì€ ë¹„ìš©ì´ ë°œìƒí•˜ì˜€ë‹¤.\n   - [ğŸ”— RainBlock](https://www.usenix.org/conference/atc21/presentation/ponnapalli)  \n     MPTë¥¼ shardingí•˜ì—¬ ë¶„ë°°í•˜ì—¬ ì €ì¥í•˜ëŠ” ë°©ì‹ì„ ì„ íƒí•˜ì˜€ë‹¤. ì´ë¥¼ í†µí•´ì„œ ì„±ëŠ¥ì„ ì˜¬ë¦¬ëŠ” ê²ƒì´ ê°€ëŠ¥í–ˆì§€ë§Œ, ì´ëŠ” ì „ì²´ì ì¸ Ethereum êµ¬í˜„ì„ ë°”ê¾¸ì–´ì•¼ í•œë‹¤. **í•˜ì§€ë§Œ**, LMPTëŠ” ì´ëŸ¬í•œ ë³€ê²½ì—†ì´ë„ clientë‹¨ì—ì„œ ì‰½ê²Œ êµ¬í˜„ ë° ë³€ê²½ì´ ê°€ëŠ¥í•˜ë‹¤.\n2. **Consensus protocols**  \n   consensus protocolì„ ë³€ê²½í•˜ì—¬ ìµœì í™”ë¥¼ í•˜ë ¤ëŠ” ì‹œë„ ì—­ì‹œ ë§ì•˜ë‹¤(HyperLedger Fabric, Prism, etc). **í•˜ì§€ë§Œ**, ì´ë¥¼ í†µí•´ì„œ storage bottleneckì„ í•´ê²°í•  ìˆ˜ëŠ” ì—†ë‹¤. ë”°ë¼ì„œ, í•´ë‹¹ ì—°êµ¬ì™€ consensus protocol ê´€ë ¨ ì—°êµ¬ëŠ” ìƒí˜¸ ë³´ì™„ì ì¸ ê´€ê³„ë¡œ, ê°™ì´ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ë” ì¢‹ì€ ì„±ëŠ¥ì„ ë³´ì¼ ê²ƒì´ë¼ê³  ê¸°ëŒ€í•˜ê³  ìˆë‹¤.\n3. **Sharding in Blockchains**  \n   shardingì€ Ethereum v2ì˜ architecture ì¤‘ í•˜ë‚˜ë¡œ ì œì‹œëœ ë‚´ìš© ì¤‘ í•˜ë‚˜ë¡œ ì´ë¥¼ ì´ìš©í•˜ê²Œ ë˜ë©´ transaction ì‹¤í–‰ì„ ë¶„ì‚°í•˜ëŠ” íš¨ê³¼ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆë‹¤. í•˜ì§€ë§Œ, shardê°„ì˜ ì¼ê´€ì„±ì„ ìœ ì§€í•˜ê¸° ìœ„í•œ protocolê³¼ shardê°„ cross-shard í†µì‹ ìœ¼ë¡œ ì¸í•œ overheadë„ ê³ ë ¤í•´ì•¼ í•œë‹¤. ì´ëŸ¬í•œ ë‚´ìš©ì„ ì œì³ë‘ê³ ë„ ê²°êµ­ì€ shardingê³¼ LMPTëŠ” ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— consensus protocolê³¼ ê°™ì´ ë…ë¦½ì ìœ¼ë¡œ ë³´ì•„ë„ ë¬´ê´€í•˜ë‹¤.\n\n## Opinion\n\nTPSë¥¼ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë°©ë²•ì€ Bitcoinì´ ì²˜ìŒ ìƒê¸°ê³  ë‚˜ì„œë¶€í„° ê³„ì†í•´ì„œ ê³ ë ¤ë˜ê³  ìˆëŠ” ë¬¸ì œë¼ê³  ìƒê°í•œë‹¤. í•´ë‹¹ ë…¼ë¬¸ì—ì„œëŠ” ê¸°ì¡´ ë…¼ë¬¸ì´ ì˜€ë˜ mLSMì—ì„œ ì˜ê°ì„ ì–»ì–´ì„œ ì´ë¥¼ ë” ë°œì „ì‹œí‚¨ ë°©ë²•ì„ ì°¾ì•˜ë‹¤ê³  ìƒê°í•œë‹¤. ë‹¨ìˆœíˆ ì—¬ëŸ¬ ê°œì˜ MPTë¥¼ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ë„˜ì–´ì„œ ì‹¤ì œ ë¬¸ì œë¥¼ ëª…í™•í•˜ê²Œ ì •ì˜í•´ì„œ ì—¬ëŸ¬ ê°œì˜ MPTë¡œ ì–´ë–»ê²Œ ì´ë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ì§€ë¥¼ ëª…í™•í•˜ê²Œ ì œì‹œí•œ ê²ƒ ê°™ë‹¤. ì—¬ëŸ¬ ê°œì˜ MPTë¥¼ í†µí•´ì„œ read ê³¼ì •ì—ì„œ localityë¥¼ í™•ë³´í–ˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ merge ê³¼ì •ì„ write ê³¼ì •ì—ì„œ ë¶„ë¦¬í•¨ìœ¼ë¡œì„œ ê¸°ì¡´ transactionì´ ê°€ì§€ë˜ bottleneckì„ í•´ì†Œí•œ ê²ƒì´ë‹¤. ì´ ì ì´ ëª…í™•í•˜ê²Œ ë°›ì•„ë“¤ì—¬ì ¸ì„œ í•´ë‹¹ ë¶„ì•¼ ì „ê³µì´ ì•„ë‹˜ì—ë„ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆì—ˆë‹¤. í•˜ì§€ë§Œ, ì•„ì‰½ê²Œë„ ì‹¤ì œ êµ¬í˜„ codeë¥¼ ì°¾ì„ ìˆ˜ëŠ” ì—†ì—ˆê¸°ì— flushë‹¨ê³„ì—ì„œ ì‚¬ìš©ëœ merge_intervalì˜ ì •í™•í•œ ê°’ì´ ê¶ê¸ˆí–ˆì§€ë§Œ ì°¾ì§€ëŠ” ëª»í–ˆë‹¤. ë˜, ì´ ì„ê³„ê°’ì´ ìƒí™©ì— ë”°ë¼ì„œ ì„±ëŠ¥ì— í° ì˜í–¥ì„ ë¯¸ì¹˜ëŠ” ìš”ì†Œë¼ê³  íŒŒì•…ì„ í•˜ê³  ìˆì—ˆëŠ”ë° ì´ë¥¼ ì•Œ ìˆ˜ ì—†ì–´ì„œ ì•„ì‰¬ì› ë‹¤.\n\nì•„ë§ˆ ì—¬ê¸°ì„œ í›„ì† ì—°êµ¬ë¥¼ ì§„í–‰í•  ìˆ˜ ìˆë‹¤ë©´, í•´ë‹¹ ì„ê³„ê°’ì„ ML, DL, RLì„ ì´ìš©í•´ì„œ ì¢€ ë” íš¨ê³¼ì ìœ¼ë¡œ ì ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ì—°êµ¬ ë°©í–¥ì´ ë  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.\nì´ëŸ¬í•œ ì£¼ì œë¥¼ ì²˜ìŒ ì ‘í–ˆê³ , Ethereumì˜ êµ¬í˜„ì— ëŒ€í•´ì„œë„ ì „í˜€ ì•„ëŠ”ê²Œ ì—†ì—ˆê¸° ë•Œë¬¸ì— ë‹¤ì–‘í•œ ì‚¬ì „ ì¡°ì‚¬ë¥¼ ìš”êµ¬í–ˆë˜ ë…¼ë¬¸ì´ì˜€ë‹¤. í•˜ì§€ë§Œ, Backgroundì— ëŒ€í•œ ì„¤ëª…ë„ ìì„¸íˆ ë‚˜ì™€ìˆê³ , Idea ìì²´ê°€ ëª…í™•í–ˆê¸°ì— í›Œë¥­í•˜ê³  ê°€ë…ì„±ì´ ë†’ì€ ë…¼ë¬¸ì´ ëœ ê±° ê°™ë‹¤.\n\n## Reference\n\n- Jemin Andrew Choi, Sidi Mohamed Beillahi, Peilun Li, Andreas Veneris, Fan Long [`\"LMPTs: Eliminating Storage Bottlenecks for Processing Blockchain Transactions\"`](https://ieeexplore.ieee.org/document/9805484/), May 2022\n- Ao Li, Jemin Andrew Choi, Fan Long [`\"Securing Smart Contract with Runtime Validation\"`](https://aoli.al/papers/solythesis-pldi20.pdf), June 2020\n- Tumbnail : Photo by [Shubham Dhage](https://unsplash.com/@theshubhamdhage?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/blockchain?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)\n- Merkle Patricia Image : <https://ethereum.stackexchange.com/questions/268/ethereum-block-architecture>\n- Pandian Raju, Soujanya Ponnapalli, Evan Kaminsky, Gilad Oved, and Zachary Keener, University of Texas at Austin; Vijay Chidambaram, University of Texas at Austin and VMware Research; Ittai Abraham, VMware Research, [`mLSM: Making Authenticated Storage Faster in Ethereum`](https://www.usenix.org/conference/hotstorage18/presentation/raju), July 2018\n- Soujanya Ponnapalli, Aashaka Shah, and Souvik Banerjee, University of Texas at Austin; Dahlia Malkhi, Diem Association and Novi Financial; Amy Tai, VMware Research; Vijay Chidambaram, University of Texas at Austin and VMware Research; Michael Wei, VMware Research, [`RainBlock: Faster Transaction Processing in Public Blockchains`](https://www.usenix.org/conference/atc21/presentation/ponnapalli), July 2021\n","slug":"lmpt","date":"2022-10-28 17:17","title":"LMPT","category":"Paper","tags":["Blockchain","Ehtereum","MPT"],"desc":"Ethereumì˜ TPSë¥¼ Client ë‹¨ì—ì„œ í–¥ìƒ ì‹œí‚¤ê¸° ìœ„í•œ ë…¸ë ¥ìœ¼ë¡œ, LMPTëŠ” Layered Merkle Partical Trieì˜ ì•½ìì´ë‹¤. ì´ëŠ” ê¸°ì¡´ Ethereumì—ì„œ ì‚¬ìš©í•˜ë˜ MPTì˜ ì„±ëŠ¥ í–¥ìƒì„ ìœ„í•˜ì—¬ ì œê¸°ëœ ì•„ì´ë””ì–´ë¡œ Computer Architectureì—ì„œ í”í•˜ê²Œ ì‚¬ìš©ë˜ëŠ” cacheë¥¼ ì ‘ëª©í•œ ë°©ë²•ì´ë‹¤. (í•´ë‹¹ ë…¼ë¬¸ ICBC 2022ì˜ ë…¼ë¬¸ ì¤‘ LMPTë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ìš”ì•½ê¸€ì´ë‹¤.)","thumbnailSrc":"https://euidong.github.io/images/blockchain-thumbnail.jpg"}],"params":{"subject":"Blockchain"}},"__N_SSG":true}