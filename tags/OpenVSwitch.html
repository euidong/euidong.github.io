<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="initial-scale=1.0, width=device-width"/><meta property="og:type" content="blog"/><meta property="og:site_name" content="JustLog"/><meta property="og:image" content="https://euidong.github.io/logo192.png"/><title>#OpenVSwitch | JustLog</title><meta name="description" content="#OpenVSwitch ê´€ë ¨ Posting"/><meta property="og:description" content="#OpenVSwitch ê´€ë ¨ Posting"/><meta property="og:title" content="#OpenVSwitch | JustLog"/><link rel="canonical" href="https://euidong.github.io/tags/OpenVSwitch"/><meta property="og:url" content="https://euidong.github.io/tags/OpenVSwitch"/><meta name="next-head-count" content="11"/><link rel="icon" href="https://euidong.github.io/favicon.png"/><link rel="apple-touch-icon" href="https://euidong.github.io/logo192.png"/><link rel="preload" href="/_next/static/css/d4ec5c8b3df09443.css" as="style"/><link rel="stylesheet" href="/_next/static/css/d4ec5c8b3df09443.css" data-n-g=""/><link rel="preload" href="/_next/static/css/6dc16d084a5153e5.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6dc16d084a5153e5.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" id="Adsense-id" data-ad-client="ca-pub-7452732177557701" async="" defer="" data-nscript="beforeInteractive"></script><script src="/_next/static/chunks/webpack-9b312e20a4e32339.js" defer=""></script><script src="/_next/static/chunks/framework-81da43a8dcd978d9.js" defer=""></script><script src="/_next/static/chunks/main-7b6c38cbad60dfcf.js" defer=""></script><script src="/_next/static/chunks/pages/_app-e1becca314de3cda.js" defer=""></script><script src="/_next/static/chunks/675-ae8e8a351ce30ae2.js" defer=""></script><script src="/_next/static/chunks/pages/tags/%5Bsubject%5D-0fc8f67b45fbbd0f.js" defer=""></script><script src="/_next/static/VEdUcpPdkgI5huIkFqtJ7/_buildManifest.js" defer=""></script><script src="/_next/static/VEdUcpPdkgI5huIkFqtJ7/_ssgManifest.js" defer=""></script><script src="/_next/static/VEdUcpPdkgI5huIkFqtJ7/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><div class="Layout_wrapper__dKJSz root"><header class="Layout_header__XosLl" style="position:static"><div><button tabindex="1" class="SideBarToggler_search_bar_toggler__CEuUg"><svg stroke="currentColor" fill="none" stroke-width="0" viewBox="0 0 24 24" height="35px" width="35px" xmlns="http://www.w3.org/2000/svg"><path d="M2 6C2 5.44772 2.44772 5 3 5H21C21.5523 5 22 5.44772 22 6C22 6.55228 21.5523 7 21 7H3C2.44772 7 2 6.55228 2 6Z" fill="currentColor"></path><path d="M2 12.0322C2 11.4799 2.44772 11.0322 3 11.0322H21C21.5523 11.0322 22 11.4799 22 12.0322C22 12.5845 21.5523 13.0322 21 13.0322H3C2.44772 13.0322 2 12.5845 2 12.0322Z" fill="currentColor"></path><path d="M3 17.0645C2.44772 17.0645 2 17.5122 2 18.0645C2 18.6167 2.44772 19.0645 3 19.0645H21C21.5523 19.0645 22 18.6167 22 18.0645C22 17.5122 21.5523 17.0645 21 17.0645H3Z" fill="currentColor"></path></svg></button><nav class="SideBar_side_bar__wrapper--close__8Nwnr"><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/">Home</a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/tags">Tags</a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/Algorithm">Algorithm<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->11<!-- -->)<!-- --></span></a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/Computer%20Architecture">Computer Architecture<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->7<!-- -->)<!-- --></span></a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/Tech">Tech<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->17<!-- -->)<!-- --></span></a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/Web">Web<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->3<!-- -->)<!-- --></span></a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/Memoir">Memoir<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->3<!-- -->)<!-- --></span></a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/Paper">Paper<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->3<!-- -->)<!-- --></span></a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/Network">Network<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->11<!-- -->)<!-- --></span></a><a class="SideBar_side_bar__li__crDBH" tabindex="-1" href="/categories/AI">AI<!-- --><span class="SideBar_side_bar__li__cnt__9QV_z">(<!-- -->20<!-- -->)<!-- --></span></a></nav></div><a class="Logo_logo___yD0t" tabindex="1" href="/"></a><div><button class="SearchBarToggler_search_bar_toggler__3dHbA" tabindex="2"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="25px" width="25px" xmlns="http://www.w3.org/2000/svg"><path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"></path></svg></button></div></header><section><div class="RowCard_row_card__list__background___xFj5"><h1 class="RowCard_row_card__list__title__t4a2h"> OpenVSwitch</h1><label class="RowCard_row_card__list__select__wrapper__TZ4_9"><select class="RowCard_row_card__list__select__dxkxA"><option class="RowCard_row_card__list__select__option__GRKZU">ìµœì‹ ìˆœ<!-- --></option><option class="RowCard_row_card__list__select__option__GRKZU">AtoZ<!-- --></option><option class="RowCard_row_card__list__select__option__GRKZU">ZtoA<!-- --></option></select></label><ul class="RowCard_row_card__list__wrapper__5Gtgi"><div class="RowCard_row_card__wrapper__kohuv"><a class="RowCard_row_card__thumbnail__wrapper__bedY4" href="/posts/sdn-tutorial"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:200px;height:200px;background:none;opacity:1;border:0;margin:0;padding:0;position:relative"><img alt="SDN Tutorial" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="fixed" class="RowCard_row_card__thumbnail__Dh_84" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover"/><noscript><img alt="SDN Tutorial" srcSet="https://euidong.github.io/images/sdn-tuto-hero.jpg?imwidth=256 1x, https://euidong.github.io/images/sdn-tuto-hero.jpg?imwidth=640 2x" src="https://euidong.github.io/images/sdn-tuto-hero.jpg?imwidth=640" decoding="async" data-nimg="fixed" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%;object-fit:cover" class="RowCard_row_card__thumbnail__Dh_84" loading="lazy"/></noscript></span></a><div class="RowCard_row_card__tray__trcA5"><a class="RowCard_row_card__tray__title__lVniM" tabindex="-1" href="/posts/sdn-tutorial">SDN Tutorial</a><div class="RowCard_row_card__tray__date__3cY_j">2022ë…„ 6ì›” 3ì¼ 19ì‹œ 54ë¶„</div><ul class="RowCard_row_card__tray__tag__qXmOl"><a class="RowCard_row_card__tray__tag__li__7_3Zt" tabindex="-1" href="/tags/SDN"># <!-- -->SDN<!-- --></a><a class="RowCard_row_card__tray__tag__li__7_3Zt" tabindex="-1" href="/tags/Mininet"># <!-- -->Mininet<!-- --></a><a class="RowCard_row_card__tray__tag__li__7_3Zt" tabindex="-1" href="/tags/OpenFlow"># <!-- -->OpenFlow<!-- --></a><a class="RowCard_row_card__tray__tag__li__7_3Zt" tabindex="-1" href="/tags/ONOS"># <!-- -->ONOS<!-- --></a><a class="RowCard_row_card__tray__tag__li__7_3Zt" tabindex="-1" href="/tags/OpenVSwitch"># <!-- -->OpenVSwitch<!-- --></a></ul></div></div></ul></div></section><footer class="Layout_footer__EL5v8"><div class="Layout_footer__copyright__r5baC"><span>Copyright Â© euidong</span><br/><span>ëª¨ë“  ì»¨í…ì¸ ì— ëŒ€í•œ ì €ì‘ê¶Œì€ ì‘ì„±ìì—ê²Œ ì¡´ì¬í•©ë‹ˆë‹¤. <!-- --><br/>ë¶ˆë²• ë³µì œë¥¼ í†µí•œ ìƒì—…ì  ì‚¬ìš©ì„ ì ˆëŒ€ì ìœ¼ë¡œ ê¸ˆì§€í•©ë‹ˆë‹¤. <!-- --><br/>ë‹¨, ë¹„ìƒì—…ì  ì´ìš©ì˜ ê²½ìš° ì¶œì²˜ ë° ë§í¬ë¥¼ ì ìš©í•œë‹¤ë©´ ììœ ë¡­ê²Œ ì‚¬ìš©ê°€ëŠ¥ í•©ë‹ˆë‹¤.<!-- --></span><span>Also I use photos by<!-- --> <!-- --><a href="https://unsplash.com/@lorenzoherrera?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" tabindex="-1">Lorenzo Herrera</a> <!-- -->on<!-- --> <!-- --><a href="https://unsplash.com/s/photos/tech?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" tabindex="-1">Unsplash</a></span></div><div class="Layout_footer__contents__YZWSm"><a class="Layout_footer__contents__link__K_TKH" href="https://github.com/euidong" target="_blank" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="60" width="60" xmlns="http://www.w3.org/2000/svg"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg><span>github</span></a><a class="Layout_footer__contents__link__K_TKH" href="https://euidong.github.io/portfolio" target="_blank" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16" height="60" width="60" xmlns="http://www.w3.org/2000/svg"><path d="M6 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-5 6s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H1zM11 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 1-.5-.5zm.5 2.5a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1h-4zm2 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2zm0 3a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1h-2z"></path></svg><span>portfolio</span></a><a class="Layout_footer__contents__link__K_TKH" href="https://chrome.google.com/webstore/detail/bonfire/nkooidijgbppkojdgkoafcoppnohdfka?hl=ko" target="_blank" rel="noreferrer"><svg stroke="currentColor" fill="currentColor" stroke-width="0" version="1.1" viewBox="0 0 16 16" height="60" width="60" xmlns="http://www.w3.org/2000/svg"><path d="M5.016 16c-1.066-2.219-0.498-3.49 0.321-4.688 0.897-1.312 1.129-2.61 1.129-2.61s0.706 0.917 0.423 2.352c1.246-1.387 1.482-3.598 1.293-4.445 2.817 1.969 4.021 6.232 2.399 9.392 8.631-4.883 2.147-12.19 1.018-13.013 0.376 0.823 0.448 2.216-0.313 2.893-1.287-4.879-4.468-5.879-4.468-5.879 0.376 2.516-1.364 5.268-3.042 7.324-0.059-1.003-0.122-1.696-0.649-2.656-0.118 1.823-1.511 3.309-1.889 5.135-0.511 2.473 0.383 4.284 3.777 6.197z"></path></svg><span>chat</span></a></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"content":"\n## Intro\n\nSDNì„ ì‹¤ì œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ì–´ë ¤ìš´ ì¼ì´ë‹¤. ë”°ë¼ì„œ, Mininetì„ í™œìš©í•˜ì—¬ ê°€ìƒì˜ Topologyë¥¼ í†µí•´ì„œ ë¨¼ì € í…ŒìŠ¤íŒ…ì„ í•œ í›„ì— ì‹¤ì œë¡œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.\n\në”°ë¼ì„œ, í•´ë‹¹ Postingì—ì„œëŠ” `Mininet`, `OpenFlow`, `Open VSwitch`, `ONOS`ë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ Tutorialì„ ìˆ˜í–‰í•´ë³¼ ê²ƒì´ë‹¤. ì´ Postingì„ í†µí•´ì„œ ë‚¨ê¸°ê³ ì í•˜ëŠ” ê²ƒì€ SDNì„ í…ŒìŠ¤íŒ…í•˜ëŠ” ì ˆì°¨ë¥¼ ìµíˆëŠ” ê²ƒì´ë‹¤.\n\n## 0. Tools\n\në¨¼ì € ì‘ì„±ìì˜ ì‹¤í–‰í™˜ê²½ì€ MAC OS Xë¡œ ëŒ€ë¶€ë¶„ì˜ ì„¤ì •ì€ ëª¨ë‘ ë™ì¼í•˜ì§€ë§Œ `XTerminal`ì€ Window/MACì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì— Window ì „ìš©ì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤.\n\n- Host Machine\n  - Virtual Box : [ğŸ”— Download](https://www.virtualbox.org/wiki/Downloads) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.virtualbox.org/)\n    - VMì„ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•œ ë„êµ¬, OpenSourceì´ë©° ë¬´ë£Œì´ê¸° ë•Œë¬¸ì— ë§ì´ ì‚¬ìš©ëœë‹¤.(v6.1)\n  - Vagrant : [ğŸ”— Download](https://www.vagrantup.com/downloads) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.vagrantup.com/)\n    - Virtual Environment êµ¬ì¶•ì„ ìë™í™”í•˜ëŠ” ë„êµ¬(v2.2.19)\n  - XQuartz : [ğŸ”— Download](https://www.xquartz.org/releases/index.html) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.xquartz.org/)\n    - XTerminal ì‹œìŠ¤í…œìœ¼ë¡œ ì›ê²©ìœ¼ë¡œ Graphic ì‹œìŠ¤í…œì„ í˜¸ìŠ¤íŒ…í•˜ëŠ” ë„êµ¬ì´ë‹¤. ì¦‰, `ssh`ë¡œ ì ‘ì†í•œ ì‹œìŠ¤í…œì—ì„œ ì¶”ê°€ì ìœ¼ë¡œ terminalì„ ìƒì„±í•˜ê±°ë‚˜ GUIë¥¼ ìš”êµ¬í•˜ëŠ” applicationì„ ì‹¤í–‰ì‹œí‚¬ ë•Œ ì´ë¥¼ host machineì—ì„œ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ”ë‹¤.(v2.8.1)\n- Virtual Machine\n  - Mininet : [ğŸ”— Download](http://mininet.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](http://mininet.org/)\n    - Network Topologyë¥¼ ê°€ìƒìœ¼ë¡œ êµ¬ì„±í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì¶”ê°€ì ì¸ configuration / testingì´ ê°€ëŠ¥í•œ Virtual Environment Emulator(v2.3.0)\n  - OpenVSwitch : [ğŸ”— Download](https://www.openvswitch.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://www.openvswitch.org/)\n    - Virtual Switchë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” toolì´ë‹¤. ì´ë¥¼ í†µí•´ì„œ, Virtual Machine ë‚´ë¶€ì—ì„œ Virtual Switchë¥¼ ê°€ë™ì‹œí‚¬ ìˆ˜ ìˆë‹¤.OpenFlow Protocolì— ê¸°ë°˜í•œ ë‹¤ì–‘í•œ APIë¥¼ ë‚´ì¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì´ë¥¼ í†µí•´ì„œ Virtual Switchì˜ Configuration ë“±ê³¼ ê°™ì€ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.(v2.9.8)\n  - ONOS : [ğŸ”— Download](https://wiki.onosproject.org/download/) [ğŸ”— ê³µì‹ì‚¬ì´íŠ¸](https://wiki.onosproject.org/)\n    - Open Network Operation Systemìœ¼ë¡œ SDNì˜ Controller ì—­í• ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤. ë¿ë§Œ ì•„ë‹ˆë¼ WEB Interfaceë„ ì œê³µí•˜ë©°, ë‹¤ì–‘í•œ APIë¥¼ ì¶”ê°€ì ìœ¼ë¡œ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ìœ ìš©í•˜ë‹¤.(v2.5.7)\n\n## 1. Setup\n\nìœ„ì— ì œì‹œí•œ Toolì„ ëª¨ë‘ `Virtual Machine` ë‚´ë¶€ì— ì„¤ì¹˜í•´ì•¼í•˜ì§€ë§Œ, ìë™ìœ¼ë¡œ í•´ë‹¹ toolì„ ì„¤ì¹˜í•˜ëŠ” `Vagrantfile`ì„ ë§Œë“¤ì–´ë†“ì•˜ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•´ë„ ì¢‹ì„ ê²ƒì´ë‹¤. í•´ë‹¹ VagrantFileë¡œ buildí•˜ë©´ ì‹œê°„ì´ êµ‰ì¥íˆ ì†Œìš”ë  ìˆ˜ ìˆë‹¤. (ì¸í„°ë„· ìƒíƒœì— ë”°ë¼ ì²œì°¨ë§Œë³„ì´ì§€ë§Œ, ëŒ€ëµ 20ë¶„?)\n\n```bash\n$ git clone https://github.com/euidong/virtual-sdn-boilerplate\n$ cd virtual-sdn-boilerplate\n$ vagrant up\n# ì ‘ì†\n$ vagrant ssh\n```\n\n\u003e **Run ONOS**\n\n```bash\n# In Virtual Machine\n$ cd $ONOS_ROOT\n$ bazel run onos-local\n```\n\n## 2. Scenarioë¥¼ ì‘ì„±\n\nìš°ì„  ì–´ë–¤ ìƒí™©ì„ **emulation**í•  ê²ƒì¸ì§€ì— ëŒ€í•œ êµ¬ì²´ì ì¸ ê³„íšì´ í•„ìš”í•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë¨¼ì € êµ¬ìƒí•´ë³´ì. ì•„ë˜ ì˜ˆì‹œëŠ” ë‹¨ìˆœíˆ ë‚´ê°€ ìƒê°í•œ ì˜ˆì‹œì´ë¯€ë¡œ ì •í™•ì„±ì´ëŸ° ê²ƒì€ ìƒê°í•˜ê¸° ë³´ë‹¤ëŠ” íë¦„ë§Œì„ ìµí˜€ë³´ì.\n\n```plaintext\nğŸ’¡ Base Scenario\n\n1. í›„ì§€ì‚° ì¸ê·¼ì—ì„œ ê³„ì†í•´ì„œ í™”ì‚°í™œë™ì´ ê°ì§€ë˜ê³  ìˆë‹¤. ë˜í•œ, í›„ì§€ì‚°ì€ 100ë…„ ë‹¨ìœ„ë¡œ í­ë°œì„ í•´ì™”ëŠ”ë° ìµœê·¼ 170ì—¬ ë…„ ë™ì•ˆ í­ë°œì´ ì¡´ì¬í•˜ì§€ ì•Šê³  ìˆë‹¤. ì´ë¡œ ë¯¸ë£¨ì–´ë³´ì•˜ì„ ë•Œ í›„ì§€ì‚°ì˜ í™”ì‚°í­ë°œì€ ì–¼ë§ˆ ë‚¨ì§€ ì•Šì•˜ì„ ê²ƒì´ë¼ê³  ì¶”ì¸¡í•  ìˆ˜ ìˆë‹¤.\n2. í›„ì§€ì‚°ì—ì„œ í­ë°œì´ ë°œìƒí•˜ëŠ”ì§€ë¥¼ íŒŒì•…í•˜ê¸° ìœ„í•´ì„œ ê³³ê³³ì— ê´€ì¸¡ê¸°ê°€ í•„ìš”í•˜ë©°, ì´ë¥¼ ë¶„ì„í•  ì„¼í„°ê°€ ì•ˆì „ì„ ìœ„í•´ í›„ì§€ì‚° ì•„ë˜ì— ì¡´ì¬í•˜ë©° ë°±ì—… ì„œë²„ë¥¼ ë³„ë„ë¡œ ë‹¤ë¥¸ ê³µê°„ì— ë‘ê³  ìˆë‹¤.\n3. ê° ê´€ì¸¡ì†Œì—ì„œ ì„œë¡œ ê°„ ë°ì´í„° ê³µìœ ë„ ê³„ì†í•´ì„œ ë°œìƒí•˜ëŠ” ê²½ìš°ê°€ ë¹ˆë²ˆí•˜ë‹¤. =\u003e Horizontal trafficì´ ë§ë‹¤ -\u003e datacenterì™€ ìœ ì‚¬í•œ í˜•íƒœì˜ Network -\u003e Spine-Leaf êµ¬ì¡°ê°€ ì ì ˆ.\n```\n\n## 3. Topology êµ¬ì„± with Mininet\n\në¨¼ì €, topologyë¥¼ ì‘ì„±í•´ì•¼í•œë‹¤. ì´ë¥¼ ìœ„í•´ì„œ `Mininet`ì„ í™œìš©í•œë‹¤. ì´ì— ëŒ€í•œ ê°œë… ì •ë¦¬ëŠ” [ğŸ”— Mininet](/posts/mininet)ì•  í•´ë‘ì—ˆë‹¤. Base Scenarioì˜ 3ë²ˆ ì‚¬í•­ì—ì„œ ì•Œ ìˆ˜ ìˆë“¯ì´ ìš°ë¦¬ì˜ TopologyëŠ” Spine-Leaf êµ¬ì¡°ë¥¼ ê°–ëŠ” ê²ƒì´ ì ì ˆí•˜ë‹¤. ë”°ë¼ì„œ, ì´ë¥¼ ë¨¼ì € í‘œí˜„í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n\u003e **Source Code**\n\n- `/vagrant/example/mt-fuji/topo.py`\n\n```python\nfrom mininet.topo import Topo\n\nclass SpineLeaf(Topo):\n  def build(self):\n    s_num = 2\n    l_num = 5\n    h_num = 2\n    spines = []\n    leaves = []\n    hosts = []\n\n    for i in range(s_num):\n      spines.append(self.addSwitch('s%s%s' % (1, i+1)))\n    for i in range(l_num):\n      leaves.append(self.addSwitch('l%s%s' % (2, i+1)))\n      for j in range(s_num):\n        self.addLink(spines[j], leaves[i])\n      for j in range(h_num):\n        hosts.append(self.addHost('h%s%s' % (i+1, j+1)))\n        self.addLink(leaves[i], hosts[i * h_num + j])\n\ntopos = { 'spineleaf': (lambda: SpineLeaf()) }\n```\n\n- ì‹¤í–‰\n\n```bash\n$ sudo mn --mac --controller remote --switch ovs --custom /vagrant/example/mt-fuji/topo.py --topo=spineleaf\n```\n\n- ì‹¤í–‰ ê²°ê³¼\n  - ë¹¨ê°„ìƒ‰ : `Spine Switch`\n  - ì²­ë¡ìƒ‰ : `Leaf Switch`\n\n![Spine-Leaf Topology](/images/spine-leaf-topo.png)\n\n## 4. Test í™˜ê²½êµ¬ì¶•\n\nì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” Test í™˜ê²½ìš© ë„êµ¬ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.\n\n1. `ping` : íŠ¹ì • machine ê°„ì˜ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•˜ê¸° ìœ„í•´ì„œ ë§ì´ ì‚¬ìš©ë˜ì–´ì§„ë‹¤.\n2. `trace` : `ping`ê³¼ ìœ ì‚¬í•˜ì§€ë§Œ ì§€ë‚˜ì³ê°„ `hop`ì„ ëª¨ë‘ ì¡°íšŒ ê°€ëŠ¥í•˜ì—¬ ì¢€ ë” ì„¸ë¶€ì ì¸ ê²½ë¡œë¥¼ í™•ì¸í•  ë•Œ ìœ ìš©í•˜ë‹¤.\n3. `iperf` : clientì™€ server êµ¬ì¡°ë¡œ ì´ë£¨ì–´ì§€ë©°, `tcp`, `udp` packetì„ ì „ì†¡í•  ìˆ˜ ìˆë‹¤. íŠ¹ì • machineì—ì„œëŠ” `server`ë¡œ ì‹¤í–‰ì‹œí‚¤ê³ , ë‹¤ë¥¸ machineì—ì„œ í•´ë‹¹ `server`ë¡œ dataë¥¼ ë³´ë‚´ë„ë¡ í•  ìˆ˜ ìˆë‹¤. `ping`ë³´ë‹¤ ì£¼ê¸°ì ìœ¼ë¡œ, ëŒ€ìš©ëŸ‰ì˜ ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ê´€ì¸¡í•  ìˆ˜ ìˆë‹¤.\n4. `wireshark` : ì‹¤ì ¤ trafficì˜ ì´ë™ì„ GUIë¡œ ë³¼ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ë„êµ¬ì´ë‹¤.\n5. `ONOS WEB GUI` : ONOSì—ì„œëŠ” Webì„ í†µí•´ì„œ Network ìƒíƒœì™€ Trafficì„ ê´€ì¸¡í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n\nì—¬ê¸°ì„œëŠ” `iperf`ë¥¼ í†µí•´ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•˜ê³ , `ONOS WEB GUI`ë¥¼ í†µí•´ì„œ trafficì„ ê´€ì¸¡í•  ê²ƒì´ë‹¤.\n\nì•„ë˜ commandë¥¼ í†µí•´ì„œ `h51`ê°€ ìœ„ì—ì„œ ì–¸ê¸‰í•œ í›„ì§€ì‚° ì•„ë˜ì˜ ì„œë²„ê°€ ë˜ê³ , `h52`ê°€ ë°±ì—… ì„œë²„ê°€ ë˜ëŠ” ìƒí™©ì„ ê°€ì •í•˜ê¸° ìœ„í•´ì„œ í•´ë‹¹ ë‘ ìœ„ì¹˜ë¥¼ `iperf server`ë¡œ ì§€ì •í•œë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  ê´€ì¸¡ì†Œ(`h11`, `h12`, ..., `h41`, `h42`)ì—ì„œ `iperf client`ê°€ ë˜ì–´ trafficì„ ì£¼ê¸°ì ìœ¼ë¡œ ë³´ë‚´ë„ë¡ ì„¤ì •í•œë‹¤.\n\n```bash\nmininet\u003e h51 iperf -s -u \u0026\nmininet\u003e h52 iperf -s -u \u0026\n\n# xterm ëª…ë ¹ì–´ëŠ” hostì— ìœ„ì—ì„œ ì„¤ëª…í•œ XQuartzê°€ ì •ìƒì ìœ¼ë¡œ ì„¤ì¹˜ë˜ì–´ìˆì–´ì•¼ ì‘ë™í•œë‹¤.\nmininet\u003e xterm h11 h12 h21 h22 h31 h32 h41 h42\n\n# ê° clientì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ìš”ì²­ì„ ì „ì†¡í•œë‹¤.\n$ iperf -u -c 10.0.0.9 -i1 -t100000000000\n```\n\n![ONOSì—ì„œ í™•ì¸í•œ ëª¨ìŠµ](/images/sdn-tuto-example-1.png)\n\n## 5. Flow Control\n\nê¸°ë³¸ì ìœ¼ë¡œ Flowë¥¼ ì œì–´í•  ìˆ˜ ìˆëŠ” ë°©ì‹ì€ í•´ë‹¹ Settingì„ ìˆ˜í–‰í•¼ ë•Œ, 3ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤.\n\n1. Open vSwitch CLI : OpenFlow Protocolì— ê¸°ë°˜í•œ ì—¬ëŸ¬ CLI ëª…ë ¹ì–´ë¥¼ ì§€ì›í•œë‹¤. ì´ë¥¼ í†µí•´ì„œ, Flow Tableì„ ì§ì ‘ ì‘ì„±í•˜ëŠ” ê²ƒì´ ê°€ëŠ¥í•˜ë‹¤.\n2. ONOS REST API : ONOS REST APIë¥¼ í†µí•´ì„œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤. ì´ë•Œì—ëŠ” ONOSê°€ high levelë¡œ ì¶”ìƒí™”í•œ flow control ë°©ì‹ì„ í™œìš©í•´ì•¼ í•œë‹¤.(ex. intent) ì´ëŠ” ONOSë¥¼ ì‹¤í–‰í•˜ê³  ìˆë‹¤ë©´, ë‹¤ìŒ urlì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•˜ë‹¤. [http://localhost:8181/onos/v1/docs/](http://localhost:8181/onos/v1/docs/)\n3. ONOS CLI : ONOS CLI ëª…ë ¹ì–´ë¥¼ í†µí•´ì„œ ì œì–´ê°€ ê°€ëŠ¥í•˜ë‹¤.\n\nì´ì œë¶€í„° í•´ë‹¹ ì„¸ê°€ì§€ ë°©ì‹ì„ ì ì ˆíˆ í™œìš©í•˜ì—¬ ì„¤ì •í•˜ì—¬ ê° Simulation ë³„ë¡œ ìˆ˜í–‰ì„ í•´ë³´ë„ë¡ í•˜ê² ë‹¤.\n\n### Scenario 1\n\n\u003e **ì¤‘ê°„ì— linkê°€ ëŠì–´ì§„ ê²½ìš° with ONOS CLI**\n\n![sdn-tuto-scenario-1](/images/sdn-tuto-scenario-1.png)\n\në¨¼ì € ëª¨ë“  hostì—ì„œ serverë¡œ trafficì„ ì¤‘ê³„í•´ì¤„ ìˆ˜ ìˆë„ë¡ ë‹¤ìŒê³¼ ê°™ì´ intentë¥¼ ì„¤ì •í•´ì¤„ ìˆ˜ ìˆë‹¤. íŠ¹ì • hostê°„ì˜ intentë¥¼ ì„¤ì •í•˜ë©´ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ ì°¾ì•„ì„œ routingì„ ìˆ˜í–‰í•´ì¤€ë‹¤. ë˜í•œ, íŠ¹ì • ì—°ê²°ì´ ì¤‘ê°„ì— ì‚¬ë¼ì ¸ë„ ìë™ìœ¼ë¡œ ê²½ë¡œë¥¼ ì¬ì„¤ì •í•œë‹¤.\n\n```bash\nonos\u003e add-host-intent 00:00:00:00:00:01/None 00:00:00:00:00:09/None\nonos\u003e add-host-intent 00:00:00:00:00:02/None 00:00:00:00:00:09/None\nonos\u003e add-host-intent 00:00:00:00:00:03/None 00:00:00:00:00:09/None\nonos\u003e add-host-intent 00:00:00:00:00:04/None 00:00:00:00:00:09/None\nonos\u003e add-host-intent 00:00:00:00:00:05/None 00:00:00:00:00:09/None\nonos\u003e add-host-intent 00:00:00:00:00:06/None 00:00:00:00:00:09/None\nonos\u003e add-host-intent 00:00:00:00:00:07/None 00:00:00:00:00:09/None\nonos\u003e add-host-intent 00:00:00:00:00:08/None 00:00:00:00:00:09/None\n```\n\nì´ í›„ì— mininetì—ì„œ íŠ¹ì • linkë¥¼ ë¹„í™œì„±í™”ì‹œí‚¨ë‹¤.\n\n```bash\nmininet\u003e link s11 l25 down\n```\n\n![sdn-tuto-scenario-1-result](/images/sdn-tuto-scenario-1-result.png)\n\n### Scenario 2\n\n\u003e **Load Balancingì„ í†µí•´ì„œ ì¸¡ì • ë°ì´í„° ê³ ë¥´ê²Œ ë¶„ë°° with Open Vswitch CLI**\n\n![sdn-tuto-scenario-2](/images/sdn-tuto-scenario-2.png)\n\nì´ì „ Scenarioì˜ intentë¥¼ ìœ ì§€í•œ ìƒíƒœì—ì„œ OpenFlowì˜ Group Tableì˜ `select` typeì„ í™œìš©í•˜ë©´, Load Balancingì´ ê°€ëŠ¥í•˜ë‹¤. ë¨¼ì €, ONOS CLIì—ì„œ ì™¸ë¶€ flowRuleë„ ë°›ì•„ë“¤ì´ë„ë¡ ì„¤ì •í•œ í›„\n\n```bash\n$ onos localhost\nonos\u003e cfg set org.onosproject.net.flow.impl.FlowRuleManager allowExtraneousRules True\n```\n\në‹¤ìŒê³¼ ê°™ì´ group entry ìƒì„± ë° flowì¶”ê°€ë¡œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ sudo ovs-ofctl add-group l21 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l21 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l21 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l22 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l22 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l22 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l23 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l23 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l23 in_port=4,actions=group:1 -O OpenFlow11\n\n$ sudo ovs-ofctl add-group l24 \\\n  \"group_id=1,type=select,bucket=output:1,bucket=output:2\" -O OpenFlow11\n$ sudo ovs-ofctl add-flow l24 in_port=3,actions=group:1 -O OpenFlow11\n$ sudo ovs-ofctl add-flow l24 in_port=4,actions=group:1 -O OpenFlow11\n```\n\n![sdn-tuto-scenario-2-result](/images/sdn-tuto-scenario-2-result.png)\n\n### Scenario 3\n\n\u003e **h51ì´ downë˜ì–´ h52ë¡œ traffic redirection with Open Vswitch CLI**\n\n![sdn-tuto-scenario-3](/images/sdn-tuto-scenario-3.png)\n\nserverë¡œ ê°€ëŠ” Leaf Switchì—ì„œ packetì˜ IP, MAC ì£¼ì†Œë¥¼ ë³€ê²½í•˜ì—¬ Redirectionì´ ê°€ëŠ¥í•˜ë‹¤.\n\n```bash\n$ sudo ovs-ofctl add-flow l25 \\\n  \"in_port=1, dl_dst=00:00:00:00:00:09,\n   actions=mod_dl_dst:00:00:00:00:00:10,mod_nw_dst:10.0.0.10,output:4\"\n$ sudo ovs-ofctl ad-flow l25 \\\n  \"in_port=4, dl_src=00:00:00:00:00:10,\n   actions=mod_dl_src:00:00:00:00:00:09,mod_nw_dst:10.0.0.9,output:1\"\n```\n\n![sdn-tuto-scenario-3-result](/images/sdn-tuto-scenario-3-result.png)\n\n### Scenario 4\n\n\u003e **Meterë¥¼ ì´ìš©í•´ì„œ ê´€ì¸¡ì†Œë¡œ ê°€ëŠ” ê³¼ë„í•œ traffic ì°¨ë‹¨ with ONOS REST API**\n\n![sdn-tuto-scenario-4](/images/sdn-tuto-scenario-4.png)\n\níŠ¹ì • Switchì—ì„œ íŠ¹ì • portë¡œ ë‚˜ê°€ëŠ” trafficì˜ ìµœëŒ€ê°’ì„ `500KB/s`ë¡œ ì œí•œí•˜ëŠ” ì˜ˆì‹œì´ë‹¤.\n\n- Meterë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ REST API  \n  **`/meters/of:000000000000000c`ë¡œ POST ìš”ì²­**\n\n```json\n{\n  \"deviceId\": \"of:000000000000000c\",\n  \"unit\": \"KB_PER_SEC\",\n  \"burst\": true,\n  \"bands\": [\n    {\n      \"type\": \"DROP\",\n      \"rate\": 500,\n      \"burstSize\": 0,\n      \"prec\": 0\n    }\n  ]\n}\n```\n\n- Meterë¥¼ íŠ¹ì • Switchì— ì ìš©í•˜ê¸° ìœ„í•œ REST API  \n  **`/flows/of:000000000000000c?appId=meter`ë¡œ POST ìš”ì²­**\n\n```json\n{\n  \"priority\": 40000,\n  \"isPermanent\": true,\n  \"deviceId\": \"of:000000000000000c\",\n  \"treatment\": {\n    \"instructions\": [\n      {\n        \"type\": \"METER\",\n        \"meterId\": \"1\"\n      },\n      {\n        \"type\": \"OUTPUT\",\n        \"port\": \"2\"\n      }\n    ]\n  },\n  \"selector\": {\n    \"criteria\": [\n      {\n        \"type\": \"ETH_TYPE\",\n        \"ethType\": \"0x0800\"\n      }\n    ]\n  }\n}\n```\n\n![sdn-tuto-scenario-4-result](/images/sdn-tuto-scenario-4-result.png)\n\n## Reference\n\n- Thumbnail : Photo by [Alina Grubnyak](https://unsplash.com/@alinnnaaaa?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText) on [Unsplash](https://unsplash.com/s/photos/virtual-network?utm_source=unsplash\u0026utm_medium=referral\u0026utm_content=creditCopyText)\n","slug":"sdn-tutorial","date":"2022-06-03 19:54","title":"SDN Tutorial","category":"Network","tags":["SDN","Mininet","OpenFlow","ONOS","OpenVSwitch"],"desc":"SDNì„ ì‹¤ì œ êµ¬í˜„í•˜ëŠ” ê²ƒì€ êµ‰ì¥íˆ ì–´ë ¤ìš´ ì¼ì´ë‹¤. ë”°ë¼ì„œ, Mininetì„ í™œìš©í•˜ì—¬ ê°€ìƒì˜ Topologyë¥¼ í†µí•´ì„œ ë¨¼ì € í…ŒìŠ¤íŒ…ì„ í•œ í›„ì— ì‹¤ì œë¡œ ì ìš©í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.ë”°ë¼ì„œ, í•´ë‹¹ Postingì—ì„œëŠ” Mininet, OpenFlow, Open VSwitch, ONOSë¥¼ ì´ìš©í•˜ì—¬ ê°„ë‹¨í•œ Tutorialì„ ìˆ˜í–‰í•´ë³¼ ê²ƒì´ë‹¤. ì´ Postingì„ í†µí•´ì„œ ë‚¨ê¸°ê³ ì í•˜ëŠ” ê²ƒì€ SDNì„ í…ŒìŠ¤íŒ…í•˜ëŠ” ì ˆì°¨ë¥¼ ìµíˆëŠ” ê²ƒì´ë‹¤.","thumbnailSrc":"https://euidong.github.io/images/sdn-tuto-hero.jpg"}],"params":{"subject":"OpenVSwitch"}},"__N_SSG":true},"page":"/tags/[subject]","query":{"subject":"OpenVSwitch"},"buildId":"VEdUcpPdkgI5huIkFqtJ7","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>